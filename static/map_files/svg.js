//>>built
require({cache:{"dojox/gfx/shape":function(){define("./_base dojo/_base/lang dojo/_base/declare dojo/_base/kernel dojo/_base/sniff dojo/on dojo/_base/array dojo/dom-construct dojo/_base/Color ./matrix".split(" "),function(h,x,w,A,u,f,p,n,r,d){function v(b,k){for(var l=b.length-1;k<l;)b[k]=b[++k];b.length=l}var t=h.shape={};t.Shape=w("dojox.gfx.shape.Shape",null,{constructor:function(){this.parentMatrix=this.parent=this.bbox=this.strokeStyle=this.fillStyle=this.matrix=this.shape=this.rawNode=null;
if(u("gfxRegistry")){var b=t.register(this);this.getUID=function(){return b}}},destroy:function(){u("gfxRegistry")&&t.dispose(this);this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=null);this.rawNode=null},getNode:function(){return this.rawNode},getShape:function(){return this.shape},getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},getStroke:function(){return this.strokeStyle},getParent:function(){return this.parent},getBoundingBox:function(){return this.bbox},
getTransformedBoundingBox:function(){var b=this.getBoundingBox();if(!b)return null;var k=this._getRealMatrix();return[d.multiplyPoint(k,b.x,b.y),d.multiplyPoint(k,b.x+b.width,b.y),d.multiplyPoint(k,b.x+b.width,b.y+b.height),d.multiplyPoint(k,b.x,b.y+b.height)]},getEventSource:function(){return this.rawNode},setClip:function(b){this.clip=b},getClip:function(){return this.clip},setShape:function(b){this.shape=h.makeParameters(this.shape,b);this.bbox=null;return this},setFill:function(b){if(!b)return this.fillStyle=
null,this;var k=null;if("object"==typeof b&&"type"in b)switch(b.type){case "linear":k=h.makeParameters(h.defaultLinearGradient,b);break;case "radial":k=h.makeParameters(h.defaultRadialGradient,b);break;case "pattern":k=h.makeParameters(h.defaultPattern,b)}else k=h.normalizeColor(b);this.fillStyle=k;return this},setStroke:function(b){if(!b)return this.strokeStyle=null,this;if("string"==typeof b||x.isArray(b)||b instanceof r)b={color:b};b=this.strokeStyle=h.makeParameters(h.defaultStroke,b);b.color=
h.normalizeColor(b.color);return this},setTransform:function(b){this.matrix=d.clone(b?d.normalize(b):d.identity);return this._applyTransform()},_applyTransform:function(){return this},moveToFront:function(){var b=this.getParent();b&&(b._moveChildToFront(this),this._moveToFront());return this},moveToBack:function(){var b=this.getParent();b&&(b._moveChildToBack(this),this._moveToBack());return this},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(b){return b?this.setTransform([this.matrix,
b]):this},applyLeftTransform:function(b){return b?this.setTransform([b,this.matrix]):this},applyTransform:function(b){return b?this.setTransform([this.matrix,b]):this},removeShape:function(b){this.parent&&this.parent.remove(this,b);return this},_setParent:function(b,k){this.parent=b;return this._updateParentMatrix(k)},_updateParentMatrix:function(b){this.parentMatrix=b?d.clone(b):null;return this._applyTransform()},_getRealMatrix:function(){for(var b=this.matrix,k=this.parent;k;)k.matrix&&(b=d.multiply(k.matrix,
b)),k=k.parent;return b}});t._eventsProcessing={on:function(b,k){return f(this.getEventSource(),b,t.fixCallback(this,h.fixTarget,k))},connect:function(b,k,l){"on"==b.substring(0,2)&&(b=b.substring(2));return this.on(b,l?x.hitch(k,l):k)},disconnect:function(b){return b.remove()}};t.fixCallback=function(b,k,l,e){e||(e=l,l=null);if(x.isString(e)){l=l||A.global;if(!l[e])throw['dojox.gfx.shape.fixCallback: scope["',e,'"] is null (scope\x3d"',l,'")'].join("");return function(y){return k(y,b)?l[e].apply(l,
arguments||[]):void 0}}return l?function(y){return k(y,b)?e.apply(l,arguments||[]):void 0}:function(y){return k(y,b)?e.apply(l,arguments):void 0}};x.extend(t.Shape,t._eventsProcessing);t.Container={_init:function(){this.children=[];this._batch=0},openBatch:function(){return this},closeBatch:function(){return this},add:function(b){var k=b.getParent();k&&k.remove(b,!0);this.children.push(b);return b._setParent(this,this._getRealMatrix())},remove:function(b,k){for(var l=0;l<this.children.length;++l)if(this.children[l]==
b){k||(b.parent=null,b.parentMatrix=null);v(this.children,l);break}return this},clear:function(b){for(var k,l=0;l<this.children.length;++l)k=this.children[l],k.parent=null,k.parentMatrix=null,b&&k.destroy();this.children=[];return this},getBoundingBox:function(){if(this.children){var b=null;p.forEach(this.children,function(k){var l=k.getBoundingBox();l&&((k=k.getTransform())&&(l=d.multiplyRectangle(k,l)),b?(b.x=Math.min(b.x,l.x),b.y=Math.min(b.y,l.y),b.endX=Math.max(b.endX,l.x+l.width),b.endY=Math.max(b.endY,
l.y+l.height)):b={x:l.x,y:l.y,endX:l.x+l.width,endY:l.y+l.height})});b&&(b.width=b.endX-b.x,b.height=b.endY-b.y);return b}return null},_moveChildToFront:function(b){for(var k=0;k<this.children.length;++k)if(this.children[k]==b){v(this.children,k);this.children.push(b);break}return this},_moveChildToBack:function(b){for(var k=0;k<this.children.length;++k)if(this.children[k]==b){v(this.children,k);this.children.unshift(b);break}return this}};t.Surface=w("dojox.gfx.shape.Surface",null,{constructor:function(){this._parent=
this.rawNode=null;this._nodes=[];this._events=[]},destroy:function(){p.forEach(this._nodes,n.destroy);this._nodes=[];p.forEach(this._events,function(b){b&&b.remove()});this._events=[];this.rawNode=null;if(u("ie"))for(;this._parent.lastChild;)n.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},_getRealMatrix:function(){return null},isLoaded:!0,onLoad:function(b){},whenLoaded:function(b,k){var l=x.hitch(b,k);if(this.isLoaded)l(this);
else f.once(this,"load",function(e){l(e)})}});x.extend(t.Surface,t._eventsProcessing);t.Rect=w("dojox.gfx.shape.Rect",t.Shape,{constructor:function(b){this.shape=h.getDefault("Rect");this.rawNode=b},getBoundingBox:function(){return this.shape}});t.Ellipse=w("dojox.gfx.shape.Ellipse",t.Shape,{constructor:function(b){this.shape=h.getDefault("Ellipse");this.rawNode=b},getBoundingBox:function(){if(!this.bbox){var b=this.shape;this.bbox={x:b.cx-b.rx,y:b.cy-b.ry,width:2*b.rx,height:2*b.ry}}return this.bbox}});
t.Circle=w("dojox.gfx.shape.Circle",t.Shape,{constructor:function(b){this.shape=h.getDefault("Circle");this.rawNode=b},getBoundingBox:function(){if(!this.bbox){var b=this.shape;this.bbox={x:b.cx-b.r,y:b.cy-b.r,width:2*b.r,height:2*b.r}}return this.bbox}});t.Line=w("dojox.gfx.shape.Line",t.Shape,{constructor:function(b){this.shape=h.getDefault("Line");this.rawNode=b},getBoundingBox:function(){if(!this.bbox){var b=this.shape;this.bbox={x:Math.min(b.x1,b.x2),y:Math.min(b.y1,b.y2),width:Math.abs(b.x2-
b.x1),height:Math.abs(b.y2-b.y1)}}return this.bbox}});t.Polyline=w("dojox.gfx.shape.Polyline",t.Shape,{constructor:function(b){this.shape=h.getDefault("Polyline");this.rawNode=b},setShape:function(b,k){b&&b instanceof Array?(this.inherited(arguments,[{points:b}]),k&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[b]);return this},_normalizePoints:function(){var b=this.shape.points,k=b&&b.length;if(k&&"number"==typeof b[0]){for(var l=[],e=0;e<k;e+=
2)l.push({x:b[e],y:b[e+1]});this.shape.points=l}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var b=this.shape.points,k=b.length,l=b[0],e=l.x,y=l.y,D=l.x,B=l.y,E=1;E<k;++E)l=b[E],e>l.x&&(e=l.x),D<l.x&&(D=l.x),y>l.y&&(y=l.y),B<l.y&&(B=l.y);this.bbox={x:e,y:y,width:D-e,height:B-y}}return this.bbox}});t.Image=w("dojox.gfx.shape.Image",t.Shape,{constructor:function(b){this.shape=h.getDefault("Image");this.rawNode=b},getBoundingBox:function(){return this.shape},setStroke:function(){return this},
setFill:function(){return this}});t.Text=w(t.Shape,{constructor:function(b){this.fontStyle=null;this.shape=h.getDefault("Text");this.rawNode=b},getFont:function(){return this.fontStyle},setFont:function(b){this.fontStyle="string"==typeof b?h.splitFontString(b):h.makeParameters(h.defaultFont,b);this._setFont();return this},getBoundingBox:function(){var b=null;this.getShape().text&&(b=h._base._computeTextBoundingBox(this));return b}});t.Creator={createShape:function(b){switch(b.type){case h.defaultPath.type:return this.createPath(b);
case h.defaultRect.type:return this.createRect(b);case h.defaultCircle.type:return this.createCircle(b);case h.defaultEllipse.type:return this.createEllipse(b);case h.defaultLine.type:return this.createLine(b);case h.defaultPolyline.type:return this.createPolyline(b);case h.defaultImage.type:return this.createImage(b);case h.defaultText.type:return this.createText(b);case h.defaultTextPath.type:return this.createTextPath(b)}return null},createGroup:function(){return this.createObject(h.Group)},createRect:function(b){return this.createObject(h.Rect,
b)},createEllipse:function(b){return this.createObject(h.Ellipse,b)},createCircle:function(b){return this.createObject(h.Circle,b)},createLine:function(b){return this.createObject(h.Line,b)},createPolyline:function(b){return this.createObject(h.Polyline,b)},createImage:function(b){return this.createObject(h.Image,b)},createText:function(b){return this.createObject(h.Text,b)},createPath:function(b){return this.createObject(h.Path,b)},createTextPath:function(b){return this.createObject(h.TextPath,{}).setText(b)},
createObject:function(b,k){return null}};return t})},"dojox/gfx/path":function(){define(["./_base","dojo/_base/lang","dojo/_base/declare","./matrix","./shape"],function(h,x,w,A,u){u=w("dojox.gfx.path.Path",u.Shape,{constructor:function(f){this.shape=x.clone(h.defaultPath);this.segments=[];this.tbbox=null;this.absolute=!0;this.last={};this.rawNode=f;this.segmented=!1},setAbsoluteMode:function(f){this._confirmSegmented();this.absolute="string"==typeof f?"absolute"==f:f;return this},getAbsoluteMode:function(){this._confirmSegmented();
return this.absolute},getBoundingBox:function(){this._confirmSegmented();return this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},_getRealBBox:function(){this._confirmSegmented();if(this.tbbox)return this.tbbox;var f=this.bbox,p=this._getRealMatrix();this.bbox=null;for(var n=0,r=this.segments.length;n<r;++n)this._updateWithSegment(this.segments[n],p);p=this.bbox;this.bbox=f;return this.tbbox=p?[{x:p.l,y:p.t},{x:p.r,y:p.t},{x:p.r,
y:p.b},{x:p.l,y:p.b}]:null},getLastPosition:function(){this._confirmSegmented();return"x"in this.last?this.last:null},_applyTransform:function(){this.tbbox=null;return this.inherited(arguments)},_updateBBox:function(f,p,n){n&&(p=A.multiplyPoint(n,f,p),f=p.x,p=p.y);this.bbox&&"l"in this.bbox?(this.bbox.l>f&&(this.bbox.l=f),this.bbox.r<f&&(this.bbox.r=f),this.bbox.t>p&&(this.bbox.t=p),this.bbox.b<p&&(this.bbox.b=p)):this.bbox={l:f,b:p,r:f,t:p}},_updateWithSegment:function(f,p){var n=f.args,r=n.length,
d;switch(f.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(d=0;d<r;d+=2)this._updateBBox(n[d],n[d+1],p);this.last.x=n[r-2];this.last.y=n[r-1];this.absolute=!0;break;case "H":for(d=0;d<r;++d)this._updateBBox(n[d],this.last.y,p);this.last.x=n[r-1];this.absolute=!0;break;case "V":for(d=0;d<r;++d)this._updateBBox(this.last.x,n[d],p);this.last.y=n[r-1];this.absolute=!0;break;case "m":d=0;"x"in this.last||(this._updateBBox(this.last.x=n[0],this.last.y=n[1],p),d=2);for(;d<r;d+=2)this._updateBBox(this.last.x+=
n[d],this.last.y+=n[d+1],p);this.absolute=!1;break;case "l":case "t":for(d=0;d<r;d+=2)this._updateBBox(this.last.x+=n[d],this.last.y+=n[d+1],p);this.absolute=!1;break;case "h":for(d=0;d<r;++d)this._updateBBox(this.last.x+=n[d],this.last.y,p);this.absolute=!1;break;case "v":for(d=0;d<r;++d)this._updateBBox(this.last.x,this.last.y+=n[d],p);this.absolute=!1;break;case "c":for(d=0;d<r;d+=6)this._updateBBox(this.last.x+n[d],this.last.y+n[d+1],p),this._updateBBox(this.last.x+n[d+2],this.last.y+n[d+3],p),
this._updateBBox(this.last.x+=n[d+4],this.last.y+=n[d+5],p);this.absolute=!1;break;case "s":case "q":for(d=0;d<r;d+=4)this._updateBBox(this.last.x+n[d],this.last.y+n[d+1],p),this._updateBBox(this.last.x+=n[d+2],this.last.y+=n[d+3],p);this.absolute=!1;break;case "A":for(d=0;d<r;d+=7)this._updateBBox(n[d+5],n[d+6],p);this.last.x=n[r-2];this.last.y=n[r-1];this.absolute=!0;break;case "a":for(d=0;d<r;d+=7)this._updateBBox(this.last.x+=n[d+5],this.last.y+=n[d+6],p);this.absolute=!1}f=[f.action];for(d=0;d<
r;++d)f.push(h.formatNumber(n[d],!0));if("string"==typeof this.shape.path)this.shape.path+=f.join("");else for(d=0,r=f.length;d<r;++d)this.shape.path.push(f[d])},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(f,p){this.tbbox=null;var n=this._validSegments[f.toLowerCase()];"number"==typeof n&&(n?p.length>=n&&(f={action:f,args:p.slice(0,p.length-p.length%n)},this.segments.push(f),this._updateWithSegment(f)):(f={action:f,args:[]},this.segments.push(f),this._updateWithSegment(f)))},
_collectArgs:function(f,p){for(var n=0;n<p.length;++n){var r=p[n];"boolean"==typeof r?f.push(r?1:0):"number"==typeof r?f.push(r):r instanceof Array?this._collectArgs(f,r):"x"in r&&"y"in r&&f.push(r.x,r.y)}},moveTo:function(){this._confirmSegmented();var f=[];this._collectArgs(f,arguments);this._pushSegment(this.absolute?"M":"m",f);return this},lineTo:function(){this._confirmSegmented();var f=[];this._collectArgs(f,arguments);this._pushSegment(this.absolute?"L":"l",f);return this},hLineTo:function(){this._confirmSegmented();
var f=[];this._collectArgs(f,arguments);this._pushSegment(this.absolute?"H":"h",f);return this},vLineTo:function(){this._confirmSegmented();var f=[];this._collectArgs(f,arguments);this._pushSegment(this.absolute?"V":"v",f);return this},curveTo:function(){this._confirmSegmented();var f=[];this._collectArgs(f,arguments);this._pushSegment(this.absolute?"C":"c",f);return this},smoothCurveTo:function(){this._confirmSegmented();var f=[];this._collectArgs(f,arguments);this._pushSegment(this.absolute?"S":
"s",f);return this},qCurveTo:function(){this._confirmSegmented();var f=[];this._collectArgs(f,arguments);this._pushSegment(this.absolute?"Q":"q",f);return this},qSmoothCurveTo:function(){this._confirmSegmented();var f=[];this._collectArgs(f,arguments);this._pushSegment(this.absolute?"T":"t",f);return this},arcTo:function(){this._confirmSegmented();var f=[];this._collectArgs(f,arguments);this._pushSegment(this.absolute?"A":"a",f);return this},closePath:function(){this._confirmSegmented();this._pushSegment("Z",
[]);return this},_confirmSegmented:function(){if(!this.segmented){var f=this.shape.path;this.shape.path=[];this._setPath(f);this.shape.path=this.shape.path.join("");this.segmented=!0}},_setPath:function(f){f=x.isArray(f)?f:f.match(h.pathSvgRegExp);this.segments=[];this.absolute=!0;this.bbox={};this.last={};if(f){for(var p="",n=[],r=f.length,d=0;d<r;++d){var v=f[d],t=parseFloat(v);isNaN(t)?(p&&this._pushSegment(p,n),n=[],p=v):n.push(t)}this._pushSegment(p,n)}},setShape:function(f){this.inherited(arguments,
["string"==typeof f?{path:f}:f]);this.segmented=!1;this.segments=[];h.lazyPathSegmentation||this._confirmSegmented();return this},_2PI:2*Math.PI});w=w("dojox.gfx.path.TextPath",u,{constructor:function(f){"text"in this||(this.text=x.clone(h.defaultTextPath));"fontStyle"in this||(this.fontStyle=x.clone(h.defaultFont))},getText:function(){return this.text},setText:function(f){this.text=h.makeParameters(this.text,"string"==typeof f?{text:f}:f);this._setText();return this},getFont:function(){return this.fontStyle},
setFont:function(f){this.fontStyle="string"==typeof f?h.splitFontString(f):h.makeParameters(h.defaultFont,f);this._setFont();return this}});return h.path={Path:u,TextPath:w}})},"*noref":1}});
define("dojox/gfx/svg","dojo/_base/lang dojo/_base/sniff dojo/_base/window dojo/dom dojo/_base/declare dojo/_base/array dojo/dom-geometry dojo/dom-attr dojo/_base/Color ./_base ./shape ./path".split(" "),function(h,x,w,A,u,f,p,n,r,d,v,t){function b(a,c){return w.doc.createElementNS?w.doc.createElementNS(a,c):w.doc.createElement(c)}function k(a,c,g,m){return a.setAttributeNS?a.setAttributeNS(c,g,m):a.setAttribute(g,m)}function l(a){return e.useSvgWeb?w.doc.createTextNode(a,!0):w.doc.createTextNode(a)}
var e=d.svg={};e.useSvgWeb="undefined"!=typeof window.svgweb;var y=navigator.userAgent,D=x("ios"),B=x("android"),E=x("chrome")||B&&4<=B?"auto":"optimizeLegibility";e.xmlns={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};e.getRef=function(a){return a&&"none"!=a?a.match(/^url\(#.+\)$/)?A.byId(a.slice(5,-1)):a.match(/^#dojoUnique\d+$/)?A.byId(a.slice(1)):null:null};e.dasharray={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,
3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};var G=0;e.Shape=u("dojox.gfx.svg.Shape",v.Shape,{destroy:function(){if(this.fillStyle&&"type"in this.fillStyle){var a=this.rawNode.getAttribute("fill");(a=e.getRef(a))&&a.parentNode.removeChild(a)}this.clip&&(a=this.rawNode.getAttribute("clip-path"))&&(a=A.byId(a.match(/gfx_clip[\d]+/)[0]))&&a.parentNode.removeChild(a);v.Shape.prototype.destroy.apply(this,arguments)},setFill:function(a){if(!a)return this.fillStyle=
null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",0),this;var c=function(m){this.setAttribute(m,g[m].toFixed(8))};if("object"==typeof a&&"type"in a){switch(a.type){case "linear":var g=d.makeParameters(d.defaultLinearGradient,a);a=this._setFillObject(g,"linearGradient");f.forEach(["x1","y1","x2","y2"],c,a);break;case "radial":g=d.makeParameters(d.defaultRadialGradient,a);a=this._setFillObject(g,"radialGradient");f.forEach(["cx","cy","r"],c,a);break;case "pattern":g=
d.makeParameters(d.defaultPattern,a),a=this._setFillObject(g,"pattern"),f.forEach(["x","y","width","height"],c,a)}this.fillStyle=g;return this}this.fillStyle=g=d.normalizeColor(a);this.rawNode.setAttribute("fill",g.toCss());this.rawNode.setAttribute("fill-opacity",g.a);this.rawNode.setAttribute("fill-rule","evenodd");return this},setStroke:function(a){var c=this.rawNode;if(!a)return this.strokeStyle=null,c.setAttribute("stroke","none"),c.setAttribute("stroke-opacity",0),this;if("string"==typeof a||
h.isArray(a)||a instanceof r)a={color:a};a=this.strokeStyle=d.makeParameters(d.defaultStroke,a);a.color=d.normalizeColor(a.color);if(a){var g=0>a.width?0:a.width;c.setAttribute("stroke",a.color.toCss());c.setAttribute("stroke-opacity",a.color.a);c.setAttribute("stroke-width",g);c.setAttribute("stroke-linecap",a.cap);"number"==typeof a.join?(c.setAttribute("stroke-linejoin","miter"),c.setAttribute("stroke-miterlimit",a.join)):c.setAttribute("stroke-linejoin",a.join);var m=a.style.toLowerCase();m in
e.dasharray&&(m=e.dasharray[m]);if(m instanceof Array){m=h._toArray(m);var q;for(q=0;q<m.length;++q)m[q]*=g;if("butt"!=a.cap){for(q=0;q<m.length;q+=2)m[q]-=g,1>m[q]&&(m[q]=1);for(q=1;q<m.length;q+=2)m[q]+=g}m=m.join(",")}c.setAttribute("stroke-dasharray",m);c.setAttribute("dojoGfxStrokeStyle",a.style)}return this},_getParentSurface:function(){for(var a=this.parent;a&&!(a instanceof d.Surface);a=a.parent);return a},_setFillObject:function(a,c){var g=e.xmlns.svg;this.fillStyle=a;var m=this._getParentSurface().defNode,
q=this.rawNode.getAttribute("fill");if(q=e.getRef(q))if(q.tagName.toLowerCase()!=c.toLowerCase()){var z=q.id;q.parentNode.removeChild(q);q=b(g,c);q.setAttribute("id",z);m.appendChild(q)}else for(;q.childNodes.length;)q.removeChild(q.lastChild);else q=b(g,c),q.setAttribute("id",d._base._getUniqueId()),m.appendChild(q);if("pattern"==c)q.setAttribute("patternUnits","userSpaceOnUse"),g=b(g,"image"),g.setAttribute("x",0),g.setAttribute("y",0),g.setAttribute("width",(0>a.width?0:a.width).toFixed(8)),g.setAttribute("height",
(0>a.height?0:a.height).toFixed(8)),k(g,e.xmlns.xlink,"xlink:href",a.src),q.appendChild(g);else for(q.setAttribute("gradientUnits","userSpaceOnUse"),c=0;c<a.colors.length;++c){m=a.colors[c];z=b(g,"stop");var F=m.color=d.normalizeColor(m.color);z.setAttribute("offset",m.offset.toFixed(8));z.setAttribute("stop-color",F.toCss());z.setAttribute("stop-opacity",F.a);q.appendChild(z)}this.rawNode.setAttribute("fill","url(#"+q.getAttribute("id")+")");this.rawNode.removeAttribute("fill-opacity");this.rawNode.setAttribute("fill-rule",
"evenodd");return q},_applyTransform:function(){if(this.matrix){var a=this.matrix;this.rawNode.setAttribute("transform","matrix("+a.xx.toFixed(8)+","+a.yx.toFixed(8)+","+a.xy.toFixed(8)+","+a.yy.toFixed(8)+","+a.dx.toFixed(8)+","+a.dy.toFixed(8)+")")}else this.rawNode.removeAttribute("transform");return this},setRawNode:function(a){a=this.rawNode=a;"image"!=this.shape.type&&a.setAttribute("fill","none");a.setAttribute("fill-opacity",0);a.setAttribute("stroke","none");a.setAttribute("stroke-opacity",
0);a.setAttribute("stroke-width",1);a.setAttribute("stroke-linecap","butt");a.setAttribute("stroke-linejoin","miter");a.setAttribute("stroke-miterlimit",4);a.__gfxObject__=this},setShape:function(a){this.shape=d.makeParameters(this.shape,a);for(var c in this.shape)if("type"!=c){a=this.shape[c];if("width"===c||"height"===c)a=0>a?0:a;this.rawNode.setAttribute(c,a)}this.bbox=null;return this},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);return this},_moveToBack:function(){this.rawNode.parentNode.insertBefore(this.rawNode,
this.rawNode.parentNode.firstChild);return this},setClip:function(a){this.inherited(arguments);var c=a?"width"in a?"rect":"cx"in a?"ellipse":"points"in a?"polyline":"d"in a?"path":null:null;if(a&&!c)return this;"polyline"===c&&(a=h.clone(a),a.points=a.points.join(","));var g,m=n.get(this.rawNode,"clip-path");m&&(g=A.byId(m.match(/gfx_clip[\d]+/)[0]))&&g.removeChild(g.childNodes[0]);a?(g?(c=b(e.xmlns.svg,c),g.appendChild(c)):(m="gfx_clip"+ ++G,this.rawNode.setAttribute("clip-path","url(#"+m+")"),g=
b(e.xmlns.svg,"clipPath"),c=b(e.xmlns.svg,c),g.appendChild(c),this.rawNode.parentNode.insertBefore(g,this.rawNode),n.set(g,"id",m)),n.set(c,a)):(this.rawNode.removeAttribute("clip-path"),g&&g.parentNode.removeChild(g));return this},_removeClipNode:function(){var a,c=n.get(this.rawNode,"clip-path");c&&(a=A.byId(c.match(/gfx_clip[\d]+/)[0]))&&a.parentNode.removeChild(a);return a}});e.Group=u("dojox.gfx.svg.Group",e.Shape,{constructor:function(){v.Container._init.call(this)},setRawNode:function(a){this.rawNode=
a;this.rawNode.__gfxObject__=this},destroy:function(){this.clear(!0);e.Shape.prototype.destroy.apply(this,arguments)}});e.Group.nodeType="g";e.Rect=u("dojox.gfx.svg.Rect",[e.Shape,v.Rect],{setShape:function(a){this.shape=d.makeParameters(this.shape,a);this.bbox=null;for(var c in this.shape)if("type"!=c&&"r"!=c){a=this.shape[c];if("width"===c||"height"===c)a=0>a?0:a;this.rawNode.setAttribute(c,a)}null!=this.shape.r&&(this.rawNode.setAttribute("ry",this.shape.r),this.rawNode.setAttribute("rx",this.shape.r));
return this}});e.Rect.nodeType="rect";e.Ellipse=u("dojox.gfx.svg.Ellipse",[e.Shape,v.Ellipse],{});e.Ellipse.nodeType="ellipse";e.Circle=u("dojox.gfx.svg.Circle",[e.Shape,v.Circle],{});e.Circle.nodeType="circle";e.Line=u("dojox.gfx.svg.Line",[e.Shape,v.Line],{});e.Line.nodeType="line";e.Polyline=u("dojox.gfx.svg.Polyline",[e.Shape,v.Polyline],{setShape:function(a,c){a&&a instanceof Array?(this.shape=d.makeParameters(this.shape,{points:a}),c&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):
this.shape=d.makeParameters(this.shape,a);this.bbox=null;this._normalizePoints();a=[];c=this.shape.points;for(var g=0;g<c.length;++g)a.push(c[g].x.toFixed(8),c[g].y.toFixed(8));this.rawNode.setAttribute("points",a.join(" "));return this}});e.Polyline.nodeType="polyline";e.Image=u("dojox.gfx.svg.Image",[e.Shape,v.Image],{setShape:function(a){this.shape=d.makeParameters(this.shape,a);this.bbox=null;a=this.rawNode;for(var c in this.shape)if("type"!=c&&"src"!=c){var g=this.shape[c];if("width"===c||"height"===
c)g=0>g?0:g;a.setAttribute(c,g)}a.setAttribute("preserveAspectRatio","none");k(a,e.xmlns.xlink,"xlink:href",this.shape.src);a.__gfxObject__=this;return this}});e.Image.nodeType="image";e.Text=u("dojox.gfx.svg.Text",[e.Shape,v.Text],{setShape:function(a){this.shape=d.makeParameters(this.shape,a);this.bbox=null;a=this.rawNode;var c=this.shape;a.setAttribute("x",c.x);a.setAttribute("y",c.y);a.setAttribute("text-anchor",c.align);a.setAttribute("text-decoration",c.decoration);a.setAttribute("rotate",c.rotated?
90:0);a.setAttribute("kerning",c.kerning?"auto":0);a.setAttribute("text-rendering",E);a.firstChild?a.firstChild.nodeValue=c.text:a.appendChild(l(c.text));return this},getTextWidth:function(){var a=this.rawNode,c=a.parentNode;a=a.cloneNode(!0);a.style.visibility="hidden";var g=0,m=a.firstChild.nodeValue;c.appendChild(a);if(""!=m)for(;!g;)g=a.getBBox?parseInt(a.getBBox().width):68;c.removeChild(a);return g},getBoundingBox:function(){var a=null;if(this.getShape().text)try{a=this.rawNode.getBBox()}catch(c){a=
{x:0,y:0,width:0,height:0}}return a}});e.Text.nodeType="text";e.Path=u("dojox.gfx.svg.Path",[e.Shape,t.Path],{_updateWithSegment:function(a){this.inherited(arguments);"string"==typeof this.shape.path&&this.rawNode.setAttribute("d",this.shape.path)},setShape:function(a){this.inherited(arguments);this.shape.path?this.rawNode.setAttribute("d",this.shape.path):this.rawNode.removeAttribute("d");return this}});e.Path.nodeType="path";e.TextPath=u("dojox.gfx.svg.TextPath",[e.Shape,t.TextPath],{_updateWithSegment:function(a){this.inherited(arguments);
this._setTextPath()},setShape:function(a){this.inherited(arguments);this._setTextPath();return this},_setTextPath:function(){if("string"==typeof this.shape.path){var a=this.rawNode;if(!a.firstChild){var c=b(e.xmlns.svg,"textPath"),g=l("");c.appendChild(g);a.appendChild(c)}c=(c=a.firstChild.getAttributeNS(e.xmlns.xlink,"href"))&&e.getRef(c);if(!c&&(g=this._getParentSurface())){g=g.defNode;c=b(e.xmlns.svg,"path");var m=d._base._getUniqueId();c.setAttribute("id",m);g.appendChild(c);k(a.firstChild,e.xmlns.xlink,
"xlink:href","#"+m)}c&&c.setAttribute("d",this.shape.path)}},_setText:function(){var a=this.rawNode;if(!a.firstChild){var c=b(e.xmlns.svg,"textPath"),g=l("");c.appendChild(g);a.appendChild(c)}a=a.firstChild;c=this.text;a.setAttribute("alignment-baseline","middle");switch(c.align){case "middle":a.setAttribute("text-anchor","middle");a.setAttribute("startOffset","50%");break;case "end":a.setAttribute("text-anchor","end");a.setAttribute("startOffset","100%");break;default:a.setAttribute("text-anchor",
"start"),a.setAttribute("startOffset","0%")}a.setAttribute("baseline-shift","0.5ex");a.setAttribute("text-decoration",c.decoration);a.setAttribute("rotate",c.rotated?90:0);a.setAttribute("kerning",c.kerning?"auto":0);a.firstChild.data=c.text}});e.TextPath.nodeType="text";var H=534<function(){var a=/WebKit\/(\d*)/.exec(y);return a?a[1]:0}();e.Surface=u("dojox.gfx.svg.Surface",v.Surface,{constructor:function(){v.Container._init.call(this)},destroy:function(){v.Container.clear.call(this,!0);this.defNode=
null;this.inherited(arguments)},setDimensions:function(a,c){if(!this.rawNode)return this;a=0>a?0:a;c=0>c?0:c;this.rawNode.setAttribute("width",a);this.rawNode.setAttribute("height",c);H&&(this.rawNode.style.width=a,this.rawNode.style.height=c);return this},getDimensions:function(){return this.rawNode?{width:d.normalizedLength(this.rawNode.getAttribute("width")),height:d.normalizedLength(this.rawNode.getAttribute("height"))}:null}});e.createSurface=function(a,c,g){var m=new e.Surface;m.rawNode=b(e.xmlns.svg,
"svg");m.rawNode.setAttribute("overflow","hidden");c&&m.rawNode.setAttribute("width",0>c?0:c);g&&m.rawNode.setAttribute("height",0>g?0:g);c=b(e.xmlns.svg,"defs");m.rawNode.appendChild(c);m.defNode=c;m._parent=A.byId(a);m._parent.appendChild(m.rawNode);d._base._fixMsTouchAction(m);return m};x={_setFont:function(){var a=this.fontStyle;this.rawNode.setAttribute("font-style",a.style);this.rawNode.setAttribute("font-variant",a.variant);this.rawNode.setAttribute("font-weight",a.weight);this.rawNode.setAttribute("font-size",
a.size);this.rawNode.setAttribute("font-family",a.family)}};var C=v.Container;u=e.Container={openBatch:function(){if(!this._batch){var a=e.useSvgWeb?w.doc.createDocumentFragment(!0):w.doc.createDocumentFragment();this.fragment=a}++this._batch;return this},closeBatch:function(){this._batch=0<this._batch?--this._batch:0;this.fragment&&!this._batch&&(this.rawNode.appendChild(this.fragment),delete this.fragment);return this},add:function(a){this!=a.getParent()&&(this.fragment?this.fragment.appendChild(a.rawNode):
this.rawNode.appendChild(a.rawNode),C.add.apply(this,arguments),a.setClip(a.clip));return this},remove:function(a,c){this==a.getParent()&&(this.rawNode==a.rawNode.parentNode&&this.rawNode.removeChild(a.rawNode),this.fragment&&this.fragment==a.rawNode.parentNode&&this.fragment.removeChild(a.rawNode),a._removeClipNode(),C.remove.apply(this,arguments));return this},clear:function(){for(var a=this.rawNode;a.lastChild;)a.removeChild(a.lastChild);var c=this.defNode;if(c){for(;c.lastChild;)c.removeChild(c.lastChild);
a.appendChild(c)}return C.clear.apply(this,arguments)},getBoundingBox:C.getBoundingBox,_moveChildToFront:C._moveChildToFront,_moveChildToBack:C._moveChildToBack};t=e.Creator={createObject:function(a,c){if(!this.rawNode)return null;var g=new a;a=b(e.xmlns.svg,a.nodeType);g.setRawNode(a);g.setShape(c);this.add(g);return g}};h.extend(e.Text,x);h.extend(e.TextPath,x);h.extend(e.Group,u);h.extend(e.Group,v.Creator);h.extend(e.Group,t);h.extend(e.Surface,u);h.extend(e.Surface,v.Creator);h.extend(e.Surface,
t);e.fixTarget=function(a,c){a.gfxTarget||(a.gfxTarget=D&&a.target.wholeText?a.target.parentElement.__gfxObject__:a.target.__gfxObject__);return!0};e.useSvgWeb&&(e.createSurface=function(a,c,g){var m=new e.Surface;c=0>c?0:c;g=0>g?0:g;if(!c||!g){var q=p.position(a);c=c||q.w;g=g||q.h}a=A.byId(a);q=a.id?a.id+"_svgweb":d._base._getUniqueId();var z=b(e.xmlns.svg,"svg");z.id=q;z.setAttribute("width",c);z.setAttribute("height",g);svgweb.appendChild(z,a);z.addEventListener("SVGLoad",function(){m.rawNode=
this;m.isLoaded=!0;var F=b(e.xmlns.svg,"defs");m.rawNode.appendChild(F);m.defNode=F;if(m.onLoad)m.onLoad(m)},!1);m.isLoaded=!1;return m},e.Surface.extend({destroy:function(){var a=this.rawNode;svgweb.removeChild(a,a.parentNode)}}),x={connect:function(a,c,g){"on"===a.substring(0,2)&&(a=a.substring(2));g=2==arguments.length?c:h.hitch(c,g);this.getEventSource().addEventListener(a,g,!1);return[this,a,g]},disconnect:function(a){this.getEventSource().removeEventListener(a[1],a[2],!1);delete a[0]}},h.extend(e.Shape,
x),h.extend(e.Surface,x));return e});