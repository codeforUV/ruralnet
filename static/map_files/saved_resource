// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.35/esri/copyright.txt for details.
/*
	Copyright (c) 2004-2016, The JS Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

//>>built
(function(b,A){var q,x=function(){return"undefined"!==typeof u&&"function"!==typeof u?u:"undefined"!==typeof window?window:"undefined"!==typeof self?self:this}(),r=function(){},m=function(g){for(var G in g)return 0;return 1},p={}.toString,t=function(g){return"[object Function]"==p.call(g)},h=function(g){return"[object String]"==p.call(g)},c=function(g){return"[object Array]"==p.call(g)},a=function(g,G){if(g)for(var N=0;N<g.length;)G(g[N++])},f=function(g,G){for(var N in G)g[N]=G[N];return g},e=function(g,
G){return f(Error(g),{src:"dojoLoader",info:G})},l=1,k=function(){return"_"+l++},d=function(g,G,N){return sa(g,G,N,0,d)},u=x,y=u.document,n=y&&y.createElement("DiV"),v=d.has=function(g){return t(D[g])?D[g]=D[g](u,y,n):D[g]},D=v.cache=A.hasCache;t(b)&&(b=b(x));v.add=function(g,G,N,P){(void 0===D[g]||P)&&(D[g]=G);return N&&v(g)};v.add("host-webworker","undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope);v("host-webworker")&&(f(A.hasCache,{"host-browser":0,dom:0,"dojo-dom-ready-api":0,
"dojo-sniff":0,"dojo-inject-api":1,"host-webworker":1,"dojo-guarantee-console":0}),A.loaderPatch={injectUrl:function(g,G){try{importScripts(g),G()}catch(N){console.info("failed to load resource ("+g+")"),console.error(N)}}});for(var O in b.has)v.add(O,b.has[O],0,1);var z=0,w=[],E=0,C=r,H=r;d.isXdUrl=r;d.initSyncLoader=function(g,G,N){E||(E=g,C=G,H=N);return{sync:"sync",requested:1,arrived:2,nonmodule:3,executing:4,executed:5,syncExecStack:w,modules:oa,execQ:ja,getModule:Ca,injectModule:Sa,setArrived:za,
signal:U,finishExec:La,execModule:Ma,dojoRequirePlugin:E,getLegacyMode:function(){return z},guardCheckComplete:Na}};var B=location.protocol,K=location.host;d.isXdUrl=function(g){return/^\./.test(g)?!1:/^\/\//.test(g)?!0:(g=g.match(/^([^\/:]+:)\/+([^\/]+)/))&&(g[1]!=B||K&&g[2]!=K)};v.add("dojo-force-activex-xhr",!y.addEventListener&&"file:"==window.location.protocol);v.add("native-xhr","undefined"!=typeof XMLHttpRequest);if(v("native-xhr")&&!v("dojo-force-activex-xhr"))var J=function(){return new XMLHttpRequest};
else{var R=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"];for(q=0;3>q;)try{var V=R[q++];new ActiveXObject(V);break}catch(g){}J=function(){return new ActiveXObject(V)}}d.getXhr=J;v.add("dojo-gettext-api",1);d.getText=function(g,G,N){var P=J();P.open("GET",Ta(g),!1);P.send(null);if(200==P.status||!location.host&&!P.status)N&&N(P.responseText,G);else throw e("xhrFailed",P.status);return P.responseText};var Y=v("csp-restrictions")?function(){}:new Function("return eval(arguments[0]);");d.eval=
function(g,G){return Y(g+"\r\n//# sourceURL\x3d"+G)};var S={},U=d.signal=function(g,G){g=S[g];a(g&&g.slice(0),function(N){N.apply(null,c(G)?G:[G])})},L=d.on=function(g,G){var N=S[g]||(S[g]=[]);N.push(G);return{remove:function(){for(var P=0;P<N.length;P++)if(N[P]===G){N.splice(P,1);break}}}},T=[],da={},ha=[],ca={},qa=d.map={},ta=[],oa={},va="",na={},ra={},ia={},wa=0;if(!v("foreign-loader"))var ya=function(g,G){G=!1!==G;var N,P;for(N in ra){var W=ra[N];if(P=N.match(/^url:(.+)/))na["url:"+jb(P[1],g)]=
W;else if("*now"==N)var X=W;else"*noref"!=N&&(P=Oa(N,g,!0),na[P.mid]=na["url:"+P.url]=W)}X&&X(Fa(g));G&&(ra={})};var F=function(g){return g.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(G){return"\\"+G})},I=function(g,G){G.splice(0,G.length);for(var N in g)G.push([N,g[N],new RegExp("^"+F(N)+"(/|$)"),N.length]);G.sort(function(P,W){return W[3]-P[3]});return G},M=function(g,G){a(g,function(N){G.push([h(N[0])?new RegExp("^"+F(N[0])+"$"):N[0],N[1]])})},Q=function(g){var G=g.name;G||(G=g,g={name:G});
g=f({main:"main"},g);g.location=g.location?g.location:G;g.packageMap&&(qa[G]=g.packageMap);g.main.indexOf("./")||(g.main=g.main.substring(2));ca[G]=g},aa=[],ba=function(g,G,N){for(var P in g){"waitSeconds"==P&&(d.waitms=1E3*(g[P]||0));"cacheBust"==P&&(va=g[P]?h(g[P])?g[P]:(new Date).getTime()+"":"");if("baseUrl"==P||"combo"==P)d[P]=g[P];if("async"==P){var W=g[P];d.legacyMode=z=h(W)&&/sync|legacyAsync/.test(W)?W:W?!1:"sync";d.async=!z}g[P]!==D&&(d.rawConfig[P]=g[P],"has"!=P&&v.add("config-"+P,g[P],
0,G))}d.baseUrl||(d.baseUrl="./");/\/$/.test(d.baseUrl)||(d.baseUrl+="/");for(P in g.has)v.add(P,g.has[P],0,G);a(g.packages,Q);for(var X in g.packagePaths)a(g.packagePaths[X],function(ka){var Aa=X+"/"+ka;h(ka)&&(ka={name:ka});ka.location=Aa;Q(ka)});I(f(qa,g.map),ta);a(ta,function(ka){ka[1]=I(ka[1],[]);"*"==ka[0]&&(ta.star=ka)});I(f(da,g.paths),ha);M(g.aliases,T);if(!v("foreign-loader")){if(G)aa.push({config:g.config});else for(P in g.config)G=Ca(P,N),G.config=f(G.config||{},g.config[P]);g.cache&&
(ya(),ra=g.cache,ya(0,!!g.cache["*noref"]))}U("config",[g,d.rawConfig])};v("dojo-cdn");var la=y.getElementsByTagName("script");q=0;for(var Z,ea,pa,ma;q<la.length;)if(Z=la[q++],(pa=Z.getAttribute("src"))&&(ma=pa.match(/(((.*)\/)|^)dojo\.js(\W|$)/i))&&(ea=ma[3]||"",A.baseUrl=A.baseUrl||ea,wa=Z),pa=Z.getAttribute("data-dojo-config")||Z.getAttribute("djConfig"))ia=d.eval("({ "+pa+" })","data-dojo-config"),wa=Z;d.rawConfig={};ba(A,1);v("dojo-cdn")&&((ca.dojo.location=ea)&&(ea+="/"),ca.dijit.location=ea+
"../dijit/",ca.dojox.location=ea+"../dojox/");ba(b,1);ba(ia,1);if(!v("foreign-loader"))var ua=function(g){Na(function(){a(g.deps,Sa)})},sa=function(g,G,N,P,W){var X;if(h(g)){if((X=Ca(g,P,!0))&&X.executed)return X.result;throw e("undefinedModule",g);}c(g)||(ba(g,0,P),g=G,G=N);if(c(g))if(g.length){N="require*"+k();for(var ka,Aa=[],Da=0;Da<g.length;)ka=g[Da++],Aa.push(Ca(ka,P));X=f(Ua("",N,0,""),{injected:2,deps:Aa,def:G||r,require:P?P.require:d,gc:1});oa[X.mid]=X;ua(X);var ab=Pa&&"sync"!=z;Na(function(){Ma(X,
ab)});X.executed||ja.push(X);Ga()}else G&&G();return W},Fa=function(g){if(!g)return d;var G=g.require;G||(G=function(N,P,W){return sa(N,P,W,g,G)},g.require=f(G,d),G.module=g,G.toUrl=function(N){return jb(N,g)},G.toAbsMid=function(N){return bb(N,g)},v("dojo-undef-api")&&(G.undef=function(N){d.undef(N,g)}),G.syncLoadNls=function(N){N=Oa(N,g);var P=oa[N.mid];if(!P||!P.executed)if(Ea=na[N.mid]||na["url:"+N.url])Va(Ea),P=oa[N.mid];return P&&P.executed&&P.result});return G},ja=[],Ha=[],fa={},xa=function(g){g.injected=
1;fa[g.mid]=1;g.url&&(fa[g.url]=g.pack||1);kb()},za=function(g){g.injected=2;delete fa[g.mid];g.url&&delete fa[g.url];m(fa)&&(Wa(),"xd"==z&&(z="sync"))},Ia=d.idle=function(){return!Ha.length&&m(fa)&&!ja.length&&!Pa};var Ja=function(g,G){if(G)for(var N=0;N<G.length;N++)if(G[N][2].test(g))return G[N];return 0},lb=function(g){var G=[];for(g=g.replace(/\\/g,"/").split("/");g.length;){var N=g.shift();if(".."==N&&G.length&&".."!=P){G.pop();var P=G[G.length-1]}else"."!=N&&G.push(P=N)}return G.join("/")},
Ua=function(g,G,N,P){var W=d.isXdUrl(P);return{pid:g,mid:G,pack:N,url:P,executed:0,def:0,isXd:W,isAmd:!!(W||ca[g]&&ca[g].isAmd)}},ob=function(g,G,N,P,W,X,ka,Aa,Da,ab){var Ka,mb,Ba;var cb=/^\./.test(g);if(/(^\/)|(:)|(\.js$)/.test(g)||cb&&!G)return Ua(0,g,0,g);g=lb(cb?G.mid+"/../"+g:g);if(/^\./.test(g))throw e("irrationalPath",g);ab||cb||!X.star||(Ba=Ja(g,X.star[1]));!Ba&&G&&(Ba=(Ba=Ja(G.mid,X))&&Ja(g,Ba[1]));Ba&&(g=Ba[1]+g.substring(Ba[3]));G=(ma=g.match(/^([^\/]+)(\/(.+))?$/))?ma[1]:"";(Ka=N[G])?
g=G+"/"+(mb=ma[3]||Ka.main):G="";var db=0;a(Aa,function(Qa){var nb=g.match(Qa[0]);nb&&0<nb.length&&(db=t(Qa[1])?g.replace(Qa[0],Qa[1]):Qa[1])});if(db)return ob(db,0,N,P,W,X,ka,Aa,Da);if(N=P[g])return Da?Ua(N.pid,N.mid,N.pack,N.url):P[g];P=(Ba=Ja(g,ka))?Ba[1]+g.substring(Ba[3]):G?("/"===Ka.location.slice(-1)?Ka.location.slice(0,-1):Ka.location)+"/"+mb:v("config-tlmSiblingOfDojo")?"../"+g:g;/(^\/)|(:)/.test(P)||(P=W+P);return Ua(G,g,Ka,lb(P+".js"))},Oa=function(g,G,N){return ob(g,G,ca,oa,d.baseUrl,
ta,ha,T,void 0,N)};if(!v("foreign-loader"))var pb=function(g,G,N){return g.normalize?g.normalize(G,function(P){return bb(P,N)}):bb(G,N)},qb=0,Ca=function(g,G,N){var P;if(P=g.match(/^(.+?)!(.*)$/)){var W=Ca(P[1],G,N);"sync"!=z||W.executed||(Sa(W),2!==W.injected||W.executed||Na(function(){Ma(W)}),W.executed?Xa(W):ja.unshift(W));5!==W.executed||W.load||Xa(W);W.load?(P=pb(W,P[2],G),g=W.mid+"!"+(W.dynamic?++qb+"!":"")+P):(P=P[2],g=W.mid+"!"+ ++qb+"!waitingForPlugin");g={plugin:W,mid:g,req:Fa(G),prid:P}}else g=
Oa(g,G);return oa[g.mid]||!N&&(oa[g.mid]=g)};var bb=d.toAbsMid=function(g,G){return Oa(g,G).mid},jb=d.toUrl=function(g,G){G=Oa(g+"/x",G);var N=G.url;return Ta(0===G.pid?g:N.substring(0,N.length-5))};if(!v("foreign-loader"))var rb={injected:2,executed:5,def:3,result:3},eb=function(g){return oa[g]=f({mid:g},rb)},wb=eb("require"),xb=eb("exports"),yb=eb("module"),Ya={},fb=0,Xa=function(g){var G=g.result;g.dynamic=G.dynamic;g.normalize=G.normalize;g.load=G.load;return g},zb=function(g){var G={};a(g.loadQ,
function(W){var X=pb(g,W.prid,W.req.module),ka=g.dynamic?W.mid.replace(/waitingForPlugin$/,X):g.mid+"!"+X;X=f(f({},W),{mid:ka,prid:X,injected:0});oa[ka]&&oa[ka].injected||sb(oa[ka]=X);G[W.mid]=oa[ka];za(W);delete oa[W.mid]});g.loadQ=0;var N=function(W){for(var X=W.deps||[],ka=0;ka<X.length;ka++)(W=G[X[ka].mid])&&(X[ka]=W)},P;for(P in oa)N(oa[P]);a(ja,N)},La=function(g){d.trace("loader-finish-exec",[g.mid]);g.executed=5;g.defOrder=fb++;a(g.provides,function(G){G()});g.loadQ&&(Xa(g),zb(g));for(q=0;q<
ja.length;)ja[q]===g?ja.splice(q,1):q++;/^require\*/.test(g.mid)&&delete oa[g.mid]},Ab=[],Ma=function(g,G){if(4===g.executed)return d.trace("loader-circular-dependency",[Ab.concat(g.mid).join("-\x3e")]),!g.def||G?Ya:g.cjs&&g.cjs.exports;if(!g.executed){if(!g.def)return Ya;var N=g.mid,P=g.deps||[],W,X=[],ka=0;for(g.executed=4;W=P[ka++];){W=W===wb?Fa(g):W===xb?g.cjs.exports:W===yb?g.cjs:Ma(W,G);if(W===Ya)return g.executed=0,d.trace("loader-exec-module",["abort",N]),Ya;X.push(W)}d.trace("loader-run-factory",
[g.mid]);G=g.def;w.unshift(g);if(v("config-dojo-loader-catches"))try{var Aa=t(G)?G.apply(null,X):G}catch(Da){U("error",g.result=e("factoryThrew",[g,Da]))}else Aa=t(G)?G.apply(null,X):G;g.result=void 0===Aa&&g.cjs?g.cjs.exports:Aa;w.shift(g);La(g)}return g.result},Pa=0,Na=function(g){try{Pa++,g()}catch(G){throw G;}finally{Pa--}Ia()&&U("idle",[])},Ga=function(){Pa||Na(function(){C();for(var g,G,N=0;N<ja.length;)g=fb,G=ja[N],Ma(G),g!=fb?(C(),N=0):N++})};var Ta="function"==typeof b.fixupUrl?b.fixupUrl:
function(g){g+="";return g+(va?(/\?/.test(g)?"\x26":"?")+va:"")};v("dojo-undef-api")&&(d.undef=function(g,G){g=Ca(g,G);za(g);f(g,{def:0,executed:0,injected:0,node:0,load:0})});void 0===v("dojo-loader-eval-hint-url")&&v.add("dojo-loader-eval-hint-url",1);var sb=function(g){var G=g.plugin;5!==G.executed||G.load||Xa(G);var N=function(P){g.result=P;za(g);La(g);Ga()};G.load?G.load(g.prid,g.req,N):G.loadQ?G.loadQ.push(g):(G.loadQ=[g],ja.unshift(G),Sa(G))},Ea=0,Ra=0,gb=0,Va=function(g,G){v("config-stripStrict")&&
(g=g.replace(/(["'])use strict\1/g,""));gb=1;if(v("config-dojo-loader-catches"))try{g===Ea?Ea.call(null):d.eval(g,v("dojo-loader-eval-hint-url")?G.url:G.mid)}catch(N){U("error",e("evalModuleThrew",G))}else g===Ea?Ea.call(null):d.eval(g,v("dojo-loader-eval-hint-url")?G.url:G.mid);gb=0},Sa=function(g){var G=g.mid,N=g.url;if(!(g.executed||g.injected||fa[G]||g.url&&(g.pack&&fa[g.url]===g.pack||1==fa[g.url])))if(xa(g),g.plugin)sb(g);else{var P=function(){tb(g);if(2!==g.injected){if(v("dojo-enforceDefine")){U("error",
e("noDefine",g));return}za(g);f(g,rb);d.trace("loader-define-nonmodule",[g.url])}z?!w.length&&Ga():Ga()};if(Ea=na[G]||na["url:"+g.url])d.trace("loader-inject",["cache",g.mid,N]),Va(Ea,g),P();else{if(z)if(g.isXd)"sync"==z&&(z="xd");else if(!g.isAmd||"sync"==z){var W=function(X){if("sync"==z){w.unshift(g);Va(X,g);w.shift();tb(g);g.cjs||(za(g),La(g));if(g.finish){X=G+"*finish";var ka=g.finish;delete g.finish;Za(X,["dojo",("dojo/require!"+ka.join(",")).replace(/\./g,"/")],function(Aa){a(ka,function(Da){Aa.require(Da)})});
ja.unshift(Ca(X))}P()}else(X=H(g,X))?(Va(X,g),P()):(Ra=g,d.injectUrl(Ta(N),P,g),Ra=0)};d.trace("loader-inject",["xhr",g.mid,N,"sync"!=z]);if(v("config-dojo-loader-catches"))try{d.getText(N,"sync"!=z,W)}catch(X){U("error",e("xhrInjectFailed",[g,X]))}else d.getText(N,"sync"!=z,W);return}d.trace("loader-inject",["script",g.mid,N]);Ra=g;d.injectUrl(Ta(N),P,g);Ra=0}}},hb=function(g,G,N){d.trace("loader-define-module",[g.mid,G]);var P=g.mid;if(2===g.injected)return U("error",e("multipleDefine",g)),g;f(g,
{deps:G,def:N,cjs:{id:g.mid,uri:g.url,exports:g.result={},setExports:function(X){g.cjs.exports=X},config:function(){return g.config}}});for(var W=0;G[W];W++)G[W]=Ca(G[W],g);z&&!fa[P]&&(ua(g),ja.push(g),Ga());za(g);t(N)||G.length||(g.result=N,La(g));return g},tb=function(g,G){for(var N=[],P,W;Ha.length;)W=Ha.shift(),G&&(W[0]=G.shift()),P=W[0]&&Ca(W[0])||g,N.push([P,W[1],W[2]]);ya(g);a(N,function(X){ua(hb.apply(null,X))})},$a=0,Wa=r,kb=r;Wa=function(){$a&&clearTimeout($a);$a=0};kb=function(){Wa();d.waitms&&
($a=u.setTimeout(function(){Wa();U("error",e("timeout",fa))},d.waitms))};v.add("ie-event-behavior",y.attachEvent&&"undefined"===typeof Windows&&("undefined"===typeof opera||"[object Opera]"!=opera.toString()));var ib=function(g,G,N,P){if(v("ie-event-behavior"))return g.attachEvent(N,P),function(){g.detachEvent(N,P)};g.addEventListener(G,P,!1);return function(){g.removeEventListener(G,P,!1)}},Bb=ib(window,"load","onload",function(){d.pageLoaded=1;try{"complete"!=y.readyState&&(y.readyState="complete")}catch(g){}Bb()});
la=y.getElementsByTagName("script");for(q=0;!wa;)/^dojo/.test((Z=la[q++])&&Z.type)||(wa=Z);d.injectUrl=function(g,G,N){N=N.node=y.createElement("script");var P=ib(N,"load","onreadystatechange",function(X){X=X||window.event;var ka=X.target||X.srcElement;if("load"===X.type||/complete|loaded/.test(ka.readyState))P(),W(),G&&G()}),W=ib(N,"error","onerror",function(X){P();W();U("error",e("scriptError: "+g,[g,X]))});N.type="text/javascript";N.charset="utf-8";N.src=g;wa.parentNode.insertBefore(N,wa);return N};
d.log=function(){try{for(var g=0;g<arguments.length;g++)console.log(arguments[g])}catch(G){}};d.trace=r;if(v("foreign-loader"))Za=r;else{var Za=function(g,G,N){var P=arguments.length,W=["require","exports","module"],X=[0,g,G];1==P?X=[0,t(g)?W:[],g]:2==P&&h(g)?X=[g,t(G)?W:[],G]:3==P&&(X=[g,G,N]);d.trace("loader-define",X.slice(0,2));if((P=X[0]&&Ca(X[0]))&&!fa[P.mid])ua(hb(P,X[1],X[2]));else if(!v("ie-event-behavior")||gb)Ha.push(X);else{P=P||Ra;if(!P)for(g in fa)if((W=oa[g])&&W.node&&"interactive"===
W.node.readyState){P=W;break}P?(ya(P),ua(hb(P,X[1],X[2]))):U("error",e("ieDefineFailed",X[0]));Ga()}};Za.amd={vendor:"dojotoolkit.org"}}f(f(d,A.loaderPatch),b.loaderPatch);L("error",function(g){try{if(console.error(g),g instanceof Error){for(var G in g)console.log(G+":",g[G]);console.log(".")}}catch(N){}});f(d,{uid:k,cache:na,packs:ca});if(u.define)U("error",e("defineAlreadyDefined",0));else if(u.define=Za,u.require=d,!v("foreign-loader")){a(aa,function(g){ba(g)});var ub=ia.deps||b.deps||A.deps,vb=
ia.callback||b.callback||A.callback;d.boot=ub||vb?[ub||[],vb]:0}})(function(b){return b.dojoConfig||b.djConfig||b.require||{}},{async:0,baseUrl:"https://js.arcgis.com/3.35/dojo",hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-has-api":1,"dojo-loader":1,"dojo-undef-api":0,dom:1,"extend-esri":1,"host-browser":1},packages:[{location:"../dijit",name:"dijit"},{location:"../dojox",name:"dojox"},{location:"../put-selector",main:"put",name:"put-selector"},
{location:"../xstyle",name:"xstyle"},{location:"../dgrid",main:"OnDemandGrid",name:"dgrid"},{location:"../dgrid1",main:"OnDemandGrid",name:"dgrid1"},{location:"../dstore",main:"Store",name:"dstore"},{location:"../moment",main:"moment",name:"moment"},{location:"../esri",name:"esri"},{location:".",name:"dojo"}]});
require({cache:{"dojo/loadInit":function(){define(["./_base/loader"],function(b){return{dynamic:0,normalize:function(A){return A},load:b.loadInit}})},"dojo/_base/loader":function(){define("./kernel ../has require module ../json ./lang ./array".split(" "),function(b,A,q,x,r,m,p){var t=function(L){return L.replace(/\./g,"/")},h=/\/\/>>built/,c=[],a=[],f=function(L,T,da){c.push(da);p.forEach(L.split(","),function(ha){ha=B(ha,T.module);a.push(ha);K(ha)});e()},e=function(){var L;for(L in C){var T=C[L];
void 0===T.noReqPluginCheck&&(T.noReqPluginCheck=/loadInit!/.test(L)||/require!/.test(L)?1:0);if(!T.executed&&!T.noReqPluginCheck&&T.injected==v)return}U(function(){var da=c;c=[];p.forEach(da,function(ha){ha(1)})})},l=/\/\/.*|\/\*[\s\S]*?\*\/|("(?:\\.|[^"])*"|'(?:\\.|[^'])*'|`(?:\\.|[^`])*`)/mg,k=/(^|\s)dojo\.(loadInit|require|provide|requireLocalization|requireIf|requireAfterIf|platformRequire)\s*\(/mg,d=/(^|\s)(require|define)\s*\(/m,u=function(L,T){var da=[],ha=[];var ca=[];for(T=T||L.replace(l,
"$1");ca=k.exec(T);){var qa=k.lastIndex;var ta=qa-ca[0].length;var oa=void 0,va=T,na=/\(|\)/g,ra=1;for(na.lastIndex=qa;(oa=na.exec(va))&&(ra=")"==oa[0]?ra-1:ra+1,0!=ra););if(0!=ra)throw"unmatched paren around character "+na.lastIndex+" in: "+va;qa=[b.trim(va.substring(ta,na.lastIndex))+";\n",na.lastIndex];"loadInit"==ca[2]?da.push(qa[0]):ha.push(qa[0]);k.lastIndex=qa[1]}ca=da.concat(ha);return ca.length||!d.test(T)?[L.replace(/(^|\s)dojo\.loadInit\s*\(/g,"\n0 \x26\x26 dojo.loadInit("),ca.join(""),
ca]:0},y=q.initSyncLoader(f,e,function(L,T){var da,ha=[],ca=[];if(h.test(T)||!(da=u(T)))return 0;T=L.mid+"-*loadInit";for(var qa in B("dojo",L).result.scopeMap)ha.push(qa),ca.push('"'+qa+'"');return"// xdomain rewrite of "+L.mid+"\ndefine('"+T+"',{\n\tnames:"+r.stringify(ha)+",\n\tdef:function("+ha.join(",")+"){"+da[1]+"}});\n\ndefine("+r.stringify(ha.concat(["dojo/loadInit!"+T]))+", function("+ha.join(",")+"){\n"+da[0]+"});"}),n=y.sync,v=y.requested,D=y.arrived,O=y.nonmodule,z=y.executing,w=y.executed,
E=y.syncExecStack,C=y.modules,H=y.execQ,B=y.getModule,K=y.injectModule,J=y.setArrived,R=y.signal,V=y.finishExec,Y=y.execModule,S=y.getLegacyMode,U=y.guardCheckComplete;f=y.dojoRequirePlugin;b.provide=function(L){var T=E[0],da=m.mixin(B(t(L),q.module),{executed:z,result:m.getObject(L,!0)});J(da);T&&(T.provides||(T.provides=[])).push(function(){da.result=m.getObject(L);delete da.provides;da.executed!==w&&V(da)});return da.result};A.add("config-publishRequireResult",1,0,0);b.require=function(L,T){T=
function(da,ha){var ca=B(t(da),q.module);if(E.length&&E[0].finish)E[0].finish.push(da);else{if(ca.executed)return ca.result;ha&&(ca.result=O);ha=S();K(ca);ha=S();ca.executed!==w&&ca.injected===D&&y.guardCheckComplete(function(){Y(ca)});if(ca.executed)return ca.result;ha==n?ca.cjs?H.unshift(ca):E.length&&(E[0].finish=[da]):H.push(ca)}}(L,T);A("config-publishRequireResult")&&!m.exists(L)&&void 0!==T&&m.setObject(L,T);return T};b.loadInit=function(L){L()};b.registerModulePath=function(L,T){var da={};
da[L.replace(/\./g,"/")]=T;q({paths:da})};b.platformRequire=function(L){L=(L.common||[]).concat(L[b._name]||L["default"]||[]);for(var T;L.length;)m.isArray(T=L.shift())?b.require.apply(b,T):b.require(T)};b.requireIf=b.requireAfterIf=function(L,T,da){L&&b.require(T,da)};b.requireLocalization=function(L,T,da){q(["../i18n"],function(ha){ha.getLocalization(L,T,da)})};return{extractLegacyApiApplications:u,require:f,loadInit:function(L,T,da){T([L],function(ha){T(ha.names,function(){for(var ca="",qa=[],
ta=0;ta<arguments.length;ta++)ca+="var "+ha.names[ta]+"\x3d arguments["+ta+"]; ",qa.push(arguments[ta]);eval(ca);var oa=T.module,va=[],na;ca={provide:function(ia){ia=t(ia);ia=B(ia,oa);ia!==oa&&J(ia)},require:function(ia,wa){ia=t(ia);wa&&(B(ia,oa).result=O);va.push(ia)},requireLocalization:function(ia,wa,ya){na||(na=["dojo/i18n"]);ya=(ya||b.locale).toLowerCase();ia=t(ia)+"/nls/"+(/root/i.test(ya)?"":ya+"/")+t(wa);B(ia,oa).isXd&&na.push("dojo/i18n!"+ia)},loadInit:function(ia){ia()}};ta={};var ra;try{for(ra in ca)ta[ra]=
b[ra],b[ra]=ca[ra];ha.def.apply(null,qa)}catch(ia){R("error",[{src:x.id,id:"failedDojoLoadInit"},ia])}finally{for(ra in ca)b[ra]=ta[ra]}na&&(va=va.concat(na));va.length?f(va.join(","),T,da):da()})})}}})},"dojo/_base/kernel":function(){define(["../global","../has","./config","require","module"],function(b,A,q,x,r){var m,p={},t={},h={config:q,global:b,dijit:p,dojox:t};p={dojo:["dojo",h],dijit:["dijit",p],dojox:["dojox",t]};r=x.map&&x.map[r.id.match(/[^\/]+/)[0]];for(m in r)p[m]?p[m][0]=r[m]:p[m]=[r[m],
{}];for(m in p)r=p[m],r[1]._scopeName=r[0],q.noGlobals||(b[r[0]]=r[1]);h.scopeMap=p;h.baseUrl=h.config.baseUrl=x.baseUrl;h.isAsync=x.async;h.locale=q.locale;b="$Rev:$".match(/[0-9a-f]{7,}/);h.version={major:1,minor:16,patch:3,flag:"",revision:b?b[0]:NaN,toString:function(){var a=h.version;return a.major+"."+a.minor+"."+a.patch+a.flag+" ("+a.revision+")"}};A("csp-restrictions")||Function("d","d.eval \x3d function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(h);h.exit=
function(){};A("host-webworker");A.add("console-as-object",function(){return Function.prototype.bind&&console&&"object"===typeof console.log});"undefined"!=typeof console||(console={});r="assert count debug dir dirxml error group groupEnd info profile profileEnd time timeEnd trace warn log".split(" ");var c;for(b=0;c=r[b++];)console[c]?A("console-as-object")&&(console[c]=Function.prototype.bind.call(console[c],console)):function(){var a=c+"";console[a]="log"in console?function(){var f=Array.prototype.slice.call(arguments);
f.unshift(a+":");console.log(f.join(" "))}:function(){};console[a]._fake=!0}();A.add("dojo-debug-messages",!!q.isDebug);h.deprecated=h.experimental=function(){};A("dojo-debug-messages")&&(h.deprecated=function(a,f,e){a="DEPRECATED: "+a;f&&(a+=" "+f);e&&(a+=" -- will be removed in version: "+e);console.warn(a)},h.experimental=function(a,f){a="EXPERIMENTAL: "+a+" -- APIs subject to change without notice.";f&&(a+=" "+f);console.warn(a)});if(q.modulePaths){h.deprecated("dojo.modulePaths","use paths configuration");
A={};for(m in q.modulePaths)A[m.replace(/\./g,"/")]=q.modulePaths[m];x({paths:A})}h.moduleUrl=function(a,f){h.deprecated("dojo.moduleUrl()","use require.toUrl","2.0");var e=null;a&&(e=x.toUrl(a.replace(/\./g,"/")+(f?"/"+f:"")+"/*.*").replace(/\/\*\.\*/,"")+(f?"":"/"));return e};h._hasResource={};return h})},"dojo/global":function(){define(function(){return"undefined"!==typeof global&&"function"!==typeof global?global:"undefined"!==typeof window?window:"undefined"!==typeof self?self:this})},"dojo/has":function(){define(["./global",
"require","module"],function(b,A,q){var x=A.has||function(){};if(!x("dojo-has-api")){var r="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location==location&&window.document==document&&document,m=r&&r.createElement("DiV"),p=q.config&&q.config()||{};x=function(t){return"function"==typeof p[t]?p[t]=p[t](b,r,m):p[t]};x.cache=p;x.add=function(t,h,c,a){("undefined"==typeof p[t]||a)&&(p[t]=h);return c&&x(t)}}x.add("dom-addeventlistener",!!document.addEventListener);
x.add("touch","ontouchstart"in document||"onpointerdown"in document&&0<navigator.maxTouchPoints||window.navigator.msMaxTouchPoints);x.add("touch-events","ontouchstart"in document);x.add("pointer-events","pointerEnabled"in window.navigator?window.navigator.pointerEnabled:"PointerEvent"in window);x.add("MSPointer",window.navigator.msPointerEnabled);x.add("touch-action",x("touch")&&x("pointer-events"));x.add("device-width",screen.availWidth||innerWidth);A=document.createElement("form");x.add("dom-attributes-explicit",
0==A.attributes.length);x.add("dom-attributes-specified-flag",0<A.attributes.length&&40>A.attributes.length);x.clearElement=function(t){t.innerHTML="";return t};x.normalize=function(t,h){var c=t.match(/[\?:]|[^:\?]*/g),a=0,f=function(e){var l=c[a++];if(":"==l)return 0;if("?"==c[a++]){if(!e&&x(l))return f();f(!0);return f(e)}return l||0};return(t=f())&&h(t)};x.load=function(t,h,c){t?h([t],c):c()};return x})},"dojo/_base/config":function(){define(["../global","../has","require"],function(b,A,q){b={};
q=q.rawConfig;for(var x in q)b[x]=q[x];!b.locale&&"undefined"!=typeof navigator&&(x=navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language||navigator.userLanguage)&&(b.locale=x.toLowerCase());return b})},"dojo/json":function(){define(["./has"],function(b){var A="undefined"!=typeof JSON;b.add("json-parse",A);b.add("json-stringify",A&&'{"a":1}'==JSON.stringify({a:0},function(x,r){return r||1}));if(b("json-stringify"))return JSON;var q=function(x){return('"'+x.replace(/(["\\])/g,
"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:b("json-parse")?JSON.parse:function(x,r){if(r&&!/^([\s\[\{]*(?:"(?:\\.|[^"])*"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(x))throw new SyntaxError("Invalid characters in JSON");return eval("("+x+")")},stringify:function(x,r,m){function p(h,c,a){r&&(h=r(a,h));var f=typeof h;if("number"==f)return isFinite(h)?h+"":"null";if("boolean"==
f)return h+"";if(null===h)return"null";if("string"==typeof h)return q(h);if("function"==f||"undefined"==f)return t;if("function"==typeof h.toJSON)return p(h.toJSON(a),c,a);if(h instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(y,n,v){y=h["getUTC"+n]()+(v?1:0);return 10>y?"0"+y:y});if(h.valueOf()!==h)return p(h.valueOf(),c,a);var e=m?c+m:"",l=m?" ":"",k=m?"\n":"";if(h instanceof Array){l=h.length;var d=[];for(a=0;a<l;a++)f=p(h[a],e,
a),"string"!=typeof f&&(f="null"),d.push(k+e+f);return"["+d.join(",")+k+c+"]"}d=[];for(a in h)if(h.hasOwnProperty(a)){if("number"==typeof a)var u='"'+a+'"';else if("string"==typeof a)u=q(a);else continue;f=p(h[a],e,a);"string"==typeof f&&d.push(k+e+u+":"+l+f)}return"{"+d.join(",")+k+c+"}"}var t;"string"==typeof r&&(m=r,r=null);return p(x,"","")}}})},"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(b,A){A.add("bug-for-in-skips-shadowed",function(){for(var c in{toString:1})return 0;
return 1});var q=A("bug-for-in-skips-shadowed")?"hasOwnProperty valueOf isPrototypeOf propertyIsEnumerable toLocaleString toString constructor".split(" "):[],x=q.length,r=function(c,a,f){f||(f=c[0]&&b.scopeMap[c[0]]?b.scopeMap[c.shift()][1]:b.global);try{for(var e=0;e<c.length;e++){var l=c[e];if(!(l in f))if(a)f[l]={};else return;f=f[l]}return f}catch(k){}},m=Object.prototype.toString,p=function(c,a,f){return(f||[]).concat(Array.prototype.slice.call(c,a||0))},t=/\{([^\}]+)\}/g,h={_extraNames:q,_mixin:function(c,
a,f){var e,l={};for(d in a){var k=a[d];d in c&&(c[d]===k||d in l&&l[d]===k)||(c[d]=f?f(k):k)}if(A("bug-for-in-skips-shadowed")&&a)for(e=0;e<x;++e){var d=q[e];k=a[d];d in c&&(c[d]===k||d in l&&l[d]===k)||(c[d]=f?f(k):k)}return c},mixin:function(c,a){c||(c={});for(var f=1,e=arguments.length;f<e;f++)h._mixin(c,arguments[f]);return c},setObject:function(c,a,f){var e=c.split(".");c=e.pop();return(f=r(e,!0,f))&&c?f[c]=a:void 0},getObject:function(c,a,f){return c?r(c.split("."),a,f):f},exists:function(c,
a){return void 0!==h.getObject(c,!1,a)},isString:function(c){return"string"==typeof c||c instanceof String},isArray:Array.isArray||function(c){return"[object Array]"==m.call(c)},isFunction:function(c){return"[object Function]"===m.call(c)},isObject:function(c){return void 0!==c&&(null===c||"object"==typeof c||h.isArray(c)||h.isFunction(c))},isArrayLike:function(c){return!!c&&!h.isString(c)&&!h.isFunction(c)&&!(c.tagName&&"form"==c.tagName.toLowerCase())&&(h.isArray(c)||isFinite(c.length))},isAlien:function(c){return c&&
!h.isFunction(c)&&/\{\s*\[native code\]\s*\}/.test(String(c))},extend:function(c,a){for(var f=1,e=arguments.length;f<e;f++)h._mixin(c.prototype,arguments[f]);return c},_hitchArgs:function(c,a){var f=h._toArray(arguments,2),e=h.isString(a);return function(){var l=h._toArray(arguments),k=e?(c||b.global)[a]:a;return k&&k.apply(c||this,f.concat(l))}},hitch:function(c,a){if(2<arguments.length)return h._hitchArgs.apply(b,arguments);a||(a=c,c=null);if(h.isString(a)){c=c||b.global;if(!c[a])throw['lang.hitch: scope["',
a,'"] is null (scope\x3d"',c,'")'].join("");return function(){return c[a].apply(c,arguments||[])}}return c?function(){return a.apply(c,arguments||[])}:a},delegate:function(){function c(){}return function(a,f){c.prototype=a;a=new c;c.prototype=null;f&&h._mixin(a,f);return a}}(),_toArray:A("ie")?function(){function c(a,f,e){e=e||[];for(f=f||0;f<a.length;f++)e.push(a[f]);return e}return function(a){return(a.item?c:p).apply(this,arguments)}}():p,partial:function(c){return h.hitch.apply(b,[null].concat(h._toArray(arguments)))},
clone:function(c){if(!c||"object"!=typeof c||h.isFunction(c))return c;if(c.nodeType&&"cloneNode"in c)return c.cloneNode(!0);if(c instanceof Date)return new Date(c.getTime());if(c instanceof RegExp)return new RegExp(c);var a;if(h.isArray(c)){var f=[];var e=0;for(a=c.length;e<a;++e)e in c&&(f[e]=h.clone(c[e]))}else f=c.constructor?new c.constructor:{};return h._mixin(f,c,h.clone)},trim:String.prototype.trim?function(c){return c.trim()}:function(c){return c.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},
replace:function(c,a,f){return c.replace(f||t,h.isFunction(a)?a:function(e,l){return h.getObject(l,!1,a)})}};h.mixin(b,h);return h})},"dojo/sniff":function(){define(["./has"],function(b){var A=navigator,q=A.userAgent;A=A.appVersion;var x=parseFloat(A);b.add("air",0<=q.indexOf("AdobeAIR"));b.add("wp",parseFloat(q.split("Windows Phone")[1])||void 0);b.add("msapp",parseFloat(q.split("MSAppHost/")[1])||void 0);b.add("khtml",0<=A.indexOf("Konqueror")?x:void 0);b.add("edge",parseFloat(q.split("Edge/")[1])||
void 0);b.add("opr",parseFloat(q.split("OPR/")[1])||void 0);b.add("webkit",!b("wp")&&!b("edge")&&parseFloat(q.split("WebKit/")[1])||void 0);b.add("chrome",!b("edge")&&!b("opr")&&parseFloat(q.split("Chrome/")[1])||void 0);b.add("android",!b("wp")&&parseFloat(q.split("Android ")[1])||void 0);b.add("safari",!(0<=A.indexOf("Safari"))||b("wp")||b("chrome")||b("android")||b("edge")||b("opr")?void 0:parseFloat(A.split("Version/")[1]));b.add("mac",0<=A.indexOf("Macintosh"));b.add("quirks","BackCompat"==document.compatMode);
if(!b("wp")&&q.match(/(iPhone|iPod|iPad)/)){var r=RegExp.$1.replace(/P/,"p"),m=q.match(/OS ([\d_]+)/)?RegExp.$1:"1";m=parseFloat(m.replace(/_/,".").replace(/_/g,""));b.add(r,m);b.add("ios",m)}b.add("bb",(0<=q.indexOf("BlackBerry")||0<=q.indexOf("BB10"))&&parseFloat(q.split("Version/")[1])||void 0);b.add("trident",parseFloat(A.split("Trident/")[1])||void 0);b.add("svg","undefined"!==typeof SVGAngle);b("webkit")||(0<=q.indexOf("Opera")&&b.add("opera",9.8<=x?parseFloat(q.split("Version/")[1])||x:x),
!(0<=q.indexOf("Gecko"))||b("wp")||b("khtml")||b("trident")||b("edge")||b.add("mozilla",x),b("mozilla")&&b.add("ff",parseFloat(q.split("Firefox/")[1]||q.split("Minefield/")[1])||void 0),document.all&&!b("opera")&&(q=parseFloat(A.split("MSIE ")[1])||void 0,(A=document.documentMode)&&5!=A&&Math.floor(q)!=A&&(q=A),b.add("ie",q)),b.add("wii","undefined"!=typeof opera&&opera.wiiremote));return b})},"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(b,A,q){function x(c){return p[c]=
new Function("item","index","array",c)}function r(c){var a=!c;return function(f,e,l){var k=0,d=f&&f.length||0;d&&"string"==typeof f&&(f=f.split(""));"string"==typeof e&&(e=p[e]||x(e));if(l)for(;k<d;++k){var u=!e.call(l,f[k],k,f);if(c^u)return!u}else for(;k<d;++k)if(u=!e(f[k],k,f),c^u)return!u;return a}}function m(c){var a=1,f=0,e=0;c||(a=f=e=-1);return function(l,k,d,u){if(u&&0<a)return h.lastIndexOf(l,k,d);u=l&&l.length||0;var y=c?u+e:f;d===t?d=c?f:u+e:0>d?(d=u+d,0>d&&(d=f)):d=d>=u?u+e:d;for(u&&
"string"==typeof l&&(l=l.split(""));d!=y;d+=a)if(l[d]==k)return d;return-1}}var p={},t,h={every:r(!1),some:r(!0),indexOf:m(!0),lastIndexOf:m(!1),forEach:function(c,a,f){var e=0,l=c&&c.length||0;l&&"string"==typeof c&&(c=c.split(""));"string"==typeof a&&(a=p[a]||x(a));if(f)for(;e<l;++e)a.call(f,c[e],e,c);else for(;e<l;++e)a(c[e],e,c)},map:function(c,a,f,e){var l=0,k=c&&c.length||0;e=new (e||Array)(k);k&&"string"==typeof c&&(c=c.split(""));"string"==typeof a&&(a=p[a]||x(a));if(f)for(;l<k;++l)e[l]=a.call(f,
c[l],l,c);else for(;l<k;++l)e[l]=a(c[l],l,c);return e},filter:function(c,a,f){var e=0,l=c&&c.length||0,k=[];l&&"string"==typeof c&&(c=c.split(""));"string"==typeof a&&(a=p[a]||x(a));if(f)for(;e<l;++e){var d=c[e];a.call(f,d,e,c)&&k.push(d)}else for(;e<l;++e)d=c[e],a(d,e,c)&&k.push(d);return k},clearCache:function(){p={}}};q.mixin(b,h);return h})},"dojo/require":function(){define(["./_base/loader"],function(b){return{dynamic:0,normalize:function(A){return A},load:b.require}})},"dojo/text":function(){define(["./_base/kernel",
"require","./has","./request"],function(b,A,q,x){var r=function(c,a,f){x(c,{sync:!!a,headers:{"X-Requested-With":null}}).then(f)};var m={},p=function(c){if(c){c=c.replace(/^\s*<\?xml(\s)+version=['"](\d)*.(\d)*['"](\s)*\?>/im,"");var a=c.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);a&&(c=a[1])}else c="";return c},t={},h={};b.cache=function(c,a,f){if("string"==typeof c)if(/\//.test(c)){var e=c;f=a}else e=A.toUrl(c.replace(/\./g,"/")+(a?"/"+a:""));else e=c+"",f=a;c=void 0!=f&&"string"!=typeof f?f.value:
f;f=f&&f.sanitize;if("string"==typeof c)return m[e]=c,f?p(c):c;if(null===c)return delete m[e],null;e in m||r(e,!0,function(l){m[e]=l});return f?p(m[e]):m[e]};return{dynamic:!0,normalize:function(c,a){c=c.split("!");var f=c[0];return(/^\./.test(f)?a(f):f)+(c[1]?"!"+c[1]:"")},load:function(c,a,f){c=c.split("!");var e=1<c.length,l=c[0],k=a.toUrl(c[0]);c="url:"+k;var d=t,u=function(n){f(e?p(n):n)};l in m?d=m[l]:a.cache&&c in a.cache?d=a.cache[c]:k in m&&(d=m[k]);if(d===t)if(h[k])h[k].push(u);else{var y=
h[k]=[u];r(k,!a.async,function(n){m[l]=m[k]=n;for(var v=0;v<y.length;)y[v++](n);delete h[k]})}else u(d)}}})},"dojo/request":function(){define(["./request/default!"],function(b){return b})},"dojo/request/default":function(){define(["exports","require","../has"],function(b,A,q){var x=q("config-requestProvider");x||(x="./xhr");b.getPlatformDefaultId=function(){return"./xhr"};b.load=function(r,m,p,t){A(["platform"==r?"./xhr":x],function(h){p(h)})}})},"dojo/i18n":function(){define("./_base/kernel require ./has ./_base/array ./_base/config ./_base/lang ./_base/xhr ./json module".split(" "),
function(b,A,q,x,r,m,p,t,h){q.add("dojo-preload-i18n-Api",1);var c=b.i18n={},a=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,f=function(B,K,J,R){var V=[J+R];K=K.split("-");for(var Y="",S=0;S<K.length;S++)if(Y+=(Y?"-":"")+K[S],!B||B[Y])V.push(J+Y+"/"+R),V.specificity=Y;return V},e={},l=function(B,K,J){J=J?J.toLowerCase():b.locale;B=B.replace(/\./g,"/");K=K.replace(/\./g,"/");return/root/i.test(J)?B+"/nls/"+K:B+"/nls/"+J+"/"+K},k=b.getL10nName=function(B,K,J){return B=h.id+"!"+l(B,K,J)},d=function(B,K,
J,R,V,Y){B([K],function(S){var U=m.clone(S.root||S.ROOT),L=f(!S._v1x&&S,V,J,R);B(L,function(){for(var T=1;T<L.length;T++)U=m.mixin(m.clone(U),arguments[T]);e[K+"/"+V]=U;U.$locale=L.specificity;Y()})})},u=function(B){var K=r.extraLocale||[];K=m.isArray(K)?K:[K];K.push(B);return K},y=function(B,K,J){var R=a.exec(B),V=R[1]+"/",Y=R[5]||R[4],S=V+Y,U=(R=R[5]&&R[4])||b.locale||"",L=S+"/"+U;R=R?[U]:u(U);var T=R.length,da=function(){--T||J(m.delegate(e[L]))};U=B.split("*");var ha="preload"==U[1];if(q("dojo-preload-i18n-Api")){if(ha&&
(e[B]||(e[B]=1,O(U[2],t.parse(U[3]),1,K)),J(1)),(U=ha)||(v&&D.push([B,K,J]),U=v&&!e[L]),U)return}else if(ha){J(1);return}x.forEach(R,function(ca){var qa=S+"/"+ca;q("dojo-preload-i18n-Api")&&z(qa);e[qa]?da():d(K,S,V,Y,ca,da)})};q("dojo-preload-i18n-Api");var n=c.normalizeLocale=function(B){B=B?B.toLowerCase():b.locale;return"root"==B?"ROOT":B},v=0,D=[],O=c._preloadLocalizations=function(B,K,J,R){function V(L,T){R.isXdUrl(A.toUrl(L+".js"))||J?R([L],T):H([L],T,R)}function Y(L,T){for(L=L.split("-");L.length;){if(T(L.join("-")))return;
L.pop()}T("ROOT")}function S(){for(--v;!v&&D.length;)y.apply(null,D.shift())}function U(L){L=n(L);Y(L,function(T){if(0<=x.indexOf(K,T)){var da=B.replace(/\./g,"/")+"_"+T;v++;V(da,function(ha){for(var ca in ha){var qa=ha[ca],ta=ca.match(/(.+)\/([^\/]+)$/);if(ta){var oa=ta[2];ta=ta[1]+"/";if(qa._localized){var va;if("ROOT"===T){var na=va=qa._localized;delete qa._localized;na.root=qa;e[A.toAbsMid(ca)]=na}else va=qa._localized,e[A.toAbsMid(ta+oa+"/"+T)]=qa;T!==L&&function(ra,ia,wa,ya){var F=[],I=[];Y(L,
function(M){ya[M]&&(F.push(A.toAbsMid(ra+M+"/"+ia)),I.push(A.toAbsMid(ra+ia+"/"+M)))});F.length?(v++,R(F,function(){for(var M=F.length-1;0<=M;M--)wa=m.mixin(m.clone(wa),arguments[M]),e[I[M]]=wa;e[A.toAbsMid(ra+ia+"/"+L)]=m.clone(wa);S()})):e[A.toAbsMid(ra+ia+"/"+L)]=wa}(ta,oa,qa,va)}}}S()});return!0}return!1})}R=R||A;U();x.forEach(b.config.extraLocale,U)},z=function(){},w={},E={},C,H=function(B,K,J){var R=[];x.forEach(B,function(V){function Y(L){C||(C=new Function("__bundle","__checkForLegacyModules",
"__mid","__amdValue","var define \x3d function(mid, factory){define.called \x3d 1; __amdValue.result \x3d factory || mid;},\t   require \x3d function(){define.called \x3d 1;};try{define.called \x3d 0;eval(__bundle);if(define.called\x3d\x3d1)return __amdValue;if((__checkForLegacyModules \x3d __checkForLegacyModules(__mid)))return __checkForLegacyModules;}catch(e){}try{return eval('('+__bundle+')');}catch(e){return e;}"));L=C(L,z,V,w);L===w?R.push(e[S]=w.result):(L instanceof Error&&(console.error("failed to evaluate i18n bundle; url\x3d"+
S,L),L={}),R.push(e[S]=/nls\/[^\/]+\/[^\/]+$/.test(S)?L:{root:L,_v1x:1}))}var S=J.toUrl(V+".js");if(e[S])R.push(e[S]);else{var U=J.syncLoadNls(V);U||(U=z(V.replace(/nls\/([^\/]*)\/([^\/]*)$/,"nls/$2/$1")));if(U)R.push(U);else if(p)p.get({url:S,sync:!0,load:Y,error:function(){R.push(e[S]={})}});else try{J.getText(S,!0,Y)}catch(L){R.push(e[S]={})}}});K&&K.apply(null,R)};z=function(B){for(var K,J=B.split("/"),R=b.global[J[0]],V=1;R&&V<J.length-1;R=R[J[V++]]);R&&((K=R[J[V]])||(K=R[J[V].replace(/-/g,"_")]),
K&&(e[B]=K));return K};c.getLocalization=function(B,K,J){var R,V=l(B,K,J);if(E[V])return E[V];y(V,A.isXdUrl(A.toUrl(V+".js"))?A:function(Y,S){H(Y,S,A)},function(Y){R=E[V]=Y});return R};return m.mixin(c,{dynamic:!0,normalize:function(B,K){return/^\./.test(B)?K(B):B},load:y,cache:e,getL10nName:k})})},"dojo/_base/xhr":function(){define("./kernel ./sniff require ../io-query ../dom ../dom-form ./Deferred ./config ./json ./lang ./array ../on ../aspect ../request/watch ../request/xhr ../request/util".split(" "),
function(b,A,q,x,r,m,p,t,h,c,a,f,e,l,k,d){b._xhrObj=k._create;var u=b.config;b.objectToQuery=x.objectToQuery;b.queryToObject=x.queryToObject;b.fieldToObject=m.fieldToObject;b.formToObject=m.toObject;b.formToQuery=m.toQuery;b.formToJson=m.toJson;b._blockAsync=!1;A.add("native-xhr2-blob",function(){if(A("native-xhr2")){var z=new XMLHttpRequest;z.open("GET","/",!0);z.responseType="blob";var w=z.responseType;z.abort();return"blob"===w}});var y=b._contentHandlers=b.contentHandlers={text:function(z){return z.responseText},
json:function(z){return h.fromJson(z.responseText||null)},"json-comment-filtered":function(z){t.useCommentedJson||console.warn("Consider using the standard mimetype:application/json. json-commenting can introduce security issues. To decrease the chances of hijacking, use the standard the 'json' handler and prefix your json with: {}\x26\x26\nUse djConfig.useCommentedJson\x3dtrue to turn off this message.");z=z.responseText;var w=z.indexOf("/*"),E=z.lastIndexOf("*/");if(-1==w||-1==E)throw Error("JSON was not comment filtered");
return h.fromJson(z.substring(w+2,E))},javascript:function(z){return b.eval(z.responseText)},xml:function(z){var w=z.responseXML;w&&A("dom-qsa2.1")&&!w.querySelectorAll&&A("dom-parser")&&(w=(new DOMParser).parseFromString(z.responseText,"application/xml"));if(A("ie")&&(!w||!w.documentElement)){var E=function(C){return"MSXML"+C+".DOMDocument"};E=["Microsoft.XMLDOM",E(6),E(4),E(3),E(2)];a.some(E,function(C){try{var H=new ActiveXObject(C);H.async=!1;H.loadXML(z.responseText);w=H}catch(B){return!1}return!0})}return w},
"json-comment-optional":function(z){return z.responseText&&/^[^{\[]*\/\*/.test(z.responseText)?y["json-comment-filtered"](z):y.json(z)}};A("native-xhr2")&&(y.arraybuffer=y.blob=y.document=function(z,w){return"blob"!==w.args.handleAs||A("native-xhr2-blob")?z.response:new Blob([z.response],{type:z.getResponseHeader("Content-Type")})});b._ioSetArgs=function(z,w,E,C){var H={args:z,url:z.url},B=null;if(z.form){B=r.byId(z.form);var K=B.getAttributeNode("action");H.url=H.url||(K?K.value:b.doc?b.doc.URL:
null);B=m.toObject(B)}K={};B&&c.mixin(K,B);z.content&&c.mixin(K,z.content);z.preventCache&&(K["dojo.preventCache"]=(new Date).valueOf());H.query=x.objectToQuery(K);H.handleAs=z.handleAs||"text";var J=new p(function(S){S.canceled=!0;w&&w(S);var U=S.ioArgs.error;U||(U=Error("request cancelled"),U.dojoType="cancel",S.ioArgs.error=U);return U});J.addCallback(E);var R=z.load;R&&c.isFunction(R)&&J.addCallback(function(S){return R.call(z,S,H)});var V=z.error;V&&c.isFunction(V)&&J.addErrback(function(S){return V.call(z,
S,H)});var Y=z.handle;Y&&c.isFunction(Y)&&J.addBoth(function(S){return Y.call(z,S,H)});J.addErrback(function(S){return C(S,J)});u.ioPublish&&b.publish&&!1!==H.args.ioPublish&&(J.addCallbacks(function(S){b.publish("/dojo/io/load",[J,S]);return S},function(S){b.publish("/dojo/io/error",[J,S]);return S}),J.addBoth(function(S){b.publish("/dojo/io/done",[J,S]);return S}));J.ioArgs=H;return J};var n=function(z){z=y[z.ioArgs.handleAs](z.ioArgs.xhr,z.ioArgs);return void 0===z?null:z},v=function(z,w){w.ioArgs.args.failOk||
console.error(z);return z},D=function(z){0>=O&&(O=0,u.ioPublish&&b.publish&&(!z||z&&!1!==z.ioArgs.args.ioPublish)&&b.publish("/dojo/io/stop"))},O=0;e.after(l,"_onAction",function(){--O});e.after(l,"_onInFlight",D);b._ioCancelAll=l.cancelAll;b._ioNotifyStart=function(z){u.ioPublish&&b.publish&&!1!==z.ioArgs.args.ioPublish&&(O||b.publish("/dojo/io/start"),O+=1,b.publish("/dojo/io/send",[z]))};b._ioWatch=function(z,w,E,C){z.ioArgs.options=z.ioArgs.args;c.mixin(z,{response:z.ioArgs,isValid:function(H){return w(z)},
isReady:function(H){return E(z)},handleResponse:function(H){return C(z)}});l(z);D(z)};b._ioAddQueryToUrl=function(z){z.query.length&&(z.url+=(-1==z.url.indexOf("?")?"?":"\x26")+z.query,z.query=null)};b.xhr=function(z,w,E){var C=b._ioSetArgs(w,function(J){K&&K.cancel()},n,v),H=C.ioArgs;"postData"in w?H.query=w.postData:"putData"in w?H.query=w.putData:"rawBody"in w?H.query=w.rawBody:(2<arguments.length&&!E||-1==="POST|PUT".indexOf(z.toUpperCase()))&&b._ioAddQueryToUrl(H);var B;A("native-xhr2")&&(B=
{arraybuffer:1,blob:1,document:1});B=B[w.handleAs]?w.handleAs:"text";"blob"!==B||A("native-xhr2-blob")||(B="arraybuffer");B={method:z,handleAs:B,responseType:w.responseType,timeout:w.timeout,withCredentials:w.withCredentials,ioArgs:H};"undefined"!==typeof w.headers&&(B.headers=w.headers);"undefined"!==typeof w.contentType&&(B.headers||(B.headers={}),B.headers["Content-Type"]=w.contentType);"undefined"!==typeof H.query&&(B.data=H.query);"undefined"!==typeof w.sync&&(B.sync=w.sync);b._ioNotifyStart(C);
try{var K=k(H.url,B,!0)}catch(J){return C.cancel(),C}C.ioArgs.xhr=K.response.xhr;K.then(function(){C.resolve(C)}).otherwise(function(J){H.error=J;J.response&&(J.status=J.response.status,J.responseText=J.response.text,J.xhr=J.response.xhr);C.reject(J)});return C};b.xhrGet=function(z){return b.xhr("GET",z)};b.rawXhrPost=b.xhrPost=function(z){return b.xhr("POST",z,!0)};b.rawXhrPut=b.xhrPut=function(z){return b.xhr("PUT",z,!0)};b.xhrDelete=function(z){return b.xhr("DELETE",z)};b._isDocumentOk=function(z){return d.checkStatus(z.status)};
b._getText=function(z){var w;b.xhrGet({url:z,sync:!0,load:function(E){w=E}});return w};c.mixin(b.xhr,{_xhrObj:b._xhrObj,fieldToObject:m.fieldToObject,formToObject:m.toObject,objectToQuery:x.objectToQuery,formToQuery:m.toQuery,formToJson:m.toJson,queryToObject:x.queryToObject,contentHandlers:y,_ioSetArgs:b._ioSetArgs,_ioCancelAll:b._ioCancelAll,_ioNotifyStart:b._ioNotifyStart,_ioWatch:b._ioWatch,_ioAddQueryToUrl:b._ioAddQueryToUrl,_isDocumentOk:b._isDocumentOk,_getText:b._getText,get:b.xhrGet,post:b.xhrPost,
put:b.xhrPut,del:b.xhrDelete});return b.xhr})},"dojo/_base/sniff":function(){define(["./kernel","./lang","../sniff"],function(b,A,q){b._name="browser";A.mixin(b,{isBrowser:!0,isFF:q("ff"),isIE:q("ie"),isKhtml:q("khtml"),isWebKit:q("webkit"),isMozilla:q("mozilla"),isMoz:q("mozilla"),isOpera:q("opera"),isSafari:q("safari"),isChrome:q("chrome"),isMac:q("mac"),isIos:q("ios"),isAndroid:q("android"),isWii:q("wii"),isQuirks:q("quirks"),isAir:q("air")});return q})},"dojo/io-query":function(){define(["./_base/lang"],
function(b){var A={};return{objectToQuery:function(q){var x=encodeURIComponent,r=[],m;for(m in q){var p=q[m];if(p!=A[m]){var t=x(m)+"\x3d";if(b.isArray(p))for(var h=0,c=p.length;h<c;++h)r.push(t+x(p[h]));else r.push(t+x(p))}}return r.join("\x26")},queryToObject:function(q){var x=decodeURIComponent;q=q.split("\x26");for(var r={},m,p,t=0,h=q.length;t<h;++t)if(p=q[t],p.length){var c=p.indexOf("\x3d");0>c?(m=x(p),p=""):(m=x(p.slice(0,c)),p=x(p.slice(c+1)));"string"==typeof r[m]&&(r[m]=[r[m]]);b.isArray(r[m])?
r[m].push(p):r[m]=p}return r}}})},"dojo/dom":function(){define(["./sniff","./_base/window","./_base/kernel"],function(b,A,q){if(7>=b("ie"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(m){}var x={};b("ie")?x.byId=function(m,p){if("string"!=typeof m)return m||null;var t=p||A.doc;p=m&&t.getElementById(m);if(!p||p.attributes.id.value!=m&&p.id!=m){t=t.all[m];if(!t||t.nodeName)t=[t];for(var h=0;p=t[h++];)if(p.attributes&&p.attributes.id&&p.attributes.id.value==m||p.id==m)return p}else return p;
return null}:x.byId=function(m,p){return("string"==typeof m?(p||A.doc).getElementById(m):m)||null};q=q.global.document||null;b.add("dom-contains",!(!q||!q.contains));x.isDescendant=b("dom-contains")?function(m,p){return!(!(p=x.byId(p))||!p.contains(x.byId(m)))}:function(m,p){try{for(m=x.byId(m),p=x.byId(p);m;){if(m==p)return!0;m=m.parentNode}}catch(t){}return!1};b.add("css-user-select",function(m,p,t){if(!t)return!1;m=t.style;p=["Khtml","O","Moz","Webkit"];t=p.length;var h="userSelect";do if("undefined"!==
typeof m[h])return h;while(t--&&(h=p[t]+"UserSelect"));return!1});var r=b("css-user-select");x.setSelectable=r?function(m,p){x.byId(m).style[r]=p?"":"none"}:function(m,p){m=x.byId(m);var t=m.getElementsByTagName("*"),h=t.length;if(p)for(m.removeAttribute("unselectable");h--;)t[h].removeAttribute("unselectable");else for(m.setAttribute("unselectable","on");h--;)t[h].setAttribute("unselectable","on")};return x})},"dojo/_base/window":function(){define(["./kernel","./lang","../sniff"],function(b,A,q){var x=
{global:b.global,doc:b.global.document||null,body:function(r){r=r||b.doc;return r.body||r.getElementsByTagName("body")[0]},setContext:function(r,m){b.global=x.global=r;b.doc=x.doc=m},withGlobal:function(r,m,p,t){var h=b.global;try{return b.global=x.global=r,x.withDoc.call(null,r.document,m,p,t)}finally{b.global=x.global=h}},withDoc:function(r,m,p,t){var h=x.doc,c=q("quirks"),a=q("ie"),f,e;try{b.doc=x.doc=r;b.isQuirks=q.add("quirks","BackCompat"==b.doc.compatMode,!0,!0);if(q("ie")&&(e=r.parentWindow)&&
e.navigator){var l=parseFloat(e.navigator.appVersion.split("MSIE ")[1])||void 0;(f=r.documentMode)&&5!=f&&Math.floor(l)!=f&&(l=f);b.isIE=q.add("ie",l,!0,!0)}p&&"string"==typeof m&&(m=p[m]);return m.apply(p,t||[])}finally{b.doc=x.doc=h,b.isQuirks=q.add("quirks",c,!0,!0),b.isIE=q.add("ie",a,!0,!0)}}};A.mixin(b,x);return x})},"dojo/dom-form":function(){define(["./_base/lang","./dom","./io-query","./json"],function(b,A,q,x){var r={fieldToObject:function(m){var p=null;if(m=A.byId(m)){var t=m.name,h=(m.type||
"").toLowerCase();if(t&&h&&!m.disabled)if("radio"==h||"checkbox"==h)m.checked&&(p=m.value);else if(m.multiple)for(p=[],m=[m.firstChild];m.length;)for(t=m.pop();t;t=t.nextSibling)if(1==t.nodeType&&"option"==t.tagName.toLowerCase())t.selected&&p.push(t.value);else{t.nextSibling&&m.push(t.nextSibling);t.firstChild&&m.push(t.firstChild);break}else p=m.value}return p},toObject:function(m){var p={};m=A.byId(m).elements;for(var t=0,h=m.length;t<h;++t){var c=m[t],a=c.name,f=(c.type||"").toLowerCase();if(a&&
f&&0>"file|submit|image|reset|button".indexOf(f)&&!c.disabled){var e=p,l=a;c=r.fieldToObject(c);if(null!==c){var k=e[l];"string"==typeof k?e[l]=[k,c]:b.isArray(k)?k.push(c):e[l]=c}"image"==f&&(p[a+".x"]=p[a+".y"]=p[a].x=p[a].y=0)}}return p},toQuery:function(m){return q.objectToQuery(r.toObject(m))},toJson:function(m,p){return x.stringify(r.toObject(m),null,p?4:0)}};return r})},"dojo/_base/Deferred":function(){define("./kernel ../Deferred ../promise/Promise ../errors/CancelError ../has ./lang ../when".split(" "),
function(b,A,q,x,r,m,p){var t=function(){},h=Object.freeze||function(){},c=b.Deferred=function(a){function f(z){if(k)throw Error("This deferred has already been resolved");l=z;k=!0;e()}function e(){for(var z;!z&&v;){var w=v;v=v.next;if(z=w.progress==t)k=!1;var E=y?w.error:w.resolved;r("config-useDeferredInstrumentation")&&y&&A.instrumentRejected&&A.instrumentRejected(l,!!E);if(E)try{var C=E(l);C&&"function"===typeof C.then?C.then(m.hitch(w.deferred,"resolve"),m.hitch(w.deferred,"reject"),m.hitch(w.deferred,
"progress")):(E=z&&void 0===C,z&&!E&&(y=C instanceof Error),w.deferred[E&&y?"reject":"resolve"](E?l:C))}catch(H){w.deferred.reject(H)}else y?w.deferred.reject(l):w.deferred.resolve(l)}}var l,k,d,u,y,n,v,D=this.promise=new q;this.isResolved=D.isResolved=function(){return 0==u};this.isRejected=D.isRejected=function(){return 1==u};this.isFulfilled=D.isFulfilled=function(){return 0<=u};this.isCanceled=D.isCanceled=function(){return d};this.resolve=this.callback=function(z){this.fired=u=0;this.results=
[z,null];f(z)};this.reject=this.errback=function(z){y=!0;this.fired=u=1;r("config-useDeferredInstrumentation")&&A.instrumentRejected&&A.instrumentRejected(z,!!v);f(z);this.results=[null,z]};this.progress=function(z){for(var w=v;w;){var E=w.progress;E&&E(z);w=w.next}};this.addCallbacks=function(z,w){this.then(z,w,t);return this};D.then=this.then=function(z,w,E){var C=E==t?this:new c(D.cancel);z={resolved:z,error:w,progress:E,deferred:C};v?n=n.next=z:v=n=z;k&&e();return C.promise};var O=this;D.cancel=
this.cancel=function(){if(!k){var z=a&&a(O);k||(z instanceof Error||(z=new x(z)),z.log=!1,O.reject(z))}d=!0};h(D)};m.extend(c,{addCallback:function(a){return this.addCallbacks(m.hitch.apply(b,arguments))},addErrback:function(a){return this.addCallbacks(null,m.hitch.apply(b,arguments))},addBoth:function(a){var f=m.hitch.apply(b,arguments);return this.addCallbacks(f,f)},fired:-1});c.when=b.when=p;return c})},"dojo/Deferred":function(){define(["./has","./_base/lang","./errors/CancelError","./promise/Promise",
"./promise/instrumentation"],function(b,A,q,x,r){var m=Object.freeze||function(){},p=function(f,e,l,k,d){2===e&&a.instrumentRejected&&0===f.length&&a.instrumentRejected(l,!1,k,d);for(d=0;d<f.length;d++)t(f[d],e,l,k)},t=function(f,e,l,k){var d=f[e],u=f.deferred;if(d)try{var y=d(l);if(0===e)"undefined"!==typeof y&&c(u,e,y);else{if(y&&"function"===typeof y.then){f.cancel=y.cancel;y.then(h(u,1),h(u,2),h(u,0));return}c(u,1,y)}}catch(n){c(u,2,n)}else c(u,e,l);2===e&&a.instrumentRejected&&a.instrumentRejected(l,
!!d,k,u.promise)},h=function(f,e){return function(l){c(f,e,l)}},c=function(f,e,l){if(!f.isCanceled())switch(e){case 0:f.progress(l);break;case 1:f.resolve(l);break;case 2:f.reject(l)}},a=function(f){var e=this.promise=new x,l=this,k,d,u,y=!1,n=[];Error.captureStackTrace&&(Error.captureStackTrace(l,a),Error.captureStackTrace(e,a));this.isResolved=e.isResolved=function(){return 1===k};this.isRejected=e.isRejected=function(){return 2===k};this.isFulfilled=e.isFulfilled=function(){return!!k};this.isCanceled=
e.isCanceled=function(){return y};this.progress=function(D,O){if(k){if(!0===O)throw Error("This deferred has already been fulfilled.");return e}p(n,0,D,null,l);return e};this.resolve=function(D,O){if(k){if(!0===O)throw Error("This deferred has already been fulfilled.");return e}p(n,k=1,d=D,null,l);n=null;return e};var v=this.reject=function(D,O){if(k){if(!0===O)throw Error("This deferred has already been fulfilled.");return e}Error.captureStackTrace&&Error.captureStackTrace(u={},v);p(n,k=2,d=D,u,
l);n=null;return e};this.then=e.then=function(D,O,z){var w=[z,D,O];w.cancel=e.cancel;w.deferred=new a(function(E){return w.cancel&&w.cancel(E)});k&&!n?t(w,k,d,u):n.push(w);return w.deferred.promise};this.cancel=e.cancel=function(D,O){if(!k){f&&(O=f(D),D="undefined"===typeof O?D:O);y=!0;if(!k)return"undefined"===typeof D&&(D=new q),v(D),D;if(2===k&&d===D)return D}else if(!0===O)throw Error("This deferred has already been fulfilled.");};m(e)};a.prototype.toString=function(){return"[object Deferred]"};
r&&r(a);return a})},"dojo/errors/CancelError":function(){define(["./create"],function(b){return b("CancelError",null,null,{dojoType:"cancel",log:!1})})},"dojo/errors/create":function(){define(["../_base/lang"],function(b){return function(A,q,x,r){x=x||Error;var m=function(p){if(x===Error){Error.captureStackTrace&&Error.captureStackTrace(this,m);var t=Error.call(this,p),h;for(h in t)t.hasOwnProperty(h)&&(this[h]=t[h]);this.message=p;this.stack=t.stack}else x.apply(this,arguments);q&&q.apply(this,arguments)};
m.prototype=b.delegate(x.prototype,r);m.prototype.name=A;return m.prototype.constructor=m}})},"dojo/promise/Promise":function(){define(["../_base/lang"],function(b){function A(){throw new TypeError("abstract");}return b.extend(function(){},{then:function(q,x,r){A()},cancel:function(q,x){A()},isResolved:function(){A()},isRejected:function(){A()},isFulfilled:function(){A()},isCanceled:function(){A()},"finally":function(q){return this.then(function(x){var r=q();return r&&"function"===typeof r.then?r.then(function(){return x}):
x},function(x){var r=q();if(r&&"function"===typeof r.then)return r.then(function(){throw x;});throw x;})},always:function(q){return this.then(q,q)},"catch":function(q){return this.then(null,q)},otherwise:function(q){return this.then(null,q)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},"dojo/promise/instrumentation":function(){define(["./tracer","../has","../_base/lang","../_base/array"],function(b,A,q,x){function r(f,e,l){if(!f||
!1!==f.log){var k="";f&&f.stack&&(k+=f.stack);e&&e.stack&&(k+="\n    ----------------------------------------\n    rejected"+e.stack.split("\n").slice(1).join("\n").replace(/^\s+/," "));l&&l.stack&&(k+="\n    ----------------------------------------\n"+l.stack);console.error(f,k)}}function m(f,e,l,k){e||r(f,l,k)}function p(f,e,l,k){x.some(h,function(d){if(d.error===f)return e&&(d.handled=!0),!0})||h.push({error:f,rejection:l,handled:e,deferred:k,timestamp:(new Date).getTime()});c||(c=setTimeout(t,
a))}function t(){var f=(new Date).getTime(),e=f-a;h=x.filter(h,function(l){return l.timestamp<e?(l.handled||r(l.error,l.rejection,l.deferred),!1):!0});c=h.length?setTimeout(t,h[0].timestamp+a-f):!1}A.add("config-useDeferredInstrumentation","report-unhandled-rejections");var h=[],c=!1,a=1E3;return function(f){var e=A("config-useDeferredInstrumentation");if(e){b.on("resolved",q.hitch(console,"log","resolved"));b.on("rejected",q.hitch(console,"log","rejected"));b.on("progress",q.hitch(console,"log",
"progress"));var l=[];"string"===typeof e&&(l=e.split(","),e=l.shift());if("report-rejections"===e)f.instrumentRejected=m;else if("report-unhandled-rejections"===e||!0===e||1===e)f.instrumentRejected=p,a=parseInt(l[0],10)||a;else throw Error("Unsupported instrumentation usage \x3c"+e+"\x3e");}}})},"dojo/promise/tracer":function(){define(["../_base/lang","./Promise","../Evented"],function(b,A,q){function x(p){setTimeout(function(){m.apply(r,p)},0)}var r=new q,m=r.emit;r.emit=null;A.prototype.trace=
function(){var p=b._toArray(arguments);this.then(function(t){x(["resolved",t].concat(p))},function(t){x(["rejected",t].concat(p))},function(t){x(["progress",t].concat(p))});return this};A.prototype.traceRejected=function(){var p=b._toArray(arguments);this.otherwise(function(t){x(["rejected",t].concat(p))});return this};return r})},"dojo/Evented":function(){define(["./aspect","./on"],function(b,A){function q(){}var x=b.after;q.prototype={on:function(r,m){return A.parse(this,r,m,function(p,t){return x(p,
"on"+t,m,!0)})},emit:function(r,m){var p=[this];p.push.apply(p,arguments);return A.emit.apply(A,p)}};return q})},"dojo/aspect":function(){define([],function(){function b(p,t,h,c){var a=p[t],f="around"==t;if(f){var e=h(function(){return a.advice(this,arguments)});var l={remove:function(){e&&(e=p=h=null)},advice:function(k,d){return e?e.apply(k,d):a.advice(k,d)}}}else l={remove:function(){if(l.advice){var k=l.previous,d=l.next;d||k?(k?k.next=d:p[t]=d,d&&(d.previous=k)):delete p[t];p=h=l.advice=null}},
id:p.nextId++,advice:h,receiveArguments:c};if(a&&!f)if("after"==t){for(;a.next&&(a=a.next););a.next=l;l.previous=a}else"before"==t&&(p[t]=l,l.next=a,a.previous=l);else p[t]=l;return l}function A(p){return function(t,h,c,a){var f=t[h],e;f&&f.target==t||(t[h]=e=function(){for(var l=e.nextId,k=arguments,d=e.before;d;)d.advice&&(k=d.advice.apply(this,k)||k),d=d.next;if(e.around)var u=e.around.advice(this,k);for(d=e.after;d&&d.id<l;){if(d.advice)if(d.receiveArguments){var y=d.advice.apply(this,k);u=y===
q?u:y}else u=d.advice.call(this,u,k);d=d.next}return u},f&&(e.around={advice:function(l,k){return f.apply(l,k)}}),e.target=t,e.nextId=e.nextId||0);t=b(e||f,p,c,a);c=null;return t}}var q,x=A("after"),r=A("before"),m=A("around");return{before:r,around:m,after:x}})},"dojo/on":function(){define(["./has!dom-addeventlistener?:./aspect","./_base/kernel","./sniff"],function(b,A,q){function x(w,E,C,H,B){if(H=E.match(/(.*):(.*)/))return E=H[2],H=H[1],t.selector(H,E).call(B,w,C);q("touch")&&(h.test(E)&&(C=z(C)),
q("event-orientationchange")||"orientationchange"!=E||(E="resize",w=window,C=z(C)));l&&(C=l(C));if(w.addEventListener){var K=E in f,J=K?f[E]:E;w.addEventListener(J,C,K);return{remove:function(){w.removeEventListener(J,C,K)}}}if(y&&w.attachEvent)return y(w,"on"+E,C);throw Error("Target must be an event emitter");}function r(){this.cancelable=!1;this.defaultPrevented=!0}function m(){this.bubbles=!1}var p=window.ScriptEngineMajorVersion;q.add("jscript",p&&p()+ScriptEngineMinorVersion()/10);q.add("event-orientationchange",
q("touch")&&!q("android"));q.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);q.add("event-focusin",function(w,E,C){return"onfocusin"in C});q("touch")&&q.add("touch-can-modify-event-delegate",function(){var w=function(){};w.prototype=document.createEvent("MouseEvents");try{var E=new w;E.target=null;return null===E.target}catch(C){return!1}});var t=function(w,E,C,H){return"function"!=typeof w.on||"function"==typeof E||w.nodeType?
t.parse(w,E,C,x,H,this):w.on(E,C)};t.pausable=function(w,E,C,H){var B;w=t(w,E,function(){if(!B)return C.apply(this,arguments)},H);w.pause=function(){B=!0};w.resume=function(){B=!1};return w};t.once=function(w,E,C,H){var B=t(w,E,function(){B.remove();return C.apply(this,arguments)});return B};t.parse=function(w,E,C,H,B,K){var J;if(E.call)return E.call(K,w,C);E instanceof Array?J=E:-1<E.indexOf(",")&&(J=E.split(/\s*,\s*/));if(J){var R=[];E=0;for(var V;V=J[E++];)R.push(t.parse(w,V,C,H,B,K));R.remove=
function(){for(var Y=0;Y<R.length;Y++)R[Y].remove()};return R}return H(w,E,C,B,K)};var h=/^touch/;t.matches=function(w,E,C,H,B){B=B&&"function"==typeof B.matches?B:A.query;H=!1!==H;1!=w.nodeType&&(w=w.parentNode);for(;!B.matches(w,E,C);)if(w==C||!1===H||!(w=w.parentNode)||1!=w.nodeType)return!1;return w};t.selector=function(w,E,C){return function(H,B){function K(V){return t.matches(V,w,H,C,J)}var J="function"==typeof w?{matches:w}:this,R=E.bubble;return R?t(H,R(K),B):t(H,E,function(V){var Y=K(V.target);
if(Y)return V.selectorTarget=Y,B.call(Y,V)})}};var c=[].slice,a=t.emit=function(w,E,C){var H=c.call(arguments,2),B="on"+E;if("parentNode"in w){var K=H[0]={},J;for(J in C)K[J]=C[J];K.preventDefault=r;K.stopPropagation=m;K.target=w;K.type=E;C=K}do w[B]&&w[B].apply(w,H);while(C&&C.bubbles&&(w=w.parentNode));return C&&C.cancelable&&C},f=q("event-focusin")?{}:{focusin:"focus",focusout:"blur"};if(!q("event-stopimmediatepropagation"))var e=function(){this.modified=this.immediatelyStopped=!0},l=function(w){return function(E){if(!E.immediatelyStopped)return E.stopImmediatePropagation=
e,w.apply(this,arguments)}};if(q("dom-addeventlistener"))t.emit=function(w,E,C){if(w.dispatchEvent&&document.createEvent){var H=(w.ownerDocument||document).createEvent("HTMLEvents");H.initEvent(E,!!C.bubbles,!!C.cancelable);for(var B in C)B in H||(H[B]=C[B]);return w.dispatchEvent(H)&&H}return a.apply(t,arguments)};else{t._fixEvent=function(w,E){w||(w=(E&&(E.ownerDocument||E.document||E).parentWindow||window).event);if(!w)return w;try{k&&w.type==k.type&&w.srcElement==k.target&&(w=k)}catch(C){}if(!w.target)switch(w.target=
w.srcElement,w.currentTarget=E||w.srcElement,"mouseover"==w.type&&(w.relatedTarget=w.fromElement),"mouseout"==w.type&&(w.relatedTarget=w.toElement),w.stopPropagation||(w.stopPropagation=n,w.preventDefault=v),w.type){case "keypress":E="charCode"in w?w.charCode:w.keyCode,10==E?(E=0,w.keyCode=13):13==E||27==E?E=0:3==E&&(E=99),w.charCode=E,E=w,E.keyChar=E.charCode?String.fromCharCode(E.charCode):"",E.charOrCode=E.keyChar||E.keyCode}return w};var k,d=function(w){this.handle=w};d.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};
var u=function(w){return function(E){E=t._fixEvent(E,this);var C=w.call(this,E);E.modified&&(k||setTimeout(function(){k=null}),k=E);return C}},y=function(w,E,C){C=u(C);if(((w.ownerDocument?w.ownerDocument.parentWindow:w.parentWindow||w.window||window)!=top||5.8>q("jscript"))&&!q("config-_allow_leaks")){"undefined"==typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var H=w[E];if(!H||!H.listeners){var B=H;H=Function("event","var callee \x3d arguments.callee; for(var i \x3d 0; i\x3ccallee.listeners.length; i++){var listener \x3d _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");
H.listeners=[];w[E]=H;H.global=this;B&&H.listeners.push(_dojoIEListeners_.push(B)-1)}H.listeners.push(w=H.global._dojoIEListeners_.push(C)-1);return new d(w)}return b.after(w,E,C,!0)},n=function(){this.cancelBubble=!0},v=t._preventDefault=function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey)try{this.keyCode=0}catch(w){}this.defaultPrevented=!0;this.returnValue=!1;this.modified=!0}}if(q("touch"))var D=function(){},O=window.orientation,z=function(w){return function(E){var C=E.corrected;if(!C){var H=
E.type;try{delete E.type}catch(J){}if(E.type){if(q("touch-can-modify-event-delegate"))D.prototype=E,C=new D;else{C={};for(var B in E)C[B]=E[B]}C.preventDefault=function(){E.preventDefault()};C.stopPropagation=function(){E.stopPropagation()}}else C=E,C.type=H;E.corrected=C;if("resize"==H){if(O==window.orientation)return null;O=window.orientation;C.type="orientationchange";return w.call(this,C)}"rotation"in C||(C.rotation=0,C.scale=1);if(window.TouchEvent&&E instanceof TouchEvent){H=C.changedTouches[0];
for(var K in H)delete C[K],C[K]=H[K]}}return w.call(this,C)}};return t})},"dojo/when":function(){define(["./Deferred","./promise/Promise"],function(b,A){return function(q,x,r,m){var p=q&&"function"===typeof q.then,t=p&&q instanceof A;if(!p)return 1<arguments.length?x?x(q):q:(new b).resolve(q);t||(p=new b(q.cancel),q.then(p.resolve,p.reject,p.progress),q=p.promise);return x||r||m?q.then(x,r,m):q}})},"dojo/_base/json":function(){define(["./kernel","../json"],function(b,A){b.fromJson=function(q){return eval("("+
q+")")};b._escapeString=A.stringify;b.toJsonIndentStr="\t";b.toJson=function(q,x){return A.stringify(q,function(r,m){return m&&(r=m.__json__||m.json,"function"==typeof r)?r.call(m):m},x&&b.toJsonIndentStr)};return b})},"dojo/request/watch":function(){define("./util ../errors/RequestTimeoutError ../errors/CancelError ../_base/array ../_base/window ../has!host-browser?dom-addeventlistener?:../on:".split(" "),function(b,A,q,x,r,m){function p(){for(var a=+new Date,f=0,e;f<c.length&&(e=c[f]);f++){var l=
e.response,k=l.options;e.isCanceled&&e.isCanceled()||e.isValid&&!e.isValid(l)?(c.splice(f--,1),t._onAction&&t._onAction()):e.isReady&&e.isReady(l)?(c.splice(f--,1),e.handleResponse(l),t._onAction&&t._onAction()):e.startTime&&e.startTime+(k.timeout||0)<a&&(c.splice(f--,1),e.cancel(new A("Timeout exceeded",l)),t._onAction&&t._onAction())}t._onInFlight&&t._onInFlight(e);c.length||(clearInterval(h),h=null)}function t(a){a.response.options.timeout&&(a.startTime=+new Date);a.isFulfilled()||(c.push(a),h||
(h=setInterval(p,50)),a.response.options.sync&&p())}var h=null,c=[];t.cancelAll=function(){try{x.forEach(c,function(a){try{a.cancel(new q("All requests canceled."))}catch(f){}})}catch(a){}};r&&m&&r.doc.attachEvent&&m(r.global,"unload",function(){t.cancelAll()});return t})},"dojo/request/util":function(){define("exports ../errors/RequestError ../errors/CancelError ../Deferred ../io-query ../_base/array ../_base/lang ../promise/Promise ../has".split(" "),function(b,A,q,x,r,m,p,t,h){function c(k){return h("native-arraybuffer")&&
k instanceof ArrayBuffer}function a(k){return h("native-blob")&&k instanceof Blob}function f(k){return l(k)}function e(k){return void 0!==k.data?k.data:k.text}b.deepCopy=function(k,d){for(var u in d){var y=k[u],n=d[u];if("__proto__"!==u&&y!==n){var v=n,D;if(D=v&&"object"===typeof v)D=v,D=!(h("native-formdata")&&D instanceof FormData);!D||("undefined"!==typeof Element?v instanceof Element:1===v.nodeType)||a(v)||c(v)?k[u]=n:"[object Date]"===Object.prototype.toString.call(n)?k[u]=new Date(n):p.isArray(n)?
k[u]=b.deepCopyArray(n):y&&"object"===typeof y?b.deepCopy(y,n):k[u]=b.deepCopy({},n)}}return k};b.deepCopyArray=function(k){for(var d=[],u=0,y=k.length;u<y;u++){var n=k[u];"object"===typeof n?d.push(b.deepCopy({},n)):d.push(n)}return d};b.deepCreate=function(k,d){d=d||{};var u=p.delegate(k),y,n;for(y in k)(n=k[y])&&"object"===typeof n&&(u[y]=b.deepCreate(n,d[y]));return b.deepCopy(u,d)};var l=Object.freeze||function(k){return k};b.deferred=function(k,d,u,y,n,v){var D=new x(function(z){d&&d(D,k);return z&&
(z instanceof A||z instanceof q)?z:new q("Request canceled",k)});D.response=k;D.isValid=u;D.isReady=y;D.handleResponse=n;u=D.then(f).otherwise(function(z){z.response=k;throw z;});b.notify&&u.then(p.hitch(b.notify,"emit","load"),p.hitch(b.notify,"emit","error"));y=u.then(e);n=new t;for(var O in y)y.hasOwnProperty(O)&&(n[O]=y[O]);n.response=u;l(n);v&&D.then(function(z){v.call(D,z)},function(z){v.call(D,k,z)});D.promise=n;D.then=n.then;return D};b.addCommonMethods=function(k,d){m.forEach(d||["GET","POST",
"PUT","DELETE"],function(u){k[("DELETE"===u?"DEL":u).toLowerCase()]=function(y,n){n=p.delegate(n||{});n.method=u;return k(y,n)}})};b.parseArgs=function(k,d,u){var y=d.data,n=d.query;!y||u||"object"!==typeof y||h("native-xhr2")&&(c(y)||a(y))||(d.data=r.objectToQuery(y));n?("object"===typeof n&&(n=r.objectToQuery(n)),d.preventCache&&(n+=(n?"\x26":"")+"request.preventCache\x3d"+ +new Date)):d.preventCache&&(n="request.preventCache\x3d"+ +new Date);k&&n&&(k+=(~k.indexOf("?")?"\x26":"?")+n);return{url:k,
options:d,getHeader:function(v){return null}}};b.checkStatus=function(k){k=k||0;return 200<=k&&300>k||304===k||1223===k||!k}})},"dojo/errors/RequestError":function(){define(["./create"],function(b){return b("RequestError",function(A,q){this.response=q})})},"dojo/errors/RequestTimeoutError":function(){define(["./create","./RequestError"],function(b,A){return b("RequestTimeoutError",null,A,{dojoType:"timeout"})})},"dojo/request/xhr":function(){define(["../errors/RequestError","./watch","./handlers",
"./util","../has"],function(b,A,q,x,r){function m(d,u){var y=d.xhr;d.status=d.xhr.status;try{d.text=y.responseText}catch(v){}"xml"===d.options.handleAs&&(d.data=y.responseXML);if(u)this.reject(u);else{try{q(d)}catch(v){var n=v}x.checkStatus(y.status)?n?this.reject(n):this.resolve(d):(u=n?new b("Unable to load "+d.url+" status: "+y.status+" and an error in handleAs: transformation of response",d):new b("Unable to load "+d.url+" status: "+y.status,d),this.reject(u))}}function p(d){return this.xhr.getResponseHeader(d)}
function t(d,u,y){var n=r("native-formdata")&&u&&u.data&&u.data instanceof FormData,v=x.parseArgs(d,x.deepCreate(k,u),n);d=v.url;u=v.options;var D=!u.data&&"POST"!==u.method&&"PUT"!==u.method;10>=r("ie")&&(d=d.split("#")[0]);var O,z=x.deferred(v,a,c,e,m,function(){O&&O()}),w=v.xhr=t._create();if(!w)return z.cancel(new b("XHR was not created")),y?z:z.promise;v.getHeader=p;f&&(O=f(w,z,v,u.uploadProgress));var E="undefined"===typeof u.data?null:u.data,C=!u.sync,H=u.method;try{w.open(H,d,C,u.user||l,
u.password||l);u.withCredentials&&(w.withCredentials=u.withCredentials);r("native-response-type")&&u.handleAs in h&&(w.responseType=h[u.handleAs]);var B=u.headers;d=n||D?!1:"application/x-www-form-urlencoded";if(B)for(var K in B)"content-type"===K.toLowerCase()?d=B[K]:B[K]&&w.setRequestHeader(K,B[K]);d&&!1!==d&&w.setRequestHeader("Content-Type",d);B&&"X-Requested-With"in B||w.setRequestHeader("X-Requested-With","XMLHttpRequest");x.notify&&x.notify.emit("send",v,z.promise.cancel);w.send(E)}catch(J){z.reject(J)}A(z);
w=null;return y?z:z.promise}r.add("native-xhr",function(){return"undefined"!==typeof XMLHttpRequest});r.add("dojo-force-activex-xhr",function(){return r("activex")&&"file:"===window.location.protocol});r.add("native-xhr2",function(){if(r("native-xhr")&&!r("dojo-force-activex-xhr")){var d=new XMLHttpRequest;return"undefined"!==typeof d.addEventListener&&("undefined"===typeof opera||"undefined"!==typeof d.upload)}});r.add("native-formdata",function(){return"undefined"!==typeof FormData});r.add("native-blob",
function(){return"undefined"!==typeof Blob});r.add("native-arraybuffer",function(){return"undefined"!==typeof ArrayBuffer});r.add("native-response-type",function(){return r("native-xhr")&&"undefined"!==typeof(new XMLHttpRequest).responseType});r.add("native-xhr2-blob",function(){if(r("native-response-type")){var d=new XMLHttpRequest;d.open("GET","https://dojotoolkit.org/",!0);d.responseType="blob";var u=d.responseType;d.abort();return"blob"===u}});var h={blob:r("native-xhr2-blob")?"blob":"arraybuffer",
document:"document",arraybuffer:"arraybuffer"};if(r("native-xhr2")){var c=function(d){return!this.isFulfilled()};var a=function(d,u){u.xhr.abort()};var f=function(d,u,y,n){function v(E){u.handleResponse(y)}function D(E){E=new b("Unable to load "+y.url+" status: "+E.target.status,y);u.handleResponse(y,E)}function O(E,C){y.transferType=E;C.lengthComputable?(y.loaded=C.loaded,y.total=C.total,u.progress(y)):3===y.xhr.readyState&&(y.loaded="loaded"in C?C.loaded:C.position,u.progress(y))}function z(E){return O("download",
E)}function w(E){return O("upload",E)}d.addEventListener("load",v,!1);d.addEventListener("error",D,!1);d.addEventListener("progress",z,!1);n&&d.upload&&d.upload.addEventListener("progress",w,!1);return function(){d.removeEventListener("load",v,!1);d.removeEventListener("error",D,!1);d.removeEventListener("progress",z,!1);d.upload.removeEventListener("progress",w,!1);d=null}}}else{c=function(d){return d.xhr.readyState};var e=function(d){return 4===d.xhr.readyState};a=function(d,u){d=u.xhr;u=typeof d.abort;
"function"!==u&&"object"!==u&&"unknown"!==u||d.abort()}}var l,k={data:null,query:null,sync:!1,method:"GET"};t._create=function(){throw Error("XMLHTTP not available");};if(r("native-xhr")&&!r("dojo-force-activex-xhr"))t._create=function(){return new XMLHttpRequest};else if(r("activex"))try{new ActiveXObject("Msxml2.XMLHTTP"),t._create=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(d){try{new ActiveXObject("Microsoft.XMLHTTP"),t._create=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(u){}}x.addCommonMethods(t);
return t})},"dojo/request/handlers":function(){define(["../json","../_base/kernel","../_base/array","../has","../selector/_loader"],function(b,A,q,x){function r(a){var f=c[a.options.handleAs];a.data=f?f(a):a.data||a.text;return a}x.add("activex","undefined"!==typeof ActiveXObject);x.add("dom-parser",function(a){return"DOMParser"in a});if(x("activex")){var m=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML.DOMDocument"],p;var t=function(a){function f(k){try{var d=
new ActiveXObject(k);d.async=!1;d.loadXML(l);e=d;p=k}catch(u){return!1}return!0}var e=a.data,l=a.text;e&&x("dom-qsa2.1")&&!e.querySelectorAll&&x("dom-parser")&&(e=(new DOMParser).parseFromString(l,"application/xml"));e&&e.documentElement||p&&f(p)||q.some(m,f);return e}}var h=function(a){return x("native-xhr2-blob")||"blob"!==a.options.handleAs||"undefined"===typeof Blob?a.xhr.response:new Blob([a.xhr.response],{type:a.xhr.getResponseHeader("Content-Type")})},c={javascript:function(a){return A.eval(a.text||
"")},json:function(a){return b.parse(a.text||null)},xml:t,blob:h,arraybuffer:h,document:h};r.register=function(a,f){c[a]=f};return r})},"dojo/selector/_loader":function(){define(["../has","require"],function(b,A){if("undefined"!==typeof document){var q=document.createElement("div");b.add("dom-qsa2.1",!!q.querySelectorAll);b.add("dom-qsa3",function(){try{return q.innerHTML="\x3cp class\x3d'TEST'\x3e\x3c/p\x3e",1==q.querySelectorAll(".TEST:empty").length}catch(r){}})}var x;return{load:function(r,m,
p,t){if(t&&t.isBuild)p();else{t=A;r="default"==r?b("config-selectorEngine")||"css3":r;r="css2"==r||"lite"==r?"./lite":"css2.1"==r?b("dom-qsa2.1")?"./lite":"./acme":"css3"==r?b("dom-qsa3")?"./lite":"./acme":"acme"==r?"./acme":(t=m)&&r;if("?"==r.charAt(r.length-1)){r=r.substring(0,r.length-1);var h=!0}if(h&&(b("dom-compliant-qsa")||x))return p(x);t([r],function(c){"./lite"!=r&&(x=c);p(c)})}}}})},"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),
function(b,A,q,x,r,m,p,t,h,c,a){function f(w,E){w.canDelete&&u._remove(w.id,E.options.frameDoc,!0)}function e(w){z&&z.length&&(r.forEach(z,function(E){u._remove(E.id,E.frameDoc);E.frameDoc=null}),z=[]);return w.options.jsonp?!w.data:!0}function l(w){return!!this.scriptLoaded}function k(w){return(w=w.options.checkString)&&eval("typeof("+w+') !\x3d\x3d "undefined"')}function d(w,E){if(this.canDelete){var C=this.response.options;z.push({id:this.id,frameDoc:C.ioArgs?C.ioArgs.frameDoc:C.frameDoc});C.ioArgs&&
(C.ioArgs.frameDoc=null);C.frameDoc=null}E?this.reject(E):this.resolve(w)}function u(w,E,C){var H=q.parseArgs(w,q.deepCopy({},E));w=H.url;E=H.options;var B=q.deferred(H,f,e,E.jsonp?null:E.checkString?k:l,d);m.mixin(B,{id:y+n++,canDelete:!1});E.jsonp&&((new RegExp("[?\x26]"+E.jsonp+"\x3d")).test(w)||(w+=(~w.indexOf("?")?"\x26":"?")+E.jsonp+"\x3d"+(E.frameDoc?"parent.":"")+y+"_callbacks."+B.id),B.canDelete=!0,O[B.id]=function(R){H.data=R;B.handleResponse(H)});q.notify&&q.notify.emit("send",H,B.promise.cancel);
if(!E.canAttach||E.canAttach(B)){var K=u._attach(B.id,w,E.frameDoc,function(R){if(!(R instanceof Error)){var V=Error("Error loading "+(R.target?R.target.src:"script"));V.source=R;R=V}B.reject(R);u._remove(B.id,E.frameDoc,!0)});if(!E.jsonp&&!E.checkString)var J=p(K,v,function(R){if("load"===R.type||D.test(K.readyState))J.remove(),B.scriptLoaded=R})}A(B);return C?B:B.promise}c.add("script-readystatechange",function(w,E){return"undefined"!==typeof E.createElement("script").onreadystatechange&&("undefined"===
typeof w.opera||"[object Opera]"!==w.opera.toString())});var y=b.id.replace(/[\/\.\-]/g,"_"),n=0,v=c("script-readystatechange")?"readystatechange":"load",D=/complete|loaded/,O=x.global[y+"_callbacks"]={},z=[];u.get=u;u._attach=function(w,E,C,H){C=C||a.doc;var B=C.createElement("script");if(H)p.once(B,"error",H);B.type="text/javascript";try{B.src=E}catch(K){H&&H(B)}B.id=w;B.async=!0;B.charset="utf-8";return C.getElementsByTagName("head")[0].appendChild(B)};u._remove=function(w,E,C){h.destroy(t.byId(w,
E));O[w]&&(C?O[w]=function(){delete O[w]}:delete O[w])};u._callbacksProperty=y+"_callbacks";return u})},"dojo/dom-construct":function(){define("exports ./_base/kernel ./sniff ./_base/window ./dom ./dom-attr".split(" "),function(b,A,q,x,r,m){function p(y,n){var v=n.parentNode;v&&v.insertBefore(y,n)}function t(y){if("innerHTML"in y)try{y.innerHTML="";return}catch(v){}for(var n;n=y.lastChild;)y.removeChild(n)}var h={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],
td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},c=/<\s*([\w:]+)/,a={},f=0,e="__"+A._scopeName+"ToDomId",l;for(l in h)h.hasOwnProperty(l)&&(A=h[l],A.pre="option"==l?'\x3cselect multiple\x3d"multiple"\x3e':"\x3c"+A.join("\x3e\x3c")+"\x3e",A.post="\x3c/"+A.reverse().join("\x3e\x3c/")+"\x3e");var k;8>=q("ie")&&(k=function(y){y.__dojo_html5_tested="yes";var n=d("div",{innerHTML:"\x3cnav\x3ea\x3c/nav\x3e",style:{visibility:"hidden"}},
y.body);1!==n.childNodes.length&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,function(v){y.createElement(v)});u(n)});b.toDom=function(y,n){n=n||x.doc;var v=n[e];v||(n[e]=v=++f+"",a[v]=n.createElement("div"));8>=q("ie")&&!n.__dojo_html5_tested&&n.body&&k(n);y+="";var D=y.match(c),O=D?D[1].toLowerCase():"";v=a[v];if(D&&h[O])for(D=h[O],v.innerHTML=D.pre+y+D.post,y=D.length;y;--y)v=v.firstChild;
else v.innerHTML=y;if(1==v.childNodes.length)return v.removeChild(v.firstChild);for(y=n.createDocumentFragment();n=v.firstChild;)y.appendChild(n);return y};b.place=function(y,n,v){n=r.byId(n);"string"==typeof y&&(y=/^\s*</.test(y)?b.toDom(y,n.ownerDocument):r.byId(y));if("number"==typeof v){var D=n.childNodes;!D.length||D.length<=v?n.appendChild(y):p(y,D[0>v?0:v])}else switch(v){case "before":p(y,n);break;case "after":v=y;(D=n.parentNode)&&(D.lastChild==n?D.appendChild(v):D.insertBefore(v,n.nextSibling));
break;case "replace":n.parentNode.replaceChild(y,n);break;case "only":b.empty(n);n.appendChild(y);break;case "first":if(n.firstChild){p(y,n.firstChild);break}default:n.appendChild(y)}return y};var d=b.create=function(y,n,v,D){var O=x.doc;v&&(v=r.byId(v),O=v.ownerDocument);"string"==typeof y&&(y=O.createElement(y));n&&m.set(y,n);v&&b.place(y,v,D);return y};b.empty=function(y){t(r.byId(y))};var u=b.destroy=function(y){if(y=r.byId(y)){var n=y;y=y.parentNode;n.firstChild&&t(n);y&&(q("ie")&&y.canHaveChildren&&
"removeNode"in n?n.removeNode(!1):y.removeChild(n))}}})},"dojo/dom-attr":function(){define("exports ./sniff ./_base/lang ./dom ./dom-style ./dom-prop".split(" "),function(b,A,q,x,r,m){function p(c,a){c=c.getAttributeNode&&c.getAttributeNode(a);return!!c&&c.specified}var t={innerHTML:1,textContent:1,className:1,htmlFor:A("ie")?1:0,value:1},h={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};b.has=function(c,a){var f=a.toLowerCase();return!!t[m.names[f]||a]||p(x.byId(c),h[f]||
a)};b.get=function(c,a){c=x.byId(c);var f=a.toLowerCase(),e=m.names[f]||a,l=c[e];if(t[e]&&"undefined"!=typeof l)return l;if("textContent"==e)return m.get(c,e);if("href"!=e&&("boolean"==typeof l||q.isFunction(l)))return l;a=h[f]||a;return p(c,a)?c.getAttribute(a):null};b.set=function(c,a,f){c=x.byId(c);if(2==arguments.length){for(var e in a)b.set(c,e,a[e]);return c}e=a.toLowerCase();var l=m.names[e]||a,k=t[l];if("style"==l&&"string"!=typeof f)return r.set(c,f),c;if(k||"boolean"==typeof f||q.isFunction(f))return m.set(c,
a,f);c.setAttribute(h[e]||a,f);return c};b.remove=function(c,a){x.byId(c).removeAttribute(h[a.toLowerCase()]||a)};b.getNodeProp=function(c,a){c=x.byId(c);var f=a.toLowerCase(),e=m.names[f]||a;if(e in c&&"href"!=e)return c[e];a=h[f]||a;return p(c,a)?c.getAttribute(a):null}})},"dojo/dom-style":function(){define(["./sniff","./dom","./_base/window"],function(b,A,q){function x(l,k,d){k=k.toLowerCase();if("auto"==d){if("height"==k)return l.offsetHeight;if("width"==k)return l.offsetWidth}if("fontweight"==
k)switch(d){case 700:return"bold";default:return"normal"}k in a||(a[k]=f.test(k));return a[k]?p(l,d):d}var r={};var m=b("webkit")?function(l){if(1==l.nodeType){var k=l.ownerDocument.defaultView;var d=k.getComputedStyle(l,null);!d&&l.style&&(l.style.display="",d=k.getComputedStyle(l,null))}return d||{}}:b("ie")&&(9>b("ie")||b("quirks"))?function(l){return 1==l.nodeType&&l.currentStyle?l.currentStyle:{}}:function(l){if(1===l.nodeType){var k=l.ownerDocument.defaultView;return(k.opener?k:q.global.window).getComputedStyle(l,
null)}return{}};r.getComputedStyle=m;var p=b("ie")?function(l,k){if(!k)return 0;if("medium"==k)return 4;if(k.slice&&"px"==k.slice(-2))return parseFloat(k);var d=l.style,u=l.runtimeStyle,y=d.left,n=u.left;u.left=l.currentStyle.left;try{d.left=k,k=d.pixelLeft}catch(v){k=0}d.left=y;u.left=n;return k}:function(l,k){return parseFloat(k)||0};r.toPixelValue=p;var t=function(l,k){try{return l.filters.item("DXImageTransform.Microsoft.Alpha")}catch(d){return k?{}:null}},h=9>b("ie")||10>b("ie")&&b("quirks")?
function(l){try{return t(l).Opacity/100}catch(k){return 1}}:function(l){return m(l).opacity},c=9>b("ie")||10>b("ie")&&b("quirks")?function(l,k){""===k&&(k=1);var d=100*k;1===k?(l.style.zoom="",t(l)&&(l.style.filter=l.style.filter.replace(/\s*progid:DXImageTransform.Microsoft.Alpha\([^\)]+?\)/i,""))):(l.style.zoom=1,t(l)?t(l,1).Opacity=d:l.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity\x3d"+d+")",t(l,1).Enabled=!0);if("tr"==l.tagName.toLowerCase())for(l=l.firstChild;l;l=l.nextSibling)"td"==
l.tagName.toLowerCase()&&c(l,k);return k}:function(l,k){return l.style.opacity=k},a={left:!0,top:!0},f=/margin|padding|width|height|max|min|offset/,e={cssFloat:1,styleFloat:1,"float":1};r.get=function(l,k){var d=A.byId(l),u=arguments.length;if(2==u&&"opacity"==k)return h(d);k=e[k]?"cssFloat"in d.style?"cssFloat":"styleFloat":k;var y=r.getComputedStyle(d);return 1==u?y:x(d,k,y[k]||d.style[k])};r.set=function(l,k,d){var u=A.byId(l),y=arguments.length,n="opacity"==k;k=e[k]?"cssFloat"in u.style?"cssFloat":
"styleFloat":k;if(3==y)return n?c(u,d):u.style[k]=d;for(var v in k)r.set(l,v,k[v]);return r.getComputedStyle(u)};return r})},"dojo/dom-prop":function(){define("exports ./_base/kernel ./sniff ./_base/lang ./dom ./dom-style ./dom-construct ./_base/connect".split(" "),function(b,A,q,x,r,m,p,t){function h(e){var l="";e=e.childNodes;for(var k=0,d;d=e[k];k++)8!=d.nodeType&&(l=1==d.nodeType?l+h(d):l+d.nodeValue);return l}var c={},a=1,f=A._scopeName+"attrid";q.add("dom-textContent",function(e,l,k){return"textContent"in
k});b.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",textcontent:"textContent",valuetype:"valueType"};b.get=function(e,l){e=r.byId(e);var k=l.toLowerCase();l=b.names[k]||l;return"textContent"!=l||q("dom-textContent")?e[l]:h(e)};b.set=function(e,l,k){e=r.byId(e);if(2==arguments.length&&"string"!=typeof l){for(var d in l)b.set(e,d,l[d]);return e}d=l.toLowerCase();d=b.names[d]||l;if("style"==d&&"string"!=
typeof k)return m.set(e,k),e;if("innerHTML"==d)return q("ie")&&e.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(p.empty(e),e.appendChild(p.toDom(k,e.ownerDocument))):e[d]=k,e;if("textContent"==d&&!q("dom-textContent"))return p.empty(e),e.appendChild(e.ownerDocument.createTextNode(k)),e;if(x.isFunction(k)){var u=e[f];u||(u=a++,e[f]=u);c[u]||(c[u]={});var y=c[u][d];if(y)t.disconnect(y);else try{delete e[d]}catch(n){}k?c[u][d]=t.connect(e,d,k):e[d]=null;return e}e[d]=
k;return e}})},"dojo/_base/connect":function(){define("./kernel ../on ../topic ../aspect ./event ../mouse ./sniff ./lang ../keys".split(" "),function(b,A,q,x,r,m,p,t){function h(d,u,y,n,v){n=t.hitch(y,n);if(!d||!d.addEventListener&&!d.attachEvent)return x.after(d||b.global,u,n,!0);"string"==typeof u&&"on"==u.substring(0,2)&&(u=u.substring(2));d||(d=b.global);if(!v)switch(u){case "keypress":u=l;break;case "mouseenter":u=m.enter;break;case "mouseleave":u=m.leave}return A(d,u,n,v)}function c(d){d.keyChar=
d.charCode?String.fromCharCode(d.charCode):"";d.charOrCode=d.keyChar||d.keyCode}p.add("events-keypress-typed",function(){var d={charCode:0};try{d=document.createEvent("KeyboardEvent"),(d.initKeyboardEvent||d.initKeyEvent).call(d,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(u){}return 0==d.charCode&&!p("opera")});var a={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},f=p("mac")?"metaKey":"ctrlKey",e=function(d,u){u=t.mixin({},d,u);c(u);u.preventDefault=
function(){d.preventDefault()};u.stopPropagation=function(){d.stopPropagation()};return u};var l=p("events-keypress-typed")?function(d,u){var y=A(d,"keydown",function(v){var D=v.keyCode,O=13!=D&&32!=D&&(27!=D||!p("ie"))&&(48>D||90<D)&&(96>D||111<D)&&(186>D||192<D)&&(219>D||222<D)&&229!=D;if(O||v.ctrlKey){O=O?0:D;if(v.ctrlKey){if(3==D||13==D)return u.call(v.currentTarget,v);O=95<O&&106>O?O-48:!v.shiftKey&&65<=O&&90>=O?O+32:a[O]||O}D=e(v,{type:"keypress",faux:!0,charCode:O});u.call(v.currentTarget,
D);if(p("ie"))try{v.keyCode=D.keyCode}catch(z){}}}),n=A(d,"keypress",function(v){var D=v.charCode;v=e(v,{charCode:32<=D?D:0,faux:!0});return u.call(this,v)});return{remove:function(){y.remove();n.remove()}}}:p("opera")?function(d,u){return A(d,"keypress",function(y){var n=y.which;3==n&&(n=99);n=32>n&&!y.shiftKey?0:n;y.ctrlKey&&!y.shiftKey&&65<=n&&90>=n&&(n+=32);return u.call(this,e(y,{charCode:n}))})}:function(d,u){return A(d,"keypress",function(y){c(y);return u.call(this,y)})};var k={_keypress:l,
connect:function(d,u,y,n,v){var D=arguments,O=[],z=0;O.push("string"==typeof D[0]?null:D[z++],D[z++]);var w=D[z+1];O.push("string"==typeof w||"function"==typeof w?D[z++]:null,D[z++]);for(w=D.length;z<w;z++)O.push(D[z]);return h.apply(this,O)},disconnect:function(d){d&&d.remove()},subscribe:function(d,u,y){return q.subscribe(d,t.hitch(u,y))},publish:function(d,u){return q.publish.apply(q,[d].concat(u))},connectPublisher:function(d,u,y){var n=function(){k.publish(d,arguments)};return y?k.connect(u,
y,n):k.connect(u,n)},isCopyKey:function(d){return d[f]}};k.unsubscribe=k.disconnect;t.mixin(b,k);return k})},"dojo/topic":function(){define(["./Evented"],function(b){var A=new b;return{publish:function(q,x){return A.emit.apply(A,arguments)},subscribe:function(q,x){return A.on.apply(A,arguments)}}})},"dojo/_base/event":function(){define(["./kernel","../on","../has","../dom-geometry"],function(b,A,q,x){if(A._fixEvent){var r=A._fixEvent;A._fixEvent=function(p,t){(p=r(p,t))&&x.normalizeEvent(p);return p}}var m=
{fix:function(p,t){return A._fixEvent?A._fixEvent(p,t):p},stop:function(p){q("dom-addeventlistener")||p&&p.preventDefault?(p.preventDefault(),p.stopPropagation()):(p=p||window.event,p.cancelBubble=!0,A._preventDefault.call(p))}};b.fixEvent=m.fix;b.stopEvent=m.stop;return m})},"dojo/dom-geometry":function(){define(["./sniff","./_base/window","./dom","./dom-style"],function(b,A,q,x){function r(a,f,e,l,k,d){d=d||"px";a=a.style;isNaN(f)||(a.left=f+d);isNaN(e)||(a.top=e+d);0<=l&&(a.width=l+d);0<=k&&(a.height=
k+d)}function m(a){return"button"==a.tagName.toLowerCase()||"input"==a.tagName.toLowerCase()&&"button"==(a.getAttribute("type")||"").toLowerCase()}function p(a){return"border-box"==h.boxModel||"table"==a.tagName.toLowerCase()||m(a)}function t(a){var f={x:0,y:0,width:0,height:0,top:0,right:0,bottom:0,left:0};try{var e=a.getBoundingClientRect()}catch(l){return f}return"undefined"===typeof e.left?f:e}var h={boxModel:"content-box"};b("ie")&&(h.boxModel="BackCompat"==document.compatMode?"border-box":"content-box");
h.getPadExtents=function(a,f){a=q.byId(a);var e=f||x.getComputedStyle(a),l=x.toPixelValue;f=l(a,e.paddingLeft);var k=l(a,e.paddingTop),d=l(a,e.paddingRight);a=l(a,e.paddingBottom);return{l:f,t:k,r:d,b:a,w:f+d,h:k+a}};h.getBorderExtents=function(a,f){a=q.byId(a);var e=x.toPixelValue,l=f||x.getComputedStyle(a);f="none"!=l.borderLeftStyle?e(a,l.borderLeftWidth):0;var k="none"!=l.borderTopStyle?e(a,l.borderTopWidth):0,d="none"!=l.borderRightStyle?e(a,l.borderRightWidth):0;a="none"!=l.borderBottomStyle?
e(a,l.borderBottomWidth):0;return{l:f,t:k,r:d,b:a,w:f+d,h:k+a}};h.getPadBorderExtents=function(a,f){a=q.byId(a);var e=f||x.getComputedStyle(a);f=h.getPadExtents(a,e);a=h.getBorderExtents(a,e);return{l:f.l+a.l,t:f.t+a.t,r:f.r+a.r,b:f.b+a.b,w:f.w+a.w,h:f.h+a.h}};h.getMarginExtents=function(a,f){a=q.byId(a);var e=f||x.getComputedStyle(a),l=x.toPixelValue;f=l(a,e.marginLeft);var k=l(a,e.marginTop),d=l(a,e.marginRight);a=l(a,e.marginBottom);return{l:f,t:k,r:d,b:a,w:f+d,h:k+a}};h.getMarginBox=function(a,
f){a=q.byId(a);f=f||x.getComputedStyle(a);f=h.getMarginExtents(a,f);var e=a.offsetLeft-f.l,l=a.offsetTop-f.t,k=a.parentNode,d=x.toPixelValue;8==b("ie")&&!b("quirks")&&k&&(k=x.getComputedStyle(k),e-="none"!=k.borderLeftStyle?d(a,k.borderLeftWidth):0,l-="none"!=k.borderTopStyle?d(a,k.borderTopWidth):0);return{l:e,t:l,w:a.offsetWidth+f.w,h:a.offsetHeight+f.h}};h.getContentBox=function(a,f){a=q.byId(a);var e=f||x.getComputedStyle(a);f=a.clientWidth;var l=h.getPadExtents(a,e);var k=h.getBorderExtents(a,
e);e=a.offsetLeft+l.l+k.l;var d=a.offsetTop+l.t+k.t;f?k=a.clientHeight:(f=a.offsetWidth-k.w,k=a.offsetHeight-k.h);if(8==b("ie")&&!b("quirks")){var u=a.parentNode,y=x.toPixelValue;u&&(u=x.getComputedStyle(u),e-="none"!=u.borderLeftStyle?y(a,u.borderLeftWidth):0,d-="none"!=u.borderTopStyle?y(a,u.borderTopWidth):0)}return{l:e,t:d,w:f-l.w,h:k-l.h}};h.setContentSize=function(a,f,e){a=q.byId(a);var l=f.w;f=f.h;p(a)&&(e=h.getPadBorderExtents(a,e),0<=l&&(l+=e.w),0<=f&&(f+=e.h));r(a,NaN,NaN,l,f)};var c={l:0,
t:0,w:0,h:0};h.setMarginBox=function(a,f,e){a=q.byId(a);var l=e||x.getComputedStyle(a);e=f.w;var k=f.h,d=p(a)?c:h.getPadBorderExtents(a,l);l=h.getMarginExtents(a,l);if(b("webkit")&&m(a)){var u=a.style;0<=e&&!u.width&&(u.width="4px");0<=k&&!u.height&&(u.height="4px")}0<=e&&(e=Math.max(e-d.w-l.w,0));0<=k&&(k=Math.max(k-d.h-l.h,0));r(a,f.l,f.t,e,k)};h.isBodyLtr=function(a){a=a||A.doc;return"ltr"==(A.body(a).dir||a.documentElement.dir||"ltr").toLowerCase()};h.docScroll=function(a){a=a||A.doc;var f=a.parentWindow||
a.defaultView;return"pageXOffset"in f?{x:f.pageXOffset,y:f.pageYOffset}:(f=b("quirks")?A.body(a):a.documentElement)&&{x:h.fixIeBiDiScrollLeft(f.scrollLeft||0,a),y:f.scrollTop||0}};h.getIeDocumentElementOffset=function(a){return{x:0,y:0}};h.fixIeBiDiScrollLeft=function(a,f){f=f||A.doc;var e=b("ie");if(e&&!h.isBodyLtr(f)){var l=b("quirks");f=l?A.body(f):f.documentElement;var k=A.global;6==e&&!l&&k.frameElement&&f.scrollHeight>f.clientHeight&&(a+=f.clientLeft);return 8>e||l?a+f.clientWidth-f.scrollWidth:
-a}return a};h.position=function(a,f){a=q.byId(a);var e=A.body(a.ownerDocument),l=t(a);l={x:l.left,y:l.top,w:l.right-l.left,h:l.bottom-l.top};9>b("ie")&&(l.x-=b("quirks")?e.clientLeft+e.offsetLeft:0,l.y-=b("quirks")?e.clientTop+e.offsetTop:0);f&&(a=h.docScroll(a.ownerDocument),l.x+=a.x,l.y+=a.y);return l};h.getMarginSize=function(a,f){a=q.byId(a);f=h.getMarginExtents(a,f||x.getComputedStyle(a));a=t(a);return{w:a.right-a.left+f.w,h:a.bottom-a.top+f.h}};h.normalizeEvent=function(a){"layerX"in a||(a.layerX=
a.offsetX,a.layerY=a.offsetY);if(!("pageX"in a)){var f=a.target;f=f&&f.ownerDocument||document;var e=b("quirks")?f.body:f.documentElement;a.pageX=a.clientX+h.fixIeBiDiScrollLeft(e.scrollLeft||0,f);a.pageY=a.clientY+(e.scrollTop||0)}};return h})},"dojo/mouse":function(){define(["./_base/kernel","./on","./has","./dom","./_base/window"],function(b,A,q,x,r){function m(p,t){var h=function(c,a){return A(c,p,function(f){if(t)return t(f,a);if(!x.isDescendant(f.relatedTarget,c))return a.call(this,f)})};h.bubble=
function(c){return m(p,function(a,f){var e=c(a.target),l=a.relatedTarget;if(e&&e!=(l&&1==l.nodeType&&c(l)))return f.call(e,a)})};return h}q.add("dom-quirks",r.doc&&"BackCompat"==r.doc.compatMode);q.add("events-mouseenter",r.doc&&"onmouseenter"in r.doc.createElement("div"));q.add("events-mousewheel",r.doc&&"onmousewheel"in r.doc);r=q("dom-quirks")&&q("ie")||!q("dom-addeventlistener")?{LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(p,t){return p.button&t},isLeft:function(p){return p.button&1},isMiddle:function(p){return p.button&
4},isRight:function(p){return p.button&2}}:{LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(p,t){return p.button==t},isLeft:function(p){return 0==p.button},isMiddle:function(p){return 1==p.button},isRight:function(p){return 2==p.button}};b.mouseButtons=r;b=q("events-mousewheel")?"mousewheel":function(p,t){return A(p,"DOMMouseScroll",function(h){h.wheelDelta=-h.detail;t.call(this,h)})};return{_eventHandler:m,enter:m("mouseover"),leave:m("mouseout"),wheel:b,isLeft:r.isLeft,isMiddle:r.isMiddle,isRight:r.isRight}})},
"dojo/keys":function(){define(["./_base/kernel","./sniff"],function(b,A){return b.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:A("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,
NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:A("mac")&&!A("air")?A("safari")?91:224:17}})},"dojo/main":function(){define("./_base/kernel ./has require ./sniff ./_base/lang ./_base/array ./_base/config ./ready ./_base/declare ./_base/connect ./_base/Deferred ./_base/json ./_base/Color ./has!dojo-firebug?./_firebug/firebug ./_base/browser ./_base/loader".split(" "),
function(b,A,q,x,r,m,p,t){p.isDebug&&q(["./_firebug/firebug"]);var h=p.require;h&&(h=m.map(r.isArray(h)?h:[h],function(c){return c.replace(/\./g,"/")}),b.isAsync?q(h):t(1,function(){q(h)}));return b})},"dojo/ready":function(){define(["./_base/kernel","./has","require","./domReady","./_base/lang"],function(b,A,q,x,r){var m=0,p=[],t=0;A=function(){m=1;b._postLoad=b.config.afterOnLoad=!0;h()};var h=function(){if(!t){for(t=1;m&&(!x||0==x._Q.length)&&(q.idle?q.idle():1)&&p.length;){var f=p.shift();try{f()}catch(e){if(e.info=
e.message,q.signal)q.signal("error",e);else throw e;}}t=0}};q.on&&q.on("idle",h);x&&(x._onQEmpty=h);var c=b.ready=b.addOnLoad=function(f,e,l){var k=r._toArray(arguments);"number"!=typeof f?(l=e,e=f,f=1E3):k.shift();l=l?r.hitch.apply(b,k):function(){e()};l.priority=f;for(k=0;k<p.length&&f>=p[k].priority;k++);p.splice(k,0,l);h()},a=b.config.addOnLoad;if(a)c[r.isArray(a)?"apply":"call"](b,a);b.config.parseOnLoad&&!b.isAsync&&c(99,function(){b.parser||(b.deprecated("Add explicit require(['dojo/parser']);",
"","2.0"),q(["dojo/parser"]))});x?x(A):A();return c})},"dojo/domReady":function(){define(["./global","./has"],function(b,A){function q(d){h.push(d);t&&x()}function x(){if(!c){for(c=!0;h.length;)try{h.shift()(r)}catch(d){console.error(d,"in domReady callback",d.stack)}c=!1;q._onQEmpty()}}var r=document,m={loaded:1,complete:1},p="string"!=typeof r.readyState,t=!!m[r.readyState],h=[],c;q.load=function(d,u,y){q(y)};q._Q=h;q._onQEmpty=function(){};p&&(r.readyState="loading");if(!t){var a=[],f=function(d){d=
d||b.event;t||"readystatechange"==d.type&&!m[r.readyState]||(p&&(r.readyState="complete"),t=1,x())},e=function(d,u){d.addEventListener(u,f,!1);h.push(function(){d.removeEventListener(u,f,!1)})};if(!A("dom-addeventlistener")){e=function(d,u){u="on"+u;d.attachEvent(u,f);h.push(function(){d.detachEvent(u,f)})};var l=r.createElement("div");try{l.doScroll&&null===b.frameElement&&a.push(function(){try{return l.doScroll("left"),1}catch(d){}})}catch(d){}}e(r,"DOMContentLoaded");e(b,"load");"onreadystatechange"in
r?e(r,"readystatechange"):p||a.push(function(){return m[r.readyState]});if(a.length){var k=function(){if(!t){for(var d=a.length;d--;)if(a[d]()){f("poller");return}setTimeout(k,30)}};k()}}return q})},"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(b,A,q){function x(C,H){throw Error("declare"+(H?" "+H:"")+": "+C);}function r(C,H){for(var B=[],K=[{cls:0,refs:[]}],J={},R=1,V=C.length,Y=0,S,U,L,T,da;Y<V;++Y){(S=C[Y])?"[object Function]"!=O.call(S)&&x("mixin #"+Y+" is not a callable constructor.",
H):x("mixin #"+Y+" is unknown. Did you use dojo.require to pull it in?",H);U=S._meta?S._meta.bases:[S];L=0;for(S=U.length-1;0<=S;--S)T=U[S].prototype,T.hasOwnProperty("declaredClass")||(T.declaredClass="uniqName_"+z++),T=T.declaredClass,J.hasOwnProperty(T)||(J[T]={count:0,refs:[],cls:U[S]},++R),T=J[T],L&&L!==T&&(T.refs.push(L),++L.count),L=T;++L.count;K[0].refs.push(L)}for(;K.length;){L=K.pop();B.push(L.cls);for(--R;da=L.refs,1==da.length;){L=da[0];if(!L||--L.count){L=0;break}B.push(L.cls);--R}if(L)for(Y=
0,V=da.length;Y<V;++Y)L=da[Y],--L.count||K.push(L)}R&&x("can't build consistent linearization",H);S=C[0];B[0]=S?S._meta&&S===B[B.length-S._meta.bases.length]?S._meta.bases.length:1:0;return B}function m(C,H,B,K){var J,R=this._inherited=this._inherited||{};if("string"===typeof C){var V=C;C=H;H=B;B=K}if("function"===typeof C){var Y=C;C=H;H=B}else try{Y=C.callee}catch(T){if(T instanceof TypeError)x("strict mode inherited() requires the caller function to be passed before arguments",this.declaredClass);
else throw T;}(V=V||Y.nom)||x("can't deduce a name to call inherited()",this.declaredClass);B=K=0;var S=this.constructor._meta;K=S.bases;var U=R.p;if("constructor"!=V){if(R.c!==Y){U=0;var L=K[0];S=L._meta;if(S.hidden[V]!==Y){(J=S.chains)&&"string"==typeof J[V]&&x("calling chained method with inherited: "+V,this.declaredClass);do if(S=L._meta,J=L.prototype,S&&(J[V]===Y&&J.hasOwnProperty(V)||S.hidden[V]===Y))break;while(L=K[++U]);U=L?U:-1}}if(L=K[++U])if(J=L.prototype,L._meta&&J.hasOwnProperty(V))B=
J[V];else{Y=D[V];do if(J=L.prototype,(B=J[V])&&(L._meta?J.hasOwnProperty(V):B!==Y))break;while(L=K[++U])}B=L&&B||D[V]}else{if(R.c!==Y&&(U=0,(S=K[0]._meta)&&S.ctor!==Y)){for((J=S.chains)&&"manual"===J.constructor||x("calling chained constructor with inherited",this.declaredClass);(L=K[++U])&&(!(S=L._meta)||S.ctor!==Y););U=L?U:-1}for(;(L=K[++U])&&!(B=(S=L._meta)?S.ctor:L););B=L&&B}R.c=B;R.p=U;if(B)return!0===H?B:B.apply(this,H||C)}function p(C,H,B){return"string"===typeof C?"function"===typeof H?this.__inherited(C,
H,B,!0):this.__inherited(C,H,!0):"function"===typeof C?this.__inherited(C,H,!0):this.__inherited(C,!0)}function t(C,H,B,K){var J=this.getInherited(C,H,B);if(J)return J.apply(this,K||B||H||C)}function h(C){for(var H=this.constructor._meta.bases,B=0,K=H.length;B<K;++B)if(H[B]===C)return!0;return this instanceof C}function c(C,H){for(var B in H)"constructor"!=B&&H.hasOwnProperty(B)&&(C[B]=H[B]);if(A("bug-for-in-skips-shadowed"))for(var K=q._extraNames,J=K.length;J;)B=K[--J],"constructor"!=B&&H.hasOwnProperty(B)&&
(C[B]=H[B])}function a(C){n.safeMixin(this.prototype,C);return this}function f(C,H){C instanceof Array||"function"===typeof C||(H=C,C=void 0);H=H||{};C=C||[];return n([this].concat(C),H)}function e(C,H){return function(){var B=arguments,K=B,J=B[0],R;var V=C.length;if(!(this instanceof B.callee))return y(B);if(H&&(J&&J.preamble||this.preamble)){var Y=Array(C.length);Y[0]=B;for(R=0;;){(J=B[0])&&(J=J.preamble)&&(B=J.apply(this,B)||B);J=C[R].prototype;(J=J.hasOwnProperty("preamble")&&J.preamble)&&(B=
J.apply(this,B)||B);if(++R==V)break;Y[R]=B}}for(R=V-1;0<=R;--R)J=C[R],(J=(V=J._meta)?V.ctor:J)&&J.apply(this,Y?Y[R]:B);(J=this.postscript)&&J.apply(this,K)}}function l(C,H){return function(){var B=arguments,K=B,J=B[0];if(!(this instanceof B.callee))return y(B);H&&(J&&(J=J.preamble)&&(K=J.apply(this,K)||K),(J=this.preamble)&&J.apply(this,K));C&&C.apply(this,B);(J=this.postscript)&&J.apply(this,B)}}function k(C){return function(){var H=arguments,B=0,K,J;if(!(this instanceof H.callee))return y(H);for(;K=
C[B];++B)if(K=(J=K._meta)?J.ctor:K){K.apply(this,H);break}(K=this.postscript)&&K.apply(this,H)}}function d(C,H,B){return function(){var K,J=0,R=1;B&&(J=H.length-1,R=-1);for(;K=H[J];J+=R){var V=K._meta;(K=(V?V.hidden:K.prototype)[C])&&K.apply(this,arguments)}}}function u(C){w.prototype=C.prototype;C=new w;w.prototype=null;return C}function y(C){var H=C.callee,B=u(H);H.apply(B,C);return B}function n(C,H,B){"string"!=typeof C&&(B=H,H=C,C="");B=B||{};var K,J,R,V=1,Y=H;if("[object Array]"==O.call(H)){var S=
r(H,C);var U=S[0];V=S.length-U;H=S[V]}else S=[0],H?"[object Function]"==O.call(H)?(U=H._meta,S=S.concat(U?U.bases:H)):x("base class is not a callable constructor.",C):null!==H&&x("unknown base class. Did you use dojo.require to pull it in?",C);if(H)for(K=V-1;;--K){var L=u(H);if(!K)break;U=S[K];(U._meta?c:v)(L,U.prototype);var T=A("csp-restrictions")?function(){}:new Function;T.superclass=H;T.prototype=L;H=L.constructor=T}else L={};n.safeMixin(L,B);U=B.constructor;U!==D.constructor&&(U.nom="constructor",
L.constructor=U);for(K=V-1;K;--K)(U=S[K]._meta)&&U.chains&&(R=v(R||{},U.chains));L["-chains-"]&&(R=v(R||{},L["-chains-"]));H&&H.prototype&&H.prototype["-chains-"]&&(R=v(R||{},H.prototype["-chains-"]));U=!R||!R.hasOwnProperty("constructor");S[0]=T=R&&"manual"===R.constructor?k(S):1==S.length?l(B.constructor,U):e(S,U);T._meta={bases:S,hidden:B,chains:R,parents:Y,ctor:B.constructor};T.superclass=H&&H.prototype;T.extend=a;T.createSubclass=f;T.prototype=L;L.constructor=T;L.getInherited=p;L.isInstanceOf=
h;L.inherited=E;L.__inherited=m;C&&(L.declaredClass=C,q.setObject(C,T));if(R)for(J in R)L[J]&&"string"==typeof R[J]&&"constructor"!=J&&(U=L[J]=d(J,S,"after"===R[J]),U.nom=J);return T}var v=q.mixin,D=Object.prototype,O=D.toString,z=0;var w=A("csp-restrictions")?function(){}:new Function;var E=b.config.isDebug?t:m;b.safeMixin=n.safeMixin=function(C,H){for(R in H){var B=H[R];B===D[R]&&R in D||"constructor"==R||("[object Function]"==O.call(B)&&(B.nom=R),C[R]=B)}if(A("bug-for-in-skips-shadowed")&&H)for(var K=
q._extraNames,J=K.length;J;){var R=K[--J];B=H[R];B===D[R]&&R in D||"constructor"==R||("[object Function]"==O.call(B)&&(B.nom=R),C[R]=B)}return C};return b.declare=n})},"dojo/_base/Color":function(){define(["./kernel","./lang","./array","./config"],function(b,A,q,x){var r=b.Color=function(m){m&&this.setColor(m)};r.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,
128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:x.transparentColor||[0,0,0,0]};A.extend(r,{r:255,g:255,b:255,a:1,_set:function(m,p,t,h){this.r=m;this.g=p;this.b=t;this.a=h},setColor:function(m){A.isString(m)?r.fromString(m,this):A.isArray(m)?r.fromArray(m,this):(this._set(m.r,m.g,m.b,m.a),m instanceof r||this.sanitize());return this},sanitize:function(){return this},toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,
this.g,this.b,this.a]},toHex:function(){return"#"+q.map(["r","g","b"],function(m){m=this[m].toString(16);return 2>m.length?"0"+m:m},this).join("")},toCss:function(m){var p=this.r+", "+this.g+", "+this.b;return(m?"rgba("+p+", "+this.a:"rgb("+p)+")"},toString:function(){return this.toCss(!0)}});r.blendColors=b.blendColors=function(m,p,t,h){h=h||new r;h.r=Math.round(m.r+(p.r-m.r)*t);h.g=Math.round(m.g+(p.g-m.g)*t);h.b=Math.round(m.b+(p.b-m.b)*t);h.a=m.a+(p.a-m.a)*t;return h.sanitize()};r.fromRgb=b.colorFromRgb=
function(m,p){return(m=m.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/))&&r.fromArray(m[1].split(/\s*,\s*/),p)};r.fromHex=b.colorFromHex=function(m,p){var t=p||new r,h=4==m.length?4:8,c=(1<<h)-1;m=Number("0x"+m.substr(1));if(isNaN(m))return null;q.forEach(["b","g","r"],function(a){var f=m&c;m>>=h;t[a]=4==h?17*f:f});t.a=1;return t};r.fromArray=b.colorFromArray=function(m,p){p=p||new r;p._set(Number(m[0]),Number(m[1]),Number(m[2]),Number(m[3]));isNaN(p.a)&&(p.a=1);return p.sanitize()};r.fromString=
b.colorFromString=function(m,p){var t=r.named[m];return t&&r.fromArray(t,p)||r.fromRgb(m,p)||r.fromHex(m,p)};return r})},"dojo/_base/browser":function(){require.has&&require.has.add("config-selectorEngine","acme");define("../ready ./kernel ./connect ./unload ./window ./event ./html ./NodeList ../query ./xhr ./fx".split(" "),function(b){return b})},"dojo/_base/unload":function(){define(["./kernel","./lang","../on"],function(b,A,q){var x=window,r={addOnWindowUnload:function(m,p){b.windowUnloaded||q(x,
"unload",b.windowUnloaded=function(){});q(x,"unload",A.hitch(m,p))},addOnUnload:function(m,p){q(x,"beforeunload",A.hitch(m,p))}};b.addOnWindowUnload=r.addOnWindowUnload;b.addOnUnload=r.addOnUnload;return r})},"dojo/_base/html":function(){define("./kernel ../dom ../dom-style ../dom-attr ../dom-prop ../dom-class ../dom-construct ../dom-geometry".split(" "),function(b,A,q,x,r,m,p,t){b.byId=A.byId;b.isDescendant=A.isDescendant;b.setSelectable=A.setSelectable;b.getAttr=x.get;b.setAttr=x.set;b.hasAttr=
x.has;b.removeAttr=x.remove;b.getNodeProp=x.getNodeProp;b.attr=function(h,c,a){return 2==arguments.length?x["string"==typeof c?"get":"set"](h,c):x.set(h,c,a)};b.hasClass=m.contains;b.addClass=m.add;b.removeClass=m.remove;b.toggleClass=m.toggle;b.replaceClass=m.replace;b._toDom=b.toDom=p.toDom;b.place=p.place;b.create=p.create;b.empty=function(h){p.empty(h)};b._destroyElement=b.destroy=function(h){p.destroy(h)};b._getPadExtents=b.getPadExtents=t.getPadExtents;b._getBorderExtents=b.getBorderExtents=
t.getBorderExtents;b._getPadBorderExtents=b.getPadBorderExtents=t.getPadBorderExtents;b._getMarginExtents=b.getMarginExtents=t.getMarginExtents;b._getMarginSize=b.getMarginSize=t.getMarginSize;b._getMarginBox=b.getMarginBox=t.getMarginBox;b.setMarginBox=t.setMarginBox;b._getContentBox=b.getContentBox=t.getContentBox;b.setContentSize=t.setContentSize;b._isBodyLtr=b.isBodyLtr=t.isBodyLtr;b._docScroll=b.docScroll=t.docScroll;b._getIeDocumentElementOffset=b.getIeDocumentElementOffset=t.getIeDocumentElementOffset;
b._fixIeBiDiScrollLeft=b.fixIeBiDiScrollLeft=t.fixIeBiDiScrollLeft;b.position=t.position;b.marginBox=function(h,c){return c?t.setMarginBox(h,c):t.getMarginBox(h)};b.contentBox=function(h,c){return c?t.setContentSize(h,c):t.getContentBox(h)};b.coords=function(h,c){b.deprecated("dojo.coords()","Use dojo.position() or dojo.marginBox().");h=A.byId(h);var a=q.getComputedStyle(h);a=t.getMarginBox(h,a);h=t.position(h,c);a.x=h.x;a.y=h.y;return a};b.getProp=r.get;b.setProp=r.set;b.prop=function(h,c,a){return 2==
arguments.length?r["string"==typeof c?"get":"set"](h,c):r.set(h,c,a)};b.getStyle=q.get;b.setStyle=q.set;b.getComputedStyle=q.getComputedStyle;b.__toPixelValue=b.toPixelValue=q.toPixelValue;b.style=function(h,c,a){switch(arguments.length){case 1:return q.get(h);case 2:return q["string"==typeof c?"get":"set"](h,c)}return q.set(h,c,a)};return b})},"dojo/dom-class":function(){define(["./_base/lang","./_base/array","./dom"],function(b,A,q){function x(h){if("string"==typeof h||h instanceof String){if(h&&
!m.test(h))return p[0]=h,p;h=h.split(m);h.length&&!h[0]&&h.shift();h.length&&!h[h.length-1]&&h.pop();return h}return h?A.filter(h,function(c){return c}):[]}var r,m=/\s+/,p=[""],t={};return r={contains:function(h,c){return 0<=(" "+q.byId(h).className+" ").indexOf(" "+c+" ")},add:function(h,c){h=q.byId(h);c=x(c);var a=h.className;a=a?" "+a+" ":" ";var f=a.length;for(var e=0,l=c.length,k;e<l;++e)(k=c[e])&&0>a.indexOf(" "+k+" ")&&(a+=k+" ");f<a.length&&(h.className=a.substr(1,a.length-2))},remove:function(h,
c){h=q.byId(h);if(void 0!==c){c=x(c);var a=" "+h.className+" ";for(var f=0,e=c.length;f<e;++f)a=a.replace(" "+c[f]+" "," ");a=b.trim(a)}else a="";h.className!=a&&(h.className=a)},replace:function(h,c,a){h=q.byId(h);t.className=h.className;r.remove(t,a);r.add(t,c);h.className!==t.className&&(h.className=t.className)},toggle:function(h,c,a){h=q.byId(h);if(void 0===a){c=x(c);for(var f=0,e=c.length,l;f<e;++f)l=c[f],r[r.contains(h,l)?"remove":"add"](h,l)}else r[a?"add":"remove"](h,c);return a}}})},"dojo/_base/NodeList":function(){define(["./kernel",
"../query","./array","./html","../NodeList-dom"],function(b,A,q){A=A.NodeList;var x=A.prototype;x.connect=A._adaptAsForEach(function(){return b.connect.apply(this,arguments)});x.coords=A._adaptAsMap(b.coords);A.events="blur focus change click error keydown keypress keyup load mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup submit".split(" ");q.forEach(A.events,function(r){var m="on"+r;x[m]=function(p,t){return this.connect(m,p,t)}});return b.NodeList=A})},"dojo/query":function(){define("./_base/kernel ./has ./dom ./on ./_base/array ./_base/lang ./selector/_loader ./selector/_loader!default".split(" "),
function(b,A,q,x,r,m,p,t){function h(n,v){var D=function(z,w){if("string"==typeof w&&(w=q.byId(w),!w))return new v([]);z="string"==typeof z?n(z,w):z?z.end&&z.on?z:[z]:[];return z.end&&z.on?z:new v(z)};D.matches=n.match||function(z,w,E){return 0<D.filter([z],w,E).length};D.filter=n.filter||function(z,w,E){return D(w,E).filter(function(C){return-1<r.indexOf(z,C)})};if("function"!=typeof n){var O=n.search;n=function(z,w){return O(w||document,z)}}return D}A.add("array-extensible",function(){return 1==
m.delegate([],{length:1}).length&&!A("bug-for-in-skips-shadowed")});var c=Array.prototype,a=c.slice,f=c.concat,e=r.forEach,l=function(n,v,D){v=[0].concat(a.call(v,0));D=D||b.global;return function(O){v[0]=O;return n.apply(D,v)}},k=function(n){var v=this instanceof d&&A("array-extensible");"number"==typeof n&&(n=Array(n));var D=n&&"length"in n?n:arguments;if(v||!D.sort){for(var O=v?this:[],z=O.length=D.length,w=0;w<z;w++)O[w]=D[w];if(v)return O;D=O}m._mixin(D,u);D._NodeListCtor=function(E){return d(E)};
return D},d=k,u=d.prototype=A("array-extensible")?[]:{};d._wrap=u._wrap=function(n,v,D){n=new (D||this._NodeListCtor||d)(n);return v?n._stash(v):n};d._adaptAsMap=function(n,v){return function(){return this.map(l(n,arguments,v))}};d._adaptAsForEach=function(n,v){return function(){this.forEach(l(n,arguments,v));return this}};d._adaptAsFilter=function(n,v){return function(){return this.filter(l(n,arguments,v))}};d._adaptWithCondition=function(n,v,D){return function(){var O=arguments,z=l(n,O,D);if(v.call(D||
b.global,O))return this.map(z);this.forEach(z);return this}};e(["slice","splice"],function(n){var v=c[n];u[n]=function(){return this._wrap(v.apply(this,arguments),"slice"==n?this:null)}});e(["indexOf","lastIndexOf","every","some"],function(n){var v=r[n];u[n]=function(){return v.apply(b,[this].concat(a.call(arguments,0)))}});m.extend(k,{constructor:d,_NodeListCtor:d,toString:function(){return this.join(",")},_stash:function(n){this._parent=n;return this},on:function(n,v){var D=this.map(function(O){return x(O,
n,v)});D.remove=function(){for(var O=0;O<D.length;O++)D[O].remove()};return D},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(n){var v=a.call(this,0),D=r.map(arguments,function(O){return a.call(O,0)});return this._wrap(f.apply(v,D),this)},map:function(n,v){return this._wrap(r.map(this,n,v),this)},forEach:function(n,v){e(this,n,v);return this},filter:function(n){var v=arguments,D=this,O=0;if("string"==typeof n){D=y._filterResult(this,v[0]);if(1==v.length)return D._stash(this);
O=1}return this._wrap(r.filter(D,v[O],v[O+1]),this)},instantiate:function(n,v){var D=m.isFunction(n)?n:m.getObject(n);v=v||{};return this.forEach(function(O){new D(v,O)})},at:function(){var n=new this._NodeListCtor(0);e(arguments,function(v){0>v&&(v=this.length+v);this[v]&&n.push(this[v])},this);return n._stash(this)}});var y=h(t,k);b.query=h(t,function(n){return k(n)});y.load=function(n,v,D){p.load(n,v,function(O){D(h(O,k))})};b._filterQueryResult=y._filterResult=function(n,v,D){return new k(y.filter(n,
v,D))};b.NodeList=y.NodeList=k;return y})},"dojo/selector/acme":function(){define(["../dom","../sniff","../_base/array","../_base/lang","../_base/window"],function(b,A,q,x,r){var m=x.trim,p=q.forEach,t="BackCompat"==r.doc.compatMode,h=!1,c=function(){return!0},a=function(F){F=0<="\x3e~+".indexOf(F.slice(-1))?F+" * ":F+" ";for(var I=function(Ia,Ja){return m(F.slice(Ia,Ja))},M=[],Q=-1,aa=-1,ba=-1,la=-1,Z=-1,ea=-1,pa=-1,ma,ua="",sa="",Fa,ja=0,Ha=F.length,fa=null,xa=null,za=function(){0<=ea&&(fa.id=I(ea,
ja).replace(/\\/g,""),ea=-1);if(0<=pa){var Ia=pa==ja?null:I(pa,ja);fa[0>"\x3e~+".indexOf(Ia)?"tag":"oper"]=Ia;pa=-1}0<=Z&&(fa.classes.push(I(Z+1,ja).replace(/\\/g,"")),Z=-1)};ua=sa,sa=F.charAt(ja),ja<Ha;ja++)"\\"!=ua&&(fa||(Fa=ja,fa={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return h?this.otag:this.tag}},pa=ja),ma?sa==ma&&(ma=null):"'"==sa||'"'==sa?ma=sa:0<=Q?"]"==sa?(xa.attr?xa.matchFor=I(ba||Q+1,ja):xa.attr=I(Q+1,ja),!(Q=xa.matchFor)||'"'!=Q.charAt(0)&&
"'"!=Q.charAt(0)||(xa.matchFor=Q.slice(1,-1)),xa.matchFor&&(xa.matchFor=xa.matchFor.replace(/\\/g,"")),fa.attrs.push(xa),xa=null,Q=ba=-1):"\x3d"==sa&&(ba=0<="|~^$*".indexOf(ua)?ua:"",xa.type=ba+sa,xa.attr=I(Q+1,ja-ba.length),ba=ja+1):0<=aa?")"==sa&&(0<=la&&(xa.value=I(aa+1,ja)),la=aa=-1):"#"==sa?(za(),ea=ja+1):"."==sa?(za(),Z=ja):":"==sa?(za(),la=ja):"["==sa?(za(),Q=ja,xa={}):"("==sa?(0<=la&&(xa={name:I(la+1,ja),value:null},fa.pseudos.push(xa)),aa=ja):" "==sa&&ua!=sa&&(za(),0<=la&&fa.pseudos.push({name:I(la+
1,ja)}),fa.loops=fa.pseudos.length||fa.attrs.length||fa.classes.length,fa.oquery=fa.query=I(Fa,ja),fa.otag=fa.tag=fa.oper?null:fa.tag||"*",fa.tag&&(fa.tag=fa.tag.toUpperCase()),M.length&&M[M.length-1].oper&&(fa.infixOper=M.pop(),fa.query=fa.infixOper.query+" "+fa.query),M.push(fa),fa=null));return M},f=function(F,I){return F?I?function(){return F.apply(window,arguments)&&I.apply(window,arguments)}:F:I},e=function(F,I){I=I||[];F&&I.push(F);return I},l=function(F){return 1==F.nodeType},k=function(F,
I){return F?"class"==I?F.className||"":"for"==I?F.htmlFor||"":"style"==I?F.style.cssText||"":(h?F.getAttribute(I):F.getAttribute(I,2))||"":""},d={"*\x3d":function(F,I){return function(M){return 0<=k(M,F).indexOf(I)}},"^\x3d":function(F,I){return function(M){return 0==k(M,F).indexOf(I)}},"$\x3d":function(F,I){return function(M){M=" "+k(M,F);var Q=M.lastIndexOf(I);return-1<Q&&Q==M.length-I.length}},"~\x3d":function(F,I){var M=" "+I+" ";return function(Q){return 0<=(" "+k(Q,F)+" ").indexOf(M)}},"|\x3d":function(F,
I){var M=I+"-";return function(Q){Q=k(Q,F);return Q==I||0==Q.indexOf(M)}},"\x3d":function(F,I){return function(M){return k(M,F)==I}}};x=r.doc.documentElement;var u=!(x.nextElementSibling||"nextElementSibling"in x),y=u?"nextSibling":"nextElementSibling",n=u?"previousSibling":"previousElementSibling",v=u?l:c,D=function(F){for(;F=F[n];)if(v(F))return!1;return!0},O=function(F){for(;F=F[y];)if(v(F))return!1;return!0},z=function(F){var I=F.parentNode;I=7!=I.nodeType?I:I.nextSibling;var M=0,Q=I.children||
I.childNodes,aa=F._i||F.getAttribute("_i")||-1,ba=I._l||("undefined"!==typeof I.getAttribute?I.getAttribute("_l"):-1);if(!Q)return-1;Q=Q.length;if(ba==Q&&0<=aa&&0<=ba)return aa;A("ie")&&"undefined"!==typeof I.setAttribute?I.setAttribute("_l",Q):I._l=Q;aa=-1;for(I=I.firstElementChild||I.firstChild;I;I=I[y])v(I)&&(A("ie")?I.setAttribute("_i",++M):I._i=++M,F===I&&(aa=M));return aa},w=function(F){return!(z(F)%2)},E=function(F){return z(F)%2},C={checked:function(F,I){return function(M){return!("checked"in
M?!M.checked:!M.selected)}},disabled:function(F,I){return function(M){return M.disabled}},enabled:function(F,I){return function(M){return!M.disabled}},"first-child":function(){return D},"last-child":function(){return O},"only-child":function(F,I){return function(M){return D(M)&&O(M)}},empty:function(F,I){return function(M){var Q=M.childNodes;for(M=M.childNodes.length-1;0<=M;M--){var aa=Q[M].nodeType;if(1===aa||3==aa)return!1}return!0}},contains:function(F,I){F=I.charAt(0);if('"'==F||"'"==F)I=I.slice(1,
-1);return function(M){return 0<=M.innerHTML.indexOf(I)}},not:function(F,I){F=a(I)[0];I={el:1};"*"!=F.tag&&(I.tag=1);F.classes.length||(I.classes=1);var M=B(F,I);return function(Q){return!M(Q)}},"nth-child":function(F,I){F=parseInt;if("odd"==I)return E;if("even"==I)return w;if(-1!=I.indexOf("n")){I=I.split("n",2);var M=I[0]?"-"==I[0]?-1:F(I[0]):1,Q=I[1]?F(I[1]):0,aa=0,ba=-1;0<M?0>Q?Q=Q%M&&M+Q%M:0<Q&&(Q>=M&&(aa=Q-Q%M),Q%=M):0>M&&(M*=-1,0<Q&&(ba=Q,Q%=M));if(0<M)return function(Z){Z=z(Z);return Z>=aa&&
(0>ba||Z<=ba)&&Z%M==Q};I=Q}var la=F(I);return function(Z){return z(Z)==la}}},H=9>A("ie")||9==A("ie")&&A("quirks")?function(F){var I=F.toLowerCase();"class"==I&&(F="className");return function(M){return h?M.getAttribute(F):M[F]||M[I]}}:function(F){return function(I){return I&&I.getAttribute&&I.hasAttribute(F)}},B=function(F,I){if(!F)return c;I=I||{};var M=null;"el"in I||(M=f(M,l));"tag"in I||"*"!=F.tag&&(M=f(M,function(Q){return Q&&(h?Q.tagName:Q.tagName.toUpperCase())==F.getTag()}));"classes"in I||
p(F.classes,function(Q,aa,ba){var la=new RegExp("(?:^|\\s)"+Q+"(?:\\s|$)");M=f(M,function(Z){return la.test(Z.className)});M.count=aa});"pseudos"in I||p(F.pseudos,function(Q){var aa=Q.name;C[aa]&&(M=f(M,C[aa](aa,Q.value)))});"attrs"in I||p(F.attrs,function(Q){var aa,ba=Q.attr;Q.type&&d[Q.type]?aa=d[Q.type](ba,Q.matchFor):ba.length&&(aa=H(ba));aa&&(M=f(M,aa))});"id"in I||F.id&&(M=f(M,function(Q){return!!Q&&Q.id==F.id}));M||"default"in I||(M=c);return M},K=function(F){return function(I,M,Q){for(;I=
I[y];)if(!u||l(I)){Q&&!ia(I,Q)||!F(I)||M.push(I);break}return M}},J=function(F){return function(I,M,Q){for(I=I[y];I;){if(v(I)){if(Q&&!ia(I,Q))break;F(I)&&M.push(I)}I=I[y]}return M}},R=function(F,I){var M=function(Q){var aa=[];try{aa=Array.prototype.slice.call(Q)}catch(Z){for(var ba=0,la=Q.length;ba<la;ba++)aa.push(Q[ba])}return aa};F=F||c;return function(Q,aa,ba){var la=0,Z=[];Z=M(Q.children||Q.childNodes);for(I&&q.forEach(Z,function(ea){1===ea.nodeType&&(Z=Z.concat(M(ea.getElementsByTagName("*"))))});Q=
Z[la++];)v(Q)&&(!ba||ia(Q,ba))&&F(Q,la)&&aa.push(Q);return aa}},V=function(F,I){for(F=F.parentNode;F&&F!=I;)F=F.parentNode;return!!F},Y={},S=function(F){var I=Y[F.query];if(I)return I;var M=F.infixOper;M=M?M.oper:"";var Q=B(F,{el:1}),aa="*"==F.tag,ba=r.doc.getElementsByClassName;if(M)ba={el:1},aa&&(ba.tag=1),Q=B(F,ba),"+"==M?I=K(Q):"~"==M?I=J(Q):"\x3e"==M&&(I=R(Q));else if(F.id)Q=!F.loops&&aa?c:B(F,{el:1,id:1}),I=function(Z,ea){var pa=b.byId(F.id,Z.ownerDocument||Z);Z.ownerDocument&&!V(Z,Z.ownerDocument)&&
q.some(11===Z.nodeType?Z.childNodes:[Z],function(ma){ma=R(function(ua){return ua.id===F.id},!0)(ma,[]);if(ma.length)return pa=ma[0],!1});if(pa&&Q(pa)&&(9==Z.nodeType||V(pa,Z)))return e(pa,ea)};else if(ba&&/\{\s*\[native code\]\s*\}/.test(String(ba))&&F.classes.length&&!t){Q=B(F,{el:1,classes:1,id:1});var la=F.classes.join(" ");I=function(Z,ea,pa){ea=e(0,ea);for(var ma,ua=0,sa=Z.getElementsByClassName(la);ma=sa[ua++];)Q(ma,Z)&&ia(ma,pa)&&ea.push(ma);return ea}}else aa||F.loops?(Q=B(F,{el:1,tag:1,id:1}),
I=function(Z,ea,pa){ea=e(0,ea);for(var ma,ua=0,sa=(ma=F.getTag())?Z.getElementsByTagName(ma):[];ma=sa[ua++];)Q(ma,Z)&&ia(ma,pa)&&ea.push(ma);return ea}):I=function(Z,ea,pa){ea=e(0,ea);var ma=0,ua=F.getTag();for(ua=ua?Z.getElementsByTagName(ua):[];Z=ua[ma++];)ia(Z,pa)&&ea.push(Z);return ea};return Y[F.query]=I},U={},L={},T=function(F){var I=a(m(F));if(1==I.length){var M=S(I[0]);return function(Q){if(Q=M(Q,[]))Q.nozip=!0;return Q}}return function(Q){Q=e(Q);for(var aa,ba,la=I.length,Z,ea,pa=0;pa<la;pa++){ea=
[];aa=I[pa];ba=Q.length-1;0<ba&&(Z={},ea.nozip=!0);ba=S(aa);for(var ma=0;aa=Q[ma];ma++)ba(aa,ea,Z);if(!ea.length)break;Q=ea}return ea}},da=A("ie")?"commentStrip":"nozip",ha=!!r.doc.querySelectorAll,ca=/\\[>~+]|n\+\d|([^ \\])?([>~+])([^ =])?/g,qa=function(F,I,M,Q){return M?(I?I+" ":"")+M+(Q?" "+Q:""):F},ta=/([^[]*)([^\]]*])?/g,oa=function(F,I,M){return I.replace(ca,qa)+(M||"")},va=function(F,I){F=F.replace(ta,oa);if(ha){var M=L[F];if(M&&!I)return M}if(M=U[F])return M;M=F.charAt(0);var Q=-1==F.indexOf(" ");
0<=F.indexOf("#")&&Q&&(I=!0);if(!ha||I||-1!="\x3e~+".indexOf(M)||A("ie")&&-1!=F.indexOf(":")||t&&0<=F.indexOf(".")||-1!=F.indexOf(":contains")||-1!=F.indexOf(":checked")||-1!=F.indexOf("|\x3d")){var aa=F.match(/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g);return U[F]=2>aa.length?T(F):function(la){for(var Z=0,ea=[],pa;pa=aa[Z++];)ea=ea.concat(T(pa)(la));return ea}}var ba=0<="\x3e~+".indexOf(F.charAt(F.length-1))?F+" *":F;return L[F]=function(la){if(9==la.nodeType||Q)try{var Z=la.querySelectorAll(ba);
Z[da]=!0;return Z}catch(ea){}return va(F,!0)(la)}},na=0,ra=A("ie")?function(F){return h?F.getAttribute("_uid")||F.setAttribute("_uid",++na)||na:F.uniqueID}:function(F){return F._uid||(F._uid=++na)},ia=function(F,I){if(!I)return 1;F=ra(F);return I[F]?0:I[F]=1},wa=function(F){if(F&&F.nozip)return F;if(!F||!F.length)return[];if(2>F.length)return[F[0]];var I=[];na++;var M,Q;if(A("ie")&&h){var aa=na+"";for(M=0;M<F.length;M++)(Q=F[M])&&Q.getAttribute("_zipIdx")!=aa&&(I.push(Q),Q.setAttribute("_zipIdx",
aa))}else if(A("ie")&&F.commentStrip)try{for(M=0;M<F.length;M++)(Q=F[M])&&l(Q)&&I.push(Q)}catch(ba){}else for(M=0;M<F.length;M++)(Q=F[M])&&Q._zipIdx!=na&&(I.push(Q),Q._zipIdx=na);return I},ya=function(F,I){I=I||r.doc;h="div"===(I.ownerDocument||I).createElement("div").tagName;return(F=va(F)(I))&&F.nozip?F:wa(F)};ya.filter=function(F,I,M){var Q=[],aa=a(I);aa=1!=aa.length||/[^\w#\.]/.test(I)?function(Z){return-1!=q.indexOf(ya(I,b.byId(M)),Z)}:B(aa[0]);for(var ba=0,la;la=F[ba];ba++)aa(la)&&Q.push(la);
return Q};return ya})},"dojo/NodeList-dom":function(){define("./_base/kernel ./query ./_base/array ./_base/lang ./dom-class ./dom-construct ./dom-geometry ./dom-attr ./dom-style".split(" "),function(b,A,q,x,r,m,p,t,h){function c(u){return function(y,n,v){return 2==arguments.length?u["string"==typeof n?"get":"set"](y,n):u.set(y,n,v)}}var a=function(u){return 1==u.length&&"string"==typeof u[0]},f=function(u){var y=u.parentNode;y&&y.removeChild(u)},e=A.NodeList,l=e._adaptWithCondition,k=e._adaptAsForEach,
d=e._adaptAsMap;x.extend(e,{_normalize:function(u,y){var n=!0===u.parse;if("string"==typeof u.template){var v=u.templateFunc||b.string&&b.string.substitute;u=v?v(u.template,u):u}v=typeof u;"string"==v||"number"==v?(u=m.toDom(u,y&&y.ownerDocument),u=11==u.nodeType?x._toArray(u.childNodes):[u]):x.isArrayLike(u)?x.isArray(u)||(u=x._toArray(u)):u=[u];n&&(u._runParse=!0);return u},_cloneNode:function(u){return u.cloneNode(!0)},_place:function(u,y,n,v){if(1==y.nodeType||"only"!=n)for(var D,O=u.length,z=
O-1;0<=z;z--){var w=v?this._cloneNode(u[z]):u[z];if(u._runParse&&b.parser&&b.parser.parse)for(D||(D=y.ownerDocument.createElement("div")),D.appendChild(w),b.parser.parse(D),w=D.firstChild;D.firstChild;)D.removeChild(D.firstChild);z==O-1?m.place(w,y,n):y.parentNode.insertBefore(w,y);y=w}},position:d(p.position),attr:l(c(t),a),style:l(c(h),a),addClass:k(r.add),removeClass:k(r.remove),toggleClass:k(r.toggle),replaceClass:k(r.replace),empty:k(m.empty),removeAttr:k(t.remove),marginBox:d(p.getMarginBox),
place:function(u,y){var n=A(u)[0];return this.forEach(function(v){m.place(v,n,y)})},orphan:function(u){return(u?A._filterResult(this,u):this).forEach(f)},adopt:function(u,y){return A(u).place(this[0],y)._stash(this)},query:function(u){if(!u)return this;var y=new e;this.map(function(n){A(u,n).forEach(function(v){void 0!==v&&y.push(v)})});return y._stash(this)},filter:function(u){var y=arguments,n=this,v=0;if("string"==typeof u){n=A._filterResult(this,y[0]);if(1==y.length)return n._stash(this);v=1}return this._wrap(q.filter(n,
y[v],y[v+1]),this)},addContent:function(u,y){u=this._normalize(u,this[0]);for(var n=0,v;v=this[n];n++)u.length?this._place(u,v,y,0<n):m.empty(v);return this}});return e})},"dojo/_base/fx":function(){define("./kernel ./config ./lang ../Evented ./Color ../aspect ../sniff ../dom ../dom-style".split(" "),function(b,A,q,x,r,m,p,t,h){var c=q.mixin,a={},f=a._Line=function(n,v){this.start=n;this.end=v};f.prototype.getValue=function(n){return(this.end-this.start)*n+this.start};var e=a.Animation=function(n){c(this,
n);q.isArray(this.curve)&&(this.curve=new f(this.curve[0],this.curve[1]))};e.prototype=new x;q.extend(e,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,_getStep:function(){var n=this._percent,v=this.easing;return v?v(n):n},_fire:function(n,v){v=v||[];if(this[n])if(A.debugAtAllCosts)this[n].apply(this,v);else try{this[n].apply(this,v)}catch(D){console.error("exception in animation handler for:",n),console.error(D)}return this},play:function(n,v){this._delayTimer&&this._clearTimer();if(v)this._stopTimer(),
this._active=this._paused=!1,this._percent=0;else if(this._active&&!this._paused)return this;this._fire("beforeBegin",[this.node]);n=n||this.delay;v=q.hitch(this,"_play",v);if(0<n)return this._delayTimer=setTimeout(v,n),this;v();return this},_play:function(n){this._delayTimer&&this._clearTimer();this._startTime=(new Date).valueOf();this._paused&&(this._startTime-=this.duration*this._percent);this._active=!0;this._paused=!1;n=this.curve.getValue(this._getStep());this._percent||(this._startRepeatCount||
(this._startRepeatCount=this.repeat),this._fire("onBegin",[n]));this._fire("onPlay",[n]);this._cycle();return this},pause:function(){this._delayTimer&&this._clearTimer();this._stopTimer();if(!this._active)return this;this._paused=!0;this._fire("onPause",[this.curve.getValue(this._getStep())]);return this},gotoPercent:function(n,v){this._stopTimer();this._active=this._paused=!0;this._percent=n;v&&this.play();return this},stop:function(n){this._delayTimer&&this._clearTimer();if(!this._timer)return this;
this._stopTimer();n&&(this._percent=1);this._fire("onStop",[this.curve.getValue(this._getStep())]);this._active=this._paused=!1;return this},destroy:function(){this.stop()},status:function(){return this._active?this._paused?"paused":"playing":"stopped"},_cycle:function(){if(this._active){var n=(new Date).valueOf();n=0===this.duration?1:(n-this._startTime)/this.duration;1<=n&&(n=1);this._percent=n;this.easing&&(n=this.easing(n));this._fire("onAnimate",[this.curve.getValue(n)]);1>this._percent?this._startTimer():
(this._active=!1,0<this.repeat?(this.repeat--,this.play(null,!0)):-1==this.repeat?this.play(null,!0):this._startRepeatCount&&(this.repeat=this._startRepeatCount,this._startRepeatCount=0),this._percent=0,this._fire("onEnd",[this.node]),!this.repeat&&this._stopTimer())}return this},_clearTimer:function(){clearTimeout(this._delayTimer);delete this._delayTimer}});var l=0,k=null,d={run:function(){}};q.extend(e,{_startTimer:function(){this._timer||(this._timer=m.after(d,"run",q.hitch(this,"_cycle"),!0),
l++);k||(k=setInterval(q.hitch(d,"run"),this.rate))},_stopTimer:function(){this._timer&&(this._timer.remove(),this._timer=null,l--);0>=l&&(clearInterval(k),k=null,l=0)}});var u=p("ie")?function(n){var v=n.style;v.width.length||"auto"!=h.get(n,"width")||(v.width="auto")}:function(){};a._fade=function(n){n.node=t.byId(n.node);var v=c({properties:{}},n);n=v.properties.opacity={};n.start="start"in v?v.start:function(){return+h.get(v.node,"opacity")||0};n.end=v.end;n=a.animateProperty(v);m.after(n,"beforeBegin",
q.partial(u,v.node),!0);return n};a.fadeIn=function(n){return a._fade(c({end:1},n))};a.fadeOut=function(n){return a._fade(c({end:0},n))};a._defaultEasing=function(n){return.5+Math.sin((n+1.5)*Math.PI)/2};var y=function(n){this._properties=n;for(var v in n){var D=n[v];D.start instanceof r&&(D.tempColor=new r)}};y.prototype.getValue=function(n){var v={},D;for(D in this._properties){var O=this._properties[D],z=O.start;z instanceof r?v[D]=r.blendColors(z,O.end,n,O.tempColor).toCss():q.isArray(z)||(v[D]=
(O.end-z)*n+z+("opacity"!=D?O.units||"px":0))}return v};a.animateProperty=function(n){var v=n.node=t.byId(n.node);n.easing||(n.easing=b._defaultEasing);n=new e(n);m.after(n,"beforeBegin",q.hitch(n,function(){var D={},O;for(O in this.properties){if("width"==O||"height"==O)this.node.display="block";var z=this.properties[O];q.isFunction(z)&&(z=z(v));z=D[O]=c({},q.isObject(z)?z:{end:z});q.isFunction(z.start)&&(z.start=z.start(v));q.isFunction(z.end)&&(z.end=z.end(v));var w=0<=O.toLowerCase().indexOf("color"),
E=function(C,H){var B={height:C.offsetHeight,width:C.offsetWidth}[H];if(void 0!==B)return B;B=h.get(C,H);return"opacity"==H?+B:w?B:parseFloat(B)};"end"in z?"start"in z||(z.start=E(v,O)):z.end=E(v,O);w?(z.start=new r(z.start),z.end=new r(z.end)):z.start="opacity"==O?+z.start:parseFloat(z.start)}this.curve=new y(D)}),!0);m.after(n,"onAnimate",q.hitch(h,"set",n.node),!0);return n};a.anim=function(n,v,D,O,z,w){return a.animateProperty({node:n,duration:D||e.prototype.duration,properties:v,easing:O,onEnd:z}).play(w||
0)};c(b,a);b._Animation=e;return a})},"*noref":1}});(function(){var b=this.require;b({cache:{}});!b.async&&b(["dojo"]);b.boot&&b.apply(null,b.boot)})();// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.35/esri/copyright.txt for details.
//>>built
require({cache:{"dojo/fx/Toggler":function(){define(["../_base/lang","../_base/declare","../_base/fx","../aspect"],function(B,y,c,u){return y("dojo.fx.Toggler",null,{node:null,showFunc:c.fadeIn,hideFunc:c.fadeOut,showDuration:200,hideDuration:200,constructor:function(q){B.mixin(this,q);this.node=q.node;this._showArgs=B.mixin({},q);this._showArgs.node=this.node;this._showArgs.duration=this.showDuration;this.showAnim=this.showFunc(this._showArgs);this._hideArgs=B.mixin({},q);this._hideArgs.node=this.node;
this._hideArgs.duration=this.hideDuration;this.hideAnim=this.hideFunc(this._hideArgs);u.after(this.showAnim,"beforeBegin",B.hitch(this.hideAnim,"stop",!0),!0);u.after(this.hideAnim,"beforeBegin",B.hitch(this.showAnim,"stop",!0),!0)},show:function(q){return this.showAnim.play(q||0)},hide:function(q){return this.hideAnim.play(q||0)}})})},"dijit/_base":function(){define("./main ./a11y ./WidgetSet ./_base/focus ./_base/manager ./_base/place ./_base/popup ./_base/scroll ./_base/sniff ./_base/typematic ./_base/wai ./_base/window".split(" "),
function(B){return B._base})},"dijit/main":function(){define(["dojo/_base/kernel"],function(B){return B.dijit})},"dijit/a11y":function(){define("dojo/_base/array dojo/dom dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/sniff ./main".split(" "),function(B,y,c,u,q,l,m){var h={_isElementShown:function(f){var d=u.get(f);return"hidden"!=d.visibility&&"collapsed"!=d.visibility&&"none"!=d.display&&"hidden"!=c.get(f,"type")},hasDefaultTabStop:function(f){switch(f.nodeName.toLowerCase()){case "a":return c.has(f,
"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":try{var d=f.contentDocument;if("designMode"in d&&"on"==d.designMode)return!0;var a=d.body}catch(b){try{a=f.contentWindow.document.body}catch(e){return!1}}return a&&("true"==a.contentEditable||a.firstChild&&"true"==a.firstChild.contentEditable);default:return"true"==f.contentEditable}},effectiveTabIndex:function(f){if(!c.get(f,"disabled"))return c.has(f,"tabIndex")?+c.get(f,"tabIndex"):
h.hasDefaultTabStop(f)?0:void 0},isTabNavigable:function(f){return 0<=h.effectiveTabIndex(f)},isFocusable:function(f){return-1<=h.effectiveTabIndex(f)},_getTabNavigable:function(f){function d(w){return w&&"input"==w.tagName.toLowerCase()&&w.type&&"radio"==w.type.toLowerCase()&&w.name&&w.name.toLowerCase()}function a(w){return x[d(w)]||w}var b,e,r,t,g,k,x={},v=h._isElementShown,A=h.effectiveTabIndex,n=function(w){for(w=w.firstChild;w;w=w.nextSibling)if(!(1!=w.nodeType||9>=l("ie")&&"HTML"!==w.scopeName)&&
v(w)){var p=A(w);if(0<=p){if(0==p)b||(b=w),e=w;else if(0<p){if(!r||p<t)t=p,r=w;if(!g||p>=k)k=p,g=w}p=d(w);c.get(w,"checked")&&p&&(x[p]=w)}"SELECT"!=w.nodeName.toUpperCase()&&n(w)}};v(f)&&n(f);return{first:a(b),last:a(e),lowest:a(r),highest:a(g)}},getFirstInTabbingOrder:function(f,d){f=h._getTabNavigable(y.byId(f,d));return f.lowest?f.lowest:f.first},getLastInTabbingOrder:function(f,d){f=h._getTabNavigable(y.byId(f,d));return f.last?f.last:f.highest}};q.mixin(m,h);return h})},"dijit/WidgetSet":function(){define(["dojo/_base/array",
"dojo/_base/declare","dojo/_base/kernel","./registry"],function(B,y,c,u){var q=y("dijit.WidgetSet",null,{constructor:function(){this._hash={};this.length=0},add:function(l){if(this._hash[l.id])throw Error("Tried to register widget with id\x3d\x3d"+l.id+" but that id is already registered");this._hash[l.id]=l;this.length++},remove:function(l){this._hash[l]&&(delete this._hash[l],this.length--)},forEach:function(l,m){m=m||c.global;var h=0,f;for(f in this._hash)l.call(m,this._hash[f],h++,this._hash);
return this},filter:function(l,m){m=m||c.global;var h=new q,f=0,d;for(d in this._hash){var a=this._hash[d];l.call(m,a,f++,this._hash)&&h.add(a)}return h},byId:function(l){return this._hash[l]},byClass:function(l){var m=new q,h;for(h in this._hash){var f=this._hash[h];f.declaredClass==l&&m.add(f)}return m},toArray:function(){var l=[],m;for(m in this._hash)l.push(this._hash[m]);return l},map:function(l,m){return B.map(this.toArray(),l,m)},every:function(l,m){m=m||c.global;var h=0,f;for(f in this._hash)if(!l.call(m,
this._hash[f],h++,this._hash))return!1;return!0},some:function(l,m){m=m||c.global;var h=0,f;for(f in this._hash)if(l.call(m,this._hash[f],h++,this._hash))return!0;return!1}});B.forEach("forEach filter byClass map every some".split(" "),function(l){u[l]=q.prototype[l]});return q})},"dijit/registry":function(){define(["dojo/_base/array","dojo/_base/window","./main"],function(B,y,c){var u={},q={},l={length:0,add:function(m){if(q[m.id])throw Error("Tried to register widget with id\x3d\x3d"+m.id+" but that id is already registered");
q[m.id]=m;this.length++},remove:function(m){q[m]&&(delete q[m],this.length--)},byId:function(m){return"string"==typeof m?q[m]:m},byNode:function(m){return q[m.getAttribute("widgetId")]},toArray:function(){var m=[],h;for(h in q)m.push(q[h]);return m},getUniqueId:function(m){do var h=m+"_"+(m in u?++u[m]:u[m]=0);while(q[h]);return"dijit"==c._scopeName?h:c._scopeName+"_"+h},findWidgets:function(m,h){function f(a){for(a=a.firstChild;a;a=a.nextSibling)if(1==a.nodeType){var b=a.getAttribute("widgetId");
b?(b=q[b])&&d.push(b):a!==h&&f(a)}}var d=[];f(m);return d},_destroyAll:function(){c._curFocus=null;c._prevFocus=null;c._activeStack=[];B.forEach(l.findWidgets(y.body()),function(m){m._destroyed||(m.destroyRecursive?m.destroyRecursive():m.destroy&&m.destroy())})},getEnclosingWidget:function(m){for(;m;){var h=1==m.nodeType&&m.getAttribute("widgetId");if(h)return q[h];m=m.parentNode}return null},_hash:q};return c.registry=l})},"dijit/_base/focus":function(){define("dojo/_base/array dojo/dom dojo/_base/lang dojo/topic dojo/_base/window ../focus ../selection ../main".split(" "),
function(B,y,c,u,q,l,m,h){l.focus=function(f){if(f){var d="node"in f?f.node:f,a=f.bookmark;f=f.openedForWindow;var b=a?a.isCollapsed:!1;if(d){var e="iframe"==d.tagName.toLowerCase()?d.contentWindow:d;if(e&&e.focus)try{e.focus()}catch(r){}l._onFocusNode(d)}if(a&&q.withGlobal(f||q.global,h.isCollapsed)&&!b){f&&f.focus();try{q.withGlobal(f||q.global,h.moveToBookmark,null,[a])}catch(r){}}}};l.watch("curNode",function(f,d,a){h._curFocus=a;h._prevFocus=d;a&&u.publish("focusNode",a)});l.watch("activeStack",
function(f,d,a){h._activeStack=a});l.on("widget-blur",function(f,d){u.publish("widgetBlur",f,d)});l.on("widget-focus",function(f,d){u.publish("widgetFocus",f,d)});c.mixin(h,{_curFocus:null,_prevFocus:null,isCollapsed:function(){return h.getBookmark().isCollapsed},getBookmark:function(){return(q.global==window?m:new m.SelectionManager(q.global)).getBookmark()},moveToBookmark:function(f){return(q.global==window?m:new m.SelectionManager(q.global)).moveToBookmark(f)},getFocus:function(f,d){f=!l.curNode||
f&&y.isDescendant(l.curNode,f.domNode)?h._prevFocus:l.curNode;return{node:f,bookmark:f&&f==l.curNode&&q.withGlobal(d||q.global,h.getBookmark),openedForWindow:d}},_activeStack:[],registerIframe:function(f){return l.registerIframe(f)},unregisterIframe:function(f){f&&f.remove()},registerWin:function(f,d){return l.registerWin(f,d)},unregisterWin:function(f){f&&f.remove()}});return h})},"dijit/focus":function(){define("dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/Evented dojo/_base/lang dojo/on dojo/domReady dojo/sniff dojo/Stateful dojo/_base/window dojo/window ./a11y ./registry ./main".split(" "),
function(B,y,c,u,q,l,m,h,f,d,a,b,e,r,t,g,k){var x,v,A=new (y([b,m],{curNode:null,activeStack:[],constructor:function(){var w=h.hitch(this,function(p){c.isDescendant(this.curNode,p)&&this.set("curNode",null);c.isDescendant(this.prevNode,p)&&this.set("prevNode",null)});B.before(l,"empty",w);B.before(l,"destroy",w)},registerIframe:function(w){return this.registerWin(w.contentWindow,w)},registerWin:function(w,p){var D=this,C=w.document&&w.document.body;if(C){var G=a("pointer-events")?"pointerdown":a("MSPointer")?
"MSPointerDown":a("touch-events")?"mousedown, touchstart":"mousedown",z=f(w.document,G,function(I){I&&I.target&&null==I.target.parentNode||D._onTouchNode(p||I.target,"mouse")}),E=f(C,"focusin",function(I){if(I.target.tagName){var M=I.target.tagName.toLowerCase();"#document"!=M&&"body"!=M&&(t.isFocusable(I.target)?D._onFocusNode(p||I.target):D._onTouchNode(p||I.target))}}),H=f(C,"focusout",function(I){D._onBlurNode(p||I.target)});return{remove:function(){z.remove();E.remove();H.remove();C=z=E=H=null}}}},
_onBlurNode:function(w){w=(new Date).getTime();w<x+100||(this._clearFocusTimer&&clearTimeout(this._clearFocusTimer),this._clearFocusTimer=setTimeout(h.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",null)}),0),this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),w<v+100||(this._clearActiveWidgetsTimer=setTimeout(h.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),0)))},_onTouchNode:function(w,p){v=(new Date).getTime();
this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer);q.contains(w,"dijitPopup")&&(w=w.firstChild);var D=[];try{for(;w;){var C=u.get(w,"dijitPopupParent");if(C)w=g.byId(C).domNode;else if(w.tagName&&"body"==w.tagName.toLowerCase()){if(w===e.body())break;w=r.get(w.ownerDocument).frameElement}else{var G=w.getAttribute&&w.getAttribute("widgetId"),z=G&&g.byId(G);!z||"mouse"==p&&z.get("disabled")||D.unshift(G);w=w.parentNode}}}catch(E){}this._setStack(D,
p)},_onFocusNode:function(w){w&&9!=w.nodeType&&(x=(new Date).getTime(),this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(w),w!=this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",w)))},_setStack:function(w,p){var D=this.activeStack,C=D.length-1,G=w.length-1;if(w[G]!=D[C]){this.set("activeStack",w);var z;for(z=C;0<=z&&D[z]!=w[z];z--)if(C=g.byId(D[z]))C._hasBeenBlurred=!0,C.set("focused",!1),C._focusManager==this&&C._onBlur(p),
this.emit("widget-blur",C,p);for(z++;z<=G;z++)if(C=g.byId(w[z]))C.set("focused",!0),C._focusManager==this&&C._onFocus(p),this.emit("widget-focus",C,p)}},focus:function(w){if(w)try{w.focus()}catch(p){}}}));d(function(){var w=A.registerWin(r.get(document));a("ie")&&f(window,"unload",function(){w&&(w.remove(),w=null)})});k.focus=function(w){A.focus(w)};for(var n in A)/^_/.test(n)||(k.focus[n]="function"==typeof A[n]?h.hitch(A,n):A[n]);A.watch(function(w,p,D){k.focus[w]=D});return A})},"dojo/Stateful":function(){define(["./_base/declare",
"./_base/lang","./_base/array","./when"],function(B,y,c,u){return B("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(q){var l=this._attrPairNames;return l[q]?l[q]:l[q]={s:"_"+q+"Setter",g:"_"+q+"Getter"}},postscript:function(q){q&&this.set(q)},_get:function(q,l){return"function"===typeof this[l.g]?this[l.g]():this[q]},get:function(q){return this._get(q,this._getAttrNames(q))},set:function(q,l){if("object"===typeof q){for(var m in q)q.hasOwnProperty(m)&&"_watchCallbacks"!=m&&this.set(m,
q[m]);return this}m=this._getAttrNames(q);var h=this._get(q,m);m=this[m.s];var f;"function"===typeof m?f=m.apply(this,Array.prototype.slice.call(arguments,1)):this[q]=l;if(this._watchCallbacks){var d=this;u(f,function(){d._watchCallbacks(q,h,l)})}return this},_changeAttrValue:function(q,l){var m=this.get(q);this[q]=l;this._watchCallbacks&&this._watchCallbacks(q,m,l);return this},watch:function(q,l){var m=this._watchCallbacks;if(!m){var h=this;m=this._watchCallbacks=function(d,a,b,e){var r=function(t){if(t){t=
t.slice();for(var g=0,k=t.length;g<k;g++)t[g].call(h,d,a,b)}};r(m["_"+d]);e||r(m["*"])}}l||"function"!==typeof q?q="_"+q:(l=q,q="*");var f=m[q];"object"!==typeof f&&(f=m[q]=[]);f.push(l);q={};q.unwatch=q.remove=function(){var d=c.indexOf(f,l);-1<d&&f.splice(d,1)};return q}})})},"dojo/window":function(){define("./_base/lang ./sniff ./_base/window ./dom ./dom-geometry ./dom-style ./dom-construct".split(" "),function(B,y,c,u,q,l,m){y.add("rtl-adjust-position-for-verticalScrollBar",function(f,d){f=c.body(d);
d=m.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},f,"last");var a=m.create("div",{style:{overflow:"hidden",direction:"ltr"}},d,"last"),b=0!=q.position(a).x;d.removeChild(a);f.removeChild(d);return b});y.add("position-fixed-support",function(f,d){f=c.body(d);d=m.create("span",{style:{visibility:"hidden",position:"fixed",left:"1px",top:"1px"}},f,"last");var a=m.create("span",{style:{position:"fixed",
left:"0",top:"0"}},d,"last"),b=q.position(a).x!=q.position(d).x;d.removeChild(a);f.removeChild(d);return b});var h={getBox:function(f){f=f||c.doc;var d="BackCompat"==f.compatMode?c.body(f):f.documentElement,a=q.docScroll(f);if(y("touch")){var b=h.get(f);f=b.innerWidth||d.clientWidth;d=b.innerHeight||d.clientHeight}else f=d.clientWidth,d=d.clientHeight;return{l:a.x,t:a.y,w:f,h:d}},get:function(f){if(y("ie")&&h!==document.parentWindow){f.parentWindow.execScript("document._parentWindow \x3d window;",
"Javascript");var d=f._parentWindow;f._parentWindow=null;return d}return f.parentWindow||f.defaultView},scrollIntoView:function(f,d){try{f=u.byId(f);var a=f.ownerDocument||c.doc,b=c.body(a),e=a.documentElement||b.parentNode,r=y("ie")||y("trident"),t=y("webkit");if(f!=b&&f!=e)if(!(y("mozilla")||r||t||y("opera")||y("trident")||y("edge"))&&"scrollIntoView"in f)f.scrollIntoView(!1);else{var g="BackCompat"==a.compatMode,k=Math.min(b.clientWidth||e.clientWidth,e.clientWidth||b.clientWidth),x=Math.min(b.clientHeight||
e.clientHeight,e.clientHeight||b.clientHeight);a=t||g?b:e;var v=d||q.position(f),A=f.parentNode;d=function(fa){return 6>=r||7==r&&g?!1:y("position-fixed-support")&&"fixed"==l.get(fa,"position").toLowerCase()};var n=this;t=function(fa,ca,X){"BODY"==fa.tagName||"HTML"==fa.tagName?n.get(fa.ownerDocument).scrollBy(ca,X):(ca&&(fa.scrollLeft+=ca),X&&(fa.scrollTop+=X))};if(!d(f))for(;A;){A==b&&(A=a);var w=q.position(A),p=d(A),D="rtl"==l.getComputedStyle(A).direction.toLowerCase();if(A==a)w.w=k,w.h=x,a==
e&&(r||y("trident"))&&D&&(w.x+=a.offsetWidth-w.w),w.x=0,w.y=0;else{var C=q.getPadBorderExtents(A);w.w-=C.w;w.h-=C.h;w.x+=C.l;w.y+=C.t;var G=A.clientWidth,z=w.w-G;0<G&&0<z&&(D&&y("rtl-adjust-position-for-verticalScrollBar")&&(w.x+=z),w.w=G);G=A.clientHeight;z=w.h-G;0<G&&0<z&&(w.h=G)}p&&(0>w.y&&(w.h+=w.y,w.y=0),0>w.x&&(w.w+=w.x,w.x=0),w.y+w.h>x&&(w.h=x-w.y),w.x+w.w>k&&(w.w=k-w.x));var E=v.x-w.x,H=v.y-w.y,I=E+v.w-w.w,M=H+v.h-w.h;if(0<I*E&&(A.scrollLeft||A==a||A.scrollWidth>A.offsetHeight)){var T=Math[0>
E?"max":"min"](E,I);D&&(8==r&&!g||5<=y("trident"))&&(T=-T);var Y=A.scrollLeft;t(A,T,0);T=A.scrollLeft-Y;v.x-=T}0<M*H&&(A.scrollTop||A==a||A.scrollHeight>A.offsetHeight)&&(T=Math.ceil(Math[0>H?"max":"min"](H,M)),Y=A.scrollTop,t(A,0,T),T=A.scrollTop-Y,v.y-=T);A=A!=a&&!p&&A.parentNode}}}catch(fa){console.error("scrollIntoView: "+fa),f.scrollIntoView(!1)}}};B.setObject("dojo.window",h);return h})},"dijit/selection":function(){define("dojo/_base/array dojo/dom dojo/_base/lang dojo/sniff dojo/_base/window dijit/focus".split(" "),
function(B,y,c,u,q,l){var m=function(f){var d=f.document;this.getType=function(){if(d.getSelection){var a="text";try{var b=f.getSelection()}catch(e){}b&&1==b.rangeCount&&(b=b.getRangeAt(0),b.startContainer==b.endContainer&&1==b.endOffset-b.startOffset&&3!=b.startContainer.nodeType&&(a="control"));return a}return d.selection.type.toLowerCase()};this.getSelectedText=function(){if(d.getSelection){var a=f.getSelection();return a?a.toString():""}return"control"==this.getType()?null:d.selection.createRange().text};
this.getSelectedHtml=function(){if(d.getSelection){var a=f.getSelection();if(a&&a.rangeCount){var b,e="";for(b=0;b<a.rangeCount;b++){var r=a.getRangeAt(b).cloneContents(),t=d.createElement("div");t.appendChild(r);e+=t.innerHTML}return e}return null}return"control"==this.getType()?null:d.selection.createRange().htmlText};this.getSelectedElement=function(){if("control"==this.getType()){if(d.getSelection){var a=f.getSelection();return a.anchorNode.childNodes[a.anchorOffset]}if((a=d.selection.createRange())&&
a.item)return d.selection.createRange().item(0)}return null};this.getParentElement=function(){if("control"==this.getType()){var a=this.getSelectedElement();if(a)return a.parentNode}else if(d.getSelection){if(a=d.getSelection()){for(a=a.anchorNode;a&&1!=a.nodeType;)a=a.parentNode;return a}}else return a=d.selection.createRange(),a.collapse(!0),a.parentElement();return null};this.hasAncestorElement=function(a){return null!=this.getAncestorElement.apply(this,arguments)};this.getAncestorElement=function(a){var b=
this.getSelectedElement()||this.getParentElement();return this.getParentOfType(b,arguments)};this.isTag=function(a,b){if(a&&a.tagName){a=a.tagName.toLowerCase();for(var e=0;e<b.length;e++){var r=String(b[e]).toLowerCase();if(a==r)return r}}return""};this.getParentOfType=function(a,b){for(;a;){if(this.isTag(a,b).length)return a;a=a.parentNode}return null};this.collapse=function(a){if(d.getSelection){var b=f.getSelection();b.removeAllRanges?a?b.collapseToStart():b.collapseToEnd():b.collapse(a)}else b=
d.selection.createRange(),b.collapse(a),b.select()};this.remove=function(){var a=d.selection;d.getSelection?(a=f.getSelection(),a.deleteFromDocument()):"none"!=a.type.toLowerCase()&&a.clear();return a};this.selectElementChildren=function(a,b){a=y.byId(a);if(d.getSelection)if(b=f.getSelection(),u("opera")){var e=b.rangeCount?b.getRangeAt(0):d.createRange();e.setStart(a,0);e.setEnd(a,3==a.nodeType?a.length:a.childNodes.length);b.addRange(e)}else b.selectAllChildren(a);else if(e=a.ownerDocument.body.createTextRange(),
e.moveToElementText(a),!b)try{e.select()}catch(r){}};this.selectElement=function(a,b){a=y.byId(a);if(d.getSelection){b=d.getSelection();var e=d.createRange();b.removeAllRanges&&(u("opera")&&b.getRangeAt(0)&&(e=b.getRangeAt(0)),e.selectNode(a),b.removeAllRanges(),b.addRange(e))}else try{var r=a.tagName?a.tagName.toLowerCase():"";e="img"===r||"table"===r?q.body(d).createControlRange():q.body(d).createRange();e.addElement(a);b||e.select()}catch(t){this.selectElementChildren(a,b)}};this.inSelection=function(a){if(a){var b;
if(d.getSelection){var e=f.getSelection();e&&0<e.rangeCount&&(b=e.getRangeAt(0));if(b&&b.compareBoundaryPoints&&d.createRange)try{var r=d.createRange();r.setStart(a,0);if(1===b.compareBoundaryPoints(b.START_TO_END,r))return!0}catch(t){}}else{b=d.selection.createRange();try{r=a.ownerDocument.body.createTextRange(),r.moveToElementText(a)}catch(t){}if(b&&r&&1===b.compareEndPoints("EndToStart",r))return!0}}return!1};this.getBookmark=function(){var a,b=d.selection,e=l.curNode;if(d.getSelection){if(b=f.getSelection())if(b.isCollapsed){if(a=
e?e.tagName:"")if(a=a.toLowerCase(),"textarea"==a||"input"==a&&(!e.type||"text"==e.type.toLowerCase()))return b={start:e.selectionStart,end:e.selectionEnd,node:e,pRange:!0},{isCollapsed:b.end<=b.start,mark:b};a={isCollapsed:!0};b.rangeCount&&(a.mark=b.getRangeAt(0).cloneRange())}else{var r=b.getRangeAt(0);a={isCollapsed:!1,mark:r.cloneRange()}}}else if(b){a=e?e.tagName:"";a=a.toLowerCase();if(e&&a&&("button"==a||"textarea"==a||"input"==a)){if(b.type&&"none"==b.type.toLowerCase())return{isCollapsed:!0,
mark:null};r=b.createRange();return{isCollapsed:r.text&&r.text.length?!1:!0,mark:{range:r,pRange:!0}}}a={};try{r=b.createRange(),a.isCollapsed=!("Text"==b.type?r.htmlText.length:r.length)}catch(t){return a.isCollapsed=!0,a}if("CONTROL"==b.type.toUpperCase())if(r.length)for(a.mark=[],b=0,e=r.length;b<e;)a.mark.push(r.item(b++));else a.isCollapsed=!0,a.mark=null;else a.mark=r.getBookmark()}else console.warn("No idea how to store the current selection for this browser!");return a};this.moveToBookmark=
function(a){if(a=a.mark)if(d.getSelection){var b=f.getSelection();b&&b.removeAllRanges?a.pRange?(b=a.node,b.selectionStart=a.start,b.selectionEnd=a.end):(b.removeAllRanges(),b.addRange(a)):console.warn("No idea how to restore selection for this browser!")}else if(d.selection&&a){if(a.pRange)var e=a.range;else c.isArray(a)?(e=d.body.createControlRange(),B.forEach(a,function(r){e.addElement(r)})):(e=d.body.createTextRange(),e.moveToBookmark(a));e.select()}};this.isCollapsed=function(){return this.getBookmark().isCollapsed}},
h=new m(window);h.SelectionManager=m;return h})},"dijit/_base/manager":function(){define(["dojo/_base/array","dojo/_base/config","dojo/_base/lang","../registry","../main"],function(B,y,c,u,q){var l={};B.forEach("byId getUniqueId findWidgets _destroyAll byNode getEnclosingWidget".split(" "),function(m){l[m]=u[m]});c.mixin(l,{defaultDuration:y.defaultDuration||200});c.mixin(q,l);return q})},"dijit/_base/place":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/window","../place","../main"],
function(B,y,c,u,q){var l={getViewport:function(){return c.getBox()}};l.placeOnScreen=u.at;l.placeOnScreenAroundElement=function(m,h,f,d){if(y.isArray(f))var a=f;else{a=[];for(var b in f)a.push({aroundCorner:b,corner:f[b]})}return u.around(m,h,a,!0,d)};l.placeOnScreenAroundNode=l.placeOnScreenAroundElement;l.placeOnScreenAroundRectangle=l.placeOnScreenAroundElement;l.getPopupAroundAlignment=function(m,h){var f={};B.forEach(m,function(d){var a=h;switch(d){case "after":f[h?"BR":"BL"]=h?"BL":"BR";break;
case "before":f[h?"BL":"BR"]=h?"BR":"BL";break;case "below-alt":a=!a;case "below":f[a?"BL":"BR"]=a?"TL":"TR";f[a?"BR":"BL"]=a?"TR":"TL";break;case "above-alt":a=!a;default:f[a?"TL":"TR"]=a?"BL":"BR",f[a?"TR":"TL"]=a?"BR":"BL"}});return f};y.mixin(q,l);return q})},"dijit/place":function(){define("dojo/_base/array dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/_base/window ./Viewport ./main".split(" "),function(B,y,c,u,q,l,m){function h(d,a,b,e){var r=l.getEffectiveBox(d.ownerDocument);d.parentNode&&
"body"==String(d.parentNode.tagName).toLowerCase()||q.body(d.ownerDocument).appendChild(d);var t=null;B.some(a,function(x){var v=x.corner,A=x.pos,n=0,w={w:{L:r.l+r.w-A.x,R:A.x-r.l,M:r.w}[v.charAt(1)],h:{T:r.t+r.h-A.y,B:A.y-r.t,M:r.h}[v.charAt(0)]},p=d.style;p.left=p.right="auto";b&&(n=b(d,x.aroundCorner,v,w,e),n="undefined"==typeof n?0:n);var D=d.style,C=D.display,G=D.visibility;"none"==D.display&&(D.visibility="hidden",D.display="");p=y.position(d);D.display=C;D.visibility=G;C={L:A.x,R:A.x-p.w,M:Math.max(r.l,
Math.min(r.l+r.w,A.x+(p.w>>1))-p.w)}[v.charAt(1)];G={T:A.y,B:A.y-p.h,M:Math.max(r.t,Math.min(r.t+r.h,A.y+(p.h>>1))-p.h)}[v.charAt(0)];A=Math.max(r.l,C);D=Math.max(r.t,G);C=Math.min(r.l+r.w,C+p.w)-A;G=Math.min(r.t+r.h,G+p.h)-D;n+=p.w-C+(p.h-G);if(null==t||n<t.overflow)t={corner:v,aroundCorner:x.aroundCorner,x:A,y:D,w:C,h:G,overflow:n,spaceAvailable:w};return!n});t.overflow&&b&&b(d,t.aroundCorner,t.corner,t.spaceAvailable,e);a=t.y;var g=t.x,k=q.body(d.ownerDocument);/relative|absolute/.test(c.get(k,
"position"))&&(a-=c.get(k,"marginTop"),g-=c.get(k,"marginLeft"));k=d.style;k.top=a+"px";k.left=g+"px";k.right="auto";return t}var f={TL:"BR",TR:"BL",BL:"TR",BR:"TL"};return m.place={at:function(d,a,b,e,r){b=B.map(b,function(t){var g={corner:t,aroundCorner:f[t],pos:{x:a.x,y:a.y}};e&&(g.pos.x+="L"==t.charAt(1)?e.x:-e.x,g.pos.y+="T"==t.charAt(0)?e.y:-e.y);return g});return h(d,b,r)},around:function(d,a,b,e,r){function t(z,E){G.push({aroundCorner:z,corner:E,pos:{x:{L:w,R:w+D,M:w+(D>>1)}[z.charAt(1)],
y:{T:p,B:p+C,M:p+(C>>1)}[z.charAt(0)]}})}if("string"==typeof a||"offsetWidth"in a||"ownerSVGElement"in a){var g=y.position(a,!0);if(/^(above|below)/.test(b[0])){var k=y.getBorderExtents(a),x=a.firstChild?y.getBorderExtents(a.firstChild):{t:0,l:0,b:0,r:0},v=y.getBorderExtents(d),A=d.firstChild?y.getBorderExtents(d.firstChild):{t:0,l:0,b:0,r:0};g.y+=Math.min(k.t+x.t,v.t+A.t);g.h-=Math.min(k.t+x.t,v.t+A.t)+Math.min(k.b+x.b,v.b+A.b)}}else g=a;if(a.parentNode)for(k="absolute"==c.getComputedStyle(a).position,
a=a.parentNode;a&&1==a.nodeType&&"BODY"!=a.nodeName;){x=y.position(a,!0);v=c.getComputedStyle(a);/relative|absolute/.test(v.position)&&(k=!1);if(!k&&/hidden|auto|scroll/.test(v.overflow)){A=Math.min(g.y+g.h,x.y+x.h);var n=Math.min(g.x+g.w,x.x+x.w);g.x=Math.max(g.x,x.x);g.y=Math.max(g.y,x.y);g.h=A-g.y;g.w=n-g.x}"absolute"==v.position&&(k=!0);a=a.parentNode}var w=g.x,p=g.y,D="w"in g?g.w:g.w=g.width,C="h"in g?g.h:(u.deprecated("place.around: dijit/place.__Rectangle: { x:"+w+", y:"+p+", height:"+g.height+
", width:"+D+" } has been deprecated.  Please use { x:"+w+", y:"+p+", h:"+g.height+", w:"+D+" }","","2.0"),g.h=g.height),G=[];B.forEach(b,function(z){var E=e;switch(z){case "above-centered":t("TM","BM");break;case "below-centered":t("BM","TM");break;case "after-centered":E=!E;case "before-centered":t(E?"ML":"MR",E?"MR":"ML");break;case "after":E=!E;case "before":t(E?"TL":"TR",E?"TR":"TL");t(E?"BL":"BR",E?"BR":"BL");break;case "below-alt":E=!E;case "below":t(E?"BL":"BR",E?"TL":"TR");t(E?"BR":"BL",
E?"TR":"TL");break;case "above-alt":E=!E;case "above":t(E?"TL":"TR",E?"BL":"BR");t(E?"TR":"TL",E?"BR":"BL");break;default:t(z.aroundCorner,z.corner)}});d=h(d,G,r,{w:D,h:C});d.aroundNodePos=g;return d}}})},"dijit/Viewport":function(){define(["dojo/Evented","dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(B,y,c,u,q){var l=new B,m;c(function(){var h=q.getBox();l._rlh=y(window,"resize",function(){var d=q.getBox();if(h.h!=d.h||h.w!=d.w)h=d,l.emit("resize")});if(8==u("ie")){var f=screen.deviceXDPI;
setInterval(function(){screen.deviceXDPI!=f&&(f=screen.deviceXDPI,l.emit("resize"))},500)}u("ios")&&(y(document,"focusin",function(d){m=d.target}),y(document,"focusout",function(d){m=null}))});l.getEffectiveBox=function(h){h=q.getBox(h);var f=m&&m.tagName&&m.tagName.toLowerCase();u("ios")&&m&&!m.readOnly&&("textarea"==f||"input"==f&&/^(color|email|number|password|search|tel|text|url)$/.test(m.type))&&(h.h*=0==orientation||180==orientation?.66:.4,f=m.getBoundingClientRect(),h.h=Math.max(h.h,f.top+
f.height));return h};return l})},"dijit/_base/popup":function(){define(["dojo/dom-class","dojo/_base/window","../popup","../BackgroundIframe"],function(B,y,c){var u=c._createWrapper;c._createWrapper=function(l){l.declaredClass||(l={_popupWrapper:l.parentNode&&B.contains(l.parentNode,"dijitPopup")?l.parentNode:null,domNode:l,destroy:function(){},ownerDocument:l.ownerDocument,ownerDocumentBody:y.body(l.ownerDocument)});return u.call(this,l)};var q=c.open;c.open=function(l){if(l.orient&&"string"!=typeof l.orient&&
!("length"in l.orient)){var m=[],h;for(h in l.orient)m.push({aroundCorner:h,corner:l.orient[h]});l.orient=m}return q.call(this,l)};return c})},"dijit/popup":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on ./place ./BackgroundIframe ./Viewport ./main dojo/touch".split(" "),function(B,y,c,u,q,l,m,h,f,d,a,b,e,r,t,g){function k(){this._popupWrapper&&(l.destroy(this._popupWrapper),
delete this._popupWrapper)}c=c(null,{_stack:[],_beginZIndex:1E3,_idGen:1,_repositionAll:function(){if(this._firstAroundNode){var x=this._firstAroundPosition,v=m.position(this._firstAroundNode,!0),A=v.x-x.x;x=v.y-x.y;if(A||x)for(this._firstAroundPosition=v,v=0;v<this._stack.length;v++){var n=this._stack[v].wrapper.style;n.top=parseFloat(n.top)+x+"px";"auto"==n.right?n.left=parseFloat(n.left)+A+"px":n.right=parseFloat(n.right)-A+"px"}this._aroundMoveListener=setTimeout(a.hitch(this,"_repositionAll"),
A||x?10:50)}},_createWrapper:function(x){var v=x._popupWrapper,A=x.domNode;v||(v=l.create("div",{"class":"dijitPopup",style:{display:"none"},role:"region","aria-label":x["aria-label"]||x.label||x.name||x.id},x.ownerDocumentBody),v.appendChild(A),A=A.style,A.display="",A.visibility="",A.position="",A.top="0px",x._popupWrapper=v,y.after(x,"destroy",k,!0),"ontouchend"in document&&b(v,"touchend",function(n){/^(input|button|textarea)$/i.test(n.target.tagName)||n.preventDefault()}),v.dojoClick=!0);return v},
moveOffScreen:function(x){var v=this._createWrapper(x);x=m.isBodyLtr(x.ownerDocument);var A={visibility:"hidden",top:"-9999px",display:""};A[x?"left":"right"]="-9999px";A[x?"right":"left"]="auto";h.set(v,A);return v},hide:function(x){var v=this._createWrapper(x);h.set(v,{display:"none",height:"auto",overflowY:"visible",border:""});x=x.domNode;"_originalStyle"in x&&(x.style.cssText=x._originalStyle)},getTopPopup:function(){for(var x=this._stack,v=x.length-1;0<v&&x[v].parent===x[v-1].widget;v--);return x[v]},
open:function(x){for(var v=this._stack,A=x.popup,n=A.domNode,w=x.orient||["below","below-alt","above","above-alt"],p=x.parent?x.parent.isLeftToRight():m.isBodyLtr(A.ownerDocument),D=x.around,C=x.around&&x.around.id?x.around.id+"_dropdown":"popup_"+this._idGen++;v.length&&(!x.parent||!u.isDescendant(x.parent.domNode,v[v.length-1].widget.domNode));)this.close(v[v.length-1].widget);var G=this.moveOffScreen(A);A.startup&&!A._started&&A.startup();var z=m.position(n);if("maxHeight"in x&&-1!=x.maxHeight)var E=
x.maxHeight||Infinity;else{E=t.getEffectiveBox(this.ownerDocument);var H=D?m.position(D,!1):{y:x.y-(x.padding||0),h:2*(x.padding||0)};E=Math.floor(Math.max(H.y,E.h-(H.y+H.h)))}z.h>E&&(z=h.getComputedStyle(n),h.set(G,{overflowY:"scroll",height:E+"px",border:z.borderLeftWidth+" "+z.borderLeftStyle+" "+z.borderLeftColor}),n._originalStyle=n.style.cssText,n.style.border="none");q.set(G,{id:C,style:{zIndex:this._beginZIndex+v.length},"class":"dijitPopup "+(A.baseClass||A["class"]||"").split(" ")[0]+"Popup",
dijitPopupParent:x.parent?x.parent.id:""});0==v.length&&D&&(this._firstAroundNode=D,this._firstAroundPosition=m.position(D,!0),this._aroundMoveListener=setTimeout(a.hitch(this,"_repositionAll"),50));f("config-bgIframe")&&!A.bgIframe&&(A.bgIframe=new r(G));C=A.orient?a.hitch(A,"orient"):null;w=D?e.around(G,D,w,p,C):e.at(G,x,"R"==w?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],x.padding,C);G.style.visibility="visible";n.style.visibility="visible";n=[];n.push(b(G,"keydown",a.hitch(this,function(I){if(I.keyCode==
d.ESCAPE&&x.onCancel)I.stopPropagation(),I.preventDefault(),x.onCancel();else if(I.keyCode==d.TAB&&(I.stopPropagation(),I.preventDefault(),(I=this.getTopPopup())&&I.onCancel))I.onCancel()})));A.onCancel&&x.onCancel&&n.push(A.on("cancel",x.onCancel));n.push(A.on(A.onExecute?"execute":"change",a.hitch(this,function(){var I=this.getTopPopup();if(I&&I.onExecute)I.onExecute()})));v.push({widget:A,wrapper:G,parent:x.parent,onExecute:x.onExecute,onCancel:x.onCancel,onClose:x.onClose,handlers:n});if(A.onOpen)A.onOpen(w);
return w},close:function(x){for(var v=this._stack;x&&B.some(v,function(D){return D.widget==x})||!x&&v.length;){var A=v.pop(),n=A.widget,w=A.onClose;n.bgIframe&&(n.bgIframe.destroy(),delete n.bgIframe);if(n.onClose)n.onClose();for(var p;p=A.handlers.pop();)p.remove();n&&n.domNode&&this.hide(n);w&&w()}0==v.length&&this._aroundMoveListener&&(clearTimeout(this._aroundMoveListener),this._firstAroundNode=this._firstAroundPosition=this._aroundMoveListener=null)}});return g.popup=new c})},"dijit/BackgroundIframe":function(){define("require ./main dojo/_base/config dojo/dom-construct dojo/dom-style dojo/_base/lang dojo/on dojo/sniff".split(" "),
function(B,y,c,u,q,l,m,h){h.add("config-bgIframe",(h("ie")||h("trident"))&&!/IEMobile\/10\.0/.test(navigator.userAgent));var f=new function(){var d=[];this.pop=function(){if(d.length){var a=d.pop();a.style.display=""}else 9>h("ie")?(a=c.dojoBlankHtmlUrl||B.toUrl("dojo/resources/blank.html")||'javascript:""',a=document.createElement("\x3ciframe src\x3d'"+a+"' role\x3d'presentation' style\x3d'position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity\x3d\"0\");'\x3e")):(a=u.create("iframe"),
a.src='javascript:""',a.className="dijitBackgroundIframe",a.setAttribute("role","presentation"),q.set(a,"opacity",.1)),a.tabIndex=-1;return a};this.push=function(a){a.style.display="none";d.push(a)}};y.BackgroundIframe=function(d){if(!d.id)throw Error("no id");if(h("config-bgIframe")){var a=this.iframe=f.pop();d.appendChild(a);7>h("ie")||h("quirks")?(this.resize(d),this._conn=m(d,"resize",l.hitch(this,"resize",d))):q.set(a,{width:"100%",height:"100%"})}};l.extend(y.BackgroundIframe,{resize:function(d){this.iframe&&
q.set(this.iframe,{width:d.offsetWidth+"px",height:d.offsetHeight+"px"})},destroy:function(){this._conn&&(this._conn.remove(),this._conn=null);this.iframe&&(this.iframe.parentNode.removeChild(this.iframe),f.push(this.iframe),delete this.iframe)}});return y.BackgroundIframe})},"dojo/touch":function(){define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),function(B,y,c,u,q,l,m,h,f,d){function a(H,I,M){return t&&M?function(T,Y){return l(T,
M,Y)}:k?function(T,Y){var fa=l(T,I,function(X){Y.call(this,X);z=(new Date).getTime()}),ca=l(T,H,function(X){(!z||(new Date).getTime()>z+1E3)&&Y.call(this,X)});return{remove:function(){fa.remove();ca.remove()}}}:function(T,Y){return l(T,H,Y)}}function b(H){do if(void 0!==H.dojoClick)return H;while(H=H.parentNode)}function e(H,I,M){if(!h.isRight(H)){var T=b(H.target);if(v=!H.target.disabled&&T&&T.dojoClick)if(n=(A="useTarget"==v)?T:H.target,A&&H.preventDefault(),w=H.changedTouches?H.changedTouches[0].pageX-
d.global.pageXOffset:H.clientX,p=H.changedTouches?H.changedTouches[0].pageY-d.global.pageYOffset:H.clientY,D=("object"==typeof v?v.x:"number"==typeof v?v:0)||4,C=("object"==typeof v?v.y:"number"==typeof v?v:0)||4,!x){x=!0;var Y=function(fa){v=A?c.isDescendant(d.doc.elementFromPoint(fa.changedTouches?fa.changedTouches[0].pageX-d.global.pageXOffset:fa.clientX,fa.changedTouches?fa.changedTouches[0].pageY-d.global.pageYOffset:fa.clientY),n):v&&(fa.changedTouches?fa.changedTouches[0].target:fa.target)==
n&&Math.abs((fa.changedTouches?fa.changedTouches[0].pageX-d.global.pageXOffset:fa.clientX)-w)<=D&&Math.abs((fa.changedTouches?fa.changedTouches[0].pageY-d.global.pageYOffset:fa.clientY)-p)<=C};d.doc.addEventListener(I,function(fa){h.isRight(fa)||(Y(fa),A&&fa.preventDefault())},!0);d.doc.addEventListener(M,function(fa){if(!h.isRight(fa)&&(Y(fa),v)){G=(new Date).getTime();var ca=A?n:fa.target;"LABEL"===ca.tagName&&(ca=c.byId(ca.getAttribute("for"))||ca);var X=fa.changedTouches?fa.changedTouches[0]:
fa,ea=function(ja){var ta=document.createEvent("MouseEvents");ta._dojo_click=!0;ta.initMouseEvent(ja,!0,!0,fa.view,fa.detail,X.screenX,X.screenY,X.clientX,X.clientY,fa.ctrlKey,fa.altKey,fa.shiftKey,fa.metaKey,0,null);return ta},ma=ea("mousedown"),wa=ea("mouseup"),P=ea("click");setTimeout(function(){l.emit(ca,"mousedown",ma);l.emit(ca,"mouseup",wa);l.emit(ca,"click",P);G=(new Date).getTime()},0)}},!0);H=function(fa){d.doc.addEventListener(fa,function(ca){var X=ca.target;v&&!ca._dojo_click&&(new Date).getTime()<=
G+1E3&&("INPUT"!=X.tagName||!u.contains(X,"dijitOffScreen"))&&(ca.stopPropagation(),ca.stopImmediatePropagation&&ca.stopImmediatePropagation(),"click"==fa&&("INPUT"!=X.tagName||"radio"==X.type&&(u.contains(X,"dijitCheckBoxInput")||u.contains(X,"mblRadioButton"))||"checkbox"==X.type&&(u.contains(X,"dijitCheckBoxInput")||u.contains(X,"mblCheckBox")))&&"TEXTAREA"!=X.tagName&&"AUDIO"!=X.tagName&&"VIDEO"!=X.tagName&&ca.preventDefault())},!0)};H("click");H("mousedown");H("mouseup")}}}var r=5>m("ios"),t=
m("pointer-events")||m("MSPointer"),g=function(){var H={},I;for(I in{down:1,move:1,up:1,cancel:1,over:1,out:1})H[I]=m("MSPointer")?"MSPointer"+I.charAt(0).toUpperCase()+I.slice(1):"pointer"+I;return H}(),k=m("touch-events"),x,v,A=!1,n,w,p,D,C,G,z,E;m("touch")&&(t?f(function(){d.doc.addEventListener(g.down,function(H){e(H,g.move,g.up)},!0)}):f(function(){function H(I){var M=q.delegate(I,{bubbles:!0});6<=m("ios")&&(M.touches=I.touches,M.altKey=I.altKey,M.changedTouches=I.changedTouches,M.ctrlKey=I.ctrlKey,
M.metaKey=I.metaKey,M.shiftKey=I.shiftKey,M.targetTouches=I.targetTouches);return M}E=d.body();d.doc.addEventListener("touchstart",function(I){z=(new Date).getTime();var M=E;E=I.target;l.emit(M,"dojotouchout",{relatedTarget:E,bubbles:!0});l.emit(E,"dojotouchover",{relatedTarget:M,bubbles:!0});e(I,"touchmove","touchend")},!0);l(d.doc,"touchmove",function(I){z=(new Date).getTime();var M=d.doc.elementFromPoint(I.pageX-(r?0:d.global.pageXOffset),I.pageY-(r?0:d.global.pageYOffset));M&&(E!==M&&(l.emit(E,
"dojotouchout",{relatedTarget:M,bubbles:!0}),l.emit(M,"dojotouchover",{relatedTarget:E,bubbles:!0}),E=M),l.emit(M,"dojotouchmove",H(I))||I.preventDefault())});l(d.doc,"touchend",function(I){z=(new Date).getTime();var M=d.doc.elementFromPoint(I.pageX-(r?0:d.global.pageXOffset),I.pageY-(r?0:d.global.pageYOffset))||d.body();l.emit(M,"dojotouchend",H(I))})}));y={press:a("mousedown","touchstart",g.down),move:a("mousemove","dojotouchmove",g.move),release:a("mouseup","dojotouchend",g.up),cancel:a(h.leave,
"touchcancel",t?g.cancel:null),over:a("mouseover","dojotouchover",g.over),out:a("mouseout","dojotouchout",g.out),enter:h._eventHandler(a("mouseover","dojotouchover",g.over)),leave:h._eventHandler(a("mouseout","dojotouchout",g.out))};return B.touch=y})},"dijit/_base/scroll":function(){define(["dojo/window","../main"],function(B,y){y.scrollIntoView=function(c,u){B.scrollIntoView(c,u)}})},"dijit/_base/sniff":function(){define(["dojo/uacss"],function(){})},"dojo/uacss":function(){define(["./dom-geometry",
"./_base/lang","./domReady","./sniff","./_base/window"],function(B,y,c,u,q){var l=q.doc.documentElement;q=u("ie");var m=u("trident"),h=u("opera"),f=Math.floor,d=u("ff"),a=B.boxModel.replace(/-/,"");h={dj_quirks:u("quirks"),dj_opera:h,dj_khtml:u("khtml"),dj_webkit:u("webkit"),dj_safari:u("safari"),dj_chrome:u("chrome"),dj_edge:u("edge"),dj_gecko:u("mozilla"),dj_ios:u("ios"),dj_android:u("android")};q&&(h.dj_ie=!0,h["dj_ie"+f(q)]=!0,h.dj_iequirks=u("quirks"));m&&(h.dj_trident=!0,h["dj_trident"+f(m)]=
!0);d&&(h["dj_ff"+f(d)]=!0);h["dj_"+a]=!0;var b="",e;for(e in h)h[e]&&(b+=e+" ");l.className=y.trim(l.className+" "+b);c(function(){if(!B.isBodyLtr()){var r="dj_rtl dijitRtl "+b.replace(/ /g,"-rtl ");l.className=y.trim(l.className+" "+r+"dj_rtl dijitRtl "+b.replace(/ /g,"-rtl "))}});return u})},"dijit/_base/typematic":function(){define(["../typematic"],function(){})},"dijit/typematic":function(){define("dojo/_base/array dojo/_base/connect dojo/_base/lang dojo/on dojo/sniff ./main".split(" "),function(B,
y,c,u,q,l){var m=l.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(0>this._currentTimeout?this._initialDelay:1<this._subsequentDelay?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay),this._minDelay);this._timer=setTimeout(c.hitch(this,"_fireEventAndReload"),this._currentTimeout)},trigger:function(h,f,d,a,b,e,r,t){if(b!=this._obj){this.stop();this._initialDelay=r||500;this._subsequentDelay=
e||.9;this._minDelay=t||10;this._obj=b;this._node=d;this._count=this._currentTimeout=-1;this._callback=c.hitch(f,a);this._evt={faux:!0};for(var g in h)"layerX"!=g&&"layerY"!=g&&(f=h[g],"function"!=typeof f&&"undefined"!=typeof f&&(this._evt[g]=f));this._fireEventAndReload()}},stop:function(){this._timer&&(clearTimeout(this._timer),this._timer=null);this._obj&&(this._callback(-1,this._node,this._evt),this._obj=null)},addKeyListener:function(h,f,d,a,b,e,r){var t="keyCode"in f?"keyCode":"charCode"in
f?"charCode":"charOrCode",g=[u(h,"keyCode"in f?"keydown":"charCode"in f?"keypress":y._keypress,c.hitch(this,function(k){k[t]!=f[t]||void 0!==f.ctrlKey&&f.ctrlKey!=k.ctrlKey||void 0!==f.altKey&&f.altKey!=k.altKey||void 0!==f.metaKey&&f.metaKey!=(k.metaKey||!1)||void 0!==f.shiftKey&&f.shiftKey!=k.shiftKey?m._obj==f&&m.stop():(k.stopPropagation(),k.preventDefault(),m.trigger(k,d,h,a,f,b,e,r))})),u(h,"keyup",c.hitch(this,function(){m._obj==f&&m.stop()}))];return{remove:function(){B.forEach(g,function(k){k.remove()})}}},
addMouseListener:function(h,f,d,a,b,e){var r=[u(h,"mousedown",c.hitch(this,function(t){t.preventDefault();m.trigger(t,f,h,d,h,a,b,e)})),u(h,"mouseup",c.hitch(this,function(t){this._obj&&t.preventDefault();m.stop()})),u(h,"mouseout",c.hitch(this,function(t){this._obj&&t.preventDefault();m.stop()})),u(h,"dblclick",c.hitch(this,function(t){t.preventDefault();9>q("ie")&&(m.trigger(t,f,h,d,h,a,b,e),setTimeout(c.hitch(this,m.stop),50))}))];return{remove:function(){B.forEach(r,function(t){t.remove()})}}},
addListener:function(h,f,d,a,b,e,r,t){var g=[this.addKeyListener(f,d,a,b,e,r,t),this.addMouseListener(h,a,b,e,r,t)];return{remove:function(){B.forEach(g,function(k){k.remove()})}}}};return m})},"dijit/_base/wai":function(){define(["dojo/dom-attr","dojo/_base/lang","../main","../hccss"],function(B,y,c){y.mixin(c,{hasWaiRole:function(u,q){u=this.getWaiRole(u);return q?-1<u.indexOf(q):0<u.length},getWaiRole:function(u){return y.trim((B.get(u,"role")||"").replace("wairole:",""))},setWaiRole:function(u,
q){B.set(u,"role",q)},removeWaiRole:function(u,q){var l=B.get(u,"role");l&&(q?(q=y.trim((" "+l+" ").replace(" "+q+" "," ")),B.set(u,"role",q)):u.removeAttribute("role"))},hasWaiState:function(u,q){return u.hasAttribute?u.hasAttribute("aria-"+q):!!u.getAttribute("aria-"+q)},getWaiState:function(u,q){return u.getAttribute("aria-"+q)||""},setWaiState:function(u,q,l){u.setAttribute("aria-"+q,l)},removeWaiState:function(u,q){u.removeAttribute("aria-"+q)}});return c})},"dijit/hccss":function(){define(["dojo/dom-class",
"dojo/hccss","dojo/domReady","dojo/_base/window"],function(B,y,c,u){c(function(){y("highcontrast")&&B.add(u.body(),"dijit_a11y")});return y})},"dojo/hccss":function(){define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),function(B,y,c,u,q,l,m){q.add("highcontrast",function(){var h=m.doc.createElement("div");try{h.style.cssText='border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("'+(y.blankGif||
B.toUrl("./resources/blank.gif"))+'");';m.body().appendChild(h);var f=u.getComputedStyle(h),d=f.backgroundImage;return f.borderTopColor==f.borderRightColor||d&&("none"==d||"url(invalid-url:)"==d)}catch(a){return console.warn("hccss: exception detecting high-contrast mode, document is likely hidden: "+a.toString()),!1}finally{8>=q("ie")?h.outerHTML="":m.body().removeChild(h)}});l(function(){q("highcontrast")&&c.add(m.body(),"dj_a11y")});return q})},"dijit/_base/window":function(){define(["dojo/window",
"../main"],function(B,y){y.getDocumentWindow=function(c){return B.get(c)}})},"dijit/form/DropDownButton":function(){define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/query ../registry ../popup ./Button ../_Container ../_HasDropDown dojo/text!./templates/DropDownButton.html ../a11yclick".split(" "),function(B,y,c,u,q,l,m,h,f,d){return B("dijit.form.DropDownButton",[m,h,f],{baseClass:"dijitDropDownButton",templateString:d,_fillContent:function(){var a=this.srcNodeRef,b=this.containerNode;
if(a&&b)for(;a.hasChildNodes();){var e=a.firstChild;e.hasAttribute&&(e.hasAttribute("data-dojo-type")||e.hasAttribute("dojoType")||e.hasAttribute("data-"+y._scopeName+"-type")||e.hasAttribute(y._scopeName+"Type"))?(this.dropDownContainer=this.ownerDocument.createElement("div"),this.dropDownContainer.appendChild(e)):b.appendChild(e)}},startup:function(){this._started||(!this.dropDown&&this.dropDownContainer&&(this.dropDown=q.byNode(this.dropDownContainer.firstChild),delete this.dropDownContainer),
this.dropDown&&l.hide(this.dropDown),this.inherited(arguments))},isLoaded:function(){var a=this.dropDown;return!!a&&(!a.href||a.isLoaded)},loadDropDown:function(a){var b=this.dropDown,e=b.on("load",c.hitch(this,function(){e.remove();a()}));b.refresh()},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown}})})},"dijit/form/Button":function(){define("require dojo/_base/declare dojo/dom-class dojo/has dojo/_base/kernel dojo/_base/lang dojo/ready ./_FormWidget ./_ButtonMixin dojo/text!./templates/Button.html ../a11yclick".split(" "),
function(B,y,c,u,q,l,m,h,f,d){u("dijit-legacy-requires")&&m(0,function(){B(["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"])});m=y("dijit.form.Button"+(u("dojo-bidi")?"_NoBidi":""),[h,f],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:d,_setValueAttr:"valueNode",_setNameAttr:function(a){this.valueNode&&this.valueNode.setAttribute("name",a)},postCreate:function(){this.inherited(arguments);
this._setLabelFromContainer()},_setLabelFromContainer:function(){this.containerNode&&!this.label&&(this.label=l.trim(this.containerNode.innerHTML),this.onLabelSet())},_setShowLabelAttr:function(a){this.containerNode&&c.toggle(this.containerNode,"dijitDisplayNone",!a);this._set("showLabel",a)},setLabel:function(a){q.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",a)},onLabelSet:function(){this.inherited(arguments);this.showLabel||
"title"in this.params||(this.titleNode.title=l.trim(this.containerNode.innerText||this.containerNode.textContent||""))}});u("dojo-bidi")&&(m=y("dijit.form.Button",m,{onLabelSet:function(){this.inherited(arguments);this.titleNode.title&&this.applyTextDir(this.titleNode,this.titleNode.title)},_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this._setLabelAttr(this.label))}}));return m})},"dijit/form/_FormWidget":function(){define("dojo/_base/declare dojo/sniff dojo/_base/kernel dojo/ready ../_Widget ../_CssStateMixin ../_TemplatedMixin ./_FormWidgetMixin".split(" "),
function(B,y,c,u,q,l,m,h){y("dijit-legacy-requires")&&u(0,function(){require(["dijit/form/_FormValueWidget"])});return B("dijit.form._FormWidget",[q,m,l,h],{setDisabled:function(f){c.deprecated("setDisabled("+f+") is deprecated. Use set('disabled',"+f+") instead.","","2.0");this.set("disabled",f)},setValue:function(f){c.deprecated("dijit.form._FormWidget:setValue("+f+") is deprecated.  Use set('value',"+f+") instead.","","2.0");this.set("value",f)},getValue:function(){c.deprecated(this.declaredClass+
"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name&&!y("msapp")?'name\x3d"'+this.name.replace(/"/g,"\x26quot;")+'"':"";this.inherited(arguments)}})})},"dijit/_Widget":function(){define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),
function(B,y,c,u,q,l,m,h,f,d,a,b,e){function r(){}function t(g){return function(k,x,v,A){return k&&"string"==typeof x&&k[x]==r?k.on(x.substring(2).toLowerCase(),m.hitch(v,A)):g.apply(c,arguments)}}B.around(c,"connect",t);l.connect&&B.around(l,"connect",t);B=u("dijit._Widget",[a,b,e],{onClick:r,onDblClick:r,onKeyDown:r,onKeyPress:r,onKeyUp:r,onMouseDown:r,onMouseMove:r,onMouseOut:r,onMouseOver:r,onMouseLeave:r,onMouseEnter:r,onMouseUp:r,constructor:function(g){this._toConnect={};for(var k in g)this[k]===
r&&(this._toConnect[k.replace(/^on/,"").toLowerCase()]=g[k],delete g[k])},postCreate:function(){this.inherited(arguments);for(var g in this._toConnect)this.on(g,this._toConnect[g]);delete this._toConnect},on:function(g,k){return this[this._onMap(g)]===r?c.connect(this.domNode,g.toLowerCase(),this,k):this.inherited(arguments)},_setFocusedAttr:function(g){this._focused=g;this._set("focused",g)},setAttribute:function(g,k){l.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.",
"","2.0");this.set(g,k)},attr:function(g,k){return 2<=arguments.length||"object"===typeof g?this.set.apply(this,arguments):this.get(g)},getDescendants:function(){l.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?h("[widgetId]",this.containerNode).map(d.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});q("dijit-legacy-requires")&&f(0,function(){require(["dijit/_base"])});
return B})},"dijit/_WidgetBase":function(){define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable dojo/has!dojo-bidi?./_BidiMixin ./registry".split(" "),function(B,y,c,u,q,l,m,h,f,d,a,b,e,r,t,g,k,x,v,A,n,w,p){function D(G){return function(z){h[z?
"set":"remove"](this.domNode,G,z);this._set(G,z)}}e.add("dijit-legacy-requires",!r.isAsync);e.add("dojo-bidi",!1);e("dijit-legacy-requires")&&k(0,function(){B(["dijit/_base/manager"])});var C={};u=l("dijit._WidgetBase",[x,n],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:D("lang"),dir:"",_setDirAttr:D("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(G){this._set("ownerDocument",
G)},attributeMap:{},_blankGif:u.blankGif||B.toUrl("dojo/resources/blank.gif"),textDir:"",_introspect:function(){var G=this.constructor;if(!G._setterAttrs){var z=G.prototype,E=G._setterAttrs=[];G=G._onMap={};for(var H in z.attributeMap)E.push(H);for(H in z)/^on/.test(H)&&(G[H.substring(2).toLowerCase()]=H),/^_set[A-Z](.*)Attr$/.test(H)&&(H=H.charAt(4).toLowerCase()+H.substr(5,H.length-9),z.attributeMap&&H in z.attributeMap||E.push(H))}},postscript:function(G,z){this.create(G,z)},create:function(G,
z){this._introspect();this.srcNodeRef=m.byId(z);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&this.srcNodeRef.id&&"string"==typeof this.srcNodeRef.id&&(this.id=this.srcNodeRef.id);G&&(this.params=G,t.mixin(this,G));this.postMixInProperties();this.id||(this.id=p.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=A.body(this.ownerDocument);
p.add(this);this.buildRendering();if(this.domNode){this._applyAttributes();if((G=this.srcNodeRef)&&G.parentNode&&this.domNode!==G){G.parentNode.replaceChild(this.domNode,G);var E=!0}this.domNode.setAttribute("widgetId",this.id)}this.postCreate();E&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var G={},z;for(z in this.params||{})G[z]=this._get(z);y.forEach(this.constructor._setterAttrs,function(E){if(!(E in G)){var H=this._get(E);H&&this.set(E,H)}},this);for(z in G)this.set(z,
G[z])},postMixInProperties:function(){},buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var G=this.baseClass.split(" ");this.isLeftToRight()||(G=G.concat(y.map(G,function(z){return z+"Rtl"})));f.add(this.domNode,G)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,y.forEach(this.getChildren(),function(G){G._started||G._destroyed||!t.isFunction(G.startup)||(G.startup(),G._started=!0)}))},
destroyRecursive:function(G){this._beingDestroyed=!0;this.destroyDescendants(G);this.destroy(G)},destroy:function(G){function z(E){E.destroyRecursive?E.destroyRecursive(G):E.destroy&&E.destroy(G)}this._beingDestroyed=!0;this.uninitialize();y.forEach(this._connects,t.hitch(this,"disconnect"));y.forEach(this._supportingWidgets,z);this.domNode&&y.forEach(p.findWidgets(this.domNode,this.containerNode),z);this.destroyRendering(G);p.remove(this.id);this._destroyed=!0},destroyRendering:function(G){this.bgIframe&&
(this.bgIframe.destroy(G),delete this.bgIframe);this.domNode&&(G?h.remove(this.domNode,"widgetId"):d.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(G||d.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(G){y.forEach(this.getChildren(),function(z){z.destroyRecursive&&z.destroyRecursive(G)})},uninitialize:function(){return!1},_setStyleAttr:function(G){var z=this.domNode;t.isObject(G)?b.set(z,G):z.style.cssText=z.style.cssText?z.style.cssText+("; "+G):G;this._set("style",
G)},_attrToDom:function(G,z,E){E=3<=arguments.length?E:this.attributeMap[G];y.forEach(t.isArray(E)?E:[E],function(H){var I=this[H.node||H||"domNode"];switch(H.type||"attribute"){case "attribute":t.isFunction(z)&&(z=t.hitch(this,z));H=H.attribute?H.attribute:/^on[A-Z][a-zA-Z]*$/.test(G)?G.toLowerCase():G;I.tagName?h.set(I,H,z):I.set(H,z);break;case "innerText":I.innerHTML="";I.appendChild(this.ownerDocument.createTextNode(z));break;case "textContent":I.textContent=z;break;case "innerHTML":I.innerHTML=
z;break;case "class":f.replace(I,z,this[G]);break;case "toggleClass":f.toggle(I,H.className||G,z)}},this)},get:function(G){var z=this._getAttrNames(G);return this[z.g]?this[z.g]():this._get(G)},set:function(G,z){if("object"===typeof G){for(var E in G)this.set(E,G[E]);return this}E=this._getAttrNames(G);var H=this[E.s];if(t.isFunction(H))var I=H.apply(this,Array.prototype.slice.call(arguments,1));else{H=this.focusNode&&!t.isFunction(this.focusNode)?"focusNode":"domNode";var M=this[H]&&this[H].tagName,
T;if((T=M)&&!(T=C[M])){T=this[H];var Y={};for(fa in T)Y[fa.toLowerCase()]=!0;T=C[M]=Y}var fa=T;E=G in this.attributeMap?this.attributeMap[G]:E.s in this?this[E.s]:fa&&E.l in fa&&"function"!=typeof z||/^aria-|^data-|^role$/.test(G)?H:null;null!=E&&this._attrToDom(G,z,E);this._set(G,z)}return I||this},_attrPairNames:{},_getAttrNames:function(G){var z=this._attrPairNames;if(z[G])return z[G];var E=G.replace(/^[a-z]|-[a-zA-Z]/g,function(H){return H.charAt(H.length-1).toUpperCase()});return z[G]={n:G+"Node",
s:"_set"+E+"Attr",g:"_get"+E+"Attr",l:E.toLowerCase()}},_set:function(G,z){var E=this[G];this[G]=z;!this._created||E===z||E!==E&&z!==z||(this._watchCallbacks&&this._watchCallbacks(G,E,z),this.emit("attrmodified-"+G,{detail:{prevValue:E,newValue:z}}))},_get:function(G){return this[G]},emit:function(G,z,E){z=z||{};void 0===z.bubbles&&(z.bubbles=!0);void 0===z.cancelable&&(z.cancelable=!0);z.detail||(z.detail={});z.detail.widget=this;var H,I=this["on"+G];I&&(H=I.apply(this,E?E:[z]));this._started&&!this._beingDestroyed&&
g.emit(this.domNode,G.toLowerCase(),z);return H},on:function(G,z){var E=this._onMap(G);return E?c.after(this,E,z,!0):this.own(g(this.domNode,G,z))[0]},_onMap:function(G){var z=this.constructor,E=z._onMap;if(!E){E=z._onMap={};for(var H in z.prototype)/^on/.test(H)&&(E[H.replace(/^on/,"").toLowerCase()]=H)}return E["string"==typeof G&&G.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?p.findWidgets(this.containerNode):
[]},getParent:function(){return p.getEnclosingWidget(this.domNode.parentNode)},connect:function(G,z,E){return this.own(q.connect(G,z,this,E))[0]},disconnect:function(G){G.remove()},subscribe:function(G,z){return this.own(v.subscribe(G,t.hitch(this,z)))[0]},unsubscribe:function(G){G.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():a.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=b.get(this.domNode,"display")},placeAt:function(G,z){var E=
!G.tagName&&p.byId(G);!E||!E.addChild||z&&"number"!==typeof z?(G=E&&"domNode"in E?E.containerNode&&!/after|before|replace/.test(z||"")?E.containerNode:E.domNode:m.byId(G,this.ownerDocument),d.place(this.domNode,G,z),!this._started&&(this.getParent()||{})._started&&this.startup()):E.addChild(this,z);return this},defer:function(G,z){var E=setTimeout(t.hitch(this,function(){E&&(E=null,this._destroyed||t.hitch(this,G)())}),z||0);return{remove:function(){E&&(clearTimeout(E),E=null);return null}}}});e("dojo-bidi")&&
u.extend(w);return u})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(B,y,c){return c("dijit.Destroyable",null,{destroy:function(u){this._destroyed=!0},own:function(){var u=["destroyRecursive","destroy","remove"];B.forEach(arguments,function(q){function l(){m.remove();B.forEach(h,function(d){d.remove()})}var m=y.before(this,"destroy",function(d){q[f](d)}),h=[];if(q.then){var f="cancel";q.then(l,l)}else B.forEach(u,function(d){"function"===typeof q[d]&&
(f||(f=d),h.push(y.after(q,d,l,!0)))})},this);return arguments}})})},"dijit/_OnDijitClickMixin":function(){define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),function(B,y,c,u,q,l){B=u("dijit._OnDijitClickMixin",null,{connect:function(m,h,f){return this.inherited(arguments,[m,"ondijitclick"==h?l:h,f])}});B.a11yclick=l;return B})},"dijit/a11yclick":function(){define(["dojo/keys","dojo/mouse","dojo/on","dojo/touch"],function(B,y,c,u){function q(h){if((h.keyCode===
B.ENTER||h.keyCode===B.SPACE)&&!/input|button|textarea/i.test(h.target.nodeName))for(h=h.target;h;h=h.parentNode)if(h.dojoClick)return!0}var l;c(document,"keydown",function(h){q(h)?(l=h.target,h.preventDefault()):l=null});c(document,"keyup",function(h){q(h)&&h.target==l&&(l=null,c.emit(h.target,"click",{cancelable:!0,bubbles:!0,ctrlKey:h.ctrlKey,shiftKey:h.shiftKey,metaKey:h.metaKey,altKey:h.altKey,_origType:h.type}))});var m=function(h,f){h.dojoClick=!0;return c(h,"click",f)};m.click=m;m.press=function(h,
f){var d=c(h,u.press,function(b){("mousedown"!=b.type||y.isLeft(b))&&f(b)}),a=c(h,"keydown",function(b){b.keyCode!==B.ENTER&&b.keyCode!==B.SPACE||f(b)});return{remove:function(){d.remove();a.remove()}}};m.release=function(h,f){var d=c(h,u.release,function(b){("mouseup"!=b.type||y.isLeft(b))&&f(b)}),a=c(h,"keyup",function(b){b.keyCode!==B.ENTER&&b.keyCode!==B.SPACE||f(b)});return{remove:function(){d.remove();a.remove()}}};m.move=u.move;return m})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase",
"dojo/_base/declare","dojo/_base/lang"],function(B,y,c,u){u.extend(y,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return c("dijit._FocusMixin",null,{_focusManager:B})})},"dijit/_CssStateMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-class dojo/has dojo/_base/lang dojo/on dojo/domReady dojo/touch dojo/_base/window ./a11yclick ./registry".split(" "),function(B,y,c,u,q,l,m,h,f,d,a,b){y=y("dijit._CssStateMixin",
[],{hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments);B.forEach("disabled readOnly checked selected focused state hovering active _opened".split(" "),function(r){this.watch(r,l.hitch(this,"_setStateClass"))},this);for(var e in this.cssStateNodes||{})this._trackMouseState(this[e],this.cssStateNodes[e]);this._trackMouseState(this.domNode,this.baseClass);this._setStateClass()},_cssMouseEvent:function(e){if(!this.disabled)switch(e.type){case "mouseover":case "MSPointerOver":case "pointerover":this._set("hovering",
!0);this._set("active",this._mouseDown);break;case "mouseout":case "MSPointerOut":case "pointerout":this._set("hovering",!1);this._set("active",!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":this._set("active",!0);break;case "mouseup":case "dojotouchend":case "MSPointerUp":case "pointerup":case "keyup":this._set("active",!1)}},_setStateClass:function(){function e(v){r=r.concat(B.map(r,function(A){return A+v}),"dijit"+v)}var r=this.baseClass.split(" ");
this.isLeftToRight()||e("Rtl");var t="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&e(t);this.state&&e(this.state);this.selected&&e("Selected");this._opened&&e("Opened");this.disabled?e("Disabled"):this.readOnly?e("ReadOnly"):this.active?e("Active"):this.hovering&&e("Hover");this.focused&&e("Focused");t=this.stateNode||this.domNode;var g={};B.forEach(t.className.split(" "),function(v){g[v]=!0});"_stateClasses"in this&&B.forEach(this._stateClasses,function(v){delete g[v]});B.forEach(r,
function(v){g[v]=!0});var k=[],x;for(x in g)k.push(x);t.className=k.join(" ");this._stateClasses=r},_subnodeCssMouseEvent:function(e,r,t){function g(k){u.toggle(e,r+"Active",k)}if(!this.disabled&&!this.readOnly)switch(t.type){case "mouseover":case "MSPointerOver":case "pointerover":u.toggle(e,r+"Hover",!0);break;case "mouseout":case "MSPointerOut":case "pointerout":u.toggle(e,r+"Hover",!1);g(!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":g(!0);
break;case "mouseup":case "MSPointerUp":case "pointerup":case "dojotouchend":case "keyup":g(!1);break;case "focus":case "focusin":u.toggle(e,r+"Focused",!0);break;case "blur":case "focusout":u.toggle(e,r+"Focused",!1)}},_trackMouseState:function(e,r){e._cssState=r}});h(function(){function e(g,k,x){if(!x||!c.isDescendant(x,k))for(;k&&k!=x;k=k.parentNode)if(k._cssState){var v=b.getEnclosingWidget(k);v&&(k==v.domNode?v._cssMouseEvent(g):v._subnodeCssMouseEvent(k,k._cssState,g))}}var r=d.body(),t;m(r,
f.over,function(g){e(g,g.target,g.relatedTarget)});m(r,f.out,function(g){e(g,g.target,g.relatedTarget)});m(r,a.press,function(g){t=g.target;e(g,t)});m(r,a.release,function(g){e(g,t);t=null});m(r,"focusin, focusout",function(g){var k=g.target;if(k._cssState&&!k.getAttribute("widgetId")){var x=b.getEnclosingWidget(k);x&&x._subnodeCssMouseEvent(k,k._cssState,g)}})});return y})},"dijit/_TemplatedMixin":function(){define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),
function(B,y,c,u,q,l,m,h){var f=y("dijit._TemplatedMixin",h,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,_stringRepl:function(d){var a=this.declaredClass,b=this;return m.substitute(d,this,function(e,r){"!"==r.charAt(0)&&(e=u.getObject(r.substr(1),!1,b));if("undefined"==typeof e)throw Error(a+" template:"+r);return null==e?"":"!"==r.charAt(0)?e:this._escapeValue(""+e)},this)},_escapeValue:function(d){return d.replace(/["'<>&]/g,function(a){return{"\x26":"\x26amp;",
"\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}[a]})},buildRendering:function(){if(!this._rendered){this.templateString||(this.templateString=B(this.templatePath,{sanitize:!0}));var d=f.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument);if(u.isString(d)){var a=c.toDom(this._stringRepl(d),this.ownerDocument);if(1!=a.nodeType)throw Error("Invalid template: "+d);}else a=d.cloneNode(!0);this.domNode=a}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);
this._rendered=!0},_fillContent:function(d){var a=this.containerNode;if(d&&a)for(;d.hasChildNodes();)a.appendChild(d.firstChild)}});f._templateCache={};f.getCachedTemplate=function(d,a,b){var e=f._templateCache,r=d,t=e[r];if(t){try{if(!t.ownerDocument||t.ownerDocument==(b||document))return t}catch(g){}c.destroy(t)}d=m.trim(d);if(a||d.match(/\$\{([^\}]+)\}/g))return e[r]=d;a=c.toDom(d,b);if(1!=a.nodeType)throw Error("Invalid template: "+d);return e[r]=a};l("ie")&&q(window,"unload",function(){var d=
f._templateCache,a;for(a in d){var b=d[a];"object"==typeof b&&c.destroy(b);delete d[a]}});return f})},"dojo/cache":function(){define(["./_base/kernel","./text"],function(B){return B.cache})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(B,y){var c=/[&<>'"\/]/g,u={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","/":"\x26#x2F;"},q={};y.setObject("dojo.string",q);q.escape=function(l){return l?l.replace(c,function(m){return u[m]}):""};q.rep=
function(l,m){if(0>=m||!l)return"";for(var h=[];;){m&1&&h.push(l);if(!(m>>=1))break;l+=l}return h.join("")};q.pad=function(l,m,h,f){h||(h="0");l=String(l);m=q.rep(h,Math.ceil((m-l.length)/h.length));return f?l+m:m+l};q.substitute=function(l,m,h,f){f=f||B.global;h=h?y.hitch(f,h):function(d){return d};return l.replace(/\$\{([^\s:\}]*)(?::([^\s:\}]+))?\}/g,function(d,a,b){if(""==a)return"$";d=y.getObject(a,!1,m);b&&(d=y.getObject(b,!1,f).call(f,d,a));b=h(d,a);if("undefined"===typeof b)throw Error('string.substitute could not find key "'+
a+'" in template');return b.toString()})};q.trim=String.prototype.trim?y.trim:function(l){l=l.replace(/^\s+/,"");for(var m=l.length-1;0<=m;m--)if(/\S/.test(l.charAt(m))){l=l.substring(0,m+1);break}return l};return q})},"dijit/_AttachMixin":function(){define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),function(B,y,c,u,q,l,m,h,f){var d=q.delegate(h,{mouseenter:l.enter,mouseleave:l.leave,keypress:c._keypress}),
a;c=u("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(b){for(var e=b;;)if(1==e.nodeType&&(this._processTemplateNode(e,function(r,t){return r.getAttribute(t)},this._attach)||this.searchContainerNode)&&e.firstChild)e=e.firstChild;else{if(e==b)break;for(;!e.nextSibling;)if(e=
e.parentNode,e==b)return;e=e.nextSibling}},_processTemplateNode:function(b,e,r){var t=!0,g=this.attachScope||this,k=e(b,"dojoAttachPoint")||e(b,"data-dojo-attach-point");if(k)for(var x=k.split(/\s*,\s*/);k=x.shift();)q.isArray(g[k])?g[k].push(b):g[k]=b,t="containerNode"!=k,this._attachPoints.push(k);if(e=e(b,"dojoAttachEvent")||e(b,"data-dojo-attach-event"))for(k=e.split(/\s*,\s*/),x=q.trim;e=k.shift();)if(e){var v=null;-1!=e.indexOf(":")?(v=e.split(":"),e=x(v[0]),v=x(v[1])):e=x(e);v||(v=e);this._attachEvents.push(r(b,
e,q.hitch(g,v)))}return t},_attach:function(b,e,r){e=e.replace(/^on/,"").toLowerCase();e="dijitclick"==e?a||(a=B("./a11yclick")):d[e]||e;return m(b,e,r)},_detachTemplateNodes:function(){var b=this.attachScope||this;y.forEach(this._attachPoints,function(e){delete b[e]});this._attachPoints=[];y.forEach(this._attachEvents,function(e){e.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();this.inherited(arguments)}});q.extend(f,{dojoAttachEvent:"",dojoAttachPoint:""});
return c})},"dijit/form/_FormWidgetMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff dojo/window ../a11y".split(" "),function(B,y,c,u,q,l,m,h,f,d){return y("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(a){this._set("disabled",
a);/^(button|input|select|textarea|optgroup|option|fieldset)$/i.test(this.focusNode.tagName)?(c.set(this.focusNode,"disabled",a),h("trident")&&"readOnly"in this&&c.set(this.focusNode,"readonly",a||this.readOnly)):this.focusNode.setAttribute("aria-disabled",a?"true":"false");this.valueNode&&c.set(this.valueNode,"disabled",a);a?(this._set("hovering",!1),this._set("active",!1),a="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode",B.forEach(q.isArray(a)?
a:[a],function(b){b=this[b];h("webkit")||d.hasDefaultTabStop(b)?b.setAttribute("tabIndex","-1"):b.removeAttribute("tabIndex")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(a){if("mouse"==a&&this.isFocusable())var b=this.own(m(this.focusNode,"focus",function(){r.remove();b.remove()}))[0],e=h("pointer-events")?"pointerup":h("MSPointer")?"MSPointerUp":h("touch-events")?"touchend, mouseup":"mouseup",r=this.own(m(this.ownerDocumentBody,e,q.hitch(this,function(t){r.remove();
b.remove();this.focused&&("touchend"==t.type?this.defer("focus"):this.focus())})))[0];this.scrollOnFocus&&this.defer(function(){f.scrollIntoView(this.domNode)});this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=u.get(this.domNode,"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(a){}},compare:function(a,b){return"number"==typeof a&&"number"==typeof b?isNaN(a)&&isNaN(b)?0:a-b:a>b?1:a<b?-1:0},onChange:function(){},
_onChangeActive:!1,_handleOnChange:function(a,b){void 0!=this._lastValueReported||null!==b&&this._onChangeActive||(this._resetValue=this._lastValueReported=a);this._pendingOnChange=this._pendingOnChange||typeof a!=typeof this._lastValueReported||0!=this.compare(a,this._lastValueReported);(this.intermediateChanges||b||void 0===b)&&this._pendingOnChange&&(this._lastValueReported=a,this._pendingOnChange=!1,this._onChangeActive&&(this._onChangeHandle&&this._onChangeHandle.remove(),this._onChangeHandle=
this.defer(function(){this._onChangeHandle=null;this.onChange(a)})))},create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported));this.inherited(arguments)}})})},"dijit/form/_ButtonMixin":function(){define(["dojo/_base/declare","dojo/dom","dojo/has","../registry"],function(B,y,c,u){var q=B("dijit.form._ButtonMixin"+(c("dojo-bidi")?"_NoBidi":""),null,{label:"",type:"button",__onClick:function(l){l.stopPropagation();
l.preventDefault();this.disabled||this.valueNode.click(l);return!1},_onClick:function(l){if(this.disabled)return l.stopPropagation(),l.preventDefault(),!1;!1===this.onClick(l)&&l.preventDefault();var m=l.defaultPrevented;if(!m&&"submit"==this.type&&!(this.valueNode||this.focusNode).form)for(var h=this.domNode;h.parentNode;h=h.parentNode){var f=u.byNode(h);if(f&&"function"==typeof f._onSubmit){f._onSubmit(l);l.preventDefault();m=!0;break}}return!m},postCreate:function(){this.inherited(arguments);y.setSelectable(this.focusNode,
!1)},onClick:function(){return!0},_setLabelAttr:function(l){this._set("label",l);(this.containerNode||this.focusNode).innerHTML=l;this.onLabelSet()},onLabelSet:function(){}});c("dojo-bidi")&&(q=B("dijit.form._ButtonMixin",q,{onLabelSet:function(){this.inherited(arguments);this.applyTextDir(this.containerNode||this.focusNode)}}));return q})},"dijit/_Container":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],function(B,y,c,u){return y("dijit._Container",
null,{buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode)},addChild:function(q,l){var m=this.containerNode;if(0<l){for(m=m.firstChild;0<l;)1==m.nodeType&&l--,m=m.nextSibling;m?l="before":(m=this.containerNode,l="last")}c.place(q.domNode,m,l);this._started&&!q._started&&q.startup()},removeChild:function(q){"number"==typeof q&&(q=this.getChildren()[q]);q&&(q=q.domNode)&&q.parentNode&&q.parentNode.removeChild(q)},hasChildren:function(){return 0<this.getChildren().length},
_getSiblingOfChild:function(q,l){var m=this.getChildren();q=B.indexOf(m,q);return m[q+l]},getIndexOfChild:function(q){return B.indexOf(this.getChildren(),q)}})})},"dijit/_HasDropDown":function(){define("dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on dojo/touch ./registry ./focus ./popup ./_FocusMixin".split(" "),function(B,y,c,u,q,l,m,h,f,d,a,b,e,r,t,g){return B("dijit._HasDropDown",g,{_buttonNode:null,
_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:!0,forceWidth:!1,maxHeight:-1,dropDownPosition:["below","above"],_stopClickEvents:!0,_onDropDownMouseDown:function(k){this.disabled||this.readOnly||("MSPointerDown"!=k.type&&k.preventDefault(),this.own(a.once(this.ownerDocument,b.release,d.hitch(this,"_onDropDownMouseUp"))),this.toggleDropDown())},_onDropDownMouseUp:function(k){var x=this.dropDown,v=!1;if(k&&this._opened){var A=l.position(this._buttonNode,!0);if(!(k.pageX>=
A.x&&k.pageX<=A.x+A.w&&k.pageY>=A.y&&k.pageY<=A.y+A.h)){for(A=k.target;A&&!v;)q.contains(A,"dijitPopup")?v=!0:A=A.parentNode;if(v){A=k.target;if(x.onItemClick){for(var n;A&&!(n=e.byNode(A));)A=A.parentNode;if(n&&n.onClick&&n.getParent)n.getParent().onItemClick(n,k)}return}}}this._opened?x.focus&&(!1!==x.autoFocus||"mouseup"==k.type&&!this.hovering)&&(this._focusDropDownTimer=this.defer(function(){x.focus();delete this._focusDropDownTimer})):this.focus&&this.defer("focus")},_onDropDownClick:function(k){this._stopClickEvents&&
(k.stopPropagation(),k.preventDefault())},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var k={after:this.isLeftToRight()?"Right":"Left",before:this.isLeftToRight()?"Left":"Right",above:"Up",below:"Down",left:"Left",right:"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";q.add(this._arrowWrapperNode||this._buttonNode,"dijit"+k+"ArrowButton")},
postCreate:function(){this.inherited(arguments);var k=this.focusNode||this.domNode;this.own(a(this._buttonNode,b.press,d.hitch(this,"_onDropDownMouseDown")),a(this._buttonNode,"click",d.hitch(this,"_onDropDownClick")),a(k,"keydown",d.hitch(this,"_onKey")),a(k,"keyup",d.hitch(this,"_onKeyUp")))},destroy:function(){this._opened&&this.closeDropDown(!0);this.dropDown&&(this.dropDown._destroyed||this.dropDown.destroyRecursive(),delete this.dropDown);this.inherited(arguments)},_onKey:function(k){if(!this.disabled&&
!this.readOnly){var x=this.dropDown,v=k.target;x&&this._opened&&x.handleKey&&!1===x.handleKey(k)?(k.stopPropagation(),k.preventDefault()):x&&this._opened&&k.keyCode==f.ESCAPE?(this.closeDropDown(),k.stopPropagation(),k.preventDefault()):!this._opened&&(k.keyCode==f.DOWN_ARROW||(k.keyCode==f.ENTER||k.keyCode==f.SPACE&&(!this._searchTimer||k.ctrlKey||k.altKey||k.metaKey))&&("input"!==(v.tagName||"").toLowerCase()||v.type&&"text"!==v.type.toLowerCase()))&&(this._toggleOnKeyUp=!0,k.stopPropagation(),
k.preventDefault())}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;this.toggleDropDown();var k=this.dropDown;k&&k.focus&&this.defer(d.hitch(k,"focus"),1)}},_onBlur:function(){this.closeDropDown(!1);this.inherited(arguments)},isLoaded:function(){return!0},loadDropDown:function(k){k()},loadAndOpenDropDown:function(){var k=new y,x=d.hitch(this,function(){this.openDropDown();k.resolve(this.dropDown)});this.isLoaded()?x():this.loadDropDown(x);return k},toggleDropDown:function(){this.disabled||
this.readOnly||(this._opened?this.closeDropDown(!0):this.loadAndOpenDropDown())},openDropDown:function(){var k=this.dropDown,x=k.domNode,v=this._aroundNode||this.domNode,A=this,n=t.open({parent:this,popup:k,around:v,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){A.closeDropDown(!0)},onCancel:function(){A.closeDropDown(!0)},onClose:function(){u.set(A._popupStateNode,"popupActive",!1);q.remove(A._popupStateNode,"dijitHasDropDownOpen");A._set("_opened",!1)}});if(this.forceWidth||
this.autoWidth&&v.offsetWidth>k._popupWrapper.offsetWidth){v=v.offsetWidth-k._popupWrapper.offsetWidth;var w={w:k.domNode.offsetWidth+v};this._origStyle=x.style.cssText;d.isFunction(k.resize)?k.resize(w):l.setMarginBox(x,w);"R"==n.corner[1]&&(k._popupWrapper.style.left=k._popupWrapper.style.left.replace("px","")-v+"px")}u.set(this._popupStateNode,"popupActive","true");q.add(this._popupStateNode,"dijitHasDropDownOpen");this._set("_opened",!0);this._popupStateNode.setAttribute("aria-expanded","true");
this._popupStateNode.setAttribute("aria-owns",k.id);"presentation"===x.getAttribute("role")||x.getAttribute("aria-labelledby")||x.setAttribute("aria-labelledby",this.id);return n},closeDropDown:function(k){this._focusDropDownTimer&&(this._focusDropDownTimer.remove(),delete this._focusDropDownTimer);this._opened&&(this._popupStateNode.setAttribute("aria-expanded","false"),k&&this.focus&&this.focus(),t.close(this.dropDown),this._opened=!1);this._origStyle&&(this.dropDown.domNode.style.cssText=this._origStyle,
delete this._origStyle)}})})},"dijit/form/ComboButton":function(){define("dojo/_base/declare dojo/keys ../focus ./DropDownButton dojo/text!./templates/ComboButton.html ../a11yclick".split(" "),function(B,y,c,u,q){return B("dijit.form.ComboButton",u,{templateString:q,_setIdAttr:"",_setTabIndexAttr:["focusNode","titleNode"],_setTitleAttr:"titleNode",optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{buttonNode:"dijitButtonNode",titleNode:"dijitButtonContents",_popupStateNode:"dijitDownArrowButton"},
_focusedNode:null,_onButtonKeyDown:function(l){l.keyCode==y[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"]&&(c.focus(this._popupStateNode),l.stopPropagation(),l.preventDefault())},_onArrowKeyDown:function(l){l.keyCode==y[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"]&&(c.focus(this.titleNode),l.stopPropagation(),l.preventDefault())},focus:function(l){this.disabled||c.focus("start"==l?this.titleNode:this._popupStateNode)}})})},"dijit/form/ToggleButton":function(){define(["dojo/_base/declare","dojo/_base/kernel",
"./Button","./_ToggleButtonMixin"],function(B,y,c,u){return B("dijit.form.ToggleButton",[c,u],{baseClass:"dijitToggleButton",setChecked:function(q){y.deprecated("setChecked("+q+") is deprecated. Use set('checked',"+q+") instead.","","2.0");this.set("checked",q)}})})},"dijit/form/_ToggleButtonMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(B,y){return B("dijit.form._ToggleButtonMixin",null,{checked:!1,_aria_attr:"aria-pressed",_onClick:function(c){var u=this.checked;this._set("checked",
!u);var q=this.inherited(arguments);this.set("checked",q?this.checked:u);return q},_setCheckedAttr:function(c,u){this._set("checked",c);var q=this.focusNode||this.domNode;this._created&&y.get(q,"checked")!=!!c&&y.set(q,"checked",!!c);q.setAttribute(this._aria_attr,String(c));this._handleOnChange(c,u)},postCreate:function(){this.inherited(arguments);var c=this.focusNode||this.domNode;this.checked&&c.setAttribute("checked","checked");void 0===this._resetValue&&(this._lastValueReported=this._resetValue=
this.checked)},reset:function(){this._hasBeenBlurred=!1;this.set("checked",this.params.checked||!1)}})})},"dijit/TooltipDialog":function(){define("dojo/_base/declare dojo/dom-class dojo/has dojo/keys dojo/_base/lang dojo/on ./focus ./layout/ContentPane ./_DialogMixin ./form/_FormMixin ./_TemplatedMixin dojo/text!./templates/TooltipDialog.html ./main".split(" "),function(B,y,c,u,q,l,m,h,f,d,a,b,e){B=B("dijit.TooltipDialog",[h,a,d,f],{title:"",doLayout:!1,autofocus:!0,baseClass:"dijitTooltipDialog",
_firstFocusItem:null,_lastFocusItem:null,templateString:b,_setTitleAttr:"containerNode",postCreate:function(){this.inherited(arguments);this.own(l(this.domNode,"keydown",q.hitch(this,"_onKey")))},orient:function(r,t,g){r={"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight",
"BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft","BR-TL":"dijitTooltipBelow dijitTooltipABLeft","BL-TR":"dijitTooltipBelow dijitTooltipABRight","TL-BR":"dijitTooltipAbove dijitTooltipABRight","TR-BL":"dijitTooltipAbove dijitTooltipABLeft"}[t+"-"+g];y.replace(this.domNode,r,this._currentOrientClass||"");this._currentOrientClass=r},focus:function(){this._getFocusItems();m.focus(this._firstFocusItem)},onOpen:function(r){this.orient(this.domNode,r.aroundCorner,r.corner);var t=r.aroundNodePos;"M"==
r.corner.charAt(0)&&"M"==r.aroundCorner.charAt(0)?(this.connectorNode.style.top=t.y+(t.h-this.connectorNode.offsetHeight>>1)-r.y+"px",this.connectorNode.style.left=""):"M"==r.corner.charAt(1)&&"M"==r.aroundCorner.charAt(1)&&(this.connectorNode.style.left=t.x+(t.w-this.connectorNode.offsetWidth>>1)-r.x+"px");this._onShow()},onClose:function(){this.onHide()},_onKey:function(r){if(r.keyCode==u.ESCAPE)this.defer("onCancel"),r.stopPropagation(),r.preventDefault();else if(r.keyCode==u.TAB){var t=r.target;
this._getFocusItems();this._firstFocusItem==this._lastFocusItem?(r.stopPropagation(),r.preventDefault()):t==this._firstFocusItem&&r.shiftKey?(m.focus(this._lastFocusItem),r.stopPropagation(),r.preventDefault()):t!=this._lastFocusItem||r.shiftKey?r.stopPropagation():(m.focus(this._firstFocusItem),r.stopPropagation(),r.preventDefault())}}});c("dojo-bidi")&&B.extend({_setTitleAttr:function(r){this.containerNode.title=this.textDir&&this.enforceTextDirWithUcc?this.enforceTextDirWithUcc(null,r):r;this._set("title",
r)},_setTextDirAttr:function(r){this._created&&this.textDir==r||(this._set("textDir",r),this.textDir&&this.title&&(this.containerNode.title=this.enforceTextDirWithUcc(null,this.title)))}});return B})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),
function(B,y,c,u,q,l,m,h,f,d,a,b,e,r,t,g){return f("dijit.layout.ContentPane",[c,u,q],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:B._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",
isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(k,x,v){var A=new v(k,x);return!A.href&&A._contentSetter&&A._contentSetter.parseDeferred&&!A._contentSetter.parseDeferred.isFulfilled()?A._contentSetter.parseDeferred.then(function(){return A}):A},create:function(k,x){if(!(k&&k.template||!x||"href"in k||"content"in k)){x=a.byId(x);for(var v=x.ownerDocument.createDocumentFragment();x.firstChild;)v.appendChild(x.firstChild);
k=y.delegate(k,{content:v})}this.inherited(arguments,[k,x])},postMixInProperties:function(){this.inherited(arguments);var k=t.getLocalization("dijit","loading",this.lang);this.loadingMessage=l.substitute(this.loadingMessage,k);this.errorMessage=l.substitute(this.errorMessage,k)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&h.forEach(this._contentSetter.parseResults,
function(k){k._started||k._destroyed||!y.isFunction(k.startup)||(k.startup(),k._started=!0)},this)},_startChildren:function(){h.forEach(this.getChildren(),function(k){k._started||k._destroyed||!y.isFunction(k.startup)||(k.startup(),k._started=!0)});this._contentSetter&&h.forEach(this._contentSetter.parseResults,function(k){k._started||k._destroyed||!y.isFunction(k.startup)||(k.startup(),k._started=!0)},this)},setHref:function(k){B.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.",
"","2.0");return this.set("href",k)},_setHrefAttr:function(k){this.cancel();this.onLoadDeferred=new d(y.hitch(this,"cancel"));this.onLoadDeferred.then(y.hitch(this,"onLoad"));this._set("href",k);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(k){B.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",k)},_setContentAttr:function(k){this._set("href",
"");this.cancel();this.onLoadDeferred=new d(y.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(y.hitch(this,"onLoad"));this._setContent(k||"");this._isDownloaded=!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(k){this._beingDestroyed||
this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},refresh:function(){this.cancel();this.onLoadDeferred=new d(y.hitch(this,"cancel"));this.onLoadDeferred.then(y.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var k=this,x={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};
y.isObject(this.ioArgs)&&y.mixin(x,this.ioArgs);var v=this._xhrDfd=(this.ioMethod||r.get)(x),A;v.then(function(n){A=n;try{return k._isDownloaded=!0,k._setContent(n,!1)}catch(w){k._onError("Content",w)}},function(n){v.canceled||k._onError("Download",n);delete k._xhrDfd;return n}).then(function(){k.onDownloadEnd();delete k._xhrDfd;return A});delete this._hrefChanged},_onLoadHandler:function(k){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(k)}catch(x){console.error("Error "+(this.widgetId||
this.id)+" running custom onLoad code: "+x.message)}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(k){console.error("Error "+this.widgetId+" running custom onUnload code: "+k.message)}},destroyDescendants:function(k){this.isLoaded&&this._onUnloadHandler();var x=this._contentSetter;h.forEach(this.getChildren(),function(v){v.destroyRecursive?v.destroyRecursive(k):v.destroy&&v.destroy(k);v._destroyed=!0});x&&(h.forEach(x.parseResults,function(v){v._destroyed||(v.destroyRecursive?
v.destroyRecursive(k):v.destroy&&v.destroy(k),v._destroyed=!0)}),delete x.parseResults);k||e.empty(this.containerNode);delete this._singleChild},_setContent:function(k,x){k=this.preprocessContent(k);this.destroyDescendants();var v=this._contentSetter;v&&v instanceof m._ContentSetter||(v=this._contentSetter=new m._ContentSetter({node:this.containerNode,_onError:y.hitch(this,this._onError),onContentError:y.hitch(this,function(w){w=this.onContentError(w);try{this.containerNode.innerHTML=w}catch(p){console.error("Fatal "+
this.id+" could not change content due to "+p.message,p)}})}));var A=y.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!k.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{});A=v.set(y.isObject(k)&&k.domNode?k.domNode:k,A);var n=this;return g(A&&A.then?A:v.parseDeferred,function(){delete n._contentSetterParams;x||(n._started&&(n._startChildren(),n._scheduleLayout()),
n._onLoadHandler(k))})},preprocessContent:function(k){return k},_onError:function(k,x,v){this.onLoadDeferred.reject(x);k=this["on"+k+"Error"].call(this,x);v?console.error(v,x):k&&this._setContent(k,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),
function(B,y,c,u,q,l,m,h,f,d){return y("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var a=this.getParent();this._childOfLayoutWidget=a&&a.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(f.on("resize",l.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var a=[],b=!1;m("\x3e *",this.containerNode).some(function(e){var r=
h.byNode(e);r&&r.resize?a.push(r):!/script|link|style/i.test(e.nodeName)&&e.offsetHeight&&(b=!0)});this._singleChild=1!=a.length||b?null:a[0];c.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(a,b){this._resizeCalled=!0;this._scheduleLayout(a,b)},_scheduleLayout:function(a,b){this._isShown()?this._layout(a,b):(this._needLayout=!0,this._changeSize=a,this._resultSize=b)},_layout:function(a,b){delete this._needLayout;this._wasShown||!1===this.open||this._onShow();
a&&u.setMarginBox(this.domNode,a);var e=this.containerNode;e===this.domNode?(b=b||{},l.mixin(b,a||{}),"h"in b&&"w"in b||(b=l.mixin(u.getMarginBox(e),b)),this._contentBox=d.marginBox2contentBox(e,b)):this._contentBox=u.getContentBox(e);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var a=this._contentBox||u.getContentBox(this.containerNode);this._singleChild.resize({w:a.w,h:a.h})}else{a=this.getChildren();for(var b,e=0;b=
a[e++];)b.resize&&b.resize()}},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var a=this.domNode,b=this.domNode.parentNode;return"none"!=a.style.display&&"hidden"!=a.style.visibility&&!c.contains(a,"dijitHidden")&&b&&b.style&&"none"!=b.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array",
"dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(B,y,c,u,q){function l(f){return f.substring(0,1).toUpperCase()+f.substring(1)}function m(f,d){var a=f.resize?f.resize(d):c.setMarginBox(f.domNode,d);a?q.mixin(f,a):(q.mixin(f,c.getMarginBox(f.domNode)),q.mixin(f,d))}var h={marginBox2contentBox:function(f,d){var a=u.getComputedStyle(f),b=c.getMarginExtents(f,a),e=c.getPadBorderExtents(f,a);return{l:u.toPixelValue(f,a.paddingLeft),t:u.toPixelValue(f,a.paddingTop),w:d.w-
(b.w+e.w),h:d.h-(b.h+e.h)}},layoutChildren:function(f,d,a,b,e){d=q.mixin({},d);y.add(f,"dijitLayoutContainer");a=B.filter(a,function(r){return"center"!=r.region&&"client"!=r.layoutAlign}).concat(B.filter(a,function(r){return"center"==r.region||"client"==r.layoutAlign}));B.forEach(a,function(r){var t=r.domNode,g=r.region||r.layoutAlign;if(!g)throw Error("No region setting for "+r.id);var k=t.style;k.left=d.l+"px";k.top=d.t+"px";k.position="absolute";y.add(t,"dijitAlign"+l(g));t={};b&&b==r.id&&(t["top"==
r.region||"bottom"==r.region?"h":"w"]=e);"leading"==g&&(g=r.isLeftToRight()?"left":"right");"trailing"==g&&(g=r.isLeftToRight()?"right":"left");"top"==g||"bottom"==g?(t.w=d.w,m(r,t),d.h-=r.h,"top"==g?d.t+=r.h:k.top=d.t+d.h+"px"):"left"==g||"right"==g?(t.h=d.h,m(r,t),d.w-=r.w,"left"==g?d.l+=r.w:k.left=d.l+d.w+"px"):"client"!=g&&"center"!=g||m(r,d)})}};q.setObject("dijit.layout.utils",h);return h})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),
function(B,y,c,u,q,l,m){var h=0,f={_secureForInnerHtml:function(d){return d.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")},_emptyNode:l.empty,_setNodeContent:function(d,a){l.empty(d);if(a)if("number"==typeof a&&(a=a.toString()),"string"==typeof a&&(a=l.toDom(a,d.ownerDocument)),!a.nodeType&&y.isArrayLike(a))for(var b=a.length,e=0;e<a.length;e=b==a.length?e+1:0)l.place(a[e],d,"last");else l.place(a,d,"last");return d},_ContentSetter:u("dojo.html._ContentSetter",null,{node:"",
content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:B._scopeName,startup:!0,constructor:function(d,a){y.mixin(this,d||{});a=this.node=q.byId(this.node||a);this.id||(this.id=["Setter",a?a.id||a.tagName:"",h++].join("_"))},set:function(d,a){void 0!==d&&(this.content=d);"number"==typeof d&&(d=d.toString());a&&this._mixin(a);this.onBegin();this.setContent();return(d=this.onEnd())&&d.then?d:this.node},setContent:function(){var d=this.node;if(!d)throw Error(this.declaredClass+
": setContent given no node");try{d=f._setNodeContent(d,this.content)}catch(b){var a=this.onContentError(b);try{d.innerHTML=a}catch(e){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+e.message,e)}}this.node=d},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(c.forEach(this.parseResults,function(d){d.destroy&&d.destroy()}),delete this.parseResults);
l.empty(this.node)},onBegin:function(){var d=this.content;if(y.isString(d)&&(this.cleanContent&&(d=f._secureForInnerHtml(d)),this.extractContent)){var a=d.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);a&&(d=a[1])}this.empty();this.content=d;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(d){return"Error occurred setting content: "+
d},onExecError:function(d){return"Error occurred executing scripts: "+d},_mixin:function(d){var a={},b;for(b in d)b in a||(this[b]=d[b])},_parse:function(){var d=this.node;try{var a={};c.forEach(["dir","lang","textDir"],function(e){this[e]&&(a[e]=this[e])},this);var b=this;this.parseDeferred=m.parse({rootNode:d,noStart:!this.startup,inherited:a,scope:this.parserScope}).then(function(e){return b.parseResults=e},function(e){b._onError("Content",e,"Error parsing in _ContentSetter#"+b.id)})}catch(e){this._onError("Content",
e,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(d,a,b){d=this["on"+d+"Error"].call(this,a);b?console.error(b,a):d&&f._setNodeContent(this.node,d,!0)}}),set:function(d,a,b){void 0==a&&(console.warn("dojo.html.set: no cont argument provided, using empty string"),a="");"number"==typeof a&&(a=a.toString());return b?(new f._ContentSetter(y.mixin(b,{content:a,node:d}))).set():f._setNodeContent(d,a,!0)}};y.setObject("dojo.html",f);return f})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),
function(B,y,c,u,q,l,m,h,f,d,a,b,e,r,t,g){function k(w){return eval("("+w+")")}function x(w){var p=w._nameCaseMap,D=w.prototype;if(!p||p._extendCnt<A){p=w._nameCaseMap={};for(var C in D)"_"!==C.charAt(0)&&(p[C.toLowerCase()]=C);p._extendCnt=A}return p}function v(w,p){p||(p=B);var D=p._dojoParserCtorMap||(p._dojoParserCtorMap={}),C=w.join();if(!D[C]){for(var G=[],z=0,E=w.length;z<E;z++){var H=w[z];G[G.length]=D[H]=D[H]||c.getObject(H)||~H.indexOf("/")&&p(H)}w=G.shift();D[C]=G.length?w.createSubclass?
w.createSubclass(G):w.extend.apply(w,G):w}return D[C]}new Date("X");var A=0;f.after(c,"extend",function(){A++},!0);var n={_clearCache:function(){A++;_ctorMap={}},_functionFromScript:function(w,p){var D="",C="",G=w.getAttribute(p+"args")||w.getAttribute("args");p=w.getAttribute("with");G=(G||"").split(/\s*,\s*/);p&&p.length&&u.forEach(p.split(/\s*,\s*/),function(z){D+="with("+z+"){";C+="}"});return new Function(G,D+w.innerHTML+C)},instantiate:function(w,p,D){p=p||{};D=D||{};var C=(D.scope||y._scopeName)+
"Type",G="data-"+(D.scope||y._scopeName)+"-",z=G+"type",E=G+"mixins",H=[];u.forEach(w,function(I){var M=C in p?p[C]:I.getAttribute(z)||I.getAttribute(C);if(M){var T=I.getAttribute(E);M=T?[M].concat(T.split(/\s*,\s*/)):[M];H.push({node:I,types:M})}});return this._instantiate(H,p,D)},_instantiate:function(w,p,D,C){function G(z){p._started||D.noStart||u.forEach(z,function(E){"function"!==typeof E.startup||E._started||E.startup()});return z}w=u.map(w,function(z){var E=z.ctor||v(z.types,D.contextRequire);
if(!E)throw Error("Unable to resolve constructor for: '"+z.types.join()+"'");return this.construct(E,z.node,p,D,z.scripts,z.inherited)},this);return C?d(w).then(G):G(w)},construct:function(w,p,D,C,G,z){function E(S){X&&c.setObject(X,S);for(fa=0;fa<P.length;fa++)f[P[fa].advice||"after"](S,P[fa].method,c.hitch(S,P[fa].func),!0);for(fa=0;fa<ja.length;fa++)ja[fa].call(S);for(fa=0;fa<ta.length;fa++)S.watch(ta[fa].prop,ta[fa].func);for(fa=0;fa<N.length;fa++)t(S,N[fa].event,N[fa].func);return S}var H=w&&
w.prototype;C=C||{};var I={};C.defaults&&c.mixin(I,C.defaults);z&&c.mixin(I,z);if(e("dom-attributes-explicit"))var M=p.attributes;else e("dom-attributes-specified-flag")?M=u.filter(p.attributes,function(S){return S.specified}):(z=(/^input$|^img$/i.test(p.nodeName)?p:p.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),M=u.map(z.split(/\s+/),function(S){var ha=S.toLowerCase();return{name:S,value:"LI"==p.nodeName&&"value"==S||
"enctype"==ha?p.getAttribute(ha):p.getAttributeNode(ha).value}}));var T=C.scope||y._scopeName;z="data-"+T+"-";var Y={};"dojo"!==T&&(Y[z+"props"]="data-dojo-props",Y[z+"type"]="data-dojo-type",Y[z+"mixins"]="data-dojo-mixins",Y[T+"type"]="dojotype",Y[z+"id"]="data-dojo-id");var fa=0,ca;T=[];for(var X,ea;ca=M[fa++];){var ma=ca.name,wa=ma.toLowerCase();ca=ca.value;switch(Y[wa]||wa){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":ea=ca;break;case "data-dojo-id":case "jsid":X=
ca;break;case "data-dojo-attach-point":case "dojoattachpoint":I.dojoAttachPoint=ca;break;case "data-dojo-attach-event":case "dojoattachevent":I.dojoAttachEvent=ca;break;case "class":I["class"]=p.className;break;case "style":I.style=p.style&&p.style.cssText;break;default:if(ma in H||(ma=x(w)[wa]||ma),ma in H)switch(typeof H[ma]){case "string":I[ma]=ca;break;case "number":I[ma]=ca.length?Number(ca):NaN;break;case "boolean":I[ma]="false"!=ca.toLowerCase();break;case "function":""===ca||-1!=ca.search(/[^\w\.]+/i)?
I[ma]=new Function(ca):I[ma]=c.getObject(ca,!1)||new Function(ca);T.push(ma);break;default:wa=H[ma],I[ma]=wa&&"length"in wa?ca?ca.split(/\s*,\s*/):[]:wa instanceof Date?""==ca?new Date(""):"now"==ca?new Date:a.fromISOString(ca):wa instanceof h?y.baseUrl+ca:k(ca)}else I[ma]=ca}}for(M=0;M<T.length;M++)Y=T[M].toLowerCase(),p.removeAttribute(Y),p[Y]=null;if(ea)try{ea=k.call(C.propsThis,"{"+ea+"}"),c.mixin(I,ea)}catch(S){throw Error(S.toString()+" in data-dojo-props\x3d'"+ea+"'");}c.mixin(I,D);G||(G=w&&
(w._noScript||H._noScript)?[]:r("\x3e script[type^\x3d'dojo/']",p));var P=[],ja=[],ta=[],N=[];if(G)for(fa=0;fa<G.length;fa++)Y=G[fa],p.removeChild(Y),D=Y.getAttribute(z+"event")||Y.getAttribute("event"),C=Y.getAttribute(z+"prop"),ea=Y.getAttribute(z+"method"),T=Y.getAttribute(z+"advice"),M=Y.getAttribute("type"),Y=this._functionFromScript(Y,z),D?"dojo/connect"==M?P.push({method:D,func:Y}):"dojo/on"==M?N.push({event:D,func:Y}):I[D]=Y:"dojo/aspect"==M?P.push({method:ea,advice:T,func:Y}):"dojo/watch"==
M?ta.push({prop:C,func:Y}):ja.push(Y);w=(G=w.markupFactory||H.markupFactory)?G(I,p,w):new w(I,p);return w.then?w.then(E):E(w)},scan:function(w,p){function D(wa){if(!wa.inherited){wa.inherited={};var P=wa.node,ja=D(wa.parent);P={dir:P.getAttribute("dir")||ja.dir,lang:P.getAttribute("lang")||ja.lang,textDir:P.getAttribute(M)||ja.textDir};for(var ta in P)P[ta]&&(wa.inherited[ta]=P[ta])}return wa.inherited}var C=[],G=[],z={},E=(p.scope||y._scopeName)+"Type",H="data-"+(p.scope||y._scopeName)+"-",I=H+"type",
M=H+"textdir";H+="mixins";var T=w.firstChild,Y=p.inherited;if(!Y){Y=function ta(P,ja){return P.getAttribute&&P.getAttribute(ja)||P.parentNode&&ta(P.parentNode,ja)};Y={dir:Y(w,"dir"),lang:Y(w,"lang"),textDir:Y(w,M)};for(var fa in Y)Y[fa]||delete Y[fa]}fa={inherited:Y};for(var ca,X;;)if(T)if(1!=T.nodeType)T=T.nextSibling;else if(ca&&"script"==T.nodeName.toLowerCase())(Y=T.getAttribute("type"))&&/^dojo\/\w/i.test(Y)&&ca.push(T),T=T.nextSibling;else if(X)T=T.nextSibling;else if(Y=T.getAttribute(I)||T.getAttribute(E),
w=T.firstChild,Y||w&&(3!=w.nodeType||w.nextSibling)){X=null;if(Y){var ea=T.getAttribute(H);ca=ea?[Y].concat(ea.split(/\s*,\s*/)):[Y];try{X=v(ca,p.contextRequire)}catch(wa){}X||u.forEach(ca,function(wa){~wa.indexOf("/")&&!z[wa]&&(z[wa]=!0,G[G.length]=wa)});ea=X&&!X.prototype._noScript?[]:null;fa={types:ca,ctor:X,parent:fa,node:T,scripts:ea};fa.inherited=D(fa);C.push(fa)}else fa={node:T,scripts:ca,parent:fa};ca=ea;X=T.stopParser||X&&X.prototype.stopParser&&!p.template;T=w}else T=T.nextSibling;else{if(!fa||
!fa.node)break;T=fa.node.nextSibling;X=!1;fa=fa.parent;ca=fa.scripts}var ma=new b;G.length?(e("dojo-debug-messages")&&console.warn("WARNING: Modules being Auto-Required: "+G.join(", ")),(p.contextRequire||B)(G,function(){ma.resolve(u.filter(C,function(wa){if(!wa.ctor)try{wa.ctor=v(wa.types,p.contextRequire)}catch(ta){}for(var P=wa.parent;P&&!P.types;)P=P.parent;var ja=wa.ctor&&wa.ctor.prototype;wa.instantiateChildren=!(ja&&ja.stopParser&&!p.template);wa.instantiate=!P||P.instantiate&&P.instantiateChildren;
return wa.instantiate}))})):ma.resolve(C);return ma.promise},_require:function(w,p){w=k("{"+w.innerHTML+"}");var D=[],C=[],G=new b;p=p&&p.contextRequire||B;for(var z in w)D.push(z),C.push(w[z]);p(C,function(){for(var E=0;E<D.length;E++)c.setObject(D[E],arguments[E]);G.resolve(arguments)});return G.promise},_scanAmd:function(w,p){var D=new b,C=D.promise;D.resolve(!0);var G=this;r("script[type\x3d'dojo/require']",w).forEach(function(z){C=C.then(function(){return G._require(z,p)});z.parentNode.removeChild(z)});
return C},parse:function(w,p){!w||"string"==typeof w||"nodeType"in w||(p=w,w=p.rootNode);var D=w?l.byId(w):m.body();p=p||{};var C=p.template?{template:!0}:{},G=[],z=this;w=this._scanAmd(D,p).then(function(){return z.scan(D,p)}).then(function(E){return z._instantiate(E,C,p,!0)}).then(function(E){return G=G.concat(E)}).otherwise(function(E){console.error("dojo/parser::parse() error",E);throw E;});c.mixin(G,w);return G}};y.parser=n;q.parseOnLoad&&g(100,n,"parse");return n})},"dojo/_base/url":function(){define(["./kernel"],
function(B){var y=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,c=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,u=function(){for(var q=arguments,l=[q[0]],m=1;m<q.length;m++)if(q[m]){var h=new u(q[m]+"");l=new u(l[0]+"");if(""==h.path&&!h.scheme&&!h.authority&&!h.query)null!=h.fragment&&(l.fragment=h.fragment),h=l;else if(!h.scheme&&(h.scheme=l.scheme,!h.authority&&(h.authority=l.authority,"/"!=h.path.charAt(0)))){l=(l.path.substring(0,l.path.lastIndexOf("/")+1)+
h.path).split("/");for(var f=0;f<l.length;f++)"."==l[f]?f==l.length-1?l[f]="":(l.splice(f,1),f--):0<f&&(1!=f||""!=l[0])&&".."==l[f]&&".."!=l[f-1]&&(f==l.length-1?(l.splice(f,1),l[f-1]=""):(l.splice(f-1,2),f-=2));h.path=l.join("/")}l=[];h.scheme&&l.push(h.scheme,":");h.authority&&l.push("//",h.authority);l.push(h.path);h.query&&l.push("?",h.query);h.fragment&&l.push("#",h.fragment)}this.uri=l.join("");q=this.uri.match(y);this.scheme=q[2]||(q[1]?"":null);this.authority=q[4]||(q[3]?"":null);this.path=
q[5];this.query=q[7]||(q[6]?"":null);this.fragment=q[9]||(q[8]?"":null);null!=this.authority&&(q=this.authority.match(c),this.user=q[3]||null,this.password=q[4]||null,this.host=q[6]||q[7],this.port=q[9]||null)};u.prototype.toString=function(){return this.uri};return B._Url=u})},"dojo/promise/all":function(){define(["../_base/array","../_base/lang","../Deferred","../when"],function(B,y,c,u){var q=B.some;return function(l){var m,h;y.isArray(l)?h=l:l&&"object"===typeof l&&(m=l);var f=[];if(m){h=[];for(var d in m)Object.hasOwnProperty.call(m,
d)&&(f.push(d),h.push(m[d]));var a={}}else h&&(a=[]);if(!h||!h.length)return(new c).resolve(a);var b=new c;b.promise.always(function(){a=f=null});var e=h.length;q(h,function(r,t){m||f.push(t);u(r,function(g){b.isFulfilled()||(a[f[t]]=g,0===--e&&b.resolve(a))},b.reject);return b.isFulfilled()});return b.promise}})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(B,y){var c={};B.setObject("dojo.date.stamp",c);c.fromISOString=function(u,q){c._isoRegExp||(c._isoRegExp=
/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var l=c._isoRegExp.exec(u);u=null;if(l){l.shift();l[1]&&l[1]--;l[6]&&(l[6]*=1E3);q&&(q=new Date(q),y.forEach(y.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),function(f){return q["get"+f]()}),function(f,d){l[d]=l[d]||f}));u=new Date(l[0]||1970,l[1]||0,l[2]||1,l[3]||0,l[4]||0,l[5]||0,l[6]||0);100>l[0]&&u.setFullYear(l[0]||1970);var m=0,h=l[7]&&l[7].charAt(0);"Z"!=
h&&(m=60*(l[8]||0)+(Number(l[9])||0),"-"!=h&&(m*=-1));h&&(m-=u.getTimezoneOffset());m&&u.setTime(u.getTime()+6E4*m)}return u};c.toISOString=function(u,q){var l=function(d){return 10>d?"0"+d:d};q=q||{};var m=[],h=q.zulu?"getUTC":"get",f="";"time"!=q.selector&&(f=u[h+"FullYear"](),f=["0000".substr((f+"").length)+f,l(u[h+"Month"]()+1),l(u[h+"Date"]())].join("-"));m.push(f);"date"!=q.selector&&(f=[l(u[h+"Hours"]()),l(u[h+"Minutes"]()),l(u[h+"Seconds"]())].join(":"),h=u[h+"Milliseconds"](),q.milliseconds&&
(f+="."+(100>h?"0":"")+l(h)),q.zulu?f+="Z":"time"!=q.selector&&(u=u.getTimezoneOffset(),q=Math.abs(u),f+=(0<u?"-":"+")+l(Math.floor(q/60))+":"+l(q%60)),m.push(f));return m.join("T")};return c})},"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(B,y){return B("dijit._DialogMixin",null,{actionBarTemplate:"",execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var c=
y._getTabNavigable(this.domNode);this._firstFocusItem=c.lowest||c.first||this.closeButtonNode||this.domNode;this._lastFocusItem=c.last||c.highest||this._firstFocusItem}})})},"dijit/form/_FormMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),function(B,y,c,u,q,l){return y("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(m){var h=[];B.forEach(m||this.getChildren(),function(f){"value"in f?h.push(f):
h=h.concat(this._getDescendantFormWidgets(f.getChildren()))},this);return h},reset:function(){B.forEach(this._getDescendantFormWidgets(),function(m){m.reset&&m.reset()})},validate:function(){var m=!1;return B.every(B.map(this._getDescendantFormWidgets(),function(h){h._hasBeenBlurred=!0;var f=h.disabled||!h.validate||h.validate();f||m||(l.scrollIntoView(h.containerNode||h.domNode),h.focus(),m=!0);return f}),function(h){return h})},setValues:function(m){c.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.",
"","2.0");return this.set("value",m)},_setValueAttr:function(m){var h={};B.forEach(this._getDescendantFormWidgets(),function(b){b.name&&(h[b.name]||(h[b.name]=[])).push(b)});for(var f in h)if(h.hasOwnProperty(f)){var d=h[f],a=u.getObject(f,!1,m);void 0!==a&&(a=[].concat(a),"boolean"==typeof d[0].checked?B.forEach(d,function(b){b.set("value",-1!=B.indexOf(a,b._get("value")))}):d[0].multiple?d[0].set("value",a):B.forEach(d,function(b,e){b.set("value",a[e])}))}},getValues:function(){c.deprecated(this.declaredClass+
"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var m={};B.forEach(this._getDescendantFormWidgets(),function(h){var f=h.name;if(f&&!h.disabled){var d=h.get("value");"boolean"==typeof h.checked?/Radio/.test(h.declaredClass)?!1!==d?u.setObject(f,d,m):(d=u.getObject(f,!1,m),void 0===d&&u.setObject(f,null,m)):(h=u.getObject(f,!1,m),h||(h=[],u.setObject(f,h,m)),!1!==d&&h.push(d)):(h=u.getObject(f,!1,m),"undefined"!=typeof h?u.isArray(h)?
h.push(d):u.setObject(f,[h,d],m):u.setObject(f,d,m))}});return m},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var m=B.map(this._descendants,function(h){return h.get("state")||""});return 0<=B.indexOf(m,"Error")?"Error":0<=B.indexOf(m,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(m){this._descendants=this._getDescendantFormWidgets();B.forEach(this._descendants,function(h){h._started||h.startup()});m||this._onChildChange()},
_onChildChange:function(m){m&&"state"!=m&&"disabled"!=m||this._set("state",this._getState());m&&"value"!=m&&"disabled"!=m&&"checked"!=m||(this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;this._set("value",this.get("value"))},10))},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var m=this;this.own(q(this.containerNode,
"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(h){h.target!=m.domNode&&m._onChildChange(h.type.replace("attrmodified-",""))}));this.watch("state",function(h,f,d){this.onValidStateChange(""==d)})},destroy:function(){this.inherited(arguments)}})})},"esri/main":function(){define(["./kernel","dojo/i18n!./nls/jsapi","./config","./sniff"],function(B,y){B.bundle=y;return B})},"esri/kernel":function(){define(["dojo/_base/kernel","dojo/_base/config","dojo/has"],
function(B,y,c){var u=function(){return this}(),q=u.location,l=q.pathname,m=q.protocol;q={version:"3.35",_appBaseUrl:m+"//"+q.host+l.substring(0,l.lastIndexOf(l.split("/")[l.split("/").length-1]))};y.noGlobals||(u.esri=q);B.isAsync||c.add("extend-esri",1);(q.dijit=q.dijit||{})._arcgisUrl=("http:"===m||"https:"===m?m:"http:")+"//www.arcgis.com/sharing/rest";return q})},"esri/config":function(){define(["dojo/_base/config","dojo/topic","dojo/has","./kernel"],function(B,y,c,u){var q=function(){return this}(),
l={defaults:{screenDPI:96,geometryService:null,kmlService:null,map:{width:400,height:400,layerNamePrefix:"layer",graphicsLayerNamePrefix:"graphicsLayer",slider:{left:"30px",top:"30px",width:null,height:"200px"},sliderLabel:{tick:5,labels:null,style:"width:2em; font-family:Verdana; font-size:75%;"},sliderChangeImmediate:!0,zoomSymbol:{color:[0,0,0,64],outline:{color:[255,0,0,255],width:1.25,style:"esriSLSSolid"},style:"esriSFSSolid"},zoomDuration:500,zoomRate:25,zoomAnimationThrottled:!1,panDuration:350,
panRate:25,logoLink:"http://www.esri.com"},autoSpatialIndexing:q.Worker&&!1,io:{errorHandler:function(m,h){y.publish("esri.Error",[m])},proxyUrl:null,alwaysUseProxy:!1,useCors:"with-credentials",corsEnabledServers:[/^https?:\/\/.+\.arcgis\.com(\/|$)/i,"server.arcgisonline.com","services.arcgisonline.com","www.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","tiles.arcgis.com","tiles1.arcgis.com","tiles2.arcgis.com","tiles3.arcgis.com","tiles4.arcgis.com","basemaps.arcgis.com","basemapsbeta.arcgis.com",
"basemaps-api.arcgis.com","elevation3d.arcgis.com","services.arcgis.com","services1.arcgis.com","services2.arcgis.com","services3.arcgis.com","services4.arcgis.com","services5.arcgis.com","services6.arcgis.com","services7.arcgis.com","services8.arcgis.com","services9.arcgis.com","cdn.arcgis.com","cdn-a.arcgis.com","cdn-b.arcgis.com","static.arcgis.com","utility.arcgis.com","utility.arcgisonline.com","geocode.arcgis.com","geoenrich.arcgis.com","qaext.arcgis.com","staticqa.arcgis.com","tilesqa.arcgis.com",
"servicesqa.arcgis.com","servicesqa1.arcgis.com","servicesqa2.arcgis.com","servicesqa3.arcgis.com","geocodeqa.arcgis.com","geoenrichqa.arcgis.com","dev.arcgis.com","devext.arcgis.com","localvtiles.arcgis.com","staticdev.arcgis.com","tilesdevext.arcgis.com","elevation3ddev.arcgis.com","servicesdev.arcgis.com","servicesdev1.arcgis.com","servicesdev2.arcgis.com","servicesdev3.arcgis.com","geocodedev.arcgis.com","geoenrichdev.arcgis.com","basemapsdev.arcgis.com","basemapsdev-api.arcgis.com","basemapsbetadev.arcgis.com"],
corsDetection:q.cordova?!1:!0,corsDetectionTimeout:15,corsStatus:{},webTierAuthServers:[],proxyRules:[],postLength:2E3,timeout:6E4,useWorkers:"on-request",maxRequestWorkers:5,httpsDomains:"arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" ")},workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}}}};c("extend-esri")&&(u.config=l);B.noGlobals||(q.esriConfig=l);return l})},
"esri/sniff":function(){define(["dojo/_base/sniff","dojo/global","./kernel"],function(B,y,c){var u=B("ff"),q=B("ie"),l=void 0===q&&7<=B("trident"),m=B("edge"),h=B("webkit"),f=B("opera"),d=B("chrome"),a=B("safari"),b=navigator.userAgent,e;(e=b.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+_\d+)/i))&&B.add("esri-iphone",parseFloat(e[2].replace("_",".")));(e=b.match(/Android\s+(\d+(\.\d+)*)/i))&&B.add("esri-android",parseFloat(e[1]));(e=b.match(/Fennec\/(\d+\.\d+)/i))&&B.add("esri-fennec",parseFloat(e[1]));0<=
b.indexOf("BlackBerry")&&0<=b.indexOf("WebKit")&&B.add("esri-blackberry",1);B.add("esri-touch",B("esri-iphone")||B("esri-android")||B("esri-blackberry")||6<=B("esri-fennec")||(u||h)&&(document.createTouch||"ontouchstart"in y||y.TouchEvent&&0<navigator.maxTouchPoints)?!0:!1);(e=b.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i))&&B.add("esri-mobile",!!e);B.add("esri-pointer",!u&&(navigator.pointerEnabled||navigator.msPointerEnabled||!!y.PointerEvent));c._getDOMAccessor=function(t){var g=
"";u?g="Moz":h?g="Webkit":q?g="ms":f&&(g="O");return g+t.charAt(0).toUpperCase()+t.substr(1)};B.add("esri-phonegap",!!y.cordova);B.add("esri-cors",B("esri-phonegap")||y.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest);B.add("esri-file-upload",y.FormData&&y.FileList?!0:!1);B.add("esri-script-sandbox",function(){return"MessageChannel"in y&&"HTMLIFrameElement"in y&&"sandbox"in HTMLIFrameElement.prototype});B.add("esri-secure-context",function(){if("isSecureContext"in y)return y.isSecureContext;
if(y.location&&y.location.origin)return 0===y.location.origin.indexOf("https:")});B.add("esri-wasm","WebAssembly"in y);B.add("esri-workers",y.Worker?!0:!1);B.add("esri-featurelayer-webgl",!1);if(b=B("esri-featurelayer-webgl")){var r=B("esri-mobile");e=r?1:2;r=r?1:3;"object"===typeof b?(b.maxDrillLevel=null==b.maxDrillLevel?e:b.maxDrillLevel,b.maxRecordCountFactor=null==b.maxRecordCountFactor?r:b.maxRecordCountFactor,b.enablePBFQuery=null==b.enablePBFQuery?!0:b.enablePBFQuery):B.add("esri-featurelayer-webgl",
{maxDrillLevel:e,maxRecordCountFactor:r,enablePBFQuery:!0},null,!0)}B.add("esri-featurelayer-webgl-labeling",!1);B.add("esri-pbf",!q||10<=q);B.add("esri-featurelayer-pbf",!0);B.add("esri-transforms",l||m||9<=q||3.5<=u||4<=d||3.1<=a||10.5<=f||3.2<=B("esri-iphone")||2.1<=B("esri-android"));B.add("esri-transitions",l||m||10<=q||4<=u||4<=d||3.1<=a||10.5<=f||3.2<=B("esri-iphone")||2.1<=B("esri-android"));B.add("esri-transforms3d",l||m||10<=u||12<=d||4<=a||3.2<=B("esri-iphone")||3<=B("esri-android"));B.add("esri-url-encodes-apostrophe",
function(){if(!y.document)return!1;var t=y.document.createElement("a");t.href="?'";return-1<t.href.indexOf("?%27")});3>B("esri-android")&&(B.add("esri-transforms",!1,!1,!0),B.add("esri-transitions",!1,!1,!0),B.add("esri-transforms3d",!1,!1,!0));B.add("esri-will-change",B("esri-transforms")&&(52<=d||11.1<=a));c._css=function(t){var g=B("esri-transforms3d");void 0!==t&&null!==t?g=t:g&&(d||a&&!B("esri-iphone"))&&(g=!1);var k=g?"translate3d(":"translate(",x=g?d?",-1px)":",0px)":")",v=g?"scale3d(":"scale(",
A=g?",1)":")",n=g?"rotate3d(0,0,1,":"rotate(",w=g?"matrix3d(":"matrix(",p=g?",0,0,":",",D=g?",0,0,0,0,1,0,":",",C=g?",0,1)":")";return{names:{transition:h&&"-webkit-transition"||u&&"MozTransition"||f&&"OTransition"||q&&"msTransition"||"transition",transform:h&&"-webkit-transform"||u&&"MozTransform"||f&&"OTransform"||q&&"msTransform"||"transform",transformName:h&&"-webkit-transform"||u&&"-moz-transform"||f&&"-o-transform"||q&&"-ms-transform"||"transform",origin:h&&"-webkit-transform-origin"||u&&"MozTransformOrigin"||
f&&"OTransformOrigin"||q&&"msTransformOrigin"||"transformOrigin",endEvent:h&&"webkitTransitionEnd"||u&&"transitionend"||f&&"oTransitionEnd"||q&&"MSTransitionEnd"||"transitionend"},translate:function(G,z){return k+G+"px,"+z+"px"+x},scale:function(G){return v+G+","+G+A},rotate:function(G){return n+G+"deg)"},matrix:function(G){return w+G.xx+","+G.xy+p+G.yx+","+G.yy+D+G.dx.toFixed(10)+(u&&59>=u?"px,":",")+G.dy.toFixed(10)+(u&&59>=u?"px":"")+C},getScaleFromMatrix:function(G){if(!G)return 1;G=G.toLowerCase();
var z=-1<G.indexOf("matrix3d")?"matrix3d(":"matrix(";return Number(G.substring(z.length,G.indexOf(",")))}}};B("extend-esri")&&(c.isiPhone=B("esri-iphone"),c.isAndroid=B("esri-android"),c.isFennec=B("esri-fennec"),c.isBlackBerry=B("esri-blackberry"),c.isTouchEnabled=B("esri-touch"),c.isPointerEnabled=B("esri-pointer"),c._hasCors=B("esri-cors"),c._hasFileUpload=B("esri-file-upload"),c._hasTransforms=B("esri-transforms"),c._hasTransitions=B("esri-transitions"),c._has3DTransforms=B("esri-transforms3d"));
return B})},"esri/map":function(){define("require dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/event dojo/on dojo/aspect dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/a11yclick dijit/registry ./kernel ./config ./sniff ./lang ./_coremap ./MapNavigationManager dojo/i18n!./nls/jsapi".split(" "),function(B,y,c,u,q,l,m,h,f,d,a,b,e,r,t,g,k,x,v,A,n,w,p,D){var C={up:"panUp",right:"panRight",down:"panDown",
left:"panLeft"},G={upperRight:"panUpperRight",lowerRight:"panLowerRight",lowerLeft:"panLowerLeft",upperLeft:"panUpperLeft"},z=u.connect,E=u.disconnect,H=e.create,I=t.set,M=q.hitch,T=r.getMarginBox,Y=y.deprecated,fa=q.mixin,ca=0;y=c(w,{declaredClass:"esri.Map",constructor:function(X,ea){ea=ea||{};fa(this,{_slider:null,_navDiv:null,_mapParams:fa({attributionWidth:.45,slider:!0,nav:!1,logo:!0,sliderStyle:"small",sliderPosition:"top-left",sliderOrientation:"vertical",autoResize:!0},ea)});fa(this,{isMapNavigation:null!=
ea.isMapNavigation?ea.isMapNavigation:!0,isDoubleClickZoom:null!=ea.isDoubleClickZoom?ea.isDoubleClickZoom:!0,isClickRecenter:null!=ea.isClickRecenter?ea.isClickRecenter:!0,isPan:null!=ea.isPan?ea.isPan:!0,isRubberBandZoom:null!=ea.isRubberBandZoom?ea.isRubberBandZoom:!0,isPinchZoom:null!=ea.isPinchZoom?ea.isPinchZoom:!0,isKeyboardNavigation:null!=ea.isKeyboardNavigation?ea.isKeyboardNavigation:!0,isScrollWheel:null!=ea.isScrollWheel?ea.isScrollWheel:!0,isShiftDoubleClickZoom:!1,isScrollWheelZoom:!1,
isPanArrows:!1,isZoomSlider:!1});q.isFunction(x._css)&&(x._css=x._css(this._mapParams.force3DTransforms),this.force3DTransforms=this._mapParams.force3DTransforms);X=A("esri-transforms")&&A("esri-transitions");this.navigationMode=this._mapParams.navigationMode||X&&"css-transforms"||"classic";"css-transforms"!==this.navigationMode||X||(this.navigationMode="classic");this.fadeOnZoom=n.isDefined(this._mapParams.fadeOnZoom)?this._mapParams.fadeOnZoom:"css-transforms"===this.navigationMode;"css-transforms"!==
this.navigationMode&&(this.fadeOnZoom=!1);this.setMapCursor("default");this.smartNavigation=ea&&ea.smartNavigation;if(!(n.isDefined(this.smartNavigation)||!A("mac")||A("esri-touch")||A("esri-pointer")||3.5>=A("ff"))){var ma=navigator.userAgent.match(/Mac\s+OS\s+X\s+([\d]+)(\.|_)([\d]+)\D/i);ma&&n.isDefined(ma[1])&&n.isDefined(ma[3])&&(X=parseInt(ma[1],10),ma=parseInt(ma[3],10),this.smartNavigation=10<X||10===X&&6<=ma)}this.showAttribution=n.isDefined(this._mapParams.showAttribution)?this._mapParams.showAttribution:
!0;this._onLoadHandler_connect=z(this,"onLoad",this,"_onLoadInitNavsHandler");var wa=H("div",{class:"esriControlsBR"+(this._mapParams.nav?" withPanArrows":"")},this.root);if(this.showAttribution)if(X=q.getObject("esri.dijit.Attribution",!1))this._initAttribution(X,wa);else{var P=ca++,ja=this;this._rids&&this._rids.push(P);B(["./dijit/Attribution"],function(ta){var N=ja._rids?l.indexOf(ja._rids,P):-1;-1!==N&&(ja._rids.splice(N,1),ja._initAttribution(ta,wa))})}this._mapParams.logo&&(X={},6===A("ie")&&
(X.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled\x3d'true', sizingMethod\x3d'crop', src\x3d'"+B.toUrl("./images/map/logo-med.png")+"')"),this._ogol=H("div",{style:X,tabIndex:"0",title:"Esri"},wa),this._setLogoSize(),this._onMapResizeLogo_connect=z(this,"onResize",this,"_setLogoSize"),this._ogol_connect=z(this._ogol,g,this,"_openLogoLink"));this.navigationManager=new p(this);ea&&ea.basemap&&(this._onLoadFix=!0,this.setBasemap(ea.basemap),this._onLoadFix=!1);if(this.autoResize=
this._mapParams.autoResize)ea=this._getEnclosingResizableWidget(this.container)||window,X=this.resize,this._rszSignal=h.pausable(ea,"resize",X),this._oriSignal=h.pausable(window,"orientationchange",X),f.after(ea,"resize",X,!0),this._startResizeTimer()},_startResizeTimer:function(){clearTimeout(this._persistentTimer);this._persistentTimer=setTimeout(this._timedResize,2*this.resizeDelay)},_getEnclosingResizableWidget:function(X){var ea=k.getEnclosingWidget(X);return ea?ea.resize?ea:this._getEnclosingResizableWidget(X.parentNode):
ea},_setLogoSize:function(){this._ogol&&(25E4>this.root.clientWidth*this.root.clientHeight?(b.remove(this._ogol,"logo-med"),b.add(this._ogol,"logo-sm")):(b.remove(this._ogol,"logo-sm"),b.add(this._ogol,"logo-med")))},_initAttribution:function(X,ea){ea=H("span",{class:"esriAttribution"},ea,"first");I(ea,"maxWidth",Math.floor(this.width*this._mapParams.attributionWidth)+"px");this._connects.push(z(ea,g,function(){b.contains(this,"esriAttributionOpen")?b.remove(this,"esriAttributionOpen"):this.scrollWidth>
this.clientWidth&&b.add(this,"esriAttributionOpen")}));this.attribution=new X({map:this},ea)},_cleanUp:function(){this.disableMapNavigation();this.navigationManager.destroy();var X=this._slider;X&&X.destroy&&!X._destroyed&&X.destroy();X=this._navDiv;var ea=this.attribution;X&&e.destroy(X);ea&&ea.destroy();this._connects.push(this._slider_connect,this._ogol_connect,this._rszSignal,this._oriSignal);l.forEach(this._connects,E);clearInterval(this._persistentTimer);this.attribution=this.navigationManager=
this._rids=this._connects=this._slider_connect=this._ogol_connect=this._rszSignal=this._oriSignal=this._persistentTimer=null;this.inherited("_cleanUp",arguments)},_isPanningOrZooming:function(){return this.__panning||this.__zooming},_canZoom:function(X){var ea=this.getLevel();return!this.__tileInfo||!(ea===this.getMinZoom()&&0>X||ea===this.getMaxZoom()&&0<X)},_onLoadInitNavsHandler:function(){this._evalMapNavigation();this._createNav();if("small"===this._mapParams.sliderStyle||!this._createSlider)this._createSimpleSlider();
else if(this._mapParams.slider){var X=-1!==this._getSliderClass(!0).indexOf("Horizontal");X=[X?"dijit.form.HorizontalSlider":"dijit.form.VerticalSlider",X?"dijit.form.HorizontalRule":"dijit.form.VerticalRule",X?"dijit.form.HorizontalRuleLabels":"dijit.form.VerticalRuleLabels"];if(l.some(X,function(wa){return!q.getObject(wa,!1)})){X=l.map(X,function(wa){return wa.replace(/\./g,"/")});var ea=ca++,ma=this;this._rids&&this._rids.push(ea);B(X,function(){var wa=ma._rids?l.indexOf(ma._rids,ea):-1;-1!==wa&&
(ma._rids.splice(wa,1),ma._createSlider.apply(ma,arguments))})}else X=l.map(X,function(wa){return q.getObject(wa,!1)}),this._createSlider.apply(this,X)}E(this._onLoadHandler_connect)},_createNav:function(){if(this._mapParams.nav){var X,ea=b.add,ma=this.id;this._navDiv=H("div",{id:ma+"_navdiv"},this.root);ea(this._navDiv,"navDiv");var wa=this.width/2,P=this.height/2;for(X in C){var ja=C[X];var ta=H("div",{id:ma+"_pan_"+X},this._navDiv);ea(ta,"fixedPan "+ja);if("up"===X||"down"===X){var N=parseInt(T(ta).w,
10)/2;I(ta,{left:wa-N+"px",zIndex:30})}else N=parseInt(T(ta).h,10)/2,I(ta,{top:P-N+"px",zIndex:30});this._connects.push(z(ta,"onclick",M(this,this[ja])))}this._onMapResizeNavHandler_connect=z(this,"onResize",this,"_onMapResizeNavHandler");for(X in G)ja=G[X],ta=H("div",{id:ma+"_pan_"+X,style:{zIndex:30}},this._navDiv),ea(ta,"fixedPan "+ja),this._connects.push(z(ta,"onclick",M(this,this[ja])));this.isPanArrows=!0}},_onMapResizeNavHandler:function(X,ea,ma){X=this.id;ea/=2;ma/=2;var wa=d.byId,P;for(P in C){var ja=
wa(X+"_pan_"+P);if("up"===P||"down"===P){var ta=parseInt(T(ja).w,10)/2;I(ja,"left",ea-ta+"px")}else ta=parseInt(T(ja).h,10)/2,I(ja,"top",ma-ta+"px")}},_createSimpleSlider:function(){if(this._mapParams.slider){var X=this._slider=H("div",{id:this.id+"_zoom_slider",class:this._getSliderClass(),style:{zIndex:30}}),ea=H("div",{class:"esriSimpleSliderIncrementButton",tabIndex:"0",role:"button"},X),ma=H("div",{class:"esriSimpleSliderDecrementButton",tabIndex:"0",role:"button"},X);this._addZoomButtonTooltips(ea,
ma);this._incButton=ea;this._decButton=ma;this._simpleSliderZoomHandler(null,null,null,this.getLevel());var wa=D.widgets.zoomSlider;this._addZoomButtonIcon(ea,"+",wa.zoomIn);this._addZoomButtonIcon(ma,"\x26minus;",wa.zoomOut);8>A("ie")&&b.add(ma,"dj_ie67Fix");this._connects.push(z(ea,g,this,this._simpleSliderChangeHandler));this._connects.push(z(ma,g,this,this._simpleSliderChangeHandler));(-1<this.getMaxZoom()||-1<this.getMinZoom())&&this._connects.push(z(this,"onZoomEnd",this,this._simpleSliderZoomHandler));
10>A("ie")&&d.setSelectable(X,!1);this.root.appendChild(X);this.isZoomSlider=!0}},_simpleSliderChangeHandler:function(X){m.stop(X);X=-1!==X.currentTarget.className.indexOf("IncrementButton")?!0:!1;this._extentUtil({numLevels:X?1:-1})},_simpleSliderZoomHandler:function(X,ea,ma,wa){var P;X=this._incButton;ea=this._decButton;-1<wa&&wa===this.getMaxZoom()?P=X:-1<wa&&wa===this.getMinZoom()&&(P=ea);P?(b.add(P,"esriSimpleSliderDisabledButton"),b.remove(P===X?ea:X,"esriSimpleSliderDisabledButton")):(b.remove(X,
"esriSimpleSliderDisabledButton"),b.remove(ea,"esriSimpleSliderDisabledButton"))},_getSliderClass:function(X){X=X?"Large":"Simple";var ea=this._mapParams.sliderOrientation,ma=this._mapParams.sliderPosition||"";ea=ea&&"horizontal"===ea.toLowerCase()?"esri"+X+"SliderHorizontal":"esri"+X+"SliderVertical";if(ma)switch(ma.toLowerCase()){case "top-left":ma="esri"+X+"SliderTL";break;case "top-right":ma="esri"+X+"SliderTR";break;case "bottom-left":ma="esri"+X+"SliderBL";break;case "bottom-right":ma="esri"+
X+"SliderBR"}return"esri"+X+"Slider "+ea+" "+ma},_addZoomButtonIcon:function(X,ea,ma){e.create("span",{"aria-hidden":"true",role:"presentation",innerHTML:ea},X);e.create("span",{class:"esriIconFallbackText",innerHTML:ma},X)},_addZoomButtonTooltips:function(X,ea){var ma=D.widgets.zoomSlider;a.set(X,"title",ma.zoomIn);a.set(ea,"title",ma.zoomOut)},_createSlider:function(X,ea,ma){if(this._mapParams.slider){var wa=H("div",{id:this.id+"_zoom_slider"},this.root),P=v.defaults.map,ja=this._getSliderClass(!0),
ta=-1!==ja.indexOf("Horizontal"),N=this.getNumLevels();if(0<N){var S,ha,la=this._mapParams.sliderLabels,sa=!!la,ya=!1!==la;if(ya){var Ga=ta?"bottomDecoration":"rightDecoration";if(!la)for(la=[],P=0;P<N;P++)la[P]="";l.forEach([{class:"esriLargeSliderTicks",container:Ga,count:N,dijitClass:ea},{class:sa&&"esriLargeSliderLabels",container:Ga,count:N,labels:la,dijitClass:ma}],function(da){var oa=H("div"),va=da.dijitClass;delete da.dijitClass;wa.appendChild(oa);va===ea?S=new va(da,oa):ha=new va(da,oa)})}X=
this._slider=new X({id:wa.id,class:ja,minimum:this.getMinZoom(),maximum:this.getMaxZoom(),discreteValues:N,value:this.getLevel(),clickSelect:!0,intermediateChanges:!0,style:"z-index:30;"},wa);X.startup();ya&&(S.startup(),ha.startup());this._slider_connect=z(X,"onChange",this,"_onSliderChangeHandler");this._connects.push(z(this,"onExtentChange",this,"_onExtentChangeSliderHandler"));this._connects.push(z(X._movable,"onFirstMove",this,"_onSliderMoveStartHandler"))}else{X=this._slider=new X({id:wa.id,
class:ja,minimum:0,maximum:2,discreteValues:3,value:1,clickSelect:!0,intermediateChanges:P.sliderChangeImmediate,style:"height:50px; z-index:30;"},wa);ma=X.domNode.firstChild.childNodes;for(P=1;3>=P;P++)I(ma[P],"visibility","hidden");X.startup();this._slider_connect=z(X,"onChange",this,"_onDynSliderChangeHandler");this._connects.push(z(this,"onExtentChange",this,"_onExtentChangeDynSliderHandler"))}P=X.incrementButton;ma=X.decrementButton;ta?this._addZoomButtonTooltips(P,ma):this._addZoomButtonTooltips(ma,
P);P.style.outline="none";ma.style.outline="none";X.sliderHandle.style.outline="none";X._onKeyPress=function(){};if(ta=X._movable){var ba=ta.onMouseDown;ta.onMouseDown=function(da){9>A("ie")&&1!==da.button||ba.apply(this,arguments)}}this.isZoomSlider=!0}},_onSliderMoveStartHandler:function(){E(this._slider_connect);E(this._slidermovestop_connect);this._slider_connect=z(this._slider,"onChange",this,"_onSliderChangeDragHandler");this._slidermovestop_connect=z(this._slider._movable,"onMoveStop",this,
"_onSliderMoveEndHandler")},_onSliderChangeDragHandler:function(X){this._extentUtil({targetLevel:X})},_onSliderMoveEndHandler:function(){E(this._slider_connect);E(this._slidermovestop_connect)},_onSliderChangeHandler:function(X){this.setLevel(X)},_updateSliderValue:function(X,ea){E(this._slider_connect);var ma=this._slider,wa=ma._onChangeActive;ma._onChangeActive=!1;ma.set("value",X);ma._onChangeActive=wa;this._slider_connect=z(ma,"onChange",this,ea)},_onExtentChangeSliderHandler:function(X,ea,ma,
wa){E(this._slidermovestop_connect);this._updateSliderValue(wa.level,"_onSliderChangeHandler")},_onDynSliderChangeHandler:function(X){this._extentUtil({numLevels:0<X?1:-1})},_onExtentChangeDynSliderHandler:function(){this._updateSliderValue(1,"_onDynSliderChangeHandler")},_openLogoLink:function(X){window.open(v.defaults.map.logoLink,"_blank");m.stop(X)},enableMapNavigation:function(){this.isMapNavigation||(this.isMapNavigation=!0,this._evalMapNavigation())},disableMapNavigation:function(){this.isMapNavigation&&
(this.isMapNavigation=!1,this._evalMapNavigation())},_evalMapNavigation:function(){this.isMapNavigation?this.navigationManager.enableNavigation():this.navigationManager.disableNavigation()},_evalNavigationFeature:function(X){if(this.isMapNavigation&&this["is"+X])this.navigationManager["enable"+X]();else this.navigationManager["disable"+X]()},enableDoubleClickZoom:function(){this.isDoubleClickZoom||(this.isDoubleClickZoom=!0,this._evalNavigationFeature("DoubleClickZoom"))},disableDoubleClickZoom:function(){this.isDoubleClickZoom&&
(this.isDoubleClickZoom=!1,this._evalNavigationFeature("DoubleClickZoom"))},enableShiftDoubleClickZoom:function(){this.isShiftDoubleClickZoom||(Y(this.declaredClass+": Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.",null,"v2.0"),this.navigationManager.enableShiftDoubleClickZoom(),this.isShiftDoubleClickZoom=!0)},disableShiftDoubleClickZoom:function(){this.isShiftDoubleClickZoom&&(Y(this.declaredClass+": Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.",
null,"v2.0"),this.navigationManager.disableShiftDoubleClickZoom(),this.isShiftDoubleClickZoom=!1)},enableClickRecenter:function(){this.isClickRecenter||(this.isClickRecenter=!0,this._evalNavigationFeature("ClickRecenter"))},disableClickRecenter:function(){this.isClickRecenter&&(this.isClickRecenter=!1,this._evalNavigationFeature("ClickRecenter"))},enablePan:function(){this.isPan||(this.isPan=!0,this._evalNavigationFeature("Pan"))},disablePan:function(){this.isPan&&(this.isPan=!1,this._evalNavigationFeature("Pan"))},
enableRubberBandZoom:function(){this.isRubberBandZoom||(this.isRubberBandZoom=!0,this._evalNavigationFeature("RubberBandZoom"))},disableRubberBandZoom:function(){this.isRubberBandZoom&&(this.isRubberBandZoom=!1,this._evalNavigationFeature("RubberBandZoom"))},enablePinchZoom:function(){this.isPinchZoom||(this.isPinchZoom=!0,this._evalNavigationFeature("PinchZoom"))},disablePinchZoom:function(){this.isPinchZoom&&(this.isPinchZoom=!1,this._evalNavigationFeature("PinchZoom"))},enableKeyboardNavigation:function(){this.isKeyboardNavigation||
(this.isKeyboardNavigation=!0,this._evalNavigationFeature("KeyboardNavigation"))},disableKeyboardNavigation:function(){this.isKeyboardNavigation&&(this.isKeyboardNavigation=!1,this._evalNavigationFeature("KeyboardNavigation"))},enableScrollWheel:function(){this.isScrollWheel||(this.isScrollWheel=!0,this._evalNavigationFeature("ScrollWheel"))},disableScrollWheel:function(){this.isScrollWheel&&(this.isScrollWheel=!1,this._evalNavigationFeature("ScrollWheel"))},enableScrollWheelZoom:function(){this.isScrollWheelZoom||
(this.navigationManager.enableScrollWheelZoom(),this.isScrollWheelZoom=!0)},disableScrollWheelZoom:function(){this.isScrollWheelZoom&&(this.navigationManager.disableScrollWheelZoom(),this.isScrollWheelZoom=!1)},enableScrollWheelPan:function(){this.isScrollWheelPan||this.navigationManager.enableScrollWheelPan()},disableScrollWheelPan:function(){this.isScrollWheelPan&&this.navigationManager.disableScrollWheelPan()},showPanArrows:function(){this._navDiv&&(this._navDiv.style.display="block",this.isPanArrows=
!0)},hidePanArrows:function(){this._navDiv&&(this._navDiv.style.display="none",this.isPanArrows=!1)},showZoomSlider:function(){this._slider&&(I(this._slider.domNode||this._slider,"visibility","inherit"),this.isZoomSlider=!0)},hideZoomSlider:function(){this._slider&&(I(this._slider.domNode||this._slider,"visibility","hidden"),this.isZoomSlider=!1)},onClick:function(X){X.graphic||(X.graphic=this.syncHitTestForWebGL(X))}});A("extend-esri")&&(x.Map=y);return y})},"esri/lang":function(){define("dojo/_base/array dojo/_base/json dojo/_base/kernel dojo/_base/lang dojo/date dojo/has dojo/number dojo/date/locale ./kernel".split(" "),
function(B,y,c,u,q,l,m,h,f){function d(v,A,n,w){(A=A&&A[v])?A={formatType:A.formatType,options:A}:w&&-1!==B.indexOf(w.properties||"",v)?A={formatType:w.formatter||"DateString",options:null}:n&&-1!==B.indexOf(n.properties||"",v)&&(A={formatType:n.formatter||"NumberFormat",options:null});return A}function a(v,A,n){return[u.isString(v)?v.split(""):v,A||c.global,u.isString(n)?new Function("item","index","array",n):n]}function b(v){return void 0!==v&&null!==v}function e(v){return b(v)?v:""}function r(v,
A,n,w){var p=n.match(/([^\(]+)(\([^\)]+\))?/i);n=u.trim(p[1]);var D=p[2]?u.trim(p[2]):null;p=A[v];w=w||(D?y.fromJson(D.replace(/^\(/,"({").replace(/\)$/,"})")):{});D=w.utcOffset;if(-1===B.indexOf(g,n))n=u.getObject(n),u.isFunction(n)&&(p=n(p,v,A,w));else if("number"===typeof p||"string"===typeof p&&p&&!isNaN(Number(p)))switch(p=Number(p),n){case "NumberFormat":return m.format(p,w);case "DateString":v=new Date(p);if(w.local||w.systemLocale)return w.systemLocale?v.toLocaleDateString()+(w.hideTime?"":
" "+v.toLocaleTimeString()):v.toDateString()+(w.hideTime?"":" "+v.toTimeString());v=v.toUTCString();w.hideTime&&(v=v.replace(/\s+\d\d:\d\d:\d\d\s+(utc|gmt)/i,""));return v;case "DateFormat":return v=new Date(p),b(D)&&(v=q.add(v,"minute",v.getTimezoneOffset()-D)),h.format(v,w)}return e(p)}function t(v,A){var n;if(A)for(n in v)v.hasOwnProperty(n)&&(void 0===v[n]?delete v[n]:v[n]instanceof Object&&t(v[n],!0));else for(n in v)v.hasOwnProperty(n)&&void 0===v[n]&&delete v[n];return v}var g=["NumberFormat",
"DateString","DateFormat"],k=/<\/?[^>]+>/g,x={valueOf:function(v,A){for(var n in v)if(v[n]==A)return n;return null},stripTags:function(v){if(v){var A=typeof v;if("string"===A)v=v.replace(k,"");else if("object"===A)for(var n in v)(A=v[n])&&"string"===typeof A&&(A=A.replace(k,"")),v[n]=A}return v},substitute:function(v,A,n){if(b(n))if(u.isObject(n)){var w=n.first;var p=n.dateFormat;var D=n.numberFormat;var C=n.format}else w=n;if(A&&"${*}"!==A)return u.replace(A,u.hitch({obj:v},function(z,E){var H=E.split(":");
return 1<H.length?(E=H[0],H.shift(),(z=C&&C[H[0]])?H=z.formatType:(H=H.join(":"),z=null),r(E,this.obj,H,z)):(z=d(E,C,D,p))?r(E,this.obj,z.formatType,z.options):e(this.obj[E])}),/\$\{([^\}]+)\}/g);A=[];for(var G in v)if(n=(n=d(G,C,D,p))?r(G,v,n.formatType,n.options):v[G],A.push(G+" \x3d "+e(n)+"\x3cbr/\x3e"),w)break;return A.join("")},filter:function(v,A,n){A=a(v,n,A);n={};var w;v=A[0];for(w in v)A[2].call(A[w],v[w],w,v)&&(n[w]=v[w]);return n},startsWith:function(v,A,n){n=n||0;return v.indexOf(A,n)===
n},endsWith:function(v,A,n){if("number"!==typeof n||!isFinite(n)||Math.floor(n)!==n||n>v.length)n=v.length;n-=A.length;v=v.indexOf(A,n);return-1!==v&&v===n},isDefined:b,fixJson:t,isObject:function(v){return v&&"object"===typeof v},isString:function(v){return"string"===typeof v},mixin:function(v,A){for(var n in A)A.hasOwnProperty(n)&&(v[n]=A[n]);return v},clone2DArray:function(v){if(v=v?v.slice(0):null){var A,n=v.length;for(A=0;A<n;A++)v[A]=v[A]?v[A].slice(0):null}return v},clone3DArray:function(v){if(v=
v?v.slice(0):null){var A,n=v.length;for(A=0;A<n;A++){v[A]=v[A]?v[A].slice(0):null;var w=v[A];if(w){var p,D=w.length;for(p=0;p<D;p++)w[p]=w[p]?w[p].slice(0):null}}}return v}};l("extend-esri")&&(u.mixin(f,x),f._isDefined=b,f._getParts=a,f._sanitize=t);return x})},"dojo/date":function(){define(["./has","./_base/lang"],function(B,y){var c={getDaysInMonth:function(u){var q=u.getMonth();return 1==q&&c.isLeapYear(u)?29:[31,28,31,30,31,30,31,31,30,31,30,31][q]},isLeapYear:function(u){u=u.getFullYear();return!(u%
400)||!(u%4)&&!!(u%100)},getTimezoneName:function(u){var q=u.toString(),l="",m=q.indexOf("(");if(-1<m)l=q.substring(++m,q.indexOf(")"));else if(m=/([A-Z\/]+) \d{4}$/,q=q.match(m))l=q[1];else if(q=u.toLocaleString(),m=/ ([A-Z\/]+)$/,q=q.match(m))l=q[1];return"AM"==l||"PM"==l?"":l},compare:function(u,q,l){u=new Date(+u);q=new Date(+(q||new Date));"date"==l?(u.setHours(0,0,0,0),q.setHours(0,0,0,0)):"time"==l&&(u.setFullYear(0,0,0),q.setFullYear(0,0,0));return u>q?1:u<q?-1:0},add:function(u,q,l){var m=
new Date(+u),h=!1,f="Date";switch(q){case "day":break;case "weekday":if(q=l%5)var d=parseInt(l/5);else q=0<l?5:-5,d=0<l?(l-5)/5:(l+5)/5;var a=u.getDay(),b=0;6==a&&0<l?b=1:0==a&&0>l&&(b=-1);a+=q;if(0==a||6==a)b=0<l?2:-2;l=7*d+q+b;break;case "year":f="FullYear";h=!0;break;case "week":l*=7;break;case "quarter":l*=3;case "month":h=!0;f="Month";break;default:f="UTC"+q.charAt(0).toUpperCase()+q.substring(1)+"s"}if(f)m["set"+f](m["get"+f]()+l);h&&m.getDate()<u.getDate()&&m.setDate(0);return m},difference:function(u,
q,l){q=q||new Date;l=l||"day";var m=q.getFullYear()-u.getFullYear(),h=1;switch(l){case "quarter":u=u.getMonth();q=q.getMonth();h=Math.floor(q/3)+1+4*m-(Math.floor(u/3)+1);break;case "weekday":m=Math.round(c.difference(u,q,"day"));l=parseInt(c.difference(u,q,"week"));if(0==m%7)m=5*l;else{h=0;var f=u.getDay(),d=q.getDay();l=parseInt(m/7);q=m%7;u=new Date(u);u.setDate(u.getDate()+7*l);u=u.getDay();if(0<m)switch(!0){case 6==f:h=-1;break;case 0==f:h=0;break;case 6==d:h=-1;break;case 0==d:h=-2;break;case 5<
u+q:h=-2}else if(0>m)switch(!0){case 6==f:h=0;break;case 0==f:h=1;break;case 6==d:h=2;break;case 0==d:h=1;break;case 0>u+q:h=2}m=m+h-2*l}h=m;break;case "year":h=m;break;case "month":h=q.getMonth()-u.getMonth()+12*m;break;case "week":h=parseInt(c.difference(u,q,"day")/7);break;case "day":h/=24;case "hour":h/=60;case "minute":h/=60;case "second":h/=1E3;case "millisecond":h*=q.getTime()-u.getTime()}return Math.round(h)}};y.mixin(y.getObject("dojo.date",!0),c);return c})},"dojo/number":function(){define(["./_base/lang",
"./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(B,y,c,u,q){var l={};B.setObject("dojo.number",l);l.format=function(h,f){f=B.mixin({},f||{});var d=y.normalizeLocale(f.locale);d=y.getLocalization("dojo.cldr","number",d);f.customs=d;d=f.pattern||d[(f.type||"decimal")+"Format"];return isNaN(h)||Infinity==Math.abs(h)?null:l._applyPattern(h,d,f)};l._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;l._applyPattern=function(h,f,d){d=d||{};var a=d.customs.group,b=d.customs.decimal;f=f.split(";");
var e=f[0];f=f[0>h?1:0]||"-"+e;if(-1!=f.indexOf("%"))h*=100;else if(-1!=f.indexOf("\u2030"))h*=1E3;else if(-1!=f.indexOf("\u00a4"))a=d.customs.currencyGroup||a,b=d.customs.currencyDecimal||b,f=f.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/,function(t,g,k,x){return(t=d[["symbol","currency","displayName"][k.length-1]]||d.currency||"")?g+t+x:""});else if(-1!=f.indexOf("E"))throw Error("exponential notation not supported");var r=l._numberPatternRE;e=e.match(r);if(!e)throw Error("unable to find a number expression in pattern: "+
f);!1===d.fractional&&(d.places=0);return f.replace(r,l._formatAbsolute(h,e[0],{decimal:b,group:a,places:d.places,round:d.round}))};l.round=function(h,f,d){d=10/(d||10);return(d*+h).toFixed(f)/d};if(0==(.9).toFixed()){var m=l.round;l.round=function(h,f,d){var a=Math.pow(10,-f||0),b=Math.abs(h);if(!h||b>=a)a=0;else if(b/=a,.5>b||.95<=b)a=0;return m(h,f,d)+(0<h?a:-a)}}l._formatAbsolute=function(h,f,d){d=d||{};!0===d.places&&(d.places=0);Infinity===d.places&&(d.places=6);f=f.split(".");var a="string"==
typeof d.places&&d.places.indexOf(","),b=d.places;a?b=d.places.substring(a+1):0<=b||(b=(f[1]||[]).length);0>d.round||(h=l.round(h,b,d.round));h=String(Math.abs(h)).split(".");var e=h[1]||"";f[1]||d.places?(a&&(d.places=d.places.substring(0,a)),a=void 0!==d.places?d.places:f[1]&&f[1].lastIndexOf("0")+1,a>e.length&&(h[1]=u.pad(e,a,"0",!0)),b<e.length&&(h[1]=e.substr(0,b))):h[1]&&h.pop();b=f[0].replace(",","");a=b.indexOf("0");-1!=a&&(a=b.length-a,a>h[0].length&&(h[0]=u.pad(h[0],a)),-1==b.indexOf("#")&&
(h[0]=h[0].substr(h[0].length-a)));b=f[0].lastIndexOf(",");var r;if(-1!=b){var t=f[0].length-b-1;f=f[0].substr(0,b);b=f.lastIndexOf(",");-1!=b&&(r=f.length-b-1)}f=[];for(b=h[0];b;)a=b.length-t,f.push(0<a?b.substr(a):b),b=0<a?b.slice(0,a):"",r&&(t=r,r=void 0);h[0]=f.reverse().join(d.group||",");return h.join(d.decimal||".")};l.regexp=function(h){return l._parseInfo(h).regexp};l._parseInfo=function(h){h=h||{};var f=y.normalizeLocale(h.locale);f=y.getLocalization("dojo.cldr","number",f);var d=h.pattern||
f[(h.type||"decimal")+"Format"],a=f.group,b=f.decimal,e=1;if(-1!=d.indexOf("%"))e/=100;else if(-1!=d.indexOf("\u2030"))e/=1E3;else{var r=-1!=d.indexOf("\u00a4");r&&(a=f.currencyGroup||a,b=f.currencyDecimal||b)}f=d.split(";");1==f.length&&f.push("-"+f[0]);f=q.buildGroupRE(f,function(t){t="(?:"+q.escapeString(t,".")+")";return t.replace(l._numberPatternRE,function(g){var k={signed:!1,separator:h.strict?a:[a,""],fractional:h.fractional,decimal:b,exponent:!1};g=g.split(".");var x=h.places;1==g.length&&
1!=e&&(g[1]="###");1==g.length||0===x?k.fractional=!1:(void 0===x&&(x=h.pattern?g[1].lastIndexOf("0")+1:Infinity),x&&void 0==h.fractional&&(k.fractional=!0),!h.places&&x<g[1].length&&(x+=","+g[1].length),k.places=x);g=g[0].split(",");1<g.length&&(k.groupSize=g.pop().length,1<g.length&&(k.groupSize2=g.pop().length));return"("+l._realNumberRegexp(k)+")"})},!0);r&&(f=f.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(t,g,k,x){t=q.escapeString(h[["symbol","currency","displayName"][k.length-1]]||
h.currency||"");if(!t)return"";g=g?"[\\s\\xa0]":"";x=x?"[\\s\\xa0]":"";return h.strict?g+t+x:(g&&(g+="*"),x&&(x+="*"),"(?:"+g+t+x+")?")}));return{regexp:f.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:a,decimal:b,factor:e}};l.parse=function(h,f){f=l._parseInfo(f);h=(new RegExp("^"+f.regexp+"$")).exec(h);if(!h)return NaN;var d=h[1];if(!h[1]){if(!h[2])return NaN;d=h[2];f.factor*=-1}d=d.replace(new RegExp("["+f.group+"\\s\\xa0]","g"),"").replace(f.decimal,".");return d*f.factor};l._realNumberRegexp=function(h){h=
h||{};"places"in h||(h.places=Infinity);"string"!=typeof h.decimal&&(h.decimal=".");"fractional"in h&&!/^0/.test(h.places)||(h.fractional=[!0,!1]);"exponent"in h||(h.exponent=[!0,!1]);"eSigned"in h||(h.eSigned=[!0,!1]);var f=l._integerRegexp(h),d=q.buildGroupRE(h.fractional,function(b){var e="";b&&0!==h.places&&(e="\\"+h.decimal,e=Infinity==h.places?"(?:"+e+"\\d+)?":e+("\\d{"+h.places+"}"));return e},!0),a=q.buildGroupRE(h.exponent,function(b){return b?"([eE]"+l._integerRegexp({signed:h.eSigned})+
")":""});f+=d;d&&(f="(?:(?:"+f+")|(?:"+d+"))");return f+a};l._integerRegexp=function(h){h=h||{};"signed"in h||(h.signed=[!0,!1]);"separator"in h?"groupSize"in h||(h.groupSize=3):h.separator="";var f=q.buildGroupRE(h.signed,function(a){return a?"[-+]":""},!0),d=q.buildGroupRE(h.separator,function(a){if(!a)return"(?:\\d+)";a=q.escapeString(a);" "==a?a="\\s":"\u00a0"==a&&(a="\\s\\xa0");var b=h.groupSize,e=h.groupSize2;return e?(a="(?:0|[1-9]\\d{0,"+(e-1)+"}(?:["+a+"]\\d{"+e+"})*["+a+"]\\d{"+b+"})",0<
b-e?"(?:"+a+"|(?:0|[1-9]\\d{0,"+(b-1)+"}))":a):"(?:0|[1-9]\\d{0,"+(b-1)+"}(?:["+a+"]\\d{"+b+"})*)"},!0);return f+d};return l})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(B,y){var c={};y.setObject("dojo.regexp",c);c.escapeString=function(u,q){return u.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(l){return q&&-1!=q.indexOf(l)?l:"\\"+l})};c.buildGroupRE=function(u,q,l){if(!(u instanceof Array))return q(u);for(var m=[],h=0;h<u.length;h++)m.push(q(u[h]));return c.group(m.join("|"),
l)};c.group=function(u,q){return"("+(q?"?:":"")+u+")"};return c})},"dojo/date/locale":function(){define("../_base/lang ../_base/array ../date ../cldr/supplemental ../i18n ../regexp ../string ../i18n!../cldr/nls/gregorian module".split(" "),function(B,y,c,u,q,l,m,h,f){function d(k,x,v,A){return A.replace(/([a-z])\1*/ig,function(n){var w=n.charAt(0);n=n.length;var p=["abbr","wide","narrow"];switch(w){case "G":var D=x[4>n?"eraAbbr":"eraNames"][0>k.getFullYear()?0:1];break;case "y":D=k.getFullYear();
switch(n){case 1:break;case 2:if(!v.fullYear){D=String(D);D=D.substr(D.length-2);break}default:var C=!0}break;case "Q":case "q":D=Math.ceil((k.getMonth()+1)/3);C=!0;break;case "M":case "L":D=k.getMonth();3>n?(D+=1,C=!0):(w=["months","L"==w?"standAlone":"format",p[n-3]].join("-"),D=x[w][D]);break;case "w":D=e._getWeekOfYear(k,0);C=!0;break;case "d":D=k.getDate();C=!0;break;case "D":D=e._getDayOfYear(k);C=!0;break;case "e":case "c":if(D=k.getDay(),2>n){D=(D-u.getFirstDayOfWeek(v.locale)+8)%7;break}case "E":D=
k.getDay();3>n?(D+=1,C=!0):(w=["days","c"==w?"standAlone":"format",p[n-3]].join("-"),D=x[w][D]);break;case "a":w=12>k.getHours()?"am":"pm";D=v[w]||x["dayPeriods-format-wide-"+w];break;case "h":case "H":case "K":case "k":C=k.getHours();switch(w){case "h":D=C%12||12;break;case "H":D=C;break;case "K":D=C%12;break;case "k":D=C||24}C=!0;break;case "m":D=k.getMinutes();C=!0;break;case "s":D=k.getSeconds();C=!0;break;case "S":D=Math.round(k.getMilliseconds()*Math.pow(10,n-3));C=!0;break;case "v":case "z":if(D=
e._getZone(k,!0,v))break;n=4;case "Z":w=e._getZone(k,!1,v);w=[0>=w?"+":"-",m.pad(Math.floor(Math.abs(w)/60),2),m.pad(Math.abs(w)%60,2)];4==n&&(w.splice(0,0,"GMT"),w.splice(3,0,":"));D=w.join("");break;default:throw Error("dojo.date.locale.format: invalid pattern char: "+A);}C&&(D=m.pad(D,n));return D})}function a(k,x,v,A){var n=function(D){return D};x=x||n;v=v||n;A=A||n;var w=k.match(/(''|[^'])+/g),p="'"==k.charAt(0);y.forEach(w,function(D,C){D?(w[C]=(p?v:x)(D.replace(/''/g,"'")),p=!p):w[C]=""});
return A(w.join(""))}function b(k,x,v,A){A=l.escapeString(A);v.strict||(A=A.replace(" a"," ?a"));return A.replace(/([a-z])\1*/ig,function(n){var w=n.charAt(0);var p=n.length,D="",C="";v.strict?(1<p&&(D="0{"+(p-1)+"}"),2<p&&(C="0{"+(p-2)+"}")):(D="0?",C="0{0,2}");switch(w){case "y":w="\\d{2,4}";break;case "M":case "L":2<p?(w=x["months-"+("L"==w?"standAlone":"format")+"-"+r[p-3]].slice(0).join("|"),v.strict||(w=w.replace(/\./g,""),w="(?:"+w+")\\.?")):w="1[0-2]|"+D+"[1-9]";break;case "D":w="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+
D+"[1-9][0-9]|"+C+"[1-9]";break;case "d":w="3[01]|[12]\\d|"+D+"[1-9]";break;case "w":w="[1-4][0-9]|5[0-3]|"+D+"[1-9]";break;case "E":case "e":case "c":w=".+?";break;case "h":w="1[0-2]|"+D+"[1-9]";break;case "k":w="1[01]|"+D+"\\d";break;case "H":w="1\\d|2[0-3]|"+D+"\\d";break;case "K":w="1\\d|2[0-4]|"+D+"[1-9]";break;case "m":case "s":w="[0-5]\\d";break;case "S":w="\\d{"+p+"}";break;case "a":p=v.am||x["dayPeriods-format-wide-am"];D=v.pm||x["dayPeriods-format-wide-pm"];w=p+"|"+D;v.strict||(p!=p.toLowerCase()&&
(w+="|"+p.toLowerCase()),D!=D.toLowerCase()&&(w+="|"+D.toLowerCase()),-1!=w.indexOf(".")&&(w+="|"+w.replace(/\./g,"")));w=w.replace(/\./g,"\\.");break;default:w=".*"}k&&k.push(n);return"("+w+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var e={};B.setObject(f.id.replace(/\//g,"."),e);e._getZone=function(k,x,v){return x?c.getTimezoneName(k):k.getTimezoneOffset()};e.format=function(k,x){x=x||{};var v=q.normalizeLocale(x.locale),A=x.formatLength||"short";v=e._getGregorianBundle(v);var n=[];k=B.hitch(this,d,
k,v,x);if("year"==x.selector)return a(v["dateFormatItem-yyyy"]||"yyyy",k);var w;"date"!=x.selector&&(w=x.timePattern||v["timeFormat-"+A])&&n.push(a(w,k));"time"!=x.selector&&(w=x.datePattern||v["dateFormat-"+A])&&n.push(a(w,k));return 1==n.length?n[0]:v["dateTimeFormat-"+A].replace(/'/g,"").replace(/\{(\d+)\}/g,function(p,D){return n[D]})};e.regexp=function(k){return e._parseInfo(k).regexp};e._parseInfo=function(k){k=k||{};var x=q.normalizeLocale(k.locale);x=e._getGregorianBundle(x);var v=k.formatLength||
"short",A=k.datePattern||x["dateFormat-"+v],n=k.timePattern||x["timeFormat-"+v];v="date"==k.selector?A:"time"==k.selector?n:x["dateTimeFormat-"+v].replace(/\{(\d+)\}/g,function(p,D){return[n,A][D]});var w=[];return{regexp:a(v,B.hitch(this,b,w,x,k)),tokens:w,bundle:x}};e.parse=function(k,x){var v=/[\u200E\u200F\u202A\u202E]/g,A=e._parseInfo(x),n=A.tokens,w=A.bundle;k=(new RegExp("^"+A.regexp.replace(v,"")+"$",A.strict?"":"i")).exec(k&&k.replace(v,""));if(!k)return null;var p=["abbr","wide","narrow"],
D=[1970,0,1,0,0,0,0],C="";k=y.every(k,function(z,E){if(!E)return!0;var H=n[E-1];E=H.length;H=H.charAt(0);switch(H){case "y":if(2!=E&&x.strict)D[0]=z;else if(100>z)z=Number(z),H=""+(new Date).getFullYear(),E=100*H.substring(0,2),H=Math.min(Number(H.substring(2,4))+20,99),D[0]=z<H?E+z:E-100+z;else{if(x.strict)return!1;D[0]=z}break;case "M":case "L":if(2<E){if(E=w["months-"+("L"==H?"standAlone":"format")+"-"+p[E-3]].concat(),x.strict||(z=z.replace(".","").toLowerCase(),E=y.map(E,function(M){return M.replace(".",
"").toLowerCase()})),z=y.indexOf(E,z),-1==z)return!1}else z--;D[1]=z;break;case "E":case "e":case "c":E=w["days-"+("c"==H?"standAlone":"format")+"-"+p[E-3]].concat();x.strict||(z=z.toLowerCase(),E=y.map(E,function(M){return M.toLowerCase()}));z=y.indexOf(E,z);if(-1==z)return!1;break;case "D":D[1]=0;case "d":D[2]=z;break;case "a":E=x.am||w["dayPeriods-format-wide-am"];H=x.pm||w["dayPeriods-format-wide-pm"];if(!x.strict){var I=/\./g;z=z.replace(I,"").toLowerCase();E=E.replace(I,"").toLowerCase();H=
H.replace(I,"").toLowerCase()}if(x.strict&&z!=E&&z!=H)return!1;C=z==H?"p":z==E?"a":"";break;case "K":24==z&&(z=0);case "h":case "H":case "k":if(23<z)return!1;D[3]=z;break;case "m":D[4]=z;break;case "s":D[5]=z;break;case "S":D[6]=z}return!0});v=+D[3];"p"===C&&12>v?D[3]=v+12:"a"===C&&12==v&&(D[3]=0);v=new Date(D[0],D[1],D[2],D[3],D[4],D[5],D[6]);x.strict&&v.setFullYear(D[0]);var G=n.join("");A=-1!=G.indexOf("d");G=-1!=G.indexOf("M");if(!k||G&&v.getMonth()>D[1]||A&&v.getDate()>D[2])return null;if(G&&
v.getMonth()<D[1]||A&&v.getDate()<D[2])v=c.add(v,"hour",1);return v};var r=["abbr","wide","narrow"],t=[],g={};e.addCustomFormats=function(k,x){t.push({pkg:k,name:x});g={}};e._getGregorianBundle=function(k){if(g[k])return g[k];var x={};y.forEach(t,function(v){v=q.getLocalization(v.pkg,v.name,k);x=B.mixin(x,v)},this);return g[k]=x};e.addCustomFormats(f.id.replace(/\/date\/locale$/,".cldr"),"gregorian");e.getNames=function(k,x,v,A){A=e._getGregorianBundle(A);k=[k,v,x];if("standAlone"==v){v=k.join("-");
var n=A[v];1==n[0]&&(n=void 0)}k[1]="format";return(n||A[k.join("-")]).concat()};e.isWeekend=function(k,x){x=u.getWeekend(x);k=(k||new Date).getDay();x.end<x.start&&(x.end+=7,k<x.start&&(k+=7));return k>=x.start&&k<=x.end};e._getDayOfYear=function(k){return c.difference(new Date(k.getFullYear(),0,1,k.getHours()),k)+1};e._getWeekOfYear=function(k,x){1==arguments.length&&(x=0);var v=(new Date(k.getFullYear(),0,1)).getDay(),A=(v-x+7)%7;A=Math.floor((e._getDayOfYear(k)+A-1)/7);v==x&&A++;return A};return e})},
"dojo/cldr/supplemental":function(){define(["../_base/lang","../i18n"],function(B,y){var c={};B.setObject("dojo.cldr.supplemental",c);c.getFirstDayOfWeek=function(u){u={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,
sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0}[c._region(u)];return void 0===u?1:u};c._region=function(u){u=y.normalizeLocale(u);u=u.split("-");var q=u[1];q?4==q.length&&(q=u[2]):q={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",es:"es",et:"ee",eu:"es",fa:"ir",ff:"sn",
fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",gu:"in",gv:"gb",ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us","in":"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",mi:"nz",mk:"mk",ml:"in",mn:"mn",mo:"ro",
mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",nl:"nl",nn:"no",no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",ty:"pf",ug:"cn",uk:"ua",ur:"pk",uz:"uz",
ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",zu:"za",ace:"id",ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",cjm:"vn",ckb:"iq",crk:"ca",csb:"pl",
dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",dyo:"sn",dyu:"bf",ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",kha:"in",khb:"cn",khq:"ml",kht:"in",
kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",kri:"sl",krl:"ru",kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",nap:"it",naq:"na",nds:"de","new":"np",
niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",pag:"ph",pam:"ph",pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",teo:"ug",tet:"tl",
tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",tum:"mw",tvl:"tv",twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",yav:"cm",zza:"tr"}[u[0]];return q};c.getWeekend=function(u){var q=c._region(u);u={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5}[q];q={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,
ma:6,qa:6,sd:6,sy:6,tn:6}[q];void 0===u&&(u=6);void 0===q&&(q=0);return{start:u,end:q}};return c})},"esri/_coremap":function(){define("require module dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/Deferred dojo/_base/lang dojo/_base/array dojo/_base/event dojo/_base/unload dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/sniff dijit/registry dojox/gfx/matrix ./kernel ./config ./basemaps ./lang ./Evented ./fx ./deferredUtils ./tileUtils ./urlUtils ./PluginTarget ./Color ./promiseList ./arcade/Dictionary ./geometry/Point ./geometry/ScreenPoint ./geometry/Extent ./geometry/Rect ./geometry/mathUtils ./geometry/scaleUtils ./geometry/screenUtils ./geometry/webMercatorUtils ./layers/GraphicsLayer ./layers/TileInfo ./layers/LOD ./layers/ArcGISTiledMapServiceLayer ./layers/MapImageLayer ./layers/OpenStreetMapLayer ./layers/support/webglUtils ./dijit/Popup ./plugins/popupManager dojo/uacss".split(" "),
function(B,y,c,u,q,l,m,h,f,d,a,b,e,r,t,g,k,x,v,A,n,w,p,D,C,G,z,E,H,I,M,T,Y,fa,ca,X,ea,ma,wa,P,ja,ta,N,S,ha,la,sa,ya){function Ga(L,R){var aa=L.lods;aa.sort(function(Ba,Qa){return Ba.scale>Qa.scale?-1:Ba.scale<Qa.scale?1:0});var ka=[];aa=h.filter(aa,function(Ba){if(-1===U(ka,Ba.scale))return ka.push(Ba.scale),!0});var ua=R.lods=[],Aa;h.forEach(aa,function(Ba,Qa){Aa=ua[Qa]=new N(Ba);Aa.level=Qa});R.tileInfo=new ta(na(L,{lods:ua}))}var ba,da=wa.toMapPoint,oa=wa.toScreenPoint,va=q.connect,pa=q.disconnect,
Oa=m.hitch,W=g.set,U=h.indexOf,na=m.mixin,qa=0,Ea=n.defaults.map,Ta=Ea.layerNamePrefix,Ya=Ea.graphicsLayerNamePrefix,bb=new RegExp("^"+Ta+"(\\d+)$"),Ma=new RegExp("^"+Ya+"(\\d+)$"),J=function(){},Q=0,Z=sa.isWebGLEnabled();u=u([D,H],{declaredClass:"esri._CoreMap",tables:null,resizeDelay:300,invalidExtent:"Map does not have a valid extent.",invalidGeometry:"Geometry (wkid: ${geometry}) cannot be converted to spatial reference of the map (wkid: ${map})",unknownBasemap:'Unable to find basemap definition for: "${basemapName}". Try one of these: ${list}',
invalidBasemap:'Unable to add basemap: "${basemapName}".',unknownLayerType:'Unknown basemap layer type: "${type}" found in basemap definition for: "${basemapName}".',visible:!0,webglEnabled:Z,_eventMap:{"basemap-change":!0,"extent-change":["extent","delta","levelChange","lod"],"layer-add":["layer"],"layer-add-result":["layer","error"],"layer-remove":["layer"],"layer-reorder":["layer","index"],"layer-resume":["layer"],"layer-suspend":["layer"],"layers-add-result":["layers"],"layers-removed":!0,"layers-reordered":["layerIds"],
load:["map"],pan:["extent","delta"],"pan-end":["extent","delta"],"pan-start":["extent","screenPoint"],reposition:["x","y"],resize:["extent","width","height"],scale:["matrix","immediate"],"time-extent-change":["timeExtent"],"before-unload":["map"],unload:["map"],"update-end":["error"],"update-start":!0,zoom:["extent","zoomFactor","anchor"],"zoom-end":["extent","zoomFactor","anchor","level"],"zoom-start":["extent","zoomFactor","anchor","level"],click:!0,"dbl-click":!0,"key-down":!0,"key-up":!0,"mouse-down":!0,
"mouse-drag":!0,"mouse-drag-end":!0,"mouse-drag-start":!0,"mouse-move":!0,"mouse-out":!0,"mouse-over":!0,"mouse-up":!0,"mouse-wheel":!0,"basic-tap":!0,"double-tap":!0,"pinch-end":!0,"pinch-move":!0,"pinch-start":!0,"processed-double-tap":!0,"processed-tap":!0,"swipe-end":!0,"swipe-move":!0,"swipe-start":!0,tap:!0,"two-finger-tap":!0},constructor:function(L,R){R=R||{};this.registerConnectEvents();na(this,{_internalLayerIds:[],_layers:[],_layerDivs:[],_basemapPending:!1,_connects:[],_layerAddPromises:{},
_zoomAnimDiv:null,_zoomAnim:null,_layersDiv:null,_firstLayerId:null,_delta:null,_cursor:null,_ratioW:1,_ratioH:1,_params:null,_minResolution:0,_maxResolution:0,cursor:null,layerIds:[],graphicsLayerIds:[],graphics:null,_labels:null,loaded:!1,__panning:!1,__zooming:!1,__container:null,root:null,__LOD:null,__tileInfo:null,__visibleRect:null,__visibleDelta:null,_rids:[],_webglContextOwners:[]});var aa=this.container=a.byId(L),ka=this.id=b.get(aa,"id")||x.getUniqueId(this.declaredClass);e.add(aa,"map");
var ua=t.getContentBox(aa);L=e.add;var Aa=r.create;this.position=new fa(0,0);this._reposition();var Ba=this.width=0<ua.w?ua.w:Ea.width,Qa=this.height=0<ua.h?ua.h:Ea.height,La=this.root=Aa("div",{id:ka+"_root",style:{width:Ba+"px",height:Qa+"px",direction:"ltr"}});L(La,"esriMapContainer");ua=this.__container=Aa("div",{id:ka+"_container"},La);W(ua,"position","absolute");L(ua,"esriMapContainer");aa.appendChild(La);R=this._params=na({slider:!0,nav:!1,zoom:-1,minZoom:-1,maxZoom:-1,scale:-1,minScale:0,
maxScale:0,showInfoWindowOnClick:!0,displayGraphicsOnPan:!0,wrapAround180:!0,fitExtent:!1,optimizePanAnimation:!0},R);this.setWebGLEnabled(null!=R.webglEnabled?R.webglEnabled:this.webglEnabled);this.maxWebGLContexts=null!=R.maxWebGLContexts?R.maxWebGLContexts:-1;this.wrapAround180=R.wrapAround180;this.optimizePanAnimation=R.optimizePanAnimation;this.setBackgroundColor(R.backgroundColor);p.isDefined(R.resizeDelay)&&(this.resizeDelay=R.resizeDelay);R.lods&&(Ga({rows:512,cols:512,dpi:96,format:"JPEG",
compressionQuality:75,origin:{x:-180,y:90},spatialReference:{wkid:4326},lods:R.lods},R),this.__tileInfo=R.tileInfo);this.extent=R.extent;this._extentUtil({mapCenter:R.center,targetLevel:R.zoom,targetScale:R.scale});this.__visibleRect=new X(0,0,Ba,Qa);this.__visibleDelta=new X(0,0,Ba,Qa);ka=this._layersDiv=Aa("div",{id:ka+"_layers"});L(ka,"esriMapLayers");ua.appendChild(ka);this._zoomAnimDiv=Aa("div",{style:{position:"absolute"}});R.infoWindow?this.infoWindow=R.infoWindow:(L=this.infoWindow=new ya(R.popupOptions,
Aa("div")),L.startup(),L._ootb=!0,W(L.domNode,"zIndex",40));if(R.showLabels){var Ia=this;B(["./layers/LabelLayer"],function(Na){ba=Na;Ia._createLabelLayer()});this.on("load",function(){Ia._createLabelLayer()})}this.addPlugin(this._getAbsMid("./plugins/popupManager"),{enabled:R.showInfoWindowOnClick});this._zoomStartHandler=Oa(this,this._zoomStartHandler);this._zoomingHandler=Oa(this,this._zoomingHandler);this._zoomEndHandler=Oa(this,this._zoomEndHandler);this._panningHandler=Oa(this,this._panningHandler);
this._panEndHandler=Oa(this,this._panEndHandler);this._endTranslate=Oa(this,this._endTranslate);this._timedResize=Oa(this,this._timedResize);this._execResize=Oa(this,this._execResize);this._processLabelLayers=Oa(this,this._processLabelLayers);this._updateLabelLayers=Oa(this,this._updateLabelLayers);this.resize=Oa(this,this.resize);d.addOnWindowUnload(this,this.destroy)},_getAbsMid:function(L){return B.toAbsMid?B.toAbsMid(L):y.id.replace(/\/[^\/]*$/ig,"/")+L},_cleanUp:function(){var L=this.infoWindow;
L&&(L._ootb&&L.destroy?L.destroy():L.unsetMap(this),delete this.infoWindow);pa(this._tsTimeExtentChange_connect);this.removePlugin("./plugins/popupManager");r.destroy(this.root);this.root=null},_addLayer:function(L,R,aa){if(L.id){var ka=L.id.match(L instanceof ja?Ma:bb);ka&&ka[1]&&(ka=Number(ka[1]),qa<=ka&&(qa=ka+1))}var ua=L.id||(L instanceof ja?Ya:Ta)+qa++;L.id=ua;this._layers[ua]=L;L._isRefLayer="top"===aa;aa=!p.isDefined(aa)||0>aa||aa>R.length||"top"===aa?R.length:aa;var Aa;if(!L._isRefLayer)for(;(Aa=
this.getLayer(R[aa-1]))&&Aa._isRefLayer;)aa--;if(ka=!this._firstLayerId&&!this.loaded&&!this._basemapPending&&0===aa&&(R===this.layerIds||R===this.graphicsLayerIds))this._firstLayerId=ua;R.splice(aa,0,ua);var Ba=Oa(this,this._addLayerHandler),Qa=this;aa=this._connects;Aa=function(){L.loaded?Qa._onLoadFix?(Qa._onLoadFix=!1,setTimeout(function(){Ba(L)},0)):Ba(L):(Qa["_"+ua+"_addtoken_load"]=va(L,"onLoad",Qa,"_addLayerHandler"),Qa["_"+ua+"_addtoken_err"]=va(L,"onError",Qa,function(La){Ba(L,La,R)}))};
this.loaded||ka||L.loaded&&-1===U(this.graphicsLayerIds,ua)?Aa():aa.push(va(this,"onLoad",Aa));return L},_forgetLayer:function(L){L=L.id;pa(this["_"+L+"_addtoken_load"]);pa(this["_"+L+"_addtoken_err"]);var R=this._layerAddPromises[L];R&&(delete this._layerAddPromises[L],R.cancel())},_addLayerHandler:function(L,R,aa){R?this._attachLayerToMap(L,R,aa):L._prepareToAttach?(this._layerAddPromises[L.id]=L._prepareToAttach(this)).always(m.hitch(this,function(ka){ka&&"cancel"===ka.dojoType||this._attachLayerToMap(L,
null,aa)})):L.declaredClass&&-1<L.declaredClass.toLowerCase().indexOf("vectortilelayer")&&!this.isWebGLContextAvailable()?(R=Error("Too many WebGL contexts. Unable to add the layer: ",L.url),this._attachLayerToMap(L,R,this.layerIds)):this._attachLayerToMap(L,R,aa)},_attachLayerToMap:function(L,R,aa){var ka=this.id,ua=L.id,Aa=U(L instanceof ja?this.graphicsLayerIds:this.layerIds,ua),Ba=Aa,Qa=!1,La=this._params;this._forgetLayer(L);if(R)delete this._layers[ua],-1!==Aa&&(aa.splice(Aa,1),this.onLayerAddResult(L,
R));else{-1===Aa&&(Aa=U(this._internalLayerIds,ua),Ba=20+Aa,Qa=!0);if(ua===this._firstLayerId){R=L.spatialReference;aa=this.extent&&this.extent.spatialReference;!aa||aa.equals(R)||!L.tileInfo&&L.url||(aa=null);aa=this.spatialReference=aa||R;this.wrapAround180=this.wrapAround180&&aa&&aa._isWrappable()?!0:!1;L.tileInfo&&(this.__tileInfo?(R=this.__tileInfo.lods,this.__tileInfo=na({},L.tileInfo),this.__tileInfo.lods=R):(Ga(na({},L.tileInfo),La),this.__tileInfo=La.tileInfo));if(this.wrapAround180){R=this.__tileInfo;
aa=aa._getInfo();if(!R||Math.abs(aa.origin[0]-R.origin.x)>aa.dx)this.wrapAround180=!1;this.wrapAround180&&R&&z._addFrameInfo(R,aa)}La.units=L.units;if((R=this.__tileInfo&&this.__tileInfo.lods)&&R.length){aa=La.minScale;Aa=La.maxScale;var Ia=-1,Na=-1,eb=!1,ab=!1,gb;for(gb=0;gb<R.length;gb++)0<aa&&!eb&&aa>=R[gb].scale&&(Ia=R[gb].level,eb=!0),0<Aa&&!ab&&Aa>=R[gb].scale&&(Na=0<gb?R[gb-1].level:-1,ab=!0);-1===La.minZoom&&(La.minZoom=0===aa?R[0].level:Ia);-1===La.maxZoom&&(La.maxZoom=0===Aa?R[R.length-
1].level:Na);for(gb=0;gb<R.length;gb++)La.minZoom===R[gb].level&&(La.minScale=R[gb].scale,this._minResolution=R[gb].resolution),La.maxZoom===R[gb].level&&(La.maxScale=R[gb].scale,this._maxResolution=R[gb].resolution)}else La.minZoom=La.maxZoom=La.zoom=-1}L instanceof ja?(this._gc||(this._gc=new ja._GraphicsContainer,this._gc._setMap(this,this._layersDiv).id=ka+"_gc"),this._attachGraphicsLayer(L).id=ka+"_"+ua):(Ba=L._setMap(this,this._layersDiv,Ba,this.__LOD),Ba.id=ka+"_"+ua,this._layerDivs[ua]=Ba,
this._reorderLayers(this.layerIds),Qa||-1===L.declaredClass.indexOf("VETiledLayer")||this._onBingLayerAdd(L));ua===this._firstLayerId&&(this.graphics=new ja({id:ka+"_graphics",displayOnPan:La.displayGraphicsOnPan}),this._addLayer(this.graphics,this._internalLayerIds,20));if(L===this.graphics){aa=this._layers[this._firstLayerId];ka=La.zoom;Ba=La.scale;R=La.center;aa=aa.initialExtent||aa.fullExtent;this._firstLayerId=null;this.extent&&(this.extent=this._convertGeometry(this,this.extent));!this.extent&&
aa&&(R&&(R=this._convertGeometry(aa,R)),R&&(aa=aa.centerAt(R),R=null));if(R=this.extent||aa&&new ca(aa.toJson()))-1<ka?R=this.__getExtentForLevel(ka,null,R).extent:0<Ba&&(R=ma.getExtentForScale(this,Ba,R));if(!R){console.log("Map: "+this.invalidExtent);return}La=this._fixExtent(R,La.fitExtent);this.extent=La.extent;this.__LOD=La.lod;this.__setExtent(this.extent);this.loaded=!0;this.attr("data-loaded","");this.infoWindow.setMap(this);this.onLoad(this)}Qa||(this.onLayerAdd(L),this.onLayerAddResult(L));
pa(this[ua+"_addLayerHandler_connect"])}},_convertGeometry:function(L,R){L=L&&L.spatialReference;var aa=R&&R.spatialReference;L&&aa&&!L.equals(aa)&&(L._canProject(aa)?L.isWebMercator()?R=P.geographicToWebMercator(R):4326===L.wkid&&(R=P.webMercatorToGeographic(R,!0)):(console.log("Map: "+p.substitute({geometry:aa.wkid||aa.wkt,map:L.wkid||L.wkt},this.invalidGeometry)),R=null));return R},_attachGraphicsLayer:function(L){var R=L.id;L=L._setMap(this,this._gc._surface);this._layerDivs[R]=L;this._reorderLayers(this.graphicsLayerIds);
return L},_detachGraphicsLayer:function(L){L.loaded&&L.getMap()&&L._unsetMap(this,this._gc._surface)},_reorderLayers:function(L){var R=this.onLayerReorder,aa=r.place,ka=this._layerDivs,ua=this._layers,Aa=this._gc?this._gc._surface.getEventSource():null;if(L===this.graphicsLayerIds)h.forEach(L,function(Na,eb){var ab=ka[Na];Na=ua[Na];ab&&(this._gc._reorderLayer(Na,ab,eb),R(Na,eb))},this);else{var Ba=this.graphics,Qa=Ba?Ba.id:null,La=this._layersDiv,Ia;h.forEach(L,function(Na,eb){Ia=ka[Na];Na!==Qa&&
Ia&&(aa(Ia,La,eb),R(ua[Na],eb))});this._mapImageLyr&&this._placeMapImageLyr();Aa&&(Aa=9>k("ie")?Aa.parentNode:Aa,aa(Aa,Aa.parentNode,"last"))}this.onLayersReordered([].concat(L))},_zoomStartHandler:function(){this.__zoomStart(this._zoomAnimDiv.startingExtent,this._zoomAnimDiv.anchor)},_zoomingHandler:function(L){var R=parseFloat(L.left),aa=parseFloat(L.top);L=new ca(R,aa-parseFloat(L.height),R+parseFloat(L.width),aa,this.spatialReference);R=this.extent.getWidth()/L.getWidth();this.__zoom(L,R,this._zoomAnimDiv.anchor)},
_zoomEndHandler:function(){var L=this._zoomAnimDiv,R=L.extent,aa=this.extent.getWidth()/R.getWidth(),ka=L.anchor,ua=L.newLod,Aa=L.levelChange;L.extent=L.anchor=L.levelChange=L.startingExtent=L.newLod=this._delta=this._zoomAnim=null;this.__zoomEnd(R,aa,ka,ua,Aa)},_panningHandler:function(L){if(isNaN(parseFloat(L.left))||isNaN(parseFloat(L.top))){var R=Math.round,aa=this._panAnim.node;L.left=-1*(this._delta.x-R(this.width/2))+"px";L.top=-1*(this._delta.y-R(this.height/2))+"px";g.set(aa,"left",L.left);
g.set(aa,"top",L.top)}L=new fa(parseFloat(L.left),parseFloat(L.top));R=this.toMap(L);this.onPan(this.extent.offset(this.extent.xmin-R.x,this.extent.ymax-R.y),L)},_panEndHandler:function(L){this.__panning=!1;var R=Math.round;L=new fa(-R(parseFloat(L.style.left)),-R(parseFloat(L.style.top)));R=L.x;var aa=L.y,ka=this.__visibleRect,ua=this.__visibleDelta;ka.x+=-R;ka.y+=-aa;ua.x+=-R;ua.y+=-aa;W(this._zoomAnimDiv,{left:"0px",top:"0px"});ka=this.extent;ua=this._ratioW;var Aa=this._ratioH;ka=new ca(ka.xmin+
R/ua,ka.ymin-aa/Aa,ka.xmax+R/ua,ka.ymax-aa/Aa,this.spatialReference);L.setX(-L.x);L.setY(-L.y);this._delta=this._panAnim=null;this._updateExtent(ka);this.onPanEnd(ka,L);this._fireExtChg([ka,L,!1,this.__LOD])},_fixExtent:function(L,R){for(var aa=this._reshapeExtent(L),ka=1.25;!0===R&&(aa.extent.getWidth()<L.getWidth()||aa.extent.getHeight()<L.getHeight())&&0<aa.lod.level&&3>=ka;)aa=this._reshapeExtent(L.expand(ka)),ka+=.25;return aa},_getFrameWidth:function(){var L=-1,R=this.spatialReference._getInfo();
this.__LOD?(R=this.__LOD._frameInfo)&&(L=R[3]):R&&(L=Math.round(2*R.valid[1]/(this.extent.getWidth()/this.width)));return L},_fixAspectRatio:function(L){var R=L.getWidth(),aa=L.getHeight(),ka=R/aa,ua=this.width/this.height,Aa=0,Ba=0;this.width>this.height?R>aa?ua>ka?Aa=aa*ua-R:Ba=R/ua-aa:Aa=aa*ua-R:this.width<this.height?R<aa?ua>ka?Aa=aa*ua-R:Ba=R/ua-aa:Ba=R/ua-aa:R<aa?Aa=aa-R:R>aa&&(Ba=R/ua-aa);Aa&&(L.xmin-=Aa/2,L.xmax+=Aa/2);Ba&&(L.ymin-=Ba/2,L.ymax+=Ba/2);return L},_reshapeExtent:function(L){L=
this._fixAspectRatio(L);return this._getAdjustedExtent(L)},_getAdjustedExtent:function(L){if(this.__tileInfo)return z.getCandidateTileInfo(this,this.__tileInfo,L);var R=ma.getScale(this,L),aa=this.getMinScale(),ka=this.getMaxScale();!aa||R<=aa?!ka||R>=ka||(L=ma.getExtentForScale(this,ka,L)):L=ma.getExtentForScale(this,aa,L);return{extent:L}},_onBingLayerAdd:function(L){this["__"+L.id+"_vis_connect"]=q.connect(L,"onVisibilityChange",this,"_toggleBingLogo");this._toggleBingLogo(L.visible)},_onBingLayerRemove:function(L){q.disconnect(this["__"+
L.id+"_vis_connect"]);delete this["__"+L.id+"_vis_connect"];var R=h.some(this.layerIds,function(aa){return(L=this._layers[aa])&&L.visible&&-1!==L.declaredClass.indexOf("VETiledLayer")},this);this._toggleBingLogo(R)},_toggleBingLogo:function(L){L&&!this._bingLogo?(L={left:this._mapParams&&this._mapParams.nav?"25px":""},6===k("ie")&&(L.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled\x3d'true', sizingMethod\x3d'crop', src\x3d'"+B.toUrl("./images/map/bing-logo-lg.png")+"')"),L=this._bingLogo=
r.create("div",{style:L},this.root),e.add(L,"bingLogo-lg")):!L&&this._bingLogo&&(r.destroy(this._bingLogo),delete this._bingLogo)},__panStart:function(L,R){var aa=this._zoomAnim,ka=this._panAnim;if(aa&&aa._active)aa.stop(),aa._fire("onEnd",[aa.node]);else if(ka&&ka._active){ka.stop();this._panAnim=null;R=ka.curve.getValue(ka._getStep());L=Math.round(parseFloat(R.left));R=Math.round(parseFloat(R.top));aa=this.navigationManager._dragOrigin;this.__pan(L,R);aa&&(aa.x-=L,aa.y-=R);return}this.__panning=
!0;this.onPanStart(this.extent,new fa(L,R))},__pan:function(L,R){var aa=this.extent,ka=this._ratioW,ua=this._ratioH;this.onPan(new ca(aa.xmin-L/ka,aa.ymin+R/ua,aa.xmax-L/ka,aa.ymax+R/ua,this.spatialReference),new fa(L,R))},__panEnd:function(L,R){var aa=this.__visibleRect,ka=this.__visibleDelta;aa.x+=L;aa.y+=R;ka.x+=L;ka.y+=R;aa=new fa(L,R);ka=this.extent;var ua=this._ratioW,Aa=this._ratioH;ka=new ca(ka.xmin-L/ua,ka.ymin+R/Aa,ka.xmax-L/ua,ka.ymax+R/Aa,this.spatialReference);this.__panning=!1;this._updateExtent(ka);
this.onPanEnd(ka,aa);this._fireExtChg([ka,aa,!1,this.__LOD])},__zoomStart:function(L,R){this.__zooming=!0;this.onZoomStart(L,1,R,this.__LOD?this.__LOD.level:null)},__zoom:function(L,R,aa){this.onZoom(L,R,aa)},__zoomEnd:function(L,R,aa,ka,ua){W(this._layersDiv,{left:"0px",top:"0px"});this._delta=new fa(0,0);this.__visibleRect.x=this.__visibleRect.y=0;L=new ca(L);this.__LOD=ka;this._ratioW=this.width/L.getWidth();this._ratioH=this.height/L.getHeight();var Aa=this._delta;this._delta=null;this.__zooming=
!1;this._updateExtent(L,ua);this.onZoomEnd(L,R,aa,ka?ka.level:null);this._fireExtChg([L,Aa,ua,ka])},_extentUtil:function(L,R,aa,ka,ua){var Aa=new l,Ba=this.width,Qa=this.height;if(L){var La=L.numLevels;var Ia=L.targetLevel;var Na=p.isDefined(Ia);var eb=L.factor;var ab=L.mapAnchor;var gb=L.screenAnchor;var cb=L.mapCenter;var kb=L.levelOrFactor;var ub=L.targetScale;var ob=p.isDefined(ub)&&0<ub}if(R){var db=R.dx;var jb=R.dy;cb=R.mapCenter}m.isArray(cb)&&(cb=new Y(cb));var nb=this._panAnim;R=(L=this._stopAnim())?
L.divExtent:this.extent;var Jb=this.__tileInfo,Ab=this._params;if(!this.loaded){if(aa)R&&(aa=this._convertGeometry(R,aa)),aa&&(this.extent=aa,Ab.zoom=Ab.scale=-1,Ab.center=null);else if(cb||Na||ob){if(cb)if(R){if(cb=this._convertGeometry(R,cb))this.extent=R.centerAt(cb),Ab.center=null}else Ab.center=cb;Na&&-1<Ia?(Ab.zoom=Ia,Ab.scale=-1):ob&&(Ab.scale=ub,Ab.zoom=-1)}Aa.resolve();return Aa}if(cb&&(cb=this._convertGeometry(this,cb),!cb)||ab&&(ab=this._convertGeometry(this,ab),!ab)||aa&&(aa=this._convertGeometry(this,
aa),!aa))return Aa.reject(),Aa;nb&&ab&&gb&&(ab=da(this.extent,Ba,Qa,gb));L&&ab&&gb&&(ab=da(L.divExtent,Ba,Qa,gb));if(Na)if(Jb)La=this.getMinZoom(),Na=this.getMaxZoom(),Ia<La?Ia=La:Ia>Na&&(Ia=Na),La=Ia-(L?L.level:this.getLevel());else{La=0<Ia?-1:1;var vb=kb?Ia:null}if(!aa)if(p.isDefined(La))Jb?(Ba=L?L.level:this.getLevel(),Ba=this.__getExtentForLevel(Ba+La,cb,R).extent):(Ba=(L?L.end:this.extent).expand(vb||(0<La?.5*La:2*-La)),vb&&cb&&(Ba=Ba.centerAt(cb))),Ba&&(cb?aa=Ba:(db=ab||R.getCenter(),Qa=Ba.getWidth(),
jb=Ba.getHeight(),Ba=db.x>=R.xmin&&db.x<=R.xmax?(db.x-R.xmin)/R.getWidth():.5,aa=db.y>=R.ymin&&db.y<=R.ymax?(db.y-R.ymin)/R.getHeight():.5,Ba=db.x-Ba*Qa,db=db.y-aa*jb,aa=new ca(Ba,db,Ba+Qa,db+jb,this.spatialReference)));else if(ob)aa=ma.getExtentForScale(this,ub,R);else if(p.isDefined(eb))aa=R.expand(eb);else if(db||jb)L?(aa=L.end,ab=aa.getCenter(),vb=oa(aa,Ba,Qa,ab),vb.x+=db,vb.y+=jb,vb=da(aa,Ba,Qa,vb),aa=aa.offset(vb.x-ab.x,vb.y-ab.y)):(db=new fa(Ba/2+db,Qa/2+jb),db=da(R,Ba,Qa,db),Qa=R.getWidth(),
jb=R.getHeight(),Ba=db.x-Qa/2,db=db.y-jb/2,aa=new ca(Ba,db,Ba+Qa,db+jb,this.spatialReference));aa||(cb?(R=L?L.end:R,Qa=R.getWidth(),jb=R.getHeight(),Ba=cb.x-Qa/2,db=cb.y-jb/2,aa=new ca(Ba,db,Ba+Qa,db+jb,this.spatialReference)):L&&(aa=L.end));aa?(this._extentDfd&&-1===this._extentDfd.fired&&(this._extentDfd.then(null,J),this._extentDfd.reject()),this._extentDfd=Aa,this.__setExtent(aa,null,gb,ka,L,ua)):Aa.reject();return Aa},__setExtent:function(L,R,aa,ka,ua,Aa){try{if(this._firstLayerId)this.extent=
L;else{var Ba=!0,Qa=this.spatialReference,La=ua?ua.divExtent:this.extent,Ia=this._fixExtent(L,ka||!1);L=Ia.extent;var Na=L.getWidth(),eb=L.getHeight(),ab=Math.round;if(La){var gb=ab(1E6*La.getWidth()),cb=ab(1E6*Na),kb=ab(1E6*La.getHeight()),ub=ab(1E6*eb);Ba=gb!==cb||kb!==ub}var ob,db=ua&&ua.rect,jb=ua&&ua.divExtent;if(Ea.zoomDuration&&Ba&&La){jb=jb||new ca(La);db=db||{left:La.xmin,top:La.ymax,width:La.getWidth(),height:La.getHeight()};var nb={left:L.xmin,top:L.ymax,width:Na,height:eb};var Jb=new Y(L.xmin,
L.ymax,Qa),Ab=new Y(L.xmin,L.ymin,Qa),vb=new Y(this.extent.xmin,this.extent.ymax,Qa),Tb=new Y(this.extent.xmin,this.extent.ymin,Qa);(ob=ea.getLineIntersection(vb,Jb,Tb,Ab,Qa))||ua||(Ba=!1)}this._ratioW=this.width/Na;this._ratioH=this.height/eb;var zb=this._zoomAnimDiv;if(Ba)if(W(this._layersDiv,{left:"0px",top:"0px"}),R=new fa(0,0),this.__visibleRect.x=this.__visibleRect.y=0,db&&nb){this._delta=R;zb.id="_zAD";zb.startingExtent=jb;zb.extent=L;zb.levelChange=Ba;zb.newLod=Ia.lod;zb.anchor=aa?aa:!ob&&
ua?ua.anchor:oa(this.extent,this.width,this.height,ob);var Db=this.extent.getWidth()/L.getWidth();Ea.zoomAnimationThrottled&&1024<(1>Db?1/Db:Db)?(this.__zoomStart(jb,zb.anchor),this.__zoom(jb,1,zb.anchor),this._fireOnScale(1,zb.anchor,!0),this.__zoomEnd(L,Db,zb.anchor,Ia.lod,Ba)):(this._zoomAnim=C.resize({node:zb,start:db,end:nb,duration:Ea.zoomDuration,rate:Ea.zoomRate,beforeBegin:ua?null:this._zoomStartHandler,onAnimate:this._zoomingHandler,onEnd:this._zoomEndHandler}).play(),this._fireOnScale(Db,
zb.anchor,Aa))}else this._updateExtent(L,Ba,Aa),this._fireExtChg([this.extent,R,Ba,this.__LOD=Ia.lod]);else if(!this.__panning)if(!1===this.loaded||Aa)this._updateExtent(L,Ba,Aa),this._fireExtChg([this.extent,R,Ba,this.__LOD=Ia.lod]);else{this.__panning=!0;db=(new X(0,0,this.width,this.height,this.spatialReference)).getCenter();db.x=ab(db.x);db.y=ab(db.y);var Kb=this._delta=this.toScreen(L.getCenter()),Qb=Math.abs(db.x-Kb.x),Gb=Math.abs(db.y-Kb.y);this.optimizePanAnimation&&(Qb>2*this.width||Gb>2*
this.height)?(this.__panStart(0,0),this.__pan(0,0),this.__visibleRect.x=this.__visibleRect.y=this.__visibleDelta.x=this.__visibleDelta.y=0,this.__panning=!1,this._delta=null,this._updateExtent(L,!1,Aa),this.onPanEnd(this.extent,new fa(0,0)),this._fireExtChg([this.extent,new fa(0,0),!0,this.__LOD])):(this.onPanStart(this.extent,new fa(0,0)),this._panAnim=C.slideTo({node:zb,left:db.x-Kb.x,top:db.y-Kb.y,duration:Ea.panDuration,rate:Ea.panRate,onAnimate:this._panningHandler,onEnd:this._panEndHandler}),
this._panAnim.play())}}}catch(Rb){console.log(Rb.stack),console.error(Rb)}},_fireOnScale:function(L,R,aa){if("css-transforms"===this.navigationMode){var ka=this.__visibleDelta;this.onScale(v.scaleAt(L,{x:-1*(this.width/2-(R.x-ka.x)),y:-1*(this.height/2-(R.y-ka.y))}),aa)}},_stopAnim:function(){var L=this._zoomAnim,R=this._panAnim;if(L&&L._active){L.stop();R=L.curve.getValue(L._getStep());var aa=parseFloat(R.left),ka=parseFloat(R.top);L=L.node;return{anchor:L.anchor,start:L.startingExtent,end:L.extent,
level:L.newLod&&L.newLod.level,rect:R,divExtent:new ca(aa,ka-parseFloat(R.height),aa+parseFloat(R.width),ka,this.spatialReference)}}R&&R._active&&(R.stop(),R._fire("onEnd",[R.node]))},__getExtentForLevel:function(L,R,aa){var ka=this.__tileInfo;ka=ka&&ka.lods;L=p.isDefined(L)?L:0;aa=aa||this.extent;R=R||aa&&aa.getCenter();if(ka){if(R){aa=this.getMinZoom();var ua=this.getMaxZoom();L>ua&&(L=ua);L<aa&&(L=aa);L=ka[L];ka=this.width*L.resolution/2;aa=this.height*L.resolution/2;return{extent:new ca(R.x-ka,
R.y-aa,R.x+ka,R.y+aa,R.spatialReference),lod:L}}}else if(aa)return{extent:aa.expand(!L||1>L?1:L).centerAt(R)};console.log("Map: "+this.invalidExtent)},_jobs:0,_incr:function(){1===++this._jobs&&(this.updating=!0,this.attr("data-updating",""),this.onUpdateStart())},_decr:function(){var L=--this._jobs;L?0>L&&(this._jobs=0):(this.updating=!1,this.attr("data-updating"),this.onUpdateEnd())},_fireEvent:function(L,R){this[L]&&this[L].apply(this,R)},_updateExtent:function(L,R,aa){this.extent=L;L=this.spatialReference;
this._viewInfo={view:new T({viewingMode:"map",scale:this.getScale()}),sr:L,version:R?++Q:Q};(R||aa)&&this._setClipRect();this._calcGeographicExtent()},_calcGeographicExtent:function(){var L=this.spatialReference;L&&(L.isWebMercator()?this.geographicExtent=P.webMercatorToGeographic(this._getAvailExtent(),!0):4326===L.wkid&&(this.geographicExtent=new ca(this._getAvailExtent().toJson())))},_fireExtChg:function(L){this.attr("data-zoom",this.getZoom());this.attr("data-scale",this.getScale());this._fireEvent("onExtentChange",
L);if(L=this._extentDfd)delete this._extentDfd,L.resolve()},attr:function(L,R){var aa=this.container;aa&&(null==R?aa.removeAttribute(L):aa.setAttribute(L,R));return this},onUpdateStart:function(){},onUpdateEnd:function(){},onLoad:function(){this._setClipRect();this._calcGeographicExtent()},onBeforeUnload:function(){},onUnload:function(){},onExtentChange:function(L,R,aa){},onTimeExtentChange:function(){},onWebGLEnabledChange:function(){},onLayerAdd:function(){},onLayerAddResult:function(){},onLayersAddResult:function(){},
onLayerRemove:function(){},onLayersRemoved:function(){},onLayerReorder:function(){},onLayersReordered:function(){},onLayerSuspend:function(){},onLayerResume:function(){},onPanStart:function(){},onPan:function(){},onPanEnd:function(){},onScale:function(){},onZoomStart:function(){},onZoom:function(){},onZoomEnd:function(){},onResize:function(){this._setClipRect()},onReposition:function(){},destroy:function(){this._destroyed||(this.onBeforeUnload(this),this.removeAllLayers(),this.releaseAllWebGLContexts(),
this._cleanUp(),clearTimeout(this._resizeTimerHandle),this._gc&&this._gc._cleanUp(),this._destroyed=!0,this.onUnload(this))},setCursor:function(L){W(this.__container,"cursor",this.cursor=L)},setMapCursor:function(L){this.setCursor(this._cursor=L)},resetMapCursor:function(){this.setCursor(this._cursor)},setBackgroundColor:function(L){L&&!L.declaredClass&&(L=new I(L));this.backgroundColor=L||null;var R="";L&&(R=9>k("ie")?L.toHex():"rgba("+L.toRgba().join(",")+")");g.set(this.root,{backgroundColor:R})},
setInfoWindow:function(L){var R=this.infoWindow;R&&R.unsetMap(this);this.infoWindow=L;this.loaded&&L&&L.setMap(this)},setInfoWindowOnClick:function(L){this._params.showInfoWindowOnClick=L;this.popupManager&&this.popupManager.set("enabled",L)},getInfoWindowAnchor:function(L){return this.infoWindow&&this.infoWindow._getAnchor&&this.infoWindow._getAnchor(L)||"upperright"},toScreen:function(L,R){return oa(this.extent,this.width,this.height,L,R)},toMap:function(L){return da(this.extent,this.width,this.height,
L)},addLayer:function(L,R){L&&!this.getLayer(L.id)&&this._addLayer(L,L instanceof ja?this.graphicsLayerIds:this.layerIds,R);return L},addLayers:function(L){var R=[],aa=L.length,ka,ua=L.length;var Aa=q.connect(this,"onLayerAddResult",function(Ba,Qa){-1!==h.indexOf(L,Ba)&&(aa--,R.push({layer:Ba,success:!Qa,error:Qa}),aa||(q.disconnect(Aa),this.onLayersAddResult(R)))});for(ka=0;ka<ua;ka++)this.addLayer(L[ka]);return this},removeLayer:function(L,R){var aa=L.id,ka=L instanceof ja?this.graphicsLayerIds:
this.layerIds,ua=U(ka,aa);0<=ua&&(this._forgetLayer(L),ka.splice(ua,1),this.loaded||this._firstLayerId!==aa||(this._firstLayerId=null),L instanceof ja?this._detachGraphicsLayer(L):L.loaded&&(L.getMap()&&L._unsetMap(this,this._layersDiv),-1!==L.declaredClass.indexOf("VETiledLayer")&&this._onBingLayerRemove(L)),delete this._layers[aa],delete this._layerDivs[aa],R||this._reorderLayers(ka),this.onLayerRemove(L))},removeAllLayers:function(){var L=this.layerIds,R;for(R=L.length-1;0<=R;R--)this.removeLayer(this._layers[L[R]],
1);L=this.graphicsLayerIds;for(R=L.length-1;0<=R;R--)this.removeLayer(this._layers[L[R]],1);this.onLayersRemoved()},reorderLayer:function(L,R){m.isString(L)&&(c.deprecated(this.declaredClass+": Map.reorderLayer(/*String*/ id, /*Number*/ index) deprecated. Use Map.reorderLayer(/*Layer*/ layer, /*Number*/ index).",null,"v2.0"),L=this.getLayer(L));var aa=L.id,ka=L instanceof ja?this.graphicsLayerIds:this.layerIds;0>R?R=0:R>=ka.length&&(R=ka.length-1);L=U(ka,aa);-1!==L&&L!==R&&(ka.splice(L,1),ka.splice(R,
0,aa),this._reorderLayers(ka))},getLayer:function(L){return this._layers[L]},setWebGLEnabled:function(L){var R=this.webglEnabled;this.webglEnabled=(L||!1)&&Z;if(R!==this.webglEnabled)this.onWebGLEnabledChange()},isWebGLContextAvailable:function(){return sa.isContextAvailable()&&(-1===this.maxWebGLContexts||0<this.maxWebGLContexts&&this._webglContextOwners.length<this.maxWebGLContexts)},ownsWebGLContext:function(L){return-1!==h.indexOf(this._webglContextOwners,L)},acquireWebGLContext:function(L){return-1!==
h.indexOf(this._webglContextOwners,L)?!0:this.isWebGLContextAvailable()?(sa.acquireContext(L),this._webglContextOwners.push(L),!0):!1},releaseWebGLContext:function(L){var R=h.indexOf(this._webglContextOwners,L);-1!==R&&this._webglContextOwners.splice(R,1);sa.releaseContext(L)},releaseAllWebGLContexts:function(){var L=this._webglContextOwners.slice(0);h.forEach(L,function(R){this.releaseWebGLContext(R)},this)},syncHitTestForWebGL:function(L){var R,aa=L.screenPoint;L=this.graphicsLayerIds.slice(0).reverse();
h.some(L,function(ka){ka=this.getLayer(ka);ka.loaded&&!ka.suspended&&ka.hasWebGLSurface()&&(R=ka._div.syncHitTest(aa.x,aa.y));return!!R},this);return R},setExtent:function(L,R){L=new ca(L.toJson());var aa=L.getWidth(),ka=L.getHeight();return 0===aa&&0===ka?this.centerAt(new Y({x:L.xmin,y:L.ymin,spatialReference:L.spatialReference&&L.spatialReference.toJson()})):this._extentUtil(null,null,L,R)},getTargetExtent:function(L){if(L)return L=new ca(L.toJson()),0!==L.getWidth()&&0!==L.getHeight()&&(L=(L=
this._convertGeometry(this,L))&&this._fixExtent(L).extent),L},centerAt:function(L){return this._extentUtil(null,{mapCenter:L})},centerAndZoom:function(L,R){return this._extentUtil({targetLevel:R,mapCenter:L,levelOrFactor:!0})},getScale:function(){return this.__LOD?this.__LOD.scale:ma.getScale(this)},getResolution:function(){return this.__LOD?this.__LOD.resolution:this.extent?this.extent.getWidth()/this.width:0},getResolutionInMeters:function(){return this.getResolution()*ma.getUnitValueForSR(this.spatialReference)},
getResolutionForPopup:function(){var L=this.getResolution(),R=this.getResolutionInMeters(),aa=R/16;return 10>=aa?0:L/R*aa},getMinResolution:function(){return this._minResolution},getMaxResolution:function(){return this._maxResolution},getMinScale:function(){return this._params.minScale},getMaxScale:function(){return this._params.maxScale},getViewInfo:function(){return this._viewInfo},setScale:function(L){return this._extentUtil({targetScale:L})},getLayersVisibleAtScale:function(L){var R=[];(L=L||
this.getScale())&&h.forEach(this.layerIds.concat(this.graphicsLayerIds),function(aa){aa=this.getLayer(aa);aa.isVisibleAtScale(L)&&R.push(aa)},this);return R},getNumLevels:function(){var L=this.getMinZoom(),R=this.getMaxZoom();return L===R&&0>L?0:R-L+1},getLevel:function(){return this.__LOD?this.__LOD.level:-1},setLevel:function(L){if(-1<L)return this._extentUtil({targetLevel:L})},getZoom:function(){return this.getLevel()},setZoom:function(L){return this.setLevel(L)},getMinZoom:function(){return this._params.minZoom},
getMaxZoom:function(){return this._params.maxZoom},setBasemap:function(L){if(m.isObject(L)){var R=L;L=R.title}else R=w&&w[L];if(R){this._basemapDfd&&!this._basemapDfd.isFulfilled()&&this._basemapDfd.cancel();var aa=[],ka=0;h.forEach(R.baseMapLayers||R.layers,function(Aa){var Ba={id:Aa.id,displayLevels:Aa.displayLevels,opacity:p.isDefined(Aa.opacity)?Aa.opacity:null,visible:p.isDefined(Aa.visibility)?Aa.visibility:null};if(Ba=this._createBaseLayerInstance(Aa,Ba,L))aa.push(Ba),Aa.isReference||ka++},
this);aa.length&&ka?(this._basemapDfd=M(aa).otherwise(Oa(this,function(Aa){this._basemapPending=!1;Aa&&"cancel"===Aa.dojoType&&h.forEach(aa,function(Ba){Ba.cancel()});throw Aa;})).then(function(Aa){var Ba=[],Qa=[];h.forEach(Aa,function(La){La&&(La.layerInfo&&Ba.push(La.layerInfo),La.layer&&Qa.push(La.layer))});return{basemapName:L,infos:Ba,layers:Qa}}).then(Oa(this,this._waitForBaseLayers)).then(Oa(this,this._setBasemap)),this._basemapPending=!this.loaded&&!this._basemapDfd.isFulfilled()):console.log("Map.setBasemap: "+
p.substitute({basemapName:L},this.invalidBasemap))}else{R=[];for(var ua in w)R.push(ua);console.log("Map.setBasemap: "+p.substitute({basemapName:L,list:R.join(",")},this.unknownBasemap))}},_createBaseLayerInstance:function(L,R,aa){var ka=new l;if(L.type)switch(L.type){case "OpenStreetMap":ka.resolve({layerInfo:L,layer:new la(R)});break;case "VectorTile":B(["./layers/VectorTileLayer"],function(Aa){ua=E.normalize(L.url);ka.promise.isFulfilled()||ka.resolve({layerInfo:L,layer:new Aa(ua,R)})});break;
default:return console.log("Map.setBasemap: "+p.substitute({basemapName:aa,type:L.type},this.unknownLayerType)),null}else{var ua=E.normalize(L.url);ka.resolve({layerInfo:L,layer:new S(ua,R)})}return ka.promise},_waitForBaseLayers:function(L){var R=new l(G._dfdCanceller);R.promise.otherwise(function(ka){if(ka&&"cancel"===ka.dojoType){for(var ua in R._layerEvents)ka=R._layerEvents[ua],q.disconnect(ka[0]),q.disconnect(ka[1]);delete R._layerEvents}});if(!this.loaded)return R.resolve(L),R.promise;var aa=
function(ka){R._pendingLayers--;ka=h.indexOf(L.layers,this);-1<ka&&(ka=R._layerEvents[ka])&&(q.disconnect(ka[0]),q.disconnect(ka[1]));0>=R._pendingLayers&&(delete R._layerEvents,R.isFulfilled()||R.resolve(L))};R._pendingLayers=0;R._layerEvents={};h.forEach(L.layers,function(ka,ua){ka&&R._pendingLayers++});h.forEach(L.layers,function(ka,ua){ka&&(ka.loaded?aa(ka):R._layerEvents[ua]=[q.connect(ka,"onLoad",ka,aa),q.connect(ka,"onError",ka,aa)])});return R.promise},_setBasemap:function(L){var R=L.layers,
aa=L.infos,ka=0,ua=!0;this._basemapPending=!1;this.loaded&&(h.forEach(R,function(Ba,Qa){Ba.loaded&&(aa[Qa].isReference||ka++)}),ua=ka);if(ua){if(this.basemapLayerIds){var Aa={basemapName:this._basemap,infos:w&&w[this._basemap]&&w[this._basemap].baseMapLayers};Aa.basemapName||(h.forEach(this.basemapLayerIds,function(Ba){if(this.getLayer(Ba)instanceof la)return Aa.basemapName="osm",Aa.infos=w&&w.osm&&w.osm.baseMapLayers,!1},this),Aa.basemapName||(Aa=null))}this._removeBasemap();this._basemap=L.basemapName;
this.basemapLayerIds=this._addBasemapLayers(R,aa);this.attr("data-basemap",this.getBasemap());this.emit("basemap-change",{current:L,previous:Aa})}},_addBasemapLayers:function(L,R){var aa=[],ka=[],ua=0;h.forEach(L,function(Aa,Ba){R[Ba].isReference?aa.push(Aa):(this.addLayer(Aa,ua++),ka.push(Aa.id))},this);aa.length&&h.forEach(aa,function(Aa){Aa.attr("data-reference",!0);this.addLayer(Aa,"top");ka.push(Aa.id)},this);return ka},_removeBasemap:function(){var L=this.basemapLayerIds,R;L&&L.length&&h.forEach(L,
function(aa){(R=this.getLayer(aa))&&this.removeLayer(R)},this)},getBasemap:function(){return this._basemap||""},translate:function(L,R){L=L||0;R=R||0;if(!this._txTimer){this._tx=this._ty=0;var aa=this.toScreen(this.extent.getCenter());this.__panStart(aa.x,aa.y)}this._tx+=L;this._ty+=R;this.__pan(this._tx,this._ty);clearTimeout(this._txTimer);this._txTimer=setTimeout(this._endTranslate,150)},_endTranslate:function(){clearTimeout(this._txTimer);this._txTimer=null;var L=this._tx,R=this._ty;this._tx=
this._ty=0;this.__panEnd(L,R)},setTimeExtent:function(L){L=(this.timeExtent=L)?new L.constructor(L.toJson()):null;this.onTimeExtentChange(L)},setTimeSlider:function(L){this.timeSlider&&(pa(this._tsTimeExtentChange_connect),this.timeSlider=this._tsTimeExtentChange_connect=null);L&&(this.timeSlider=L,this.setTimeExtent(L.getCurrentTimeExtent()),this._tsTimeExtentChange_connect=va(L,"onTimeExtentChange",this,"setTimeExtent"))},setVisibility:function(L){if(this.visible!==L){this.visible=L;L||(this._display=
this.container.style.display);this.container.style.display=L?this._display:"none";if(this.autoResize){var R=L?"resume":"pause";this._rszSignal[R]();this._oriSignal[R]()}L&&this.resize()}return this},resize:function(L){clearTimeout(this._resizeTimerHandle);this._destroyed||(!0===L?this._execResize():this._resizeTimerHandle=setTimeout(this._execResize,this.resizeDelay))},_timedResize:function(){this._resizeTimerHandle||this._execResize()},_execResize:function(){clearTimeout(this._resizeTimerHandle);
this._resizeTimerHandle=null;this.reposition();this._resize();this.autoResize&&this._startResizeTimer()},_resize:function(){var L=this.width,R=this.height,aa=g.get(this.container,"display"),ka=t.getContentBox(this.container);if(!("none"===aa||0>=ka.w||0>=ka.h||L===ka.w&&R===ka.h)){if(aa=this._zoomAnim||this._panAnim)aa.stop(),aa._fire("onEnd",[aa.node]);W(this.root,{width:(this.width=ka.w)+"px",height:(this.height=ka.h)+"px"});ka=this.width;aa=this.height;this.attribution&&this.attribution.domNode&&
g.set(this.attribution.domNode,"maxWidth",Math.floor(ka*this._mapParams.attributionWidth)+"px");this.__visibleRect.update(this.__visibleRect.x,this.__visibleRect.y,ka,aa);this.__visibleDelta.update(this.__visibleDelta.x,this.__visibleDelta.y,ka,aa);var ua=new X(this.extent);L=(new X(ua.x,ua.y,ka/L*ua.width,aa/R*ua.height,this.spatialReference)).getExtent();this.onResize(L,ka,aa);this._extentUtil(null,null,L,null,!0)}},reposition:function(){var L=this.position,R=L.x,aa=L.y;this._reposition();L=this.position;
if(R!==L.x||aa!==L.y)this.onReposition(L.x,L.y)},_reposition:function(){var L=t.position(this.container,!0),R=t.getPadBorderExtents(this.container);this.position.update(L.x+R.l,L.y+R.t)},_setClipRect:function(){delete this._clip;var L=7>=k("ie")||void 0===k("ie")&&7<=k("trident")?"rect(auto,auto,auto,auto)":"auto";if(this.wrapAround180){var R=this.width,aa=this.height,ka=this._getFrameWidth(),ua=R-ka;0<ua&&(L=ua/2,L="rect(0px,"+(L+ka)+"px,"+aa+"px,"+L+"px)",aa=this.extent.getWidth(),R=ka/R*aa,this._clip=
[(aa-R)/2,R])}W(this.__container,"clip",L)},_getAvailExtent:function(){var L=this.extent,R=this._clip;if(R){if(!L._clip){var aa=new X(L);aa.width=R[1];aa.x+=R[0];L._clip=aa.getExtent()}return L._clip}return L},_fixedPan:function(L,R){return this._extentUtil(null,{dx:L,dy:R})},panUp:function(){return this._fixedPan(0,-.75*this.height)},panUpperRight:function(){return this._fixedPan(.75*this.width,-.75*this.height)},panRight:function(){return this._fixedPan(.75*this.width,0)},panLowerRight:function(){return this._fixedPan(.75*
this.width,.75*this.height)},panDown:function(){return this._fixedPan(0,.75*this.height)},panLowerLeft:function(){return this._fixedPan(-.75*this.width,.75*this.height)},panLeft:function(){return this._fixedPan(-.75*this.width,0)},panUpperLeft:function(){return this._fixedPan(-.75*this.width,-.75*this.height)},enableSnapping:function(L){L=L||{};if("esri.SnappingManager"===L.declaredClass)this.snappingManager=L;else{var R=qa++,aa=this;this._rids&&this._rids.push(R);B(["./SnappingManager"],function(ka){var ua=
aa._rids?h.indexOf(aa._rids,R):-1;-1!==ua&&(aa._rids.splice(ua,1),aa.snappingManager=new ka(m.mixin({map:aa},L)))})}return this.snappingManager},disableSnapping:function(){this.snappingManager&&this.snappingManager.destroy();this.snappingManager=null},_createLabelLayer:function(){!this._labels&&ba&&this.loaded&&(this._labels=new ba({id:"_internal_LabelLayer"}),this._labels._setMap(this,this._gc._surface),this._processLabelLayers(),this.on("layers-reordered",this._processLabelLayers))},_processLabelLayers:function(){null==
this._labelProcessor&&(this._labelProcessor=setTimeout(this._updateLabelLayers,0))},_updateLabelLayers:function(){this._labelProcessor=null;this._labels&&(this._labels.removeAllFeatureLayers(),h.forEach(this.graphicsLayerIds,function(L){L=this.getLayer(L);"function"===typeof L.applyEdits?this._labels.addFeatureLayer(L):"esri.layers.WFSLayer"===L.declaredClass&&this._labels.addFeatureLayer(L)},this))},_getMapImageLyr:function(){this.loaded&&!this._mapImageLyr&&(this._mapImageLyr=new ha,this._mapImageLyr._setMap(this,
this._layersDiv),this._placeMapImageLyr());return this._mapImageLyr},_placeMapImageLyr:function(){for(var L=this.layerIds,R=this._layerDivs,aa=!1,ka,ua,Aa=L.length-1;0<=Aa;Aa--)if(ka=L[Aa],ua=this.getLayer(ka),ka=R[ka],ua&&ka&&!ua._isReference){r.place(this._mapImageLyr._div,ka,"after");aa=!0;break}aa||r.place(this._mapImageLyr._div,this._layersDiv,"first")}});k("extend-esri")&&(A._CoreMap=u);return u})},"dojox/gfx/matrix":function(){define(["./_base","dojo/_base/lang"],function(B,y){var c=B.matrix=
{},u={};c._degToRad=function(q){return u[q]||(u[q]=Math.PI*q/180)};c._radToDeg=function(q){return q/Math.PI*180};c.Matrix2D=function(q){if(q)if("number"==typeof q)this.xx=this.yy=q;else if(q instanceof Array){if(0<q.length){for(var l=c.normalize(q[0]),m=1;m<q.length;++m){var h=l,f=c.normalize(q[m]);l=new c.Matrix2D;l.xx=h.xx*f.xx+h.xy*f.yx;l.xy=h.xx*f.xy+h.xy*f.yy;l.yx=h.yx*f.xx+h.yy*f.yx;l.yy=h.yx*f.xy+h.yy*f.yy;l.dx=h.xx*f.dx+h.xy*f.dy+h.dx;l.dy=h.yx*f.dx+h.yy*f.dy+h.dy}y.mixin(this,l)}}else y.mixin(this,
q)};y.extend(c.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});y.mixin(c,{identity:new c.Matrix2D,flipX:new c.Matrix2D({xx:-1}),flipY:new c.Matrix2D({yy:-1}),flipXY:new c.Matrix2D({xx:-1,yy:-1}),translate:function(q,l){return 1<arguments.length?new c.Matrix2D({dx:q,dy:l}):new c.Matrix2D({dx:q.x,dy:q.y})},scale:function(q,l){return 1<arguments.length?new c.Matrix2D({xx:q,yy:l}):"number"==typeof q?new c.Matrix2D({xx:q,yy:q}):new c.Matrix2D({xx:q.x,yy:q.y})},rotate:function(q){var l=Math.cos(q);q=Math.sin(q);
return new c.Matrix2D({xx:l,xy:-q,yx:q,yy:l})},rotateg:function(q){return c.rotate(c._degToRad(q))},skewX:function(q){return new c.Matrix2D({xy:Math.tan(q)})},skewXg:function(q){return c.skewX(c._degToRad(q))},skewY:function(q){return new c.Matrix2D({yx:Math.tan(q)})},skewYg:function(q){return c.skewY(c._degToRad(q))},reflect:function(q,l){1==arguments.length&&(l=q.y,q=q.x);var m=q*q,h=l*l,f=m+h,d=2*q*l/f;return new c.Matrix2D({xx:2*m/f-1,xy:d,yx:d,yy:2*h/f-1})},project:function(q,l){1==arguments.length&&
(l=q.y,q=q.x);var m=q*q,h=l*l,f=m+h,d=q*l/f;return new c.Matrix2D({xx:m/f,xy:d,yx:d,yy:h/f})},normalize:function(q){return q instanceof c.Matrix2D?q:new c.Matrix2D(q)},isIdentity:function(q){return 1==q.xx&&0==q.xy&&0==q.yx&&1==q.yy&&0==q.dx&&0==q.dy},clone:function(q){var l=new c.Matrix2D,m;for(m in q)"number"==typeof q[m]&&"number"==typeof l[m]&&l[m]!=q[m]&&(l[m]=q[m]);return l},invert:function(q){q=c.normalize(q);var l=q.xx*q.yy-q.xy*q.yx;return q=new c.Matrix2D({xx:q.yy/l,xy:-q.xy/l,yx:-q.yx/
l,yy:q.xx/l,dx:(q.xy*q.dy-q.yy*q.dx)/l,dy:(q.yx*q.dx-q.xx*q.dy)/l})},_multiplyPoint:function(q,l,m){return{x:q.xx*l+q.xy*m+q.dx,y:q.yx*l+q.yy*m+q.dy}},multiplyPoint:function(q,l,m){q=c.normalize(q);return"number"==typeof l&&"number"==typeof m?c._multiplyPoint(q,l,m):c._multiplyPoint(q,l.x,l.y)},multiplyRectangle:function(q,l){var m=c.normalize(q);l=l||{x:0,y:0,width:0,height:0};if(c.isIdentity(m))return{x:l.x,y:l.y,width:l.width,height:l.height};q=c.multiplyPoint(m,l.x,l.y);var h=c.multiplyPoint(m,
l.x,l.y+l.height),f=c.multiplyPoint(m,l.x+l.width,l.y);l=c.multiplyPoint(m,l.x+l.width,l.y+l.height);m=Math.min(q.x,h.x,f.x,l.x);var d=Math.min(q.y,h.y,f.y,l.y);return{x:m,y:d,width:Math.max(q.x,h.x,f.x,l.x)-m,height:Math.max(q.y,h.y,f.y,l.y)-d}},multiply:function(q){for(var l=c.normalize(q),m=1;m<arguments.length;++m){var h=l,f=c.normalize(arguments[m]);l=new c.Matrix2D;l.xx=h.xx*f.xx+h.xy*f.yx;l.xy=h.xx*f.xy+h.xy*f.yy;l.yx=h.yx*f.xx+h.yy*f.yx;l.yy=h.yx*f.xy+h.yy*f.yy;l.dx=h.xx*f.dx+h.xy*f.dy+h.dx;
l.dy=h.yx*f.dx+h.yy*f.dy+h.dy}return l},_sandwich:function(q,l,m){return c.multiply(c.translate(l,m),q,c.translate(-l,-m))},scaleAt:function(q,l,m,h){switch(arguments.length){case 4:return c._sandwich(c.scale(q,l),m,h);case 3:return"number"==typeof m?c._sandwich(c.scale(q),l,m):c._sandwich(c.scale(q,l),m.x,m.y)}return c._sandwich(c.scale(q),l.x,l.y)},rotateAt:function(q,l,m){return 2<arguments.length?c._sandwich(c.rotate(q),l,m):c._sandwich(c.rotate(q),l.x,l.y)},rotategAt:function(q,l,m){return 2<
arguments.length?c._sandwich(c.rotateg(q),l,m):c._sandwich(c.rotateg(q),l.x,l.y)},skewXAt:function(q,l,m){return 2<arguments.length?c._sandwich(c.skewX(q),l,m):c._sandwich(c.skewX(q),l.x,l.y)},skewXgAt:function(q,l,m){return 2<arguments.length?c._sandwich(c.skewXg(q),l,m):c._sandwich(c.skewXg(q),l.x,l.y)},skewYAt:function(q,l,m){return 2<arguments.length?c._sandwich(c.skewY(q),l,m):c._sandwich(c.skewY(q),l.x,l.y)},skewYgAt:function(q,l,m){return 2<arguments.length?c._sandwich(c.skewYg(q),l,m):c._sandwich(c.skewYg(q),
l.x,l.y)}});B.Matrix2D=c.Matrix2D;return c})},"dojox/gfx/_base":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "),function(B,y,c,u,q,l,m,h,f){var d=y.getObject("dojox.gfx",!0),a=d._base={};d._hasClass=function(k,x){return(k=k.getAttribute("className"))&&0<=(" "+k+" ").indexOf(" "+x+" ")};d._addClass=function(k,x){var v=k.getAttribute("className")||"";(!v||0>(" "+v+" ").indexOf(" "+
x+" "))&&k.setAttribute("className",v+(v?" ":"")+x)};d._removeClass=function(k,x){var v=k.getAttribute("className");v&&k.setAttribute("className",v.replace(new RegExp("(^|\\s+)"+x+"(\\s+|$)"),"$1$2"))};a._getFontMeasurements=function(){var k={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},x;if(u("ie")){var v=q.doc.documentElement.style.fontSize||"";v||(q.doc.documentElement.style.fontSize="100%")}var A=h.create("div",{style:{position:"absolute",
left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},q.body());for(x in k)A.style.fontSize=x,k[x]=16*Math.round(12*A.offsetHeight/16)/12/1E3;u("ie")&&(q.doc.documentElement.style.fontSize=v);q.body().removeChild(A);return k};var b=null;a._getCachedFontMeasurements=function(k){if(k||!b)b=a._getFontMeasurements();return b};var e=null,r={};a._getTextBox=function(k,x,v){var A=arguments.length,n;e||(e=h.create("div",
{style:{position:"absolute",top:"-10000px",left:"0",visibility:"hidden"}},q.body()));var w=e;w.className="";var p=w.style;p.borderWidth="0";p.margin="0";p.padding="0";p.outline="0";if(1<A&&x)for(n in x)n in r||(p[n]=x[n]);2<A&&v&&(w.className=v);w.innerHTML=k;w.getBoundingClientRect?(p=w.getBoundingClientRect(),p={l:p.left,t:p.top,w:p.width||p.right-p.left,h:p.height||p.bottom-p.top}):p=f.getMarginBox(w);w.innerHTML="";return p};a._computeTextLocation=function(k,x,v,A){var n={};switch(k.align){case "end":n.x=
k.x-x;break;case "middle":n.x=k.x-x/2;break;default:n.x=k.x}n.y=k.y-v*(A?.75:1);return n};a._computeTextBoundingBox=function(k){if(!d._base._isRendered(k))return{x:0,y:0,width:0,height:0};var x=k.getShape();var v=k.getFont()||d.defaultFont;k=k.getTextWidth();v=d.normalizedLength(v.size);x=a._computeTextLocation(x,k,v,!0);return{x:x.x,y:x.y,width:k,height:v}};a._isRendered=function(k){for(k=k.parent;k&&k.getParent;)k=k.parent;return null!==k};var t=0;a._getUniqueId=function(){do var k=B._scopeName+
"xUnique"+ ++t;while(m.byId(k));return k};var g=u("pointer-events")?"touchAction":u("MSPointer")?"msTouchAction":null;a._fixMsTouchAction=g?function(k){k.rawNode.style[g]="none"}:function(){};y.mixin(d,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",
x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,
color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var k={};return function(x){var v=k[x];if(v)return new v;v=k[x]=function(){};v.prototype=d["default"+x];return new v}}(),normalizeColor:function(k){return k instanceof c?k:new c(k)},normalizeParameters:function(k,x){var v;if(x){var A={};for(v in k)v in x&&!(v in A)&&(k[v]=
x[v])}return k},makeParameters:function(k,x){var v=null;if(!x)return y.delegate(k);var A={};for(v in k)v in A||(A[v]=y.clone(v in x?x[v]:k[v]));return A},formatNumber:function(k,x){var v=k.toString();if(0<=v.indexOf("e"))v=k.toFixed(4);else{var A=v.indexOf(".");0<=A&&5<v.length-A&&(v=k.toFixed(4))}return 0>k?v:x?" "+v:v},makeFontString:function(k){return k.style+" "+k.variant+" "+k.weight+" "+k.size+" "+k.family},splitFontString:function(k){var x=d.getDefault("Font");k=k.split(/\s+/);if(!(5>k.length)){x.style=
k[0];x.variant=k[1];x.weight=k[2];var v=k[3].indexOf("/");x.size=0>v?k[3]:k[3].substring(0,v);var A=4;0>v&&("/"==k[4]?A=6:"/"==k[4].charAt(0)&&(A=5));A<k.length&&(x.family=k.slice(A).join(" "))}return x},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return d._base._getCachedFontMeasurements()["12pt"]/12},pt2px:function(k){return k*d.px_in_pt()},px2pt:function(k){return k/d.px_in_pt()},normalizedLength:function(k){if(0===k.length)return 0;if(2<k.length){var x=d.px_in_pt(),v=parseFloat(k);
switch(k.slice(-2)){case "px":return v;case "pt":return v*x;case "in":return 72*v*x;case "pc":return 12*v*x;case "mm":return v*d.mm_in_pt*x;case "cm":return v*d.cm_in_pt*x}}return parseFloat(k)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,equalSources:function(k,x){return k&&x&&k===x},switchTo:function(k){var x="string"==typeof k?d[k]:k;x&&(l.forEach("Group Rect Ellipse Circle Line Polyline Image Text Path TextPath Surface createSurface fixTarget".split(" "),
function(v){d[v]=x[v]}),"string"==typeof k?d.renderer=k:l.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(v){return d.renderer=d[v]&&d[v].Surface===d.Surface?v:null}))}});return d})},"esri/basemaps":function(){define(["require","dojo/has","./kernel","dojo/i18n!./nls/jsapi"],function(B,y,c,u){B={streets:{title:u.basemaps.streets,thumbnailUrl:B.toUrl("./images/basemap/streets.jpg"),itemId:"d8855ee4d3d74413babfb0f41203b168",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}]},
satellite:{title:u.basemaps.satellite,thumbnailUrl:B.toUrl("./images/basemap/satellite.jpg"),itemId:"86de95d4e0244cba80f0fa2c9403a7b2",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}]},hybrid:{title:u.basemaps.hybrid,thumbnailUrl:B.toUrl("./images/basemap/hybrid.jpg"),itemId:"413fd05bbd7342f5991d5ec96f4f8b18",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",
isReference:!0}]},terrain:{title:u.basemaps.terrain,thumbnailUrl:B.toUrl("./images/basemap/terrain.jpg"),itemId:"aab054ab883c4a4094c72e949566ad40",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer"},{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",isReference:!0}]},topo:{title:u.basemaps.topo,thumbnailUrl:B.toUrl("./images/basemap/topo.jpg"),itemId:"6e03e8c26aad4b9c92a87c1063ddb0e3",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer"}]},
gray:{title:u.basemaps.gray,thumbnailUrl:B.toUrl("./images/basemap/gray.jpg"),itemId:"8b3b470883a744aeb60e5fff0a319ce7",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer"},{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",isReference:!0}]},"dark-gray":{title:u.basemaps["dark-gray"],thumbnailUrl:B.toUrl("./images/basemap/dark-gray.jpg"),itemId:"da65bacab5bd4defb576f839b6b28098",
baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer"},{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",isReference:!0}]},oceans:{title:u.basemaps.oceans,thumbnailUrl:B.toUrl("./images/basemap/oceans.jpg"),itemId:"48b8cec7ebf04b5fbdcaf70d09daff21",baseMapLayers:[{url:"https://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{url:"https://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",
isReference:!0}]},"national-geographic":{title:u.basemaps["national-geographic"],thumbnailUrl:B.toUrl("./images/basemap/national-geographic.jpg"),itemId:"509e2d6b034246d692a461724ae2d62c",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer"}]},osm:{title:u.basemaps.osm,thumbnailUrl:B.toUrl("./images/basemap/osm.jpg"),itemId:"5d2bfa736f8448b3a1708e1f6be23eed",baseMapLayers:[{type:"OpenStreetMap"}]},"dark-gray-vector":{title:u.basemaps["dark-gray"],
thumbnailUrl:B.toUrl("./images/basemap/dark-gray.jpg"),itemId:"c11ce4f7801740b2905eb03ddc963ac8",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/c11ce4f7801740b2905eb03ddc963ac8/resources/styles/root.json",type:"VectorTile"}]},"gray-vector":{title:u.basemaps.gray,thumbnailUrl:B.toUrl("./images/basemap/gray.jpg"),itemId:"8a2cba3b0ebf4140b7c0dc5ee149549a",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/8a2cba3b0ebf4140b7c0dc5ee149549a/resources/styles/root.json",
type:"VectorTile"}]},"streets-vector":{title:u.basemaps.streets,thumbnailUrl:B.toUrl("./images/basemap/streets.jpg"),itemId:"de26a3cf4cc9451298ea173c4b324736",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",type:"VectorTile"}]},"topo-vector":{title:u.basemaps.topo,thumbnailUrl:B.toUrl("./images/basemap/topo.jpg"),itemId:"7dc6cea0b1764a1f9af2e679f642f0f5",baseMapLayers:[{url:"https://services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},
{url:"https://www.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",type:"VectorTile"}]},"streets-night-vector":{title:u.basemaps["streets-night-vector"],thumbnailUrl:B.toUrl("./images/basemap/streets-night.jpg"),itemId:"86f556a2d1fd468181855a35e344567f",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",type:"VectorTile"}]},"streets-relief-vector":{title:u.basemaps["streets-relief-vector"],
thumbnailUrl:B.toUrl("./images/basemap/streets-relief.jpg"),itemId:"b266e6d17fc345b498345613930fbd76",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",type:"VectorTile"}]},"streets-navigation-vector":{title:u.basemaps["streets-navigation-vector"],thumbnailUrl:B.toUrl("./images/basemap/streets-navigation.jpg"),itemId:"63c47b7177f946b49902c24129b87252",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",
type:"VectorTile"}]}};y("extend-esri")&&(c.basemaps=B);return B})},"esri/Evented":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Evented dojo/has ./kernel".split(" "),function(B,y,c,u,q,l){B=B([u],{declaredClass:"esri.Evented",registerConnectEvents:function(){var m=this.constructor,h=this.constructor._meta.parents,f=[{}],d={},a,b=function(r,t){y.isArray(r)||(r=[r]);for(var g=0;g<r.length;g++){var k=r[g];k._meta&&k._meta.parents&&b(k._meta.parents,t);k.prototype._eventMap&&
t.push(y.mixin({},k.prototype._eventMap))}return t};if(!m._onMap){b(h,f);f.push(this._eventMap);h=y.mixin.apply(this,f);for(e in this)/^on\w/.test(e)&&y.isFunction(this[e])&&(f=this._hyphenLower(e).toLowerCase(),h[f]||(d[f]={method:e}));for(a in h){var e=this._onCamelCase(a);d[a]={method:e,argKeys:h[a]}}m._onMap=d;return m._onMap}},on:function(m,h){if(-1<m.indexOf(",")){for(var f=m.split(/\s*,\s*/),d=f.length,a=[];d--;)a.push(this.on(f[d],h));a.remove=function(){for(var r=0;r<a.length;r++)a[r].remove()};
return a}f=this.constructor._onMap||this.registerConnectEvents();d="string"==typeof m&&m.toLowerCase();var b=this._onCamelCase(d),e=f&&f[d];return(b=e&&e.method||this[b]&&y.isFunction(this[b])&&b)?e&&y.isArray(e.argKeys)?(f=this._onArr2Obj(h,f[d].argKeys),c.after(this,b,f,!0)):c.after(this,b,function(r){r=r||{};r.target||(r.target=this);h.call(this,r)},!0):this.inherited(arguments)},emit:function(m,h){var f,d,a=m.toLowerCase();var b=this._onCamelCase(m);var e=this.constructor._onMap||this.registerConnectEvents();
b=(d=e&&e[a]&&e[a].method||y.isFunction(this[b])&&b)&&this[d];d&&e&&e[a]&&this._onObj2Arr(function(){f=Array.prototype.slice.call(arguments)},e[a].argKeys)(h);h=h||{};h.target||(h.target=this);if(b){var r=f&&f.length?f:[h];r=b.apply(this,r)}this.inherited(arguments,[m,h]);return r},_onObj2Arr:function(m,h){if(h){var f=this;return function(d){var a,b=[],e=h.length;for(a=0;a<e;a++)b[a]=d[h[a]];m.apply(f,b)}}return m},_onArr2Obj:function(m,h){if(h){var f=this;return function(){var d,a={},b=arguments.length;
for(d=0;d<b;d++)a[h[d]]=arguments[d];a.target||(a.target=f);m.call(f,a)}}return m},_hyphenLower:function(m){return m.replace(/^on/,"").replace(/[A-Z](?=[a-z])/g,function(h,f){return(f?"-":"")+h.toLowerCase()})},_onCamelCase:function(m){return"on"+m.substr(0,1).toUpperCase()+m.substr(1).replace(/\-([a-z])/g,function(h,f){return f.toUpperCase()})}});q("extend-esri")&&(l.Evented=B);return B})},"esri/fx":function(){define("dojo/_base/connect dojo/_base/fx dojo/_base/lang dojo/dom dojo/dom-geometry dojo/dom-style dojo/fx dojo/has ./kernel".split(" "),
function(B,y,c,u,q,l,m,h,f){var d={animateRange:function(a){var b=a.range;return new y.Animation(c.mixin({curve:new y._Line(b.start,b.end)},a))},resize:function(a){var b=a.node=u.byId(a.node),e=a.start,r=a.end;e||(e=q.getMarginBox(b),b=q.getPadBorderExtents(b),e=a.start={left:e.l+b.l,top:e.t+b.t,width:e.w-b.w,height:e.h-b.h});r||(r=a.anchor?a.anchor:{x:e.left,y:e.top},b=a.size,r=a.end={left:e.left-(b.width-e.width)*(r.x-e.left)/e.width,top:e.top-(b.height-e.height)*(r.y-e.top)/e.height,width:b.width,
height:b.height});return y.animateProperty(c.mixin({properties:{left:{start:e.left,end:r.left},top:{start:e.top,end:r.top},width:{start:e.width,end:r.width},height:{start:e.height,end:r.height}}},a))},slideTo:function(a){var b=a.node=u.byId(a.node),e=l.getComputedStyle,r=null,t=null,g=function(){return function(){var k="absolute"==b.style.position?"absolute":"relative";r="absolute"==k?b.offsetTop:parseInt(e(b).top)||0;t="absolute"==k?b.offsetLeft:parseInt(e(b).left)||0;"absolute"!=k&&"relative"!=
k&&(k=q.position(b,!0),r=k.y,t=k.x,b.style.position="absolute",b.style.top=r+"px",b.style.left=t+"px")}}();g();a=y.animateProperty(c.mixin({properties:{top:{start:r,end:a.top||0},left:{start:t,end:a.left||0}}},a));B.connect(a,"beforeBegin",a,g);return a},flash:function(a){a=c.mixin({end:"#f00",duration:500,count:1},a);a.duration/=2*a.count;var b=u.byId(a.node),e=a.start;e||(e=l.getComputedStyle(b).backgroundColor);var r=a.end,t=[],g=a.count;b={node:b,duration:a.duration};for(a=0;a<g;a++)t.push(y.animateProperty(c.mixin({properties:{backgroundColor:{start:e,
end:r}}},b))),t.push(y.animateProperty(c.mixin({properties:{backgroundColor:{start:r,end:e}}},b)));return m.chain(t)}};h("extend-esri")&&c.mixin(c.getObject("fx",!0,f),d);return d})},"dojo/fx":function(){define("./_base/lang ./Evented ./_base/kernel ./_base/array ./aspect ./_base/fx ./dom ./dom-style ./dom-geometry ./ready require".split(" "),function(B,y,c,u,q,l,m,h,f,d,a){c.isAsync||d(0,function(){a(["./fx/Toggler"])});c=c.fx={};d={_fire:function(r,t){this[r]&&this[r].apply(this,t||[]);return this}};
var b=function(r){this._index=-1;this._animations=r||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;u.forEach(this._animations,function(t){t&&("undefined"!=typeof t.duration&&(this.duration+=t.duration),t.delay&&(this.duration+=t.delay))},this)};b.prototype=new y;B.extend(b,{_onAnimate:function(){this._fire("onAnimate",arguments)},_onEnd:function(){this._onAnimateCtx.remove();this._onEndCtx.remove();this._onAnimateCtx=this._onEndCtx=null;this._index+1==this._animations.length?
this._fire("onEnd"):(this._current=this._animations[++this._index],this._onAnimateCtx=q.after(this._current,"onAnimate",B.hitch(this,"_onAnimate"),!0),this._onEndCtx=q.after(this._current,"onEnd",B.hitch(this,"_onEnd"),!0),this._current.play(0,!0))},play:function(r,t){this._current||(this._current=this._animations[this._index=0]);if(!t&&"playing"==this._current.status())return this;var g=q.after(this._current,"beforeBegin",B.hitch(this,function(){this._fire("beforeBegin")}),!0),k=q.after(this._current,
"onBegin",B.hitch(this,function(v){this._fire("onBegin",arguments)}),!0),x=q.after(this._current,"onPlay",B.hitch(this,function(v){this._fire("onPlay",arguments);g.remove();k.remove();x.remove()}));this._onAnimateCtx&&this._onAnimateCtx.remove();this._onAnimateCtx=q.after(this._current,"onAnimate",B.hitch(this,"_onAnimate"),!0);this._onEndCtx&&this._onEndCtx.remove();this._onEndCtx=q.after(this._current,"onEnd",B.hitch(this,"_onEnd"),!0);this._current.play.apply(this._current,arguments);return this},
pause:function(){if(this._current){var r=q.after(this._current,"onPause",B.hitch(this,function(t){this._fire("onPause",arguments);r.remove()}),!0);this._current.pause()}return this},gotoPercent:function(r,t){this.pause();var g=this.duration*r;this._current=null;u.some(this._animations,function(k,x){if(g<=k.duration)return this._current=k,this._index=x,!0;g-=k.duration;return!1},this);this._current&&this._current.gotoPercent(g/this._current.duration);t&&this.play();return this},stop:function(r){if(this._current){if(r){for(;this._index+
1<this._animations.length;++this._index)this._animations[this._index].stop(!0);this._current=this._animations[this._index]}var t=q.after(this._current,"onStop",B.hitch(this,function(g){this._fire("onStop",arguments);t.remove()}),!0);this._current.stop()}return this},status:function(){return this._current?this._current.status():"stopped"},destroy:function(){this.stop();this._onAnimateCtx&&this._onAnimateCtx.remove();this._onEndCtx&&this._onEndCtx.remove()}});B.extend(b,d);c.chain=function(r){return new b(B.isArray(r)?
r:Array.prototype.slice.call(r,0))};var e=function(r){this._animations=r||[];this._connects=[];this.duration=this._finished=0;u.forEach(r,function(g){var k=g.duration;g.delay&&(k+=g.delay);this.duration<k&&(this.duration=k);this._connects.push(q.after(g,"onEnd",B.hitch(this,"_onEnd"),!0))},this);this._pseudoAnimation=new l.Animation({curve:[0,1],duration:this.duration});var t=this;u.forEach("beforeBegin onBegin onPlay onAnimate onPause onStop onEnd".split(" "),function(g){t._connects.push(q.after(t._pseudoAnimation,
g,function(){t._fire(g,arguments)},!0))})};B.extend(e,{_doAction:function(r,t){u.forEach(this._animations,function(g){g[r].apply(g,t)});return this},_onEnd:function(){++this._finished>this._animations.length&&this._fire("onEnd")},_call:function(r,t){var g=this._pseudoAnimation;g[r].apply(g,t)},play:function(r,t){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this},gotoPercent:function(r,
t){var g=this.duration*r;u.forEach(this._animations,function(k){k.gotoPercent(k.duration<g?1:g/k.duration,t)});this._call("gotoPercent",arguments);return this},stop:function(r){this._doAction("stop",arguments);this._call("stop",arguments);return this},status:function(){return this._pseudoAnimation.status()},destroy:function(){this.stop();u.forEach(this._connects,function(r){r.remove()})}});B.extend(e,d);c.combine=function(r){return new e(B.isArray(r)?r:Array.prototype.slice.call(r,0))};c.wipeIn=function(r){var t=
r.node=m.byId(r.node),g=t.style,k;r=l.animateProperty(B.mixin({properties:{height:{start:function(){k=g.overflow;g.overflow="hidden";if("hidden"==g.visibility||"none"==g.display)return g.height="1px",g.display="",g.visibility="",1;var v=h.get(t,"height");return Math.max(v,1)},end:function(){return t.scrollHeight}}}},r));var x=function(){g.height="auto";g.overflow=k};q.after(r,"onStop",x,!0);q.after(r,"onEnd",x,!0);return r};c.wipeOut=function(r){var t=(r.node=m.byId(r.node)).style,g;r=l.animateProperty(B.mixin({properties:{height:{end:1}}},
r));q.after(r,"beforeBegin",function(){g=t.overflow;t.overflow="hidden";t.display=""},!0);var k=function(){t.overflow=g;t.height="auto";t.display="none"};q.after(r,"onStop",k,!0);q.after(r,"onEnd",k,!0);return r};c.slideTo=function(r){var t=null,g=null,k=function(x){return function(){var v=h.getComputedStyle(x),A=v.position;t="absolute"==A?x.offsetTop:parseInt(v.top)||0;g="absolute"==A?x.offsetLeft:parseInt(v.left)||0;"absolute"!=A&&"relative"!=A&&(v=f.position(x,!0),t=v.y,g=v.x,x.style.position=
"absolute",x.style.top=t+"px",x.style.left=g+"px")}}(r.node=m.byId(r.node));k();r=l.animateProperty(B.mixin({properties:{top:r.top||0,left:r.left||0}},r));q.after(r,"beforeBegin",k,!0);return r};return c})},"esri/deferredUtils":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(B,y,c){var u={_dfdCanceller:function(q){q.canceled=!0;var l=q._pendingDfd;if(!q.isFulfilled()&&l&&!l.isFulfilled()){l.cancel();var m=l.results&&l.results[1]}q._pendingDfd=null;return m},_fixDfd:function(q){var l=
q.then;q.then=function(m,h,f){if(m){var d=m;m=function(a){return a&&a._argsArray?d.apply(null,a):d(a)}}return l.call(this,m,h,f)};return q},_resDfd:function(q,l,m){var h=l.length;1===h?m?q.errback(l[0]):q.callback(l[0]):1<h?(l._argsArray=!0,q.callback(l)):q.callback()}};y("extend-esri")&&B.mixin(c,u);return u})},"esri/tileUtils":function(){define(["dojo/_base/array","dojo/has","./kernel","./geometry/Point","./geometry/Extent"],function(B,y,c,u,q){var l={_addFrameInfo:function(m,h){var f,d,a=2*h.origin[1],
b=h.origin[0],e=m.origin.x,r=m.width,t;B.forEach(m.lods,function(g){f=Math.round(a/g.resolution);d=Math.ceil(f/r);t=Math.floor((b-e)/(r*g.resolution));g._frameInfo||(g._frameInfo=[d,t,t+d-1,f])})},getContainingTileCoords:function(m,h,f){var d=m.origin;f=f.resolution;return{row:Math.floor((d.y-h.y)/(m.height*f)),col:Math.floor((h.x-d.x)/(m.width*f))}},getCandidateTileInfo:function(m,h,f){var d=m.width;var a=m.height,b=f.xmax-f.xmin,e=f.ymax-f.ymin,r=m.__tileInfo===h,t=r?m.getMinZoom():-1;r=r?m.getMaxZoom():
-1;var g=-1,k=h.lods,x=Math.abs,v;r=-1<r?r:k.length-1;for(t=-1<t?t:0;t<=r;t++)if(v=k[t]){var A=b>e?x(e-a*v.resolution):x(b-d*v.resolution);if(0>g||A<=g){var n=v;g=A}else break}d=n;n=d.resolution;a=(f.xmin+f.xmax)/2;b=(f.ymin+f.ymax)/2;e=m.width/2*n;n*=m.height/2;a=new q(a-e,b-n,a+e,b+n,f.spatialReference);f=new u(a.xmin,a.ymax,f.spatialReference);r=d.resolution;e=h.width;b=h.height;h=h.origin;m=m.__visibleDelta;n=Math.floor;k=e*r;x=b*r;r=n((h.y-f.y)/x);g=n((f.x-h.x)/k);t=h.y-r*x;h=n(Math.abs((f.x-
(h.x+g*k))*e/k))+m.x;m=n(Math.abs((f.y-t)*b/x))+m.y;return{tile:{point:f,coords:{row:r,col:g},offsets:{x:h,y:m}},lod:d,extent:a}},getTileExtent:function(m,h,f,d){var a=m.origin;h=m.lods[h].resolution;var b=m.width,e=m.height;return new q(d*h*b+a.x,a.y-(f+1)*h*e,(d+1)*h*b+a.x,a.y-f*h*e,m.spatialReference)}};y("extend-esri")&&(c.TileUtils=l);return l})},"esri/geometry/Point":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ../srUtils".split(" "),
function(B,y,c,u,q,l,m,h){function f(r,t){89.99999<t?t=89.99999:-89.99999>t&&(t=-89.99999);t*=.017453292519943;return[111319.49079327169*r,3189068.5*Math.log((1+Math.sin(t))/(1-Math.sin(t)))]}function d(r,t,g){r=r/6378137*57.29577951308232;return g?[r,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*t/6378137)))]:[r-360*Math.floor((r+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*t/6378137)))]}function a(){}function b(){}function e(r){var t=r._json;r._unquantizeFn?
(t=r._unquantizeFn({x:t.x,y:t.y}),r._xVal=t.x,r._yVal=t.y,r._unquantizeFn=null):(r._xVal=t.x,r._yVal=t.y);r._json=null}l={type:"point",x:0,y:0};B=B(m,{declaredClass:"esri.geometry.Point",type:"point",x:0,y:0,constructor:function(r,t,g){y.isArray(r)?(this.x=r[0],this.y=r[1],this.spatialReference=t):q.isObject(r)?(q.mixin(this,r),null!=this.latitude&&(this.y=this.latitude),null!=this.longitude&&(this.x=this.longitude),this.spatialReference&&(this.spatialReference=h.createSpatialReference(this.spatialReference))):
(this.x=r,this.y=t,this.spatialReference=g);this.verifySR()},offset:function(r,t){return new this.constructor(this.x+r,this.y+t,this.spatialReference)},setX:function(r){this.x=r;this.clearCache();return this},setY:function(r){this.y=r;this.clearCache();return this},setLongitude:function(r){var t=this.spatialReference;t&&(t._isWebMercator()?this.setX(f(r,this.y)[0]):4326===t.wkid&&this.setX(r));return this},setLatitude:function(r){var t=this.spatialReference;t&&(t._isWebMercator()?this.setY(f(this.x,
r)[1]):4326===t.wkid&&this.setY(r));return this},getLongitude:function(){var r=this.spatialReference;if(r)if(r._isWebMercator())var t=d(this.x,this.y)[0];else 4326===r.wkid&&(t=this.x);return t},getLatitude:function(){var r=this.spatialReference;if(r)if(r._isWebMercator())var t=d(this.x,this.y)[1];else 4326===r.wkid&&(t=this.y);return t},update:function(r,t){this.x=r;this.y=t;this.clearCache();return this},normalize:function(){var r=this.x,t=this.spatialReference;if(t){var g=t._getInfo();g&&(r=this._normalizeX(r,
g))}return new this.constructor(r,this.y,t)},_normalizeX:function(r,t){var g=t.valid[0],k=t.valid[1];t=2*k;r>k?(g=Math.ceil(Math.abs(r-k)/t),r-=g*t):r<g&&(g=Math.ceil(Math.abs(r-g)/t),r+=g*t);return r},toJson:function(){var r={x:this.x,y:this.y},t=this.spatialReference;t&&(r.spatialReference=t.toJson());return r}});a.prototype=B.prototype;b.prototype=new a;Object.defineProperty(b.prototype,"x",{get:function(){this._json&&e(this);return this._xVal},set:function(r){this._xVal=r}});Object.defineProperty(b.prototype,
"y",{get:function(){this._json&&e(this);return this._yVal},set:function(r){this._yVal=r}});b.prototype.setupLazyUnquantization=function(r,t){this._unquantizeFn=r;this._json=t};B.simpleConstructor=a;B.accessorConstructor=b;B.lngLatToXY=f;B.xyToLngLat=d;B.defaultProps=l;B.metersPerDegree=6378137*Math.PI/180;c("extend-esri")&&(y.setObject("geometry.Point",B,u),u.geometry.defaultPoint=l);return B})},"esri/SpatialReference":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/has","./kernel",
"./lang"],function(B,y,c,u,q){function l(){}var m=[-2.0037508342788905E7,2.0037508342788905E7],h=[-2.0037508342787E7,2.0037508342787E7];B=B(null,{declaredClass:"esri.SpatialReference",constructor:function(f){f&&(q.isObject(f)?q.mixin(this,f):q.isString(f)?this.wkt=f:this.wkid=f)},wkid:null,wkt:null,_info:{102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:m,origin:h,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:m,origin:h,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:m,origin:h,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:m,origin:h,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",${Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}},_isWebMercator:function(){return-1!==y.indexOf([102113,102100,3857,3785],this.wkid)},_isWrappable:function(){return-1!==y.indexOf([102113,102100,3857,3785,4326],this.wkid)},_getInfo:function(){return this.wkid?this._info[this.wkid]:null},_canProject:function(f){var d=!1;f&&(d=this.isWebMercator()&&4326===f.wkid||f.isWebMercator()&&4326===this.wkid);return d},isWebMercator:function(){return this._isWebMercator()},equals:function(f){var d=!1;f&&(this===f&&
(d=!0),this.wkid||f.wkid?d=this.wkid===f.wkid||this.isWebMercator()&&f.isWebMercator()||this.wkid===f.latestWkid||f.wkid===this.latestWkid:this.wkt&&f.wkt&&(d=this.wkt.toUpperCase()===f.wkt.toUpperCase()));return d},toJson:function(){var f=null;null!=this.wkid?f={wkid:this.wkid}:null!=this.wkt&&(f={wkt:this.wkt});f&&null!=this.latestWkid&&(f.latestWkid=this.latestWkid);return f}});l.prototype=B.prototype;B.simpleConstructor=l;c("extend-esri")&&(u.SpatialReference=B);return B})},"esri/geometry/Geometry":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../SpatialReference"],function(B,y,c,u,q){B=B(null,{declaredClass:"esri.geometry.Geometry",spatialReference:null,type:null,cache:void 0,setSpatialReference:function(l){this.spatialReference=l;return this},verifySR:function(){this.spatialReference||this.setSpatialReference(new q(4326))},getExtent:function(){return null},clearCache:function(){this.cache=void 0},getCacheValue:function(l){return this.cache&&this.cache[l]},setCacheValue:function(l,m){this.cache||
(this.cache={});this.cache[l]=m}});c("extend-esri")&&y.setObject("geometry.Geometry",B,u);return B})},"esri/srUtils":function(){define(["./SpatialReference","./ImageSpatialReference","./kernel","./sniff","dojo/_base/lang"],function(B,y,c,u,q){function l(h){var f=!1;h&&(h.ics||h.icsid)&&(f=!0);return f}var m={isICS:l,createSpatialReference:function(h){var f=null;h&&(f=l(h)?new y(h):new B(h));return f}};u("extend-esri")&&q.mixin(c,m);return m})},"esri/ImageSpatialReference":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./lang ./SpatialReference".split(" "),
function(B,y,c,u,q,l){B=B(l,{declaredClass:"esri.ImageSpatialReference",constructor:function(m){m&&y.isObject(m)&&y.mixin(this,m)},icsid:null,icsns:null,ics:null,_isWebMercator:function(){return!1},_isWrappable:function(){return!1},equals:function(m){var h=!1;if(m)if(this.icsid&&m.icsid){if(h=this.icsid===m.icsid,this.icsns||m.icsns)h=h&&this.icsns===m.icsns}else this.ics&&m.ics&&(h=this.ics===m.ics);return h},toJson:function(m){var h=null,f=q.isDefined;m=f(m)?m:!0;f(this.icsid)?(h={icsid:this.icsid},
f(this.icsns)&&(h.icsns=this.icsns)):f(this.ics)&&(h={ics:this.ics});f(this.url)&&f(h)&&m&&(h.url=this.url);return h}});c("extend-esri")&&(u.ImageSpatialReference=B);return B})},"esri/geometry/Extent":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./webMercatorUtils ./mathUtils ../srUtils".split(" "),function(B,y,c,u,q,l,m,h,f,d,a,b){function e(){}var r={type:"extent",xmin:0,ymin:0,xmax:0,ymax:0},t=B(h,{declaredClass:"esri.geometry.Extent",
type:"extent",xmin:0,ymin:0,xmax:0,ymax:0,constructor:function(g,k,x,v,A){l.isObject(g)?(l.mixin(this,g),this.spatialReference&&(this.spatialReference=b.createSpatialReference(this.spatialReference))):this.update(g,k,x,v,A);this.verifySR()},getWidth:function(){return Math.abs(this.xmax-this.xmin)},getHeight:function(){return Math.abs(this.ymax-this.ymin)},getCenter:function(){return new f((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2,this.spatialReference)},getTopLeft:function(){return new f(this.xmin,
this.ymax,this.spatialReference)},getTopRight:function(){return new f(this.xmax,this.ymax,this.spatialReference)},getBottomLeft:function(){return new f(this.xmin,this.ymin,this.spatialReference)},getBottomRight:function(){return new f(this.xmax,this.ymin,this.spatialReference)},centerAt:function(g){var k=this.getCenter(),x=g.x-k.x;g=g.y-k.y;return new t(this.xmin+x,this.ymin+g,this.xmax+x,this.ymax+g,this.spatialReference)},update:function(g,k,x,v,A){this.xmin=g;this.ymin=k;this.xmax=x;this.ymax=
v;this.spatialReference=A;this.clearCache();return this},offset:function(g,k){return new t(this.xmin+g,this.ymin+k,this.xmax+g,this.ymax+k,this.spatialReference)},expand:function(g){var k=(1-g)/2;g=this.getWidth()*k;k*=this.getHeight();return new t(this.xmin+g,this.ymin+k,this.xmax-g,this.ymax-k,this.spatialReference)},intersects:function(g){if(!g)return!1;var k=g.type,x=this.spatialReference,v=g.spatialReference;x&&v&&!x.equals(v)&&x._canProject(v)&&(g=x.isWebMercator()?d.geographicToWebMercator(g):
d.webMercatorToGeographic(g,!0));switch(k){case "point":return this.contains(g);case "multipoint":return this._intersectsMultipoint(g);case "extent":return this._intersectsExtent(g);case "polygon":return this._intersectsPolygon(g);case "polyline":return this._intersectsPolyline(g)}},normalize:function(){var g=this._normalize(!1,!0);c.isArray(g)||(g=[g]);return g},shiftCentralMeridian:function(){return this._normalize(!0)},bisect:function(){var g=this.spatialReference,k=g&&g._getInfo(),x=[],v=0;if(k&&
this._isOutOfBounds(k)){var A=this;v=A.xmin;var n=A.ymin,w=A.ymax,p=k.valid[0],D=k.valid[1];A.getWidth()>2*D&&(A=A.getCenter(),A=new t(A.x-D,n,A.x+D,w,new m(g.toJson())));v=A.xmin-v;var C=this._normalizeX(A.xmin,k);k=this._normalizeX(A.xmax,k);C.frameId===k.frameId?x.push(new t(C.x,n,k.x,w,new m(g.toJson()))):x.push(new t(C.x,n,D,w,new m(g.toJson())),new t(p,n,k.x,w,new m(g.toJson())))}else x.push(this.getExtent());return{extents:x,marginLeft:v}},_intersectsMultipoint:function(g){var k=g.points.length,
x;for(x=0;x<k;x++)if(this.contains(g.getPoint(x)))return!0;return!1},_intersectsExtent:function(g){var k,x,v=!1;if(this.xmin<=g.xmin){var A=g.xmin;this.xmax<A?v=!0:k=Math.min(this.xmax,g.xmax)-A}else A=this.xmin,g.xmax<A?v=!0:k=Math.min(this.xmax,g.xmax)-A;if(this.ymin<=g.ymin){var n=g.ymin;this.ymax<n?v=!0:x=Math.min(this.ymax,g.ymax)-n}else n=this.ymin,g.ymax<n?v=!0:x=Math.min(this.ymax,g.ymax)-n;return v?null:new t(A,n,A+k,n+x,this.spatialReference)},_intersectsPolygon:function(g){var k=[this.xmin,
this.ymax],x=[this.xmax,this.ymax],v=[this.xmin,this.ymin],A=[this.xmax,this.ymin],n=[k,x,v,A];k=[[v,k],[k,x],[x,A],[A,v]];v=g.rings;A=v.length;var w=new f(0,0,this.spatialReference);var p=n.length;for(x=0;x<p;x++)if(w.update(n[x][0],n[x][1]),g.contains(w))return!0;w.setSpatialReference(g.spatialReference);for(x=0;x<A;x++)if(n=v[x],p=n.length){var D=n[0];w.update(D[0],D[1]);if(this.contains(w))return!0;for(g=1;g<p;g++){var C=n[g];w.update(C[0],C[1]);if(this.contains(w)||this._intersectsLine([D,C],
k))return!0;D=C}}return!1},_intersectsPolyline:function(g){var k=[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]],x,v=g.paths,A=v.length,n,w=new f(0,0,g.spatialReference);for(g=0;g<A;g++){var p=v[g];if(n=p.length){var D=p[0];w.update(D[0],D[1]);if(this.contains(w))return!0;for(x=1;x<n;x++){var C=p[x];w.update(C[0],C[1]);if(this.contains(w)||this._intersectsLine([D,
C],k))return!0;D=C}}}return!1},_intersectsLine:function(g,k){var x=a._getLineIntersection2,v,A=k.length;for(v=0;v<A;v++)if(x(g,k[v]))return!0;return!1},contains:function(g){if(!g)return!1;var k=g.type;if("point"===k){var x=this.spatialReference,v=g.spatialReference;k=g.x;g=g.y;x&&v&&!x.equals(v)&&x._canProject(v)&&(g=x.isWebMercator()?f.lngLatToXY(k,g):f.xyToLngLat(k,g,!0),k=g[0],g=g[1]);return k>=this.xmin&&k<=this.xmax&&g>=this.ymin&&g<=this.ymax}return"extent"===k?this._containsExtent(g):!1},_containsExtent:function(g){var k=
g.xmin,x=g.ymin,v=g.xmax,A=g.ymax,n=g.spatialReference;g=new f(k,x,n);k=new f(k,A,n);A=new f(v,A,n);x=new f(v,x,n);return this.contains(g)&&this.contains(k)&&this.contains(A)&&this.contains(x)?!0:!1},union:function(g){return new t(Math.min(this.xmin,g.xmin),Math.min(this.ymin,g.ymin),Math.max(this.xmax,g.xmax),Math.max(this.ymax,g.ymax),this.spatialReference)},getExtent:function(){var g=this.spatialReference;return new t(this.xmin,this.ymin,this.xmax,this.ymax,g&&new m(g.toJson()))},_shiftCM:function(g){var k=
this.getCacheValue("_shifted");if(!k){k=new t(this.toJson());var x=k.spatialReference;if(g=g||x._getInfo()){var v=this._getCM(g);if(v){var A=x._isWebMercator()?d.webMercatorToGeographic(v):v;k.xmin-=v.x;k.xmax-=v.x;x._isWebMercator()||(A.x=this._normalizeX(A.x,g).x);k.setSpatialReference(new m(l.substitute({Central_Meridian:A.x},4326===x.wkid?g.altTemplate:g.wkTemplate)))}}this.setCacheValue("_shifted",k)}return k},_getCM:function(g){var k;this._isOutOfBounds(g)&&(k=this.getCenter());return k},_isOutOfBounds:function(g){var k=
g.valid[0];g=g.valid[1];var x=this.xmin,v=this.xmax;return!(x>=k&&x<=g&&v>=k&&v<=g)},_normalize:function(g,k,x){var v=new t(this.toJson()),A=v.spatialReference;if(A&&(x=x||A._getInfo())){var n=y.map(this._getParts(x),function(w){return w.extent});return 2<n.length?g?this._shiftCM(x):v.update(x.valid[0],v.ymin,x.valid[1],v.ymax,A):2===n.length?g?this._shiftCM(x):k?n:{rings:y.map(n,function(w){return[[w.xmin,w.ymin],[w.xmin,w.ymax],[w.xmax,w.ymax],[w.xmax,w.ymin],[w.xmin,w.ymin]]}),spatialReference:A}:
n[0]||v}return v},_getParts:function(g){var k=this.getCacheValue("_parts");if(!k){k=[];var x=this.xmin,v=this.xmax,A=this.ymin,n=this.ymax,w=this.spatialReference,p=this.getWidth(),D=x,C=v,G=0,z=0;g=g||w._getInfo();var E=g.valid[0];var H=g.valid[1];z=this._normalizeX(x,g);x=z.x;G=z.frameId;z=this._normalizeX(v,g);v=z.x;z=z.frameId;g=x===v&&0<p;if(p>2*H){p=new t(D<C?x:v,A,H,n,w);x=new t(E,A,D<C?v:x,n,w);H=new t(0,A,H,n,w);A=new t(E,A,0,n,w);w=[];E=[];p.contains(H)&&w.push(G);p.contains(A)&&E.push(G);
x.contains(H)&&w.push(z);x.contains(A)&&E.push(z);for(n=G+1;n<z;n++)w.push(n),E.push(n);k.push({extent:p,frameIds:[G]},{extent:x,frameIds:[z]},{extent:H,frameIds:w},{extent:A,frameIds:E})}else x>v||g?k.push({extent:new t(x,A,H,n,w),frameIds:[G]},{extent:new t(E,A,v,n,w),frameIds:[z]}):k.push({extent:new t(x,A,v,n,w),frameIds:[G]});this.setCacheValue("_parts",k)}return k},_normalizeX:function(g,k){var x=0,v=k.valid[0],A=k.valid[1];k=2*A;g>A?(x=Math.ceil(Math.abs(g-A)/k),g-=x*k):g<v&&(x=Math.ceil(Math.abs(g-
v)/k),g+=x*k,x=-x);return{x:g,frameId:x}},toJson:function(){var g={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax},k=this.spatialReference;k&&(g.spatialReference=k.toJson());return g}});e.prototype=t.prototype;t.simpleConstructor=e;t.defaultProps=r;u("extend-esri")&&(c.setObject("geometry.Extent",t,q),q.geometry.defaultExtent=r);return t})},"esri/geometry/webMercatorUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point".split(" "),function(B,
y,c,u,q,l){function m(d,a,b,e){if("point"===d.type){var r=a(d.x,d.y,e);return new d.constructor(r[0],r[1],new q(b))}if("extent"===d.type){r=a(d.xmin,d.ymin,e);var t=a(d.xmax,d.ymax,e);return new d.constructor(r[0],r[1],t[0],t[1],new q(b))}if("polyline"===d.type||"polygon"===d.type){r="polyline"===d.type;var g=[],k;B.forEach(r?d.paths:d.rings,function(v){g.push(k=[]);B.forEach(v,function(A){k.push(a(A[0],A[1],e))})});return r?new d.constructor({paths:g,spatialReference:new q(b)}):new d.constructor({rings:g,
spatialReference:new q(b)})}if("multipoint"===d.type){var x=[];B.forEach(d.points,function(v){x.push(a(v[0],v[1],e))});return new d.constructor({points:x,spatialReference:new q(b)})}}function h(d,a){d=d&&(null!=d.wkid?d:d.spatialReference);a=a&&(null!=a.wkid?a:a.spatialReference);return d&&a?a.equals(d)?!0:a._canProject(d):!1}var f={canProject:h,project:function(d,a){var b=d&&d.spatialReference;a=a&&(null!=a.wkid?a:a.spatialReference);b&&a?b.equals(a)?d=new d.constructor(d.toJson()):h(b,a)?a.isWebMercator()?
d=m(d,l.lngLatToXY,{wkid:102100}):4326===a.wkid&&(d=m(d,l.xyToLngLat,{wkid:4326})):d=null:d=null;return d},lngLatToXY:l.lngLatToXY,xyToLngLat:l.xyToLngLat,metersPerDegree:l.metersPerDegree,geographicToWebMercator:function(d){return m(d,l.lngLatToXY,{wkid:102100})},webMercatorToGeographic:function(d,a){return m(d,l.xyToLngLat,{wkid:4326},a)}};c("extend-esri")&&y.mixin(y.getObject("geometry",!0,u),f);return f})},"esri/geometry/mathUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","./Point"],
function(B,y,c,u){function q(f,d,a){return f instanceof u?new u(f.x+a*(d.x-f.x),f.y+a*(d.y-f.y)):[f[0]+a*(d[0]-f[0]),f[1]+a*(d[1]-f[1])]}function l(f,d){return 1E-8>Math.abs(f-d)}function m(f,d,a,b){var e=l(f[0],d[0])?1E10:(f[1]-d[1])/(f[0]-d[0]),r=l(a[0],b[0])?1E10:(a[1]-b[1])/(a[0]-b[0]),t=f[1]-e*f[0],g=a[1]-r*a[0];if(l(e,r)){if(l(t,g)){if(l(f[0],d[0]))if(Math.min(f[1],d[1])<Math.max(a[1],b[1])||Math.max(f[1],d[1])>Math.min(a[1],b[1])){f=(f[1]+d[1]+a[1]+b[1]-Math.min(f[1],d[1],a[1],b[1])-Math.max(f[1],
d[1],a[1],b[1]))/2;var k=(f-t)/e}else return null;else if(Math.min(f[0],d[0])<Math.max(a[0],b[0])||Math.max(f[0],d[0])>Math.min(a[0],b[0]))k=(f[0]+d[0]+a[0]+b[0]-Math.min(f[0],d[0],a[0],b[0])-Math.max(f[0],d[0],a[0],b[0]))/2,f=e*k+t;else return null;return[k,f]}return null}l(e,1E10)?(k=f[0],f=r*k+g):l(r,1E10)?(k=a[0],f=e*k+t):(k=-(t-g)/(e-r),f=f[1]===d[1]?f[1]:a[1]===b[1]?a[1]:e*k+t);return[k,f]}var h={getLength:function(f,d){var a=d.x-f.x;f=d.y-f.y;return Math.sqrt(a*a+f*f)},_getLength:function(f,
d){var a=d[0]-f[0];f=d[1]-f[1];return Math.sqrt(a*a+f*f)},getPointOnLine:q,getMidpoint:function(f,d){return q(f,d,.5)},_equals:l,_getLineIntersection:m,getLineIntersection:function(f,d,a,b,e){(f=m([f.x,f.y],[d.x,d.y],[a.x,a.y],[b.x,b.y]))&&(f=new u(f[0],f[1],e));return f},_getLineIntersection2:function(f,d){var a=f[0],b=f[1],e=d[0],r=d[1];d=a[0];a=a[1];f=b[0];b=b[1];var t=e[0],g=e[1];e=r[0]-t;t=d-t;var k=f-d;r=r[1]-g;g=a-g;var x=b-a,v=r*k-e*x;if(0===v)return!1;e=(e*g-r*t)/v;t=(k*g-x*t)/v;return 0<=
e&&1>=e&&0<=t&&1>=t?[d+e*(f-d),a+e*(b-a)]:!1},_pointLineDistance:function(f,d){var a=d[0],b=d[1];d=a[0];var e=a[1];a=f[0];f=f[1];var r=b[0]-d,t=b[1]-e,g=a-d,k=f-e;b=Math.sqrt;var x=Math.pow,v=b(x(r,2)+x(t,2));g=(g*r+k*t)/(v*v);e+=g*t;return b(x(a-(d+g*r),2)+x(f-e,2))}};y("extend-esri")&&B.mixin(B.getObject("geometry",!0,c),h);return h})},"esri/urlUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/url dojo/global dojo/io-query ./kernel ./lang ./config ./sniff dojo/i18n!./nls/jsapi".split(" "),
function(B,y,c,u,q,l,m,h,f,d){var a={},b=h.defaults.io,e=/^[a-z][a-z0-9\+\-\.]*:/i,r=/^\s*http:/i,t=/^\s*https:/i,g=/:\d+$/,k=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i;a.isHTTP=function(v){var A=u.location.protocol;return null==v?"http:"===A||"https:"===A:v?"https:"===A:"http:"===A};a.getProtocolForWebResource=function(v){return a.isHTTP()?u.location.protocol:v?"https:":"http:"};a.urlToObject=function(v){var A={},n=new c(v),w=v.indexOf("?");null===n.query?A={path:v,query:null}:(A.path=v.substring(0,
w),A.query=q.queryToObject(n.query));n.fragment&&(A.hash=n.fragment,null===n.query&&(A.path=A.path.substring(0,A.path.length-(n.fragment.length+1))));return A};a.getProxyUrl=function(v,A){var n=B.isString(v)?0===B.trim(v).toLowerCase().indexOf("https:"):v,w=b.proxyUrl,p=d.io.proxyNotSet;B.isString(v)&&(v=a.getProxyRule(v))&&(w=v.proxyUrl);if(!w)throw console.log(p),Error(p);if(n&&!1!==A&&0!==u.location.href.toLowerCase().indexOf("https:")&&(A=w,0!==A.toLowerCase().indexOf("http")&&(A=a.getAbsoluteUrl(A)),
A=A.replace(/^http:/i,"https:"),a.canUseXhr(A))){w=A;var D=1}w=a.urlToObject(w);w._xo=D;return w};a.addProxy=function(v){var A=a.getProxyRule(v),n;A?n=a.urlToObject(A.proxyUrl):b.alwaysUseProxy&&(n=a.getProxyUrl());n&&(A=a.urlToObject(v),v=n.path+"?"+A.path,(n=q.objectToQuery(B.mixin(n.query||{},A.query)))&&(v+="?"+n));return v};a.addProxyRule=function(v){var A=v.urlPrefix=a.urlToObject(v.urlPrefix).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),n=b.proxyRules,w,p=n.length,
D=p;for(w=0;w<p;w++){var C=n[w].urlPrefix;if(0===A.indexOf(C)){if(A.length===C)return-1;D=w;break}else 0===C.indexOf(A)&&(D=w+1)}n.splice(D,0,v);return D};a.getProxyRule=function(v){var A=b.proxyRules,n=A.length,w=a.urlToObject(v).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase();for(v=0;v<n;v++)if(0===w.indexOf(A[v].urlPrefix)){var p=A[v];break}return p};a.hasSameOrigin=function(v,A,n){v=v.toLowerCase();A=A.toLowerCase();var w=u.location.href.toLowerCase();v=0===v.indexOf("http")?
new c(v):w=new c(w);A=0===A.indexOf("http")?new c(A):B.isString(w)?new c(w):w;return(n||v.scheme===A.scheme)&&v.host===A.host&&v.port===A.port};a.canUseXhr=function(v,A){var n=f("esri-phonegap")?!0:!1,w=a.hasSameOrigin,p=b.corsEnabledServers,D,C=-1;!n&&f("esri-cors")&&p&&p.length&&(n=y.some(p,function(G,z){G=!G||"object"!==typeof G||G instanceof RegExp?G:G.host;if(G instanceof RegExp){if(G.test(v))return C=z,!0}else if(G&&(D=0!==G.trim().toLowerCase().indexOf("http"),w(v,D?"http://"+G:G)||D&&w(v,
"https://"+G)))return C=z,!0;return!1}));return A?C:n};a.getAbsoluteUrl=function(v){var A=a.getProtocolForWebResource();return B.isString(v)&&!e.test(v)?0===v.indexOf("//")?A+v:0===v.indexOf("/")?A+"//"+u.location.host+v:l._appBaseUrl+v:v};a.fixUrl=function(v){v=B.trim(v);v=a.getAbsoluteUrl(v);v=a.normalizeSlashes(v);v=v.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2");v=a.downgradeToHTTP(v);return v=a.upgradeToHTTPS(v)};a.normalize=function(v){return a.fixUrl(v)};a.normalizeSlashes=function(v){if(/^https?:\/\//i.test(v)){var A=
v.indexOf("?");if(-1<A){var n=v.slice(0,A);var w=v.slice(A+1)}else n=v;v=n.replace(/\/{2,}/g,"/");v=v.replace("/","//");w&&(v+="?"+w)}return v};a.downgradeToHTTP=function(v){return a.isHTTP(!1)&&t.test(v)&&a.hasSameOrigin(u.location.href,v,!0)&&!a.canUseXhr(v)?v.replace(t,"http:"):v};a.upgradeToHTTPS=function(v){var A=b.httpsDomains,n=a.isHTTP(!1),w=a.isHTTP(!0);if(!r.test(v))return v;v=B.trim(v);var p=v.indexOf("/",7);p=-1===p?v:v.slice(0,p);p=p.toLowerCase().slice(7);if(g.test(p))if(m.endsWith(p,
":80"))p=p.slice(0,-3),v=v.replace(":80","");else return v;if(n&&p===u.location.host&&(!k.test(v)||!a.canUseXhr(v)))return v;n=!1;if(w&&p===u.location.host)n=!0;else if(A)for(var D=0;D<A.length;D++){var C=A[D];if(p===C||m.endsWith(p,"."+C)){n=!0;break}}n||!w||b.alwaysUseProxy||a.getProxyRule(v)||(n=!0);n&&(v=v.replace(r,"https:"));return v};h=d.widgets.popup;var x=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,label:h.NLS_moreInfo},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"${hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,
label:"${hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,appName:"App Studio Player",label:h.NLS_openLinkInApp},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,appName:"Collector",label:h.NLS_openLinkInApp},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,appName:"Explorer",label:h.NLS_openLinkInApp},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,appName:"Navigator",label:h.NLS_openLinkInApp},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,appName:"Survey123",
label:h.NLS_openLinkInApp},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,appName:"Trek2There",label:h.NLS_openLinkInApp},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,appName:"Workforce",label:h.NLS_openLinkInApp},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,appName:"iForm",label:h.NLS_openLinkInApp},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,appName:"FlowFinity",label:h.NLS_openLinkInApp},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,appName:"Laserfische",label:h.NLS_openLinkInApp},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,
appName:"Microsoft Power BI",label:h.NLS_openLinkInApp}];a.getURIInfo=function(v){var A;y.some(x,function(n){n.pattern.test(v)&&(A=n);return!!A});return A};a.isKnownURI=function(v){return!!a.getURIInfo(v)};f("extend-esri")&&(B.mixin(l,a),l._getProxyUrl=a.getProxyUrl,l._getProxiedUrl=a.addProxy,l._hasSameOrigin=a.hasSameOrigin,l._canDoXOXHR=a.canUseXhr,l._getAbsoluteUrl=a.getAbsoluteUrl,l.fixUrl=a.fixUrl);return a})},"esri/PluginTarget":function(){define("require dojo/aspect dojo/_base/array dojo/_base/lang dojo/Deferred dojo/when".split(" "),
function(B,y,c,u,q,l){function m(){y.after(this.constructor._meta,"ctor",this._pluginsHandler,!0);this._plugins={}}m.prototype={addPlugin:function(h,f){var d=this,a=this._plugins,b=new q;try{B([h],function(e){h in a?b.resolve({id:a[h].declaredId||h.replace(/\//g,".")}):(a[h]=e,l(e.add(d,f),function(){var r={id:e.declaredId||h.replace(/\//g,".")};d.emit("plugin-add",r);b.resolve(r)},function(r){b.reject(r)}))})}catch(e){b.reject(e)}return b.promise},removePlugin:function(h){if(h in this._plugins){var f=
this._plugins[h];f.remove(this);delete this._plugins[h];this.emit("plugin-remove",{id:f.declaredId||h.replace(/\//g,".")})}},_pluginsHandler:function(){var h=this;c.some(arguments,function(f){if(f&&f.plugins&&f.plugins instanceof Array){f=f.plugins;var d;for(d=0;d<f.length;d++){var a=f[d];var b=a instanceof Object?a.id:a;h.addPlugin(b,a.options)}return!0}})}};return m})},"esri/Color":function(){define(["dojo/_base/declare","dojo/_base/Color","dojo/has","./kernel"],function(B,y,c,u){var q=B([y],{declaredClass:"esri.Color"});
q.toJsonColor=function(m){return m&&[m.r,m.g,m.b,1<m.a?m.a:Math.round(255*m.a)]};q.toDojoColor=function(m){return m&&new q([m[0],m[1],m[2],m[3]/255])};var l="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(B=0;B<l.length;B++)q[l[B]]=y[l[B]];c("extend-esri")&&(u.Color=q);return q})},"esri/promiseList":function(){define(["dojo/_base/array","dojo/Deferred","dojo/when"],function(B,y,c){var u=B.forEach;return function(q){function l(r,t){a[t]=r;b.progress([r,t]);0===--e&&b.resolve(a)}
var m,h;q instanceof Array?h=q:q&&"object"===typeof q&&(m=q);var f=[];if(m){h=[];for(var d in m)Object.hasOwnProperty.call(m,d)&&(f.push(d),h.push(m[d]));var a={}}else h&&(a=[]);if(!h||!h.length)return(new y).resolve(a);var b=new y;b.promise.always(function(){a=f=null});var e=h.length;u(h,function(r,t){m||f.push(t);c(r,function(g){b.isFulfilled()||l(g,f[t])},function(g){b.isFulfilled()||l(g,f[t])})});return b.promise}})},"esri/arcade/Dictionary":function(){define(["require","exports","./ImmutableArray",
"./languageUtils","../geometry/Geometry"],function(B,y,c,u,q){function l(h){var f=null;if(null!==h)if(u.isNumber(h))f=u.toNumber(h);else if(u.isBoolean(h))f=u.toBoolean(h);else if(u.isString(h))f=u.toString(h);else if(u.isDate(h))f=u.toDate(h);else if(u.isArray(h)){f=[];for(var d=0;d<h.length;d++)f.push(l(h[d]))}else{if(0===Object.keys(h).length)return null;f=new m;f.immutable=!1;d=0;for(var a=Object.keys(h);d<a.length;d++){var b=a[d],e=h[b];void 0!==e&&f.setField(b,l(e))}f.immutable=!0}return f}
var m=function(){function h(f){this.declaredClass="esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=f instanceof h?f.attributes:void 0===f?{}:null===f?{}:f}h.prototype.field=function(f){var d=f.toLowerCase(),a=this.attributes[f];if(void 0!==a)return a;for(var b in this.attributes)if(b.toLowerCase()===d)return this.attributes[b];throw Error("Field not Found : "+f);};h.prototype.setField=function(f,d){if(this.immutable)throw Error("Dictionary is Immutable");
var a=f.toLowerCase();if(void 0===this.attributes[f])for(var b in this.attributes)if(b.toLowerCase()===a){this.attributes[b]=d;return}this.attributes[f]=d};h.prototype.hasField=function(f){var d=f.toLowerCase();if(void 0!==this.attributes[f])return!0;for(var a in this.attributes)if(a.toLowerCase()===d)return!0;return!1};h.prototype.keys=function(){var f=[],d;for(d in this.attributes)f.push(d);return f=f.sort()};h.prototype.castToText=function(){var f="",d;for(d in this.attributes){""!==f&&(f+=",");
var a=this.attributes[d];null==a?f+=JSON.stringify(d)+":null":u.isBoolean(a)||u.isNumber(a)||u.isString(a)?f+=JSON.stringify(d)+":"+JSON.stringify(a):a instanceof q?f+=JSON.stringify(d)+":"+u.toStringExplicit(a):a instanceof c?f+=JSON.stringify(d)+":"+u.toStringExplicit(a):a instanceof Array?f+=JSON.stringify(d)+":"+u.toStringExplicit(a):a instanceof Date?f+=JSON.stringify(d)+":"+JSON.stringify(a):null!==a&&"object"===typeof a&&void 0!==a.castToText&&(f+=JSON.stringify(d)+":"+a.castToText())}return"{"+
f+"}"};h.convertObjectToArcadeDictionary=function(f){var d=new h;d.immutable=!1;for(var a in f){var b=f[a];void 0!==b&&d.setField(a.toString(),l(b))}d.immutable=!0;return d};return h}();return m})},"esri/arcade/ImmutableArray":function(){define(["require","exports"],function(B,y){return function(){function c(u){void 0===u&&(u=[]);this._elements=u}c.prototype.length=function(){return this._elements.length};c.prototype.get=function(u){return this._elements[u]};c.prototype.toArray=function(){for(var u=
[],q=0;q<this.length();q++)u.push(this.get(q));return u};return c}()})},"esri/arcade/languageUtils":function(){define("require exports ./FunctionWrapper ./ImmutableArray ./ImmutablePathArray ./ImmutablePointArray ./polyfill/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline dojo/number".split(" "),function(B,y,c,u,q,l,m,h,f,d,a,b,e,r){function t(P,ja,ta){return""===ja||null===ja||void 0===ja||ja===ta||ja===ta?P:P=
P.split(ja).join(ta)}function g(P){return P instanceof ea||P instanceof c||P instanceof ma}function k(P){return x(P)||A(P)||p(P)||v(P)||null===P||P===y.voidOperation||"number"===typeof P?!0:!1}function x(P){return"string"===typeof P||P instanceof String}function v(P){return"boolean"===typeof P}function A(P){return"number"===typeof P}function n(P){return P instanceof Array}function w(P){return P instanceof u}function p(P){return P instanceof Date}function D(P,ja){if(!1===isNaN(P)){if(void 0===ja||
null===ja||""===ja)return P.toString();ja=t(ja,"\u2030","");ja=t(ja,"\u00a4","");return r.format(P,{pattern:ja})}return P.toString()}function C(P,ja){P=y.MomentLibrary.Moment(P);return void 0===ja||null===ja||""===ja?P.format():P.format(G(ja))}function G(P){return P.replace(/(LTS)|L|l/g,function(ja){return"["+ja+"]"})}function z(P,ja,ta){switch(ta){case "\x3e":return P>ja;case "\x3c":return P<ja;case "\x3e\x3d":return P>=ja;case "\x3c\x3d":return P<=ja}return!1}function E(P,ja){if(P===ja||null===
P&&ja===y.voidOperation||null===ja&&P===y.voidOperation)return!0;if(p(P)&&p(ja))return P.getTime()===ja.getTime();if(P instanceof q||P instanceof l)return P.equalityTest(ja);if(P instanceof a&&ja instanceof a){var ta=void 0,N=void 0;ta=P.getCacheValue("_arcadeCacheId");N=ja.getCacheValue("_arcadeCacheId");if(void 0!==ta&&null!==ta)return ta===N}return void 0!==P&&void 0!==ja&&null!==P&&null!==ja&&"object"===typeof P&&"object"===typeof ja&&(P._arcadeCacheId===ja._arcadeCacheId&&void 0!==P._arcadeCacheId&&
null!==P._arcadeCacheId||P._underlyingGraphic===ja._underlyingGraphic&&void 0!==P._underlyingGraphic&&null!==P._underlyingGraphic)?!0:!1}function H(P,ja){if(x(P))return P;if(null===P)return"";if(A(P))return D(P,ja);if(v(P))return P.toString();if(p(P))return C(P,ja);if(P instanceof f)return JSON.stringify(P.toJson());if(n(P)){ja=[];for(var ta=0;ta<P.length;ta++)ja[ta]=M(P[ta]);return"["+ja.join(",")+"]"}if(P instanceof u){ja=[];for(ta=0;ta<P.length();ta++)ja[ta]=M(P.get(ta));return"["+ja.join(",")+
"]"}return null!==P&&"object"===typeof P&&void 0!==P.castToText?P.castToText():g(P)?"object, Function":""}function I(P,ja){if(x(P))return P;if(null===P)return"";if(A(P))return D(P,ja);if(v(P))return P.toString();if(p(P))return C(P,ja);if(P instanceof f)return P instanceof h?'{"xmin":'+P.xmin.toString()+',"ymin":'+P.ymin.toString()+","+(P.hasZ?'"zmin":'+P.zmin.toString()+",":"")+(P.hasM?'"mmin":'+P.mmin.toString()+",":"")+'"xmax":'+P.xmax.toString()+',"ymax":'+P.ymax.toString()+","+(P.hasZ?'"zmax":'+
P.zmax.toString()+",":"")+(P.hasM?'"mmax":'+P.mmax.toString()+",":"")+'"spatialReference":'+fa(P.spatialReference)+"}":fa(P.toJson(),function(N,S){return N.key===S.key?0:"spatialReference"===N.key?1:"spatialReference"===S.key||N.key<S.key?-1:N.key>S.key?1:0});if(n(P)){ja=[];for(var ta=0;ta<P.length;ta++)ja[ta]=M(P[ta]);return"["+ja.join(",")+"]"}if(P instanceof u){ja=[];for(ta=0;ta<P.length();ta++)ja[ta]=M(P.get(ta));return"["+ja.join(",")+"]"}return null!==P&&"object"===typeof P&&void 0!==P.castToText?
P.castToText():g(P)?"object, Function":""}function M(P){return null===P?"null":v(P)||A(P)||x(P)?JSON.stringify(P):P instanceof f||P instanceof u||P instanceof Array?I(P):P instanceof Date?JSON.stringify(C(P,"")):null!==P&&"object"===typeof P&&void 0!==P.castToText?P.castToText():"null"}function T(P,ja){return A(P)?P:null===P||""===P?0:p(P)?NaN:v(P)?P?1:0:n(P)||""===P||void 0===P?NaN:void 0!==ja&&x(P)?(ja=t(ja,"\u2030",""),ja=t(ja,"\u00a4",""),r.parse(P,{pattern:ja})):P===y.voidOperation?0:Number(P)}
function Y(P,ja){var ta;ja.fields.some(function(N){N.name===P&&(ta=N.domain);return!!ta});return ta}function fa(P,ja){ja||(ja={});"function"===typeof ja&&(ja={cmp:ja});var ta="boolean"===typeof ja.cycles?ja.cycles:!1,N=ja.cmp&&function(ha){return function(la){return function(sa,ya){return ha({key:sa,value:la[sa]},{key:ya,value:la[ya]})}}}(ja.cmp),S=[];return function sa(la){la&&la.toJson&&"function"===typeof la.toJson&&(la=la.toJson());if(void 0!==la){if("number"===typeof la)return isFinite(la)?""+
la:"null";if("object"!==typeof la)return JSON.stringify(la);var ya;if(Array.isArray(la)){var Ga="[";for(ya=0;ya<la.length;ya++)ya&&(Ga+=","),Ga+=sa(la[ya])||"null";return Ga+"]"}if(null===la)return"null";if(-1!==S.indexOf(la)){if(ta)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var ba=S.push(la)-1,da=Object.keys(la).sort(N&&N(la));Ga="";for(ya=0;ya<da.length;ya++){var oa=da[ya],va=sa(la[oa]);va&&(Ga&&(Ga+=","),Ga+=JSON.stringify(oa)+":"+va)}S.splice(ba,
1);return"{"+Ga+"}"}}(P)}function ca(P,ja){if(ja instanceof a)P.push([ja.x,ja.y]);else throw Error("Invalid Argument");}Object.defineProperty(y,"__esModule",{value:!0});y.binaryOperator=y.MomentLibrary=y.tick=y.toStringArray=y.autoCastArrayOfPointsToMultiPoint=y.autoCastArrayOfPointsToPolyline=y.autoCastArrayOfPointsToPolygon=y.autoCastFeatureToGeometry=y.stableStringify=y.getDomain=y.getDomainCode=y.getDomainValue=y.fixNullGeometry=y.fixSpatialReference=y.toBoolean=y.toDateM=y.toDate=y.toNumber=
y.toStringExplicit=y.toNumberArray=y.toString=y.equalityTest=y.greaterThanLessThan=y.standardiseDateFormat=y.formatDate=y.formatNumber=y.generateUUID=y.pcCheck=y.isDate=y.isImmutableArray=y.isFeatureSetCollection=y.isFeatureSet=y.isArray=y.isInteger=y.isNumber=y.isBoolean=y.isString=y.defaultUndefined=y.isSimpleType=y.isFunctionParameter=y.multiReplace=y.continueResult=y.breakResult=y.voidOperation=y.SizzleFunction=y.ReturnResult=y.ImplicitResult=y.NativeFunction=y.SizzleFunctionE=y.NativeFunctionE=
y.ImplicitResultE=y.ReturnResultE=void 0;B=function(){return function(P){this.value=P}}();y.ReturnResultE=B;var X=function(){return function(P){this.value=P}}();y.ImplicitResultE=X;var ea=function(){return function(P){this.fn=P}}();y.NativeFunctionE=ea;var ma=function(){return function(P){this.fn=P}}();y.SizzleFunctionE=ma;y.NativeFunction=ea;y.ImplicitResult=X;y.ReturnResult=B;y.SizzleFunction=ma;y.voidOperation={type:"VOID"};y.breakResult={type:"BREAK"};y.continueResult={type:"CONTINUE"};y.multiReplace=
t;y.isFunctionParameter=g;y.isSimpleType=k;y.defaultUndefined=function(P,ja){return void 0===P?ja:P};y.isString=x;y.isBoolean=v;y.isNumber=A;y.isInteger=function(P){return"number"===typeof P&&isFinite(P)&&Math.floor(P)===P};y.isArray=n;y.isFeatureSet=function(P){return!0===(P&&P.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===P.declaredRootClass)};y.isFeatureSetCollection=function(P){return!0===(P&&P.declaredRootClass&&"esri.arcade.featureSetCollection"===P.declaredRootClass)};y.isImmutableArray=
w;y.isDate=p;y.pcCheck=function(P,ja,ta){if(P.length<ja||P.length>ta)throw Error("Function called with wrong number of Parameters");};y.generateUUID=function(){var P=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(ja){var ta=(P+16*Math.random())%16|0;P=Math.floor(P/16);return("x"===ja?ta:ta&3|8).toString(16)})};y.formatNumber=D;y.formatDate=C;y.standardiseDateFormat=G;y.greaterThanLessThan=function(P,ja,ta){if(null===P){if(null===ja||ja===y.voidOperation)return z(null,
null,ta);if(A(ja))return z(0,ja,ta);if(x(ja)||v(ja))return z(0,T(ja),ta);if(p(ja))return z(0,ja.getTime(),ta)}if(P===y.voidOperation){if(null===ja||ja===y.voidOperation)return z(null,null,ta);if(A(ja))return z(0,ja,ta);if(x(ja)||v(ja))return z(0,T(ja),ta);if(p(ja))return z(0,ja.getTime(),ta)}else if(A(P)){if(A(ja))return z(P,ja,ta);if(v(ja))return z(P,T(ja),ta);if(null===ja||ja===y.voidOperation)return z(P,0,ta);if(x(ja))return z(P,T(ja),ta);if(p(ja))return z(P,ja.getTime(),ta)}else if(x(P)){if(x(ja))return z(H(P),
H(ja),ta);if(p(ja))return z(T(P),ja.getTime(),ta);if(A(ja))return z(T(P),ja,ta);if(null===ja||ja===y.voidOperation)return z(T(P),0,ta);if(v(ja))return z(T(P),T(ja),ta)}else if(p(P)){if(p(ja))return z(P,ja,ta);if(null===ja||ja===y.voidOperation)return z(P.getTime(),0,ta);if(A(ja))return z(P.getTime(),ja,ta);if(v(ja)||x(ja))return z(P.getTime(),T(ja),ta)}else if(v(P)){if(v(ja))return z(P,ja,ta);if(A(ja))return z(T(P),T(ja),ta);if(p(ja))return z(T(P),ja.getTime(),ta);if(null===ja||ja===y.voidOperation)return z(T(P),
0,ta);if(x(ja))return z(T(P),T(ja),ta)}return!E(P,ja)||"\x3c\x3d"!==ta&&"\x3e\x3d"!==ta?!1:!0};y.equalityTest=E;y.toString=H;y.toNumberArray=function(P){var ja=[];if(!1===n(P))return null;if(P instanceof u){for(var ta=0;ta<P.length();ta++)ja[ta]=T(P.get(ta));return ja}for(ta=0;ta<P.length;ta++)ja[ta]=T(P[ta]);return ja};y.toStringExplicit=I;y.toNumber=T;y.toDate=function(P,ja){return p(P)?P:x(P)&&(P=y.MomentLibrary.Moment(P,[void 0===ja||null===ja||""===ja?y.MomentLibrary.Moment.ISO_8601:ja]),P.isValid())?
P.toDate():null};y.toDateM=function(P,ja){return p(P)?y.MomentLibrary.Moment(P):x(P)&&(P=y.MomentLibrary.Moment(P,[void 0===ja||null===ja||""===ja?y.MomentLibrary.Moment.ISO_8601:ja]),P.isValid())?P:null};y.toBoolean=function(P){return v(P)?P:x(P)?(P=P.toLowerCase(),"true"===P?!0:!1):A(P)?0===P||isNaN(P)?!1:!0:!1};y.fixSpatialReference=function(P,ja){if(null===P||void 0===P)return null;if(null===P.spatialReference||void 0===P.spatialReference)P.spatialReference=ja;return P};y.fixNullGeometry=function(P){if(null===
P)return null;if(P instanceof a)return"NaN"===P.x||null===P.x||isNaN(P.x)?null:P;if(P instanceof b){if(0===P.rings.length)return null;for(var ja=0,ta=P.rings;ja<ta.length;ja++){var N=ta[ja];if(0<N.length)return P}return null}if(P instanceof e){if(0===P.paths.length)return null;ja=0;for(ta=P.paths;ja<ta.length;ja++)if(N=ta[ja],0<N.length)return P;return null}return P instanceof d?0===P.points.length?null:P:P instanceof h?"NaN"===P.xmin||null===P.xmin||isNaN(P.xmin)?null:P:null};y.getDomainValue=function(P,
ja){if(!P||!P.domain)return ja;var ta=null;if("string"===P.field.type||"esriFieldTypeString"===P.field.type)ja=H(ja);else{if(null===ja||void 0===ja)return null;if(""===ja)return ja;ja=T(ja)}for(var N=0;N<P.domain.codedValues.length;N++){var S=P.domain.codedValues[N];S.code===ja&&(ta=S)}return null===ta?ja:ta.name};y.getDomainCode=function(P,ja){if(!P||!P.domain)return ja;var ta=null;ja=H(ja);for(var N=0;N<P.domain.codedValues.length;N++){var S=P.domain.codedValues[N];S.name===ja&&(ta=S)}return null===
ta?ja:ta.code};y.getDomain=function(P,ja,ta,N){void 0===ta&&(ta=null);if(!ja||!ja.fields)return null;for(var S=null,ha=0;ha<ja.fields.length;ha++){var la=ja.fields[ha];la.name.toLowerCase()===P.toString().toLowerCase()&&(S=la)}if(null===S)throw Error("Field not found");var sa,ya;N||(N=ta&&ja.typeIdField&&ta._field(ja.typeIdField));null!=N&&ja.types.some(function(Ga){return Ga.id===N?((sa=Ga.domains&&Ga.domains[S.name])&&"inherited"===sa.type&&(sa=Y(S.name,ja),ya=!0),!0):!1});ya||sa||(sa=Y(P,ja));
return{field:S,domain:sa}};y.stableStringify=fa;y.autoCastFeatureToGeometry=function(P){if(null===P)return null;for(var ja=[],ta=0;ta<P.length;ta++){var N=P[ta];N&&(N.declaredClass&&"esri.arcade.Feature"===N.declaredClass||"FeatureSetReader"===N.type)?ja.push(N.geometry()):ja.push(N)}return ja};y.autoCastArrayOfPointsToPolygon=function(P,ja){if(n(P)||w(P)){var ta=!1,N=!1,S=[];if(n(P)){for(var ha=0;ha<P.length;ha++){var la=P[ha];ca(S,la)}0<S.length&&(ja=P[0].spatialReference,ta=P[0].hasZ,N=P[0].hasM)}else if(P instanceof
l)S=P._elements,0<S.length&&(ta=P._hasZ,N=P._hasM,ja=P.get(0).spatialReference);else if(w(P)){ha=0;for(var sa=P.toArray();ha<sa.length;ha++)la=sa[ha],ca(S,la);0<S.length&&(ja=P.get(0).spatialReference,ta=!0===P.get(0).hasZ,N=!0===P.get(0).hasM)}else throw Error("Invalid Argument");if(0===S.length)return null;!1===(new b({rings:[],spatialReference:{wkid:4326}})).isClockwise(S)&&(S=S.slice(0).reverse());return new b({rings:[S],spatialReference:ja,hasZ:ta,hasM:N})}return P};y.autoCastArrayOfPointsToPolyline=
function(P,ja){if(n(P)||w(P)){var ta=!1,N=!1,S=[];if(n(P)){for(var ha=0;ha<P.length;ha++){var la=P[ha];ca(S,la)}0<S.length&&(ja=P[0].spatialReference,ta=!0===P[0].hasZ,N=!0===P[0].hasM)}else if(P instanceof l)S=P._elements,0<S.length&&(ta=P._hasZ,N=P._hasM,ja=P.get(0).spatialReference);else if(w(P)){ha=0;for(var sa=P.toArray();ha<sa.length;ha++)la=sa[ha],ca(S,la);0<S.length&&(ja=P.get(0).spatialReference,ta=!0===P.get(0).hasZ,N=!0===P.get(0).hasM)}return 0===S.length?null:new e({paths:[S],spatialReference:ja,
hasZ:ta,hasM:N})}return P};y.autoCastArrayOfPointsToMultiPoint=function(P,ja){if(n(P)||w(P)){var ta=!1,N=!1,S=[];if(n(P)){for(var ha=0;ha<P.length;ha++){var la=P[ha];ca(S,la)}0<S.length&&(ja=P[0].spatialReference,ta=!0===P[0].hasZ,N=!0===P[0].hasM)}else if(P instanceof l)S=P._elements,0<S.length&&(ta=P._hasZ,N=P._hasM,ja=P.get(0).spatialReference);else if(w(P)){ha=0;for(var sa=P.toArray();ha<sa.length;ha++)la=sa[ha],ca(S,la);0<S.length&&(ja=P.get(0).spatialReference,ta=!0===P.get(0).hasZ,N=!0===P.get(0).hasM)}return 0===
S.length?null:new d({points:S,spatialReference:ja,hasZ:ta,hasM:N})}return P};y.toStringArray=function(P,ja){void 0===ja&&(ja=!1);var ta=[];if(null===P)return ta;if(!0===n(P)){for(var N=0;N<P.length;N++){var S=H(P[N]);""===S&&!0!==ja||ta.push(S)}return ta}if(P instanceof u){for(N=0;N<P.length();N++)S=H(P.get(N)),""===S&&!0!==ja||ta.push(S);return ta}return k(P)?(S=H(P),""===S&&!0!==ja||ta.push(S),ta):[]};var wa=0;y.tick=function(P){wa++;return 0===wa%100?(wa=0,m.create(function(ja){setTimeout(function(){ja(P)},
0)})):P};y.MomentLibrary={Moment:null};y.binaryOperator=function(P,ja,ta){switch(ta){case "\x26":return P&ja;case "|":return P|ja;case "^":return P^ja;case "\x3c\x3c":return P<<ja;case "\x3e\x3e":return P>>ja;case "\x3e\x3e\x3e":return P>>>ja}}})},"esri/arcade/FunctionWrapper":function(){define(["require","exports"],function(B,y){return function(){return function(c,u){this.context=this.definition=null;this.definition=c;this.context=u}}()})},"esri/arcade/ImmutablePathArray":function(){var B=this&&
this.__extends||function(){var y=function(c,u){y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,l){q.__proto__=l}||function(q,l){for(var m in l)l.hasOwnProperty(m)&&(q[m]=l[m])};return y(c,u)};return function(c,u){function q(){this.constructor=c}y(c,u);c.prototype=null===u?Object.create(u):(q.prototype=u.prototype,new q)}}();define(["require","exports","./ImmutableArray","./ImmutablePointArray"],function(y,c,u,q){return function(l){function m(h,f,d,a,b){h=l.call(this,h)||this;h._lazyPath=
[];h._hasZ=!1;h._hasM=!1;h._hasZ=d;h._hasM=a;h._spRef=f;h._cacheId=b;return h}B(m,l);m.prototype.get=function(h){if(void 0===this._lazyPath[h]){var f=this._elements[h];if(void 0===f)return;this._lazyPath[h]=new q(f,this._spRef,this._hasZ,this._hasM,this._cacheId,h)}return this._lazyPath[h]};m.prototype.equalityTest=function(h){return h===this?!0:null===h||!1===h instanceof m?!1:h.getUniqueHash()===this.getUniqueHash()};m.prototype.getUniqueHash=function(){return this._cacheId.toString()};return m}(u)})},
"esri/arcade/ImmutablePointArray":function(){var B=this&&this.__extends||function(){var y=function(c,u){y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,l){q.__proto__=l}||function(q,l){for(var m in l)l.hasOwnProperty(m)&&(q[m]=l[m])};return y(c,u)};return function(c,u){function q(){this.constructor=c}y(c,u);c.prototype=null===u?Object.create(u):(q.prototype=u.prototype,new q)}}();define(["require","exports","./ImmutableArray","../geometry/Point"],function(y,c,u,q){return function(l){function m(h,
f,d,a,b,e){h=l.call(this,h)||this;h._lazyPt=[];h._hasZ=!1;h._hasM=!1;h._spRef=f;h._hasZ=d;h._hasM=a;h._cacheId=b;h._partId=e;return h}B(m,l);m.prototype.get=function(h){if(void 0===this._lazyPt[h]){var f=this._elements[h];if(void 0===f)return;var d=this._hasZ,a=this._hasM,b=null;b=d&&!a?new q(f[0],f[1],f[2],void 0,this._spRef):a&&!d?new q(f[0],f[1],void 0,f[2],this._spRef):d&&a?new q(f[0],f[1],f[2],f[3],this._spRef):new q(f[0],f[1],this._spRef);b.setCacheValue("_arcadeCacheId",this._cacheId.toString()+
"-"+this._partId.toString()+"-"+h.toString());this._lazyPt[h]=b}return this._lazyPt[h]};m.prototype.equalityTest=function(h){return h===this?!0:null===h||!1===h instanceof m?!1:h.getUniqueHash()===this.getUniqueHash()};m.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return m}(u)})},"esri/arcade/polyfill/promiseUtils":function(){define(["require","exports","dojo/Deferred","dojo/promise/all"],function(B,y,c,u){function q(f,d){var a=new c(d);f(function(b){return h(b).then(a.resolve)},
a.reject);return a.promise}function l(f){if(f){if("function"!==typeof f.forEach){var d=Object.keys(f),a=d.map(function(e){return f[e]});return l(a).then(function(e){var r={};d.forEach(function(t,g){return r[t]=e[g]});return r})}var b=null;return q(function(e,r){var t=[],g=f.length;0===g&&e(t);f.forEach(function(k){var x={promise:k};t.push(x);k.then(function(v){x.value=v}).catch(function(v){x.error=v}).then(function(){--g;0===g&&(b?r(Error("AbortError")):e(t))})})},function(e){b=e||"Invocation cancellation";
f.forEach(function(r){return r.cancel(e)})})}}function m(f){void 0===f&&(f=void 0);var d=new c;d.resolve(f);return d.promise}function h(f){return f&&"function"===typeof f.then?f:m(f)}Object.defineProperty(y,"__esModule",{value:!0});y.createResolver=y.when=y.isPromiseLike=y.wrapCallback=y.timeout=y.after=y.resolve=y.reject=y.first=y.eachAlwaysValues=y.eachAlways=y.createDeferred=y.create=y.filter=y.all=void 0;y.all=function(f){return u(f)};y.filter=function(f,d){var a=f.slice();return u(f.map(function(b,
e){return d(b,e)})).then(function(b){return a.filter(function(e,r){return b[r]})})};y.create=q;y.createDeferred=function(f){var d=null;f=q(function(a,b){d={resolve:a,reject:b}},f);d.promise=f;d.cancel=function(){d.reject(Error("AbortError"))};return d};y.eachAlways=l;y.eachAlwaysValues=function(f){return l(f).then(function(d){return d.filter(function(a){return!!a.value}).map(function(a){return a.value})})};y.first=function(f){return f&&f.length?q(function(d,a){for(var b=0;b<f.length;b++)f[b].then(d,
a)}):m()};y.reject=function(f){var d=new c;d.reject(f);return d.promise};y.resolve=m;y.after=function(f,d){void 0===d&&(d=void 0);var a=0;return q(function(b){a=setTimeout(function(){b(d)},f)},function(){a&&(clearTimeout(a),a=0)})};y.timeout=function(f,d,a){var b=0,e=new c(f.cancel);f.then(function(r){e.isFulfilled()||(e.resolve(r),b&&(clearTimeout(b),b=0))});f.catch(function(r){e.isFulfilled()||(e.reject(r),b&&(clearTimeout(b),b=0))});b=setTimeout(function(){e.reject(a||Error("promiseUtils:timeout"))},
d);return e.promise};y.wrapCallback=function(f){var d=!1;return q(function(){f(function(a){d||m(a)})},function(){return d=!0})};y.isPromiseLike=function(f){return f&&"function"===typeof f.then};y.when=h;y.createResolver=function(f){var d,a;f=q(function(e,r){d=e;a=r},f);var b=function(e){d(e)};b.resolve=function(e){return d(e)};b.reject=function(e){return a(e)};b.promise=f;return b}})},"esri/geometry/Multipoint":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),
function(B,y,c,u,q,l,m,h,f,d){function a(){}function b(){}l={type:"multipoint",points:null};B=B(m,{declaredClass:"esri.geometry.Multipoint",type:"multipoint",points:null,constructor:function(e){this.points=[];e&&(e.points?q.mixin(this,e):this.spatialReference=e,this.spatialReference&&(this.spatialReference=d.createSpatialReference(this.spatialReference)));this.verifySR()},addPoint:function(e){this.clearCache();y.isArray(e)?this.points.push(e):this.points.push([e.x,e.y]);return this},removePoint:function(e){if(this._validateInputs(e))return this.clearCache(),
new h(this.points.splice(e,1)[0],this.spatialReference)},getExtent:function(){var e=this.getCacheValue("_extent");if(e)return new f(e);e=this.points;var r=e.length;if(r){var t=e[0],g,k,x=g=t[0],v=k=t[1],A=Math.min,n=Math.max,w=this.spatialReference,p;for(p=0;p<r;p++){t=e[p];var D=t[0];t=t[1];x=A(x,D);v=A(v,t);g=n(g,D);k=n(k,t)}e={xmin:x,ymin:v,xmax:g,ymax:k,spatialReference:w?w.toJson():null};this.setCacheValue("_extent",e);return new f(e)}},_validateInputs:function(e){return null===e||0>e||e>=this.points.length?
!1:!0},getPoint:function(e){if(this._validateInputs(e))return e=this.points[e],new h(e[0],e[1],this.spatialReference)},setPoint:function(e,r){if(this._validateInputs(e))return this.clearCache(),this.points[e]=[r.x,r.y],this},toJson:function(){var e={points:q.clone2DArray(this.points)},r=this.spatialReference;r&&(e.spatialReference=r.toJson());return e}});a.prototype=B.prototype;b.prototype=new a;Object.defineProperty(b.prototype,"points",{get:function(){this._unquantizeFn&&(this._pointsVal=this._unquantizeFn({points:q.clone2DArray(this._pointsVal)}).points,
this._unquantizeFn=null);return this._pointsVal},set:function(e){this._pointsVal=e}});b.prototype.setupLazyUnquantization=function(e,r){this._unquantizeFn=e;this._pointsVal=r.points};B.simpleConstructor=a;B.accessorConstructor=b;B.defaultProps=l;c("extend-esri")&&(y.setObject("geometry.Multipoint",B,u),u.geometry.defaultMultipoint=l);return B})},"esri/geometry/Polygon":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ./mathUtils ../srUtils".split(" "),
function(B,y,c,u,q,l,m,h,f,d,a,b){function e(){}function r(){}m={type:"polygon",rings:null};var t=B(h,{declaredClass:"esri.geometry.Polygon",type:"polygon",rings:null,constructor:function(g){this.rings=[];this._ring=0;g&&(c.isArray(g)?this.rings=c.isArray(g[0][0])?g:[g]:g.rings?l.mixin(this,g):this.spatialReference=g,this.spatialReference&&(this.spatialReference=b.createSpatialReference(this.spatialReference)));this.verifySR()},addRing:function(g){this.clearCache();this._ring=this.rings.length;this.rings[this._ring]=
[];c.isArray(g[0])?y.forEach(g,this._addPointArr,this):y.forEach(g,this._addPoint,this);return this},_addPointArr:function(g){this.rings[this._ring].push(g)},_addPoint:function(g){this.rings[this._ring].push([g.x,g.y])},_insertPoints:function(g,k){this.clearCache();this._ring=k;this.rings[this._ring]||(this.rings[this._ring]=[]);y.forEach(g,this._addPoint,this)},_validateInputs:function(g,k){return null!==g&&void 0!==g&&(0>g||g>=this.rings.length)||null!==k&&void 0!==g&&(0>k||k>=this.rings[g].length)?
!1:!0},getPoint:function(g,k){if(this._validateInputs(g,k))return new f(this.rings[g][k],this.spatialReference)},setPoint:function(g,k,x){if(this._validateInputs(g,k))return this.clearCache(),this.rings[g][k]=[x.x,x.y],this},insertPoint:function(g,k,x){if(this._validateInputs(g)&&null!=k&&0<=k&&k<=this.rings[g].length)return this.clearCache(),this.rings[g].splice(k,0,[x.x,x.y]),this},removeRing:function(g){if(this._validateInputs(g,null)){this.clearCache();g=this.rings.splice(g,1)[0];var k,x=g.length,
v=this.spatialReference;for(k=0;k<x;k++)g[k]=new f(g[k],v);return g}},removePoint:function(g,k){if(this._validateInputs(g,k))return this.clearCache(),new f(this.rings[g].splice(k,1)[0],this.spatialReference)},getExtent:function(){var g=this.getCacheValue("_extent");var k=this.getCacheValue("_partwise");if(g)return g=new d(g),g._partwise=k,g;g=this.rings;var x=g.length;if(x&&g[0].length){var v,A,n,w,p=v=g[0][0][0],D=A=g[0][0][1],C=Math.min,G=Math.max,z=this.spatialReference;k=[];var E,H;for(n=0;n<
x;n++){var I=g[n];var M=E=I[0]&&I[0][0];var T=H=I[0]&&I[0][1];var Y=I.length;for(w=0;w<Y;w++){var fa=I[w];var ca=fa[0];fa=fa[1];p=C(p,ca);D=C(D,fa);v=G(v,ca);A=G(A,fa);M=C(M,ca);T=C(T,fa);E=G(E,ca);H=G(H,fa)}k.push(new d({xmin:M,ymin:T,xmax:E,ymax:H,spatialReference:z?z.toJson():null}))}g={xmin:p,ymin:D,xmax:v,ymax:A,spatialReference:z?z.toJson():null};k=1<k.length?k:null;this.setCacheValue("_extent",g);this.setCacheValue("_partwise",k);g=new d(g);g._partwise=k;return g}},contains:function(g){var k=
this.rings,x=!1,v,A,n,w=k.length;var p=this.spatialReference;var D=g.spatialReference;var C=g.x;g=g.y;p&&D&&!p.equals(D)&&p._canProject(D)&&(g=p.isWebMercator()?f.lngLatToXY(C,g):f.xyToLngLat(C,g,!0),C=g[0],g=g[1]);for(n=0;n<w;n++){p=k[n];var G=p.length;for(A=v=0;A<G;A++){v++;v===G&&(v=0);D=p[A];var z=p[v];(D[1]<g&&z[1]>=g||z[1]<g&&D[1]>=g)&&D[0]+(g-D[1])/(z[1]-D[1])*(z[0]-D[0])<C&&(x=!x)}}return x},getCentroid:function(){var g=this.getCacheValue("_centroid");if(void 0!==g)return g;g=this.rings;var k,
x,v=[],A,n,w=Infinity,p=-Infinity,D=Infinity,C=-Infinity;y.forEach(g,function(E){G=k=x=0;y.forEach(E,function(H,I){I<E.length-1&&(A=E[I+1],n=H[0]*A[1]-A[0]*H[1],G+=(H[0]+A[0])*n,k+=(H[1]+A[1])*n,x+=n,H[0]<w&&(w=H[0]),H[0]>p&&(p=H[0]),H[1]<D&&(D=H[1]),H[1]>C&&(C=H[1]))});0<x&&(x*=-1);x&&v.push([G,k,x/2])});v.sort(function(E,H){return E[2]-H[2]});var G=k=void 0;if(v[0]){var z=6*v[0][2];G=v[0][0]/z;k=v[0][1]/z;if(G<w||G>p||k<D||k>C)G=k=void 0}if(void 0===G||void 0===k)if(g=g[0]&&g[0].length?this._getLineCentroid(g[0]):
null)G=g.x,k=g.y;g=isNaN(G)||isNaN(k)?null:new f(G,k,this.spatialReference);this.setCacheValue("_centroid",g);return g},_getLineCentroid:function(g){var k=0,x=0,v=0,A={x:0,y:0},n={x:0,y:0},w,p=g.length,D;for(w=0;w<p-1;w++){var C=g[w];var G=g[w+1];if(C&&G){A.x=C[0];A.y=C[1];n.x=G[0];n.y=G[1];var z=a.getLength(A,n);0<z&&(k+=z,C=a.getMidpoint(C,G),x+=z*C[0],v+=z*C[1])}}0<k?D={x:x/k,y:v/k}:g[0]&&(D={x:g[0][0],y:g[0][1]});return D},isClockwise:function(g){var k=0,x,v=g.length,A=c.isArray(g[0])?function(n,
w){return n[0]*w[1]-w[0]*n[1]}:function(n,w){return n.x*w.y-w.x*n.y};for(x=0;x<v;x++)k+=A(g[x],g[(x+1)%v]);return 0>=k/2},isSelfIntersecting:function(g){g=g||this;var k,x,v,A,n,w=g.rings.length;for(v=0;v<w;v++){for(k=0;k<g.rings[v].length-1;k++){var p=[[g.rings[v][k][0],g.rings[v][k][1]],[g.rings[v][k+1][0],g.rings[v][k+1][1]]];for(x=v+1;x<w;x++)for(A=0;A<g.rings[x].length-1;A++){var D=[[g.rings[x][A][0],g.rings[x][A][1]],[g.rings[x][A+1][0],g.rings[x][A+1][1]]];if((n=a._getLineIntersection2(p,D))&&
!(n[0]===p[0][0]&&n[1]===p[0][1]||n[0]===D[0][0]&&n[1]===D[0][1]||n[0]===p[1][0]&&n[1]===p[1][1]||n[0]===D[1][0]&&n[1]===D[1][1]))return!0}}A=g.rings[v].length;if(!(4>=A))for(k=0;k<A-3;k++){var C=A-1;0===k&&(C=A-2);p=[[g.rings[v][k][0],g.rings[v][k][1]],[g.rings[v][k+1][0],g.rings[v][k+1][1]]];for(x=k+2;x<C;x++)if(D=[[g.rings[v][x][0],g.rings[v][x][1]],[g.rings[v][x+1][0],g.rings[v][x+1][1]]],(n=a._getLineIntersection2(p,D))&&!(n[0]===p[0][0]&&n[1]===p[0][1]||n[0]===D[0][0]&&n[1]===D[0][1]||n[0]===
p[1][0]&&n[1]===p[1][1]||n[0]===D[1][0]&&n[1]===D[1][1]))return!0}}return!1},toJson:function(){var g={rings:l.clone3DArray(this.rings)},k=this.spatialReference;k&&(g.spatialReference=k.toJson());return g}});e.prototype=t.prototype;r.prototype=new e;Object.defineProperty(r.prototype,"rings",{get:function(){this._unquantizeFn&&(this._ringsVal=this._unquantizeFn({rings:l.clone3DArray(this._ringsVal)}).rings,this._unquantizeFn=null);return this._ringsVal},set:function(g){this._ringsVal=g}});r.prototype.setupLazyUnquantization=
function(g,k){this._unquantizeFn=g;this._ringsVal=k.rings};t.simpleConstructor=e;t.accessorConstructor=r;t.defaultProps=m;t.createEllipse=function(g){var k=g.center.x,x=g.center.y,v=g.longAxis,A=g.shortAxis,n=g.numberOfPoints,w=g.map,p;g=[];var D=2*Math.PI/n;for(p=0;p<n;p++){var C=Math.cos(p*D);var G=Math.sin(p*D);C=w.toMap({x:v*C+k,y:A*G+x});g.push(C)}g.push(g[0]);k=new t(w.spatialReference);k.addRing(g);return k};t.createCircle=function(g){return t.createEllipse({center:g.center,longAxis:g.r,shortAxis:g.r,
numberOfPoints:g.numberOfPoints,map:g.map})};t.fromExtent=function(g){var k=g.normalize();g=g.spatialReference;return new t({rings:y.map(k,function(x){return[[x.xmin,x.ymin],[x.xmin,x.ymax],[x.xmax,x.ymax],[x.xmax,x.ymin],[x.xmin,x.ymin]]}),spatialReference:g?g.toJson():null})};u("extend-esri")&&(c.setObject("geometry.Polygon",t,q),q.geometry.defaultPolygon=m,q.geometry.createEllipse=t.createEllipse,q.geometry.createCircle=t.createCircle,q.geometry.isClockwise=t.prototype.isClockwise,q.geometry.polygonSelfIntersecting=
t.prototype.isSelfIntersecting);return t})},"esri/geometry/Polyline":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(B,y,c,u,q,l,m,h,f,d,a){function b(){}function e(){}m={type:"polyline",paths:null};B=B(h,{declaredClass:"esri.geometry.Polyline",type:"polyline",paths:null,constructor:function(r){this.paths=[];this._path=0;r&&(c.isArray(r)?this.paths=c.isArray(r[0][0])?r:
[r]:r.paths?l.mixin(this,r):this.spatialReference=r,this.spatialReference&&(this.spatialReference=a.createSpatialReference(this.spatialReference)));this.verifySR()},addPath:function(r){this.clearCache();this._path=this.paths.length;this.paths[this._path]=[];c.isArray(r[0])?y.forEach(r,this._addPointArr,this):y.forEach(r,this._addPoint,this);return this},_addPointArr:function(r){this.paths[this._path].push(r)},_addPoint:function(r){this.paths[this._path].push([r.x,r.y])},_insertPoints:function(r,t){this.clearCache();
this._path=t;this.paths[this._path]||(this.paths[this._path]=[]);y.forEach(r,this._addPoint,this)},_validateInputs:function(r,t){return null!==r&&void 0!==r&&(0>r||r>=this.paths.length)||null!==t&&void 0!==r&&(0>t||t>=this.paths[r].length)?!1:!0},getPoint:function(r,t){if(this._validateInputs(r,t))return new f(this.paths[r][t],this.spatialReference)},setPoint:function(r,t,g){if(this._validateInputs(r,t))return this.clearCache(),this.paths[r][t]=[g.x,g.y],this},insertPoint:function(r,t,g){if(this._validateInputs(r)&&
null!=t&&0<=t&&t<=this.paths[r].length)return this.clearCache(),this.paths[r].splice(t,0,[g.x,g.y]),this},removePath:function(r){if(this._validateInputs(r,null)){this.clearCache();r=this.paths.splice(r,1)[0];var t,g=r.length,k=this.spatialReference;for(t=0;t<g;t++)r[t]=new f(r[t],k);return r}},removePoint:function(r,t){if(this._validateInputs(r,t))return this.clearCache(),new f(this.paths[r].splice(t,1)[0],this.spatialReference)},getExtent:function(){var r=this.getCacheValue("_extent");var t=this.getCacheValue("_partwise");
if(r)return r=new d(r),r._partwise=t,r;r=this.paths;var g=r.length;if(g&&r[0].length){var k,x,v,A,n=k=r[0][0][0],w=x=r[0][0][1],p=Math.min,D=Math.max,C=this.spatialReference;t=[];var G,z;for(v=0;v<g;v++){var E=r[v];var H=G=E[0]&&E[0][0];var I=z=E[0]&&E[0][1];var M=E.length;for(A=0;A<M;A++){var T=E[A];var Y=T[0];T=T[1];n=p(n,Y);w=p(w,T);k=D(k,Y);x=D(x,T);H=p(H,Y);I=p(I,T);G=D(G,Y);z=D(z,T)}t.push(new d({xmin:H,ymin:I,xmax:G,ymax:z,spatialReference:C?C.toJson():null}))}r={xmin:n,ymin:w,xmax:k,ymax:x,
spatialReference:C?C.toJson():null};t=1<t.length?t:null;this.setCacheValue("_extent",r);this.setCacheValue("_partwise",t);r=new d(r);r._partwise=t;return r}},toJson:function(){var r={paths:l.clone3DArray(this.paths)},t=this.spatialReference;t&&(r.spatialReference=t.toJson());return r}});b.prototype=B.prototype;e.prototype=new b;Object.defineProperty(e.prototype,"paths",{get:function(){this._unquantizeFn&&(this._pathsVal=this._unquantizeFn({paths:l.clone3DArray(this._pathsVal)}).paths,this._unquantizeFn=
null);return this._pathsVal},set:function(r){this._pathsVal=r}});e.prototype.setupLazyUnquantization=function(r,t){this._unquantizeFn=r;this._pathsVal=t.paths};B.simpleConstructor=b;B.accessorConstructor=e;B.defaultProps=m;u("extend-esri")&&(c.setObject("geometry.Polyline",B,q),q.geometry.defaultPolyline=m);return B})},"esri/geometry/ScreenPoint":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Point"],function(B,y,c,u,q){B=B(q,{declaredClass:"esri.geometry.ScreenPoint",
verifySR:function(){}});c("extend-esri")&&y.setObject("geometry.ScreenPoint",B,u);return B})},"esri/geometry/Rect":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Geometry ./Point ./Extent ../srUtils".split(" "),function(B,y,c,u,q,l,m,h,f){function d(b){return new h(parseFloat(b.x),parseFloat(b.y)-parseFloat(b.height),parseFloat(b.x)+parseFloat(b.width),parseFloat(b.y),b.spatialReference)}var a=B(l,{declaredClass:"esri.geometry.Rect",type:"rect",x:0,y:0,width:100,
height:100,constructor:function(b,e,r,t,g){q.isObject(b)&&"extent"===b.type&&(e=b.ymax,r=b.getWidth(),t=b.getHeight(),g=b.spatialReference,b=b.xmin);q.isObject(b)?(q.mixin(this,b),this.spatialReference&&(this.spatialReference=f.createSpatialReference(this.spatialReference))):(this.x=b,this.y=e,this.width=r,this.height=t,this.spatialReference=g);this.verifySR()},getCenter:function(){return new m(this.x+this.width/2,this.y+this.height/2,this.spatialReference)},offset:function(b,e){return new a(this.x+
b,this.y+e,this.width,this.height,this.spatialReference)},intersects:function(b){return b.x+b.width<=this.x||b.y+b.height<=this.y||b.y>=this.y+this.height||b.x>=this.x+this.width?!1:!0},getExtent:function(){return d(this)},update:function(b,e,r,t,g){this.x=b;this.y=e;this.width=r;this.height=t;this.spatialReference=g;this.clearCache();return this}});c("extend-esri")&&(y.setObject("geometry.Rect",a,u),u.geometry._rectToExtent=d,u.geometry._extentToRect=function(b){return new a(b)});return a})},"esri/geometry/scaleUtils":function(){define(["dojo/_base/lang",
"dojo/has","../kernel","../config","../WKIDUnitConversion"],function(B,y,c,u,q){function l(b,e,r){return b&&e?b.getWidth()/e*(r||h)*39.37*f.screenDPI:0}function m(b,e,r,t,g){return b.expand(t*e/(39.37*((g?r:d.values[d[r]])||h)*f.screenDPI)/b.getWidth())}var h=6370997*Math.PI/180,f=u.defaults,d=q,a={getUnitValueForSR:function(b){return this.getUnitValue(b)||h},getUnitValue:function(b){if(b)if("object"===typeof b){var e=b.wkid;var r=b.wkt}else"number"===typeof b?e=b:"string"===typeof b&&(r=b);if(e)var t=
d.values[d[e]];else r&&-1!==r.search(/^PROJCS/i)&&(b=/UNIT\[([^\]]+)\]\]$/i.exec(r))&&b[1]&&(t=parseFloat(b[1].split(",")[1]));return t},getScale:function(b,e,r){if(1<arguments.length&&null!=e&&!e.declaredClass){var t=b;var g=e;e=null;var k=a.getUnitValue(r)}else t=e||b.extent,g=b.width,k=a.getUnitValue(t&&t.spatialReference);return l(t,g,k)},getExtentForScale:function(b,e,r){return m(r||b.extent,b.width,a.getUnitValue(b.spatialReference),e,!0)}};y("extend-esri")&&(B.mixin(B.getObject("geometry",
!0,c),a),c.geometry._getScale=l,c.geometry._getExtentForScale=m);return a})},"esri/WKIDUnitConversion":function(){define(["dojo/has","./kernel"],function(B,y){var c,u={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.116756,5E4,15E4],units:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" "),
2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,
3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,
3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,
3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,
5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,
6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,
6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,
6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,
6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,
7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,
7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,
8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,
8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,
8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9367:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,
24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,
31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,
102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,
103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,
103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,
103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(c=2E3;2045>=c;c++)u[c]=0;for(c=2056;2065>=c;c++)u[c]=0;for(c=2067;2135>=c;c++)u[c]=0;for(c=2137;2154>=
c;c++)u[c]=0;for(c=2161;2170>=c;c++)u[c]=0;for(c=2172;2193>=c;c++)u[c]=0;for(c=2195;2198>=c;c++)u[c]=0;for(c=2200;2203>=c;c++)u[c]=0;for(c=2205;2217>=c;c++)u[c]=0;for(c=2222;2224>=c;c++)u[c]=1;for(c=2225;2250>=c;c++)u[c]=2;for(c=2251;2253>=c;c++)u[c]=1;for(c=2257;2264>=c;c++)u[c]=2;for(c=2274;2279>=c;c++)u[c]=2;for(c=2280;2282>=c;c++)u[c]=1;for(c=2283;2289>=c;c++)u[c]=2;for(c=2290;2292>=c;c++)u[c]=0;for(c=2308;2313>=c;c++)u[c]=0;for(c=2315;2491>=c;c++)u[c]=0;for(c=2494;2866>=c;c++)u[c]=0;for(c=2867;2869>=
c;c++)u[c]=1;for(c=2870;2888>=c;c++)u[c]=2;for(c=2891;2895>=c;c++)u[c]=2;for(c=2896;2898>=c;c++)u[c]=1;for(c=2902;2908>=c;c++)u[c]=2;for(c=2915;2920>=c;c++)u[c]=2;for(c=2921;2923>=c;c++)u[c]=1;for(c=2924;2930>=c;c++)u[c]=2;for(c=2931;2962>=c;c++)u[c]=0;for(c=2964;2968>=c;c++)u[c]=2;for(c=2969;2973>=c;c++)u[c]=0;for(c=2975;2991>=c;c++)u[c]=0;for(c=2995;3051>=c;c++)u[c]=0;for(c=3054;3079>=c;c++)u[c]=0;for(c=3081;3088>=c;c++)u[c]=0;for(c=3092;3101>=c;c++)u[c]=0;for(c=3106;3138>=c;c++)u[c]=0;for(c=3146;3151>=
c;c++)u[c]=0;for(c=3153;3166>=c;c++)u[c]=0;for(c=3168;3172>=c;c++)u[c]=0;for(c=3174;3203>=c;c++)u[c]=0;for(c=3294;3358>=c;c++)u[c]=0;for(c=3367;3403>=c;c++)u[c]=0;for(c=3408;3416>=c;c++)u[c]=0;for(c=3417;3438>=c;c++)u[c]=2;for(c=3441;3446>=c;c++)u[c]=2;for(c=3447;3450>=c;c++)u[c]=0;for(c=3451;3459>=c;c++)u[c]=2;for(c=3460;3478>=c;c++)u[c]=0;for(c=3554;3559>=c;c++)u[c]=0;for(c=3560;3570>=c;c++)u[c]=2;for(c=3571;3581>=c;c++)u[c]=0;for(c=3594;3597>=c;c++)u[c]=0;for(c=3601;3604>=c;c++)u[c]=0;for(c=3637;3639>=
c;c++)u[c]=0;for(c=3665;3667>=c;c++)u[c]=0;for(c=3693;3695>=c;c++)u[c]=0;for(c=3701;3727>=c;c++)u[c]=0;for(c=3728;3739>=c;c++)u[c]=2;for(c=3740;3751>=c;c++)u[c]=0;for(c=3753;3760>=c;c++)u[c]=2;for(c=3761;3773>=c;c++)u[c]=0;for(c=3775;3777>=c;c++)u[c]=0;for(c=3779;3781>=c;c++)u[c]=0;for(c=3783;3785>=c;c++)u[c]=0;for(c=3788;3791>=c;c++)u[c]=0;for(c=3797;3802>=c;c++)u[c]=0;for(c=3814;3816>=c;c++)u[c]=0;for(c=3825;3829>=c;c++)u[c]=0;for(c=3832;3841>=c;c++)u[c]=0;for(c=3844;3852>=c;c++)u[c]=0;for(c=3873;3885>=
c;c++)u[c]=0;for(c=3890;3893>=c;c++)u[c]=0;for(c=3907;3912>=c;c++)u[c]=0;for(c=3942;3950>=c;c++)u[c]=0;for(c=3968;3970>=c;c++)u[c]=0;for(c=3973;3976>=c;c++)u[c]=0;for(c=3986;3989>=c;c++)u[c]=0;for(c=3994;3997>=c;c++)u[c]=0;for(c=4048;4051>=c;c++)u[c]=0;for(c=4056;4063>=c;c++)u[c]=0;for(c=4093;4096>=c;c++)u[c]=0;for(c=4390;4398>=c;c++)u[c]=0;for(c=4399;4413>=c;c++)u[c]=2;for(c=4418;4433>=c;c++)u[c]=2;for(c=4455;4457>=c;c++)u[c]=2;for(c=4484;4489>=c;c++)u[c]=0;for(c=4491;4554>=c;c++)u[c]=0;for(c=4568;4589>=
c;c++)u[c]=0;for(c=4652;4656>=c;c++)u[c]=0;for(c=4766;4800>=c;c++)u[c]=0;for(c=5014;5016>=c;c++)u[c]=0;for(c=5069;5072>=c;c++)u[c]=0;for(c=5105;5130>=c;c++)u[c]=0;for(c=5173;5188>=c;c++)u[c]=0;for(c=5253;5259>=c;c++)u[c]=0;for(c=5269;5275>=c;c++)u[c]=0;for(c=5292;5311>=c;c++)u[c]=0;for(c=5329;5331>=c;c++)u[c]=0;for(c=5343;5349>=c;c++)u[c]=0;for(c=5355;5357>=c;c++)u[c]=0;for(c=5387;5389>=c;c++)u[c]=0;for(c=5459;5463>=c;c++)u[c]=0;for(c=5479;5482>=c;c++)u[c]=0;for(c=5518;5520>=c;c++)u[c]=0;for(c=5530;5539>=
c;c++)u[c]=0;for(c=5550;5552>=c;c++)u[c]=0;for(c=5562;5583>=c;c++)u[c]=0;for(c=5623;5625>=c;c++)u[c]=2;for(c=5631;5639>=c;c++)u[c]=0;for(c=5649;5653>=c;c++)u[c]=0;for(c=5663;5680>=c;c++)u[c]=0;for(c=5682;5685>=c;c++)u[c]=0;for(c=5875;5877>=c;c++)u[c]=0;for(c=5896;5899>=c;c++)u[c]=0;for(c=5921;5940>=c;c++)u[c]=0;for(c=6050;6125>=c;c++)u[c]=0;for(c=6244;6275>=c;c++)u[c]=0;for(c=6328;6348>=c;c++)u[c]=0;for(c=6350;6356>=c;c++)u[c]=0;for(c=6366;6372>=c;c++)u[c]=0;for(c=6381;6387>=c;c++)u[c]=0;for(c=6393;6404>=
c;c++)u[c]=0;for(c=6480;6483>=c;c++)u[c]=0;for(c=6511;6514>=c;c++)u[c]=0;for(c=6579;6581>=c;c++)u[c]=0;for(c=6619;6624>=c;c++)u[c]=0;for(c=6625;6627>=c;c++)u[c]=2;for(c=6628;6632>=c;c++)u[c]=0;for(c=6634;6637>=c;c++)u[c]=0;for(c=6669;6692>=c;c++)u[c]=0;for(c=6707;6709>=c;c++)u[c]=0;for(c=6720;6723>=c;c++)u[c]=0;for(c=6732;6738>=c;c++)u[c]=0;for(c=6931;6933>=c;c++)u[c]=0;for(c=6956;6959>=c;c++)u[c]=0;for(c=7005;7007>=c;c++)u[c]=0;for(c=7057;7070>=c;c++)u[c]=2;for(c=7074;7082>=c;c++)u[c]=0;for(c=7109;7118>=
c;c++)u[c]=0;for(c=7119;7127>=c;c++)u[c]=1;for(c=7374;7376>=c;c++)u[c]=0;for(c=7528;7586>=c;c++)u[c]=0;for(c=7587;7645>=c;c++)u[c]=2;for(c=7692;7696>=c;c++)u[c]=0;for(c=7755;7787>=c;c++)u[c]=0;for(c=7791;7795>=c;c++)u[c]=0;for(c=7799;7801>=c;c++)u[c]=0;for(c=7803;7805>=c;c++)u[c]=0;for(c=7825;7831>=c;c++)u[c]=0;for(c=7845;7859>=c;c++)u[c]=0;for(c=8013;8032>=c;c++)u[c]=0;for(c=8065;8068>=c;c++)u[c]=1;for(c=8518;8529>=c;c++)u[c]=2;for(c=8533;8536>=c;c++)u[c]=2;for(c=8538;8540>=c;c++)u[c]=2;for(c=8677;8679>=
c;c++)u[c]=0;for(c=8836;8840>=c;c++)u[c]=0;for(c=8857;8859>=c;c++)u[c]=0;for(c=8908;8910>=c;c++)u[c]=0;for(c=9154;9159>=c;c++)u[c]=0;for(c=9205;9218>=c;c++)u[c]=0;for(c=9271;9273>=c;c++)u[c]=0;for(c=9295;9297>=c;c++)u[c]=0;for(c=20002;20032>=c;c++)u[c]=0;for(c=20062;20092>=c;c++)u[c]=0;for(c=20135;20138>=c;c++)u[c]=0;for(c=20248;20258>=c;c++)u[c]=0;for(c=20348;20358>=c;c++)u[c]=0;for(c=20436;20440>=c;c++)u[c]=0;for(c=20822;20824>=c;c++)u[c]=0;for(c=20934;20936>=c;c++)u[c]=0;for(c=21035;21037>=c;c++)u[c]=
0;for(c=21095;21097>=c;c++)u[c]=0;for(c=21148;21150>=c;c++)u[c]=0;for(c=21413;21423>=c;c++)u[c]=0;for(c=21453;21463>=c;c++)u[c]=0;for(c=21473;21483>=c;c++)u[c]=0;for(c=21780;21782>=c;c++)u[c]=0;for(c=21891;21894>=c;c++)u[c]=0;for(c=21896;21899>=c;c++)u[c]=0;for(c=22171;22177>=c;c++)u[c]=0;for(c=22181;22187>=c;c++)u[c]=0;for(c=22191;22197>=c;c++)u[c]=0;for(c=22234;22236>=c;c++)u[c]=0;for(c=22521;22525>=c;c++)u[c]=0;for(c=22991;22994>=c;c++)u[c]=0;for(c=23028;23038>=c;c++)u[c]=0;for(c=23830;23853>=
c;c++)u[c]=0;for(c=23866;23872>=c;c++)u[c]=0;for(c=23877;23884>=c;c++)u[c]=0;for(c=23886;23894>=c;c++)u[c]=0;for(c=23946;23948>=c;c++)u[c]=0;for(c=24311;24313>=c;c++)u[c]=0;for(c=24342;24347>=c;c++)u[c]=0;for(c=24370;24374>=c;c++)u[c]=10;for(c=24375;24381>=c;c++)u[c]=0;for(c=24718;24721>=c;c++)u[c]=0;for(c=24817;24821>=c;c++)u[c]=0;for(c=24877;24882>=c;c++)u[c]=0;for(c=24891;24893>=c;c++)u[c]=0;for(c=25391;25395>=c;c++)u[c]=0;for(c=25828;25838>=c;c++)u[c]=0;for(c=26191;26195>=c;c++)u[c]=0;for(c=26391;26393>=
c;c++)u[c]=0;for(c=26701;26722>=c;c++)u[c]=0;for(c=26729;26799>=c;c++)u[c]=2;for(c=26801;26803>=c;c++)u[c]=2;for(c=26811;26813>=c;c++)u[c]=2;for(c=26847;26870>=c;c++)u[c]=2;for(c=26891;26899>=c;c++)u[c]=0;for(c=26901;26923>=c;c++)u[c]=0;for(c=26929;26946>=c;c++)u[c]=0;for(c=26948;26998>=c;c++)u[c]=0;for(c=27037;27040>=c;c++)u[c]=0;for(c=27205;27232>=c;c++)u[c]=0;for(c=27258;27260>=c;c++)u[c]=0;for(c=27391;27398>=c;c++)u[c]=0;for(c=27561;27564>=c;c++)u[c]=0;for(c=27571;27574>=c;c++)u[c]=0;for(c=27581;27584>=
c;c++)u[c]=0;for(c=27591;27594>=c;c++)u[c]=0;for(c=28191;28193>=c;c++)u[c]=0;for(c=28348;28358>=c;c++)u[c]=0;for(c=28402;28432>=c;c++)u[c]=0;for(c=28462;28492>=c;c++)u[c]=0;for(c=29118;29122>=c;c++)u[c]=0;for(c=29168;29172>=c;c++)u[c]=0;for(c=29177;29185>=c;c++)u[c]=0;for(c=29187;29195>=c;c++)u[c]=0;for(c=29900;29903>=c;c++)u[c]=0;for(c=30161;30179>=c;c++)u[c]=0;for(c=30491;30494>=c;c++)u[c]=0;for(c=30729;30732>=c;c++)u[c]=0;for(c=31251;31259>=c;c++)u[c]=0;for(c=31265;31268>=c;c++)u[c]=0;for(c=31275;31279>=
c;c++)u[c]=0;for(c=31281;31297>=c;c++)u[c]=0;for(c=31461;31469>=c;c++)u[c]=0;for(c=31491;31495>=c;c++)u[c]=0;for(c=31917;31922>=c;c++)u[c]=0;for(c=31965;32E3>=c;c++)u[c]=0;for(c=32001;32003>=c;c++)u[c]=2;for(c=32005;32031>=c;c++)u[c]=2;for(c=32033;32060>=c;c++)u[c]=2;for(c=32064;32067>=c;c++)u[c]=2;for(c=32074;32077>=c;c++)u[c]=2;for(c=32081;32086>=c;c++)u[c]=0;for(c=32107;32130>=c;c++)u[c]=0;for(c=32133;32158>=c;c++)u[c]=0;for(c=32164;32167>=c;c++)u[c]=2;for(c=32180;32199>=c;c++)u[c]=0;for(c=32201;32260>=
c;c++)u[c]=0;for(c=32301;32360>=c;c++)u[c]=0;for(c=32601;32662>=c;c++)u[c]=0;for(c=32664;32667>=c;c++)u[c]=2;for(c=32701;32761>=c;c++)u[c]=0;for(c=53001;53004>=c;c++)u[c]=0;for(c=53008;53019>=c;c++)u[c]=0;for(c=53021;53032>=c;c++)u[c]=0;for(c=53034;53037>=c;c++)u[c]=0;for(c=53042;53046>=c;c++)u[c]=0;for(c=53074;53080>=c;c++)u[c]=0;for(c=54001;54004>=c;c++)u[c]=0;for(c=54008;54019>=c;c++)u[c]=0;for(c=54021;54032>=c;c++)u[c]=0;for(c=54034;54037>=c;c++)u[c]=0;for(c=54042;54046>=c;c++)u[c]=0;for(c=54048;54053>=
c;c++)u[c]=0;for(c=54074;54080>=c;c++)u[c]=0;for(c=54098;54101>=c;c++)u[c]=0;for(c=102001;102040>=c;c++)u[c]=0;for(c=102042;102063>=c;c++)u[c]=0;for(c=102065;102067>=c;c++)u[c]=0;for(c=102070;102117>=c;c++)u[c]=0;for(c=102122;102216>=c;c++)u[c]=0;for(c=102221;102377>=c;c++)u[c]=0;for(c=102382;102388>=c;c++)u[c]=0;for(c=102389;102398>=c;c++)u[c]=2;for(c=102399;102444>=c;c++)u[c]=0;for(c=102445;102447>=c;c++)u[c]=2;for(c=102448;102458>=c;c++)u[c]=0;for(c=102459;102468>=c;c++)u[c]=2;for(c=102469;102499>=
c;c++)u[c]=0;for(c=102500;102519>=c;c++)u[c]=1;for(c=102520;102524>=c;c++)u[c]=0;for(c=102525;102529>=c;c++)u[c]=2;for(c=102530;102588>=c;c++)u[c]=0;for(c=102590;102598>=c;c++)u[c]=0;for(c=102601;102603>=c;c++)u[c]=0;for(c=102605;102628>=c;c++)u[c]=0;for(c=102629;102646>=c;c++)u[c]=2;for(c=102648;102700>=c;c++)u[c]=2;for(c=102701;102703>=c;c++)u[c]=0;for(c=102707;102730>=c;c++)u[c]=2;for(c=102733;102758>=c;c++)u[c]=2;for(c=102767;102900>=c;c++)u[c]=0;for(c=102965;102969>=c;c++)u[c]=0;for(c=102971;102973>=
c;c++)u[c]=0;for(c=102975;102989>=c;c++)u[c]=0;for(c=102990;102992>=c;c++)u[c]=1;for(c=102997;103002>=c;c++)u[c]=0;for(c=103003;103008>=c;c++)u[c]=2;for(c=103009;103011>=c;c++)u[c]=0;for(c=103012;103014>=c;c++)u[c]=2;for(c=103019;103021>=c;c++)u[c]=0;for(c=103022;103024>=c;c++)u[c]=2;for(c=103029;103031>=c;c++)u[c]=0;for(c=103032;103034>=c;c++)u[c]=2;for(c=103065;103068>=c;c++)u[c]=0;for(c=103074;103076>=c;c++)u[c]=0;for(c=103077;103079>=c;c++)u[c]=1;for(c=103080;103082>=c;c++)u[c]=0;for(c=103083;103085>=
c;c++)u[c]=2;for(c=103090;103093>=c;c++)u[c]=0;for(c=103097;103099>=c;c++)u[c]=0;for(c=103100;103102>=c;c++)u[c]=2;for(c=103107;103109>=c;c++)u[c]=0;for(c=103110;103112>=c;c++)u[c]=2;for(c=103113;103116>=c;c++)u[c]=0;for(c=103117;103120>=c;c++)u[c]=2;for(c=103153;103157>=c;c++)u[c]=0;for(c=103158;103162>=c;c++)u[c]=2;for(c=103163;103165>=c;c++)u[c]=0;for(c=103166;103168>=c;c++)u[c]=1;for(c=103169;103171>=c;c++)u[c]=2;for(c=103186;103188>=c;c++)u[c]=0;for(c=103189;103191>=c;c++)u[c]=2;for(c=103192;103195>=
c;c++)u[c]=0;for(c=103196;103199>=c;c++)u[c]=2;for(c=103200;103224>=c;c++)u[c]=0;for(c=103225;103227>=c;c++)u[c]=1;for(c=103232;103237>=c;c++)u[c]=0;for(c=103238;103243>=c;c++)u[c]=2;for(c=103244;103246>=c;c++)u[c]=0;for(c=103247;103249>=c;c++)u[c]=2;for(c=103254;103256>=c;c++)u[c]=0;for(c=103257;103259>=c;c++)u[c]=2;for(c=103264;103266>=c;c++)u[c]=0;for(c=103267;103269>=c;c++)u[c]=2;for(c=103300;103375>=c;c++)u[c]=0;for(c=103381;103383>=c;c++)u[c]=0;for(c=103384;103386>=c;c++)u[c]=1;for(c=103387;103389>=
c;c++)u[c]=0;for(c=103390;103392>=c;c++)u[c]=2;for(c=103397;103399>=c;c++)u[c]=0;for(c=103400;103471>=c;c++)u[c]=2;for(c=103476;103478>=c;c++)u[c]=0;for(c=103479;103481>=c;c++)u[c]=2;for(c=103486;103488>=c;c++)u[c]=0;for(c=103489;103491>=c;c++)u[c]=2;for(c=103492;103495>=c;c++)u[c]=0;for(c=103496;103499>=c;c++)u[c]=2;for(c=103528;103543>=c;c++)u[c]=0;for(c=103544;103548>=c;c++)u[c]=2;for(c=103549;103551>=c;c++)u[c]=0;for(c=103552;103554>=c;c++)u[c]=1;for(c=103555;103557>=c;c++)u[c]=2;for(c=103558;103560>=
c;c++)u[c]=0;for(c=103571;103573>=c;c++)u[c]=0;for(c=103574;103576>=c;c++)u[c]=2;for(c=103577;103580>=c;c++)u[c]=0;for(c=103581;103583>=c;c++)u[c]=2;for(c=103595;103694>=c;c++)u[c]=0;for(c=103696;103699>=c;c++)u[c]=0;for(c=103700;103793>=c;c++)u[c]=2;for(c=103794;103872>=c;c++)u[c]=0;for(c=103900;103971>=c;c++)u[c]=2;B("extend-esri")&&(y.WKIDUnitConversion=u);return u})},"esri/geometry/screenUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/sniff ../kernel ./Point ./ScreenPoint ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),
function(B,y,c,u,q,l,m,h,f,d){var a=function(){return 9>c("ie")?function(e,r,t,g,k,x,v,A,n){var w=[],p=Math.round,D,C=v.length,G;for(D=0;D<C;D++){var z=v[D];var E=A?A(z[0][0],z[0][1],n):z[0];if(1<(G=z.length)){var H=p((E[0]-e)*t+k);var I=p((r-E[1])*g+x);E=A?A(z[1][0],z[1][1],n):z[1];var M=p((E[0]-e)*t+k);E=p((r-E[1])*g+x);w.push("M",H+","+I,"L",M+","+E);for(M=2;M<G;M++)E=A?A(z[M][0],z[M][1],n):z[M],H=p((E[0]-e)*t+k),I=p((r-E[1])*g+x),w.push(H+","+I)}else H=p((E[0]-e)*t+k),I=p((r-E[1])*g+x),w.push("M",
H+","+I)}return w}:function(e,r,t,g,k,x,v,A,n,w){var p=[],D,C,G=Math.round;var z=0;for(D=v?v.length:0;z<D;z++){var E=v[z];p.push("M");var H=0;for(C=E?E.length:0;H<C;H++){var I=A?A(E[H][0],E[H][1],n):E[H];p.push(G((I[0]-e)*t+k)+","+G((r-I[1])*g+x))}w||p.push("Z")}return p}}(),b={toScreenPoint:function(e,r,t,g,k){var x=e.spatialReference,v=g.spatialReference,A=g.x;g=g.y;x&&v&&!x.equals(v)&&x._canProject(v)&&(x=x.isWebMercator()?q.lngLatToXY(A,g):q.xyToLngLat(A,g,!0),A=x[0],g=x[1]);A=(A-e.xmin)*(r/e.getWidth());
g=(e.ymax-g)*(t/e.getHeight());k||(A=Math.round(A),g=Math.round(g));return new l(A,g)},toScreenGeometry:function(e,r,t,g){var k=e.xmin,x=e.ymax,v=r/e.getWidth(),A=t/e.getHeight(),n=B.forEach,w=Math.round;if(g instanceof q)return new q(w((g.x-k)*v),w((x-g.y)*A));if(g instanceof f){e=new f;var p=e.points;n(g.points,function(E,H){p[H]=[w((E[0]-k)*v),w((x-E[1])*A)]});return e}if(g instanceof d)return new d(w((g.xmin-k)*v),w((x-g.ymin)*A),w((g.xmax-k)*v),w((x-g.ymax)*v));if(g instanceof m){e=new m;var D=
e.paths,C;n(g.paths,function(E,H){C=D[H]=[];n(E,function(I,M){C[M]=[w((I[0]-k)*v),w((x-I[1])*A)]})});return e}if(g instanceof h){e=new h;var G=e.rings,z;n(g.rings,function(E,H){z=G[H]=[];n(E,function(I,M){z[M]=[w((I[0]-k)*v),w((x-I[1])*A)]})});return e}},_toScreenPath:function(e,r,t,g,k,x){var v=g instanceof m,A=e.spatialReference,n=g.spatialReference;if(A&&n&&!A.equals(n)&&A._canProject(n))if(A.isWebMercator())var w=q.lngLatToXY;else{w=q.xyToLngLat;var p=!0}return a(e.xmin,e.ymax,r/e.getWidth(),
t/e.getHeight(),k,x,v?g.paths:g.rings,w,p,v)},toMapPoint:function(e,r,t,g){return new q(e.xmin+g.x/(r/e.getWidth()),e.ymax-g.y/(t/e.getHeight()),e.spatialReference)},toMapGeometry:function(e,r,t,g){var k=e.xmin,x=e.ymax,v=e.spatialReference,A=r/e.getWidth(),n=t/e.getHeight(),w=B.forEach;if(g instanceof q)return new q(k+g.x/A,x-g.y/n,v);if(g instanceof f){e=new f(v);var p=e.points;w(g.points,function(E,H){p[H]=[k+E[0]/A,x-E[1]/n]});return e}if(g instanceof d)return new d(k+g.xmin/A,x-g.ymin/n,k+g.xmax/
A,x-g.ymax/n,v);if(g instanceof m){e=new m(v);var D=e.paths,C;w(g.paths,function(E,H){C=D[H]=[];w(E,function(I,M){C[M]=[k+I[0]/A,x-I[1]/n]})});return e}if(g instanceof h){e=new h(v);var G=e.rings,z;w(g.rings,function(E,H){z=G[H]=[];w(E,function(I,M){z[M]=[k+I[0]/A,x-I[1]/n]})});return e}}};c("extend-esri")&&y.mixin(y.getObject("geometry",!0,u),b);return b})},"esri/layers/GraphicsLayer":function(){define("require dojo/_base/declare dojo/_base/Deferred dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/window dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/dom dojox/gfx dojox/gfx/matrix ./gfxSniff!esri-svg?dojox/gfx/filters ./layer ./support/webglUtils ./support/WebGLSurface ../kernel ../lang ../sniff ../Color ../domUtils ../symbols/MarkerSymbol ../symbols/SimpleMarkerSymbol ../symbols/utils ../geometry/Point ../geometry/ScreenPoint ../geometry/Extent ../geometry/mathUtils ../geometry/screenUtils ../PluginTarget ./gfxSniff!esri-svg?dojox/gfx/svgext".split(" "),
function(B,y,c,u,q,l,m,h,f,d,a,b,e,r,t,g,k,x,v,A,n,w,p,D,C,G,z,E,H,I,M){var T=-1!==b.renderer.toLowerCase().indexOf("svg"),Y=-1!==b.renderer.toLowerCase().indexOf("canvas"),fa=Y?"canvas-2d":b.renderer,ca=9>A("ie");m=10===A("ie");var X=void 0===A("ie")&&7==A("trident"),ea=m||X,ma=A("esri-touch"),wa=!!A("chrome"),P=g.isWebGLEnabled(),ja=T&&A("esri-will-change"),ta=P||Y;g=y(null,{declaredClass:"esri.layers._GraphicsContainer",_setMap:function(N,S){var ha=this._connects=[];this._map=N;this._useWillChange=
this._useGlobalTransform="css-transforms"===N.navigationMode&&ja;if(ta){var la=f.create("div",{style:{position:"absolute",overflow:"visible"}},S);this._surface={getEventSource:function(){return la}};Y&&(ha.push(u.connect(la,"onmousedown",this,this._canvasDownHandler)),ha.push(u.connect(la,"onmouseup",this,this._canvasUpHandler)),ha.push(u.connect(la,"onclick",this,this._canvasClickHandler)));P&&(this._webglSurface=new k({map:N,node:la}))}else la=(this._surface=b.createSurface(S,N.width,N.height)).getEventSource(),
this._useWillChange&&d.set(la,"will-change","transform"),d.set(la=ca?la.parentNode:la,{overflow:"visible",position:"absolute"});ha.push(u.connect(N,"onResize",this,"_onResizeHandler"));this._useGlobalTransform&&(ha.push(u.connect(N,"onPan",this,"_onPanHandler")),ha.push(u.connect(N,"onPanEnd",this,"_onPanEndHandler")),ha.push(u.connect(N,"onExtentChange",this,"_onExtentChangeHandler")));return la},_reorderLayer:function(N,S,ha){S=S.getEventSource();ta&&"svg"===N.surfaceType&&(S=S.parentNode);f.place(S,
this._surface.getEventSource(),ha)},_onPanHandler:function(N,S){var ha=this._map.__visibleRect;N=ha.x+S.x;S=ha.y+S.y;this._panDx=N;this._panDy=S;ta||d.set(this._surface.getEventSource(),x._css.names.transform,x._css.translate(N,S))},_onPanEndHandler:function(N,S){S=this._map.__visibleRect;N=S.x;S=S.y;this._panDx=N;this._panDy=S;ta||d.set(this._surface.getEventSource(),x._css.names.transform,x._css.translate(N,S))},_onExtentChangeHandler:function(N,S,ha,la){ha&&(this._panDy=this._panDx=0,ta||d.set(this._surface.getEventSource(),
x._css.names.transform,x._css.translate(0,0)))},_getTransform:function(){return{dx:this._panDx||0,dy:this._panDy||0}},_onResizeHandler:function(N,S,ha){N=this._surface.getEventSource();var la=this._map,sa;ca&&d.set(N=N.parentNode,{width:S+"px",height:ha+"px",clip:"rect(0px "+S+"px "+ha+"px 0px)"});h.set(N,"width",S);h.set(N,"height",ha);this._surface.declaredClass||l.forEach(N.childNodes,function(ya){h.set(ya,"width",S);h.set(ya,"height",ha)});la.loaded&&(la.graphics.suspended||(la.graphics._resized=
!0),l.forEach(la.graphicsLayerIds,function(ya){sa=la.getLayer(ya);sa.suspended||(sa._resized=!0,sa._childLayer&&(sa._childLayer._resized=!0));sa._updateSVGFilters(null,null,S,ha)}),la.graphics._updateSVGFilters(null,null,S,ha),la._labels&&la._labels._updateSVGFilters(null,null,S,ha))},_cleanUp:function(){l.forEach(this._connects,u.disconnect,u);this._map=this._surface=null},_processEvent:function(N){var S=this._map;N.screenPoint=new z(N.pageX-S.position.x,N.pageY-S.position.y);N.mapPoint=S.toMap(N.screenPoint)},
_canvasDownHandler:function(N){this._processEvent(N);this._downPt=N.screenPoint.x+","+N.screenPoint.y},_canvasUpHandler:function(N){this._processEvent(N);this._upPt=N.screenPoint.x+","+N.screenPoint.y},_tolerance:15,_isPrimaryMatch:function(N,S,ha,la){if(!N.visible||!S)return!1;var sa=S.getTransformedBoundingBox();if(sa){var ya=new E(sa[0].x,sa[0].y,sa[2].x,sa[2].y);delete ya.spatialReference;return ma?ya.intersects(ha):ya.contains(la)}return l.some(S.children||[],function(Ga){sa=Ga.getTransformedBoundingBox();
ya=new E(sa[0].x,sa[0].y,sa[2].x,sa[2].y);delete ya.spatialReference;return ma?ya.intersects(ha):ya.contains(la)})},_canvasClickHandler:function(N){if(this._downPt&&this._upPt&&this._downPt===this._upPt){this._processEvent(N);var S=this._map,ha=l.map(S.graphicsLayerIds,function(pa){return S.getLayer(pa)});ha.push(S.graphics);ha.reverse();ha=l.filter(ha,function(pa){return pa.loaded&&!pa.hasWebGLSurface()&&pa._mouseEvents&&!pa.suspended&&(!v.isDefined(pa.opacity)||0<pa.opacity)});var la=N.screenPoint,
sa=this._tolerance,ya=la.x-sa,Ga=la.y+sa,ba=la.x+sa;sa=la.y-sa;var da=new E(ya,sa,ba,Ga);ya=S.toMap(new z(ya,Ga));ba=S.toMap(new z(ba,sa));Ga=ya.spatialReference._getInfo();var oa=new E(E.prototype._normalizeX(ya.x,Ga).x,ya.y,E.prototype._normalizeX(ba.x,Ga).x,ba.y,ya.spatialReference),va;delete da.spatialReference;l.some(ha,function(pa){pa=l.filter(pa.graphics,function(W){return this._isPrimaryMatch(W,W.getDojoShape(),da,la)||!(!W._bgShape||!this._isPrimaryMatch(W,W._bgShape,da,la))},this);pa.reverse();
if(0<pa.length){var Oa;l.some(pa,function(W){return W.geometry&&oa.intersects(W.geometry)?(Oa=W,!0):!1});if(Oa)return va=Oa,!0}return!1},this);va&&(ha=va.getLayer())&&(N.graphic=va,ha.onClick(N))}}});t=y(t,{declaredClass:"esri.layers._GraphicsLayer",managedSuspension:!0,surfaceType:fa,webglEnabled:P,renderer:null,_eventMap:{"graphic-add":["graphic"],"graphic-remove":["graphic"],"renderer-change":["renderer"]},_suspendGraphics:!1,constructor:function(N,S){N=N||{};if(q.isString(N)||q.isObject(N)&&(N.layerDefinition||
N.query))N=S;this._params=q.mixin({displayOnPan:!0,drawMode:!0,styling:!0},N);S=this._params.dataAttributes;"string"===typeof S&&(S=[S]);this.styling=T?this._params.styling:!0;this.dataAttributes=S;this.infoTemplate=N&&N.infoTemplate;this.graphics=[];this._draw=q.hitch(this,this._draw);this._refresh=q.hitch(this,this._refresh);this._acquireSVGMarker=q.hitch(this,this._acquireSVGMarker);this._evalSurfaceType=q.hitch(this,this._evalSurfaceType);this._setSurfaceType=q.hitch(this,this._setSurfaceType);
this.setWebGLEnabled(null!=this._params.webglEnabled?this._params.webglEnabled:this.webglEnabled);this.registerConnectEvents()},getNode:function(){return this._div&&this._div.getEventSource()},setDrawMode:function(N){this._params.drawMode=N},suspendGraphics:function(N){this._suspendGraphics=N;l.forEach(this.graphics,function(S){S._suspended=N})},setWebGLEnabled:function(N){var S=this.webglEnabled;this.webglEnabled=(N||!1)&&P;S!==this.webglEnabled&&(this._evalSurfaceType(),this.onWebGLEnabledChange())},
hasWebGLSurface:function(){return"webgl"===this.surfaceType},_getSurfaceType:function(N){return N&&"webgl"===N.surfaceType?"webgl":fa},_evalSurfaceType:function(N){P&&(N?this._setSurfaceType():null==this._evalSurfaceTimerHandle&&(this._evalSurfaceTimerHandle=setTimeout(this._setSurfaceType,0)))},_hasPendingSurfaceEval:function(){return!!this._evalSurfaceTimerHandle},_setSurfaceType:function(){clearTimeout(this._evalSurfaceTimerHandle);this._evalSurfaceTimerHandle=null;var N=this._canUseWebGLSurface()?
"webgl":fa;this.surfaceType!==N?(this.surfaceType=N,this._handleSurfaceChange(),this.onSurfaceChange()):this._pendingRedraw&&this._redraw()},_handleSurfaceChange:function(){this._cancelWebGLDepsLoad();this._webglDepsPromise=this._prepareToAttach(this._map);this._webglDepsPromise.always(q.hitch(this,function(N){this._webglDepsPromise=null;N&&"cancel"===N.dojoType||this._evalSurface()}))},_cancelWebGLDepsLoad:function(){this._webglDepsPromise&&!this._webglDepsPromise.isFulfilled()&&this._webglDepsPromise.cancel();
this._webglDepsPromise=null},_evalSurface:function(){var N=this._map,S=this._div;N&&S&&this._getSurfaceType(S)!==this.surfaceType&&(N._detachGraphicsLayer(this),N._attachGraphicsLayer(this))},_canUseWebGLSurface:function(N){N=N||this._map;return this.webglEnabled&&(!N||N.webglEnabled&&(N.ownsWebGLContext(this)||N.isWebGLContextAvailable()))&&this._params.drawMode&&this._isWebGLCompatible()},_isWebGLCompatible:function(){return!1},_prepareToAttach:function(N){var S=new c;!this.webglDeps&&this._canUseWebGLSurface(N)?
B(["./support/webglDeps"],q.hitch(this,function(ha){this.webglDeps=ha;S.isFulfilled()||S.resolve()})):S.resolve();return S.promise},_setMap:function(N,S){this.inherited(arguments);this._map=N;this._evalSurfaceType(!0);this._webglChangeMapHandle=N.on("webgl-enabled-change",q.hitch(this,function(){this._evalSurfaceType()}));this._wrap=N.wrapAround180;this._srInfo=N.spatialReference._getInfo();this._svgFilters={};this._lineMarkers={};if(this.hasWebGLSurface())N.acquireWebGLContext(this),this._div=N._gc._webglSurface.createRenderer(this.webglDeps.WebGLRenderer,
N.width,N.height,this);else{if("svg"===this.surfaceType)if(ta){S=b.createSurface(S.getEventSource(),N.width,N.height);var ha=S.getEventSource();d.set(ha,{position:"absolute",overflow:"visible",pointerEvents:"none"});N._gc._useWillChange&&d.set(ha,"will-change","transform");this._div=S.createGroup();d.set(this._div.getEventSource(),"pointer-events","auto")}else this._div=S.createGroup();else S=b.createSurface(S.getEventSource(),N.width,N.height),d.set(S.rawNode,"position","absolute"),this._div=S.createGroup(),
this._renderProto=this._div.constructor.prototype._render,this._div._render=q.hitch(this,this._canvasRender);this._bgGroup=this._div.createGroup()}this._div.getEventSource().id=this.id+"_layer";this._initOpacity();return this._div},_unsetMap:function(N,S){N.releaseWebGLContext(this);"webgl"===this._div.surfaceType?N._gc._webglSurface.destroyRenderer(this._div):(l.forEach(this.graphics,function(ha){ha._shape=null}),"svg"===this.surfaceType?ta?(S=this._div.parent,this._div.clear(),S.remove(this._div),
f.destroy(this._div.getEventSource()),f.destroy(S.getEventSource())):(this._div.clear(),S.remove(this._div),f.destroy(this._div.getEventSource())):(S=this._div.getParent(),S._parent={},f.destroy(S.rawNode),S.destroy()));this._map=this._div=this._svgFilters=this._lineMarkers=null;this._pendingRedraw=!1;clearTimeout(this._wakeTimer);this._wakeTimer=null;clearTimeout(this._evalSurfaceTimerHandle);this._evalSurfaceTimerHandle=null;this._webglChangeMapHandle&&this._webglChangeMapHandle.remove();this._cancelWebGLDepsLoad();
this._disableDrawConnectors();this.inherited(arguments)},_initOpacity:function(){var N=this.opacity;v.isDefined(N)&&1>N&&this.setOpacity(N,!0)},_onZoomStartHandler:function(){this.hasWebGLSurface()||w.hide(this._div.getEventSource())},_onExtentChangeHandler:function(N,S,ha,la){clearTimeout(this._wakeTimer);this._wakeTimer=null;ha?(N=this._map.__visibleRect,S=this._div,this._evalSDRenderer(),this._refresh(!0),this._params._child||this._updateTransform(S,N.x,N.y,!0),this._renderProto&&S.surface.pendingRender?
this._dirty=!0:this.suspended||w.show(S.getEventSource())):this._resized&&(this._resized=!1,this._refresh(!1));if(0<this.graphics.length)this.onUpdate()},_canvasRender:function(){var N=this._div;this._dirty&&(delete this._dirty,this.suspended||w.show(N.getEventSource()));return this._renderProto.apply(N,arguments)},_refresh:function(N){if(!this.hasWebGLSurface()){var S=this.graphics,ha=S.length,la,sa=this._draw;for(la=0;la<ha;la++)sa(S[la],N)}},refresh:function(){this._refresh(!0)},_redraw:function(){this._pendingRedraw=
!1;this.hasWebGLSurface()?this._div&&this._div.redraw():this._refresh(!0)},redraw:function(){this._hasPendingSurfaceEval()?this._pendingRedraw=!0:this._redraw()},hasLocalNavigationTransform:function(){return!(this._map&&this._map._gc._useGlobalTransform)},getNavigationTransform:function(){var N={dx:0,dy:0};this._map&&(this.hasLocalNavigationTransform()?this._div&&!this.hasWebGLSurface()&&(N=this._div.getTransform()):N=this._map._gc._getTransform());return N},_onPanHandler:function(N,S){this._panDx=
S.x;this._panDy=S.y;N=this._map.__visibleRect;this._updateTransform(this._div,N.x+S.x,N.y+S.y);X&&this._updateSVGMarkers()},_onPanEndUpdateHandler:function(N,S){N=this._map.__visibleRect;this._params._child||S.x===this._panDx&&S.y===this._panDy?(this._updateSVGFilters(-N.x,-N.y),this._updateSVGMarkers()):this._updateTransform(this._div,N.x,N.y,!0);this._refresh(!1);if(this.graphics.length)this.onUpdate()},_onPanStartHandler:function(){w.hide(this._div.getEventSource())},_onPanEndHandler:function(){var N=
this._map.__visibleRect,S=this._div;this._updateTransform(S,N.x,N.y,!0);this._refresh(!1);this._renderProto&&S.surface.pendingRender?this._dirty=!0:w.show(S.getEventSource());if(this.graphics.length)this.onUpdate()},_updateTransform:function(N,S,ha,la){this.hasWebGLSurface()||(this.hasLocalNavigationTransform()?N.setTransform(e.translate({x:S,y:ha})):ta&&d.set(this._div.parent.getEventSource(),x._css.names.transform,x._css.translate(S,ha)),la&&(this._updateSVGFilters(-S,-ha),this._updateSVGMarkers()))},
onSuspend:function(){this.inherited(arguments);w.hide(this._div.getEventSource());clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors()},onResume:function(N){this.inherited(arguments);N.firstOccurrence&&this._evalSDRenderer();this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(q.hitch(this,function(){this.suspended||this._map.__zooming||this._onExtentChangeHandler(null,null,!0)}),0)},_enableDrawConnectors:function(){var N=this._map,S=u.connect;this._disableDrawConnectors();
this._params.displayOnPan?(this._params._child||(this._onPanHandler_connect=S(N,"onPan",this,"_onPanHandler")),this._onPanEndHandler_connect=S(N,"onPanEnd",this,"_onPanEndUpdateHandler")):(this._onPanStartHandler_connect=S(N,"onPanStart",this,"_onPanStartHandler"),this._onPanEndHandler_connect=S(N,"onPanEnd",this,"_onPanEndHandler"));this._onZoomStartHandler_connect=S(N,"onZoomStart",this,"_onZoomStartHandler");this._onExtentChangeHandler_connect=S(N,"onExtentChange",this,"_onExtentChangeHandler")},
_disableDrawConnectors:function(){var N=u.disconnect;N(this._onExtentChangeHandler_connect);N(this._onZoomStartHandler_connect);N(this._onPanHandler_connect);N(this._onPanStartHandler_connect);N(this._onPanEndHandler_connect);this._onExtentChangeHandler_connect=this._onZoomStartHandler_connect=this._onPanHandler_connect=this._onPanStartHandler_connect=this._onPanEndHandler_connect=null},_updateExtent:function(N){var S=N.geometry;if(!S)N._extent=null;else if(!(N._extent=S.getExtent())){if("esri.geometry.Point"===
S.declaredClass){var ha=S.x;var la=S.y}else if("esri.geometry.Multipoint"===S.declaredClass)ha=S.points[0][0],la=S.points[0][1];else{N._extent=null;return}N._extent=new E(ha,la,ha,la,S.spatialReference)}},_intersects:function(N,S,ha){var la=N.spatialReference,sa=S.spatialReference,ya=la&&sa&&!la.equals(sa)&&la._canProject(sa)&&4326===sa.wkid;if(this._wrap&&!ha){ha=[];la=N._getFrameWidth();var Ga=this._srInfo,ba=N._clip?N._getAvailExtent():N.extent,da,oa=[];var va=S._partwise;ya&&(ba=N.geographicExtent,
Ga=sa._getInfo());N=ba._getParts(Ga);if(va&&va.length)for(S=[],sa=0,ya=va.length;sa<ya;sa++)S=S.concat(va[sa]._getParts(Ga));else S=S._getParts(Ga);sa=0;for(ya=S.length;sa<ya;sa++){var pa=S[sa];Ga=0;for(ba=N.length;Ga<ba;Ga++){var Oa=N[Ga];if(Oa.extent.intersects(pa.extent))for(va=0,da=pa.frameIds.length;va<da;va++)ha.push((Oa.frameIds[0]-pa.frameIds[va])*la)}}sa=0;for(ya=ha.length;sa<ya;sa++)va=ha[sa],l.indexOf(ha,va)===sa&&oa.push(va);return oa.length?oa:null}return(ya?N.geographicExtent:N.extent).intersects(S)?
[0]:null},_defaultMarker:{type:"simplemarkersymbol",style:"square",size:1,xoffset:0,yoffset:0,angle:0},_draw:function(N,S){if(!this.hasWebGLSurface()&&this._params.drawMode&&this._map&&!this.suspended&&!this._map.__zooming&&!this._resized)try{var ha=N._extent,la,sa,ya=!T||this.styling,Ga=T&&this.dataAttributes,ba=N.getDojoShape(),da;if(!N._suspended&&N.visible&&ha&&(la=this._intersects(this._map,ha,N.geometry._originOnly))&&(sa=ya?this._getSymbol(N):this._defaultMarker)){if(N._offsets&&N._offsets.join(",")===
la.join(",")?da=!0:N._offsets=la,!ba||S||!da){var oa=N.geometry.type;S={graphic:N};var va=N._bgShape,pa=ya&&!N.symbol?this._getRenderer(N):null,Oa=pa&&pa.backgroundFillSymbol;if("point"===oa)this._isInvalidShape(sa,ba)&&this._removeShape(N),N._shape=this._drawPoint(this._div,N.geometry,sa,N.getDojoShape(),la,pa,N),ya&&this._symbolizePoint(N.getDojoShape(),sa,pa,N);else if("multipoint"===oa)this._drawMarkers(N,sa,la,pa),ya&&this._symbolizeMarkers(N,sa,pa);else{var W;oa=sa;var U;ya&&(oa=(W="simplemarkersymbol"===
sa.type||"picturemarkersymbol"===sa.type||"textsymbol"===sa.type?sa:null)?Oa:sa);if(ya&&oa&&-1<oa.type.indexOf("fillsymbol")){var na=this._bgGroup;var qa=!(!na||!W)}va&&!qa&&this._removeBgShape(N);if(oa){!qa&&(this._isInvalidShape(oa,N._shape)||N._shape&&N._shape._isCentroidMarker)&&this._removeShape(N,!1);if(U=this._drawShape(N,la,na||this._div,qa?va:N.getDojoShape()))U._isCentroidMarker=!1;ya&&this._symbolizeShape(U,oa,pa,oa===Oa,N);N[qa?"_bgShape":"_shape"]=U}if(W){(this._isInvalidShape(W,N._shape)||
N._shape&&!N._shape._isCentroidMarker)&&this._removeShape(N,!1);var Ea=N.geometry.getCentroid();if(U=Ea&&this._drawPoint(this._div,Ea,W,N._shape,la,pa,N))U._isCentroidMarker=!0,this._symbolizePoint(U,W,pa,N);N._shape=U}}Y||(N._bgShape&&this._initNode(N,N._bgShape,N._bgShape!==va,S,Ga),N._shape&&this._initNode(N,N._shape,N._shape!==ba,S,Ga));N._applyDataAttrs();S.node=N.getNode();this.onGraphicDraw(S)}}else ba&&this._removeShape(N)}catch(Ta){this._errorHandler(Ta,N)}},_initNode:function(N,S,ha,la,
sa){if(S=S&&S.getNode())S.e_graphic=N,this._addDataAttrs(N,sa,S),ha&&(la.node=S,this.onGraphicNodeAdd(la))},_removeShape:function(N,S,ha){var la=N.getDojoShape(),sa=la&&la.getNode();la&&!ha&&(la.removeShape(),la.destroy());N._shape=N._offsets=null;!1!==S&&this._removeBgShape(N,ha);if(sa&&(sa.e_graphic=null,!Y))this.onGraphicNodeRemove({graphic:N,node:sa})},_removeBgShape:function(N,S){var ha=N._bgShape,la=ha&&ha.getNode();ha&&!S&&(ha.removeShape(),ha.destroy());N._bgShape=null;if(la&&(la.e_graphic=
null,!Y))this.onGraphicNodeRemove({graphic:N,node:la})},_addDataAttrs:function(N,S,ha){var la=N.attributes,sa,ya=S?S.length:0,Ga=this._getRenderer(N);if(ha&&la){for(sa=0;sa<ya;sa++)(ha=S[sa])&&N.attr("data-"+ha,la[ha]);!this.styling&&Ga&&(Ga.getBreakIndex?(S=Ga.getBreakIndex(N),N.attr("data-class-break",-1!==S?S:null)):Ga.getUniqueValueInfo&&(S=Ga.getUniqueValueInfo(N),N.attr("data-unique-value",S?S.value:null)))}},_drawShape:function(N,S,ha,la){N=N.geometry;var sa=N.type,ya=this._map,Ga=ya.extent,
ba=ya.width,da=ya.height;ya=ya.__visibleRect;var oa=[],va;var pa="extent"===sa;if("rect"===sa||pa)oa={x:0,y:0,spatialReference:N.spatialReference},oa.x=pa?N.xmin:N.x,oa.y=pa?N.ymax:N.y,sa=I.toScreenPoint(Ga,ba,da,oa),oa.x=pa?N.xmax:N.x+N.width,oa.y=pa?N.ymin:N.y+N.height,N=I.toScreenPoint(Ga,ba,da,oa),S={x:sa.x-ya.x+S[0],y:sa.y-ya.y,width:Math.abs(N.x-sa.x),height:Math.abs(N.y-sa.y)},0===S.width&&(S.width=1),0===S.height&&(S.height=1),la=this._drawRect(ha,la,S);else if("polyline"===sa||"polygon"===
sa){pa=0;for(va=S.length;pa<va;pa++)oa=oa.concat(I._toScreenPath(Ga,ba,da,N,-ya.x+S[pa],-ya.y));la=this._drawPath(ha,la,oa);this._rendererLimits&&("polyline"===sa?this._clipPolyline(la,N):this._clipPolygon(la,N))}return la},_drawRect:function(N,S,ha){return S?S.setShape(ha):N.createRect(ha)},_drawImage:function(N,S,ha){return S?S.setShape(ha):N.createImage(ha)},_drawCircle:function(N,S,ha){return S?S.setShape(ha):N.createCircle(ha)},_drawPath:function(){return ca?function(N,S,ha,la){ha=la?ha:ha.join(" ");
if(S)return S.setShape(ha);S=N.createObject(la?b.Path:b.EsriPath,ha);N._overrideSize(S.getEventSource());return S}:function(N,S,ha,la){ha=la?ha:ha.join(" ");return S?S.setShape(ha):N.createPath(ha)}}(),_drawText:function(N,S,ha){return S?S.setShape(ha):N.createText(ha)},_evalSDRenderer:function(N){var S=this._map,ha=this.renderer,la,sa=this._rndForScale;S&&S.loaded&&ha&&ha.getRendererInfo&&(la="zoom"===ha.rangeType?ha.getRendererInfoByZoom(S.getZoom()):ha.getRendererInfoByScale(S.getScale()));this._rndForScale=
la&&la.renderer;N||this._rndForScale==sa||this.emit("renderer-change",{renderer:this._rndForScale})},_getRenderer:function(N){var S=this._rndForScale||this.renderer;N&&S&&S.getObservationRenderer&&(S=S.getObservationRenderer(N));return S},_getSymbol:function(N){var S=this._getRenderer();return N.symbol||S&&S.getSymbol(N)},_getVariable:function(N,S,ha){if(N)var la=(N=N.getVisualVariablesForType(S,ha))&&N[0];return la},_applyOpacity:function(N,S,ha,la){S=S.getOpacity(la,{opacityInfo:ha});null!=S&&(N=
new n(N),N.a=S);return N},_symbolizeShape:function(N,S,ha,la,sa){var ya=S.getStroke(),Ga=S.getFill(),ba=S.type,da=-1!==ba.indexOf("linesymbol"),oa=-1!==ba.indexOf("fillsymbol")?null:this._getVariable(ha,"sizeInfo",!1),va=this._getVariable(ha,"colorInfo",!1),pa=this._getVariable(ha,"opacityInfo",!1),Oa=da?"none"!==S.style:S.outline&&"none"!==S.outline.style,W=da?null:this._getVariable(ha,"sizeInfo","outline");oa=(oa=la?W:W||oa)?ha.getSize(sa,{sizeInfo:oa,resolution:this._map.getResolutionInMeters(),
scale:this._map.getScale()}):null;la&&(va=pa=null);if((va||pa)&&"picturefillsymbol"!==ba)if(da){var U=ya&&ya.color;va&&(U=ha.getColor(sa,{colorInfo:va})||U);U&&pa&&(U=this._applyOpacity(U,ha,pa,sa))}else if(Ga&&Ga.toCss){var na=Ga;va&&(na=ha.getColor(sa,{colorInfo:va})||na);na&&pa&&(na=this._applyOpacity(na,ha,pa,sa))}N.setStroke(!Oa||null==oa&&!U?ya:q.mixin({},ya,null!=oa?{width:oa}:null,U&&{color:U})).setFill(na||Ga);da&&C.applyLineMarker(N,S,U,this._acquireSVGMarker)},_smsToPath:function(){return ca?
function(N,S,ha,la,sa,ya,Ga,ba,da){switch(S){case N.STYLE_SQUARE:return["M",sa+","+Ga,"L",ya+","+Ga,ya+","+ba,sa+","+ba,"X","E"];case N.STYLE_CROSS:return["M",ha+","+Ga,"L",ha+","+ba,"M",sa+","+la,"L",ya+","+la,"E"];case N.STYLE_X:return["M",sa+","+Ga,"L",ya+","+ba,"M",sa+","+ba,"L",ya+","+Ga,"E"];case N.STYLE_DIAMOND:return["M",ha+","+Ga,"L",ya+","+la,ha+","+ba,sa+","+la,"X","E"];case N.STYLE_TARGET:return["M",sa+","+Ga,"L",ya+","+Ga,ya+","+ba,sa+","+ba,sa+","+Ga,"M",sa-da+","+la,"L",sa+","+la,"M",
ha+","+(Ga-da),"L",ha+","+Ga,"M",ya+da+","+la,"L",ya+","+la,"M",ha+","+(ba+da),"L",ha+","+ba,"E"]}}:function(N,S,ha,la,sa,ya,Ga,ba,da){switch(S){case N.STYLE_SQUARE:return["M",sa+","+Ga,ya+","+Ga,ya+","+ba,sa+","+ba,"Z"];case N.STYLE_TRIANGLE:return["M",ha+","+Ga,ya+","+ba,sa+","+ba,"Z"];case N.STYLE_CROSS:return["M",ha+","+Ga,ha+","+ba,"M",sa+","+la,ya+","+la];case N.STYLE_X:return["M",sa+","+Ga,ya+","+ba,"M",sa+","+ba,ya+","+Ga];case N.STYLE_DIAMOND:return["M",ha+","+Ga,ya+","+la,ha+","+ba,sa+","+
la,"Z"];case N.STYLE_TARGET:return N=["M",sa+","+Ga,ya+","+Ga,ya+","+ba,sa+","+ba,sa+","+Ga],da&&N.push("M",sa-da+","+la,sa+","+la,"M",ha+","+(Ga-da),ha+","+Ga,"M",ya+da+","+la,ya+","+la,"M",ha+","+(ba+da),ha+","+ba),N}}}(),_pathStyles:{square:1,cross:1,x:1,diamond:1,target:1},_typeMaps:{picturemarkersymbol:"image",picturefillsymbol:"path",simplefillsymbol:"path",simplelinesymbol:"path",cartographiclinesymbol:"path",textsymbol:"text"},_isInvalidShape:function(N,S){S=S&&S.shape&&S.shape.type;var ha=
N&&N.type;N=N&&N.style;"rect"===S&&(S="path");ha&&(N=this._typeMaps[ha]||N);this._pathStyles[N]&&(N="path");return"shieldlabelsymbol"===ha?!0:!(!S||!N||S===N)},_reArialFont:/\s*(^|,)\s*arial\s*(,|$)\s*/i,_fallbackFont:"Arial",_drawPoint:function(N,S,ha,la,sa,ya,Ga){var ba=ha.type,da=this._map,oa=da.__visibleRect,va=I.toScreenPoint(da.extent,da.width,da.height,S).offset(-oa.x+sa[0],-oa.y);oa=va.x;var pa=va.y;S=[];var Oa=this._getVariable(ya,"rotationInfo",!1);Oa=Oa?ya.getRotationAngle(Ga,{rotationInfo:Oa}):
null;var W=this._getVariable(ya,"sizeInfo",!1);da=null!=Ga.size?Ga.size:W&&ya.getSize(Ga,{sizeInfo:W,shape:ha.style,resolution:da.getResolutionInMeters(),scale:da.getScale()});Oa&&S.push(e.rotategAt(Oa,va));if(0!==ha.xoffset||0!==ha.yoffset){var U=e.translate(ha.xoffset,-ha.yoffset);S.push(U)}0!==ha.angle&&S.push(e.rotategAt(ha.angle,va));if("simplemarkersymbol"===ba){var na=ha.style;ya=Math.round;null!=da?U&&(null!=U.dx&&(U.dx=U.dx/ha.size*da),null!=U.dy&&(U.dy=U.dy/ha.size*da)):da=ha.size;switch(na){case D.STYLE_SQUARE:case D.STYLE_TRIANGLE:case D.STYLE_CROSS:case D.STYLE_X:case D.STYLE_DIAMOND:ha=
isNaN(da)?16:da/2;na=this._drawPath(N,la,this._smsToPath(D,na,oa,pa,ya(oa-ha),ya(oa+ha),ya(pa-ha),ya(pa+ha)));break;case D.STYLE_TARGET:Ga=ha._targetWidth/2;U=ha._targetHeight/2;na=this._drawPath(N,la,this._smsToPath(D,na,oa,pa,ya(oa-Ga),ya(oa+Ga),ya(pa-U),ya(pa+U),ha._spikeSize));break;case D.STYLE_PATH:na=this._drawPath(N,la,ha.path,!0);ha=na.getBoundingBox();N=this._getScaleMatrix(ha,da);1===N.xx&&1===N.yy||S.push(e.scaleAt(N.xx,N.yy,va));S.push(e.translate(-(ha.x+ha.width/2)+oa,-(ha.y+ha.height/
2)+pa));break;default:ha=isNaN(da)?16:da/2,na=this._drawCircle(N,la,{cx:oa,cy:pa,r:ha})}}else if("shieldlabelsymbol"===ba)na=ha.width,va=ha.height,la=N.createGroup(),na=N.createImage({x:oa-na/2,y:pa-va/2,width:na,height:va,src:ha.url}),la.add(na),null!=ha.font&&(pa+=.2*ha.getHeight(),N=N.createText({type:"text",text:ha.text,x:oa,y:pa,align:"middle",decoration:ha.decoration,rotated:ha.rotated,kerning:ha.kerning}),N.setFont(ha.font),N.setFill(ha.color),la.add(N)),na=la;else if("picturemarkersymbol"===
ba){if(null==da?(na=ha.width,va=ha.height):(va=da,na=ha.width/ha.height*va,U&&(null!=U.dx&&(U.dx=U.dx/ha.width*na),null!=U.dy&&(U.dy=U.dy/ha.height*va))),na=this._drawImage(N,la,{x:oa-na/2,y:pa-va/2,width:na,height:va,src:ha.url}),T&&(N=na.getNode()))ha=(ha=this._getVariable(ya,"opacityInfo",!1))?ya.getOpacity(Ga,{opacityInfo:ha}):null,null!=ha?N.setAttribute("opacity",ha):N.setAttribute("opacity",1)}else if("textsymbol"===ba){if(ya=ha.font){na=null!=da;Ga=ya.family&&!this._reArialFont.test(ya.family);
if(na||Ga||Y)ya=new ya.constructor(ya.toJson());na&&ya.setSize(da);Y&&(ya.size+="px");Ga&&ya.setFamily(ya.family+","+this._fallbackFont)}na=this._drawText(N,la,{type:"text",text:ha.text,x:oa,y:pa,align:ha.getSVGAlign(),decoration:ha.decoration||ya&&ya.decoration,rotated:ha.rotated,kerning:ha.kerning});ya&&na.setFont(ya);T&&(N=na.getNode(),oa=ha.getSVGBaseline(),pa=ha.getSVGBaselineShift(),N&&(N.setAttribute("dominant-baseline",oa),pa&&N.setAttribute("baseline-shift",pa),this._applyHalo(na,ha.haloColor,
ha.haloSize)))}na.setTransform(e.multiply(S));na._wrapOffsets=sa;return na},_acquireSVGMarker:function(N,S,ha,la){N=this._getSVGMarkerId(S,la);var sa=this._getSVGMarker(N);sa||(sa=C.createSVGMarker(S,N,ha,la),this._div.getParent().defNode.appendChild(sa),this._lineMarkers[N]=sa);return sa},_getSVGMarkerId:function(N,S){return"marker_"+this._map.id+"_"+N.r+"_"+N.g+"_"+N.b+"_"+S},_getSVGMarker:function(N){return this._lineMarkers[N]},_updateSVGMarkers:function(){if(T&&ea){var N=this._lineMarkers,S;
for(S in N){var ha=N[S];ha.setAttribute("id",S+"_temp");ha.setAttribute("id",S)}}},_applyHalo:function(N,S,ha){var la=S&&ha?this._getHaloId(S,ha):null;N.setFilter(S&&ha?A("webkit")||A("ff")?this._getDilateFilter(S,ha,la):this._getOffsetFilter(S,ha,la):null)},_getDilateFilter:function(N,S,ha){var la=this._getSVGFilter(ha);la||(la=this._createSVGFilter({id:ha},[r.feMorphology({operator:"dilate",radius:S,result:"dilated"}),r.feFlood({"flood-color":N.toCss(!0)}),r.feComposite({in2:"dilated",operator:"in",
result:"composite"}),r.feMerge("composite","SourceGraphic")]));return la},_getOffsetFilter:function(N,S,ha){var la=this._getSVGFilter(ha);if(!la){N=N.toCss(!0);la=this._offsetPrimitives;var sa,ya=la.length,Ga=[],ba=[];for(sa=0;sa<ya;sa++){var da=la[sa],oa="offset"+da.dir,va="composite"+da.dir;ba.push(va);Ga.push(r.feOffset({dx:da.dx*S,dy:da.dy*S,"in":"SourceAlpha",result:oa}),r.feFlood({"flood-color":N}),r.feComposite({in2:oa,operator:"in",result:va}))}ba.push("SourceGraphic");Ga.push(r.feMerge.apply(r.feMerge,
ba));la=this._createSVGFilter({id:ha},Ga)}return la},_offsetPrimitives:[{dir:"L",dx:-1,dy:0},{dir:"TL",dx:-1,dy:-1},{dir:"T",dx:0,dy:-1},{dir:"TR",dx:1,dy:-1},{dir:"R",dx:1,dy:0},{dir:"BR",dx:1,dy:1},{dir:"B",dx:0,dy:1},{dir:"BL",dx:-1,dy:1}],_getHaloId:function(N,S){return"halo_"+this._map.id+"_"+this.id+"_"+N.r+"_"+N.g+"_"+N.b+"_"+N.a+"_"+S},_getSVGFilter:function(N){return this._svgFilters[N]},_createSVGFilter:function(N,S){S=r.createFilter(N,S);var ha=this._map,la=ha.__visibleRect;S.x=-la.x;S.y=
-la.y;S.width=ha.width;S.height=ha.height;return this._svgFilters[N.id]=S},_updateSVGFilters:function(N,S,ha,la){var sa=this._svgFilters,ya,Ga,ba;for(Ga in sa)if(ya=sa[Ga]){if(ba=a.byId(Ga))null!=N&&ba.setAttribute("x",N),null!=S&&ba.setAttribute("y",S),null!=ha&&ba.setAttribute("width",ha),null!=la&&ba.setAttribute("height",la);null!=N&&(ya.x=N);null!=S&&(ya.y=S);null!=ha&&(ya.width=ha);null!=la&&(ya.height=la)}},_getScaleMatrix:function(N,S){var ha=N.width/N.height,la=1,sa=1;isNaN(S)||(1<ha?(la=
S/N.width,sa=S/ha/N.height):(sa=S/N.height,la=S*ha/N.width));return{xx:la,yy:sa}},_symbolizePoint:function(N,S,ha,la){var sa=S.type,ya=S.style;if("shieldlabelsymbol"!==sa&&"picturemarkersymbol"!==sa){var Ga=S.getStroke();S=S.getFill();ya=ya===D.STYLE_X||ya===D.STYLE_CROSS;var ba=Ga&&Ga.color,da=ya?ba:S;if(ha){var oa=this._getVariable(ha,"colorInfo",!1),va=this._getVariable(ha,"opacityInfo",!1);oa&&(da=ha.getColor(la,{colorInfo:oa})||da);da&&va&&(da=this._applyOpacity(da,ha,va,la));da&&(ya?da!==ba&&
(Ga=Ga?q.mixin({},Ga):{},Ga.color=da):da!==S&&(S=da))}"textsymbol"===sa?N.setFill(S):"simplemarkersymbol"===sa&&N.setFill(S).setStroke(Ga)}},_drawMarkers:function(N,S,ha,la){var sa=N.geometry,ya=sa.points,Ga=N.getDojoShape()||this._div.createGroup(),ba,da=ya.length,oa=[],va=0,pa,Oa=ha?ha.length:0;Ga.children[0]&&this._isInvalidShape(S,Ga.children[0])&&Ga.clear();for(ba=0;ba<da;ba++){var W=ya[ba];for(pa=0;pa<Oa;pa++)oa[0]=ha[pa],this._drawPoint(Ga,{x:W[0],y:W[1],spatialReference:sa.spatialReference},
S,Ga.children[va++],oa,la,N)}S=Ga.children.length;if(da*ha.length<S)for(ba=S-1;ba>=da*ha.length;ba--)Ga.children[ba].removeShape();N._shape=Ga},_symbolizeMarkers:function(N,S,ha){var la=N.getDojoShape().children,sa,ya=la.length;for(sa=0;sa<ya;sa++)this._symbolizePoint(la[sa],S,ha,N)},_errorHandler:function(N,S){S&&(N.message="Unable to draw graphic (geometry:"+(S.geometry?S.geometry.declaredClass:null)+", symbol:"+(S.symbol?S.symbol.declaredClass:null)+"): "+N.message);this.inherited(arguments)},
_rendererLimits:function(){if(ca){var N=1E5;var S=-1E5;var ha=1E5}else A("chrome")&&6>A("chrome")&&(N=8150,S=-1E4,ha=1E4);if(N)return{clipLimit:N,rangeMin:S,rangeMax:ha,clipBBox:[-N,-N,N,N],clipSegments:[[[-N,-N],[N,-N]],[[N,-N],[N,N]],[[N,N],[-N,N]],[[-N,N],[-N,-N]]]}}(),_clipPolyline:function(N,S){S=this._getCorners(N,S);var ha=S.br,la=this._rendererLimits,sa=la.rangeMin,ya=la.rangeMax,Ga=la.clipBBox,ba=la.clipSegments;la=this._isPointWithinRange;var da=this._isPointWithinBBox,oa=this._getClipperIntersection,
va=this._getPlaneIndex;if(!la(S.tl,sa,ya)||!la(ha,sa,ya)){ca&&this._createSegments(N);var pa=[];l.forEach(N.segments,function(Oa){Oa=Oa.args;var W=Oa.length,U=[],na;for(na=0;na<W;na+=2){var qa=[Oa[na],Oa[na+1]],Ea=[Oa[na+2],Oa[na+3]],Ta=da(qa,Ga),Ya=da(Ea,Ga);if(Ta^Ya){if(Ya=oa([qa,Ea],ba))Ta?(na?U.push(Ya[1]):U.push(qa,Ya[1]),pa.push(U),U=[]):U.push(Ya[1],Ea)}else Ta?na?U.push(Ea):U.push(qa,Ea):(Ya=va(qa,Ga),Ta=va(Ea,Ga),-1!==Ya&&-1!==Ta&&Ya!==Ta&&(qa=oa([qa,Ea],ba,!0),0<qa.length&&(qa[Ya]||(Ya=
qa[Ya[0]]?Ya[0]:Ya[1]),qa[Ta]||(Ta=qa[Ta[0]]?Ta[0]:Ta[1]),Ea=qa[Ya],qa=qa[Ta],Ea&&U.push(Ea),qa&&(U.push(qa),pa.push(U),U=[]))))}pa.push(U)});N.setShape(this._getPathStringFromPaths(pa))}},_clipPolygon:function(N,S){S=this._getCorners(N,S);var ha=S.br,la=this._rendererLimits,sa=la.clipLimit,ya=la.rangeMin,Ga=la.rangeMax,ba=la.clipBBox,da=la.clipSegments;la=this._isPointWithinRange;var oa=this._isPointWithinBBox,va=this._getClipperIntersection,pa=this._getPlaneIndex,Oa=H._pointLineDistance;la(S.tl,
ya,Ga)&&la(ha,ya,Ga)||(ca&&this._createSegments(N),S=l.filter(N.segments,function(W){return W.args&&W.args.length}),S=l.map(S,function(W){var U=W.args,na=U.length,qa=[];W=[];var Ea;for(Ea=0;Ea<na;Ea+=2){var Ta=[U[Ea],U[Ea+1]],Ya=[U[Ea+2],U[Ea+3]];if(Ea===na-2){qa.push(Ta);break}var bb=oa(Ta,ba),Ma=oa(Ya,ba);qa.push(Ta);if(bb^Ma){if(Ma=va([Ta,Ya],da))Ta=Ma[1],Ta[bb?"inOut":"outIn"]=!0,qa.push(Ta),W.push([bb?"INOUT":"OUTIN",qa.length-1,Ma[0]])}else if(!bb){bb=pa(Ta,ba);var J=pa(Ya,ba);-1!==bb&&-1!==
J&&bb!==J&&(Ma=va([Ta,Ya],da,!0),0<Ma.length?(Ma[bb]||(bb=Ma[bb[0]]?bb[0]:bb[1]),Ma[J]||(J=Ma[J[0]]?J[0]:J[1]),Ta=Ma[bb],Ya=Ma[J],Ta&&(Ta.outIn=!0,qa.push(Ta),W.push(["OUTIN",qa.length-1,bb])),Ya&&(Ya.inOut=!0,qa.push(Ya),W.push(["INOUT",qa.length-1,J]))):q.isArray(bb)&&q.isArray(J)&&(Ma=bb.concat(J),Ma.sort(),"0123"===Ma.join("")&&(Ma=[],3===bb[0]+bb[1]?Ma.push([sa,-sa],[-sa,sa]):Ma.push([-sa,-sa],[sa,sa]),bb=Oa(Ma[0],[Ta,Ya]),Ta=Oa(Ma[1],[Ta,Ya]),qa.push(bb<Ta?Ma[0]:Ma[1]))))}}var Q=ba[0],Z=ba[1],
L=ba[2],R=ba[3];l.forEach(qa,function(ua){ua[0]<Q&&(ua[1]>=Z&&ua[1]<=R?ua[0]=Q:(ua[0]=Q,ua[1]=ua[1]<Z?Z:R))});l.forEach(qa,function(ua){ua[1]<Z&&(ua[0]>=Q&&ua[0]<=L?ua[1]=Z:(ua[1]=Z,ua[0]=ua[0]<Q?Q:L))});l.forEach(qa,function(ua){ua[0]>L&&(ua[1]>=Z&&ua[1]<=R?ua[0]=L:(ua[0]=L,ua[1]=ua[1]<Z?Z:R))});l.forEach(qa,function(ua){ua[1]>R&&(ua[0]>=Q&&ua[0]<=L?ua[1]=R:(ua[1]=R,ua[0]=ua[0]<Q?Q:L))});U=0;na=W.length;if(0<na){do{Ya=W[U];Ea=W[(U+1)%na];if(Ya[2]===Ea[2]&&"INOUT"===Ya[0]&&"OUTIN"===Ea[0])if(Ta=Ya[1],
Ea=Ea[1],Ta<Ea)for(Ta+=1;Ta<Ea;Ta++)qa[Ta][2]=!0;else if(Ta>Ea){for(Ta+=1;Ta<qa.length;Ta++)qa[Ta][2]=!0;for(Ta=0;Ta<Ea;Ta++)qa[Ta][2]=!0}U=(U+1)%na}while(0!==U)}na=qa[0];U=qa[qa.length-1];na[2]&&(U[2]=!0,l.some(W,function(ua){return 1===ua[1]?(qa.splice(qa.length-1,0,q.clone(qa[1])),!0):!1}));qa=l.filter(qa,function(ua){return ua[2]?!1:!0});for(U=0;U<qa.length-1;U++)na=qa[U],(Ea=qa[U+1])&&na[0]===Ea[0]&&na[1]===Ea[1]&&(Ea.outIn?na.outIn=!0:Ea.inOut&&(na.inOut=!0),qa.splice(U+1,1));na=Math.abs;W=
[];for(U=0;U<qa.length-1;U++){Ya=qa[U];Ta=Ya[0];Ya=Ya[1];bb=na(Ta)===sa;Ma=na(Ya)===sa;Ea=qa[U+1];J=Ea[0];Ea=Ea[1];var aa=na(J)===sa,ka=na(Ea)===sa;bb&&ka?W.push([U+1,[Ta,Ea]]):Ma&&aa&&W.push([U+1,[J,Ya]])}for(U=W.length-1;0<=U;U--)Ea=W[U],Ta=qa[Ea[0]-1],na=qa[Ea[0]],Ta.outIn||Ta.inOut||na.outIn||na.inOut||qa.splice(Ea[0],0,Ea[1]);na=qa[0];U=qa[qa.length-1];na[0]===U[0]&&na[1]===U[1]||qa.push(na);return qa}),N.setShape(this._getPathStringFromPaths(S)))},_getCorners:function(N,S){if(ca){N=this._map;
var ha=S.getExtent(),la=ha.spatialReference;S=N.toScreen(new G(ha.xmin,ha.ymax,la));N=N.toScreen(new G(ha.xmax,ha.ymin,la));return{tl:S,br:N}}N=N.getTransformedBoundingBox();return{tl:N[0],br:N[2]}},_createSegments:function(N){N.shape.path=N.vmlPath;N.segmented=!1;N._confirmSegmented();var S=N.segments;1<S.length&&(N.segments=l.filter(S,function(ha,la,sa){la=sa[la+1];return"M"===ha.action&&la&&"L"===la.action?(ha.args=ha.args.concat(la.args),!0):!1}))},_getPathStringFromPaths:function(N){ca?(N=l.map(N,
function(S){return"m "+l.map(S,function(ha,la){return(1===la?"l ":"")+ha.join(",")}).join(" ")}),N.push("e")):N=l.map(N,function(S){return"M "+l.map(S,function(ha){return ha.join(",")}).join(" ")});return N.join(" ")},_isPointWithinBBox:function(N,S){var ha=S[1],la=S[2],sa=S[3],ya=N[0];N=N[1];return ya>S[0]&&ya<la&&N>ha&&N<sa?!0:!1},_isPointWithinRange:function(N,S,ha){var la=N.x;N=N.y;return la<S||N<S||la>ha||N>ha?!1:!0},_getClipperIntersection:function(N,S,ha){var la,sa=H._getLineIntersection2,
ya=Math.round,Ga={length:0};for(la=0;4>la;la++){var ba=sa(N,S[la]);if(ba)if(ba[0]=ya(ba[0]),ba[1]=ya(ba[1]),ha)Ga[la]=ba,Ga.length++;else return[la,ba]}return ha?Ga:null},_getPlaneIndex:function(N,S){var ha=N[0];N=N[1];var la=S[0],sa=S[1],ya=S[2];S=S[3];return ha<=la?N>=sa&&N<=S?3:N<sa?[0,3]:[2,3]:N<=sa?ha>=la&&ha<=ya?0:ha<la?[3,0]:[1,0]:ha>=ya?N>=sa&&N<=S?1:N<sa?[0,1]:[2,1]:N>=S?ha>=la&&ha<=ya?2:ha<la?[3,2]:[1,2]:-1},onGraphicAdd:function(){},onGraphicRemove:function(){},onGraphicNodeAdd:function(){},
onGraphicNodeRemove:function(){},onGraphicDraw:function(){},onGraphicsClear:function(){},onRendererChange:function(){},onOpacityChange:function(){},onInfoTemplateChange:function(){},onSurfaceChange:function(){},onWebGLEnabledChange:function(){},setInfoTemplate:function(N){this.infoTemplate=N;this._evalSurfaceType();this.onInfoTemplateChange()},add:function(N,S){if(N._graphicsLayer===this)return N;N._suspended=this._suspendGraphics;S||this.graphics.push(N);N._graphicsLayer=this;N._sourceLayer||(N._layer&&
"esri.layers.GraphicsLayer"!==N._layer.declaredClass?N._sourceLayer=N._layer:"esri.layers.GraphicsLayer"!==this.declaredClass&&(N._sourceLayer=this));N._layer=this;this.hasWebGLSurface()||(this._updateExtent(N),this._draw(N));if(!S)this.onGraphicAdd(N);return N},remove:function(N,S,ha){if(!S&&!ha){S=this.graphics;var la;if(-1===(la=l.indexOf(S,N)))return null;if(!wa||64<=wa)S.splice(la,1);else{var sa=S.length;if(sa){for(;la<sa;)S[la]=S[la+1],la++;S.length--}}}this.hasWebGLSurface()||N.getDojoShape()&&
this._removeShape(N,null,ha);N._shape=N._graphicsLayer=null;this.onGraphicRemove(N);return N},clear:function(N,S){N=this.graphics;var ha,la=!ca;for(ha=N.length-1;0<=ha;ha--)this.remove(N[ha],null,la);this.graphics=[];this.hasWebGLSurface()||this._destroyAllNodes();if(!S)this.onGraphicsClear()},_destroyAllNodes:function(){if(!ca&&this._div){var N;this._childLayer&&(N=this._childLayer.getNode())&&N.parentNode&&N.parentNode.removeChild(N);this._bgGroup.clear();this._div.clear();this._bgGroup=this._div.createGroup();
N&&this._div.getEventSource().appendChild(N);this._initOpacity()}},clearNodes:function(){if(!this.hasWebGLSurface()){var N=this.graphics,S=N.length,ha;for(ha=0;ha<S;ha++)this._removeShape(N[ha],!0,!0);this._destroyAllNodes()}},_graphicVisibilityChanged:function(N){},_setIEOpacity:function(N,S){var ha=N&&N.getNode();if(ha){var la=N.strokeStyle,sa=ha.stroke;la&&sa&&(sa.opacity=la.color.a*S);N=N.fillStyle;la=ha.fill;N&&la&&("tile"===la.type?d.set(ha,"opacity",S):la.opacity=N.a*S)}},setOpacity:function(N,
S){if(S||this.opacity!=N){var ha=this._div;ha&&!this.hasWebGLSurface()&&(ca?(l.forEach(this.graphics,function(la){this._setIEOpacity(la._shape,N);this._setIEOpacity(la._bgShape,N)},this),ha._esriIeOpacity=N,this._bgGroup._esriIeOpacity=N):"canvas-2d"===this.surfaceType?d.set(ha.getEventSource(),"opacity",N):ha.getEventSource().setAttribute("opacity",N));this.opacity=N;if(!S)this.onOpacityChange(N)}},setRenderer:function(N){this.renderer=N;this._evalSDRenderer(!0);this._evalSurfaceType();this.emit("renderer-change",
{renderer:this._rndForScale||N})}});y=y([t,M],{declaredClass:"esri.layers.GraphicsLayer",constructor:function(){this._processEvent=q.hitch(this,this._processEvent);this._initLayer()},_initLayer:function(){this.loaded=!0;this.onLoad(this)},_setMap:function(){var N=this.inherited("_setMap",arguments);this.enableMouseEvents();return N},_unsetMap:function(){this.disableMouseEvents();this.inherited("_unsetMap",arguments)},_processEvent:function(N){var S=this._map,ha=N.target,la;N.screenPoint=new z(N.pageX-
S.position.x,N.pageY-S.position.y);for(N.mapPoint=S.toMap(N.screenPoint);ha&&!(la=ha.e_graphic);)ha=ha.parentNode;if(la)return N.graphic=la,N},_onMouseOverHandler:function(N){if(this._processEvent(N))this.onMouseOver(N)},_onMouseMoveHandler:function(N){if(this._processEvent(N))this.onMouseMove(N)},_onMouseDragHandler:function(N){if(this._processEvent(N))this.onMouseDrag(N)},_onMouseOutHandler:function(N){if(this._processEvent(N))this.onMouseOut(N)},_onMouseDownHandler:function(N){this._downGr=this._downPt=
null;this._processEvent(N)&&(u.disconnect(this._onmousemove_connect),u.disconnect(this._onmousedrag_connect),this._onmousedrag_connect=u.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseDragHandler"),this._downGr=N.graphic,this._downPt=N.screenPoint.x+","+N.screenPoint.y,this.onMouseDown(N))},_onMouseUpHandler:function(N){this._upGr=this._upPt=null;this._processEvent(N)&&(u.disconnect(this._onmousedrag_connect),u.disconnect(this._onmousemove_connect),this._onmousemove_connect=u.connect(this._div.getEventSource(),
"onmousemove",this,"_onMouseMoveHandler"),this._upGr=N.graphic,this._upPt=N.screenPoint.x+","+N.screenPoint.y,this.onMouseUp(N))},_onClickHandler:function(N){if(this._processEvent(N)){var S=this._downGr,ha=this._upGr;S&&ha&&S===ha&&this._downPt===this._upPt&&(ca&&(x._ieGraphic=N.graphic),this.onClick(N))}},_onDblClickHandler:function(N){if(this._processEvent(N))this.onDblClick(N)},onMouseOver:function(){},onMouseMove:function(){},onMouseDrag:function(){},onMouseOut:function(){},onMouseDown:function(){},
onMouseUp:function(){},onClick:function(){},onDblClick:function(){},enableMouseEvents:function(){if(!this._mouseEvents){var N=u.connect,S=this._div.getEventSource();Y||(this._onmouseover_connect=N(S,"onmouseover",this,"_onMouseOverHandler"),this._onmousemove_connect=N(S,"onmousemove",this,"_onMouseMoveHandler"),this._onmouseout_connect=N(S,"onmouseout",this,"_onMouseOutHandler"),this._onmousedown_connect=N(S,"onmousedown",this,"_onMouseDownHandler"),this._onmouseup_connect=N(S,"onmouseup",this,"_onMouseUpHandler"),
this._onclick_connect=N(S,"onclick",this,"_onClickHandler"),this._ondblclick_connect=N(S,"ondblclick",this,"_onDblClickHandler"));this._mouseEvents=!0}},disableMouseEvents:function(){if(this._mouseEvents){var N=u.disconnect;N(this._onmouseover_connect);N(this._onmousemove_connect);N(this._onmousedrag_connect);N(this._onmouseout_connect);N(this._onmousedown_connect);N(this._onmouseup_connect);N(this._onclick_connect);N(this._ondblclick_connect);this._mouseEvents=!1}}});y._GraphicsContainer=g;y._GraphicsLayer=
t;A("extend-esri")&&(q.setObject("layers.GraphicsLayer",y,x),q.setObject("layers._GraphicsContainer",g,x),q.setObject("layers._GraphicsLayer",t,x));return y})},"dojox/gfx":function(){define(["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],function(B,y,c){y.switchTo(c);return y})},"dojox/gfx/renderer":function(){define(["./_base","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/config"],function(B,y,c,u,q){var l=null;c.add("vml",function(m,h,f){f.innerHTML='\x3cv:shape adj\x3d"1"/\x3e';
m="adj"in f.firstChild;f.innerHTML="";return m});return{load:function(m,h,f){function d(){h(["dojox/gfx/"+a],function(r){B.renderer=a;l=r;f(r)})}if(l&&"force"!=m)f(l);else{var a=q.forceGfxRenderer;m=!a&&(y.isString(q.gfxRenderer)?q.gfxRenderer:"svg,vml,canvas,silverlight").split(",");for(var b,e;!a&&m.length;)switch(m.shift()){case "svg":"SVGAngle"in u.global&&(a="svg");break;case "vml":c("vml")&&(a="vml");break;case "silverlight":try{c("ie")?(b=new ActiveXObject("AgControl.AgControl"),b.IsVersionSupported("1.0"))&&
(e=!0):navigator.plugins["Silverlight Plug-In"]&&(e=!0)}catch(r){e=!1}finally{b=null}e&&(a="silverlight");break;case "canvas":u.global.CanvasRenderingContext2D&&(a="canvas")}"canvas"===a&&!1!==q.canvasEvents&&(a="canvasWithEvents");q.isDebug&&console.log("gfx renderer \x3d "+a);"svg"==a&&"undefined"!=typeof window.svgweb?window.svgweb.addOnLoad(d):d()}}}})},"esri/layers/gfxSniff":function(){define(["dojo/has","dojox/gfx"],function(B,y){B.add("esri-svg",function(){return-1!==y.renderer.toLowerCase().indexOf("svg")});
return B})},"esri/layers/layer":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/connect dojo/_base/lang dojo/_base/Deferred dojo/_base/json dojo/has ../Evented ../kernel ../lang ../request ../deferredUtils ../urlUtils ../SpatialReference ../geometry/Extent".split(" "),function(B,y,c,u,q,l,m,h,f,d,a,b,e,r,t){var g=B([h],{declaredClass:"esri.layers.Layer",_eventMap:{error:["error"],load:["layer"],"opacity-change":["opacity"],"update-end":["error"],"visibility-change":["visible"]},
constructor:function(k,x){this._attrs={};k&&u.isString(k)?this._url=e.urlToObject(this.url=e.normalize(k)):(this.url=this._url=null,(x=x||k)&&(x.layerDefinition||x.query)&&(x=null));this.spatialReference=new r(4326);this.initialExtent=new t(-180,-90,180,90,new r(4326));this._map=this._div=null;this.normalization=!0;x&&(x.id&&(this.id=x.id),this.arcgisProps=x.arcgisProps,this.parentLayer=x.parentLayer,!1===x.visible&&(this.visible=!1),d.isDefined(x.opacity)&&(this.opacity=x.opacity),d.isDefined(x.minScale)&&
this.setMinScale(x.minScale),d.isDefined(x.maxScale)&&this.setMaxScale(x.maxScale),this.attributionDataUrl=x.attributionDataUrl||"",this.hasAttributionData=!!this.attributionDataUrl,d.isDefined(x.showAttribution)&&(this.showAttribution=x.showAttribution),this.className=x.className,this.refreshInterval=x.refreshInterval||0);this._errorHandler=u.hitch(this,this._errorHandler);this._scheduledRefresh=u.hitch(this,this._scheduledRefresh);this.refresh=u.hitch(this,this.refresh);if(this.managedSuspension){var v=
this._setMap;this._setMap=function(A){var n=v.apply(this,arguments);this._fireAttach(A);this.evaluateSuspension();if(this.suspended&&!A.loaded)var w=c.connect(A,"onLoad",this,function(){c.disconnect(w);w=null;this.evaluateSuspension()});return n}}this.registerConnectEvents()},id:null,visible:!0,opacity:1,loaded:!1,loadError:null,minScale:0,maxScale:0,visibleAtMapScale:!1,suspended:!0,attached:!1,attributionDataUrl:"",hasAttributionData:!1,showAttribution:!0,refreshInterval:0,_errorHandler:function(k){this.loaded||
(this.loadError=k);this.onError(k)},_setMap:function(k,x,v,A){this._map=k;this._lyrZEHandle=c.connect(k,"onZoomEnd",this,this._processMapScale);if(k.loaded)this.visibleAtMapScale=this._isMapAtVisibleScale();else var n=c.connect(k,"onLoad",this,function(){c.disconnect(n);n=null;this._processMapScale()})},_unsetMap:function(k,x){c.disconnect(this._lyrZEHandle);this._map=this._lyrZEHandle=null;this._resumedOnce=void 0;this.suspended=!0;this._fireDetach(k)},_fireAttach:function(k){this.attached=!0;this.onAttach({map:k})},
_fireDetach:function(k){this.attached=!1;this.onDetach({map:k})},_cleanUp:function(){this._map=this._div=null},_fireUpdateStart:function(){this.updating||(this.updating=!0,this.attr("data-updating",""),this.onUpdateStart(),this._map&&this._map._incr())},_fireUpdateEnd:function(k,x){this.updating&&(this.updating=!1,this.attr("data-updating"),this._refreshRT(),this.onUpdateEnd(k,x),this._map&&this._map._decr())},_getToken:function(){var k=this._url,x=this.credential;return k&&k.query&&k.query.token||
x&&x.token||void 0},_findCredential:function(){this.credential=f.id&&this._url&&f.id.findCredential(this._url.path)},_useSSL:function(){var k=this._url,x=/^http:/i;this.url&&(this.url=this.url.replace(x,"https:"));k&&k.path&&(k.path=k.path.replace(x,"https:"))},refresh:function(){},show:function(){this.setVisibility(!0)},hide:function(){this.setVisibility(!1)},setMinScale:function(k){this.setScaleRange(k)},setMaxScale:function(k){this.setScaleRange(null,k)},setScaleRange:function(k,x){var v=d.isDefined(k),
A=d.isDefined(x);this.loaded||(this._hasMin=this._hasMin||v,this._hasMax=this._hasMax||A);var n=this.minScale,w=this.maxScale;this.minScale=(v?k:this.minScale)||0;this.maxScale=(A?x:this.maxScale)||0;if(n!==this.minScale||w!==this.maxScale)this.onScaleRangeChange(),this._processMapScale()},suspend:function(){this._suspended=!0;this.evaluateSuspension()},resume:function(){this._suspended=!1;this.evaluateSuspension()},canResume:function(){return this.loaded&&this._map&&this._map.loaded&&this.visible&&
this.visibleAtMapScale&&!this._suspended},evaluateSuspension:function(){this.canResume()?this.suspended&&this._resume():this.suspended||this._suspend()},_suspend:function(){this.suspended=!0;this.attr("data-suspended","");this.onSuspend();if(this._map)this._map.onLayerSuspend(this)},_resume:function(){this.suspended=!1;this.attr("data-suspended");var k=void 0===this._resumedOnce,x=this.className,v=this._attrs,A=this.getNode(),n;if(k){this._resumedOnce=!0;if(x&&A){var w=A.getAttribute("class")||"";
(new RegExp("(^|\\s)"+x+"(\\s|$)","i")).test(w)||A.setAttribute("class",w+((w?" ":"")+x))}if(v&&A)for(n in v)v.hasOwnProperty(n)&&A.setAttribute(n,v[n])}this._refreshRT();this.onResume({firstOccurrence:k});if(this._map)this._map.onLayerResume(this)},_processMapScale:function(){var k=this.visibleAtMapScale;this.visibleAtMapScale=this._isMapAtVisibleScale();k!==this.visibleAtMapScale&&(this.onScaleVisibilityChange(),this.evaluateSuspension())},isVisibleAtScale:function(k){return k?g.prototype._isMapAtVisibleScale.apply(this,
arguments):!1},_isMapAtVisibleScale:function(k,x){if(!(k||this._map&&this._map.loaded))return!1;var v=this._map;k=k||v.getScale();var A=this.minScale,n=this.maxScale,w=!A,p=!n,D;x&&(D=v.width>v.height?v.width:v.height);w||(k<=A?w=!0:x&&(w=Math.abs(A-k)/A<1/D));p||(k>=n?p=!0:x&&(p=Math.abs(n-k)/n<1/D));return w&&p},getAttributionData:function(){var k=this.attributionDataUrl,x=new q(b._dfdCanceller);this.hasAttributionData&&k?(x._pendingDfd=a({url:k,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),
x._pendingDfd.then(function(v){x.callback(v)},function(v){x.errback(v)})):(k=Error("Layer does not have attribution data"),k.log=!!y.isDebug,x.errback(k));return x},getResourceInfo:function(){var k=this.resourceInfo;return u.isString(k)?l.fromJson(k):u.clone(k)},getMap:function(){return this._map},getNode:function(){return this._div},attr:function(k,x){var v=this.getNode();if("data-reference"===k&&11>m("ie"))return this;v&&(null==x?v.removeAttribute(k):v.setAttribute(k,x));this._attrs&&(null==x?delete this._attrs[k]:
this._attrs[k]=x);return this},setRefreshInterval:function(k){var x=this.refreshInterval;this.refreshInterval=k;this._toggleRT(!1);k&&this._toggleRT(!0);if(x!==k)this.onRefreshIntervalChange();return this},_toggleRT:function(k){k&&this.refreshInterval?(clearInterval(this._refreshTimer),this._refreshTimer=setInterval(this._scheduledRefresh,6E4*this.refreshInterval)):this._refreshTimer&&(clearInterval(this._refreshTimer),this._refreshTimer=null)},_refreshRT:function(){this._toggleRT(!1);this._toggleRT(!0)},
_scheduledRefresh:function(){this.onRefreshTick();!this._map||this.suspended||this.updating||this.refresh({scheduled:!0})},_refreshTS:null,_reCheckTS:/[\?&]_ts=/ig,_reReplaceTS:/([\?&]_ts=)[0-9]+/ig,addTimestampToURL:function(k){var x=this._refreshTS;x&&(k=this._reCheckTS.test(k)?k.replace(this._reReplaceTS,"$$$1"+x):k+((-1===k.indexOf("?")?"?":"\x26")+"_ts\x3d"+x));return k},setNormalization:function(k){this.normalization=k},setVisibility:function(k){this.visible!==k&&(this.visible=k,this.onVisibilityChange(this.visible),
this.evaluateSuspension());this.attr("data-hidden",k?null:"")},onLoad:function(){},onAttach:function(k){},onDetach:function(k){},onVisibilityChange:function(){},onScaleRangeChange:function(){},onScaleVisibilityChange:function(){},onSuspend:function(){},onResume:function(){},onUpdate:function(){},onUpdateStart:function(){},onUpdateEnd:function(){},onRefreshIntervalChange:function(){},onRefreshTick:function(){},onError:function(){}});m("extend-esri")&&u.setObject("layers.Layer",g,f);return g})},"esri/request":function(){define("require dojo/_base/array dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/_base/url dojo/_base/xhr dojo/request/xhr ./core/request/script dojo/request/iframe dojo/dom-construct dojo/io-query ./kernel ./config ./sniff ./lang ./urlUtils ./deferredUtils".split(" "),
function(B,y,c,u,q,l,m,h,f,d,a,b,e,r,t,g,k,x){function v(ca){ca=new l(ca);return(ca.host+(ca.port?":"+ca.port:"")).toLowerCase()}function A(ca){return this._xhr?this._xhr.getResponseHeader(ca):null}function n(ca,X){var ea=b.objectToQuery(ca.content);ea&&(ca.url+=(-1===ca.url.indexOf("?")?"?":"\x26")+ea);if(2E3<ca.url.length){if("data:"!==ca.url.toLowerCase().slice(0,5))return ca=new u,ca.reject(q.mixin(Error(),{message:"When using responseType 'image', URL length cannot exceed 2000 characters."})),
ca;if(3E6<ca.url.length)return ca=new u,ca.reject(q.mixin(Error(),{message:"When using responseType 'image', data URL length cannot exceed 3000000 characters."})),ca}var ma=new Image;X.allowImageDataAccess&&(ma.crossOrigin=ca.withCredentials?"use-credentials":"anonymous");var wa=!1,P=new u(function(ja){wa=!0;ma.onload=ma.onerror=ma.onabort=null;ma.src=""});X=function(ja){ma.onload=ma.onerror=ma.onabort=null;wa||P.reject(Error("Unable to load the resource"))};ma.onload=function(){ma.onload=ma.onerror=
ma.onabort=null;wa||P.resolve(this)};ma.onerror=X;ma.onabort=X;ma.alt="";ma.src=ca.url;return P}function w(ca,X,ea,ma){var wa=!1,P=!1,ja=!1;if(g.isDefined(X))if(q.isObject(X)){wa=!!X.useProxy;P=!!X.usePost;ja=!!X.returnProgress;var ta=X.crossOrigin}else wa=!!X;ca=q.mixin({},ca);delete ca._credential;ca._ssl&&(ca.url=ca.url.replace(/^http:/i,"https:"));10>t("ie")&&!Y.test(ca.url)&&(ca.url=encodeURI(ca.url));var N=ca.content,S=ca.url,ha=ea&&ca.form,la=I;ta=g.isDefined(ta)?ta:la.useCors;ca.load=function(Ia){if(Ia){if(Ia.error){var Na=
q.mixin(Error(),Ia.error);Na.log=!!c.isDebug}else"error"===Ia.status&&(Na=q.mixin(Error(),Ia),Na.log=!!c.isDebug);Na&&(ca.failOk=!Na.log,g.isDefined(Na.httpCode)||(Na.httpCode=Na.code))}return Na||Ia};ca.error=function(Ia,Na){Na&&Na.xhr&&Na.xhr.abort();Ia instanceof Error||(Ia=q.mixin(Error(),Ia));Ia.log=!!c.isDebug;ca.failOk=!Ia.log;la.errorHandler(Ia,Na);return Ia};ca._token&&(ca.content=ca.content||{},ca.content.token=ca._token);var sa=0;if(N&&S){var ya=b.objectToQuery(N);sa=ya.length+S.length+
1;t("esri-url-encodes-apostrophe")&&(sa=ya.replace(/'/g,"%27").length+S.length+1)}ca.timeout=g.isDefined(ca.timeout)?ca.timeout:la.timeout;ca.handleAs=ca.handleAs||"json";try{var Ga=ta&&k.canUseXhr(ca.url)&&!/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(ca.url),ba=k.hasSameOrigin(ca.url,window.location.href)||Ga,da=P||ea||sa>la.postLength?!0:!1,oa=ba||-1===ca.handleAs.indexOf("json")||!ca.callbackParamName||ea?!1:!0,va=k.getProxyRule(ca.url)||la.alwaysUseProxy||wa||!("image"===ca.handleAs&&
!X.allowImageDataAccess||oa&&!da||ba)?!0:!1;ea&&!t("esri-file-upload")&&!va&&Ga&&(va=!0);if(va){var pa=k.getProxyUrl(S,ta);var Oa=pa.path;pa._xo&&(Ga=!0);!da&&Oa.length+1+sa>la.postLength&&(da=!0);ca.url=Oa+"?"+S;if(da)ca.content=q.mixin(pa.query||{},N);else{var W=b.objectToQuery(q.mixin(pa.query||{},N));W&&(ca.url+="?"+W);ca.content=null}}if(!oa||da||va){var U=ca.headers;!Ga||U&&U.hasOwnProperty("X-Requested-With")||(U=ca.headers=U||{},U["X-Requested-With"]=null);if(ea){var na=ca.callbackParamName||
"callback.html",qa=ca.callbackElementName||"textarea",Ea,Ta,Ya=ha.elements?ha.elements.length:0;if(N=ca.content)for(Ea in N.token&&-1<S.toLowerCase().indexOf("/sharing/servers/")&&(S+=(-1===S.indexOf("?")?"?":"\x26")+"token\x3d"+N.token,ca.url=va?Oa+"?"+S:S,delete N.token),N){var bb=N[Ea];if(g.isDefined(bb)){var Ma=null;for(Ta=0;Ta<Ya;Ta++){var J=ha.elements[Ta];if(J.name===Ea){Ma=J;break}}Ma?Ma.value=bb:ma?ha.append(Ea,bb):ha.appendChild(a.create("input",{type:"hidden",name:Ea,value:bb}))}}if(t("esri-file-upload")){y.forEach(ha.elements,
function(Ia){Ia.name===na&&ha.removeChild(Ia)});var Q=ma?ha:new FormData(ha);if(11<=t("safari")&&"entries"in Q&&"delete"in Q){ma=[];for(var Z=Q.entries(),L=Z.next();!L.done;){var R=L.value;R[1]instanceof File&&""===R[1].name&&ma.push(R[0]);L=Z.next()}ma.forEach(function(Ia){Q.delete(Ia)})}ca.contentType=!1;ca.postData=Q;delete ca.form}else{ha.enctype="multipart/form-data";9>t("ie")&&(ha.encoding="multipart/form-data");ha.method="post";y.some(ha.elements,function(Ia){return Ia.name===na})||ha.appendChild(a.create("input",
{type:"hidden",name:na,value:qa}));if(-1!==S.toLowerCase().indexOf("addattachment")||-1!==S.toLowerCase().indexOf("updateattachment"))S+=(-1===S.indexOf("?")?"?":"\x26")+na+"\x3d"+qa,ca.url=va?Oa+"?"+S:S;delete ca.content}}if(Ga&&!ca.hasOwnProperty("withCredentials")&&"with-credentials"===I.useCors){S=va?Oa:S;var aa=k.canUseXhr(S,!0),ka=-1<aa?I.corsEnabledServers[aa]:null;if(ka&&ka.hasOwnProperty("withCredentials"))ka.withCredentials&&(ca.withCredentials=!0);else if(e.id){var ua=e.id.findServerInfo(S);
ua&&ua.webTierAuth&&(ca.withCredentials=!0)}}ca=H?H(ca):ca;if("image"===ca.handleAs)return n(ca,X);if(da){if(ea&&!t("esri-file-upload")){var Aa=new u(function(){Ba.cancel()});var Ba=d.post(ca.url,ca).then(function(Ia){Aa.resolve(Ia)}).otherwise(function(Ia){Aa.reject(Ia)});Aa.addCallback(function(Ia){return ca.load(Ia)});Aa.addErrback(function(Ia){return ca.error(Ia)});return Aa}!va&&t("safari")&&(ca.url+=(-1===ca.url.indexOf("?")?"?":"\x26")+"_ts\x3d"+(new Date).getTime()+T++);if(ja){ca.uploadProgress=
!0;ca.data=ca.postData;ca.query=ca.content;Aa=new u(function(){Qa.cancel()});var Qa=h.post(ca.url,ca).then(function(Ia){Aa.resolve(Ia)},function(Ia){Aa.reject(Ia)},function(Ia){Aa.progress({transferType:Ia.transferType,loaded:Ia.loaded,total:Ia.total})});Aa.addCallback(function(Ia){return ca.load(Ia)});Aa.addErrback(function(Ia){return ca.error(Ia)});return Aa}return m.post(ca)}return m.get(ca)}ca=H?H(ca):ca;ca.jsonp=ca.callbackParamName;ca.query=ca.content;Aa=new u(function(){La.cancel()});var La=
f.get(ca.url,ca).then(function(Ia){Aa.resolve(Ia)}).otherwise(function(Ia){Aa.reject(Ia)});Aa.addCallback(function(Ia){return ca.load(Ia)});Aa.addErrback(function(Ia){return ca.error(Ia)});return Aa}catch(Ia){return Aa=new u,Aa.errback(ca.error(Ia)),Aa}}function p(ca){var X=I.corsStatus,ea=k.canUseXhr(ca,!0);-1<ea&&I.corsEnabledServers.splice(ea,1);var ma=new u;ma.reject({log:!!c.isDebug});X[v(ca)]=ma.promise;return ea}function D(ca){var X=I.corsStatus;try{var ea=v(ca);if(I.corsDetection&&I.useCors&&
t("esri-cors")&&ca&&-1!==ca.toLowerCase().indexOf("/rest/services")&&!k.hasSameOrigin(ca,window.location.href)&&!k.canUseXhr(ca)){if(X[ea]&&!X[ea].isCanceled())return X[ea];var ma=new u(x._dfdCanceller);X[ea]=ma.promise;var wa=m.get({url:ca.substring(0,ca.toLowerCase().indexOf("/rest/")+6)+"info",content:{f:"json"},failOk:!0,handleAs:"json",headers:{"X-Requested-With":null},timeout:1E3*I.corsDetectionTimeout});ma._pendingDfd=wa;wa.then(function(P){P?(k.canUseXhr(ca)||I.corsEnabledServers.push(ea),
ma.resolve()):ma.reject()},function(P){ma.reject(P)});return ma.promise}}catch(P){console.log("esri._detectCors: an unknown error occurred while detecting CORS support")}return fa}function C(ca){H=ca}function G(ca,X,ea,ma){function wa(ba){ba._pendingDfd=w(ea,ma,la,ha);if(!ba._pendingDfd){ba.ioArgs=ba._pendingDfd&&ba._pendingDfd.ioArgs;var da=Error("Deferred object is missing");da.log=!!c.isDebug;ba.errback(da);ba._pendingDfd=null;return ba}ba._pendingDfd.addCallback(function(oa){if(!oa)return oa;
var va=ba._pendingDfd&&ba._pendingDfd.ioArgs&&ba._pendingDfd.ioArgs.xhr;if(!va)return oa;if(va=va.getResponseHeader("Content-Type"))if(va=va.toLowerCase(),-1===va.indexOf("text/plain")&&-1===va.indexOf("application/json"))return oa;if(oa instanceof ArrayBuffer&&750>=oa.byteLength)va=new Blob([oa]);else if(oa instanceof Blob&&750>=oa.size)va=oa;else return oa;var pa=new u,Oa=new FileReader;Oa.readAsText(va);Oa.onloadend=function(){if(!Oa.error)try{var W=JSON.parse(Oa.result);if(W.error)var U=W.error}catch(na){}U?
(U=q.mixin(Error(),U),U.log=!!c.isDebug,null==U.httpCode&&(U.httpCode=U.code),pa.reject(U)):pa.resolve(oa)};return pa.promise}).addCallback(function(oa){ba.ioArgs=ba._pendingDfd&&ba._pendingDfd.ioArgs;ma.returnFullResponse&&(oa={data:oa,_xhr:ba.ioArgs&&ba.ioArgs.xhr,getHeader:A});ba.callback(oa);ba._pendingDfd=null}).addErrback(function(oa){if(oa){var va=oa.code;var pa=oa.subcode;var Oa=(Oa=oa.messageCode)&&Oa.toUpperCase()}if(oa&&403==va&&(4==pa||oa.message&&-1<oa.message.toLowerCase().indexOf("ssl")&&
-1===oa.message.toLowerCase().indexOf("permission"))){if(!ea._ssl){ea._ssl=ea._sslFromServer=!0;G(ba,!0,ea,ma);return}}else if(oa&&415==oa.status){if(p(ea.url),!ea._err415){ea._err415=1;G(ba,!0,ea,ma);return}}else if(e.id&&-1!==y.indexOf(e.id._errorCodes,va)&&!e.id._isPublic(ea.url)&&!ja&&(403!=va||-1===y.indexOf(M,Oa)&&(!g.isDefined(pa)||2==pa&&ea._token))){ba._pendingDfd=e.id.getCredential(ea.url,{token:ea._token,error:oa});ba._pendingDfd.addCallback(function(W){ea._token=W.token;ea._credential=
W;ea._ssl=ea._sslFromServer||W.ssl;G(ba,!0,ea,ma)}).addErrback(function(W){ba.errback(W);ba._pendingDfd=null});return}ba.ioArgs=ba._pendingDfd&&ba._pendingDfd.ioArgs;ba.isFulfilled()||ba.errback(oa);ba._pendingDfd=null}).then(null,null,function(oa){ba.progress(oa)})}var P=ea.form,ja=ma.disableIdentityLookup,ta=ma._preLookup,N=!1;if(t("esri-workers")&&!1!==I.useWorkers)if(!0===ma.useWorkers||!0===I.useWorkers)N=!0;else if(ma.workerOptions){var S=ma.workerOptions;if(S.callback||S.worker&&S.worker.worker instanceof
Worker)N=!0}var ha=P&&t("esri-file-upload")&&P instanceof FormData,la=P&&(P.elements?y.some(P.elements,function(ba){return"file"===ba.type}):ha),sa=-1!==ea.url.toLowerCase().indexOf("token\x3d")||ea.content&&ea.content.token||la&&y.some(P.elements,function(ba){return"token"===ba.name})?1:0;if(!X){ca.addCallback(function(ba){if((/\/sharing\/rest\/accounts\/self/i.test(ea.url)||/\/sharing\/rest\/portals\/self/i.test(ea.url))&&!sa&&!ea._token&&ba.user&&ba.user.username){I.webTierAuthServers.push(v(ea.url));
ba=I.corsEnabledServers;var da=k.canUseXhr(ea.url,!0),oa={host:v(ea.url),withCredentials:!0};if(-1===da)ba.push(oa);else{var va=ba[da];va instanceof RegExp?(oa.host=va,ba.splice(da,1,oa)):"object"===typeof va?va.withCredentials=!0:ba.splice(da,1,oa)}}if(ba=ea._credential)if(da=(da=e.id.findServerInfo(ba.server))&&da.owningSystemUrl)da=da.replace(/\/?$/,"/sharing"),(ba=e.id.findCredential(da,ba.userId))&&-1===e.id._getIdenticalSvcIdx(da,ba)&&ba.resources.splice(0,0,da)});ca.addBoth(function(ba){delete ea._credential;
!ba||t("ie")&&ba.nodeType||(ba._ssl=ea._ssl)});var ya=ea.load,Ga=ea.error;ya&&ca.addCallback(function(ba){var da=ca._pendingDfd;da=da&&da.ioArgs;return ya.call(da&&da.args,ba,da)});Ga&&ca.addErrback(function(ba){var da=ca._pendingDfd;da=da&&da.ioArgs;return Ga.call(da&&da.args,ba,da)})}!e.id||sa||ea._token||e.id._isPublic(ea.url)||ja&&!ta||!(X=e.id.findCredential(ea.url))||(ea._token=X.token,ea._ssl=X.ssl);N?ma.workerOptions&&ma.workerOptions.worker?(E||(E=m),m=ma.workerOptions.worker,wa(ca)):B(["./workers/RequestClient"],
function(ba){E||(E=m);if(ma.workerOptions){var da=ma.workerOptions;m=ba.getClient(da.callback,da.cbFunction)}else m=ba.getClient();wa(ca)}):(E&&(m=E,E=null),wa(ca));return ca}function z(ca,X){ca.url=k.fixUrl(ca.url);X=X||{};var ea=new u(x._dfdCanceller),ma=D(ca.url);ea._pendingDfd=ma;ma.always(function(wa){wa&&"cancel"===wa.dojoType?ea.reject(wa):G(ea,!1,ca,X)});return ea}var E=null,H,I=r.defaults.io,M=["COM_0056","COM_0057","SB_0008"],T=0,Y=/%[0-9A-F]{2}/i,fa=function(){var ca=new u;ca.resolve();
return ca.promise}();z._makeRequest=w;z._processRequest=G;z._disableCors=p;z._detectCors=D;z.setRequestPreCallback=C;t("extend-esri")&&(e.request=z,e._makeRequest=w,e._processRequest=G,e._disableCors=p,e._detectCors=D,e.setRequestPreCallback=C);return z})},"esri/core/request/script":function(){define("require exports dojo/Deferred dojo/request/script dojo/text!./iframe.html ../sniff".split(" "),function(B,y,c,u,q,l){function m(){var k=document.createElement("iframe");k.name="esri_core_jsonp_iframe";
k.style.display="none";k.setAttribute("sandbox","allow-scripts");if(!l("ff")&&"srcdoc"in k){var x=B.toUrl("dojo/dojo.js"),v=q.replace("../../../dojo/dojo.js",x);x=x.slice(0,-7);v=v.replace("../../../dojo/",x);k.srcdoc=v}else v=B.toUrl("./iframe.html"),"http:"===window.location.protocol&&0===v.indexOf("https:")&&(v=v.replace("https:","http:")),k.src=v;document.body.appendChild(k);return k}function h(){var k=new MessageChannel;k.port1.addEventListener("message",f);k.port1.start();return k}function f(k){var x=
k.data;if("ready"===x){x=0;for(var v=t;x<v.length;x++)k=v[x],a(k,e);t=null}else if(k=g[x.id])delete g[x.id],x.isError?k.dfd.reject(Error(x.message)):k.dfd.resolve(x.response)}function d(k,x){k.addEventListener("load",function(){k.contentWindow.postMessage("init","*",[x.port2])})}function a(k,x){g[k.message.id]=k;x.port1.postMessage(k.message)}Object.defineProperty(y,"__esModule",{value:!0});var b,e,r=0,t=[],g={};y.get=function(k,x){if(!l("esri-script-sandbox"))return u.get(k,x);var v=null;x&&(v={jsonp:x.jsonp,
preventCache:x.preventCache,query:x.query,timeout:x.timeout});x=new c(function(){if(t){var n=t.indexOf(A);-1<n&&t.splice(n,1)}else A.message.id in g&&delete g[A.message.id]});var A={dfd:x,message:{id:"id"+(++r+Math.random()),url:k,options:v}};b||(b=m(),e=h(),d(b,e));t?t.push(A):a(A,e);return x.promise}})},"esri/core/sniff":function(){define(["../sniff"],function(B){return B})},"dojo/request/iframe":function(){define("module require ./watch ./util ./handlers ../_base/lang ../io-query ../query ../has ../dom ../dom-construct ../_base/window ../NodeList-dom ../NodeList-manipulate".split(" "),
function(B,y,c,u,q,l,m,h,f,d,a,b){function e(n){return!this.isFulfilled()}function r(n){return!!this._finished}function t(n,w){if(!w)try{var p=n.options,D=k.doc(k._frame),C=p.handleAs;if("html"!==C){if("xml"===C)if("html"===D.documentElement.tagName.toLowerCase()){h("a",D.documentElement).orphan();var G=D.documentElement.innerText||D.documentElement.textContent;G=G.replace(/>\s+</g,"\x3e\x3c");n.text=l.trim(G)}else n.data=D;else n.text=D.getElementsByTagName("textarea")[0].value;q(n)}else n.data=
D}catch(z){w=z}w?this.reject(w):this._finished?this.resolve(n):this.reject(Error("Invalid dojo/request/iframe request state"))}function g(n){this._callNext()}function k(n,w,p){var D=u.parseArgs(n,u.deepCreate(A,w),!0);n=D.url;w=D.options;if("GET"!==w.method&&"POST"!==w.method)throw Error(w.method+" not supported by dojo/request/iframe");k._frame||(k._frame=k.create(k._iframeName,v+"();"));n=u.deferred(D,null,e,r,t,g);n._callNext=function(){this._calledNext||(this._calledNext=!0,k._currentDfd=null,
k._fireNextRequest())};n._legacy=p;k._dfdQueue.push(n);k._fireNextRequest();c(n);return p?n:n.promise}var x=B.id.replace(/[\/\.\-]/g,"_"),v=x+"_onload";b.global[v]||(b.global[v]=function(){var n=k._currentDfd;if(n){var w=d.byId(n.response.options.form)||n._tmpForm;if(w){for(var p=n._contentToClean,D=0;D<p.length;D++)for(var C=p[D],G=0;G<w.childNodes.length;G++){var z=w.childNodes[G];if(z.name===C){a.destroy(z);break}}n._originalAction&&w.setAttribute("action",n._originalAction);n._originalMethod&&
(w.setAttribute("method",n._originalMethod),w.method=n._originalMethod);n._originalTarget&&(w.setAttribute("target",n._originalTarget),w.target=n._originalTarget)}n._tmpForm&&(a.destroy(n._tmpForm),delete n._tmpForm);n._finished=!0}else k._fireNextRequest()});var A={method:"POST"};k.create=function(n,w,p){if(b.global[n])return b.global[n];if(b.global.frames[n])return b.global.frames[n];p||(f("config-useXDomain")&&!f("config-dojoBlankHtmlUrl")&&console.warn("dojo/request/iframe: When using cross-domain Dojo builds, please save dojo/resources/blank.html to your domain and set dojoConfig.dojoBlankHtmlUrl to the path on your domain to blank.html"),
p=f("config-dojoBlankHtmlUrl")||y.toUrl("dojo/resources/blank.html"));w=a.place('\x3ciframe id\x3d"'+n+'" name\x3d"'+n+'" src\x3d"'+p+'" onload\x3d"'+w+'" style\x3d"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden"\x3e',b.body());return b.global[n]=w};k.doc=function(n){if(n.contentDocument)return n.contentDocument;var w=n.name;if(w){var p=b.doc.getElementsByTagName("iframe");if(n.document&&p[w].contentWindow&&p[w].contentWindow.document)return p[w].contentWindow.document;
if(b.doc.frames[w]&&b.doc.frames[w].document)return b.doc.frames[w].document}return null};k.setSrc=function(n,w,p){n=b.global.frames[n.name];n.contentWindow&&(n=n.contentWindow);try{p?n.location.replace(w):n.location=w}catch(D){console.log("dojo/request/iframe.setSrc: ",D)}};k._iframeName=x+"_IoIframe";k._notifyStart=function(){};k._dfdQueue=[];k._currentDfd=null;k._fireNextRequest=function(){try{if(!k._currentDfd&&k._dfdQueue.length){do var n=k._currentDfd=k._dfdQueue.shift();while(n&&(n.canceled||
n.isCanceled&&n.isCanceled())&&k._dfdQueue.length);if(!n||n.canceled||n.isCanceled&&n.isCanceled())k._currentDfd=null;else{var w=n.response,p=w.options,D=n._contentToClean=[],C=d.byId(p.form),G=u.notify,z=p.data||null;if(!n._legacy&&"POST"===p.method&&!C)C=n._tmpForm=a.create("form",{name:x+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},b.body());else if("GET"===p.method&&C&&-1<w.url.indexOf("?")){var E=w.url.slice(w.url.indexOf("?")+1);z=l.mixin(m.queryToObject(E),z)}if(C){if(!n._legacy){var H=
C;do H=H.parentNode;while(H&&H!==b.doc.documentElement);H||(C.style.position="absolute",C.style.left="-1000px",C.style.top="-1000px",b.body().appendChild(C));C.name||(C.name=x+"_form")}if(z){H=function(X,ea){a.create("input",{type:"hidden",name:X,value:ea},C);D.push(X)};for(var I in z){var M=z[I];if(l.isArray(M)&&1<M.length)for(E=0;E<M.length;E++)H(I,M[E]);else{var T=h("input[name\x3d'"+I+"']",C);-1==T.indexOf()?H(I,M):T.val(M)}}}var Y=C.getAttributeNode("action"),fa=C.getAttributeNode("method"),
ca=C.getAttributeNode("target");w.url&&(n._originalAction=Y?Y.value:null,Y?Y.value=w.url:C.setAttribute("action",w.url));n._legacy?fa&&fa.value||(fa?fa.value=p.method:C.setAttribute("method",p.method)):(n._originalMethod=fa?fa.value:null,fa?fa.value=p.method:C.setAttribute("method",p.method));n._originalTarget=ca?ca.value:null;ca?ca.value=k._iframeName:C.setAttribute("target",k._iframeName);C.target=k._iframeName;G&&G.emit("send",w,n.promise.cancel);k._notifyStart(w);C.submit()}else p="",w.options.data&&
(p=w.options.data,"string"!==typeof p&&(p=m.objectToQuery(p))),H=w.url+(-1<w.url.indexOf("?")?"\x26":"?")+p,G&&G.emit("send",w,n.promise.cancel),k._notifyStart(w),k.setSrc(k._frame,H,!0)}}}catch(X){n.reject(X)}};u.addCommonMethods(k,["GET","POST"]);return k})},"dojo/NodeList-manipulate":function(){define("./query ./_base/lang ./_base/array ./dom-construct ./dom-attr ./NodeList-dom".split(" "),function(B,y,c,u,q){function l(f){for(;f.childNodes[0]&&1==f.childNodes[0].nodeType;)f=f.childNodes[0];return f}
function m(f,d){"string"==typeof f?(f=u.toDom(f,d&&d.ownerDocument),11==f.nodeType&&(f=f.childNodes[0])):1==f.nodeType&&f.parentNode&&(f=f.cloneNode(!1));return f}var h=B.NodeList;y.extend(h,{_placeMultiple:function(f,d){f="string"==typeof f||f.nodeType?B(f):f;for(var a=[],b=0;b<f.length;b++)for(var e=f[b],r=this.length,t=r-1,g;g=this[t];t--)0<b&&(g=this._cloneNode(g),a.unshift(g)),t==r-1?u.place(g,e,d):e.parentNode.insertBefore(g,e),e=g;a.length&&(a.unshift(0),a.unshift(this.length-1),Array.prototype.splice.apply(this,
a));return this},innerHTML:function(f){return arguments.length?this.addContent(f,"only"):this[0].innerHTML},text:function(f){if(arguments.length){for(var d=0,a;a=this[d];d++)1==a.nodeType&&q.set(a,"textContent",f);return this}var b="";for(d=0;a=this[d];d++)b+=q.get(a,"textContent");return b},val:function(f){if(arguments.length){for(var d=y.isArray(f),a=0,b;b=this[a];a++){var e=b.nodeName.toUpperCase(),r=b.type,t=d?f[a]:f;if("SELECT"==e)for(e=b.options,r=0;r<e.length;r++){var g=e[r];g.selected=b.multiple?
-1!=c.indexOf(f,g.value):g.value==t}else"checkbox"==r||"radio"==r?b.checked=b.value==t:b.value=t}return this}if((b=this[0])&&1==b.nodeType){f=b.value||"";if("SELECT"==b.nodeName.toUpperCase()&&b.multiple){f=[];e=b.options;for(r=0;r<e.length;r++)g=e[r],g.selected&&f.push(g.value);f.length||(f=null)}return f}},append:function(f){return this.addContent(f,"last")},appendTo:function(f){return this._placeMultiple(f,"last")},prepend:function(f){return this.addContent(f,"first")},prependTo:function(f){return this._placeMultiple(f,
"first")},after:function(f){return this.addContent(f,"after")},insertAfter:function(f){return this._placeMultiple(f,"after")},before:function(f){return this.addContent(f,"before")},insertBefore:function(f){return this._placeMultiple(f,"before")},remove:h.prototype.orphan,wrap:function(f){if(this[0]){f=m(f,this[0]);for(var d=0,a;a=this[d];d++){var b=this._cloneNode(f);a.parentNode&&a.parentNode.replaceChild(b,a);l(b).appendChild(a)}}return this},wrapAll:function(f){if(this[0]){f=m(f,this[0]);this[0].parentNode.replaceChild(f,
this[0]);f=l(f);for(var d=0,a;a=this[d];d++)f.appendChild(a)}return this},wrapInner:function(f){if(this[0]){f=m(f,this[0]);for(var d=0;d<this.length;d++){var a=this._cloneNode(f);this._wrap(y._toArray(this[d].childNodes),null,this._NodeListCtor).wrapAll(a)}}return this},replaceWith:function(f){f=this._normalize(f,this[0]);for(var d=0,a;a=this[d];d++)this._place(f,a,"before",0<d),a.parentNode.removeChild(a);return this},replaceAll:function(f){f=B(f);for(var d=this._normalize(this,this[0]),a=0,b;b=
f[a];a++)this._place(d,b,"before",0<a),b.parentNode.removeChild(b);return this},clone:function(){for(var f=[],d=0;d<this.length;d++)f.push(this._cloneNode(this[d]));return this._wrap(f,this,this._NodeListCtor)}});h.prototype.html||(h.prototype.html=h.prototype.innerHTML);return h})},"esri/layers/support/webglUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","../../kernel"],function(B,y,c,u){var q=!1,l=c("esri-webgl-max-contexts");l=null!=l?l:c("esri-mobile")?8:16;var m={isWebGLSupported:function(){return!!q},
isWebGLEnabled:function(){return this.isWebGLSupported()&&!!c("esri-featurelayer-webgl")},createCanvas:function(h,f){var d=document.createElement("canvas");d.style.width=h+"px";d.style.height=f+"px";return d},createWebGLContext:function(h){var f;y.some(["webgl","experimental-webgl","webkit-3d","moz-webgl"],function(d){try{f=h.getContext?h.getContext(d):null}catch(a){f=null}return!!f});return f},_contextOwners:[],isContextAvailable:function(){return-1===l||0<l&&m._contextOwners.length<l},acquireContext:function(h){return-1!==
y.indexOf(m._contextOwners,h)?!0:m.isContextAvailable()?(m._contextOwners.push(h),!0):!1},releaseContext:function(h){h=y.indexOf(m._contextOwners,h);-1!==h&&m._contextOwners.splice(h,1)}};q=m.createWebGLContext(m.createCanvas());c("extend-esri")&&B.setObject("layers.support.webglUtils",m,u);return m})},"esri/layers/support/WebGLSurface":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","../../kernel"],function(B,y,c,u,q){B=B(null,{map:null,node:null,renderers:null,
constructor:function(l){y.mixin(this,l);this.renderers=[]},destroy:function(){c.forEach(this.renderers,function(l){l.destroy()});this.renderers=null},getEventSource:function(){return this.node},createRenderer:function(l,m,h,f){l=new l({surface:this,width:m,height:h,map:this.map,layer:f});this.renderers.push(l);return l},destroyRenderer:function(l){var m=c.indexOf(this.renderers,l);-1<m&&(l.destroy(),this.renderers.splice(m,1))},_createNode:function(){var l=document.createElement("div");l.style.pointerEvents=
"auto";l.style.position="absolute";return l}});u("extend-esri")&&y.setObject("layers.support.WebGLSurface",B,q);return B})},"esri/domUtils":function(){define(["./kernel","dojo/_base/connect","dojo/_base/lang","dojo/dom-style","dojo/has"],function(B,y,c,u,q){var l={show:function(m){if(m=l.getNode(m))m.style.display="block"},getNode:function(m){return m&&m.domNode||m},hide:function(m){if(m=l.getNode(m))m.style.display="none"},toggle:function(m){if(m=l.getNode(m))m.style.display="none"===m.style.display?
"block":"none"},documentBox:8>=q("ie")?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:{w:window.innerWidth,h:window.innerHeight},setScrollable:function(m){if(m=this.getNode(m)){var h=0,f=0,d=0,a=0,b=0,e=0;return[y.connect(m,"ontouchstart",function(r){h=r.touches[0].screenX;f=r.touches[0].screenY;d=m.scrollWidth;a=m.scrollHeight;b=m.clientWidth;e=m.clientHeight}),y.connect(m,"ontouchmove",function(r){r.preventDefault();var t=m.firstChild;t instanceof Text&&(t=m.childNodes[1]);
var g=t._currentX||0,k=t._currentY||0;g+=r.touches[0].screenX-h;0<g?g=0:0>g&&Math.abs(g)+b>d&&(g=-1*(d-b));t._currentX=g;k+=r.touches[0].screenY-f;0<k?k=0:0>k&&Math.abs(k)+e>a&&(k=-1*(a-e));t._currentY=k;u.set(t,{"-webkit-transition-property":"-webkit-transform","-webkit-transform":"translate("+g+"px, "+k+"px)"});h=r.touches[0].screenX;f=r.touches[0].screenY})]}}};q("extend-esri")&&c.mixin(B,l);return l})},"esri/symbols/MarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),
function(B,y,c,u,q,l){B=B(l,{declaredClass:"esri.symbol.MarkerSymbol",angle:0,xoffset:0,yoffset:0,size:12,constructor:function(m){m&&y.isObject(m)&&(this.size="auto"===this.size?this.size:u.pt2px(this.size),this.xoffset=u.pt2px(this.xoffset),this.yoffset=u.pt2px(this.yoffset),this.angle&&(this.angle*=-1))},setAngle:function(m){this.angle=m;return this},setSize:function(m){this.size=m;return this},setOffset:function(m,h){this.xoffset=m;this.yoffset=h;return this},toJson:function(){var m=u.px2pt(this.size);
m=isNaN(m)?void 0:m;var h=u.px2pt(this.xoffset);h=isNaN(h)?void 0:h;var f=u.px2pt(this.yoffset);f=isNaN(f)?void 0:f;return y.mixin(this.inherited("toJson",arguments),{size:"auto"===this.size?this.size:m,angle:this.angle&&-1*this.angle,xoffset:h,yoffset:f})}});c("extend-esri")&&y.setObject("symbol.MarkerSymbol",B,q);return B})},"esri/symbols/Symbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../Color".split(" "),function(B,y,c,u,q,l){B=B(null,{declaredClass:"esri.symbol.Symbol",
color:new l([0,0,0,1]),type:null,constructor:function(m){m&&y.isObject(m)&&(y.mixin(this,m),this.color&&q.isDefined(this.color[0])&&(this.color=l.toDojoColor(this.color)),(m=this.type)&&0===m.indexOf("esri")&&(this.type={esriSMS:"simplemarkersymbol",esriPMS:"picturemarkersymbol",esriSLS:"simplelinesymbol",esriCLS:"cartographiclinesymbol",esriSFS:"simplefillsymbol",esriPFS:"picturefillsymbol",esriTS:"textsymbol",esriSHD:"shieldlabelsymbol"}[m]))},setColor:function(m){this.color=m;return this},toJson:function(){return{color:l.toJsonColor(this.color)}}});
c("extend-esri")&&y.setObject("symbol.Symbol",B,u);return B})},"esri/symbols/SimpleMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./MarkerSymbol ./SimpleLineSymbol".split(" "),function(B,y,c,u,q,l,m,h,f){var d={STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_TRIANGLE:"triangle",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"},a={style:d.STYLE_CIRCLE,color:[255,255,255,
.25],size:12,angle:0,xoffset:0,yoffset:0};B=B(h,{declaredClass:"esri.symbol.SimpleMarkerSymbol",type:"simplemarkersymbol",_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",triangle:"esriSMSTriangle",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond",path:"esriSMSPath"},constructor:function(b,e,r,t){b?y.isString(b)?(this.style=b,e&&(this.size=e),r&&(this.outline=r),t&&(this.color=t)):(this.style=m.valueOf(this._styles,this.style),b.outline&&(this.outline=new f(b.outline))):(y.mixin(this,
a),this.size=q.pt2px(this.size),this.outline=new f(this.outline),this.color=new c(this.color));this.style||(this.style=d.STYLE_CIRCLE)},setStyle:function(b){this.style=b;return this},setPath:function(b){this.path=b;this.setStyle(d.STYLE_PATH);return this},setOutline:function(b){this.outline=b;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return this.color},_setDim:function(b,e,r){this._targetWidth=b;this._targetHeight=e;this._spikeSize=r},getShapeDescriptors:function(){var b,
e=this.style,r=(this.size||q.pt2px(a.size))/2,t=0-r,g=0+r,k=0-r,x=0+r;switch(e){case d.STYLE_CIRCLE:var v={type:"circle",cx:0,cy:0,r:r};var A=this.getFill();if(b=this.getStroke())b.style=b.style||"Solid";break;case d.STYLE_CROSS:v={type:"path",path:"M "+t+",0 L "+g+",0 M 0,"+k+" L 0,"+x+" E"};A=null;b=this.getStroke();break;case d.STYLE_DIAMOND:v={type:"path",path:"M "+t+",0 L 0,"+k+" L "+g+",0 L 0,"+x+" L "+t+",0 Z"};A=this.getFill();b=this.getStroke();break;case d.STYLE_SQUARE:v={type:"path",path:"M "+
t+","+x+" L "+t+","+k+" L "+g+","+k+" L "+g+","+x+" L "+t+","+x+" Z"};A=this.getFill();b=this.getStroke();break;case d.STYLE_TRIANGLE:v={type:"path",path:"M "+t+","+x+" L 0,"+k+" L "+g+","+x+" L "+t+","+x+" Z"};A=this.getFill();b=this.getStroke();break;case d.STYLE_X:v={type:"path",path:"M "+t+","+x+" L "+g+","+k+" M "+t+","+k+" L "+g+","+x+" E"};A=null;b=this.getStroke();break;case d.STYLE_PATH:v={type:"path",path:this.path||""},A=this.getFill(),b=this.getStroke()}return{defaultShape:v,fill:A,stroke:b}},
toJson:function(){var b=this.style,e=this.outline,r=y.mixin(this.inherited("toJson",arguments),{type:"esriSMS",style:this._styles[b]||"esriSMSCircle"});e&&(r.outline=e.toJson());"x"===b||"cross"===b?delete r.color:"target"===b&&(r.style="esriSMSSquare",delete r.color,0<this._targetHeight&&0<this._targetWidth&&(r.size=q.px2pt(Math.max(this._targetHeight,this._targetWidth))));r.path=this.path;return m.fixJson(r)}});y.mixin(B,d);B.defaultProps=a;u("extend-esri")&&(y.setObject("symbol.SimpleMarkerSymbol",
B,l),l.symbol.defaultSimpleMarkerSymbol=a);return B})},"esri/symbols/SimpleLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./LineSymbol".split(" "),function(B,y,c,u,q,l,m,h){var f={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",STYLE_SHORTDASHDOTDOT:"shortdashdotdot",
STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot"},d={color:[0,0,0,1],style:f.STYLE_SOLID,width:1};B=B(h,{declaredClass:"esri.symbol.SimpleLineSymbol",type:"simplelinesymbol",marker:null,_styles:{solid:"esriSLSSolid",dash:"esriSLSDash",dot:"esriSLSDot",dashdot:"esriSLSDashDot",longdashdotdot:"esriSLSDashDotDot",none:"esriSLSNull",insideframe:"esriSLSInsideFrame",shortdash:"esriSLSShortDash",shortdot:"esriSLSShortDot",shortdashdot:"esriSLSShortDashDot",shortdashdotdot:"esriSLSShortDashDotDot",
longdash:"esriSLSLongDash",longdashdot:"esriSLSLongDashDot"},constructor:function(a,b,e){a?y.isString(a)?(this.style=a,b&&(this.color=b),e&&(this.width=e)):(this.style=m.valueOf(this._styles,a.style)||f.STYLE_SOLID,this.marker=a.marker):(y.mixin(this,d),this.color=new c(this.color),this.width=q.pt2px(this.width))},setStyle:function(a){this.style=a;return this},setMarker:function(a){this.marker=a},getStroke:function(){return this.style===f.STYLE_NULL||0===this.width?null:{color:this.color,style:this.style,
width:this.width}},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){return m.fixJson(y.mixin(this.inherited("toJson",arguments),{type:"esriSLS",style:this._styles[this.style],marker:this.marker?y.clone(this.marker):void 0}))}});y.mixin(B,f);B.defaultProps=d;u("extend-esri")&&(y.setObject("symbol.SimpleLineSymbol",B,l),l.symbol.defaultSimpleLineSymbol=d);return B})},"esri/symbols/LineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),
function(B,y,c,u,q,l){B=B(l,{declaredClass:"esri.symbol.LineSymbol",constructor:function(m){y.isObject(m)?this.width=u.pt2px(this.width):this.width=12},setWidth:function(m){this.width=m;return this},toJson:function(){var m=u.px2pt(this.width);m=isNaN(m)?void 0:m;return y.mixin(this.inherited("toJson",arguments),{width:m})}});c("extend-esri")&&y.setObject("symbol.LineSymbol",B,q);return B})},"esri/symbols/utils":function(){define("dojo/_base/lang dojo/_base/window dojo/has dojox/gfx ../kernel ../Color".split(" "),
function(B,y,c,u,q,l){function m(e){e.removeAttribute("marker-start");e.removeAttribute("marker-end");e.removeAttribute("opacity")}function h(e,r){for(var t in r)e.setAttribute(t,r[t])}function f(e,r,t){r="url(#"+r.getAttribute("id")+")";e.rawNode.setAttribute("marker-"+t,r)}var d=-1!==u.renderer.toLowerCase().indexOf("svg"),a=9===c("ie"),b={marker:{markerWidth:"6",markerHeight:"6",markerUnits:"strokeWidth",orient:"auto"},spear:{marker:{end:{viewBox:"0 0 25.4 23.43",refX:"20",refY:"12.76"},start:{viewBox:"-25.4 0 25.4 23.43",
refX:"-20",refY:"12.76"}},path:{common:{d:"M1.63 23.43 L5.37 16.6 L5.37 8.93 L1.63 2.09 L25.4 12.76 L1.63 23.43 Z","stroke-width":"0","fill-opacity":"1"},start:{transform:"matrix(-1, 0, 0, 1, 0, 0)"}}}};u={applyLineMarker:function(e,r,t,g){if(d&&!a){var k=e&&e.rawNode,x=r.marker;t=t||r.color;k&&"none"!==r.style&&t&&x&&"arrow"===x.style&&x.placement?k.getTotalLength&&0===k.getTotalLength()?m(k):(r=-1!==x.placement.indexOf("begin"),x=-1!==x.placement.indexOf("end"),r||x?(k.removeAttribute("stroke-opacity"),
k.setAttribute("opacity",t.a),r?(r=g(e,t,"spear","start"),f(e,r,"start")):k.removeAttribute("marker-start"),x?(t=g(e,t,"spear","end"),f(e,t,"end")):k.removeAttribute("marker-end")):m(k)):k&&m(k)}},createSVGMarker:function(e,r,t,g){t=b[t];var k=y.doc.createElementNS("http://www.w3.org/2000/svg","marker");k.setAttribute("id",r);h(k,b.marker);h(k,t.marker[g]);r=y.doc.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("fill",e.toCss());h(r,t.path.common);h(r,t.path[g]);k.appendChild(r);
return k},create2DColorRamp:function(e){var r=e.surface.createGroup(),t=e.colors,g=e.numClasses;e=(e.size||75)/g;for(var k=0;k<g;k++)for(var x=k*e,v=0;v<g;v++){var A=t[k][v];r.createRect({x:v*e,y:x,width:e,height:e}).setFill(A).setStroke(null)}return r},setSymbolFillColor:function(e,r){if(e)switch(r=r?new l(r):null,e.type){case "simplemarkersymbol":"cross"===e.style||"x"===e.style?e.outline&&e.outline.setColor(r):e.setColor(r);break;case "simplelinesymbol":case "cartographiclinesymbol":case "simplefillsymbol":case "shieldlabelsymbol":case "textsymbol":e.setColor(r)}}};
c("extend-esri")&&B.setObject("renderer.utils",u,q);return u})},"esri/layers/TileInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../SpatialReference ../geometry/Point ./LOD".split(" "),function(B,y,c,u,q,l,m,h,f){B=B(null,{declaredClass:"esri.layers.TileInfo",constructor:function(d){y.mixin(this,d);this.width=this.cols;this.height=this.rows;this._levelToLOD={};d=this.spatialReference;var a=this.origin;d&&(d=this.spatialReference=new m(d.toJson?
d.toJson():d));a&&(this.origin=new h(a.toJson?a.toJson():a),!a.spatialReference&&d&&this.origin.setSpatialReference(new m(d.toJson())));this.lods=c.map(this.lods,function(r){return new f(r)});c.forEach(this.lods,function(r){this._levelToLOD[r.level]=r},this);d=!1;a=this.spatialReference;var b=this.origin;if(a&&b){var e=a._getInfo();e&&(d=a._isWrappable()&&Math.abs(e.origin[0]-b.x)<=e.dx)}this.isWrappable=d;this._initializeUpsampleLevels()},toJson:function(){return l.fixJson({rows:this.rows,cols:this.cols,
dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin&&this.origin.toJson(),spatialReference:this.spatialReference&&this.spatialReference.toJson(),lods:this.lods&&c.map(this.lods,function(d){return d.toJson()})})},lodAt:function(d){return this._levelToLOD&&this._levelToLOD[d]||null},updateTileInfo:function(d){var a=this.lodAt(d.level),b=a.resolution*this.width;a=a.resolution*this.height;d.id=d.level+"/"+d.row+"/"+d.col;d.extent||(d.extent=[0,0,0,0]);d.extent[0]=
this.origin.x+d.col*b;d.extent[1]=this.origin.y-(d.row+1)*a;d.extent[2]=d.extent[0]+b;d.extent[3]=d.extent[1]+a},upsampleTile:function(d){var a=this._upsampleLevels[d.level];if(!a||-1===a.parentLevel)return!1;d.level=a.parentLevel;d.row=Math.floor(d.row/a.factor+.001);d.col=Math.floor(d.col/a.factor+.001);this.updateTileInfo(d);return!0},_initializeUpsampleLevels:function(){var d=this.lods;this._upsampleLevels=[];for(var a=null,b=0;b<d.length;b++){var e=d[b];this._upsampleLevels[e.level]={parentLevel:a?
a.level:-1,factor:a?a.resolution/e.resolution:0};a=e}}});u("extend-esri")&&y.setObject("layers.TileInfo",B,q);return B})},"esri/layers/LOD":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(B,y,c,u,q){B=B(null,{declaredClass:"esri.layers.LOD",constructor:function(l){y.mixin(this,l)},toJson:function(){return q.fixJson({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})}});c("extend-esri")&&y.setObject("layers.LOD",
B,u);return B})},"esri/layers/ArcGISTiledMapServiceLayer":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has dojo/io-query ../kernel ../urlUtils ../SpatialReference ./TiledMapServiceLayer ./ArcGISMapServiceLayer ./TileInfo ./TimeInfo ./TileMap".split(" "),function(B,y,c,u,q,l,m,h,f,d,a,b,e,r,t){y=y([a,b],{declaredClass:"esri.layers.ArcGISTiledMapServiceLayer",_agolAttrs:"Canvas/World_Dark_Gray_Base Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Base Canvas/World_Light_Gray_Reference Elevation/World_Hillshade Ocean/World_Ocean_Base Ocean/World_Ocean_Reference Ocean_Basemap Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Transportation World_Imagery World_Street_Map World_Topo_Map".split(" "),
_isReference:!1,_referenceLayers:"Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Reference Ocean/World_Ocean_Reference Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Reference_Overlay Reference/World_Transportation".split(" "),constructor:function(g,k){k&&(k.roundrobin&&(B.deprecated(this.declaredClass+" : Constructor option 'roundrobin' deprecated. Use option 'tileServers'."),k.tileServers=k.roundrobin),this._setTileServers(k.tileServers),
this._loadCallback=k.loadCallback);this._params=c.mixin({},this._url.query);this._initLayer=c.hitch(this,this._initLayer);(g=k&&k.resourceInfo)?this._initLayer(g):(this._load=c.hitch(this,this._load),this._load())},_TILE_FORMATS:{PNG:"png",PNG8:"png",PNG24:"png",PNG32:"png",JPG:"jpg",JPEG:"jpg",GIF:"gif"},_setTileServers:function(g){if(g&&0<g.length){this.tileServers=g;var k,x=g.length;for(k=0;k<x;k++)g[k]=f.urlToObject(g[k]).path}},_initLayer:function(g,k){this.inherited(arguments);this.resourceInfo=
q.toJson(g);this.tileInfo=new e(g.tileInfo);!1!==this.resampling&&(g.capabilities&&-1<g.capabilities.indexOf("Tilemap")?(this.resampling=!0,this.tileMap=new t(this)):this.resampling=!!g.resampling);!this.spatialReference&&this.tileInfo.spatialReference&&(this.spatialReference=new d(this.tileInfo.spatialReference.toJson()));this.isPNG32="PNG24"===this.tileInfo.format||"PNG32"===this.tileInfo.format;g.timeInfo&&(this.timeInfo=new r(g.timeInfo));g.mensurationCapabilities&&(this.mensurationCapabilities=
g.mensurationCapabilities);var x=this._url.path,v=this._loadCallback,A=f.getProtocolForWebResource(!0),n=x.match(/^https?:\/\/(server|services)\.arcgisonline\.com\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i);n=n&&n[2];if(!this.tileServers)if(g.tileServers)this._setTileServers(g.tileServers);else{var w=-1!==x.search(/^https?:\/\/server\.arcgisonline\.com/i),p=-1!==x.search(/^https?:\/\/services\.arcgisonline\.com/i);(w||p)&&this._setTileServers([x,x.replace(w?/server\.arcgisonline/i:
/services\.arcgisonline/i,w?"services.arcgisonline":"server.arcgisonline")])}if(n){n=n.toLowerCase();for(x=0;x<this._agolAttrs.length;x++)if(w=this._agolAttrs[x],w.toLowerCase()===n){this.hasAttributionData=!0;this.attributionDataUrl=this.attributionDataUrl||A+"//static.arcgis.com/attribution/"+w;break}for(x=0;x<this._referenceLayers.length;x++)if(w=this._referenceLayers[x],w.toLowerCase()===n){this._isReference=!0;break}}this.loaded=!0;this.onLoad(this);v&&(delete this._loadCallback,v(this))},getTileUrl:function(g,
k,x){var v=this.tileServers,A=this._getToken(),n=this._url.query;g=(v?v[k%v.length]:this._url.path)+"/tile/"+g+"/"+k+"/"+x;g=f.upgradeToHTTPS(g);this.resampling&&!this.tileMap&&(g+="?blankTile\x3dfalse");n&&(g=this.resampling&&!this.tileMap?g+("\x26"+m.objectToQuery(n)):g+("?"+m.objectToQuery(n)));!A||n&&n.token||(g+=(-1===g.indexOf("?")?"?":"\x26")+"token\x3d"+A);g=this.addTimestampToURL(g);return f.addProxy(g)}});l("extend-esri")&&c.setObject("layers.ArcGISTiledMapServiceLayer",y,h);return y})},
"esri/layers/TiledMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/url dojo/dom-construct dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/dom dojox/collections/ArrayList dojox/gfx/matrix ../kernel ../config ../sniff ../domUtils ../tileUtils ../geometry/Point ../geometry/Rect ../geometry/Extent ./layer".split(" "),function(B,y,c,u,q,l,m,h,f,d,a,b,e,r,t,g,k,x,v,A,n){B=B(n,{declaredClass:"esri.layers.TiledMapServiceLayer",constructor:function(w,
p){y.connect(this,"onLoad",this,"_initTiledLayer");this._lowestLevel=(this._displayLevels=p?p.displayLevels:null)?this._displayLevels[0]:0;this.resampling=p?p.resampling:void 0;this._resamplingTolerance=p?p.resamplingTolerance:null;this.exclusionAreas=p?p.exclusionAreas:null;w=c.hitch;this._addImage=w(this,this._addImage);this._tileLoadHandler=w(this,this._tileLoadHandler);this._tileErrorHandler=w(this,this._tileErrorHandler);this._popTile=w(this,this._popTile);this._cleanUpRemovedImages=w(this,this._cleanUpRemovedImages);
this._fireOnUpdateEvent=w(this,this._fireOnUpdateEvent);this._transitionEnd=w(this,this._transitionEnd);this._tileMapCallback=w(this,this._tileMapCallback)},opacity:1,isPNG32:!1,_multiple:1,isResampling:!1,_initTiledLayer:function(){var w=this.tileInfo,p=w.lods;this.resampling=null!=this.resampling?this.resampling:!1;this._tileW=w.width;this._tileH=w.height;var D=this.scales=[],C=this._displayLevels,G=-Infinity,z=Infinity,E=this.fullExtent,H=new x(E.xmin,E.ymax);E=new x(E.xmax,E.ymin);var I=k.getContainingTileCoords,
M,T=p.length;for(M=0;M<T;M++){var Y=p[M];var fa=I(w,H,Y);Y.startTileRow=0>fa.row?0:fa.row;Y.startTileCol=0>fa.col?0:fa.col;fa=I(w,E,Y);Y.endTileRow=fa.row;Y.endTileCol=fa.col;C&&-1===u.indexOf(C,Y.level)||(D[M]=Y.scale,G=Y.scale>G?Y.scale:G,z=Y.scale<z?Y.scale:z)}-Infinity===G||this._hasMin||this.setMinScale(G);Infinity===z||this._hasMax||this.setMaxScale(z);this.setExclusionAreas(this.exclusionAreas);this._patchIE=6<=t("ie")&&7>t("ie")&&(this.isPNG32||"Mixed"===w.format)},isVisibleAtScale:function(w){return w?
n.prototype._isMapAtVisibleScale.call(this,w,!0):!1},_isMapAtVisibleScale:function(w){var p=this.inherited(arguments,[w,!0]);if(p){var D=this._map;p=this.scales;var C=D.getScale(),G=!1,z=D.width>D.height?D.width:D.height;for(D=0;D<p.length;D++)if(Math.abs(p[D]-C)/p[D]<1/z){G=!0;break}p=G}return p},_setMap:function(w,p,D,C){this.inherited(arguments);this._map=w;var G=this._div=l.create("div",null,p),z=w.__visibleDelta,E=y.connect,H=e._css.names,I={position:"absolute",width:w.width+"px",height:w.height+
"px",overflow:"visible"},M=r.defaults.map.zoomDuration;"css-transforms"===w.navigationMode?(I[H.transform]=e._css.translate(-z.x,-z.y),f.set(G,I),delete I[H.transform],I[H.transition]=H.transformName+" "+M+"ms ease",f.set(this._active=l.create("div",null,G),I),this._active._remove=0,this._passives=[]):(I.left=-z.x+"px",I.top=-z.y+"px",f.set(G,I));this._onResizeHandler_connect=E(w,"onResize",this,"_onResizeHandler");this._opacityChangeHandler_connect=E(this,"onOpacityChange",this,"_opacityChangeHandler");
z=this.tileInfo;E=z.spatialReference;H=E._getInfo();(this._wrap=w.wrapAround180&&E._isWrappable()&&Math.abs(H.origin[0]-z.origin.x)<=H.dx)&&k._addFrameInfo(z,H);this.setExclusionAreas(this.exclusionAreas);this.evaluateSuspension();if(this.suspended&&!w.loaded)var T=y.connect(w,"onLoad",this,function(){y.disconnect(T);T=null;this.setExclusionAreas(this.exclusionAreas);this.evaluateSuspension()});return G},_unsetMap:function(w,p){this.suspended||this._suspendImpl();l.destroy(this._div);this._map=this._div=
null;var D=y.disconnect;D(this._onResizeHandler_connect);D(this._opacityChangeHandler_connect);this.inherited(arguments)},onSuspend:function(){this.inherited(arguments);this._suspendImpl()},_suspendImpl:function(){g.hide(this._div);clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();var w=this._tiles,p=this._tileIds,D=this._loadingList,C,G,z=y.disconnect,E=l.destroy;D&&0<D.count&&(D.forEach(function(I){if(C=w[I])z(C._onload_connect),z(C._onerror_connect),z(C._onabort_connect),
C._onload_connect=C._onerror_connect=C._onabort_connect=null}),D.clear(),this._fireUpdateEnd());this._removeList.clear();for(D=p.length-1;0<=D;D--)(C=(G=p[D])&&w[G])&&E(C);if("css-transforms"===this._map.navigationMode){p=this._active;G=this._passives;this._noDom=0;for(D=G.length-1;0<=D;D--){var H=G[D];H._endHandle&&z(H._endHandle);H._matrix=H._multiply=H._endHandle=null;H._marked=H._remove=0;G.splice(D,1);E(H)}p._matrix=p._multiply=null;p._marked=p._remove=0}this._tileIds=this._tiles=this._tileBounds=
this._ct=this._loadingList=this._removeList=this._standby=null},onResume:function(){this.inherited(arguments);this._tileIds=[];this._tiles=[];this._tileBounds=[];this._ct=null;this._removeList=new a;this._loadingList=new a;g.show(this._div);this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(c.hitch(this,function(){this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD)}),0)},_enableDrawConnectors:function(){var w=this._map,p=y.connect;if("css-transforms"===
w.navigationMode){if(this._onScaleHandler_connect=p(w,"onScale",this,this._onScaleHandler),t("esri-mobile")){this._standby=[];var D=this,C=function(){D._noDom=1};this._onPanStartHandler_connect=p(w,"onPanStart",C);this._onZoomStartHandler_connect=p(w,"onZoomStart",C)}}else this._onZoomHandler_connect=p(w,"onZoom",this,"_onZoomHandler");this._onPanHandler_connect=p(w,"onPan",this,"_onPanHandler");this._onExtentChangeHandler_connect=p(w,"onExtentChange",this,"_onExtentChangeHandler")},_disableDrawConnectors:function(){var w=
y.disconnect;w(this._onPanHandler_connect);w(this._onZoomHandler_connect);w(this._onScaleHandler_connect);w(this._onExtentChangeHandler_connect);w(this._onPanStartHandler_connect);w(this._onZoomStartHandler_connect);this._onPanHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=this._onExtentChangeHandler_connect=this._onPanStartHandler_connect=this._onZoomStartHandler_connect=null},_onResizeHandler:function(w,p,D){w={width:p+"px",height:D+"px"};p=f.set;p(this._div,w);if("css-transforms"===
this._map.navigationMode)for(this._active&&p(this._active,w),D=this._passives.length-1;0<=D;D--)p(this._passives[D],w)},_onExtentChangeHandler:function(w,p,D,C){p=this._map;var G=this._standby;clearTimeout(this._wakeTimer);this._wakeTimer=null;if(!p._isPanningOrZooming()){if("css-transforms"===p.navigationMode){if(D)for(C=this._passives.length-1;0<=C;C--){var z=this._passives[C];f.set(z,e._css.names.transition,"none");z._marked?(this._passives.splice(C,1),z.parentNode&&z.parentNode.removeChild(z),
l.destroy(z)):0<z.childNodes.length&&(z._multiply=z._multiply?b.multiply(z._matrix,z._multiply):z._matrix)}this._noDom=0;if(G&&G.length)for(C=G.length-1;0<=C;C--)z=G[C],f.set(z,"visibility","inherit"),this._popTile(z),G.splice(C,1)}this._fireUpdateStart();this._rrIndex=0;C=k.getCandidateTileInfo(p,this.tileInfo,w);w=p.__visibleDelta;if(!this._ct||C.lod.level!==this._ct.lod.level||D){z=C&&this._ct&&C.lod.level!==this._ct.lod.level;this._ct=C;var E=this._tiles,H=this._tileIds,I=this._tileBounds,M=this._removeList,
T=H.length;this._cleanUpRemovedImages();for(C=0;C<T;C++){G=H[C];var Y=E[G];I[G]=H[C]=null;"css-transforms"===p.navigationMode&&z&&Y.parentNode&&p.fadeOnZoom&&(Y._fadeOut=z,Y.parentNode._remove++);M.add(Y)}D&&(this._tileIds=[],this._tiles=[],this._tileBounds=[])}C=w.x;D=w.y;"css-transforms"===p.navigationMode?(G={},G[e._css.names.transform]=e._css.translate(C,D),f.set(this._div,G)):f.set(this._div,{left:C+"px",top:D+"px"});this.__coords_dx=C;this.__coords_dy=D;this._updateImages(new v(0,0,w.width,
w.height));0===this._loadingList.count?(this._cleanUpRemovedImages(),this.onUpdate(),this._fireUpdateEnd()):this._fireOnUpdate=!0;D=this._tileW;E=this._tileH;w=new v(-w.x,-w.y,w.width,w.height);for(C=this._tileIds.length-1;0<=C;C--)(G=this._tileIds[C])?(z=this._tiles[G],H=h.getMarginBox(z),H=new v(H.l,H.t,D,E),"css-transforms"===p.navigationMode&&(H.x=z._left,H.y=z._top),w.intersects(H)?this._tileBounds[G]=H:(this._loadingList.contains(G)&&this._popTile(z),l.destroy(z),this._tileIds.splice(C,1),delete this._tileBounds[G],
delete this._tiles[G])):(this._tileIds.splice(C,1),delete this._tileBounds[G],delete this._tiles[G])}},_onPanHandler:function(w,p){w=this._map;p=w.__visibleDelta.offset(p.x,p.y);this.__coords_dx=this.__coords_dy=0;"css-transforms"===w.navigationMode?(w={},w[e._css.names.transform]=e._css.translate(p.x,p.y),f.set(this._div,w),t("esri-mobile")||this._updateImages({x:-p.x,y:-p.y,width:p.width,height:p.height})):(f.set(this._div,{left:p.x+"px",top:p.y+"px"}),this._updateImages({x:-p.x,y:-p.y,width:p.width,
height:p.height}));0<this._loadingList.count&&(this._fireUpdateStart(),this._fireOnUpdate=!0)},_onScaleHandler:function(w,p){var D,C={},G=e._css.names,z=this._map,E=r.defaults.map.zoomDuration;for(D=this._passives.length-1;0<=D;D--){var H=this._passives[D];0===H.childNodes.length?(this._passives.splice(D,1),l.destroy(H)):("none"===H.style[G.transition]&&f.set(H,G.transition,G.transformName+" "+E+"ms ease"),f.set(H,G.transition,p?"none":G.transformName+" "+E+"ms ease"),H._matrix=w,C[G.transform]=e._css.matrix(H._multiply?
b.multiply(w,H._multiply):w),f.set(H,C))}this._active&&0===this._active.childNodes.length||(f.set(this._active,G.transition,p?"none":G.transformName+" "+E+"ms ease"),this._active._matrix=w,C[G.transform]=e._css.matrix(this._active._matrix),f.set(this._active,C),this._passives.push(this._active),C={position:"absolute",width:z.width+"px",height:z.height+"px",overflow:"visible"},C[G.transition]=G.transformName+" "+E+"ms ease",f.set(this._active=l.create("div",null,this._div),C),this._active._remove=
0,z.fadeOnZoom&&l.place(this._active,this._div,"first"))},_onZoomHandler:function(w,p,D){w=h.getMarginBox(this._div);D=D.offset(-w.l,-w.t);this._previousScale&&1!==p||(this._previousScale=1);var C,G=this._tileW*p,z=this._tileH*p,E=this._tileBounds,H=this._tiles,I=this._previousScale,M=this._multiple,T=f.set,Y,fa;if((w=t("ie"))&&8>w)u.forEach(this._tileIds,function(wa){fa="";C=E[wa];Y=H[wa].style.margin.split(" ");u.forEach(Y,function(P){""!==fa&&(fa+=" ");P=parseFloat(P);fa+=P/I*p+"px"});T(H[wa],
{left:C.x-(G-C.width)*(D.x-C.x)/C.width+"px",top:C.y-(z-C.height)*(D.y-C.y)/C.height+"px",margin:1!==M&&-1===fa.indexOf("NaN")?fa:"",zoom:p})});else{var ca=G*M,X=z*M,ea,ma;u.forEach(this._tileIds,function(wa){fa="";C=E[wa];ea=C.x-(G-C.width)*(D.x-C.x)/C.width;ma=C.y-(z-C.height)*(D.y-C.y)/C.height;Y=H[wa].style.margin.split(" ");u.forEach(Y,function(P){""!==fa&&(fa+=" ");P=parseFloat(P);fa+=P/I*p+"px"});T(H[wa],{left:ea+"px",top:ma+"px",margin:1!==M&&-1===fa.indexOf("NaN")?fa:"",width:ca+"px",height:X+
"px"})})}this._previousScale=p},_updateImages:function(w){if(this._ct){var p=this._tileW,D=this._tileH,C=this._ct;var G=C.lod;C=C.tile;var z=C.offsets,E=C.coords,H=E.row;E=E.col;var I=G.level,M=this.opacity,T=this._tileIds,Y=this._loadingList,fa=this._addImage,ca=this._map.id,X=this.id,ea=w.x,ma=w.y,wa=G.startTileRow,P=G.endTileRow,ja=G.startTileCol,ta=G.endTileCol,N=u.indexOf,S=z.x-this.__coords_dx,ha=z.y-this.__coords_dy;var la=p-S+-w.x;var sa=D-ha+-w.y;var ya=Math.ceil;la=0<la?la%p:p-Math.abs(la)%
p;sa=0<sa?sa%D:D-Math.abs(sa)%D;ea=0<ea?Math.floor((ea+S)/p):ya((ea-(p-S))/p);ma=0<ma?Math.floor((ma+ha)/D):ya((ma-(D-ha))/D);ha=ea+ya((w.width-la)/p);w=ma+ya((w.height-sa)/D);if(this._wrap){var Ga=G._frameInfo;var ba=Ga[0];var da=Ga[1];Ga=Ga[2]}for(sa=ea;sa<=ha;sa++)for(ea=ma;ea<=w;ea++)ya=H+ea,la=E+sa,this._wrap&&(la<da?(la%=ba,la=la<da?la+ba:la):la>Ga&&(la%=ba)),!this._isExcluded(I,ya,la)&&ya>=wa&&ya<=P&&la>=ja&&la<=ta&&(G=ca+"_"+X+"_tile_"+I+"_"+ea+"_"+sa,-1===N(T,G)&&(Y.add(G),T.push(G),fa(I,
ea,ya,sa,la,G,p,D,M,C,z)))}},_cleanUpRemovedImages:function(){var w=this._removeList,p=l.destroy,D,C=e._css.names;w.forEach(function(z){z._fadeOut||(z.style.filter="",z.style.zoom=1,p(z))});if("css-transforms"===this._map.navigationMode)for(D=this._passives.length-1;0<=D;D--){var G=this._passives[D];0===G.childNodes.length?(this._passives.splice(D,1),p(G)):this._map.fadeOnZoom&&!G._marked&&G._remove===G.childNodes.length&&(G._marked=1,2048>e._css.getScaleFromMatrix(f.get(G,C.transform))?(f.set(G,
C.transition,"opacity 0.65s"),f.set(G,"opacity",0),y.disconnect(G._endHandle),G._endHandle=y.connect(G,C.endEvent,this._transitionEnd)):this._transitionEnd({propertyName:"opacity",target:G}))}w.clear()},_transitionEnd:function(w){var p=w.target;"opacity"===w.propertyName&&(y.disconnect(p._endHandle),p._endHandle=null,w=u.indexOf(this._passives,p),-1<w&&this._passives.splice(w,1),p.parentNode&&p.parentNode.removeChild(p),l.destroy(p))},_addImage:function(w,p,D,C,G,z,E,H,I,M,T){if(this._patchIE)M=this._tiles[z]=
l.create("div"),M.id=z,m.add(M,"layerTile"),f.set(M,{left:E*C-T.x+"px",top:H*p-T.y+"px",width:E+"px",height:H+"px",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'"+this.getTileUrl(w,D,G)+"', sizingMethod\x3d'scale')"}),1>I&&f.set(M,"opacity",I),w=M.appendChild(l.create("div")),f.set(w,{opacity:0,width:E+"px",height:H+"px"}),this._div.appendChild(M),M=null,this._loadingList.remove(z),this._fireOnUpdateEvent();else{M=this._tiles[z]=l.create("img");var Y=y.connect;M.id=z;M._uid=w+
"_"+D+"_"+G;M.alt="";m.add(M,"layerTile");C=E*C-T.x;T=H*p-T.y;p=this._map;var fa=e._css.names;E={width:E+"px",height:H+"px",visibility:"hidden"};"css-transforms"===p.navigationMode?(E[fa.transform]=e._css.translate(C,T),f.set(M,E),M._left=C,M._top=T):(E.left=C+"px",E.top=T+"px",f.set(M,E));1>I&&f.set(M,"opacity",I);M._onload_connect=Y(M,"onload",this,"_tileLoadHandler");M._onerror_connect=Y(M,"onerror",c.hitch(this,"_tileErrorHandler",D,G));M._onabort_connect=Y(M,"onabort",this,"_tileAbortHandler");
if(this.tileMap)this.tileMap.getTile(w,D,G,z,this._tileMapCallback);else if(z=this.getTileUrl(w,D,G,M))this._failedRequests&&this._failedRequests[z]?(f.set(M,this._failedRequests[z].css),M.src=this._failedRequests[z].src,this._multiple=parseInt(this._failedRequests[z].css.width)/this._tileW,this.isResampling=1!==this._multiple):(this._multiple=1,this.isResampling=!1,M.src=z);"css-transforms"===p.navigationMode?this._active.appendChild(M):this._div.appendChild(M);M=null}},_tileMapCallback:function(w,
p){if(!this.suspended){var D=this._tiles[p.id]||d.byId(p.id);var C=p.level+"_"+p.row+"_"+p.col;D&&D._uid===C?(this._multiple=2*(p.level-w.level)||1,this.isResampling=1!==this._multiple,p=this.tileMap.style(w,p),f.set(D,p),D.src=this.getTileUrl(w.level,w.row,w.col)):this._popTile(p)}},getTileUrl:function(w,p,D){},refresh:function(){this.suspended||(this._refreshTS=Date.now(),this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD))},_popTile:function(w){var p=y.disconnect;p(w._onload_connect);
p(w._onerror_connect);p(w._onabort_connect);w._onload_connect=w._onerror_connect=w._onabort_connect=null;this._loadingList.remove(w.id);this._fireOnUpdateEvent()},_tileLoadHandler:function(w){w=w.currentTarget;this._noDom?this._standby.push(w):(f.set(w,"visibility","inherit"),this._popTile(w))},_tileAbortHandler:function(w){w=w.currentTarget;this.onError(Error("Unable to load tile: "+w.src));f.set(w,"visibility","hidden");this._popTile(w)},_tileErrorHandler:function(w,p,D){D=D.currentTarget;var C=
!0;if(this.tileMap||!this.resampling)C=!1;else{var G=new q(D.src);G=G.path.split("/");G=parseInt(G[G.length-3]);var z=this._ct.lod.level-G+1;this._multiple=Math.pow(2,z);if(G===this._lowestLevel||0===this._resamplingTolerance||this._resamplingTolerance&&Math.log(this._multiple)/Math.LN2>this._resamplingTolerance)C=!1}C?(this.isResampling=!0,this._resample(D,w,p)):(this.onError(Error("Unable to load tile: "+D.src)),f.set(D,"visibility","hidden"),this._popTile(D))},_resample:function(w,p,D){var C=(new q(w.src)).path.split("/"),
G=this._multiple,z=parseInt(C[C.length-3])-1,E=parseInt(p/G),H=parseInt(D/G);C=D%G;var I=p%G;E=this.getTileUrl(z,E,H);p=this.getTileUrl(z+Math.log(G)/Math.LN2,p,D);G={width:this._tileW*G+"px",height:this._tileH*G+"px",margin:"-"+this._tileW*I+"px 0 0 -"+(this._tileH*C+"px")};this._failedRequests||(this._failedRequests={});this._failedRequests[p]={src:E,css:G};f.set(w,G);t("chrome")&&w.setAttribute("src",null);w.src=E},_fireOnUpdateEvent:function(){0===this._loadingList.count&&(this._cleanUpRemovedImages(),
this._fireOnUpdate&&(this._fireOnUpdate=!1,this.onUpdate(),this._fireUpdateEnd()))},setOpacity:function(w){if(this.opacity!=w)this.onOpacityChange(this.opacity=w)},onOpacityChange:function(){},_opacityChangeHandler:function(w){var p=f.set,D,C;if("css-transforms"===this._map.navigationMode){if(this._active){var G=this._active.childNodes;for(D=G.length-1;0<=D;D--)p(G[D],"opacity",w)}for(D=this._passives.length-1;0<=D;D--)for(G=this._passives[D].childNodes,C=G.length-1;0<=C;C--)p(G[C],"opacity",w)}else for(G=
this._div.childNodes,D=G.length-1;0<=D;D--)p(G[D],"opacity",w)},setExclusionAreas:function(w){this.exclusionAreas=w;if(this.loaded&&this._map&&this._map.loaded){var p=this._map.spatialReference,D=this.tileInfo,C=D.origin,G=D.lods,z=G[0].level,E=G[G.length-1].level,H,I,M;if(this.exclusionAreas&&this.exclusionAreas.length){this._exclusionsPerZoom=[];var T=0;for(H=w.length;T<H;T++){var Y=w[T];if((M=Y.geometry)&&"extent"===M.type&&M.xmin<=M.xmax&&M.ymin<=M.ymax){if(!p.equals(M.spatialReference))if(p._canProject(M.spatialReference)){if(p.isWebMercator()){var fa=
x.lngLatToXY(M.xmin,M.ymin);M=x.lngLatToXY(M.xmax,M.ymax)}else fa=x.xyToLngLat(M.xmin,M.ymin,!0),M=x.xyToLngLat(M.xmax,M.ymax,!0);M=new A(fa[0],fa[1],M[0],M[1],p)}else continue;var ca=-1;if(Y.minZoom&&-1!==Y.minZoom)ca=Y.minZoom;else if(Y.minScale&&-1!==Y.minScale){var X=0;for(I=G.length;X<I;X++)if(G[X].scale<=Y.minScale){ca=G[X].level;break}}ca=Math.max(ca,z);fa=-1;if(Y.maxZoom&&-1!==Y.maxZoom)fa=Y.maxZoom;else if(Y.maxScale&&-1!==Y.maxScale)for(X=0,I=G.length;X<I;X++)if(G[X].scale<Y.maxScale){fa=
G[X-1].level;break}else if(G[X].scale===Y.maxScale){fa=G[X].level;break}fa=-1===fa?E:Math.min(fa,E);for(Y=ca;Y<=fa;Y++){X=0;for(I=G.length;X<I;X++)if(G[X].level===Y){var ea=G[X];break}ea&&(this._exclusionsPerZoom[Y]||(this._exclusionsPerZoom[Y]=[]),X=1/ea.resolution/D.rows,I=1/ea.resolution/D.cols,this._exclusionsPerZoom[Y].push({rowFrom:Math.floor((C.y-M.ymax)*X),rowTo:Math.ceil((C.y-M.ymin)*X),colFrom:Math.floor((M.xmin-C.x)*I),colTo:Math.ceil((M.xmax-C.x)*I)}))}}}}else this._exclusionsPerZoom=
null;this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD)}},_isExcluded:function(w,p,D){var C;if(!this._exclusionsPerZoom)return!1;var G=this._exclusionsPerZoom[w];if(!G)return!1;var z=0;for(C=G.length;z<C;z++)if(w=G[z],p>=w.rowFrom&&p<w.rowTo&&D>=w.colFrom&&D<w.colTo)return!0;return!1}});t("extend-esri")&&c.setObject("layers.TiledMapServiceLayer",B,e);return B})},"dojox/collections/ArrayList":function(){define(["dojo/_base/kernel","dojo/_base/array","./_base"],function(B,
y,c){c.ArrayList=function(u){var q=[];u&&(q=q.concat(u));this.count=q.length;this.add=function(l){q.push(l);this.count=q.length};this.addRange=function(l){if(l.getIterator)for(l=l.getIterator();!l.atEnd();)this.add(l.get());else for(var m=0;m<l.length;m++)q.push(l[m]);this.count=q.length};this.clear=function(){q.splice(0,q.length);this.count=0};this.clone=function(){return new c.ArrayList(q)};this.contains=function(l){for(var m=0;m<q.length;m++)if(q[m]==l)return!0;return!1};this.forEach=function(l,
m){B.forEach(q,l,m)};this.getIterator=function(){return new c.Iterator(q)};this.indexOf=function(l){for(var m=0;m<q.length;m++)if(q[m]==l)return m;return-1};this.insert=function(l,m){q.splice(l,0,m);this.count=q.length};this.item=function(l){return q[l]};this.remove=function(l){l=this.indexOf(l);0<=l&&q.splice(l,1);this.count=q.length};this.removeAt=function(l){q.splice(l,1);this.count=q.length};this.reverse=function(){q.reverse()};this.sort=function(l){l?q.sort(l):q.sort()};this.setByIndex=function(l,
m){q[l]=m;this.count=q.length};this.toArray=function(){return[].concat(q)};this.toString=function(l){return q.join(l||",")}};return c.ArrayList})},"dojox/collections/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array"],function(B,y,c){B=y.getObject("dojox.collections",!0);B.DictionaryEntry=function(u,q){this.key=u;this.value=q;this.valueOf=function(){return this.value};this.toString=function(){return String(this.value)}};B.Iterator=function(u){var q=0;this.element=u[q]||
null;this.atEnd=function(){return q>=u.length};this.get=function(){return this.atEnd()?null:this.element=u[q++]};this.map=function(l,m){return c.map(u,l,m)};this.reset=function(){q=0;this.element=u[q]}};B.DictionaryIterator=function(u){var q=[],l={},m;for(m in u)l[m]||q.push(u[m]);var h=0;this.element=q[h]||null;this.atEnd=function(){return h>=q.length};this.get=function(){return this.atEnd()?null:this.element=q[h++]};this.map=function(f,d){return c.map(q,f,d)};this.reset=function(){h=0;this.element=
q[h]}};return B})},"esri/layers/ArcGISMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../request ../SpatialReference ../geometry/Extent ./LayerInfo".split(" "),function(B,y,c,u,q,l,m,h,f,d){B=B(null,{declaredClass:"esri.layers.ArcGISMapServiceLayer",infoTemplates:null,constructor:function(a,b){this.layerInfos=[];b&&(this.infoTemplates=b.infoTemplates||null);a=this._params={};if(b=this._url.query?this._url.query.token:null)a.token=
b},setInfoTemplates:function(a){this.infoTemplates=a},_load:function(){m({url:this._url.path,content:y.mixin({f:"json"},this._params),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler})},spatialReference:null,initialExtent:null,fullExtent:null,description:null,units:null,_initLayer:function(a,b){try{this._findCredential();(this.credential&&this.credential.ssl||a&&a._ssl)&&this._useSSL();this.description=a.description;this.copyright=a.copyrightText;this.spatialReference=a.spatialReference&&
new h(a.spatialReference);this.initialExtent=a.initialExtent&&new f(a.initialExtent);this.fullExtent=a.fullExtent&&new f(a.fullExtent);this.units=a.units;this.maxRecordCount=a.maxRecordCount;this.maxImageHeight=a.maxImageHeight;this.maxImageWidth=a.maxImageWidth;this.supportsDynamicLayers=a.supportsDynamicLayers;var e=this.layerInfos=[],r=a.layers,t=this._defaultVisibleLayers=[];c.forEach(r,function(g,k){e[k]=new d(g);g.defaultVisibility&&t.push(g.id)});this.visibleLayers||(this.visibleLayers=t);
this.version=a.currentVersion;this.cimVersion=a.cimVersion;this.version||(this.version="capabilities"in a||"tables"in a?10:"supportedImageFormatTypes"in a?9.31:9.3);this.capabilities=a.capabilities;l.isDefined(a.minScale)&&!this._hasMin&&this.setMinScale(a.minScale);l.isDefined(a.maxScale)&&!this._hasMax&&this.setMaxScale(a.maxScale)}catch(g){this._errorHandler(g)}}});u("extend-esri")&&y.setObject("layers.ArcGISMapServiceLayer",B,q);return B})},"esri/layers/LayerInfo":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../lang"],function(B,y,c,u,q){B=B(null,{declaredClass:"esri.layers.LayerInfo",constructor:function(l){y.mixin(this,l)},toJson:function(){return q.fixJson({defaultVisibility:this.defaultVisibility,id:this.id,maxScale:this.maxScale,minScale:this.minScale,name:this.name,parentLayerId:this.parentLayerId,subLayerIds:this.subLayerIds})}});c("extend-esri")&&y.setObject("layers.LayerInfo",B,u);return B})},"esri/layers/TimeInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../TimeExtent ./TimeReference ./LayerTimeOptions".split(" "),
function(B,y,c,u,q,l,m){B=B(null,{declaredClass:"esri.layers.TimeInfo",constructor:function(h){null!==h&&(y.mixin(this,h),h.exportOptions&&(this.exportOptions=new m(h.exportOptions)),this.timeExtent=null,h.timeExtent&&2===h.timeExtent.length&&(this.timeExtent=new q(h.timeExtent)),this.timeReference=new l(h.timeReference))}});y.mixin(B,{UNIT_CENTURIES:"esriTimeUnitsCenturies",UNIT_DAYS:"esriTimeUnitsDays",UNIT_DECADES:"esriTimeUnitsDecades",UNIT_HOURS:"esriTimeUnitsHours",UNIT_MILLISECONDS:"esriTimeUnitsMilliseconds",
UNIT_MINUTES:"esriTimeUnitsMinutes",UNIT_MONTHS:"esriTimeUnitsMonths",UNIT_SECONDS:"esriTimeUnitsSeconds",UNIT_UNKNOWN:"esriTimeUnitsUnknown",UNIT_WEEKS:"esriTimeUnitsWeeks",UNIT_YEARS:"esriTimeUnitsYears"});c("extend-esri")&&y.setObject("layers.TimeInfo",B,u);return B})},"esri/TimeExtent":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel"],function(B,y,c,u){var q=B(null,{declaredClass:"esri.TimeExtent",constructor:function(l){if(1<arguments.length)this._create(arguments[0],
arguments[1]);else if(l)if(y.isArray(l)){var m=l[0],h=l[1];this.startTime=null===m||"null"===m?null:new Date(m);this.endTime=null===h||"null"===h?null:new Date(h)}else l instanceof Date&&this._create(l,null)},offset:function(l,m){var h=new q,f=this.startTime,d=this.endTime;f&&(h.startTime=this._getOffsettedDate(f,l,m));d&&(h.endTime=this._getOffsettedDate(d,l,m));return h},intersection:function(l){return this._intersection(this,l)},toJson:function(){var l=[],m=this.startTime;l.push(m?m.getTime():
"null");m=this.endTime;l.push(m?m.getTime():"null");return l},_create:function(l,m){this.startTime=l?new Date(l.getTime()):null;this.endTime=m?new Date(m.getTime()):null},_refData:{esriTimeUnitsMilliseconds:{getter:"getUTCMilliseconds",setter:"setUTCMilliseconds",multiplier:1},esriTimeUnitsSeconds:{getter:"getUTCSeconds",setter:"setUTCSeconds",multiplier:1},esriTimeUnitsMinutes:{getter:"getUTCMinutes",setter:"setUTCMinutes",multiplier:1},esriTimeUnitsHours:{getter:"getUTCHours",setter:"setUTCHours",
multiplier:1},esriTimeUnitsDays:{getter:"getUTCDate",setter:"setUTCDate",multiplier:1},esriTimeUnitsWeeks:{getter:"getUTCDate",setter:"setUTCDate",multiplier:7},esriTimeUnitsMonths:{getter:"getUTCMonth",setter:"setUTCMonth",multiplier:1},esriTimeUnitsYears:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:1},esriTimeUnitsDecades:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:10},esriTimeUnitsCenturies:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:100}},_intersection:function(l,
m){if(l&&m){var h=l.startTime;l=l.endTime;var f=m.startTime;m=m.endTime;h=h?h.getTime():-Infinity;f=f?f.getTime():-Infinity;l=l?l.getTime():Infinity;m=m?m.getTime():Infinity;var d,a;f>=h&&f<=l?d=f:h>=f&&h<=m&&(d=h);l>=f&&l<=m?a=l:m>=h&&m<=l&&(a=m);if(isNaN(d)||isNaN(a))return null;h=new q;h.startTime=-Infinity===d?null:new Date(d);h.endTime=Infinity===a?null:new Date(a);return h}return null},_getOffsettedDate:function(l,m,h){var f=this._refData;l=new Date(l.getTime());m&&h&&(f=f[h],l[f.setter](l[f.getter]()+
m*f.multiplier));return l}});c("extend-esri")&&(u.TimeExtent=q);return q})},"esri/layers/TimeReference":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(B,y,c,u){B=B(null,{declaredClass:"esri.layers.TimeReference",constructor:function(q){q&&y.mixin(this,q)}});c("extend-esri")&&y.setObject("layers.TimeReference",B,u);return B})},"esri/layers/LayerTimeOptions":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(B,
y,c,u,q){B=B(null,{declaredClass:"esri.layers.LayerTimeOptions",constructor:function(l){l&&y.mixin(this,l)},toJson:function(){return q.fixJson({timeDataCumulative:this.timeDataCumulative,timeOffset:this.timeOffset,timeOffsetUnits:this.timeOffsetUnits,useTime:this.useTime})}});c("extend-esri")&&y.setObject("layers.LayerTimeOptions",B,u);return B})},"esri/layers/TileMap":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred dojo/io-query ../request ../urlUtils".split(" "),
function(B,y,c,u,q,l,m){return B(null,{declaredClass:"esri.layers.TileMap",constructor:function(h){this.layer=h;this._tileMaps={}},getTile:function(h,f,d,a,b){h={id:a,level:h,row:f,col:d};f=this._getResamplingBudget();0<f?this._process({tile:h,requestedTile:h,callback:b,resamplingBudget:f}):(b||this.callback).call(this,h,h)},statusOf:function(h,f,d){var a=this._getResamplingBudget();h={level:h,row:f,col:d};if(0===a)return 1;for(;0<=a;){f=this._tileToTileMap(h);if(!this._tileMaps[f.uid])return-1;f=
this._tileMaps[f.uid];if(!f.promise.isFulfilled())return-1;if(this._isTileAvailable(h,f))return 1;h=this._parentTile(h);if(!h)break;a--}return 0},style:function(h,f){if(h.level!==f.level||h.row!==f.row||h.col!==f.col){var d=this.layer.tileInfo,a=d.lods,b=d.cols;d=d.rows;for(var e,r,t=a.length-1;!e||!r;)e||a[t].level!==h.level||(e=a[t]),r||a[t].level!==f.level||(r=a[t]),t--;a=Math.round(e.resolution/r.resolution);h=f.col%a*-1*b;f=f.row%a*-1*d;a={width:b*a+"px",height:d*a+"px",margin:f+"px 0 0 "+h+
"px","will-change":"transform"};h=0===h?0:-1*h;f=0===f?0:-1*f;a.clip="rect("+f+"px,"+(h+b)+"px,"+(f+d)+"px,"+h+"px)";return a}},_process:function(h){var f=h.tile,d=this._tileToTileMap(f),a=this._parentTile(f);this._getTileMap(d).then(y.hitch(this,function(b){d=b;this._isTileAvailable(f,d)?(h.callback||this.callback).call(this,f,h.requestedTile):0<h.resamplingBudget&&a?(h.resamplingBudget--,h.tile=a,this._process(h)):(h.callback||this.callback).call(this,h.requestedTile,h.requestedTile)}),y.hitch(this,
function(){(h.callback||this.callback).call(this,h.requestedTile,h.requestedTile)}))},_getTileMap:function(h){var f,d,a=null;if(this._tileMaps[h.uid]){h=this._tileMaps[h.uid];var b=h.promise}else{this._tileMaps[h.uid]=h;var e=new u;l({url:this._getTileMapUrl(h.level,h.row,h.col),handleAs:"json",content:{f:"json"},callbackParamName:"callback",timeout:3E3,load:function(r){y.mixin(h,r);if(h.data&&0<h.data.length){d=h.data.length;if(1===d)a=h.data[0];else for(a=h.data[0],f=1;f<d;f++)if(h.data[f]!==a){a=
null;break}null!==a&&(delete h.data,h.value=a);null==h.valid&&(h.valid=!0)}e.resolve(h)},error:function(r){r&&422===r.code?(y.mixin(h,{location:{top:h.row,left:h.col,width:8,height:8},valid:!0,value:0}),e.resolve(h)):e.reject()}});b=h.promise=e.promise}return b},_parentTile:function(h){var f=this.layer.tileInfo.lods,d,a,b=null;c.some(f,function(e,r){return h.level===e.level?(d=e,a=r,!0):!1});0<a&&(f=f[a-1],b={id:h.id,level:f.level,row:Math.floor(h.row*d.resolution/f.resolution+.01),col:Math.floor(h.col*
d.resolution/f.resolution+.01)});return b},_tileToTileMap:function(h){var f=8*Math.floor(h.row/8),d=8*Math.floor(h.col/8);return{uid:h.level+"_"+f+"_"+d,level:h.level,row:f,col:d}},_isTileAvailable:function(h,f){if(f.valid)if(void 0!==f.value)h=f.value;else{var d=f.location.left;var a=f.location.top;h=(h.row-a)*f.location.width+(h.col-d);h=h<f.data.length?f.data[h]:0}else h=0;return h},_getTileMapUrl:function(h,f,d){var a=this.layer,b=a.tileServers,e=a._getToken(),r=a._url.query;h=(b?b[f%b.length]:
a._url.path)+"/tilemap/"+h+"/"+f+"/"+d+"/8/8";r&&(h+="?"+q.objectToQuery(r));!e||r&&r.token||(h+=(-1===h.indexOf("?")?"?":"\x26")+"token\x3d"+e);return h=a.addTimestampToURL(h)},_getResamplingBudget:function(){var h=this.layer,f=0;h.resampling&&(f=h._resamplingTolerance,null===f||void 0===f)&&(f=h.tileInfo.lods.length);return f}})})},"esri/layers/MapImageLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/dom-style ../kernel ../config ../sniff ../domUtils ../geometry/Point ../geometry/webMercatorUtils ./layer".split(" "),
function(B,y,c,u,q,l,m,h,f,d,a,b,e){var r=B([e],{declaredClass:"esri.layers.MapImageLayer","-chains-":{constructor:"manual"},constructor:function(t){this.inherited(arguments,[null,t]);this._mapImages=[];var g=c.hitch;this._panStart=g(this,this._panStart);this._pan=g(this,this._pan);this._extentChange=g(this,this._extentChange);this._zoom=g(this,this._zoom);this._zoomStart=g(this,this._zoomStart);this._scale=g(this,this._scale);this._resize=g(this,this._resize);y.connect(this,"onSuspend",this,this._onSuspend);
y.connect(this,"onResume",this,this._onResume);this.loaded=!0;this.onLoad(this)},opacity:1,addImage:function(t){var g=this._mapImages.push(t);--g;t._idx=g;t._layer=this;this._div&&this._createImage(t,g)},removeImage:function(t){if(t){var g=t._idx,k=this._mapImages;if(k[g]===t){delete k[g];if(g=t._node)this._clearEvents(g),g.e_idx=g.e_bl=g.e_tr=g.e_l=g.e_t=g.e_w=g.e_h=null,g.parentNode&&(g.parentNode.removeChild(g),q.destroy(g));t._node=t._idx=t._layer=null}}},removeAllImages:function(){var t=this._mapImages,
g,k=t.length;for(g=0;g<k;g++){var x=t[g];x&&this.removeImage(x)}this._mapImages=[]},getImages:function(){var t=this._mapImages,g=[],k,x=t.length;for(k=0;k<x;k++)t[k]&&g.push(t[k]);return g},setOpacity:function(t){this.opacity!=t&&(this._opacityChanged(this.opacity=t),this.onOpacityChange())},onOpacityChange:function(){},_opacityChanged:function(t){var g=this._div;if(g)if(!f("ie")||8<f("ie"))l.set(g,"opacity",t);else{var k=g.childNodes;var x=k.length;for(g=0;g<x;g++)l.set(k[g],"opacity",t)}},_createImage:function(t,
g){var k=q.create("img");l.set(k,{position:"absolute"});1>t.opacity?l.set(k,"opacity",t.opacity):8>=f("ie")&&l.set(k,"opacity",this.opacity);!t.rotation||9>f("ie")||l.set(k,m._css.names.transform,m._css.rotate(360-t.rotation));t._node=k;k.e_idx=g;k.e_layer=this;k.e_load=y.connect(k,"onload",r.prototype._imageLoaded);k.e_error=y.connect(k,"onerror",r.prototype._imageError);k.e_abort=y.connect(k,"onabort",r.prototype._imageError);k.src=t.href},_imageLoaded:function(t,g){t=g||t.target||t.currentTarget;
g=t.e_layer;var k=g._mapImages[t.e_idx],x=g._map;x&&(x.__zooming||x.__panning||!g._sr)?g._standby.push(t):(g._clearEvents(t),k&&k._node===t&&x&&g._attach(k))},_imageError:function(t){t=t.target||t.currentTarget;var g=t.e_layer,k=g._mapImages[t.e_idx];g._clearEvents(t);k&&(k._node=null)},_clearEvents:function(t){var g=y.disconnect;g(t.e_load);g(t.e_error);g(t.e_abort);t.e_load=t.e_error=t.e_abort=t.e_layer=null},_attach:function(t){var g=t.extent,k=g.spatialReference,x=this._sr,v=this._div,A=t._node,
n=new a({x:g.xmin,y:g.ymin,spatialReference:k});g=new a({x:g.xmax,y:g.ymax,spatialReference:k});x.equals(k)||(x.isWebMercator()&&4326===k.wkid?(n=b.geographicToWebMercator(n),g=b.geographicToWebMercator(g)):k.isWebMercator()&&4326===x.wkid&&(n=b.webMercatorToGeographic(n),g=b.webMercatorToGeographic(g)));A.e_bl=n;A.e_tr=g;t.visible&&(this._setPos(A,v._left,v._top),(this._active||v).appendChild(A))},_setPos:function(t,g,k){var x=t.e_bl,v=t.e_tr,A=this._map;x=A.toScreen(x);v=A.toScreen(v);g=x.x-g;k=
v.y-k;var n=Math.abs(v.x-x.x);x=Math.abs(x.y-v.y);v={width:n+"px",height:x+"px"};var w=this._mapImages[t.e_idx];"css-transforms"===A.navigationMode?v[m._css.names.transform]=m._css.translate(g,k)+(w.rotation?" "+m._css.rotate(360-w.rotation):""):(v.left=g+"px",v.top=k+"px");l.set(t,v);t.e_l=g;t.e_t=k;t.e_w=n;t.e_h=x},managedSuspension:!0,_setMap:function(t,g){this.inherited(arguments);var k=this._div=q.create("div",null,g),x=m._css.names,v={position:"absolute"},A=t.__visibleDelta;if(!f("ie")||8<f("ie"))v.opacity=
this.opacity;"css-transforms"===t.navigationMode?(v[x.transform]=m._css.translate(A.x,A.y),l.set(k,v),k._left=A.x,k._top=A.y,v={position:"absolute",width:t.width+"px",height:t.height+"px",overflow:"visible"},this._active=q.create("div",null,k),l.set(this._active,v),this._passive=q.create("div",null,k),l.set(this._passive,v)):(k._left=0,k._top=0,l.set(k,v));this._standby=[];x=this._mapImages;A=x.length;for(v=0;v<A;v++){var n=x[v];n._node||this._createImage(n,n._idx)}d.hide(k);return k},_unsetMap:function(t,
g){this._disconnect();var k=this._div;if(k){var x=this._mapImages,v,A=x.length;for(v=0;v<A;v++){var n=x[v];if(n){var w=n._node;w&&(this._clearEvents(w),w.e_idx=w.e_bl=w.e_tr=w.e_l=w.e_t=w.e_w=w.e_h=null);n._node=null}}g.removeChild(k);q.destroy(k)}this._map=this._div=this._sr=this._active=this._passive=this._standby=null;this.inherited(arguments)},_onSuspend:function(){this._disconnect();d.hide(this._div)},_onResume:function(t){t.firstOccurrence&&(this._sr=this._map.spatialReference,this._processStandbyList());
t=this._map;var g=this._div,k=t.__visibleDelta;"css-transforms"===t.navigationMode&&(g._left=k.x,g._top=k.y,l.set(g,m._css.names.transform,m._css.translate(g._left,g._top)));this._redraw("css-transforms"===t.navigationMode);this._connect(t);d.show(g)},_connect:function(t){if(!this._connections){var g=y.connect,k="css-transforms"===t.navigationMode;this._connections=[g(t,"onPanStart",this._panStart),g(t,"onPan",this._pan),g(t,"onExtentChange",this._extentChange),k&&g(t,"onZoomStart",this._zoomStart),
k?g(t,"onScale",this._scale):g(t,"onZoom",this._zoom),k&&g(t,"onResize",this._resize)];k&&this._resize(t.extent,t.width,t.height)}},_disconnect:function(){this._connections&&(u.forEach(this._connections,y.disconnect),this._connections=null)},_panStart:function(){this._panL=this._div._left;this._panT=this._div._top},_pan:function(t,g){t=this._div;t._left=this._panL+g.x;t._top=this._panT+g.y;"css-transforms"===this._map.navigationMode?l.set(t,m._css.names.transform,m._css.translate(t._left,t._top)):
l.set(t,{left:t._left+"px",top:t._top+"px"})},_extentChange:function(t,g,k){k?this._redraw("css-transforms"===this._map.navigationMode):g&&this._pan(t,g);this._processStandbyList()},_processStandbyList:function(){var t,g=this._standby;if(g&&g.length)for(t=g.length-1;0<=t;t--)this._imageLoaded(null,g[t]),g.splice(t,1)},_redraw:function(t){if(t){t=this._passive;var g=m._css.names;l.set(t,g.transition,"none");this._moveImages(t,this._active);l.set(t,g.transform,"none")}t=this._active||this._div;g=this._div._left;
var k=this._div._top,x,v=t.childNodes.length;for(x=0;x<v;x++){var A=t.childNodes[x];this._setPos(A,g,k)}},_zoom:function(t,g,k){t=this._div;var x=t._left,v=t._top,A,n=t.childNodes.length;for(A=0;A<n;A++){var w=t.childNodes[A];var p=w.e_w*g,D=w.e_h*g,C=(k.x-x-w.e_l)*(p-w.e_w)/w.e_w,G=(k.y-v-w.e_t)*(D-w.e_h)/w.e_h;C=isNaN(C)?0:C;G=isNaN(G)?0:G;l.set(w,{left:w.e_l-C+"px",top:w.e_t-G+"px",width:p+"px",height:D+"px"})}},_zoomStart:function(){this._moveImages(this._active,this._passive)},_moveImages:function(t,
g){t=t.childNodes;var k=t.length;if(0<k)for(--k;0<=k;k--)g.appendChild(t[k])},_scale:function(t,g){var k=m._css.names,x=this._passive;l.set(x,k.transition,g?"none":k.transformName+" "+h.defaults.map.zoomDuration+"ms ease");({})[k.transform]=m._css.matrix(t);l.set(x,k.transform,m._css.matrix(t))},_resize:function(t,g,k){l.set(this._active,{width:g+"px",height:k+"px"});l.set(this._passive,{width:g+"px",height:k+"px"})}});f("extend-esri")&&c.setObject("layers.MapImageLayer",r,m);return r})},"esri/layers/OpenStreetMapLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../urlUtils ../SpatialReference ../geometry/Extent ./TiledMapServiceLayer ./TileInfo".split(" "),
function(B,y,c,u,q,l,m,h,f){B=B(h,{declaredClass:"esri.layers.OpenStreetMapLayer",constructor:function(d){this.spatialReference=new l({wkid:102100});this.tileInfo=new f({rows:256,cols:256,dpi:96,format:"PNG8",compressionQuality:0,origin:{x:-2.0037508342787E7,y:2.0037508342787E7},spatialReference:{wkid:102100},lods:[{level:0,scale:5.91657527591555E8,resolution:156543.033928},{level:1,scale:2.95828763795777E8,resolution:78271.5169639999},{level:2,scale:1.47914381897889E8,resolution:39135.7584820001},
{level:3,scale:7.3957190948944E7,resolution:19567.8792409999},{level:4,scale:3.6978595474472E7,resolution:9783.93962049996},{level:5,scale:1.8489297737236E7,resolution:4891.96981024998},{level:6,scale:9244648.868618,resolution:2445.98490512499},{level:7,scale:4622324.434309,resolution:1222.99245256249},{level:8,scale:2311162.217155,resolution:611.49622628138},{level:9,scale:1155581.108577,resolution:305.748113140558},{level:10,scale:577790.554289,resolution:152.874056570411},{level:11,scale:288895.277144,
resolution:76.4370282850732},{level:12,scale:144447.638572,resolution:38.2185141425366},{level:13,scale:72223.819286,resolution:19.1092570712683},{level:14,scale:36111.909643,resolution:9.55462853563415},{level:15,scale:18055.954822,resolution:4.77731426794937},{level:16,scale:9027.977411,resolution:2.38865713397468},{level:17,scale:4513.988705,resolution:1.19432856685505},{level:18,scale:2256.994353,resolution:.597164283559817},{level:19,scale:1128.497176,resolution:.298582141647617}]});this.fullExtent=
new m({xmin:-2.003750834E7,ymin:-2.003750834E7,xmax:2.003750834E7,ymax:2.003750834E7,spatialReference:{wkid:102100}});this.initialExtent=new m({xmin:-2.003750834E7,ymin:-2.003750834E7,xmax:2.003750834E7,ymax:2.003750834E7,spatialReference:{wkid:102100}});this.tileServers=d&&d.tileServers||["//a.tile.openstreetmap.org","//b.tile.openstreetmap.org","//c.tile.openstreetmap.org"];this.serversLength=this.tileServers.length;this._displayLevels=d?d.displayLevels:null;this.copyright=d&&d.copyright||"Map data \u00a9 OpenStreetMap contributors, CC-BY-SA";
this.loaded=!0;this.onLoad(this);(d=d&&d.loadCallback)&&d(this)},getTileUrl:function(d,a,b){d=this.tileServers[a%this.serversLength]+"/"+d+"/"+b+"/"+a+".png";d=q.normalize(d);d=this.addTimestampToURL(d);return q.addProxy(d)}});c("extend-esri")&&y.setObject("layers.OpenStreetMapLayer",B,u);return B})},"esri/dijit/Popup":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/kernel dojo/has dojo/window dojo/Stateful dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/registry ../kernel ../lang ../domUtils ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/normalizeUtils ../InfoWindowBase ../PopupBase dojo/i18n!../nls/jsapi dojo/NodeList-dom dojo/has!extend-esri?./PopupTemplate dojo/has!extend-esri?./PopupRenderer".split(" "),
function(B,y,c,u,q,l,m,h,f,d,a,b,e,r,t,g,k,x,v,A,n,w,p,D,C,G){B=B([D,C,h],{declaredClass:"esri.dijit.Popup",offsetX:3,offsetY:3,zoomFactor:4,marginLeft:25,marginTop:25,highlight:!0,pagingControls:!0,pagingInfo:!0,keepHighlightOnHide:!1,popupWindow:!0,titleInBody:!0,anchor:"auto",visibleWhenEmpty:!0,hideDelay:1E3,location:null,constructor:function(z,E){this.initialize();y.mixin(this,z);this.domNode=d.byId(E);E=this._nls=y.mixin({},G.widgets.popup);z=this.domNode;b.add(z,"esriPopup");(this._isRTL=!r.isBodyLtr())&&
t.set(z,"direction","rtl");a.set(z,"innerHTML","\x3cdiv class\x3d'esriPopupWrapper' style\x3d'position: absolute;'\x3e\x3cdiv class\x3d'sizer'\x3e\x3cdiv class\x3d'titlePane'\x3e\x3cdiv class\x3d'spinner hidden' title\x3d'"+E.NLS_searching+"...'\x3e\x3c/div\x3e\x3cdiv class\x3d'title'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton prev hidden' title\x3d'"+E.NLS_prevFeature+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton next hidden' title\x3d'"+E.NLS_nextFeature+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton maximize' title\x3d'"+
E.NLS_maximize+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton close' title\x3d'"+E.NLS_close+"'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'sizer content'\x3e\x3cdiv class\x3d'contentPane'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'sizer'\x3e\x3cdiv class\x3d'actionsPane'\x3e\x3cdiv class\x3d'actionList hidden'\x3e\x3ca title\x3d'"+E.NLS_zoomTo+"' class\x3d'action zoomTo' href\x3d'javascript:void(0);'\x3e\x3cspan\x3e"+E.NLS_zoomTo+"\x3c/span\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'pointer hidden'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'outerPointer hidden'\x3e\x3c/div\x3e");
this._sizers=q.query(".sizer",z);E=q.query(".titlePane",z)[0];this._title=q.query(".title",E)[0];this._prevFeatureButton=q.query(".prev",E)[0];this._nextFeatureButton=q.query(".next",E)[0];this._maxButton=q.query(".maximize",E)[0];this._spinner=q.query(".spinner",E)[0];this._contentPane=q.query(".contentPane",z)[0];this._positioner=q.query(".esriPopupWrapper",z)[0];this._pointer=q.query(".pointer",z)[0];this._outerPointer=q.query(".outerPointer",z)[0];this._actionList=q.query(".actionsPane .actionList",
z)[0];this._contentUpdateHandles={};this._eventConnections=[u.connect(q.query(".close",E)[0],"onclick",this,this.hide),u.connect(this._prevFeatureButton,"onclick",this,this.selectPrevious),u.connect(this._nextFeatureButton,"onclick",this,this.selectNext),u.connect(this._maxButton,"onclick",this,this._toggleSize),u.connect(q.query(".zoomTo",this._actionList)[0],"onclick",this,this._zoomToFeature),u.connect(this,"onClearFeatures",this,this._featuresCleared),u.connect(this,"onSelectionChange",this,this._featureSelected),
u.connect(this,"onDfdComplete",this,this._updateUI)];l("esri-touch")&&(z=v.setScrollable(this._contentPane),this._eventConnections.push(z[0],z[1]));this._toggleVisibility(!1)},onMaximize:function(){},onRestore:function(){},setMap:function(z){this.inherited(arguments);e.place(this.domNode,z.root);this.highlight&&this.enableHighlight(z);this._maxHeight=t.get(this._contentPane,"maxHeight")},unsetMap:function(){this.disableHighlight(this.map);this.inherited(arguments)},setTitle:function(z){this.popupWindow&&
(x.isDefined(z)&&""!==z||(z="\x26nbsp;"),this.destroyDijits(this._title),this.place(z,this._title),this.isShowing&&(this.startupDijits(this._title),this.reposition()))},setContent:function(z){this.popupWindow&&(x.isDefined(z)&&""!==z||(z="\x26nbsp;"),this._destroyContent(),this.place(z,this._contentPane),this.isShowing&&(this._startupContent(),this.reposition()))},show:function(z,E){if(this.popupWindow)if(this._delayHide=!1,z){var H=this.map;z.spatialReference?(this.location=z,z=H.toScreen(z)):this.location=
H.toMap(z);var I=H._getFrameWidth();if(-1!==I&&(z.x%=I,0>z.x&&(z.x+=I),H.width>I))for(H=(H.width-I)/2;z.x<H;)z.x+=I;this._maximized?this.restore():this._setPosition(z);E&&E.closestFirst&&this.showClosestFirst(this.location);this.isShowing||(this._toggleVisibility(!0),this._followMap(),this.startupDijits(this._title),this._startupContent(),this.reposition(),this.showHighlight(),this.onShow())}else this._toggleVisibility(!0)},hide:function(){this.isShowing&&(this._toggleVisibility(!1),this._unfollowMap(),
this.keepHighlightOnHide||this.hideHighlight(),this.onHide())},resize:function(z,E){this.popupWindow&&(this._sizers.style({width:z+"px"}),t.set(this._contentPane,"maxHeight",E+"px"),this._maxHeight=E,this.isShowing&&this.reposition())},reposition:function(){this.popupWindow&&this.map&&this.location&&!this._maximized&&this.isShowing&&this._setPosition(this.map.toScreen(this.location))},addActions:function(z){return c.map(z,function(E){var H=e.create("a",{href:"javascript:void(0);",className:"action "+
E.className,title:E.title,innerHTML:E.title},this._actionList);u.connect(H,"onclick",E.callback);return{action:E,node:H}},this)},removeActions:function(z){c.forEach(z,function(E){e.destroy(E.node)})},getCurrentAnchor:function(){return this._anchor},maximize:function(){var z=this.map;if(z&&!this._maximized&&this.popupWindow){this._maximized=!0;var E=this._maxButton;b.remove(E,"maximize");b.add(E,"restore");a.set(E,"title",this._nls.NLS_restore);E=this.marginLeft;var H=this.marginTop,I=z.width-2*E;
z=z.height-2*H;t.set(this.domNode,{left:this._isRTL?null:E+"px",right:this._isRTL?E+"px":null,top:H+"px",bottom:null});t.set(this._positioner,{left:null,right:null,top:null,bottom:null});this._savedWidth=t.get(this._sizers[0],"width");this._savedHeight=t.get(this._contentPane,"maxHeight");this._sizers.style({width:I+"px"});t.set(this._contentPane,{maxHeight:z-65+"px",height:z-65+"px"});this._showPointer("");this._unfollowMap();b.add(this.domNode,"esriPopupMaximized");this.onMaximize()}},restore:function(){if(this.map&&
this._maximized&&this.popupWindow){this._maximized=!1;var z=this._maxButton;b.remove(z,"restore");b.add(z,"maximize");a.set(z,"title",this._nls.NLS_maximize);t.set(this._contentPane,"height",null);this.resize(this._savedWidth,this._savedHeight);this._savedWidth=this._savedHeight=null;this.show(this.location);this._followMap();b.remove(this.domNode,"esriPopupMaximized");this.onRestore()}},startup:function(){},destroy:function(){this.map&&this.unsetMap();this.cleanup();this.isShowing&&this.hide();this.destroyDijits(this._title);
this._destroyContent();c.forEach(this._eventConnections,u.disconnect);e.destroy(this.domNode);this._sizers=this._contentPane=this._actionList=this._positioner=this._pointer=this._outerPointer=this._title=this._prevFeatureButton=this._nextFeatureButton=this._spinner=this._eventConnections=this._pagerScope=this._targetLocation=this._nls=this._maxButton=null},selectNext:function(){this.select(this.selectedIndex+1)},selectPrevious:function(){this.select(this.selectedIndex-1)},setFeatures:function(z,E){this._transientAnchor=
E&&E.anchor;this.inherited(arguments);this._updateUI()},clearFeatures:function(z){z||(this._transientAnchor=null);this.inherited(arguments)},postscript:null,_highlightSetter:function(z){var E=this.highlight,H=this.map;this.highlight=z;if(H&&z!==E)if(z){if(this.enableHighlight(H),z=this.features&&this.features[this.selectedIndex])this.updateHighlight(H,z),this.showHighlight()}else this.disableHighlight(H)},_pagingControlsSetter:function(z){var E=this.pagingControls,H=this.map;this.pagingControls=z;
H&&z!==E&&this._updatePagingControls()},_pagingInfoSetter:function(z){var E=this.pagingInfo,H=this.map;this.pagingInfo=z;H&&z!==E&&this.features&&this.features.length&&this._updatePagingInfo()},_popupWindowSetter:function(z){var E=this.popupWindow,H=this.map;this.popupWindow=z;H&&z!==E&&(z?(this._updateUI(),this._updateWindow()):(this.hide(),this.showHighlight()))},_anchorSetter:function(z){var E=this.anchor;this.anchor=z;this.map&&z!==E&&this.reposition()},_startupContent:function(){var z=this._contentPane;
this.startupDijits(z);c.forEach(this._getPopupRendererDijits(z),function(E){if(!this._contentUpdateHandles[E.id]){var H=E.on("content-update",y.hitch(this,function(){this.reposition()}));this._contentUpdateHandles[E.id]=H}},this)},_destroyContent:function(){var z=this._contentPane;c.forEach(this._getPopupRendererDijits(z),function(E){var H=this._contentUpdateHandles[E.id];H&&(H.remove(),delete this._contentUpdateHandles[E.id])},this);this.destroyDijits(z)},_getPopupRendererDijits:function(z){z=this.getDijits(z);
return z=c.filter(z,function(E){return E&&E.set&&/_PopupRenderer/.test(E.declaredClass)})},_featuresCleared:function(){this.setTitle("\x26nbsp;");this.setContent("\x26nbsp;");this._setPagerCallbacks(this);this._updateUI();this.hideHighlight()},_featureSelected:function(){this._updateUI();this._updateWindow()},_updateWindow:function(){var z=this.selectedIndex;if(0<=z){var E=this.features[z].getContent();if(!this.titleInBody&&E&&y.isString(E.id)){var H=g.byId(E.id);H&&H.set&&/_PopupRenderer/.test(H.declaredClass)&&
H.set("showTitle",!1)}this.setContent(E);this.updateHighlight(this.map,this.features[z]);this.showHighlight()}},_toggleVisibility:function(z){this._setVisibility(z);this.isShowing=z},_setVisibility:function(z){b.toggle(this.domNode,"esriPopupVisible",z);b.toggle(this.domNode,"esriPopupHidden",!z)},_waitAndHide:function(z){var E=this;this._delayHide=!0;setTimeout(function(){E._delayHide&&(E._delayHide=!1,E.hide())},z)},_followMap:function(){this._unfollowMap();var z=this.map;this._handles=[u.connect(z,
"onPanStart",this,this._onPanStart),u.connect(z,"onPan",this,this._onPan),u.connect(z,"onZoomStart",this,this._onZoomStart),u.connect(z,"onExtentChange",this,this._onExtentChange)]},_unfollowMap:function(){var z=this._handles;z&&(c.forEach(z,u.disconnect),this._handles=null)},_onPanStart:function(){var z=this.domNode.style;this._panOrigin={left:z.left,top:z.top,right:z.right,bottom:z.bottom}},_onPan:function(z,E){var H=this._panOrigin;z=E.x;E=E.y;var I=H.left,M=H.top,T=H.right;H=H.bottom;I&&(I=parseFloat(I)+
z+"px");M&&(M=parseFloat(M)+E+"px");T&&(T=parseFloat(T)-z+"px");H&&(H=parseFloat(H)-E+"px");t.set(this.domNode,{left:I,top:M,right:T,bottom:H})},_onZoomStart:function(){this._setVisibility(!1)},_onExtentChange:function(z,E,H){H&&(this._setVisibility(!0),this.show(this._targetLocation||this.location));this._targetLocation=null},_toggleSize:function(){this._maximized?this.restore():this.maximize()},_getTargetAnchor:function(){return this._transientAnchor||this.anchor},_setPosition:function(z){var E=
z.x,H=z.y;z=this.offsetX||0;var I=this.offsetY||0,M=0,T=0,Y=this.map,fa=Y.position.x,ca=Y.position.y,X=Y.width,ea=Y.height;Y="Left";var ma="bottom",wa="right",P="top",ja=r.getContentBox(this._positioner),ta=ja.w/2,N=ja.h/2,S=t.get(this._sizers[0],"height")+this._maxHeight+t.get(this._sizers[2],"height"),ha=S/2,la=0,sa=0,ya=X,Ga=ea,ba=E,da=H,oa=this._getTargetAnchor().toLowerCase();if("auto"===oa){if(oa=m.getBox)oa=oa(),la=Math.max(oa.l,fa),ya=Math.min(oa.l+oa.w,fa+X),sa=Math.max(oa.t,ca),Ga=Math.min(oa.t+
oa.h,ca+ea),ba+=fa,da+=ca;fa=da-sa>=S;ca=Ga-da>=S;X=ya-ba>=ja.w;ja=ba-la>=ja.w;da-sa>ha&&Ga-da>=ha&&(X?(ma="",Y="Left",P="",wa="right"):ja&&(ma="",Y="Right",P="",wa="left"));Y&&ma&&ba-la>ta&&ya-ba>=ta&&(fa?(Y="",ma="bottom",wa="",P="top"):ca&&(Y="",ma="top",wa="",P="bottom"));Y&&ma&&(X&&fa?(Y="Left",ma="bottom",wa="right",P="top"):X&&ca?(Y="Left",ma="top",wa="right",P="bottom"):ja&&ca?(Y="Right",ma="top",wa="left",P="bottom"):ja&&fa&&(Y="Right",ma="bottom",wa="left",P="top"));this._anchor=P&&wa?P+
"-"+wa:P||wa}else ma=Y="",-1!==oa.indexOf("top")?ma="bottom":-1!==oa.indexOf("bottom")&&(ma="top"),-1!==oa.indexOf("left")?Y="Right":-1!==oa.indexOf("right")&&(Y="Left"),this._anchor=this._getTargetAnchor();wa=ma+Y;switch(wa){case "top":case "bottom":T=14;break;case "Left":case "Right":M=13;break;case "topLeft":case "topRight":case "bottomLeft":case "bottomRight":T=14,M=-16}t.set(this.domNode,{left:E+"px",top:H+"px",right:null,bottom:null});E={left:null,right:null,top:null,bottom:null};Y?E[Y.toLowerCase()]=
M+z+"px":E.left=-ta+"px";ma?E[ma]=T+I+"px":E.top=-N+"px";t.set(this._positioner,E);this._showPointer(wa)},_showPointer:function(z){b.remove(this._pointer,"top bottom right left topLeft topRight bottomRight bottomLeft hidden".split(" "));b.remove(this._outerPointer,["right","left","hidden"]);"Right"===z||"Left"===z?(z=z.toLowerCase(),b.add(this._outerPointer,z)):b.add(this._pointer,z)},_setPagerCallbacks:function(z,E,H){if(this.pagingControls&&(z!==this||this._pagerScope&&this._pagerScope!==this)&&
z!==this._pagerScope){this._pagerScope=z;z===this&&(E=this.selectPrevious,H=this.selectNext);var I=this._eventConnections;u.disconnect(I[1]);u.disconnect(I[2]);E&&(I[1]=u.connect(this._prevFeatureButton,"onclick",z,E));H&&(I[2]=u.connect(this._nextFeatureButton,"onclick",z,H))}},_getLocation:function(z){var E=z&&z.geometry;if(E)switch(E.type){case "point":var H=E;if(z.isAggregate()){z=z.getChildGraphics();var I=z[0];z=(I=I.geometry&&I.geometry.spatialReference)&&new w({points:c.map(z,function(M){M=
M.geometry;return[M.x,M.y]}),spatialReference:I.toJson()});I=p.getDenormalizedExtent(z)}break;case "multipoint":H=E.getPoint(0);I=p.getDenormalizedExtent(E);break;case "polyline":case "polygon":H=E.getPoint(0,0),I=p.getDenormalizedExtent(E)}return[H,I]},_zoomToFeature:function(z){z.preventDefault();var E=this.features,H=this.selectedIndex;z=this.map;if(E)if(H=this._getLocation(E[H]),E=H[0],H=H[1],E||(E=this.location),H&&H.intersects(this.location)||(this.location=E),H&&H.getWidth()&&H.getHeight())z.setExtent(H,
!0);else{var I=z.getNumLevels();H=z.getLevel();var M=z.getMaxZoom(),T=this.zoomFactor||1;0<I?H!==M&&(I=H+T,I>M&&(I=M),z.navigationManager._wheelZoom({value:I-H,mapPoint:E},!0)):z.navigationManager._wheelZoom({value:1/Math.pow(2,T)*2,mapPoint:E},!0)}},_updatePagingControls:function(){var z=this._prevFeatureButton,E=this._nextFeatureButton,H=this.selectedIndex,I=this.features?this.features.length:0;this.pagingControls&&1<I?(0===H?b.add(z,"hidden"):b.remove(z,"hidden"),H===I-1?b.add(E,"hidden"):b.remove(E,
"hidden")):(b.add(z,"hidden"),b.add(E,"hidden"))},_updatePagingInfo:function(){var z=this.features?this.features.length:0,E=this._nls,H="\x26nbsp;";this.pagingInfo&&1<z&&E.NLS_pagingInfo&&(H=x.substitute({index:this.selectedIndex+1,total:z},E.NLS_pagingInfo));z&&(E=this.getSelectedFeature(),z=E.getInfoTemplate(),E=E.getTitle(),z&&!/esri\.InfoTemplate/.test(z.declaredClass)&&this.titleInBody||!E||(H=E+("\x26nbsp;"===H?"":" "+H)));this.setTitle(H)},_updateUI:function(){if(this.popupWindow){var z=this.features,
E=this.deferreds,H=z?z.length:0,I=this._spinner,M=this._actionList,T=this._nls;this._updatePagingControls();this._updatePagingInfo();H?b.remove(M,"hidden"):b.add(M,"hidden");E&&E.length?z?b.remove(I,"hidden"):this.setContent("\x3cdiv style\x3d'text-align: center;'\x3e"+T.NLS_searching+"...\x3c/div\x3e"):b.add(I,"hidden");H||E&&E.length?this._delayHide=!1:(this.setContent("\x3cdiv style\x3d'text-align: center;'\x3e"+T.NLS_noInfo+".\x3c/div\x3e"),this.visibleWhenEmpty||this._waitAndHide(this.hideDelay))}}});
l("extend-esri")&&y.setObject("dijit.Popup",B,k);return B})},"esri/geometry/normalizeUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/_base/Deferred dojo/has ../kernel ../config ../deferredUtils ./Extent ./Polyline ./Polygon ./webMercatorUtils ./jsonUtils".split(" "),function(B,y,c,u,q,l,m,h,f,d,a,b){function e(C,G){return Math.ceil((C-G)/(2*G))}function r(C,G){var z=C.paths||C.rings,E,H,I=z.length;for(E=0;E<I;E++){var M=z[E].length;for(H=0;H<M;H++){var T=C.getPoint(E,H);C.setPoint(E,
H,T.offset(G,0))}}return C}function t(C,G){if(!(C instanceof f||C instanceof d))throw console.error("_straightLineDensify: the input geometry is neither polyline nor polygon"),Error("_straightLineDensify: the input geometry is neither polyline nor polygon");var z=C instanceof f,E=[],H;B.forEach(z?C.paths:C.rings,function(I){E.push(H=[]);H.push([I[0][0],I[0][1]]);var M,T;for(M=0;M<I.length-1;M++){var Y=I[M][0];var fa=I[M][1];var ca=I[M+1][0];var X=I[M+1][1];var ea=Math.sqrt((ca-Y)*(ca-Y)+(X-fa)*(X-
fa));var ma=(X-fa)/ea;var wa=(ca-Y)/ea;var P=ea/G;if(1<P){for(T=1;T<=P-1;T++){var ja=T*G;var ta=wa*ja+Y;ja=ma*ja+fa;H.push([ta,ja])}T=(ea+Math.floor(P-1)*G)/2;ta=wa*T+Y;ja=ma*T+fa;H.push([ta,ja])}H.push([ca,X])}});return z?new f({paths:E,spatialReference:C.spatialReference}):new d({rings:E,spatialReference:C.spatialReference})}function g(C,G,z){G&&(C=t(C,1E6),C=a.webMercatorToGeographic(C,!0));z&&(C=r(C,z));return C}function k(C,G,z){var E=C.x||C[0];if(E>G){var H=e(E,G);C.x?C=C.offset(-2*H*G,0):C[0]=
E+-2*H*G}else E<z&&(H=e(E,z),C.x?C=C.offset(-2*H*z,0):C[0]=E+-2*H*z);return C}function x(C,G){var z=-1;B.forEach(G.cutIndexes,function(E,H){var I=G.geometries[H];B.forEach(I.rings||I.paths,function(M,T){B.some(M,function(Y){if(!(180>Y[0])){Y=0;var fa,ca=M.length;for(fa=0;fa<ca;fa++){var X=M[fa][0];Y=X>Y?X:Y}Y=Number(Y.toFixed(9));Y=-360*e(Y,180);ca=M.length;for(fa=0;fa<ca;fa++)X=I.getPoint(T,fa),I.setPoint(T,fa,X.offset(Y,0))}return!0})});E===z?I.rings?B.forEach(I.rings,function(M){C[E]=C[E].addRing(M)}):
B.forEach(I.paths,function(M){C[E]=C[E].addPath(M)}):(z=E,C[E]=I)});return C}function v(C,G,z,E){var H=new c;H.addCallbacks(z,E);G=G||l.defaults.geometryService;var I=[],M=[],T,Y,fa,ca,X,ea,ma,wa,P=0;B.forEach(C,function(S){if(S)if(T||(T=S.spatialReference,Y=T._getInfo(),ca=(fa=T._isWebMercator())?2.0037508342788905E7:180,X=fa?-2.0037508342788905E7:-180,ea=fa?102100:4326,ma=new f({paths:[[[ca,X],[ca,ca]]],spatialReference:{wkid:ea}}),wa=new f({paths:[[[X,X],[X,ca]]],spatialReference:{wkid:ea}})),
Y){var ha=b.fromJson(S.toJson()),la=S.getExtent();"point"===S.type?I.push(k(ha,ca,X)):"multipoint"===S.type?(ha.points=B.map(ha.points,function(sa){return k(sa,ca,X)}),I.push(ha)):"extent"===S.type?(ha=la._normalize(null,null,Y),I.push(ha.rings?new d(ha):ha)):la?(S=2*e(la.xmin,X)*ca,ha=0===S?ha:r(ha,S),la=la.offset(S,0),la.intersects(ma)&&la.xmax!==ca?(P=la.xmax>P?la.xmax:P,ha=g(ha,fa),M.push(ha),I.push("cut")):la.intersects(wa)&&la.xmin!==X?(P=2*la.xmax*ca>P?2*la.xmax*ca:P,ha=g(ha,fa,360),M.push(ha),
I.push("cut")):I.push(ha)):I.push(ha)}else I.push(S);else I.push(S)});z=new f;E=e(P,ca);for(var ja=-90,ta=E;0<E;){var N=-180+360*E;z.addPath([[N,ja],[N,-1*ja]]);ja*=-1;E--}0<M.length&&0<ta?G?G.cut(M,z,function(S){M=x(M,S);var ha=[];B.forEach(I,function(la,sa){"cut"===la&&(la=M.shift(),C[sa].rings&&1<C[sa].rings.length&&la.rings.length>=C[sa].rings.length?(I[sa]="simplify",ha.push(la)):I[sa]=!0===fa?a.geographicToWebMercator(la):la)});0<ha.length?G.simplify(ha,function(la){B.forEach(I,function(sa,
ya){"simplify"===sa&&(I[ya]=!0===fa?a.geographicToWebMercator(la.shift()):la.shift())});H.callback(I)},function(la){H.errback(la)}):H.callback(I)},function(S){H.errback(S)}):H.errback(Error("esri.geometry.normalizeCentralMeridian: 'geometryService' argument is missing.")):(B.forEach(I,function(S,ha){"cut"===S&&(S=M.shift(),I[ha]=!0===fa?a.geographicToWebMercator(S):S)}),H.callback(I));return H}function A(C,G,z,E){var H=!1,I;y.isObject(C)&&C&&(y.isArray(C)?C.length&&((I=C[0]&&C[0].declaredClass)&&
-1!==I.indexOf("Graphic")?(C=B.map(C,function(M){return M.geometry}),H=C.length?!0:!1):I&&-1!==I.indexOf("esri.geometry.")&&(H=!0)):(I=C.declaredClass)&&-1!==I.indexOf("FeatureSet")?(C=B.map(C.features||[],function(M){return M.geometry}),H=C.length?!0:!1):I&&-1!==I.indexOf("esri.geometry.")&&(H=!0));H&&G.push({index:z,property:E,value:C})}function n(C,G){var z=[];B.forEach(G,function(E){var H=E.i,I=C[H];E=E.p;var M;if(y.isObject(I)&&I)if(E)if("*"===E[0])for(M in I)I.hasOwnProperty(M)&&A(I[M],z,H,
M);else B.forEach(E,function(T){A(y.getObject(T,!1,I),z,H,T)});else A(I,z,H)});return z}function w(C,G){var z=0,E={};B.forEach(G,function(H){var I=H.index,M=H.property,T=H.value,Y=T.length||1,fa=C.slice(z,z+Y);y.isArray(T)||(fa=fa[0]);z+=Y;delete H.value;M?(E[I]=E[I]||{},E[I][M]=fa):E[I]=fa});return E}function p(C){for(var G=[],z=0,E=0,H=Math.min,I=Math.max,M=0;M<C.length;M++){for(var T=C[M],Y=null,fa=0;fa<T.length;fa++)Y=T[fa],G.push(Y),0===fa?E=z=Y[0]:(z=H(z,Y[0]),E=I(E,Y[0]));Y&&G.push([(z+E)/
2,0])}return G}var D={normalizeCentralMeridian:v,_foldCutResults:x,_prepareGeometryForCut:g,_offsetMagnitude:e,_pointNormalization:k,_updatePolyGeometry:r,_straightLineDensify:t,_createWrappers:function(C){var G=y.isObject(C)?C.prototype:y.getObject(C+".prototype");B.forEach(G.__msigns,function(z){var E=G[z.n];G[z.n]=function(){var H=this,I=[],M,T=new c(m._dfdCanceller);z.f&&m._fixDfd(T);for(M=0;M<z.c;M++)I[M]=arguments[M];var Y={dfd:T};I.push(Y);var fa=[],ca;if(H.normalization&&!H._isTable){var X=
n(I,z.a);B.forEach(X,function(ea){fa=fa.concat(ea.value)});fa.length&&(ca=v(fa))}ca?(T._pendingDfd=ca,ca.addCallbacks(function(ea){T.canceled||(Y.assembly=w(ea,X),T._pendingDfd=E.apply(H,I))},function(ea){var ma=H.declaredClass;ma&&-1!==ma.indexOf("FeatureLayer")?H._resolve([ea],null,I[z.e],T,!0):H._errorHandler(ea,I[z.e],T)})):T._pendingDfd=E.apply(H,I);return T}})},_disassemble:n,_addToBucket:A,_reassemble:w,getDenormalizedExtent:function(C){if(!C)return null;var G=C.getExtent();if(!G)return null;
var z=C.spatialReference&&C.spatialReference._getInfo();if(!z)return G;var E=z.valid[0];z=z.valid[1];var H=2*z,I=G.getWidth(),M=G.xmax,T=G.xmin;if("extent"===C.type||0===I||I<=z||I>H||M<E||T>z)return G;switch(C.type){case "polygon":if(1<C.rings.length)var Y=p(C.rings);else return G;break;case "polyline":if(1<C.paths.length)Y=p(C.paths);else return G;break;case "multipoint":Y=C.points}C=Math.min;E=Math.max;H=new h(G.toJson());for(var fa=0;fa<Y.length;fa++){var ca=Y[fa][0];0>ca?(ca+=z,T=E(ca,T)):(ca-=
z,M=C(ca,M))}H.xmin=M;H.xmax=T;return H.getWidth()<I?(H.xmin-=z,H.xmax-=z,H):G}};u("extend-esri")&&y.mixin(y.getObject("geometry",!0,q),D);return D})},"esri/geometry/jsonUtils":function(){define("dojo/_base/lang dojo/has ../kernel ../lang ./Point ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),function(B,y,c,u,q,l,m,h,f){function d(r,t,g){var k=r.rings||r.paths,x,v;var A=0;for(x=k.length;A<x;A++){var n=k[A];var w=0;for(v=n.length;w<v;w++){var p=n[w];if(0<w)D+=p[0],C+=p[1];else{var D=p[0];var C=
p[1]}p[0]=t(D);p[1]=g(C)}}return r}var a={esriGeometryPoint:function(r,t,g){r.x=t(r.x);r.y=g(r.y);return r},esriGeometryPolyline:d,esriGeometryPolygon:d,esriGeometryEnvelope:function(r,t,g){r.xmin=t(r.xmin);r.ymin=g(r.ymin);r.xmax=t(r.xmax);r.ymax=g(r.ymax);return r},esriGeometryMultipoint:function(r,t,g){var k=r.points,x;var v=0;for(x=k.length;v<x;v++){var A=k[v];if(0<v)n+=A[0],w+=A[1];else{var n=A[0];var w=A[1]}A[0]=t(n);A[1]=g(w)}return r}},b={esriGeometryPoint:function(r,t,g){r.x=t(r.x);r.y=g(r.y);
return r}},e={createInstance:function(r,t){r=new r;t&&u.mixin(r,t);return r},fromJson:function(r){if(void 0!==r.x&&void 0!==r.y)return new q(r);if(void 0!==r.paths)return new l(r);if(void 0!==r.rings)return new m(r);if(void 0!==r.points)return new h(r);if(void 0!==r.xmin&&void 0!==r.ymin&&void 0!==r.xmax&&void 0!==r.ymax)return new f(r)},getJsonType:function(r){return r instanceof q?"esriGeometryPoint":r instanceof l?"esriGeometryPolyline":r instanceof m?"esriGeometryPolygon":r instanceof f?"esriGeometryEnvelope":
r instanceof h?"esriGeometryMultipoint":null},getGeometryType:function(r){return"esriGeometryPoint"===r?q:"esriGeometryPolyline"===r?l:"esriGeometryPolygon"===r?m:"esriGeometryEnvelope"===r?f:"esriGeometryMultipoint"===r?h:null},supportsLazyUnquantization:function(r){return"esriGeometryPoint"===r||"esriGeometryPolyline"===r||"esriGeometryPolygon"===r||"esriGeometryMultipoint"===r},unquantizeFunction:function(r,t){if(r&&t){var g=t.translate[0],k=t.translate[1],x=t.scale[0],v=t.scale[1],A=function(p){return p*
x+g},n=function(p){return k-p*v},w=a[r];return function(p){return p?w(p,A,n):null}}},unquantize:function(r,t,g){if(t=e.unquantizeFunction(t,g)){var k=r.length;for(g=0;g<k;g++)t(r[g].geometry)}},quantizeFunction:function(r,t){if(r&&"esriGeometryPoint"===r&&t){var g=t.translate[0],k=t.translate[1],x=t.scale[0],v=t.scale[1],A=function(p){return Math.round((p-g)/x)},n=function(p){return Math.round((k-p)/v)},w=b[r];return function(p){return p?w(p,A,n):null}}},quantize:function(r,t,g){if(t=e.quantizeFunction(t,
g)){var k=r.length;for(g=0;g<k;g++)t(r[g].geometry)}}};y("extend-esri")&&B.mixin(B.getObject("geometry",!0,c),e);return e})},"esri/InfoWindowBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Deferred dojo/dom-construct dojo/has dijit/registry ./kernel ./lang ./geometry/ScreenPoint".split(" "),function(B,y,c,u,q,l,m,h,f,d,a){B=B(null,{declaredClass:"esri.InfoWindowBase",constructor:function(){var b=y.hitch;this.__set_title=b(this,this.__set_title);
this.__err_title=b(this,this.__err_title);this.__set_content=b(this,this.__set_content);this.__err_content=b(this,this.__err_content)},setMap:function(b){this.map=b},unsetMap:function(b){delete this.map},setTitle:function(){},setContent:function(){},show:function(){},hide:function(){},resize:function(){},onShow:function(){},onHide:function(){},place:function(b,e){d.isDefined(b)?y.isObject(b)?l.place(b,e,"only"):e.innerHTML=b:e.innerHTML=""},startupDijits:function(b){this._processDijits(b)},destroyDijits:function(b){this._processDijits(b,
!0)},getDijits:function(b){var e=[];b&&1===b.children.length&&(b=b.children[0])&&(e=(e=h.byNode(b))?[e]:h.findWidgets(b));return e},_processDijits:function(b,e){b=this.getDijits(b);c.forEach(b,function(r){if(e){if(r._started&&!r._destroyed)try{r.destroyRecursive?r.destroyRecursive():r.destroy&&r.destroy()}catch(t){console.debug("An error occurred when destroying a widget embedded within InfoWindow: "+t.message)}}else if(!r._started)try{r.startup()}catch(t){console.debug("An error occurred when starting a widget embedded within InfoWindow: "+
t.message)}})},__registerMapListeners:function(){this.__unregisterMapListeners();var b=this.map;this.__handles=[u.connect(b,"onPan",this,this.__onMapPan),u.connect(b,"onZoomStart",this,this.__onMapZmStart),u.connect(b,"onExtentChange",this,this.__onMapExtChg)]},__unregisterMapListeners:function(){var b=this.__handles;b&&(c.forEach(b,u.disconnect,u),this.__handles=null)},__onMapPan:function(b,e){this.move(e,!0)},__onMapZmStart:function(){this.__mcoords=this.mapCoords||this.map.toMap(new a(this.coords));
this.hide(null,!0)},__onMapExtChg:function(b,e,r){b=this.map;var t=this.mapCoords;t?this.show(t,null,!0):(e=r?b.toScreen(this.__mcoords):this.coords.offset(e&&e.x||0,e&&e.y||0),this.show(e,null,!0))},__setValue:function(b,e){this[b].innerHTML="";var r="_dfd"+b,t=this[r];t&&-1===t.fired&&(t.cancel(),this[r]=null);d.isDefined(e)&&(e instanceof q?(this[r]=e,e.addCallbacks(this["__set"+b],this["__err"+b])):this.__render(b,e))},__set_title:function(b){this._dfd_title=null;this.__render("_title",b)},__err_title:function(b){this._dfd_title=
null},__set_content:function(b){this._dfd_content=null;this.__render("_content",b)},__err_content:function(b){this._dfd_content=null},__render:function(b,e){var r=this[b];this.place(e,r);this.isShowing&&(this.startupDijits(r),"_title"===b&&this._adjustContentArea&&this._adjustContentArea())}});m("extend-esri")&&(f.InfoWindowBase=B);return B})},"esri/PopupBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Color dojo/_base/Deferred dojo/has ./kernel ./graphic ./geometry/Point ./geometry/jsonUtils ./geometry/mathUtils ./geometry/webMercatorUtils ./symbols/SimpleMarkerSymbol ./symbols/SimpleLineSymbol ./symbols/CartographicLineSymbol ./symbols/SimpleFillSymbol ./tasks/query ./Evented dojo/has!extend-esri?./PopupInfo".split(" "),
function(B,y,c,u,q,l,m,h,f,d,a,b,e,r,t,g,k,x){function v(A){return"sizeInfo"===A.type}B=B(x,{declaredClass:"esri.PopupBase",_featureLayers:{},_updateEndHandles:[],_mapLevelChangeHandle:null,_evtMap:{"set-features":!0,"clear-features":!0,"selection-change":!0,"dfd-complete":!0},onSetFeatures:function(){},onClearFeatures:function(){},onSelectionChange:function(){},onDfdComplete:function(){},initialize:function(){this.count=0;this.selectedIndex=-1;this.on("clear-features",y.hitch(this,this._resetUpdateEndListeners));
this.on("dfd-complete",y.hitch(this,this._processFeatures));this.on("set-features",y.hitch(this,this._processFeatures));this.on("selection-change",y.hitch(this,this._checkFeatureResolution))},cleanup:function(){this.features=this.deferreds=null;this._resetUpdateEndListeners();this._untrackMapLevelChange()},setFeatures:function(A){if(A&&A.length){this.clearFeatures(!0);var n,w;A[0]instanceof q?w=A:n=A;n?this._updateFeatures(null,n):(this.deferreds=w,w=w.slice(0),c.forEach(w,function(p){p.addBoth(y.hitch(this,
this._updateFeatures,p))},this))}},clearFeatures:function(A){this.features=this.deferreds=this._marked=null;this.count=0;var n=this.selectedIndex;this.selectedIndex=-1;if(-1<n)this.onSelectionChange();this.onClearFeatures({isIntermediate:!!A})},getSelectedFeature:function(){var A=this.features;if(A)return A[this.selectedIndex]},select:function(A){0>A||A>=this.count||(this.selectedIndex=A,this.onSelectionChange())},enableHighlight:function(A){this._highlighted=A.graphics.add(new h(new f(0,0,A.spatialReference)));
this._highlighted.attr("data-popup-highlight","");this._highlighted.hide();this._trackMapLevelChange(A);this.markerSymbol||(A=this.markerSymbol=new e,A.setStyle(e.STYLE_TARGET),A._setDim(16,16,0),A.setOutline(new t(r.STYLE_SOLID,new u([0,255,255]),2,t.CAP_ROUND,t.JOIN_ROUND)),A.setColor(new u([0,0,0,0])));this.lineSymbol||(this.lineSymbol=new r(r.STYLE_SOLID,new u([0,255,255]),2));this.fillSymbol||(this.fillSymbol=new g(g.STYLE_NULL,new r(r.STYLE_SOLID,new u([0,255,255]),2),new u([0,0,0,0])));this.clusterFillSymbol||
(this.clusterFillSymbol=new g(g.STYLE_SOLID,new r(r.STYLE_SOLID,new u([0,255,255]),1.33),null))},disableHighlight:function(A){var n=this._highlighted;n&&(n.hide(),A.graphics.remove(n),delete this._highlighted);this._untrackMapLevelChange();this.markerSymbol=this.lineSymbol=this.fillSymbol=null},showHighlight:function(){var A=this.features&&this.features[this.selectedIndex];this._highlighted&&A&&A.geometry&&this._highlighted.show()},hideHighlight:function(){this._highlighted&&this._highlighted.hide()},
updateHighlight:function(A,n){var w=n.geometry,p=this._highlighted;if(w&&p){p.hide();!p._graphicsLayer&&A&&A.graphics.add(p);p.setGeometry(d.fromJson(w.toJson()));switch(w.type){case "point":case "multipoint":var D=n.getLayer(),C=n.symbol||D&&D._getSymbol(n);if(D&&C){var G;w=C.xoffset||0;var z=C.yoffset||0,E=C.angle||0;switch(C.type){case "simplemarkersymbol":var H=G=C.size||0;break;case "picturemarkersymbol":H=C.width||0;G=C.height||0;break;case "textsymbol":H=G=C.font&&C.font.size||0}var I=n.symbol?
null:D._getRenderer(n);(D=this._getSizeInfo(I))?A=n=I.getSize(n,{sizeInfo:D,shape:C.style,resolution:A&&A.getResolutionInMeters&&A.getResolutionInMeters()}):null!=n.size?A=n=n.size:(A=H,n=G);I=this.markerSymbol;A&&n&&(w&&(w=w/H*A),z&&(z=z/G*n),I._setDim(A+4,n+4,0));I.setOffset(w,z);I.setAngle(E)}break;case "polyline":I=this.lineSymbol;break;case "polygon":I=this.fillSymbol}p.setSymbol(I)}else p&&p.hide()},showClosestFirst:function(A){var n=this.features;if(n&&n.length){if(1<n.length){var w,p=Infinity,
D=-1,C,G=a.getLength,z=A.spatialReference;A=A.normalize();for(w=n.length-1;0<=w;w--)if(C=n[w].geometry){var E=C.spatialReference;var H=0;try{var I="point"===C.type?C:C.getExtent().getCenter();I=I.normalize();z&&E&&!z.equals(E)&&z._canProject(E)&&(I=z.isWebMercator()?b.geographicToWebMercator(I):b.webMercatorToGeographic(I));H=G(A,I)}catch(M){}0<H&&H<p&&(p=H,D=w)}0<D&&(n.splice(0,0,n.splice(D,1)[0]),this.select(0))}}else this.deferreds&&(this._marked=A)},_trackMapLevelChange:function(A){this._untrackMapLevelChange();
this._mapLevelChangeHandle=A.on("extent-change",y.hitch(this,function(n){n.levelChange&&this._checkFeatureResolution()}))},_untrackMapLevelChange:function(){this._mapLevelChangeHandle&&(this._mapLevelChangeHandle.remove(),this._mapLevelChangeHandle=null)},_unbind:function(A){A=c.indexOf(this.deferreds,A);if(-1!==A)return this.deferreds.splice(A,1),this.deferreds.length?1:(this.deferreds=null,2)},_fireComplete:function(A){var n=this._marked;n&&(this._marked=null,this.showClosestFirst(n));this.onDfdComplete(A)},
_updateFeatures:function(A,n){if(A){if(this.deferreds&&(A=this._unbind(A)))if(n&&n instanceof Error){if(this._fireComplete(n),2===A)this.onSetFeatures()}else if(n&&n.length)if(this.features){if(n=c.filter(n,function(w){return-1===c.indexOf(this.features,w)},this),this.features=this.features.concat(n),this.count=this.features.length,this._fireComplete(),2===A)this.onSetFeatures()}else{this.features=n;this.count=n.length;this.selectedIndex=0;this._fireComplete();if(2===A)this.onSetFeatures();this.select(0)}else if(this._fireComplete(),
2===A)this.onSetFeatures()}else this.features=n,this.count=n.length,this.selectedIndex=0,this.onSetFeatures(),this.select(0)},_getSizeInfo:function(A){return A?A.sizeInfo||c.filter(A.visualVariables,v)[0]:null},_resetUpdateEndListeners:function(){this._featureLayers={};c.forEach(this._updateEndHandles,function(A){A.remove()});this._updateEndHandles=[]},_processFeatures:function(){c.forEach(this.features,function(A){(A=A.getLayer())&&!this._featureLayers[A.id]&&(1===A.currentMode||0===A.currentMode&&
6===A.mode)&&A.objectIdField&&A.hasXYFootprint&&A.queryFeatures&&(this._featureLayers[A.id]=A,A=A.on("update-end",y.hitch(this,this._fLyrUpdateEndHandler)),this._updateEndHandles.push(A))},this)},_fLyrUpdateEndHandler:function(A){if(!A.error){var n=this,w=A.target,p=w.getSelectedFeatures(),D=0===w.currentMode&&6===w.mode,C={},G=[];c.forEach(this.features,function(z){if(z.getLayer()===w){var E=z.attributes[w.objectIdField];C[E]=z;G.push(E)}});G.length&&(A=new k,A.objectIds=G,w.queryFeatures(A,function(z){c.forEach(z.features,
function(E){var H=C[E.attributes[w.objectIdField]],I=!1;H.geometry!==E.geometry||w.hasWebGLSurface()?(H.setGeometry(E.geometry),I=!0):D&&p&&-1!==c.indexOf(p,E)&&(I=!0);I&&this._highlighted&&H===this.getSelectedFeature()&&this._highlighted.setGeometry(E.geometry)},n)}))}},_checkFeatureResolution:function(){var A=this.getSelectedFeature(),n=this.map;if(A&&n){var w=A.getLayer();if(w){var p=A.getResolution();2===w.currentMode&&A.geometry&&p&&p>n.getResolution()&&(n=n.getResolutionForPopup(),(w=this._refetchFeature(A,
n,w))&&w.then(y.hitch(this,this._updateFeatureResolution,A,n)))}}},_refetchFeature:function(A,n,w){if(A=this._createQueryForCustomResolution(A,n,w))return w.queryFeatures(A).then(function(p){return p&&p.features[0]})},_createQueryForCustomResolution:function(A,n,w){w=w.objectIdField;var p=A.attributes;p=p&&w&&p[w];if(null==p)return null;var D=new k;D.objectIds=[p];D.maxAllowableOffset=n;D.outFields=[w];D.outSpatialReference=A.geometry.spatialReference;return D},_updateFeatureResolution:function(A,
n,w){A.getResolution()!==n&&(A.setResolution(n),A.setGeometry(w.geometry),this._highlighted&&A===this.getSelectedFeature()&&this._highlighted.setGeometry(A.geometry))}});l("extend-esri")&&(m.PopupBase=B);return B})},"esri/graphic":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./domUtils ./lang ./InfoTemplate ./geometry/jsonUtils ./symbols/jsonUtils".split(" "),function(B,y,c,u,q,l,m,h,f){function d(){}B=B(null,{declaredClass:"esri.Graphic",constructor:function(a,b,e,r){this._construct();
a&&!a.declaredClass?(this.geometry=a.geometry?h.fromJson(a.geometry):null,this.symbol=a.symbol?f.fromJson(a.symbol):null,this.attributes=a.attributes||null,this.infoTemplate=a.infoTemplate?new m(a.infoTemplate):null):(this.geometry=a,this.symbol=b,this.attributes=e,this.infoTemplate=r)},_geomVersion:0,_resolution:null,_shape:null,_bgShape:null,_dataAttrs:null,_layer:null,_sourceLayer:null,_graphicsLayer:null,_parentGraphic:null,_suspended:!1,size:null,visible:!0,_aggregationSourceLayer:null,_aggregationInfo:null,
_computedAttributes:null,_computedVersion:null,_computedGeomVersion:null,getParentGraphic:function(){return this._parentGraphic},setParentGraphic:function(a){this._parentGraphic=a},setSize:function(a){this.size=a;return this},getAggregationSourceLayer:function(){return this._aggregationSourceLayer},setAggregationSourceLayer:function(a){this._aggregationSourceLayer=a;return this},isAggregate:function(){return!!this._aggregationInfo},getAggregationInfo:function(){return this._aggregationInfo},setAggregationInfo:function(a){this._aggregationInfo=
a;return this},getChildGraphics:function(){var a=this.getAggregationSourceLayer();return a?a.getChildGraphics(this):[]},getDojoShape:function(){return this._shape},getShapes:function(){var a=[];this._shape&&a.push(this._shape);this._bgShape&&a.push(this._bgShape);return a},getNode:function(){var a=this._shape&&this._shape.getNode();return a&&a.nodeType?a:null},getNodes:function(){var a=this.getShapes(),b,e,r=a.length,t=[];for(e=0;e<r;e++)(b=a[e]&&a[e].getNode())&&b.nodeType&&t.push(b);return t},getLayer:function(){return this._layer},
getSourceLayer:function(){return this._sourceLayer||this._layer},clone:function(){var a=new this.constructor(this.toJson());a.visible=this.visible;a._layer=this._layer;a._sourceLayer=this._sourceLayer;a._aggregationSourceLayer=this._aggregationSourceLayer;a._aggregationInfo=this._aggregationInfo;a._resolution=this._resolution;return a},draw:function(){var a=this._graphicsLayer;a&&a._draw(this,!0);return this},setGeometry:function(a){this.geometry=a;this._geomVersion++;var b=this._graphicsLayer;b&&
(b._updateExtent(this),this.draw(),a&&"polyline"===a.type&&b._updateSVGMarkers());return this},setResolution:function(a){this._resolution=a;return this},getResolution:function(){return this._resolution},setSymbol:function(a,b){var e=this._graphicsLayer,r=this._shape;this.symbol=a;e&&(b&&r&&e._removeShape(this),this.draw());return this},setAttributes:function(a){this.attributes=a;this.clearCache();return this},setInfoTemplate:function(a){this.infoTemplate=a;return this},getInfoTemplate:function(){return this._getEffInfoTemplate()},
_getEffInfoTemplate:function(){var a=this.getLayer();return this.infoTemplate||a&&a.infoTemplate},getTitle:function(){var a=this.getInfoTemplate(),b=a&&a.title;if(y.isFunction(b))b=b.call(a,this);else if(y.isString(b)){var e=(a=this.getLayer())&&a._getDateOpts;b=l.substitute(this.attributes,b,{first:!0,dateFormat:e&&e.call(a)})}return b},getContent:function(){var a=this.getInfoTemplate(),b=a&&a.content;if(y.isFunction(b))b=b.call(a,this);else if(y.isString(b)){var e=(a=this.getLayer())&&a._getDateOpts;
b=l.substitute(this.attributes,b,{dateFormat:e&&e.call(a)})}return b},attr:function(a,b){null==b||this._dataAttrs||(this._dataAttrs={});this._dataAttrs&&(this._dataAttrs[a]=b,this._setDataAttr(a,b));return this},_isSuspended:function(){return this._suspended},_suspend:function(){this._suspended=!0;this.draw()},_resume:function(){this._suspended=!1;this.draw()},show:function(){this.visible=!0;this.attr("data-hidden");var a;if(this.getShapes().length){var b=this.getNodes();var e=b.length;for(a=0;a<
e;a++)q.show(b[a])}else this.draw();(b=this._graphicsLayer)&&b._graphicVisibilityChanged(this);return this},hide:function(){this.visible=!1;this.attr("data-hidden","");var a=this._graphicsLayer,b,e;if(a){if("canvas-2d"===a.surfaceType)a._removeShape(this);else{var r=this.getNodes();if(e=r.length)for(b=0;b<e;b++)q.hide(r[b])}a._graphicVisibilityChanged(this)}return this},toJson:function(){var a={};this.geometry&&(a.geometry=this.geometry.toJson());this.attributes&&(a.attributes=y.mixin({},this.attributes));
this.symbol&&(a.symbol=this.symbol.toJson());this.infoTemplate&&(a.infoTemplate=this.infoTemplate.toJson());return a},_setDataAttr:function(a,b){var e=this.getNodes(),r,t=e.length;for(r=0;r<t;r++)this._setDOMDataAttr(e[r],a,b)},_setDOMDataAttr:function(a,b,e){null==e?a.removeAttribute(b):a.setAttribute(b,e)},_applyDataAttrs:function(){var a=this._dataAttrs;if(a){var b=this.getNodes(),e,r=b.length;for(e=0;e<r;e++)for(var t in a)this._setDOMDataAttr(b[e],t,a[t])}},_getViewInfo:function(a){return(a=
(a=a||this.getLayer())&&a.getMap())&&a.getViewInfo()},evaluateExpression:function(a,b){return this._getDataValue(a._attributeDef,a._attributeCache,null,null,a,b)},_getDataValue:function(a,b,e,r,t,g){var k=b.id,x=this.attributes,v=a.field,A=b.isNumeric,n=null;if(k){var w=this._computedAttributes,p=this._computedVersion,D=this._computedGeomVersion;r=this._getViewInfo(r);var C=!(!t||!t.async),G=g&&g.skipCache||C,z=!g||!1!==g.strictReturnType,E=b.dependsOnView||b.isJSFunc,H=b.dependsOnGeometry;w||(w=
this._computedAttributes={});E&&!p&&(p=this._computedVersion={});H&&!D&&(D=this._computedGeomVersion={});var I=E&&p[k]!==r.version||H&&D[k]!==this._geomVersion;n=w[k];if(void 0===n||I||G)n=null,b.hasExpr?n=t?t.evaluate(g&&g.context):e.executeFunction(b.compiledFunc,e.createExecContext(this,r)):b.isJSFunc?n=v(this,a):x&&(n=x[v],A&&this._isValidNumber(n)&&(b=a.normalizationType||"field",e=n,n=null,t=a.normalizationTotal,a=x[a.normalizationField],"log"===b&&0!==e?n=Math.log(e)*Math.LOG10E:"percent-of-total"===
b&&this._isValidNumber(t)&&0!==t?n=e/t*100:"field"===b&&this._isValidNumber(a)&&0!==a&&(n=e/a))),z&&(C?A&&(this._construct(),n=n.then(this._sanitizeNumericValue)):n=this._sanitizeValue(n,A)),G||(w[k]=n,E&&(p[k]=r.version),H&&(D[k]=this._geomVersion))}else x&&(n=this._sanitizeValue(x[v],A));return n},_sanitizeValue:function(a,b){b&&!this._isValidNumber(a)&&(a=null);return a},_sanitizeNumericValue:function(a){return this._sanitizeValue(a,!0)},_construct:function(){this._constructed||(this._sanitizeNumericValue=
y.hitch(this,this._sanitizeNumericValue),this._constructed=!0)},_isValidNumber:function(a){return"number"===typeof a&&!isNaN(a)&&Infinity!==a&&-Infinity!==a},clearCache:function(a){if(null!=a){var b=this._computedAttributes,e=this._computedVersion,r=this._computedGeomVersion;b&&(b[a]=void 0);e&&(e[a]=void 0);r&&(r[a]=void 0)}else this._computedAttributes=this._computedVersion=this._computedGeomVersion=null}});B.prototype.getShape=B.prototype.getDojoShape;d.prototype=B.prototype;B.simpleConstructor=
d;c("extend-esri")&&(u.Graphic=B);return B})},"esri/InfoTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(B,y,c,u,q){B=B(null,{declaredClass:"esri.InfoTemplate",constructor:function(l,m){l&&y.isObject(l)&&!y.isFunction(l)?y.mixin(this,l):(this.title=l||"${*}",this.content=m||"${*}")},setTitle:function(l){this.title=l;return this},setContent:function(l){this.content=l;return this},toJson:function(){return q.fixJson({title:this.title,content:this.content})}});
c("extend-esri")&&(u.InfoTemplate=B);return B})},"esri/symbols/jsonUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/has ../kernel ./SimpleMarkerSymbol ./PictureMarkerSymbol ./SimpleLineSymbol ./CartographicLineSymbol ./SimpleFillSymbol ./PictureFillSymbol ./TextSymbol".split(" "),function(B,y,c,u,q,l,m,h,f,d,a){var b={createDefaultSymbol:function(e){switch(e){case "esriGeometryPoint":case "esriGeometryMultipoint":var r=b.createDefaultMarkerSymbol();break;case "esriGeometryPolyline":r=
b.createDefaultLineSymbol();break;case "esriGeometryPolygon":case "esriGeometryEnvelope":case "esriGeometryMultiPatch":r=b.createDefaultFillSymbol()}return r},createDefaultMarkerSymbol:function(){return new q},createDefaultLineSymbol:function(){return new m},createDefaultFillSymbol:function(){return new f},getFirstSupportedSymbol:function(e){var r;y.some(e,function(t){t&&-1<b.supportedSymbolTypes.indexOf(t.type)&&(r=t);return!!r});return r},isPointSymbol:function(e){return e?-1<b.supportedPointSymbolTypes.indexOf(e.type):
!1},supportedPointSymbolTypes:["esriSMS","esriPMS","esriTS"],supportedSymbolTypes:"esriSMS esriPMS esriTS esriSLS esriCLS esriSFS esriPFS".split(" "),fromJson:function(e,r){var t=null;switch(e.type){case "esriSMS":t=new q(e);break;case "esriPMS":t=new l(e);break;case "esriTS":t=new a(e);break;case "esriSLS":t=void 0!==e.cap?new h(e):new m(e);break;case "esriCLS":t=new h(e);break;case "esriSFS":t=new f(e);break;case "esriPFS":t=new d(e);break;default:t=(e=r&&r.geometryType)?b.createDefaultSymbol(e):
null}return t},getShapeDescriptors:function(e){return e&&e.getShapeDescriptors?e.getShapeDescriptors():{defaultShape:null,fill:null,stroke:null}}};c("extend-esri")&&B.mixin(B.getObject("symbol",!0,u),b);return b})},"esri/symbols/PictureMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol".split(" "),function(B,y,c,u,q,l,m,h){var f={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};B=B(h,{declaredClass:"esri.symbol.PictureMarkerSymbol",
type:"picturemarkersymbol",constructor:function(d,a,b){d?y.isString(d)?(this.url=d,a&&(this.width=a),b&&(this.height=b)):(this.width=u.pt2px(null==d.width?f.width:d.width),this.height=u.pt2px(null==d.height?f.height:d.height),a=d.imageData,9>c("ie")||!a||(b=this.url,this.url="data:"+(d.contentType||"image")+";base64,"+a,this.imageData=b)):(y.mixin(this,f),this.width=u.pt2px(this.width),this.height=u.pt2px(this.height))},getStroke:function(){return null},getFill:function(){return null},setWidth:function(d){this.width=
d;return this},setHeight:function(d){this.height=d;return this},setUrl:function(d){d!==this.url&&(delete this.imageData,delete this.contentType);this.url=d;return this},getShapeDescriptors:function(){return{defaultShape:{type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||""},fill:null,stroke:null}},toJson:function(){var d=this.url,a=this.imageData;if(0===d.indexOf("data:")){var b=d;d=a;a=b.indexOf(";base64,")+8;a=b.substr(a)}!y.isString(d)||
0!==d.indexOf("/")&&0!==d.indexOf("//")&&0!==d.indexOf("./")&&0!==d.indexOf("../")||(d=m.getAbsoluteUrl(d));b=u.px2pt(this.width);b=isNaN(b)?void 0:b;var e=u.px2pt(this.height);e=isNaN(e)?void 0:e;d=l.fixJson(y.mixin(this.inherited("toJson",arguments),{type:"esriPMS",url:d,imageData:a,contentType:this.contentType,width:b,height:e}));delete d.color;delete d.size;d.imageData||delete d.imageData;return d}});B.defaultProps=f;c("extend-esri")&&(y.setObject("symbol.PictureMarkerSymbol",B,q),q.symbol.defaultPictureMarkerSymbol=
f);return B})},"esri/symbols/CartographicLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./SimpleLineSymbol".split(" "),function(B,y,c,u,q,l,m,h){var f={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_INSIDE_FRAME:"insideframe",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",STYLE_SHORTDASHDOTDOT:"shortdashdotdot",
STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},d={color:[0,0,0,1],style:f.STYLE_SOLID,width:1,cap:f.CAP_BUTT,join:f.JOIN_MITER,miterLimit:10};B=B(h,{declaredClass:"esri.symbol.CartographicLineSymbol",type:"cartographiclinesymbol",_caps:{butt:"esriLCSButt",round:"esriLCSRound",square:"esriLCSSquare"},_joins:{miter:"esriLJSMiter",round:"esriLJSRound",bevel:"esriLJSBevel"},constructor:function(a,
b,e,r,t,g){a?y.isString(a)?(this.style=a,b&&(this.color=b),void 0!==e&&(this.width=e),r&&(this.cap=r),t&&(this.join=t),void 0!==g&&(this.miterLimit=g)):(this.cap=m.valueOf(this._caps,a.cap),this.join=m.valueOf(this._joins,a.join),this.width=q.pt2px(a.width),this.miterLimit=q.pt2px(a.miterLimit)):(y.mixin(this,d),this.color=new c(this.color),this.width=q.pt2px(this.width),this.miterLimit=q.pt2px(this.miterLimit))},setCap:function(a){this.cap=a;return this},setJoin:function(a){this.join=a;return this},
setMiterLimit:function(a){this.miterLimit=a;return this},getStroke:function(){return y.mixin(this.inherited("getStroke",arguments),{cap:this.cap,join:this.join===f.JOIN_MITER?this.miterLimit:this.join})},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){var a=q.px2pt(this.miterLimit);a=isNaN(a)?void 0:a;return m.fixJson(y.mixin(this.inherited("toJson",arguments),{type:"esriCLS",
cap:this._caps[this.cap],join:this._joins[this.join],miterLimit:a}))}});y.mixin(B,f);B.defaultProps=d;u("extend-esri")&&(y.setObject("symbol.CartographicLineSymbol",B,l),l.symbol.defaultCartographicLineSymbol=d);return B})},"esri/symbols/SimpleFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./FillSymbol ./SimpleLineSymbol require".split(" "),function(B,y,c,u,q,l,m,h,f,d){var a={STYLE_SOLID:"solid",STYLE_NULL:"none",STYLE_HORIZONTAL:"horizontal",
STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forwarddiagonal",STYLE_BACKWARD_DIAGONAL:"backwarddiagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonalcross",STYLE_FORWARDDIAGONAL:"forwarddiagonal",STYLE_BACKWARDDIAGONAL:"backwarddiagonal",STYLE_DIAGONALCROSS:"diagonalcross"},b={style:a.STYLE_SOLID,color:[0,0,0,.25]};B=B(h,{declaredClass:"esri.symbol.SimpleFillSymbol",type:"simplefillsymbol",_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",vertical:"esriSFSVertical",
forwarddiagonal:"esriSFSForwardDiagonal",backwarddiagonal:"esriSFSBackwardDiagonal",cross:"esriSFSCross",diagonalcross:"esriSFSDiagonalCross"},constructor:function(e,r,t){e?y.isString(e)?(this.style=e,void 0!==r&&(this.outline=r),void 0!==t&&(this.color=t)):this.style=m.valueOf(this._styles,e.style):(y.mixin(this,b),this.outline=new f(this.outline),this.color=new c(this.color))},setStyle:function(e){this.style=e;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){var e=
this.style;return e===a.STYLE_NULL?null:e===a.STYLE_SOLID?this.color:y.mixin({},q.defaultPattern,{src:d.toUrl("../images/symbol/sfs/"+e+".png"),width:10,height:10})},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){return m.fixJson(y.mixin(this.inherited("toJson",arguments),{type:"esriSFS",style:this._styles[this.style]}))}});y.mixin(B,a);B.defaultProps=b;u("extend-esri")&&
(y.setObject("symbol.SimpleFillSymbol",B,l),l.symbol.defaultSimpleFillSymbol=b);return B})},"esri/symbols/FillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./Symbol ./SimpleLineSymbol".split(" "),function(B,y,c,u,q,l){B=B(q,{declaredClass:"esri.symbol.FillSymbol",constructor:function(m){m&&y.isObject(m)&&m.outline&&(this.outline=new l(m.outline))},setOutline:function(m){this.outline=m;return this},toJson:function(){var m=this.inherited("toJson",arguments);this.outline&&
(m.outline=this.outline.toJson());return m}});c("extend-esri")&&y.setObject("symbol.FillSymbol",B,u);return B})},"esri/symbols/PictureFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./FillSymbol".split(" "),function(B,y,c,u,q,l,m,h){var f={xoffset:0,yoffset:0,width:12,height:12};B=B(h,{declaredClass:"esri.symbol.PictureFillSymbol",type:"picturefillsymbol",xscale:1,yscale:1,xoffset:0,yoffset:0,constructor:function(d,a,b,e){d?
y.isString(d)?(this.url=d,void 0!==a&&(this.outline=a),void 0!==b&&(this.width=b),void 0!==e&&(this.height=e)):(this.xoffset=u.pt2px(d.xoffset),this.yoffset=u.pt2px(d.yoffset),this.width=u.pt2px(d.width),this.height=u.pt2px(d.height),a=d.imageData,9>c("ie")||!a||(b=this.url,this.url="data:"+(d.contentType||"image")+";base64,"+a,this.imageData=b)):(y.mixin(this,f),this.width=u.pt2px(this.width),this.height=u.pt2px(this.height))},setWidth:function(d){this.width=d;return this},setHeight:function(d){this.height=
d;return this},setOffset:function(d,a){this.xoffset=d;this.yoffset=a;return this},setUrl:function(d){d!==this.url&&(delete this.imageData,delete this.contentType);this.url=d;return this},setXScale:function(d){this.xscale=d;return this},setYScale:function(d){this.yscale=d;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return y.mixin({},u.defaultPattern,{src:this.url,width:this.width*this.xscale,height:this.height*this.yscale,x:this.xoffset,y:this.yoffset})},
getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var d=this.url,a=this.imageData;if(0===d.indexOf("data:")){var b=d;d=a;a=b.indexOf(";base64,")+8;a=b.substr(a)}!y.isString(d)||0!==d.indexOf("/")&&0!==d.indexOf("//")&&0!==d.indexOf("./")&&0!==d.indexOf("../")||(d=m.getAbsoluteUrl(d));b=u.px2pt(this.width);b=isNaN(b)?void 0:b;var e=u.px2pt(this.height);e=isNaN(e)?void 0:
e;var r=u.px2pt(this.xoffset);r=isNaN(r)?void 0:r;var t=u.px2pt(this.yoffset);t=isNaN(t)?void 0:t;d=l.fixJson(y.mixin(this.inherited("toJson",arguments),{type:"esriPFS",url:d,imageData:a,contentType:this.contentType,width:b,height:e,xoffset:r,yoffset:t,xscale:this.xscale,yscale:this.yscale}));d.imageData||delete d.imageData;return d}});B.defaultProps=f;c("extend-esri")&&(y.setObject("symbol.PictureFillSymbol",B,q),q.symbol.defaultPictureFillSymbol=f);return B})},"esri/symbols/TextSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Symbol ./Font".split(" "),
function(B,y,c,u,q,l,m,h,f){var d={type:"textsymbol",x:0,y:0,text:"",rotated:!1,kerning:!0,color:[0,0,0,1],font:u.defaultFont,angle:0,xoffset:0,yoffset:0,horizontalAlignment:"center"},a={start:"left",middle:"center",end:"right"},b={left:"start",center:"middle",right:"end",justify:"start"},e={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},r=document.createElement("canvas");B=B(h,{declaredClass:"esri.symbol.TextSymbol",angle:0,xoffset:0,yoffset:0,constructor:function(t,
g,k){y.mixin(this,d);this.font=new f(this.font);this.color=new m(this.color);t&&(y.isObject(t)?(y.mixin(this,t),this.color&&l.isDefined(this.color[0])&&(this.color=m.toDojoColor(this.color)),this.type="textsymbol",this.font=new f(this.font),this.xoffset=u.pt2px(this.xoffset),this.yoffset=u.pt2px(this.yoffset),this.angle&&(this.angle*=-1),this.haloSize&&(this.haloSize=u.pt2px(this.haloSize)),this.haloColor&&(this.haloColor=m.toDojoColor(this.haloColor))):(this.text=t,g&&(this.font=g),k&&(this.color=
k)));this.setAlign(this.align||this.getSVGAlign())},setFont:function(t){this.font=t;return this},setSize:function(t){this.font.size=t;return this},setAngle:function(t){this.angle=t;return this},setOffset:function(t,g){this.xoffset=t;this.yoffset=g;return this},setHaloColor:function(t){this.haloColor=t;return this},setHaloSize:function(t){this.haloSize=t;return this},setAlign:function(t){this.align=t;this.setHorizontalAlignment(t&&a[t.toLowerCase()]||"center");return this},setHorizontalAlignment:function(t){this.horizontalAlignment=
t;return this},getSVGAlign:function(){var t=this.horizontalAlignment;return t=t&&b[t.toLowerCase()]||"middle"},setVerticalAlignment:function(t){this.verticalAlignment=t;return this},getSVGBaseline:function(){var t=this.verticalAlignment;return t&&e[t.toLowerCase()]||"alphabetic"},getSVGBaselineShift:function(){return"bottom"===this.verticalAlignment?"super":null},setDecoration:function(t){this.decoration=t;this.font||this.setFont(new f);this.font.setDecoration(t);return this},setRotated:function(t){this.rotated=
t;return this},setKerning:function(t){this.kerning=t;return this},setText:function(t){this.text=t;return this},getStroke:function(){return null},getFill:function(){return this.color},getWidth:function(){var t=r&&r.getContext&&r.getContext("2d");if(t){var g=this.font;t.font=(g.style?g.style:u.defaultFont.style)+" "+(g.weight?g.weight:u.defaultFont.weight)+" "+(g.size?g.size:u.defaultFont.size)+"px "+(g.family?g.family:u.defaultFont.family);return t.measureText(this.text).width}t=this.getHeight();g=
0;var k;for(k=0;k<this.text.length;k++){var x=this.text.charAt(k);g=x==x.toUpperCase()?g+.7*t:g+.5*t}return g},getHeight:function(){return u.normalizedLength(this.font.size)},getShapeDescriptors:function(){var t=this.font;if(t){var g={};t.size&&(g.size=t.size);t.style&&(g.style=t.style);t.variant&&(g.variant=t.variant);t.decoration&&(g.decoration=t.decoration);t.weight&&(g.weight=t.weight);t.family&&(g.family=t.family)}return{defaultShape:{type:"text",text:this.text,x:0,y:this.getHeight()/4,align:"middle",
decoration:this.decoration||t&&t.decoration,rotated:this.rotated,kerning:this.kerning},font:g,fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var t=u.px2pt(this.xoffset),g=u.px2pt(this.yoffset),k=u.px2pt(this.haloSize);t=isNaN(t)?void 0:t;g=isNaN(g)?void 0:g;k=isNaN(k)?void 0:k;return l.fixJson(y.mixin(this.inherited("toJson",arguments),{type:"esriTS",backgroundColor:this.backgroundColor,borderLineColor:this.borderLineColor,borderLineSize:this.borderLineSize,haloSize:k,haloColor:this.haloColor&&
m.toJsonColor(this.haloColor),verticalAlignment:this.verticalAlignment,horizontalAlignment:this.horizontalAlignment,rightToLeft:this.rightToLeft,width:this.width,angle:this.angle&&-1*this.angle,xoffset:t,yoffset:g,text:this.text,rotated:this.rotated,kerning:this.kerning,font:this.font.toJson()}))}});y.mixin(B,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"});B.defaultProps=
d;c("extend-esri")&&(y.setObject("symbol.TextSymbol",B,q),q.symbol.defaultTextSymbol=d);return B})},"esri/symbols/Font":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang".split(" "),function(B,y,c,u,q,l){B=B(null,{declaredClass:"esri.symbol.Font",constructor:function(m,h,f,d,a){m?y.isObject(m)?y.mixin(this,m):(this.size=m,parseFloat(this.size)==this.size&&(this.size+="px"),void 0!==h&&(this.style=h),void 0!==f&&(this.variant=f),void 0!==d&&(this.weight=
d),void 0!==a&&(this.family=a)):y.mixin(this,u.defaultFont);parseFloat(this.size)==this.size&&(this.size+="pt");9>c("ie")&&this.size&&y.isString(this.size)&&-1<this.size.indexOf("em")&&(this.size=u.pt2px(12*parseFloat(this.size))+"px");this.size=this._convert2PxSize(this.size)},setSize:function(m){this.size=this._convert2PxSize(m);return this},_convert2PxSize:function(m){var h;parseFloat(m)==m?h=m:y.isString(m)&&(-1<m.indexOf("pt")?h=u.pt2px(parseFloat(m)):-1<m.indexOf("px")?h=parseFloat(m):-1<m.indexOf("em")?
h=u.pt2px(12*parseFloat(m)):-1<m.indexOf("%")&&(h=u.pt2px(.12*parseFloat(m))));return h},setStyle:function(m){this.style=m;return this},setVariant:function(m){this.variant=m;return this},setWeight:function(m){this.weight=m;return this},setFamily:function(m){this.family=m;return this},setDecoration:function(m){this.decoration=m;return this},toJson:function(){return l.fixJson({size:u.px2pt(this.size),style:this.style,decoration:this.decoration,weight:this.weight,family:this.family})}});y.mixin(B,{STYLE_NORMAL:"normal",
STYLE_ITALIC:"italic",STYLE_OBLIQUE:"oblique",VARIANT_NORMAL:"normal",VARIANT_SMALLCAPS:"small-caps",WEIGHT_NORMAL:"normal",WEIGHT_BOLD:"bold",WEIGHT_BOLDER:"bolder",WEIGHT_LIGHTER:"lighter"});c("extend-esri")&&y.setObject("symbol.Font",B,q);return B})},"esri/tasks/query":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel ../geometry/jsonUtils ./SpatialRelationship dojo/has!extend-esri?./QueryTask dojo/has!extend-esri?./RelationshipQuery dojo/has!extend-esri?./StatisticDefinition".split(" "),
function(B,y,c,u,q,l,m,h){var f=B(null,{declaredClass:"esri.tasks.Query",constructor:function(){this.spatialRelationship=f.SPATIAL_REL_INTERSECTS},text:null,where:"",geometry:null,groupByFieldsForStatistics:null,objectIds:null,returnGeometry:!1,returnCentroid:null,returnDistinctValues:!1,returnExceededLimitFeatures:null,maxRecordCountFactor:null,orderByFields:null,outSpatialReference:null,outFields:null,outStatistics:null,timeExtent:null,relationParam:null,pixelSize:null,distance:null,units:null,
resultOffset:null,resultRecordCount:null,resultType:null,cacheHint:null,sqlFormat:null,quantizationParameters:null,_units:{meters:"esriSRUnit_Meter",kilometers:"esriSRUnit_Kilometer",feet:"esriSRUnit_Foot",miles:"esriSRUnit_StatuteMile","nautical-miles":"esriSRUnit_NauticalMile","us-nautical-miles":"esriSRUnit_USNauticalMile"},toJson:function(d){var a={text:this.text,where:this.where,returnGeometry:this.returnGeometry,spatialRel:this.spatialRelationship,maxAllowableOffset:this.maxAllowableOffset,
geometryPrecision:this.geometryPrecision,sqlFormat:this.sqlFormat},b=d&&d.geometry||this.geometry,e=this.objectIds,r=this.outFields,t=this.outSpatialReference,g=this.groupByFieldsForStatistics,k=this.orderByFields,x=this.outStatistics;d=this.distance;b&&(a.geometry=b,a.geometryType=m.getJsonType(b),a.inSR=b.spatialReference.wkid||u.toJson(b.spatialReference.toJson()));e&&(a.objectIds=e.join(","));r&&(a.outFields=r.join(","));null!=this.returnCentroid&&(a.returnCentroid=this.returnCentroid);this.returnDistinctValues&&
(a.returnDistinctValues=!0);null!=this.returnExceededLimitFeatures&&(a.returnExceededLimitFeatures=this.returnExceededLimitFeatures);null!=this.maxRecordCountFactor&&(a.maxRecordCountFactor=this.maxRecordCountFactor);g&&(a.groupByFieldsForStatistics=g.join(","));k&&(a.orderByFields=k.join(","));if(x){var v=[];c.forEach(x,function(A){v.push(A.toJson())});a.outStatistics=u.toJson(v)}t?a.outSR=t.wkid||u.toJson(t.toJson()):b&&(a.outSR=b.spatialReference.wkid||u.toJson(b.spatialReference.toJson()));b=
this.timeExtent;a.time=b?b.toJson().join(","):null;(b=this.relationParam)&&this.spatialRelationship===f.SPATIAL_REL_RELATION&&(a.relationParam=b);d&&(a.distance=this.distance,this.hasOwnProperty("units")?a.units=this._units[this.units]||this._units.meters:(console.warn("esri/tasks/query::no distance unit provided, defaulting to meters"),a.units=this._units.meters));this.hasOwnProperty("start")&&(a.resultOffset=this.start,a.resultRecordCount=10,""===a.where&&(a.where="1\x3d1"));this.hasOwnProperty("num")&&
(a.resultRecordCount=this.num);a.resultType=this.resultType;null!=this.cacheHint&&(a.cacheHint=this.cacheHint);a.pixelSize=this.pixelSize?u.toJson(this.pixelSize.toJson()):null;a.multipatchOption=this.multipatchOption;this.quantizationParameters&&(a.quantizationParameters=u.toJson(this.quantizationParameters));a._ts=this._ts;return a}});y.mixin(f,h);q("extend-esri")&&y.setObject("tasks.Query",f,l);return f})},"esri/tasks/SpatialRelationship":function(){define(["dojo/_base/lang","dojo/has","../kernel"],
function(B,y,c){var u={SPATIAL_REL_INTERSECTS:"esriSpatialRelIntersects",SPATIAL_REL_CONTAINS:"esriSpatialRelContains",SPATIAL_REL_CROSSES:"esriSpatialRelCrosses",SPATIAL_REL_ENVELOPEINTERSECTS:"esriSpatialRelEnvelopeIntersects",SPATIAL_REL_INDEXINTERSECTS:"esriSpatialRelIndexIntersects",SPATIAL_REL_OVERLAPS:"esriSpatialRelOverlaps",SPATIAL_REL_TOUCHES:"esriSpatialRelTouches",SPATIAL_REL_WITHIN:"esriSpatialRelWithin",SPATIAL_REL_RELATION:"esriSpatialRelRelation"};y("extend-esri")&&B.setObject("tasks._SpatialRelationship",
u,c);return u})},"esri/plugins/popupManager":function(){define(["../PopupManager"],function(B){return{add:function(y,c){y.popupManager||(y.popupManager=new B(c),y.popupManager.setMap(y))},remove:function(y){var c=y.popupManager;c&&(c.unsetMap(),y.popupManager=void 0)}}})},"esri/PopupManager":function(){define("./geometry/Extent ./geometry/ScreenPoint ./kernel ./layerUtils ./tasks/query dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/_base/lang esri/sniff dojo/on dojo/promise/all dojo/Stateful require".split(" "),
function(B,y,c,u,q,l,m,h,f,d,a,b,e,r,t){var g;h=h(r,{declaredClass:"esri.PopupManager",enabled:!1,map:null,_mapClickHandle:null,_featureLayersCache:{},constructor:function(k){this._mapClickHandler=d.hitch(this,this._mapClickHandler)},setMap:function(k){if(this.map)if(k!==this.map)this.unsetMap();else return;this.map=k;this._setupClickHandler()},unsetMap:function(){this.map&&(this.map=null);this._mapClickHandle&&(this._mapClickHandle.remove(),this._mapClickHandle=null)},getMapLayer:function(k){var x;
if(k&&(x=k.getLayer())&&(k=x.id,this._featureLayersCache[k])){var v=k.lastIndexOf("_");-1<v&&(k=k.substring(0,v),x=this.map.getLayer(k))}return x},_enabledSetter:function(k){this.enabled=k;this._setupClickHandler()},_setupClickHandler:function(){this._mapClickHandle&&(this._mapClickHandle.remove(),this._mapClickHandle=null);this.enabled&&this.map&&(this._mapClickHandle=this.map.on("click",this._mapClickHandler))},_mapClickHandler:function(k){var x=this.map.infoWindow,v=k.graphic;x&&this.map.loaded&&
(x.clearFeatures&&x.setFeatures?this._showPopup(k):v&&v.getInfoTemplate()&&this._showInfoWindow(v,k.mapPoint))},_showPopup:function(k){var x=this.map,v=x.infoWindow,A=this,n=[],w=[x.graphics].concat(m.map(x.graphicsLayerIds,x.getLayer,x));m.forEach(w,function(C){var G=C.getFeatureReduction&&C.getFeatureReduction();C&&C.loaded&&C.infoTemplate&&!C.suspended&&(!G||!A._isReductionEnabled(C)||G.infoTemplate&&!G.disablePopup)&&n.push(C)});var p=[];m.forEach(x.layerIds,function(C){(C=x.getLayer(C))&&C.loaded&&
!C.suspended&&(A._isImageServiceLayer(C)&&C.infoTemplate?n.push(C):"esri.layers.WMSLayer"===C.declaredClass&&C.getFeatureInfoURL?n.push(C):"esri.layers.ArcGISDynamicMapServiceLayer"!==C.declaredClass&&"esri.layers.ArcGISTiledMapServiceLayer"!==C.declaredClass||!C.infoTemplates||p.push(C))});var D=x.getResolutionForPopup();this._getSubLayerFeatureLayers(p,D).then(function(C){n=n.concat(C);C=k.graphic&&k.graphic.getParentGraphic()||k.graphic;var G=null;C&&C.getInfoTemplate()&&!A._isImageServiceLayer(C.getLayer())&&
(G=C);if(n.length||G){var z=A._calculateClickTolerance(n),E=k.screenPoint;C=x.toMap(new y(E.x-z,E.y+z));z=x.toMap(new y(E.x+z,E.y-z));var H=new B(C.x,C.y,z.x,z.y,x.spatialReference);if(H=H.intersects(x.extent)){var I=new q,M=!!G,T=!0;C=m.map(n,function(Y){I.timeExtent=Y.useMapTime?x.timeExtent:null;var fa=A._isReductionEnabled(Y);Y=fa?Y.getFeatureReductionLayer():Y;var ca=A._featureLayersCache[Y.id];if(A._isImageServiceLayer(Y)){I.geometry=k.mapPoint;T=!1;var X={rasterAttributeTableFieldPrefix:"Raster.",
returnDomainValues:!0};A._isTiledImageServiceLayer(Y)?X=Y.fetchPopupFromTiles(I):(X=Y.queryVisibleRasters(I,X),X.addCallback(function(){var ma=Y.getVisibleRasters();M=M||0<ma.length;return ma}))}else if("esri.layers.WMSLayer"===Y.declaredClass){X=new f;var ea=Y._getPopupGraphic(x,k.screenPoint);ea?(X.resolve([ea]),M=!0):X.resolve([])}else ca||"function"===typeof Y.queryFeatures&&(0===Y.currentMode||1===Y.currentMode)?(I.geometry=H,X=Y.queryFeatures(I),X.addCallback(function(ma){var wa=[];m.forEach(ma.features,
function(P){P.visible&&(wa.push(P),ca&&P.setResolution(D))});M=M||0<wa.length;return wa})):(X=new f,ea=m.filter(Y.graphics,function(ma){return ma&&ma.visible&&H.intersects(ma.geometry)}),fa&&A._isParentLayer(Y,G)&&(fa=A._findGraphicById(ea,G,"cluster_id"))&&(G=fa),M=M||0<ea.length,X.resolve(ea));return X});G&&(z=new f,z.resolve([G]),C.unshift(z));m.some(C,function(Y){return!Y.isFulfilled()})||M?(v.setFeatures(C),v.show(k.mapPoint,{closestFirst:T})):(v.hide(),v.clearFeatures())}}})},_getSubLayerFeatureLayers:function(k,
x,v){x=x||null;var A=v||new f,n=[];v=k.length;var w=this.map.getScale(),p=!1,D=this,C=0;a:for(;C<v;C++){var G=k[C],z=G.dynamicLayerInfos||G.layerInfos;if(z){var E=null;G._params&&(G._params.layers||G._params.dynamicLayers)&&(E=G.visibleLayers);E=u._getVisibleLayers(z,E);for(var H=u._getLayersForScale(w,z),I=z.length,M=0;M<I;M++){var T=z[M],Y=T.id,fa=G.infoTemplates[Y];if(!T.subLayerIds&&fa&&fa.infoTemplate&&-1<m.indexOf(E,Y)&&-1<m.indexOf(H,Y)){if(!g){p=!0;break a}var ca=G.id+"_"+Y,X=this._featureLayersCache[ca];
X&&X.loadError||(X||((X=fa.layerUrl)||(X=T.source?this._getLayerUrl(G.url,"/dynamicLayer"):this._getLayerUrl(G.url,Y)),X=new g(X,{parentLayer:G,id:ca,drawMode:!1,mode:g.MODE_SELECTION,outFields:this._getOutFields(fa.infoTemplate),resourceInfo:fa.resourceInfo,source:T.source}),this._featureLayersCache[ca]=X),X.setDefinitionExpression(G.layerDefinitions&&G.layerDefinitions[Y]),X.setGDBVersion(G.gdbVersion),X.setInfoTemplate(fa.infoTemplate),X.setMaxAllowableOffset(x),X.setUseMapTime(!!G.useMapTime),
G.layerDrawingOptions&&G.layerDrawingOptions[Y]&&G.layerDrawingOptions[Y].renderer&&X.setRenderer(G.layerDrawingOptions[Y].renderer),n.push(X))}}}}if(p){var ea=new f;t(["./layers/FeatureLayer"],function(wa){g=wa;ea.resolve()});ea.then(function(){D._getSubLayerFeatureLayers(k,x,A)})}else{var ma=[];m.forEach(n,function(wa){if(!wa.loaded){var P=new f;b.once(wa,"load, error",function(){P.resolve()});ma.push(P.promise)}});ma.length?e(ma).then(function(){n=m.filter(n,function(wa){return!wa.loadError&&wa.isVisibleAtScale(w)});
A.resolve(n)}):(n=m.filter(n,function(wa){return wa.isVisibleAtScale(w)}),A.resolve(n))}return A.promise},_getLayerUrl:function(k,x){var v=k.indexOf("?");return-1===v?k+"/"+x:k.substring(0,v)+"/"+x+k.substring(v)},_getOutFields:function(k){var x=k.info&&k.info.fieldInfos;if(x&&x.length&&"esri.dijit.PopupTemplate"===k.declaredClass){var v=[];m.forEach(x,function(A){var n=A.fieldName&&A.fieldName.toLowerCase();n&&"shape"!==n&&0!==n.indexOf("relationships/")&&v.push(A.fieldName)})}else v=["*"];return v},
_calculateClickTolerance:function(k){var x=a("esri-touch")?9:6,v,A;m.forEach(k,function(n){if(v=n.renderer)"esri.renderer.SimpleRenderer"===v.declaredClass?((A=v.symbol)&&A.xoffset&&(x=Math.max(x,Math.abs(A.xoffset))),A&&A.yoffset&&(x=Math.max(x,Math.abs(A.yoffset)))):"esri.renderer.UniqueValueRenderer"!==v.declaredClass&&"esri.renderer.ClassBreaksRenderer"!==v.declaredClass||m.forEach(v.infos,function(w){(A=w.symbol)&&A.xoffset&&(x=Math.max(x,Math.abs(A.xoffset)));A&&A.yoffset&&(x=Math.max(x,Math.abs(A.yoffset)))})});
return x},_showInfoWindow:function(k,x){var v=this.map.infoWindow,A=k.geometry;x=A&&"point"===A.type?A:x;A=k.getContent();v.setTitle(k.getTitle());A&&d.isString(A.id)&&(k=l.byId(A.id))&&k.set&&/_PopupRenderer/.test(k.declaredClass)&&k.set("showTitle",!1);v.setContent(A);v.show(x)},_findGraphicById:function(k,x,v){var A,n=(x=x.attributes)&&x[v];m.some(k,function(w){var p=w.attributes;p&&p[v]===n&&(A=w);return!!A});return A},_isParentLayer:function(k,x){x=x&&x.getLayer();return k&&x===k},_isReductionEnabled:function(k){return k&&
k.isFeatureReductionActive&&k.isFeatureReductionActive()},_isImageServiceLayer:function(k){return"esri.layers.ArcGISImageServiceLayer"===k.declaredClass||"esri.layers.ArcGISImageServiceVectorLayer"===k.declaredClass||"esri.layers.RasterXLayer"===k.declaredClass},_isTiledImageServiceLayer:function(k){return"esri.layers.RasterXLayer"===k.declaredClass}});a("extend-esri")&&(c.PopupManager=h);return h})},"esri/layerUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has",
"./kernel"],function(B,y,c,u,q){var l={_serializeLayerDefinitions:function(m,h){var f=[],d=/[:;]/;if(m&&(y.forEach(m,function(b,e){b&&(f.push([e,b]),!h&&d.test(b)&&(h=!0))}),0<f.length)){if(h){var a={};y.forEach(f,function(b){a[b[0]]=b[1]});a=c.toJson(a)}else a=[],y.forEach(f,function(b){a.push(b[0]+":"+b[1])}),a=a.join(";");return a}return null},_serializeTimeOptions:function(m,h){if(m){var f=[];y.forEach(m,function(d,a){d&&(d=d.toJson(),h&&-1!==y.indexOf(h,a)&&(d.useTime=!1),f.push('"'+a+'":'+c.toJson(d)))});
if(f.length)return"{"+f.join(",")+"}"}},_getVisibleLayers:function(m,h){var f=[],d;if(!m)return f;if(h)for(f=h.concat(),d=0;d<m.length;d++){h=m[d];var a=y.indexOf(m,h.id);h.subLayerIds&&-1<a&&(f.splice(a,1),f=f.concat(h.subLayerIds))}else f=this._getDefaultVisibleLayers(m);return f},_getDefaultVisibleLayers:function(m){var h=[],f;if(!m)return h;for(f=0;f<m.length;f++)0<=m[f].parentLayerId&&-1===y.indexOf(h,m[f].parentLayerId)&&y.some(m,function(d){return d.id===m[f].parentLayerId})||m[f].defaultVisibility&&
h.push(m[f].id);return h},_getLayersForScale:function(m,h){var f=[];if(0<m&&h){var d;for(d=0;d<h.length;d++)if(!(0<=h[d].parentLayerId&&-1===y.indexOf(f,h[d].parentLayerId)&&y.some(h,function(r){return r.id===h[d].parentLayerId}))&&0<=h[d].id){var a=!0,b=h[d].maxScale,e=h[d].minScale;if(0<b||0<e)0<b&&0<e?a=b<=m&&m<=e:0<b?a=b<=m:0<e&&(a=m<=e);a&&f.push(h[d].id)}}return f}};u("extend-esri")&&B.mixin(q,l);return l})},"esri/MapNavigationManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/event dojo/mouse dojo/keys dijit/focus ./kernel ./MouseEvents ./TouchEvents ./PointerEvents ./config ./sniff ./lang ./fx ./graphic ./tileUtils ./geometry/ScreenPoint ./geometry/Extent ./geometry/Rect ./geometry/mathUtils ./symbols/SimpleFillSymbol".split(" "),
function(B,y,c,u,q,l,m,h,f,d,a,b,e,r,t,g,k,x,v,A,n,w,p){var D=u.connect,C=u.disconnect,G=r("chrome"),z=r("safari"),E=[m.NUMPAD_PLUS,61,187,m.NUMPAD_MINUS,173,189,m.UP_ARROW,m.NUMPAD_8,m.RIGHT_ARROW,m.NUMPAD_6,m.DOWN_ARROW,m.NUMPAD_2,m.LEFT_ARROW,m.NUMPAD_4,m.PAGE_UP,m.NUMPAD_9,m.PAGE_DOWN,m.NUMPAD_3,m.END,m.NUMPAD_1,m.HOME,m.NUMPAD_7];B=B(null,{declaredClass:"esri.MapNavigationManager",eventModel:"",constructor:function(H,I){this.map=H;y.mixin(this,I);I=H.__container;r("esri-pointer")?(this.pointerEvents=
new b(I,{map:H}),this.eventModel="pointer"):r("esri-touch")?(r("ios")||(this.mouseEvents=new d(I,{map:H})),this.touchEvents=new a(I,{map:H,mouseEvents:this.mouseEvents}),this.eventModel="touch"):(this.mouseEvents=new d(I,{map:H}),this.eventModel="mouse");this._zoomRect=new k(null,new p(e.defaults.map.zoomSymbol));this._keyDx=this._keyDy=0;this._adjustPinch=y.hitch(this,this._adjustPinch);this._adjustPinchEnd=y.hitch(this,this._adjustPinchEnd)},_panInit:function(H){var I=this.mouseEvents;l.isLeft(H)&&
this.map.isPan&&!H.shiftKey&&(this._dragOrigin=new v(0,0),y.mixin(this._dragOrigin,H.screenPoint),C(this._panStartHandle),C(this._panHandle),C(this._panEndHandle),this._panStartHandle=D(I,"onMouseDragStart",this,this._panStart),this._panHandle=D(I,"onMouseDrag",this,this._pan),this._panEndHandle=D(I,"onMouseUp",this,this._panEnd),G||z)&&(H.preventDefault(),h.curNode&&h.curNode.blur())},_panStart:function(H){this.map.setCursor("move");this.map.__panStart(H.screenPoint.x,H.screenPoint.y)},_pan:function(H){this.map.__pan(H.screenPoint.x-
this._dragOrigin.x,H.screenPoint.y-this._dragOrigin.y)},_panEnd:function(H){C(this._panStartHandle);C(this._panHandle);C(this._panEndHandle);this._panStartHandle=this._panHandle=this._panEndHandle=null;var I=this.map;I.__panning&&(I.__panEnd(H.screenPoint.x-this._dragOrigin.x,H.screenPoint.y-this._dragOrigin.y),I.resetMapCursor())},_zoomInit:function(H){var I=this.map,M=this.pointerEvents||this.mouseEvents;(l.isLeft(H)||H.pointerType)&&I.isRubberBandZoom&&H.shiftKey&&(I.setCursor("crosshair"),this._dragOrigin=
y.mixin({},H.screenPoint),this._zoomDir=H.ctrlKey||H.metaKey?-1:1,this.pointerEvents?(this._zoomHandle=D(M,"onSwipeMove",this,this._zoom),this._zoomEndHandle=D(M,"onSwipeEnd",this,this._zoomEnd)):(this._zoomHandle=D(M,"onMouseDrag",this,this._zoom),this._zoomEndHandle=D(M,"onMouseUp",this,this._zoomEnd)),G&&H.preventDefault())},_zoom:function(H){var I=this.map,M=this._normalizeRect(H).offset(I.__visibleRect.x,I.__visibleRect.y);H=I.graphics;var T=this._zoomRect;T.geometry||I.setCursor("crosshair");
T.geometry&&H.remove(T,!0);var Y=I.toMap(new v(M.x,M.y));M=I.toMap(new v(M.x+M.width,M.y+M.height));M=new n(Y.x,Y.y,M.x-Y.x,Y.y-M.y,I.spatialReference);M._originOnly=!0;T.setGeometry(M);H.add(T,!0)},_zoomEnd:function(H){var I=this._zoomRect,M=this.map,T=M.extent,Y=M.spatialReference;C(this._zoomHandle);C(this._zoomEndHandle);this._zoomHandle=this._zoomEndHandle=null;if(M._canZoom(this._zoomDir)&&I.getDojoShape()){M.graphics.remove(I);I.geometry=null;H=this._normalizeRect(H);H.x+=M.__visibleRect.x;
H.y+=M.__visibleRect.y;if(-1===this._zoomDir){var fa=T.getWidth();H=(fa*M.width/H.width-fa)/2;Y=new A(T.xmin-H,T.ymin-H,T.xmax+H,T.ymax+H,Y)}else T=M.toMap({x:H.x,y:H.y+H.height}),H=M.toMap({x:H.x+H.width,y:H.y}),Y=new A(T.x,T.y,H.x,H.y,Y);M._extentUtil(null,null,Y)}I.getDojoShape()&&M.graphics.remove(I,!0);this._zoomDir=0;M.resetMapCursor()},_wheelZoom:function(H,I){var M=this.map;if(!I){if(M.smartNavigation&&!H.shiftKey&&!M._isPanningOrZooming()){M.disableScrollWheelZoom();this._setScrollWheelPan(!0);
this._wheelPan(H);return}I=H.timeStamp;if(!t.isDefined(I)||0>=I)I=(new Date).getTime();if(100>(this._mwts?I-this._mwts:I))return;this._mwts=I}M._canZoom(H.value)&&M._extentUtil({numLevels:H.value,mapAnchor:H.mapPoint,screenAnchor:H.screenPoint})},_wheelPan:function(H){var I=this.map;if(H.shiftKey&&!I._isPanningOrZooming())this._setScrollWheelPan(!1),I.enableScrollWheelZoom(),this._wheelZoom(H);else{var M=0,T=0;r("ff")?H.axis===H.HORIZONTAL_AXIS?M=-H.detail:T=-H.detail:(M=H.wheelDeltaX,T=H.wheelDeltaY);
I.translate(M,T)}},_setScrollWheelPan:function(H){this.map.isScrollWheelPan=H;this.mouseEvents&&this.mouseEvents.enableMouseWheel(H);C(this._mwMacHandle);this._mwMacHandle=null;H&&(this._mwMacHandle=D(this.mouseEvents||this.pointerEvents,"onMouseWheel",this,this._wheelPan))},_recenter:function(H){H.shiftKey&&!this.map._isPanningOrZooming()&&this.map.centerAt(H.mapPoint)},_recenterZoom:function(H){H.shiftKey&&!this.map._isPanningOrZooming()&&(H.value=H.ctrlKey||H.metaKey?-1:1,this._wheelZoom(H,!0))},
_dblClickZoom:function(H){this.map._isPanningOrZooming()||(H.value=1,this._wheelZoom(H,!0))},_twoFingerTap:function(H){this.map._isPanningOrZooming()||(H.value=-1,this._wheelZoom(H,!0))},_keyDown:function(H){var I=H.keyCode,M=this.map;if(-1!==c.indexOf(E,I)){if(I===m.NUMPAD_PLUS||61===I||187===I)M._extentUtil({numLevels:1});else if(I===m.NUMPAD_MINUS||173===I||189===I)M._extentUtil({numLevels:-1});else{M.__panning||M.__panStart(0,0);switch(I){case m.UP_ARROW:case m.NUMPAD_8:this._keyDy+=10;break;
case m.RIGHT_ARROW:case m.NUMPAD_6:this._keyDx-=10;break;case m.DOWN_ARROW:case m.NUMPAD_2:this._keyDy-=10;break;case m.LEFT_ARROW:case m.NUMPAD_4:this._keyDx+=10;break;case m.PAGE_UP:case m.NUMPAD_9:this._keyDx-=10;this._keyDy+=10;break;case m.PAGE_DOWN:case m.NUMPAD_3:this._keyDx-=10;this._keyDy-=10;break;case m.END:case m.NUMPAD_1:this._keyDx+=10;this._keyDy-=10;break;case m.HOME:case m.NUMPAD_7:this._keyDx+=10;this._keyDy+=10;break;default:return}M.__pan(this._keyDx,this._keyDy)}q.stop(H)}},_keyEnd:function(H){var I=
this.map;I.__panning&&H.keyCode!==m.SHIFT&&(I.__panEnd(this._keyDx,this._keyDy),this._keyDx=this._keyDy=0)},_swipeInit:function(H){var I=this.map;I=I._zoomAnim||I._panAnim;if(H.shiftKey)return!1;I&&I._active&&(I.stop(),I._fire("onEnd",[I.node]));this._dragOrigin=new v(0,0);y.mixin(this._dragOrigin,H.screenPoint);C(this._swipeHandle);C(this._swipeEndHandle);this._swipeHandle=D(this.touchEvents||this.pointerEvents,"onSwipeMove",this,this._swipe);this._swipeEndHandle=D(this.touchEvents||this.pointerEvents,
"onSwipeEnd",this,this._swipeEnd)},_swipe:function(H){var I=this.map;I.__panning?(this._panX=H.screenPoint.x,this._panY=H.screenPoint.y,I.__pan(H.screenPoint.x-this._dragOrigin.x,H.screenPoint.y-this._dragOrigin.y)):(I.setCursor("move"),I.__panStart(H.screenPoint.x,H.screenPoint.y))},_swipeEnd:function(H){C(this._swipeHandle);C(this._swipeEndHandle);this._swipeHandle=this._swipeEndHandle=null;var I=this.map;I.__panning&&(I.resetMapCursor(),I.__panEnd(H.screenPoint.x-this._dragOrigin.x,H.screenPoint.y-
this._dragOrigin.y))},_pinchInit:function(H){var I=this.map,M=I._zoomAnim||I._panAnim;M&&M._active?(M.stop(),M._fire("onEnd",[M.node])):I.__panning&&(H.screenPoint=new v(this._panX,this._panY),H.mapPoint=I.toMap(H.screenPoint),this._swipeEnd(H));C(this._pinchHandle);C(this._pinchEndHandle);this._pinchHandle=D(this.touchEvents||this.pointerEvents,"onPinchMove",this,this._pinch);this._pinchEndHandle=D(this.touchEvents||this.pointerEvents,"onPinchEnd",this,this._pinchEnd)},_pinch:function(H){var I=this.map;
if(H.screenPoints){this.currLength=w.getLength(H.screenPoints[0],H.screenPoints[1]);if(I.__zooming){var M=this.currLength/this._length;this._zoomStartExtent=this.__scaleExtent(I.extent,M,this._dragOrigin);I.__zoom(this._zoomStartExtent,M,this._dragOrigin)}else this._dragOrigin=new v((H.screenPoints[0].x+H.screenPoints[1].x)/2,(H.screenPoints[0].y+H.screenPoints[1].y)/2),this._length=this.currLength,I.__zoomStart(I.extent,this._dragOrigin);this._pinchScale=M;I._fireOnScale(this.currLength/this._length,
this._dragOrigin,!0)}},_pinchEnd:function(H){H=this.map;C(this._pinchHandle);C(this._pinchEndHandle);this._pinchHandle=this._pinchEndHandle=null;this._pinchScale=0;if(H.__zooming&&null===H._zoomAnim){var I=this.currLength/this._length,M=H.extent.getWidth();this._zoomAnimAnchor=H.toMap(this._dragOrigin);this._zoomStartExtent=this.__scaleExtent(H.extent,1/I,this._zoomAnimAnchor);if(H.__tileInfo){var T=x.getCandidateTileInfo(H,H.__tileInfo,this._zoomStartExtent),Y=H.__getExtentForLevel(T.lod.level,this._zoomAnimAnchor),
fa=H.getMinZoom(),ca=H.getMaxZoom(),X=Y.extent;Y=Y.lod;var ea=M/X.getWidth(),ma=T.lod.level;1>I?ea>I&&ma--:ea<I&&ma++;ma<fa?ma=fa:ma>ca&&(ma=ca);ma!==T.lod.level&&(Y=H.__getExtentForLevel(ma,this._zoomAnimAnchor),X=Y.extent,Y=Y.lod);this._zoomEndExtent=X;this._zoomEndLod=Y;H._zoomAnim=g.animateRange({range:{start:M/this._zoomStartExtent.getWidth(),end:ea},duration:e.defaults.map.zoomDuration,rate:e.defaults.map.zoomRate,onAnimate:this._adjustPinch,onEnd:this._adjustPinchEnd});H._zoomAnim.play();H._fireOnScale(H.extent.getWidth()/
this._zoomEndExtent.getWidth(),this._dragOrigin)}else this._zoomEndExtent=this._zoomStartExtent,H._fireOnScale(H.extent.getWidth()/this._zoomEndExtent.getWidth(),this._dragOrigin),this._adjustPinchEnd()}},_adjustPinch:function(H){var I=this.__scaleExtent(this.map.extent,H,this._zoomAnimAnchor);this.map.__zoom(I,H,this._dragOrigin)},_adjustPinchEnd:function(){var H=this.map,I=H.extent.getWidth()/this._zoomEndExtent.getWidth(),M=this.__scaleExtent(H.extent,1/I,this._zoomAnimAnchor),T=this._dragOrigin,
Y=this._zoomEndLod;this._zoomStartExtent=this._zoomEndExtent=this._zoomEndLod=this._dragOrigin=H._zoomAnim=this._zoomAnimAnchor=null;H.__zoomEnd(M,I,T,Y,!0)},__scaleExtent:function(H,I,M){M=M||H.getCenter();I=H.expand(I);var T=H.xmin-(I.getWidth()-H.getWidth())*(M.x-H.xmin)/H.getWidth();M=H.ymax-(I.getHeight()-H.getHeight())*(M.y-H.ymax)/H.getHeight();return new A(T,M-I.getHeight(),T+I.getWidth(),M,H.spatialReference)},_normalizeRect:function(H){H=H.screenPoint;var I=this._dragOrigin.x,M=this._dragOrigin.y;
H=new n((H.x<I?H.x:I)-this.map.__visibleRect.x,(H.y<M?H.y:M)-this.map.__visibleRect.y,Math.abs(H.x-I),Math.abs(H.y-M));delete H.spatialReference;0===H.width&&(H.width=1);0===H.height&&(H.height=1);return H},setImmediateClick:function(H){switch(this.eventModel){case "mouse":this.mouseEvents.setImmediateClick(H);break;case "touch":this.touchEvents.setImmediateTap(H);this.mouseEvents&&this.mouseEvents.setImmediateClick(H);break;case "pointer":this.pointerEvents.setImmediateTap(H)}},enablePan:function(){this.disablePan();
switch(this.eventModel){case "mouse":this._panInitHandle=D(this.mouseEvents,"onMouseDown",this,this._panInit);break;case "touch":this._panInitHandle=D(this.mouseEvents,"onMouseDown",this,this._panInit);this._swipeInitHandle=D(this.touchEvents,"onSwipeStart",this,this._swipeInit);break;case "pointer":this._swipeInitHandle=D(this.pointerEvents,"onSwipeStart",this,this._swipeInit)}},disablePan:function(){C(this._panInitHandle);this._panInitHandle=null;C(this._swipeInitHandle);this._swipeInitHandle=null},
enableRubberBandZoom:function(){this.disableRubberBandZoom();this._zoomInitHandle=this.pointerEvents?D(this.pointerEvents,"onSwipeStart",this,this._zoomInit):D(this.mouseEvents,"onMouseDown",this,this._zoomInit)},disableRubberBandZoom:function(){C(this._zoomInitHandle);this._zoomInitHandle=null},enablePinchZoom:function(){this.disablePinchZoom();if("touch"===this.eventModel||"pointer"===this.eventModel)this._pinchInitHandle=D(this.touchEvents||this.pointerEvents,"onPinchStart",this,this._pinchInit)},
disablePinchZoom:function(){C(this._pinchInitHandle);this._pinchInitHandle=null},enableScrollWheelZoom:function(){this.disableScrollWheelZoom();this._wheelHandle=D(this.mouseEvents||this.pointerEvents,"onMouseWheel",this,this._wheelZoom)},disableScrollWheelZoom:function(){C(this._wheelHandle);this._wheelHandle=null},enableScrollWheelPan:function(){var H=this.map;H&&H.loaded&&H.smartNavigation&&(this.disableScrollWheelPan(),this._setScrollWheelPan(!0))},disableScrollWheelPan:function(){var H=this.map;
H&&H.loaded&&H.smartNavigation&&this._setScrollWheelPan(!1)},enableDoubleClickZoom:function(){this.disableDoubleClickZoom();switch(this.eventModel){case "mouse":this._dblClickHandle=D(this.mouseEvents,"onDblClick",this,this._dblClickZoom);break;case "touch":this._dblClickHandle=D(this.mouseEvents,"onDblClick",this,this._dblClickZoom);this._dblTapHandle=D(this.touchEvents,"onDoubleTap",this,this._dblClickZoom);this._zoomOutHandle=D(this.touchEvents,"onTwoFingerTap",this,this._twoFingerTap);break;case "pointer":this._dblTapHandle=
D(this.pointerEvents,"onDoubleTap",this,this._dblClickZoom),this._zoomOutHandle=D(this.pointerEvents,"onTwoFingerTap",this,this._twoFingerTap)}},disableDoubleClickZoom:function(){C(this._dblClickHandle);C(this._zoomOutHandle);this._dblTapHandle&&C(this._dblTapHandle);this._dblClickHandle=this._zoomOutHandle=this._dblTapHandle=null},enableShiftDoubleClickZoom:function(){this.disableShiftDoubleClickZoom();this._sDblClickHandle=D(this.pointerEvents||this.mouseEvents,"onDblClick",this,this._recenterZoom)},
disableShiftDoubleClickZoom:function(){C(this._sDblClickHandle);this._sDblClickHandle=null},enableClickRecenter:function(){this.disableClickRecenter();this._recenterHandle=D(this.pointerEvents||this.mouseEvents,"onClick",this,this._recenter)},disableClickRecenter:function(){C(this._recenterHandle);this._recenterHandle=null},enableKeyboardNavigation:function(){this.disableKeyboardNavigation();this._keyHandle=D(this.pointerEvents||this.mouseEvents,"onKeyDown",this,this._keyDown);this._keyEndHandle=
D(this.pointerEvents||this.mouseEvents,"onKeyUp",this,this._keyEnd)},disableKeyboardNavigation:function(){C(this._keyHandle);C(this._keyEndHandle);this._keyHandle=this._keyEndHandle=null},enableScrollWheel:function(){var H=this.map;H&&(H.smartNavigation?this.enableScrollWheelPan():H.enableScrollWheelZoom())},disableScrollWheel:function(){var H=this.map;H&&(H.disableScrollWheelZoom(),H.smartNavigation&&this.disableScrollWheelPan())},enableNavigation:function(){var H=this.map;H&&H.loaded&&(H._evalNavigationFeature("DoubleClickZoom"),
H._evalNavigationFeature("ClickRecenter"),H._evalNavigationFeature("Pan"),H._evalNavigationFeature("RubberBandZoom"),H._evalNavigationFeature("PinchZoom"),H._evalNavigationFeature("KeyboardNavigation"),H._evalNavigationFeature("ScrollWheel"))},disableNavigation:function(){var H=this.map;H&&H.loaded&&(H._evalNavigationFeature("DoubleClickZoom"),H._evalNavigationFeature("ClickRecenter"),H._evalNavigationFeature("Pan"),H._evalNavigationFeature("RubberBandZoom"),H._evalNavigationFeature("PinchZoom"),
H._evalNavigationFeature("KeyboardNavigation"),H._evalNavigationFeature("ScrollWheel"))},destroy:function(){this.touchEvents&&this.touchEvents.destroy();this.mouseEvents&&this.mouseEvents.destroy();this.pointerEvents&&this.pointerEvents.destroy();var H,I=[this._panInitHandle,this._panStartHandle,this._panHandle,this._panEndHandle,this._zoomInitHandle,this._zoomHandle,this._zoomEndHandle,this._wheelHandle,this._mwMacHandle,this._dblClickHandle,this._zoomOutHandle,this._recenterHandle,this._sDblClickHandle,
this._dblTapHandle,this._keyHandle,this._keyEndHandle,this._swipeInitHandle,this._swipeHandle,this._swipeEndHandle,this._pinchInitHandle,this._pinchHandle,this._pinchEndHandle];for(H=0;H<I.length;H++)C(I[H]);this.map=this.touchEvents=this.mouseEvents=this.eventModel=this.pointerEvents=this._zoomRect=this._dragOrigin=this._panInitHandle=this._panStartHandle=this._panHandle=this._panEndHandle=this._zoomInitHandle=this._zoomHandle=this._zoomEndHandle=this._wheelHandle=this._mwMacHandle=this._dblClickHandle=
this._zoomOutHandle=this._recenterHandle=this._sDblClickHandle=this._dblTapHandle=this._keyHandle=this._keyEndHandle=this._swipeInitHandle=this._swipeHandle=this._swipeEndHandle=this._pinchInitHandle=this._pinchHandle=this._pinchEndHandle=null}});r("extend-esri")&&(f.MapNavigationManager=B);return B})},"esri/MouseEvents":function(){define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/_base/sniff dojo/_base/connect dojo/_base/event ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),
function(B,y,c,u,q,l,m,h,f,d){var a=q.connect,b=q.disconnect;B=B([h],{declaredClass:"esri.MouseEvents",doubleClickDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:-1!==u("mac")?1:3,wheelDivisor:2>u("chrome")?360:120,preventPageScroll:!0,map:null,constructor:function(e,r){this.node=e;c.mixin(this,r);r=function(t){l.stop(t);return!1};u("mozilla")&&y.style(e,"MozUserSelect","none");this._handles=[a(e,"onselectstart",r),a(e,"ondragstart",r),a(e,"onmouseenter",this,this._onMouseEnterHandler),
a(e,"onmouseleave",this,this._onMouseLeaveHandler),a(e,"onmousedown",this,this._onMouseDownHandler),a(e,"onclick",this,this._onClickHandler),a(e,"ondblclick",this,this._onDblClickHandler)];this._onMouseMoveHandler_connect=a(e,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=a(e,"onmouseup",this,this._onMouseUpHandler);this._fireClickEvent=c.hitch(this,this._fireClickEvent);this._initialDuration=this.doubleClickDuration;this.preventPageScroll=(e=this.map)?e.isScrollWheelZoom||
e.isScrollWheelPan:this.preventPageScroll;this.enableMouseWheel(!1)},_fire:function(e,r){if(!this._preventClick||"onClick"!==e&&"onDblClick"!==e){if(this[e])this[e](r);if(this.map&&this.map[e])this.map[e](r)}},_processEvent:function(e){e=l.fix(e,e.target);var r=this.map,t=r&&r.position;t&&("DOMMouseScroll"===e.type&&3>u("ff")?e.screenPoint=new d(window.scrollX+e.screenX-t.x,window.scrollY+e.screenY-t.y):e.screenPoint=new d(e.pageX-t.x,e.pageY-t.y),e.mapPoint=r.extent?r.toMap(e.screenPoint):new f);
e.numPoints=0;return e},_onMouseEnterHandler:function(e){b(this._onKeyDown_connect);b(this._onKeyUp_connect);this._onKeyDown_connect=a(document,"onkeydown",this,this._onKeyDownHandler);this._onKeyUp_connect=a(document,"onkeyup",this,this._onKeyUpHandler);this._fire("onMouseOver",this._processEvent(e))},_onMouseLeaveHandler:function(e){b(this._onKeyDown_connect);b(this._onKeyUp_connect);this._onKeyDown_connect=this._onKeyUp_connect=null;this._fire("onMouseOut",this._processEvent(e))},_onMouseMoveHandler:function(e){this._dragEnd?
this._dragEnd=!1:this._fire("onMouseMove",this._processEvent(e))},_onMouseDownHandler:function(e){b(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=null;this.node.setCapture&&this.node.setCapture(!1);b(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=a(document,"onmousemove",this,this._onMouseDragHandler);this._startX=e.pageX;this._startY=e.pageY;this._fire("onMouseDown",this._processEvent(e))},_onMouseUpHandler:function(e){var r=this.node;r.releaseCapture&&r.releaseCapture();
b(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=null;b(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=a(r,"onmousemove",this,this._onMouseMoveHandler);this._fire("onMouseUp",this._processEvent(e))},_onMouseDragHandler:function(e){b(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=a(document,"onmousemove",this,this._onMouseDraggingHandler);b(this._onMouseUpHandler_connect);this._onMouseUpHandler_connect=a(document,"onmouseup",this,this._onDragMouseUpHandler);
this._docLeaveConnect=a(document,"onmouseout",this,this._onDocMouseOut);this._fire("onMouseDragStart",this._processEvent(e))},_onMouseDraggingHandler:function(e){l.stop(e);this._fire("onMouseDrag",this._processEvent(e))},_onDragMouseUpHandler:function(e){var r=this.node;r.releaseCapture&&r.releaseCapture();this._dragEnd=!0;b(this._docLeaveConnect);b(this._onMouseDragHandler_connect);b(this._onMouseUpHandler_connect);this._docLeaveConnect=this._onMouseDragHandler_connect=null;this._onMouseMoveHandler_connect=
a(r,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=a(r,"onmouseup",this,this._onMouseUpHandler);e=this._processEvent(e);this._fire("onMouseDragEnd",e);this._fire("onMouseUp",e)},_onDocMouseOut:function(e){var r=9>u("ie")?e.toElement:e.relatedTarget,t=r&&r.nodeName.toLowerCase();(!r||(u("chrome")||u("safari"))&&"html"===t)&&this._onDragMouseUpHandler(e)},_onClickHandler:function(e){e=this._processEvent(e);if(e.pageX===this._startX&&e.pageY===this._startY){clearTimeout(this._clickTimer);
var r={},t="movementX"in e,g;for(g in e)"mozInputSource"===g||"mozPressure"===g||t&&("webkitMovementX"===g||"webkitMovementY"===g)||(r[g]=e[g]);this._clickEvent=r;this._clickTimer=setTimeout(this._fireClickEvent,this.doubleClickDuration)}},_fireClickEvent:function(){clearTimeout(this._clickTimer);9>u("ie")&&(this._clickEvent.graphic=m._ieGraphic,delete m._ieGraphic);this._fire("onClick",this._clickEvent)},_onDblClickHandler:function(e){clearTimeout(this._clickTimer);this._fire("onDblClick",this._processEvent(e))},
_onMouseWheelHandler:function(e){var r=this.map;(r?r.isScrollWheelZoom||r.isScrollWheelPan:this.preventPageScroll)&&l.stop(e);r=u("ff")||u("mozilla")?-e.detail/this.mozWheelDivisor:e.wheelDelta/this.wheelDivisor;var t=Math.abs(r);t=t<=this.minWheelValue?this.minWheelValue:this.maxWheelValue;e.value=0>r?-t:t;this._fire("onMouseWheel",this._processEvent(e))},_onKeyDownHandler:function(e){this._fire("onKeyDown",e)},_onKeyUpHandler:function(e){this._fire("onKeyUp",e)},enableMouseWheel:function(e){b(this._scrollHandle);
this._scrollHandle=a(this.node,u("ff")||u("mozilla")?e?"MozMousePixelScroll":"DOMMouseScroll":"onmousewheel",this,this._onMouseWheelHandler)},setImmediateClick:function(e){this.doubleClickDuration=e?0:this._initialDuration},preventClickEvents:function(e){this._preventClick=e},destroy:function(){var e=this._handles.concat([this._onMouseMoveHandler_connect,this._onMouseUpHandler_connect,this._onMouseDragHandler_connect,this._scrollHandle,this._onKeyDown_connect,this._onKeyUp_connect,this._docLeaveConnect]),
r;for(r=0;r<e.length;r++)b(e[r]);clearTimeout(this._clickTimer);this.node=this.map=this._handles=this._clickEvent=this._onMouseMoveHandler_connect=this._onMouseUpHandler_connect=this._onMouseDragHandler_connect=this._scrollHandle=this._onKeyDown_connect=this._onKeyUp_connect=this._docLeaveConnect=null}});u("extend-esri")&&(m.MouseEvents=B);return B})},"esri/TouchEvents":function(){define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/_base/sniff dojo/dom ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),
function(B,y,c,u,q,l,m,h,f){B=B([m],{declaredClass:"esri.TouchEvents",tapRadius:8,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,map:null,constructor:function(d,a){this.node=d;c.mixin(this,a);y.setSelectable(d,!1);this._touchStart=c.hitch(this,this._touchStart);this._touchMove=c.hitch(this,this._touchMove);this._touchEnd=c.hitch(this,this._touchEnd);this._touchCancel=c.hitch(this,this._touchCancel);this._fireClickEvent=c.hitch(this,this._fireClickEvent);d.addEventListener("touchstart",
this._touchStart,!1);d.addEventListener("touchmove",this._touchMove,!1);d.addEventListener("touchend",this._touchEnd,!1);d.addEventListener("touchcancel",this._touchCancel,!1);this.map&&u("ios")&&(this._mouseOver=c.hitch(this,this._mouseOver),this._mouseOut=c.hitch(this,this._mouseOut),this._mouseDown=c.hitch(this,this._mouseDown),this._mouseUp=c.hitch(this,this._mouseUp),this._mouseClick=c.hitch(this,this._mouseClick),d.addEventListener("mouseover",this._mouseOver,!1),d.addEventListener("mouseout",
this._mouseOut,!1),d.addEventListener("mousedown",this._mouseDown,!1),d.addEventListener("mouseup",this._mouseUp,!1),d.addEventListener("click",this._mouseClick,!1));this._numTouches=0;this._nodeTouches=[];this._touches={};this._touchIds=[];this._taps=[];this._immediate=!1},_touchStart:function(d){var a=this._touches,b,e=d.changedTouches.length,r,t,g=(new Date).getTime();this._touchStartTS=g;if(!(u("android")&&u("safari")&&1===d.targetTouches.length&&d.touches.length===d.targetTouches.length&&d.targetTouches.length===
d.changedTouches.length&&0===d.changedTouches[0].identifier&&a[d.changedTouches[0].identifier])){this._addTouch(d);for(b=0;b<e;b++){var k=d.changedTouches[b];var x=a[k.identifier]={};x.startX=k.pageX;x.startY=k.pageY;x.startTS=g;-1===this._touchIds.indexOf(k.identifier)&&this._touchIds.push(k.identifier)}this._swipeActive&&(r=this._nodeTouches[0]);this._pinchActive&&(t=this._nodeTouches[1]);1===this._numTouches?this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(d,
r))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(d,[r,t]))):2===this._numTouches?this._swipeActive&&(r&&(x=a[this._touchIds[0]],x.startX=r.pageX,x.startY=r.pageY,x.moved=!1),this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(d,r))):this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(d,r))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(d,[r,t])))}},_touchMove:function(d){d.preventDefault();
this._updateTouch(d);var a=this._touches,b,e=d.changedTouches.length,r;if(!(u("android")&&u("safari")&&1===d.targetTouches.length&&d.touches.length===d.targetTouches.length&&d.targetTouches.length===d.changedTouches.length&&0===d.changedTouches[0].identifier&&a[d.changedTouches[0].identifier]&&1<this._touchIds.length)){for(b=0;b<e;b++){var t=d.changedTouches[b];if(r=a[t.identifier]){var g=Math.abs(t.pageX-r.startX);t=Math.abs(t.pageY-r.startY);!r.moved&&(g>=this.tapRadius||t>=this.tapRadius)&&(r.moved=
r.absMoved=!0);var k=k?k:r.moved}}1===this._numTouches?(a=d.changedTouches[0],this._swipeActive?this._fire("onSwipeMove",this._processTouchEvent(d,a)):k&&(this._swipeActive=!0,this._fire("onSwipeStart",this._processTouchEvent(d,a)))):2===this._numTouches&&(b=this._nodeTouches[0],e=this._nodeTouches[1],this._pinchActive?this._fire("onPinchMove",this._processTouchEvent(d,[b,e])):k&&(k=a[b.identifier],r=a[e.identifier],a=Math.abs(k.startX-r.startX),k=Math.abs(k.startY-r.startY),r=Math.abs(b.pageX-e.pageX),
g=Math.abs(b.pageY-e.pageY),Math.abs(Math.sqrt(r*r+g*g)-Math.sqrt(a*a+k*k))>=2*this.tapRadius&&(this._pinchActive=!0,this._fire("onPinchStart",this._processTouchEvent(d,[b,e])))))}},_touchEnd:function(d){this._removeTouch(d);var a=this._touches,b=d.changedTouches,e,r=b.length,t,g,k=(new Date).getTime(),x=this._touchIds;for(e=0;e<r;e++)if(g=a[b[e].identifier])g.absMoved&&(t=!0),g.pageX=b[e].pageX,g.pageY=b[e].pageY,g.endTS=k;if(0===this._numTouches)if(this._touches={},this._touchIds=[],this._swipeActive)this._swipeActive=
!1,this._fire("onSwipeEnd",this._processTouchEvent(d,b[0]));else if(this._pinchActive)this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(d,b));else{if(!t){r=Infinity;t=-Infinity;k=Infinity;var v=-Infinity,A=this.tapStartTolerance,n=[],w=!0;for(e=0;e<x.length;e++)g=a[x[e]],n.push(g),g.startTS<r&&(r=g.startTS),g.startTS>t&&(t=g.startTS),g.endTS<k&&(k=g.endTS),g.endTS>v&&(v=g.endTS),delete a[x[e]];1===n.length&&b[0]&&(a=Math.abs(b[0].pageY-n[0].startY),Math.abs(b[0].pageX-n[0].startX)>=
this.tapRadius||a>=this.tapRadius)&&(w=!1);w&&Math.abs(t-r)<=A&&Math.abs(v-k)<=A&&this._basicTap(d,n)}}else 1===this._numTouches&&this._pinchActive&&(e=this._nodeTouches[0],g=a[e.identifier],g.startX=e.pageX,g.startY=e.pageY,this._pinchActive=g.moved=!1,this._fire("onPinchEnd",this._processTouchEvent(d,[b[0],e])))},_touchCancel:function(d){this._numTouches&&this._touchEnd(d)},_basicTap:function(d,a){var b=(new Date).getTime(),e=this;d=this._processTouchEvent(d,a);this._taps.push({touchInfos:a,ts:b,
event:d});2<this._taps.length&&this._taps.shift();this._fire("onBasicTap",d);clearTimeout(this._tapTimer);this._immediate?this._analyzeTap(!0):this._tapTimer=setTimeout(function(){var r=e;e=null;clearTimeout(r._tapTimer);r._analyzeTap()},2===this._taps.length?this.doubleTapDuration/2:this.doubleTapDuration)},_analyzeTap:function(d){var a=this._taps,b=a[0],e=a[1],r=b.touchInfos,t=e&&e.touchInfos;a.length&&(d||(this._taps=[]),b&&e?r.length===t.length?e.ts-b.ts<=this.doubleTapDuration?(1===r.length?
(d=Math.abs(r[0].startX-t[0].startX),r=Math.abs(r[0].startY-t[0].startY),r=d<=this.doubleTapRadius&&r<=this.doubleTapRadius):r=!0,r?this._processedDoubleTap(a):this._processedTap(e)):this._processedTap(e):this._processedTap(e):this._processedTap(b||e))},_processedTap:function(d){var a=d.event;this._fire("onProcessedTap",a);1===d.touchInfos.length?this._fire("onTap",this._fixEvent(a)):2===d.touchInfos.length&&this._fire("onTwoFingerTap",a)},_processedDoubleTap:function(d){var a=1===d[1].touchInfos.length;
if(a){var b=[this._fixEvent(d[0].event),this._fixEvent(d[1].event)];b[1].relatedEvents=b}d=[d[0].event,d[1].event];d[1].relatedEvents=d;this._fire("onProcessedDoubleTap",d[1]);a&&(this._fire("onDoubleTap",b[1]),this._fire("onDblClick",b[1]))},_addTouch:function(d){var a=d.changedTouches,b=this._nodeTouches,e;this._numTouches+=a.length;for(d=0;d<a.length;d++){var r=b.length;var t=!1;for(e=0;e<r&&!(t=b[e].identifier===a[d].identifier);e++);t?this._numTouches--:b.push(a[d])}for(d=b.length-1;0<=d;d--)q.isDescendant(b[d].target,
document.body)||(b.splice(d,1),this._numTouches--);0>this._numTouches&&(this._numTouches=0)},_removeTouch:function(d){var a=[],b=[],e=d.changedTouches,r=this._nodeTouches;this._numTouches-=e.length;0>this._numTouches&&(this._numTouches=0);for(d=0;d<e.length;d++)a.push(e[d].identifier);for(d=r.length-1;0<=d;d--)-1!==a.indexOf(r[d].identifier)&&b.push(r.splice(d,1)[0]);return b},_updateTouch:function(d){var a=[],b=d.changedTouches,e=this._nodeTouches;for(d=0;d<b.length;d++)a.push(b[d].identifier);for(d=
0;d<e.length;d++){var r=a.indexOf(e[d].identifier);-1!==r&&e.splice(d,1,b[r])}},_mouseOver:function(d){this._fire("onMouseOver",this._processMouseEvent(d))},_mouseOut:function(d){this._fire("onMouseOut",this._processMouseEvent(d))},_mouseDown:function(d){this._fire("onMouseDown",this._processMouseEvent(d))},_mouseUp:function(d){this._fire("onMouseUp",this._processMouseEvent(d))},_mouseClick:function(d){clearTimeout(this._clickTimer);300<(new Date).getTime()-this._touchStartTS?this._fire("onClick",
this._processMouseEvent(d)):(this._clickEvent=d,this._clickTimer=setTimeout(this._fireClickEvent,this.doubleTapDuration))},_fireClickEvent:function(){clearTimeout(this._clickTimer);this._fire("onClick",this._processMouseEvent(this._clickEvent))},_fire:function(d,a){"onDblClick"===d&&clearTimeout(this._clickTimer);if("onDblClick"===d&&this.mouseEvents){this.mouseEvents.preventClickEvents(!0);var b=this;setTimeout(function(){b.mouseEvents.preventClickEvents(!1)},350)}if(this[d])this[d](a);if(this.map&&
this.map[d])this.map[d](a)},_fixEvent:function(d){var a={},b;for(b in d)a[b]=d[b];this.map&&(a.screenPoint=a.screenPoints[0],a.mapPoint=a.mapPoints[0]);return a},_processTouchEvent:function(d,a){var b=this.map,e=b&&b.position,r=0;if(e&&a)if(c.isArray(a)){var t;d.screenPoints=[];d.mapPoints=[];for(t=0;t<a.length;t++)if(a[t]){var g=new f(a[t].pageX-e.x,a[t].pageY-e.y);d.screenPoints.push(g);d.mapPoints.push(b.extent?b.toMap(g):new h)}else r++}else d.screenPoint=new f(a.pageX-e.x,a.pageY-e.y),d.mapPoint=
b.extent?b.toMap(d.screenPoint):new h;d.numPoints=a?c.isArray(a)?a.length-r:1:0;return d},_processMouseEvent:function(d){var a=this.map,b=a&&a.position;b&&(d.screenPoint=new f(d.pageX-b.x,d.pageY-b.y),d.mapPoint=a.extent?a.toMap(d.screenPoint):new h);return d},setImmediateTap:function(d){this._immediate=d},destroy:function(){var d=this.node;d.removeEventListener("touchstart",this._touchStart,!1);d.removeEventListener("touchmove",this._touchMove,!1);d.removeEventListener("touchend",this._touchEnd,
!1);d.removeEventListener("touchcancel",this._touchCancel,!1);this.map&&(d.removeEventListener("mouseover",this._mouseOver,!1),d.removeEventListener("mouseout",this._mouseOut,!1),d.removeEventListener("mousedown",this._mouseDown,!1),d.removeEventListener("mouseup",this._mouseUp,!1),d.removeEventListener("click",this._mouseClick,!1));y.setSelectable(d,!0);clearTimeout(this._tapTimer);clearTimeout(this._clickTimer);this.node=this.map=this._numTouches=this._nodeTouches=this._touches=this._touchIds=this._taps=
null}});u("extend-esri")&&(l.TouchEvents=B);return B})},"esri/PointerEvents":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),function(B,y,c,u,q,l,m,h){B=B([l],{declaredClass:"esri.PointerEvents",tapRadius:8,clickRadius:2,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:-1!==u("mac")?1:3,wheelDivisor:120,preventPageScroll:!0,_dragging:!1,
constructor:function(f,d){this.node=f;y.mixin(this,d);void 0!==f.style.msTouchAction?f.style.msTouchAction="none":void 0!==f.style.touchAction&&(f.style.touchAction="none");d=navigator.msPointerEnabled;var a=function(b){b.preventDefault()};f.addEventListener("selectstart",a,!1);f.addEventListener("dragstart",a,!1);this._pointerDown=y.hitch(this,this._pointerDown);this._pointerMove=y.hitch(this,this._pointerMove);this._pointerUp=y.hitch(this,this._pointerUp);this._pointerCancel=y.hitch(this,this._pointerCancel);
f.addEventListener(d?"MSPointerDown":"pointerdown",this._pointerDown,!1);f.addEventListener(d?"MSPointerMove":"pointermove",this._pointerMove,!1);f.addEventListener(d?"MSPointerUp":"pointerup",this._pointerUp,!1);f.addEventListener(d?"MSPointerCancel":"pointercancel",this._pointerCancel,!1);this.map&&(this._mouseOver=y.hitch(this,this._mouseOver),this._mouseOut=y.hitch(this,this._mouseOut),this._mouseLeave=y.hitch(this,this._mouseLeave),this._mouseDown=y.hitch(this,this._mouseDown),this._mouseUp=
y.hitch(this,this._mouseUp),this._mouseClick=y.hitch(this,this._mouseClick),this._mouseWheel=y.hitch(this,this._mouseWheel),this._mouseMove=y.hitch(this,this._mouseMove),this._mouseEnter=y.hitch(this,this._mouseEnter),this._onKeyDown=y.hitch(this,this._onKeyDown),this._onKeyUp=y.hitch(this,this._onKeyUp),f.addEventListener("mouseover",this._mouseOver,!1),f.addEventListener("mouseout",this._mouseOut,!1),f.addEventListener("mouseleave",this._mouseLeave,!1),f.addEventListener("mousedown",this._mouseDown,
!1),f.addEventListener("mouseup",this._mouseUp,!1),f.addEventListener("click",this._mouseClick,!1),f.addEventListener("mousewheel",this._mouseWheel,!1),f.addEventListener("mousemove",this._mouseMove,!1),f.addEventListener("mouseenter",this._mouseEnter,!1));this._numTouches=0;this._touches={};this._touchIds=[];this._taps=[];this._immediate=!1},_pointerDown:function(f){if(-1<c.indexOf(this._touchIds,f.pointerId))this._pointerUp(f);else{var d=this._touches,a=f.target,b=f.pointerId,e=this._touchIds,r=
(new Date).getTime();var t=d[b]={};t.pointerId=b;t.startX=t.pageX=f.pageX;t.startY=t.pageY=f.pageY;t.startTS=r;e.push(b);this._numTouches++;a.setPointerCapture?a.setPointerCapture(b):a.msSetPointerCapture&&a.msSetPointerCapture(b);a=d[e[0]];d=d[e[1]];1!==this._numTouches&&(2===this._numTouches?this._swipeActive&&(a&&(a.startX=a.pageX,a.startY=a.pageY,a.moved=!1),this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(f,a))):this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",
this._processTouchEvent(f,a))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(f,[a,d]))))}},_pointerMove:function(f){var d=this._touches,a=this._touchIds,b;if((b=d[f.pointerId])&&(b.pageX!==f.pageX||b.pageY!==f.pageY)){b.pageX=f.pageX;b.pageY=f.pageY;var e=Math.abs(b.pageX-b.startX);var r=Math.abs(b.pageY-b.startY);!b.moved&&(e>=this.tapRadius||r>=this.tapRadius)&&(b.moved=b.absMoved=!0);if(1===this._numTouches)this._swipeActive?this._fire("onSwipeMove",this._processTouchEvent(f,
f)):b.moved&&(this._swipeActive=!0,this._fire("onSwipeStart",this._processTouchEvent(f,f)));else if(2===this._numTouches)if(b=d[a[0]],d=d[a[1]],this._pinchActive)this._fire("onPinchMove",this._processTouchEvent(f,[b,d]));else if(b.moved||d.moved){a=Math.abs(b.startX-d.startX);e=Math.abs(b.startY-d.startY);r=Math.abs(b.pageX-d.pageX);var t=Math.abs(b.pageY-d.pageY);Math.abs(Math.sqrt(r*r+t*t)-Math.sqrt(a*a+e*e))>=2*this.tapRadius&&(this._pinchActive=!0,this._fire("onPinchStart",this._processTouchEvent(f,
[b,d])))}}},_pointerUp:function(f){var d=this._touches,a,b=this.node,e=f.target,r=f.pointerId,t=this._touchIds,g=t.slice(0),k=c.map(g,function(n){return d[n]}),x=(new Date).getTime();if(a=d[r])if(a.pageX=f.pageX,a.pageY=f.pageY,a.endTS=x,this._numTouches--,e.releasePointerCapture?e.releasePointerCapture(r):e.msReleasePointerCapture&&e.msReleasePointerCapture(r),0===this._numTouches)if(this._touches={},this._touchIds=[],this._swipeActive)this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(f,
f));else if(this._pinchActive)this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(f,f));else{if(!a.absMoved){e=Infinity;r=-Infinity;t=Infinity;x=-Infinity;var v=this.tapStartTolerance,A;for(A=0;A<g.length;A++)a=k[A],a.startTS<e&&(e=a.startTS),a.startTS>r&&(r=a.startTS),a.endTS<t&&(t=a.endTS),a.endTS>x&&(x=a.endTS);Math.abs(r-e)<=v&&Math.abs(x-t)<=v&&this._basicTap(f,k)}}else 1===this._numTouches&&this._pinchActive&&(t.splice(c.indexOf(t,f.pointerId),1),delete d[f.pointerId],a=d[t[0]],
a.startX=a.pageX,a.startY=a.pageY,a.moved=!1,document.msElementsFromPoint&&(g=document.msElementsFromPoint(a.pageX,a.pageY),c.some(g,function(n){return n===b})||(this._touches={},this._touchIds=[],this._numTouches=0)),this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(f,[f,a])))},_pointerCancel:function(f){this._numTouches&&this._pointerUp(f)},_basicTap:function(f,d){var a=(new Date).getTime(),b=this,e=this._immediate;f=this._processTouchEvent(f,d);this._taps.push({touchInfos:d,
ts:a,event:f});2<this._taps.length&&this._taps.shift();this._fire("onBasicTap",f);clearTimeout(this._tapTimer);f=2===this._taps.length?this.doubleTapDuration/2:this.doubleTapDuration;this._tapTimer=setTimeout(function(){var r=b;b=null;clearTimeout(r._tapTimer);r._analyzeTap(e)},e?0:f)},_analyzeTap:function(f){var d=this._taps,a=d[0],b=d[1],e=a.touchInfos,r=b&&b.touchInfos;d.length&&(f||(this._taps=[]),a&&b?e.length===r.length?b.ts-a.ts<=this.doubleTapDuration?(1===e.length?(f=Math.abs(e[0].startX-
r[0].startX),e=Math.abs(e[0].startY-r[0].startY),e=f<=this.doubleTapRadius&&e<=this.doubleTapRadius):e=!0,e?this._processedDoubleTap(d):this._processedTap(b)):this._processedTap(b):this._processedTap(b):this._processedTap(a||b))},_processedTap:function(f){var d=f.event;this._fire("onProcessedTap",d);1===f.touchInfos.length?this._fire("onTap",this._fixEvent(d)):2===f.touchInfos.length&&this._fire("onTwoFingerTap",d)},_processedDoubleTap:function(f){var d=1===f[1].touchInfos.length;if(d){var a=[this._fixEvent(f[0].event),
this._fixEvent(f[1].event)];a[1].relatedEvents=a}f=[f[0].event,f[1].event];f[1].relatedEvents=f;this._fire("onProcessedDoubleTap",f[1]);d&&(this._fire("onDoubleTap",a[1]),this._fire("onDblClick",a[1]))},_mouseOver:function(f){this._fire("onMouseOver",this._processMouseEvent(f))},_mouseMove:function(f){this._dragging?this._fire("onMouseDrag",this._processMouseEvent(f)):this._fire("onMouseMove",this._processMouseEvent(f))},_mouseOut:function(f){this._fire("onMouseOut",this._processMouseEvent(f))},_mouseLeave:function(f){document.removeEventListener("keydown",
this._onKeyDown,!1);document.removeEventListener("keyup",this._onKeyUp,!1);this._fire("onMouseOut",this._processMouseEvent(f))},_mouseDown:function(f){this._downX=f.pageX;this._downY=f.pageY;this._fire("onMouseDown",this._processMouseEvent(f));0===f.button&&(this._dragging=!0,this._fire("onMouseDragStart",this._processMouseEvent(f)))},_mouseUp:function(f){this._dragging&&(this._dragging=!1,this._fire("onMouseDragEnd",this._processMouseEvent(f)));this._fire("onMouseUp",this._processMouseEvent(f))},
_mouseClick:function(f){Math.abs(f.pageX-this._downX)<=this.clickRadius&&Math.abs(f.pageY-this._downY)<=this.clickRadius&&this._fire("onClick",this._processMouseEvent(f))},_mouseWheel:function(f){var d=this.map;(d?d.isScrollWheelZoom||d.isScrollWheelPan:this.preventPageScroll)&&f.preventDefault();d=f.wheelDelta?f.wheelDelta/this.wheelDivisor:-f.detail/this.mozWheelDivisor;var a=Math.abs(d);a=a<=this.minWheelValue?this.minWheelValue:this.maxWheelValue;f.value=0>d?-a:a;this._fire("onMouseWheel",this._processMouseEvent(f))},
_mouseEnter:function(f){document.removeEventListener("keydown",this._onKeyDown,!1);document.removeEventListener("keyup",this._onKeyUp,!1);document.addEventListener("keydown",this._onKeyDown,!1);document.addEventListener("keyup",this._onKeyUp,!1);this._fire("onMouseEnter",this._processMouseEvent(f))},_onKeyDown:function(f){this._fire("onKeyDown",f)},_onKeyUp:function(f){this._fire("onKeyUp",f)},_fire:function(f,d){if(this[f])this[f](d);if(this.map&&this.map[f])this.map[f](d)},_fixEvent:function(f){var d=
{},a;for(a in f)d[a]=f[a];d.preventDefault=function(){f.preventDefault()};d.stopPropagation=function(){f.stopPropagation()};this.map&&(d.screenPoint=d.screenPoints[0],d.mapPoint=d.mapPoints[0]);return d},_processTouchEvent:function(f,d){var a=this.map,b=a&&a.position,e=0;if(b&&d)if(y.isArray(d)){var r;f.screenPoints=[];f.mapPoints=[];for(r=0;r<d.length;r++)if(d[r]){var t=new h(d[r].pageX-b.x,d[r].pageY-b.y);f.screenPoints.push(t);f.mapPoints.push(a.extent?a.toMap(t):new m)}else e++}else f.screenPoint=
new h(d.pageX-b.x,d.pageY-b.y),f.mapPoint=a.extent?a.toMap(f.screenPoint):new m;f.numPoints=d?y.isArray(d)?d.length-e:1:0;return f},_processMouseEvent:function(f){var d=this.map,a=d&&d.position;a&&(f.screenPoint=new h(f.pageX-a.x,f.pageY-a.y),f.mapPoint=d.extent?d.toMap(f.screenPoint):new m);return f},setImmediateTap:function(f){this._immediate=f},destroy:function(){var f=this.node;f.removeEventListener("MSPointerDown",this._pointerDown,!1);f.removeEventListener("MSPointerMove",this._pointerMove,
!1);f.removeEventListener("MSPointerUp",this._pointerUp,!1);f.removeEventListener("MSPointerCancel",this._pointerCancel,!1);this.map&&(f.removeEventListener("mouseover",this._mouseOver,!1),f.removeEventListener("mousemove",this._mouseMove,!1),f.removeEventListener("mouseout",this._mouseOut,!1),f.removeEventListener("mouseleave",this._mouseLeave,!1),f.removeEventListener("mousedown",this._mouseDown,!1),f.removeEventListener("mouseup",this._mouseUp,!1),f.removeEventListener("click",this._mouseClick,
!1),f.removeEventListener("mouseenter",this._mouseEnter,!1));clearTimeout(this._tapTimer);this.node=this.map=this._numTouches=this._touches=this._touchIds=this._taps=null}});u("extend-esri")&&(q.PointerEvents=B);return B})},"esri/geometry":function(){define("./units ./SpatialReference ./geometry/Geometry ./geometry/Point ./geometry/ScreenPoint ./geometry/Multipoint ./geometry/Polyline ./geometry/Polygon ./geometry/Extent ./geometry/Rect ./geometry/geodesicUtils ./geometry/jsonUtils ./geometry/mathUtils ./geometry/normalizeUtils ./geometry/scaleUtils ./geometry/screenUtils ./geometry/webMercatorUtils".split(" "),
function(B,y,c,u,q,l,m,h,f,d,a,b,e,r,t,g,k){return{units:B,SpatialReference:y,Geometry:c,Point:u,ScreenPoint:q,Multipoint:l,Polyline:m,Polygon:h,Extent:f,Rect:d,geodesicUtils:a,jsonUtils:b,mathUtils:e,normalizeUtils:r,scaleUtils:t,screenUtils:g,webMercatorUtils:k}})},"esri/units":function(){define(["dojo/has","./kernel"],function(B,y){var c={CENTIMETERS:"esriCentimeters",DECIMAL_DEGREES:"esriDecimalDegrees",DEGREE_MINUTE_SECONDS:"esriDegreeMinuteSeconds",DECIMETERS:"esriDecimeters",FEET:"esriFeet",
FEET_US:"esriFeetUS",INCHES:"esriInches",KILOMETERS:"esriKilometers",METERS:"esriMeters",MILES:"esriMiles",MILES_US:"esriMilesUS",MILLIMETERS:"esriMillimeters",NAUTICAL_MILES:"esriNauticalMiles",POINTS:"esriPoints",UNKNOWN:"esriUnknownUnits",YARDS:"esriYards",YARDS_US:"esriYardsUS",ACRES:"esriAcres",ACRES_US:"esriAcresUS",ARES:"esriAres",SQUARE_KILOMETERS:"esriSquareKilometers",SQUARE_MILES:"esriSquareMiles",SQUARE_MILES_US:"esriSquareMilesUS",SQUARE_FEET:"esriSquareFeet",SQUARE_FEET_US:"esriSquareFeetUS",
SQUARE_METERS:"esriSquareMeters",HECTARES:"esriHectares",SQUARE_YARDS:"esriSquareYards",SQUARE_YARDS_US:"esriSquareYardsUS",SQUARE_INCHES:"esriSquareInches",SQUARE_MILLIMETERS:"esriSquareMillimeters",SQUARE_CENTIMETERS:"esriSquareCentimeters",SQUARE_DECIMETERS:"esriSquareDecimeters",SQUARE_NAUTICAL_MILES:"esriSquareNauticalMiles",METERS_PER_SECOND:"esriMetersPerSecond",KILOMETERS_PER_HOUR:"esriKilometersPerHour",KNOTS:"esriKnots",FEET_PER_SECOND:"esriFeetPerSecond",MILES_PER_HOUR:"esriMilesPerHour",
RADIANS:"esriDURadians"};B("extend-esri")&&(y.Units=c);return c})},"esri/geometry/geodesicUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point ./Polyline ./Polygon".split(" "),function(B,y,c,u,q,l,m,h){function f(x){return!!(x&&x.wkid&&k[x.wkid])}function d(x){return f(x)?k[x.wkid]:k[4326]}function a(x){var v=x.spatialReference,A=d(v),n=A.a;A=A.eSq;var w=Math.sqrt(A),p=Math.sin(x.y*g);return new l(n*x.x*g,0<A?n*(1-A)*(p/(1-A*p*p)-1/(2*w)*Math.log((1-
w*p)/(1+w*p)))*.5:n*p,v)}function b(x,v,A,n,w){var p=d(w),D=p.a,C=p.b;p=p.f;var G=Math.sin(A);A=Math.cos(A);var z=(1-p)*Math.tan(x);x=1/Math.sqrt(1+z*z);var E=z*x,H=Math.atan2(z,A);z=x*G;var I=z*z,M=1-I;D=M*(D*D-C*C)/(C*C);var T=1+D/16384*(4096+D*(-768+D*(320-175*D))),Y=D/1024*(256+D*(-128+D*(74-47*D)));D=n/(C*T);for(var fa=2*Math.PI,ca,X,ea,ma;1E-12<Math.abs(D-fa);)ea=Math.cos(2*H+D),ca=Math.sin(D),X=Math.cos(D),ma=Y*ca*(ea+Y/4*(X*(-1+2*ea*ea)-Y/6*ea*(-3+4*ca*ca)*(-3+4*ea*ea))),fa=D,D=n/(C*T)+ma;
n=E*ca-x*X*A;C=p/16*M*(4+p*(4-3*M));return new l((v+(Math.atan2(ca*G,x*X-E*ca*A)-(1-C)*p*z*(D+C*ca*(ea+C*X*(-1+2*ea*ea)))))/g,Math.atan2(E*X+x*ca*A,(1-p)*Math.sqrt(I+n*n))/g,w)}function e(x,v,A,n,w){var p=d(w),D=p.a;w=p.b;var C=p.f,G=n-v,z=Math.atan((1-C)*Math.tan(x)),E=Math.atan((1-C)*Math.tan(A)),H=Math.sin(z);z=Math.cos(z);var I=Math.sin(E);E=Math.cos(E);var M=G,T=1E3;do{var Y=Math.sin(M);var fa=Math.cos(M);var ca=Math.sqrt(E*Y*E*Y+(z*I-H*E*fa)*(z*I-H*E*fa));if(0===ca)return 0;fa=H*I+z*E*fa;var X=
Math.atan2(ca,fa);var ea=z*E*Y/ca;var ma=1-ea*ea;Y=fa-2*H*I/ma;isNaN(Y)&&(Y=0);var wa=C/16*ma*(4+C*(4-3*ma));var P=M;M=G+(1-wa)*C*ea*(X+wa*ca*(Y+wa*fa*(-1+2*Y*Y)))}while(1E-12<Math.abs(M-P)&&0<--T);if(0===T)return w=n-v,{azimuth:Math.atan2(Math.sin(w)*Math.cos(A),Math.cos(x)*Math.sin(A)-Math.sin(x)*Math.cos(A)*Math.cos(w)),geodesicDistance:Math.acos(Math.sin(x)*Math.sin(A)+Math.cos(x)*Math.cos(A)*Math.cos(n-v))*p.radius};x=ma*(D*D-w*w)/(w*w);v=x/1024*(256+x*(-128+x*(74-47*x)));return{azimuth:Math.atan2(E*
Math.sin(M),z*I-H*E*Math.cos(M)),geodesicDistance:w*(1+x/16384*(4096+x*(-768+x*(320-175*x))))*(X-v*ca*(Y+v/4*(fa*(-1+2*Y*Y)-v/6*Y*(-3+4*ca*ca)*(-3+4*Y*Y)))),reverseAzimuth:Math.atan2(z*Math.sin(M),z*I*Math.cos(M)-H*E)}}function r(x,v){if(!(x instanceof m||x instanceof h))throw console.error("_geodesicDensify: the input geometry is neither polyline nor polygon"),Error("_geodesicDensify: the input geometry is neither polyline nor polygon");var A=x.spatialReference,n=d(A).radius/1E4;v<n&&(v=n);n=x instanceof
m;var w=[],p;B.forEach(n?x.paths:x.rings,function(D){w.push(p=[]);p.push([D[0][0],D[0][1]]);var C,G;var z=D[0][0]*g;var E=D[0][1]*g;for(C=0;C<D.length-1;C++){var H=D[C+1][0]*g;var I=D[C+1][1]*g;if(z!==H||E!==I){I=e(E,z,I,H,A);H=I.azimuth;I=I.geodesicDistance;var M=I/v;if(1<M){for(G=1;G<=M-1;G++){var T=b(E,z,H,G*v,A);p.push([T.x,T.y])}G=b(E,z,H,(I+Math.floor(M-1)*v)/2,A);p.push([G.x,G.y])}E=b(E,z,H,I,A);p.push([E.x,E.y]);z=E.x*g;E=E.y*g}}});return n?new m({paths:w,spatialReference:A}):new h({rings:w,
spatialReference:A})}var t={esriMeters:1,esriKilometers:1E3,esriYards:.9144,esriFeet:.3048,esriMiles:1609.344,esriNauticalMiles:1852,esriInches:.0254,esriDecimeters:.1,esriCentimeters:.01,esriMillimeters:.001,esriSquareMeters:1,esriSquareKilometers:1E6,esriSquareYards:.83612736,esriSquareFeet:.09290304,esriSquareMiles:2589988.110336,esriAcres:4046.8564224,esriHectares:1E4,esriAres:100,esriSquareInches:6.4516E-4,esriSquareMillimeters:1E-6,esriSquareCentimeters:1E-4,esriSquareDecimeters:.01},g=Math.PI/
180,k={4326:{a:6378137,b:6356752.31424518,f:1/298.257223563,eSq:.006694379990197414,radius:6371008.771415059},104900:{a:2439700,b:2439700,f:0,eSq:0,radius:2439700},104901:{a:6051E3,b:6051E3,f:0,eSq:0,radius:6051E3},104902:{a:6051800,b:6051800,f:0,eSq:0,radius:6051800},104903:{a:1737400,b:1737400,f:0,eSq:0,radius:1737400},104904:{a:3393400,b:3375730,f:1/192.04301075,eSq:.01038722,radius:3387510},104905:{a:3396190,b:3376200,f:1/169.89444722,eSq:.01173737,radius:3389526.6666666665},104906:{a:6200,b:6200,
f:0,eSq:0,radius:6200},104907:{a:11100,b:11100,f:0,eSq:0,radius:11100},104912:{a:2409300,b:2409300,f:0,eSq:0,radius:2409300},104915:{a:1562090,b:1562090,f:0,eSq:0,radius:1562090},104916:{a:2632345,b:2632345,f:0,eSq:0,radius:2632345},104918:{a:1821460,b:1821460,f:0,eSq:0,radius:1821460},104929:{a:249400,b:249400,f:0,eSq:0,radius:249400},104943:{a:2575E3,b:2575E3,f:0,eSq:0,radius:2575E3},104971:{a:3396190,b:3396190,f:0,eSq:0,radius:3396190},104972:{a:47E4,b:47E4,f:0,eSq:0,radius:47E4},104973:{a:255E3,
b:255E3,f:0,eSq:0,radius:255E3},104974:{a:2439400,b:2439400,f:0,eSq:0,radius:2439400}};q={isSupported:f,getSpheroidInfo:d,geodesicDensify:r,geodesicLengths:function(x,v){var A=[];B.forEach(x,function(n,w){var p=0,D=n.spatialReference;B.forEach(n.paths,function(C,G){G=0;var z;for(z=1;z<C.length;z++){var E=C[z-1][0]*g;var H=C[z][0]*g;var I=C[z-1][1]*g;var M=C[z][1]*g;if(I!==M||E!==H)E=e(I,E,M,H,D),G+=E.geodesicDistance}p+=G});p/=t[v];A.push(p)});return A},geodesicAreas:function(x,v){var A=[],n=[];B.forEach(x,
function(w,p){p=.0015696101447650193*d(w.spatialReference).radius;A.push(r(w,p))});B.forEach(A,function(w,p){var D=0,C=w.spatialReference;B.forEach(w.rings,function(G,z){z=a(new l(G[0][0],G[0][1],C));var E=a(new l(G[G.length-1][0],G[G.length-1][1],C)),H=E.x*z.y-z.x*E.y,I;for(I=0;I<G.length-1;I++)z=a(new l(G[I+1][0],G[I+1][1],C)),E=a(new l(G[I][0],G[I][1],C)),H+=E.x*z.y-z.x*E.y;D+=H});D/=t[v];n.push(D/-2)});return n},_unitsDictionary:t,_toEqualAreaPoint:a,_directGeodeticSolver:b,_inverseGeodeticSolver:e};
c("extend-esri")&&y.mixin(y.getObject("geometry",!0,u),q);return q})},"esri/symbol":function(){define("./symbols/Symbol ./symbols/MarkerSymbol ./symbols/SimpleMarkerSymbol ./symbols/PictureMarkerSymbol ./symbols/LineSymbol ./symbols/SimpleLineSymbol ./symbols/CartographicLineSymbol ./symbols/FillSymbol ./symbols/SimpleFillSymbol ./symbols/PictureFillSymbol ./symbols/Font ./symbols/TextSymbol ./symbols/jsonUtils".split(" "),function(B,y,c,u,q,l,m,h,f,d,a,b,e){return{Symbol:B,MarkerSymbol:y,SimpleMarkerSymbol:c,
PictureMarkerSymbol:u,LineSymbol:q,SimpleLineSymbol:l,CartographicLineSymbol:m,FillSymbol:h,SimpleFillSymbol:f,PictureFillSymbol:d,Font:a,TextSymbol:b,jsonUtils:e}})},"esri/renderer":function(){define("./renderers/Renderer ./renderers/SimpleRenderer ./renderers/UniqueValueRenderer ./renderers/ClassBreaksRenderer ./renderers/TemporalRenderer ./renderers/SymbolAger ./renderers/TimeClassBreaksAger ./renderers/TimeRampAger ./renderers/StretchRenderer ./renderers/jsonUtils".split(" "),function(B,y,c,u,
q,l,m,h,f,d){return{Renderer:B,SimpleRenderer:y,UniqueValueRenderer:c,ClassBreaksRenderer:u,TemporalRenderer:q,SymbolAger:l,TimeClassBreaksAger:m,TimeRampAger:h,StretchRenderer:f,jsonUtils:d}})},"esri/renderers/Renderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojox/gfx/_base ../kernel ../Color ../layers/support/attributeUtils ../support/expressionUtils ../arcadeProfiles/visualizationProfile".split(" "),function(B,y,c,u,q,l,m,h,f,d){var a=Math.PI;B=B(null,{declaredClass:"esri.renderer.Renderer",
constructor:function(b){this._cache={};if(b&&!b.declaredClass){this.rotationInfo=b.rotationInfo;if(!this.rotationInfo){var e=b.rotationType,r=b.rotationExpression;if(e||r)this.rotationInfo={type:e,expression:r}}this.setRotationInfo(this.rotationInfo);this.setSizeInfo(this._readSizeInfo(b.sizeInfo));this.setColorInfo(this._readColorInfo(b.colorInfo));this.setOpacityInfo(this._readOpacityInfo(b.transparencyInfo));this.setVisualVariables(this._readVariables(b.visualVariables));this.setAuthoringInfo(b.authoringInfo)}this.getSymbol=
y.hitch(this,this.getSymbol)},getSymbol:function(b){},_readSizeInfo:function(b){if(b){var e=b.minSize,r=b.maxSize;e&&(b.minSize="number"===typeof e?q.pt2px(e):this._readSizeInfo(e));r&&(b.maxSize="number"===typeof r?q.pt2px(r):this._readSizeInfo(r));b.stops&&c.forEach(b.stops,function(t){t.size&&"number"===typeof t.size&&(t.size=q.pt2px(t.size))})}return b},_readColorInfo:function(b){b&&(c.forEach(b.colors,function(e,r){y.isArray(e)&&(b.colors[r]=m.toDojoColor(e))}),c.forEach(b.stops,function(e,r){e.color&&
y.isArray(e.color)&&(b.stops[r].color=m.toDojoColor(e.color))}));return b},_readOpacityInfo:function(b){if(b){var e=y.mixin({},b);e.transparencyValues&&(e.opacityValues=c.map(e.transparencyValues,function(r){return 1-r/100}),delete e.transparencyValues);e.stops&&(e.stops=c.map(e.stops,function(r){r=y.mixin({},r);r.opacity=1-r.transparency/100;delete r.transparency;return r}))}return e},_readVariables:function(b){b&&(b=c.map(b,function(e){"sizeInfo"===e.type?e=this._readSizeInfo(e):"colorInfo"===e.type?
e=this._readColorInfo(e):"transparencyInfo"===e.type&&(e=this._readOpacityInfo(e),e.type="opacityInfo");return e},this));return b},setAuthoringInfo:function(b){this.authoringInfo=b},setRotationInfo:function(b){if(b=this.rotationInfo="string"===typeof b?{field:b}:b){if(b.expression&&!y.isFunction(b.expression)&&!b.field){var e=b.expression.match(this.rotationRE);e&&e[1]&&(b.field=e[1])}b.rotationType=b.type}this._cache.rotationInfo=this._processRotationInfo(b);return this},rotationRE:/^\[([^\]]+)\]$/i,
_processRotationInfo:function(b){b&&!b.rotationType&&(b.rotationType="geographic");return this._createCache(b)},getRotationAngle:function(b,e){var r=this._getVarInfo(e&&e.rotationInfo,"rotationInfo");e=r.variable;r=this._cache[r.cacheKey];var t="arithmetic"===this._getRotationType(e),g=r&&r.hasExpr,k=null;if(e.field||g)k=this._getDataValue(b,e,null,r),null!=k&&(k=(k+(t?-90:0))*(t?-1:1));return k},_getRotationType:function(b){return b&&("rotationInfo"===b.type?b.rotationType:b.type)},_getDataValue:function(b,
e,r,t,g){t||(t=this._getVarInfo(e,r),e=t.variable,t=this._cache[t.cacheKey],"sizeInfo"===r&&(t=t.root));return b._getDataValue(e,t,f,g)},setVisualVariables:function(b){var e=this._cache;c.forEach(this.visualVariables,function(r,t){e.hasOwnProperty(t)&&(e[t]=null)},this);this.visualVariables=b;c.some(b,function(r){return!!r.target})&&b.sort(function(r,t){return r.target===t.target?0:r.target?1:-1});c.forEach(b,function(r,t){"colorInfo"===r.type?e[t]=this._processColorInfo(r):"opacityInfo"===r.type?
e[t]=this._processOpacityInfo(r):"sizeInfo"===r.type?e[t]=this._processSizeInfo(r):"rotationInfo"===r.type&&(e[t]=this._processRotationInfo(r))},this);return this},getVisualVariableValues:function(b){var e=this.visualVariables,r;e&&(r=c.map(e,function(t){switch(t.type){case "sizeInfo":var g=this.getSize(b,{sizeInfo:t});break;case "colorInfo":g=this.getColor(b,{colorInfo:t});break;case "opacityInfo":g=this.getOpacity(b,{opacityInfo:t});break;case "rotationInfo":g=this.getRotationAngle(b,{rotationInfo:t})}return{variable:t,
value:g}},this));return r},getFieldsUsedInExpressions:function(){var b=[];c.forEach(this._getCacheObjects(),function(e){e.syntaxTree&&(b=b.concat(f.extractFieldNames(e.syntaxTree)))});b.sort();return c.filter(b,function(e,r){return 0===r||b[r-1]!==e})},hasGeometryOperations:function(){return c.some(this._getCacheObjects(),function(b){return b.syntaxTree?f.hasGeometryOperations(b.syntaxTree):!1})},initializeArcadeEngine:function(){var b=[];c.forEach(this._getCacheObjects(),function(e){e.syntaxTree&&
b.push(e.syntaxTree)});return d.initialize(b)},hasVisualVariables:function(b,e){return b?!!this.getVisualVariablesForType(b,e):!!(this.getVisualVariablesForType("sizeInfo",e)||this.getVisualVariablesForType("colorInfo",e)||this.getVisualVariablesForType("opacityInfo",e)||this.getVisualVariablesForType("rotationInfo",e))},getVisualVariablesForType:function(b,e){var r=this.visualVariables;if(!e&&this[b]){"rotationInfo"===b&&(this[b].rotationType=this[b].type);var t=[this[b]]}else r&&(t=c.filter(r,function(g){return g.type===
b&&("string"===typeof e?g.target===e:!1===e?!g.target:!0)}))&&0===t.length&&(t=void 0);return t},setSizeInfo:function(b){this.sizeInfo=this.proportionalSymbolInfo=b;this._cache.sizeInfo=this._processSizeInfo(b);return this},_processSizeInfo:function(b){return b&&{root:this._createCache(b),minSize:this._createCache(b.minSize),maxSize:this._createCache(b.maxSize)}},_convertExpressionToArcade:function(b){b&&b.expression&&(b.valueExpression="$view.scale")},_getVarInfo:function(b,e){if(b&&b.type===e){var r=
c.indexOf(this.visualVariables,b);b=this.visualVariables[r]}else r=e,b=this[e];return{variable:b,cacheKey:r}},setProportionalSymbolInfo:function(b){this.setSizeInfo(b);return this},getSize:function(b,e){var r=this._getVarInfo(e&&e.sizeInfo,"sizeInfo"),t=r.variable;r=this._cache[r.cacheKey];var g=null;if(t){var k=t.minSize;g=t.maxSize;k="object"===typeof k&&k?this._getSize(b,k,r&&r.minSize,e):k;g="object"===typeof g&&g?this._getSize(b,g,r&&r.maxSize,e):g;g=this._getSize(b,t,r&&r.root,e,[k,g])}return g},
_getSize:function(b,e,r,t,g){var k=e.stops,x=0,v=r&&r.hasExpr,A=r&&r.ipData,n=r&&r.isScaleDriven,w="object"===typeof b&&!!b,p="number"===typeof b?b:null;if(e.field||n||v){var D=t&&t.scale;v=g?g[0]:e.minSize;g=g?g[1]:e.maxSize;var C=e.minDataValue,G=e.maxDataValue,z=e.valueUnit||"unknown",E=e.valueRepresentation,H=e.scaleBy,I=t&&t.shape;n?p=D:"number"!==typeof p&&w&&(p=this._getDataValue(b,e,null,r));if(!this._isValidNumber(p))return null;if(k)v=this._lookupData(p,A),p=v[0],g=v[1],p===g?x=k[p].size:
(p=k[p].size,k=k[g].size,x=p+(k-p)*v[2]);else if(null!=v&&null!=g&&null!=C&&null!=G)p<=C?x=v:p>=G?x=g:(k=(p-C)/(G-C),"area"===H&&I?(v=(p="circle"===I)?a*Math.pow(v/2,2):v*v,k=v+k*((p?a*Math.pow(g/2,2):g*g)-v),x=p?2*Math.sqrt(k/a):Math.sqrt(k)):x=v+k*(g-v));else if("unknown"===z)null!=v&&null!=C&&(v&&C?(k=p/C,x="circle"===I?2*Math.sqrt(k*Math.pow(v/2,2)):"square"===I||"diamond"===I||"image"===I?Math.sqrt(k*Math.pow(v,2)):k*v):x=p+(v||C),x=x<v?v:x,null!=g&&x>g&&(x=g));else{k=(t&&t.resolution?t.resolution:
1)*this._meterIn[z];if("area"===E)x=Math.sqrt(p/a)/k,x*=2;else if(x=p/k,"radius"===E||"distance"===E)x*=2;null!=v&&x<v&&(x=v);null!=g&&x>g&&(x=g)}}else x=k&&k[0]&&k[0].size,null==x&&(x=e.minSize);return x=isNaN(x)?0:x},getSizeRangeAtScale:function(b,e){b=this._getVarInfo(b,"sizeInfo");var r=this._cache[b.cacheKey],t={scale:e};if((b=b.variable)&&e){var g=b.minSize;e=b.maxSize;var k=b.stops;k&&k.length?(b=k[0].size,r=k[k.length-1].size):(b="object"===typeof g&&g?this._getSize({},g,r&&r.minSize,t):g,
r="object"===typeof e&&e?this._getSize({},e,r&&r.maxSize,t):e);if(null!=b||null!=r){if(b>r){var x=r;r=b;b=x}x={minSize:b,maxSize:r}}}return x},setColorInfo:function(b){this.colorInfo=b;this._cache.colorInfo=this._processColorInfo(b);return this},_createCache:function(b,e){if(e=h.createAttributeCache(b,e))e.ipData=this._interpolateData(b);return e},_getCacheObjects:function(b){var e;b=b||this._cache;var r=[];for(e in b){var t=b[e];b.hasOwnProperty(e)&&t&&"object"===typeof t&&(t.hasOwnProperty("idSource")?
r.push(t):r=r.concat(this._getCacheObjects(t)))}return r},_processColorInfo:function(b){b&&(c.forEach(b.colors,function(e,r){y.isArray(e)&&(b.colors[r]=new m(e))}),c.forEach(b.stops,function(e,r){e.color&&y.isArray(e.color)&&(b.stops[r].color=new m(e.color))}));return this._createCache(b)},getColor:function(b,e){e=this._getVarInfo(e&&e.colorInfo,"colorInfo");return this._getColorComponent(b,e.variable,this._cache[e.cacheKey])},setOpacityInfo:function(b){this.opacityInfo=b;this._cache.opacityInfo=
this._processOpacityInfo(b);return this},_processOpacityInfo:function(b){return this._createCache(b)},getOpacity:function(b,e){e=this._getVarInfo(e&&e.opacityInfo,"opacityInfo");return this._getColorComponent(b,e.variable,this._cache[e.cacheKey],!0)},_getColorComponent:function(b,e,r,t,g){var k="number"===typeof b?b:null,x=r&&r.hasExpr,v=r&&r.ipData,A;e&&e.field||x?("number"!==typeof k&&"object"===typeof b&&b&&(k=this._getDataValue(b,e,null,r)),this._isValidNumber(k)||(k=null),null!=k&&(A=t?this._getOpacity(k,
e,v):this._getColor(k,e,v))):e&&(b=e.stops,t?(A=b&&b[0]&&b[0].opacity,null==A&&(A=e.opacityValues&&e.opacityValues[0])):A=b&&b[0]&&b[0].color||e.colors&&e.colors[0]);g&&(g.data=k,g.value=A);return g||A},_isValidNumber:function(b){return"number"===typeof b&&!isNaN(b)&&Infinity!==b&&-Infinity!==b},_interpolateData:function(b){if(b)if(b.colors||b.opacityValues){var e=(b.colors||b.opacityValues).length,r=b.minDataValue,t=(b.maxDataValue-r)/(e-1);var g=[];for(b=0;b<e;b++)g[b]=r+b*t}else b.stops&&(g=c.map(b.stops,
function(k){return k.value}));return g},_getOpacity:function(b,e,r){b=this._lookupData(b,r);e=e||this.opacityInfo;if(b){r=b[0];var t=b[1];r===t?t=this._getOpacValue(e,r):(r=this._getOpacValue(e,r),e=this._getOpacValue(e,t),t=r+(e-r)*b[2])}return t},_getOpacValue:function(b,e){return b.opacityValues?b.opacityValues[e]:b.stops[e].opacity},_getColor:function(b,e,r){b=this._lookupData(b,r);e=e||this.colorInfo;if(b){var t=b[0];r=b[1];t=t===r?this._getColorObj(e,t):m.blendColors(this._getColorObj(e,t),
this._getColorObj(e,r),b[2])}return t},_getColorObj:function(b,e){return b.colors?b.colors[e]:b.stops[e].color},_lookupData:function(b,e){if(e){var r=0,t=e.length-1;c.some(e,function(k,x){if(b<k)return t=x,!0;r=x;return!1});var g=[r,t,(b-e[r])/(e[t]-e[r])]}return g},_meterIn:{inches:1/.0254,feet:1/.3048,yards:1/.9144,miles:1/1609.344,"nautical-miles":1/1852,millimeters:1E3,centimeters:100,decimeters:10,meters:1,kilometers:.001,"decimal-degrees":180/20015077},_writeSizeInfo:function(b){if(b){b=y.mixin({},
b);this._convertExpressionToArcade(b);var e=b.minSize,r=b.maxSize;e&&(b.minSize="number"===typeof e?q.px2pt(e):this._writeSizeInfo(e));r&&(b.maxSize="number"===typeof r?q.px2pt(r):this._writeSizeInfo(r));if(e=b.legendOptions)if(b.legendOptions=y.mixin({},e),e=e.customValues)b.legendOptions.customValues=e.slice(0);b.stops&&(b.stops=c.map(b.stops,function(t){t=y.mixin({},t);t.size&&"number"===typeof t.size&&(t.size=q.px2pt(t.size));return t}))}return b},_writeColorInfo:function(b){b&&(b=y.mixin({},
b),b.colors&&(b.colors=c.map(b.colors,function(e){return m.toJsonColor(e)})),b.stops&&(b.stops=c.map(b.stops,function(e){e=y.mixin({},e);e.color&&(e.color=m.toJsonColor(e.color));return e})),b.legendOptions&&(b.legendOptions=y.mixin({},b.legendOptions)));return b},_writeOpacityInfo:function(b){if(b){var e=y.mixin({},b);e.opacityValues&&(e.transparencyValues=c.map(e.opacityValues,function(r){return 100*(1-r)}),delete e.opacityValues);e.stops&&(e.stops=c.map(e.stops,function(r){r=y.mixin({},r);r.transparency=
100*(1-r.opacity);delete r.opacity;return r}));e.legendOptions&&(e.legendOptions=y.mixin({},e.legendOptions))}return e},toJson:function(b){var e=this.visualVariables,r=y.clone(this.authoringInfo),t=b&&b.useLegacyRotationProperties,g=(b=(b=this.getVisualVariablesForType("rotationInfo",!1))&&b[0])&&b.field,k;b&&(b===this.rotationInfo||t)&&(k=b.expression||g&&(y.isFunction(g)?g:"["+g+"]"));e&&(e=c.map(e,function(x){"sizeInfo"===x.type?x=this._writeSizeInfo(x):"colorInfo"===x.type?x=this._writeColorInfo(x):
"opacityInfo"===x.type?(x=this._writeOpacityInfo(x),x.type="transparencyInfo"):"rotationInfo"===x.type&&(x=t?null:y.mixin({},x));return x},this),e=c.filter(e,function(x){return null!=x}));r&&c.forEach(r.visualVariables,function(x){"opacityInfo"===x.type&&(x.type="transparencyInfo")});return{rotationType:k&&(this._getRotationType(b)||"geographic"),rotationExpression:k,colorInfo:this._writeColorInfo(this.colorInfo),transparencyInfo:this._writeOpacityInfo(this.opacityInfo),sizeInfo:this._writeSizeInfo(this.sizeInfo),
visualVariables:e,authoringInfo:r}}});u("extend-esri")&&y.setObject("renderer.Renderer",B,l);return B})},"esri/layers/support/attributeUtils":function(){define("dojo/_base/lang dojo/has dojox/encoding/digests/_base dojox/encoding/digests/MD5 ../../kernel ../../support/expressionUtils".split(" "),function(B,y,c,u,q,l){var m={viewScaleRE:/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,getAttributeId:function(h){return"string"===typeof h?u(h,c.outputTypes.Hex):null},getAttributeIdSource:function(h){if(!h)return null;
var f=h.field,d=h.valueExpression,a=null;if(d)a=d;else if(B.isFunction(f))a=f.toString();else if(f){var b=(d=h.normalizationField)?"field":h.normalizationType;h=parseFloat(h.normalizationTotal);b&&(b=b.toLowerCase(),a=f.toLowerCase()+",norm:"+b,d?a+=","+d.toLowerCase():"percent-of-total"===b&&(f=h,"number"===typeof f&&!isNaN(f)&&Infinity!==f&&-Infinity!==f&&0!==h||(h=null),a+=","+h))}return a},createAttributeCache:function(h,f){if(!h)return null;var d=h.valueExpression,a=l.createSyntaxTree(d),b=m.getAttributeIdSource(h);
return{attributeInfo:h,isNumeric:!f,idSource:b,id:m.getAttributeId(b),hasExpr:!!d,compiledFunc:l.createFunction(a),syntaxTree:a,isScaleDriven:!!h.expression||m.viewScaleRE.test(d),dependsOnView:a?l.dependsOnView(a):!1,dependsOnGeometry:a?l.hasGeometryOperations(a):!1,isJSFunc:B.isFunction(h.field)}}};y("extend-esri")&&B.setObject("layers.support.attributeUtils",m,q);return m})},"dojox/encoding/digests/_base":function(){define(["dojo/_base/lang"],function(B){B=B.getObject("dojox.encoding.digests",
!0);B.outputTypes={Base64:0,Hex:1,String:2,Raw:3};B.addWords=function(y,c){var u=(y&65535)+(c&65535);return(y>>16)+(c>>16)+(u>>16)<<16|u&65535};B.stringToWord=function(y){for(var c=[],u=0,q=8*y.length;u<q;u+=8)c[u>>5]|=(y.charCodeAt(u/8)&255)<<u%32;return c};B.wordToString=function(y){for(var c=[],u=0,q=32*y.length;u<q;u+=8)c.push(String.fromCharCode(y[u>>5]>>>u%32&255));return c.join("")};B.wordToHex=function(y){for(var c=[],u=0,q=4*y.length;u<q;u++)c.push("0123456789abcdef".charAt(y[u>>2]>>u%4*
8+4&15)+"0123456789abcdef".charAt(y[u>>2]>>u%4*8&15));return c.join("")};B.wordToBase64=function(y){for(var c=[],u=0,q=4*y.length;u<q;u+=3)for(var l=(y[u>>2]>>u%4*8&255)<<16|(y[u+1>>2]>>(u+1)%4*8&255)<<8|y[u+2>>2]>>(u+2)%4*8&255,m=0;4>m;m++)8*u+6*m>32*y.length?c.push("\x3d"):c.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(l>>6*(3-m)&63));return c.join("")};B.stringToUtf8=function(y){for(var c="",u=-1,q,l;++u<y.length;)q=y.charCodeAt(u),l=u+1<y.length?y.charCodeAt(u+
1):0,55296<=q&&56319>=q&&56320<=l&&57343>=l&&(q=65536+((q&1023)<<10)+(l&1023),u++),127>=q?c+=String.fromCharCode(q):2047>=q?c+=String.fromCharCode(192|q>>>6&31,128|q&63):65535>=q?c+=String.fromCharCode(224|q>>>12&15,128|q>>>6&63,128|q&63):2097151>=q&&(c+=String.fromCharCode(240|q>>>18&7,128|q>>>12&63,128|q>>>6&63,128|q&63));return c};return B})},"dojox/encoding/digests/MD5":function(){define(["./_base"],function(B){function y(h,f){return h<<f|h>>>32-f}function c(h,f,d,a,b,e){return B.addWords(y(B.addWords(B.addWords(f,
h),B.addWords(a,e)),b),d)}function u(h,f,d,a,b,e,r){return c(f&d|~f&a,h,f,b,e,r)}function q(h,f,d,a,b,e,r){return c(f&a|d&~a,h,f,b,e,r)}function l(h,f,d,a,b,e,r){return c(d^(f|~a),h,f,b,e,r)}function m(h,f){h[f>>5]|=128<<f%32;h[(f+64>>>9<<4)+14]=f;f=1732584193;for(var d=-271733879,a=-1732584194,b=271733878,e=0;e<h.length;e+=16){var r=f,t=d,g=a,k=b;f=u(f,d,a,b,h[e+0],7,-680876936);b=u(b,f,d,a,h[e+1],12,-389564586);a=u(a,b,f,d,h[e+2],17,606105819);d=u(d,a,b,f,h[e+3],22,-1044525330);f=u(f,d,a,b,h[e+
4],7,-176418897);b=u(b,f,d,a,h[e+5],12,1200080426);a=u(a,b,f,d,h[e+6],17,-1473231341);d=u(d,a,b,f,h[e+7],22,-45705983);f=u(f,d,a,b,h[e+8],7,1770035416);b=u(b,f,d,a,h[e+9],12,-1958414417);a=u(a,b,f,d,h[e+10],17,-42063);d=u(d,a,b,f,h[e+11],22,-1990404162);f=u(f,d,a,b,h[e+12],7,1804603682);b=u(b,f,d,a,h[e+13],12,-40341101);a=u(a,b,f,d,h[e+14],17,-1502002290);d=u(d,a,b,f,h[e+15],22,1236535329);f=q(f,d,a,b,h[e+1],5,-165796510);b=q(b,f,d,a,h[e+6],9,-1069501632);a=q(a,b,f,d,h[e+11],14,643717713);d=q(d,a,
b,f,h[e+0],20,-373897302);f=q(f,d,a,b,h[e+5],5,-701558691);b=q(b,f,d,a,h[e+10],9,38016083);a=q(a,b,f,d,h[e+15],14,-660478335);d=q(d,a,b,f,h[e+4],20,-405537848);f=q(f,d,a,b,h[e+9],5,568446438);b=q(b,f,d,a,h[e+14],9,-1019803690);a=q(a,b,f,d,h[e+3],14,-187363961);d=q(d,a,b,f,h[e+8],20,1163531501);f=q(f,d,a,b,h[e+13],5,-1444681467);b=q(b,f,d,a,h[e+2],9,-51403784);a=q(a,b,f,d,h[e+7],14,1735328473);d=q(d,a,b,f,h[e+12],20,-1926607734);f=c(d^a^b,f,d,h[e+5],4,-378558);b=c(f^d^a,b,f,h[e+8],11,-2022574463);
a=c(b^f^d,a,b,h[e+11],16,1839030562);d=c(a^b^f,d,a,h[e+14],23,-35309556);f=c(d^a^b,f,d,h[e+1],4,-1530992060);b=c(f^d^a,b,f,h[e+4],11,1272893353);a=c(b^f^d,a,b,h[e+7],16,-155497632);d=c(a^b^f,d,a,h[e+10],23,-1094730640);f=c(d^a^b,f,d,h[e+13],4,681279174);b=c(f^d^a,b,f,h[e+0],11,-358537222);a=c(b^f^d,a,b,h[e+3],16,-722521979);d=c(a^b^f,d,a,h[e+6],23,76029189);f=c(d^a^b,f,d,h[e+9],4,-640364487);b=c(f^d^a,b,f,h[e+12],11,-421815835);a=c(b^f^d,a,b,h[e+15],16,530742520);d=c(a^b^f,d,a,h[e+2],23,-995338651);
f=l(f,d,a,b,h[e+0],6,-198630844);b=l(b,f,d,a,h[e+7],10,1126891415);a=l(a,b,f,d,h[e+14],15,-1416354905);d=l(d,a,b,f,h[e+5],21,-57434055);f=l(f,d,a,b,h[e+12],6,1700485571);b=l(b,f,d,a,h[e+3],10,-1894986606);a=l(a,b,f,d,h[e+10],15,-1051523);d=l(d,a,b,f,h[e+1],21,-2054922799);f=l(f,d,a,b,h[e+8],6,1873313359);b=l(b,f,d,a,h[e+15],10,-30611744);a=l(a,b,f,d,h[e+6],15,-1560198380);d=l(d,a,b,f,h[e+13],21,1309151649);f=l(f,d,a,b,h[e+4],6,-145523070);b=l(b,f,d,a,h[e+11],10,-1120210379);a=l(a,b,f,d,h[e+2],15,
718787259);d=l(d,a,b,f,h[e+9],21,-343485551);f=B.addWords(f,r);d=B.addWords(d,t);a=B.addWords(a,g);b=B.addWords(b,k)}return[f,d,a,b]}B.MD5=function(h,f){f=f||B.outputTypes.Base64;h=m(B.stringToWord(h),8*h.length);switch(f){case B.outputTypes.Raw:return h;case B.outputTypes.Hex:return B.wordToHex(h);case B.outputTypes.String:return B.wordToString(h);default:return B.wordToBase64(h)}};B.MD5._hmac=function(h,f,d){d=d||B.outputTypes.Base64;var a=B.stringToWord(f);16<a.length&&(a=m(a,8*f.length));var b=
[];f=[];for(var e=0;16>e;e++)b[e]=a[e]^909522486,f[e]=a[e]^1549556828;h=m(b.concat(B.stringToWord(h)),512+8*h.length);h=m(f.concat(h),640);switch(d){case B.outputTypes.Raw:return h;case B.outputTypes.Hex:return B.wordToHex(h);case B.outputTypes.String:return B.wordToString(h);default:return B.wordToBase64(h)}};return B.MD5})},"esri/support/expressionUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/has dojo/Deferred ../kernel ../arcade/arcade ../arcade/Feature".split(" "),function(B,
y,c,u,q,l,m){var h={vars:{$feature:"any",$view:"any"}},f=/^\$feature\./i,d={_getSyntaxTree:function(a){return"string"===typeof a?d.createSyntaxTree(a):a},createSyntaxTree:function(a){try{var b=a?l.parseScript(a):null}catch(e){b=null}return b},createFunction:function(a,b){b=b||B.clone(h);a=d._getSyntaxTree(a);try{var e=a?l.compileScript(a,b):null}catch(r){console.log("expressionUtils.createFunction: compilation failed. "+(r.message||"")),e=null}return e},createExecContext:function(a,b){return{vars:{$feature:a?
m.createFromGraphic(a):new m,$view:b&&b.view},spatialReference:b&&b.sr}},evalSyntaxTree:function(a,b){try{var e=l.executeScript(a,b)}catch(r){e=null}return e},executeFunction:function(a,b){try{var e=a?a(b):null}catch(r){e=null}return e},executeAsyncFunction:function(a,b){try{var e=a?a(b):(new u).reject(Error("expressionUtils.executeAsyncFunction: Invalid argument. compiledFunc is missing."))}catch(r){e=(new u).reject(r)}return e},extractFieldNames:function(a){a=d._getSyntaxTree(a);a=l.extractFieldLiterals(a);
var b=[];y.forEach(a,function(e){f.test(e)&&(e=e.replace(f,""),b.push(e))});b.sort();return y.filter(b,function(e,r){return 0===r||b[r-1]!==e})},dependsOnView:function(a){return d.hasVariable(a,"$view")},hasGeometryOperations:function(a){return(a=d._getSyntaxTree(a))?l.scriptUsesGeometryEngine(a):!1},enableGeometryOperations:function(){return l.enableGeometrySupport()},hasVariable:function(a,b){return(a=d._getSyntaxTree(a))?l.referencesMember(a,b):!1},hasFunction:function(a,b){return(a=d._getSyntaxTree(a))?
l.referencesFunction(a,b):!1},createFeatureSetFromLayer:function(a,b){b=b||{};var e=l.featureSetUtils();return e?e.constructFeatureSet(a,b.spatialReference,b.outFields,b.returnGeometry,b.cache):null},createFeatureSetFromLayerUrl:function(a,b){b=b||{};var e=l.featureSetUtils();return e?e.constructFeatureSetFromUrlRaw(a,b.spatialReference,b.outFields,b.returnGeometry,b.cache):null},createFeatureSetCollectionFromMap:function(a,b){var e=l.featureSetUtils();return e?e.createFeatureSetCollectionFromMap(a,
a.spatialReference,b&&b.cache):null},createFeatureSetCollectionFromServiceUrl:function(a,b){b=b||{};var e=l.featureSetUtils();return e?e.createFeatureSetCollectionFromService(a,b.spatialReference,b.cache):null},hasFeatureSetOperations:function(a){return(a=d._getSyntaxTree(a))?l.scriptUsesFeatureSet(a):!1},enableFeatureSetOperations:function(){return l.enableFeatureSetSupport().then(function(){var a=l.featureSetUtils();a&&a.initialiseMetaDataCache()})},enableAsyncOperations:function(){return l.enableAsyncSupport()}};
c("extend-esri")&&B.setObject("support.expressionUtils",d,q);return d})},"esri/arcade/arcade":function(){define("require exports ./arcadeCompiler ./arcadeRuntime ./languageUtils ./parser ./treeAnalysis dojo/has ./polyfill/promiseUtils ../moment".split(" "),function(B,y,c,u,q,l,m,h,f,d){function a(M,T){if(null===C)throw Error("Async Arcade must be enabled for this script");return h("csp-restrictions")||!1===w?function(Y){return C.executeScript(M,Y)}:c.compileScript(M,T,!0)}function b(M,T){void 0===
T&&(T=[]);return l.parseScript(M,T)}function e(M,T){if(!0===T.useAsync||!0===M.isAsync){if(null===C)throw Error("Async Arcade must be enabled for this script");return C.executeScript(M,T)}return u.executeScript(M,T)}function r(M,T){return u.referencesMember(M,T)}function t(M,T){void 0===T&&(T=[]);void 0===M.usesGeometry&&m.findScriptDependencies(M,T);return!0===M.usesGeometry}function g(){return z?z:z=f.create(function(M,T){B(["../geometry/geometryEngine","./functions/geomsync"],function(Y,fa){D=
!0;fa.setGeometryEngine(Y);M(!0)},function(Y){T(Y)})})}function k(){return null!==E?E:E=c.enableAsyncSupport().then(function(){return f.create(function(M,T){B(["./arcadeAsyncRuntime"],function(Y){try{C=Y;Y=0;for(var fa=G;Y<fa.length;Y++){var ca=fa[Y];C.extend(ca);c.extend(ca,"async")}G=null;M(!0)}catch(X){T(X)}},T)})})}function x(){return C?!0:!1}function v(){return H?H:H=k().then(function(){return f.create(function(M,T){B(["./featureSetUtils","./functions/featuresetbase","./functions/featuresetgeom",
"./functions/featuresetstats","./functions/featuresetstring"],function(Y,fa,ca,X,ea){try{I=Y,C.extend([fa,ca,X,ea]),c.extend([fa,ca,X,ea],"async"),p=!0,M(!0)}catch(ma){T(ma)}},T)})})}function A(M,T){void 0===T&&(T=[]);void 0===M.usesFeatureSet&&m.findScriptDependencies(M,T);return!0===M.usesFeatureSet}function n(M,T){if(T)for(var Y=0;Y<T.length;Y++)if(r(M,T[Y]))return!0;return!1}Object.defineProperty(y,"__esModule",{value:!0});y.featureSetUtils=y.scriptTouchesGeometry=y.loadScriptDependencies=y.scriptIsAsync=
y.scriptUsesFeatureSet=y.enableFeatureSetSupport=y.isGeometryEnabled=y.isAsyncEnabled=y.isFeatureSetSupportEnabled=y.enableAsyncSupport=y.enableGeometrySupport=y.scriptUsesGeometryEngine=y.extractFieldLiterals=y.referencesFunction=y.referencesMember=y.executeScript=y.parseAndExecuteScript=y.scriptCheck=y.validateScript=y.parseScript=y.extend=y.compileScript=void 0;var w=function(){if(h("csp-restrictions"))return!1;try{return(new Function("function* test() {}; return true"))()}catch(M){return!1}}(),
p=!1,D=!1,C=null,G=[];y.compileScript=function(M,T){return!0===T.useAsync||!0===M.isAsync?a(M,T):h("csp-restrictions")?function(Y){return u.executeScript(M,Y)}:c.compileScript(M,T)};y.extend=function(M){u.extend(M);c.extend(M,"sync");null===C?G.push(M):(c.extend(M,"async"),C.extend(M))};y.parseScript=b;y.validateScript=function(M,T,Y){void 0===Y&&(Y="");return l.validateScript(M,T,Y)};y.scriptCheck=function(M,T,Y,fa){void 0===fa&&(fa="");return l.scriptCheck(M,T,Y,fa)};y.parseAndExecuteScript=function(M,
T,Y){void 0===Y&&(Y=[]);M=l.parseScript(M,Y);return e(M,T)};y.executeScript=e;y.referencesMember=r;y.referencesFunction=function(M,T){return u.referencesFunction(M,T)};y.extractFieldLiterals=function(M,T){void 0===T&&(T=!1);return l.extractFieldLiterals(M,T)};y.scriptUsesGeometryEngine=t;var z=null;y.enableGeometrySupport=g;var E=null;y.enableAsyncSupport=k;y.isFeatureSetSupportEnabled=function(){return p};y.isAsyncEnabled=x;y.isGeometryEnabled=function(){return D};var H=null;y.enableFeatureSetSupport=
v;y.scriptUsesFeatureSet=A;y.scriptIsAsync=function(M,T){void 0===T&&(T=[]);void 0===M.isAsync&&m.findScriptDependencies(M,T);return!0===M.isAsync};y.loadScriptDependencies=function(M,T,Y,fa){void 0===Y&&(Y=[]);void 0===fa&&(fa=!1);return f.create(function(ca,X){var ea="string"===typeof M?b(M):M,ma=[];ea&&(!1===D&&(t(ea)||fa)&&ma.push(g()),!1===x()&&(!0===ea.isAsync||T)&&ma.push(k()),!1===p&&(A(ea)||n(ea,Y))&&ma.push(v()));ma?f.all(ma).then(function(){ca(!0)},X):ca(!0)})};y.scriptTouchesGeometry=
function(M){if(t(M))return!0;M=m.findFunctionCalls(M);return-1<M.indexOf("geometry")||-1<M.indexOf("feature")?!0:!1};var I=null;y.featureSetUtils=function(){return I};q.MomentLibrary.Moment=d})},"esri/arcade/arcadeCompiler":function(){define("require exports ./ArcadePortal ./Attachment ./Dictionary ./Feature ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ./polyfill/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../SpatialReference".split(" "),
function(B,y,c,u,q,l,m,h,f,d,a,b,e,r,t,g,k,x,v,A,n,w,p,D,C){function G(W,U,na){try{return na(W,null,U)}catch(qa){throw qa;}}function z(W){return W instanceof Error?x.reject(W):x.reject(Error(W))}function E(W,U){try{switch(U.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return Y(W,U);case "VariableDeclaration":for(var na=[],qa=0;qa<U.declarations.length;qa++)na.push(E(W,U.declarations[qa]));return na.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":return T(W,
U);case "FunctionDeclaration":var Ea=U.id.name.toLowerCase(),Ta={isAsync:W.isAsync,spatialReference:W.spatialReference,console:W.console,lrucache:W.lrucache,services:W.services,symbols:W.symbols,mangleMap:W.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:W.depthCounter+1,globalScope:W.globalScope};if(64<Ta.depthCounter)throw Error("Exceeded maximum function depth");na="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";
for(qa=0;qa<U.params.length;qa++){var Ya=U.params[qa].name.toLowerCase(),bb=ta(W);Ta.localScope._SymbolsMap[Ya]=bb;Ta.mangleMap[Ya]=bb;na+="lscope['"+bb+"']\x3darguments["+qa.toString()+"];\n"}!0===W.isAsync?(na=na+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(T(Ta,U.body)+"\n return lastStatement; "),na+="});  }, runtimeCtx))\n lastStatement \x3d lc.voidOperation; \n"):(na+=T(Ta,U.body)+"\n return lastStatement; }, runtimeCtx))",na+="\n lastStatement \x3d lc.voidOperation; \n");
if(void 0!==W.globalScope[Ea])var Ma="gscope['"+Ea+"']\x3d"+na;else void 0!==W.globalScope._SymbolsMap[Ea]?Ma="gscope['"+W.globalScope._SymbolsMap[Ea]+"']\x3d"+na:(bb=ta(W),W.globalScope._SymbolsMap[Ea]=bb,W.mangleMap[Ea]=bb,Ma="gscope['"+bb+"']\x3d"+na);return Ma;case "ReturnStatement":var J=null===U.argument?"return lc.voidOperation":"return "+E(W,U.argument);return J;case "IfStatement":if("AssignmentExpression"===U.test.type||"UpdateExpression"===U.test.type)throw Error(d.nodeErrorMessage(U.test,
"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var Q=E(W,U.test),Z=N(W),L="var "+Z+" \x3d "+Q+";\n if ("+Z+" \x3d\x3d\x3d true) {\n"+M(W,U.consequent)+"\n }\n";L=null!==U.alternate?L+("else if ("+Z+"\x3d\x3d\x3dfalse)   { \n"+M(W,U.alternate)+"}\n"):L+("else if ("+Z+"\x3d\x3d\x3dfalse) { \n lastStatement \x3d lc.voidOperation;\n }\n");return L+="else { lang.error({type: '"+U.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n";case "ExpressionStatement":var R="AssignmentExpression"===
U.expression.type?"lastStatement \x3d lc.voidOperation; "+E(W,U.expression)+"; \n ":"lastStatement \x3d "+E(W,U.expression)+"; ";return R;case "AssignmentExpression":return I(W,U);case "UpdateExpression":return H(W,U);case "BreakStatement":return"break";case "ContinueStatement":return"continue";case "TemplateLiteral":try{var aa=[];Ea=Ma=0;for(qa=U.quasis;Ea<qa.length;Ea++){var ka=qa[Ea];aa.push(ka.value?JSON.stringify(ka.value.cooked):JSON.stringify(""));!1===ka.tail&&(aa.push(U.expressions[Ma]?"lang.castString(lang.aCheck("+
E(W,U.expressions[Ma])+", 'TemplateLiteral'))":""),Ma++)}na="(["+aa.join(",")+"]).join('')"}catch(nb){throw nb;}return na;case "TemplateElement":return JSON.stringify(U.value?U.value.cooked:"");case "ForStatement":na="lastStatement \x3d lc.voidOperation; \n";null!==U.init&&(na+=E(W,U.init)+"; ");var ua=N(W),Aa=N(W);na+="var "+ua+" \x3d true; \n do { ";null!==U.update&&(na+=" if ("+ua+"\x3d\x3d\x3dfalse) {\n "+E(W,U.update)+"  \n}\n "+ua+"\x3dfalse; \n");null!==U.test&&(na+="var "+Aa+" \x3d "+E(W,
U.test)+"; ",na+="if ("+Aa+"\x3d\x3d\x3dfalse) { break; } else if ("+Aa+"!\x3d\x3dtrue) { lang.error({type: '"+U.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n");na+=E(W,U.body);null!==U.update&&(na+="\n "+E(W,U.update));return na+("\n"+ua+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation; ");case "ForInStatement":var Ba=N(W),Qa=N(W),La=N(W),Ia="var "+Ba+" \x3d "+E(W,U.right)+";\n";"VariableDeclaration"===U.left.type&&(Ia+=E(W,U.left));var Na="VariableDeclaration"===
U.left.type?U.left.declarations[0].id.name:U.left.name;Na=Na.toLowerCase();na="";null!==W.localScope&&(void 0!==W.localScope[Na]?na="lscope['"+Na+"']":void 0!==W.localScope._SymbolsMap[Na]&&(na="lscope['"+W.localScope._SymbolsMap[Na]+"']"));""===na&&(void 0!==W.globalScope[Na]?na="gscope['"+Na+"']":void 0!==W.globalScope._SymbolsMap[Na]&&(na="gscope['"+W.globalScope._SymbolsMap[Na]+"']"));Ia=Ia+("if ("+Ba+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n else if (lc.isArray(")+(Ba+") || lc.isString("+
Ba+")) {var ")+(Qa+"\x3d"+Ba+".length; \nfor(var ")+(La+"\x3d0; "+La+"\x3c"+Qa+"; "+La+"++) {\n");Ia+=na+"\x3d"+La+";\n";Ia+=E(W,U.body);Ia+="\n}\n";Ia+=" lastStatement \x3d lc.voidOperation; \n";Ia+=" \n}\n";Ia+="else if (lc.isImmutableArray("+Ba+")) {";Ia=Ia+("var "+Qa+"\x3d"+Ba+".length(); \nfor(var ")+(La+"\x3d0; "+La+"\x3c"+Qa+"; "+La+"++) {\n");Ia+=na+"\x3d"+La+";\n";Ia+=E(W,U.body);Ia+="\n}\n";Ia+=" lastStatement \x3d lc.voidOperation; \n";Ia+=" \n}\n";Ia+="else if (( "+Ba+" instanceof lang.Dictionary) || ( "+
Ba+" instanceof lang.Feature)) {";Ia=Ia+("var "+Qa+"\x3d"+Ba+".keys(); \nfor(var ")+(La+"\x3d0; "+La+"\x3c"+Qa+".length; "+La+"++) {\n");Ia+=na+"\x3d"+Qa+"["+La+"];\n";Ia+=E(W,U.body);Ia+="\n}\n";Ia+=" lastStatement \x3d lc.voidOperation; \n";Ia+=" \n}\n";W.isAsync&&(Ia+="else if (lc.isFeatureSet("+Ba+")) {",Ia=Ia+("var "+Qa+"\x3d"+Ba+".iterator(runtimeCtx.abortSignal); \nfor(var ")+(La+"\x3dlang. graphicToFeature( yield "+Qa+".next(),"+Ba+"); "+La+"!\x3dnull; "+La+"\x3dlang. graphicToFeature( yield "+
Qa+".next(),"+Ba+")) {\n")+(na+"\x3d"+La+";\n"),Ia+=E(W,U.body),Ia+="\n}\n",Ia+=" lastStatement \x3d lc.voidOperation; \n",Ia+=" \n}\n");return Ia+"else { lastStatement \x3d lc.voidOperation; } \n";case "Identifier":return ca(W,U);case "MemberExpression":try{na=void 0;na=!0===U.computed?E(W,U.property):"'"+U.property.name+"'";var eb="lang.member("+E(W,U.object)+","+na+")"}catch(nb){throw nb;}return eb;case "Literal":return null===U.value||void 0===U.value?"null":JSON.stringify(U.value);case "ThisExpression":throw Error(d.nodeErrorMessage(U,
"RUNTIME","NOTSUPPORTED"));case "CallExpression":try{if("Identifier"!==U.callee.type)throw Error(d.nodeErrorMessage(U,"RUNTIME","ONLYNODESSUPPORTED"));var ab=U.callee.name.toLowerCase();na="";null!==W.localScope&&(void 0!==W.localScope[ab]?na="lscope['"+ab+"']":void 0!==W.localScope._SymbolsMap[ab]&&(na="lscope['"+W.localScope._SymbolsMap[ab]+"']"));""===na&&(void 0!==W.globalScope[ab]?na="gscope['"+ab+"']":void 0!==W.globalScope._SymbolsMap[ab]&&(na="gscope['"+W.globalScope._SymbolsMap[ab]+"']"));
if(""!==na){qa="[";for(ka=0;ka<U.arguments.length;ka++)0<ka&&(qa+=", "),qa+=E(W,U.arguments[ka]);qa+="]";aa=W.isAsync?"(yield lang.callfunc("+na+","+qa+",runtimeCtx) )":"lang.callfunc("+na+","+qa+",runtimeCtx)"}else throw Error(d.nodeErrorMessage(U,"RUNTIME","NOTFOUND"));}catch(nb){throw nb;}return aa;case "UnaryExpression":try{var gb="lang.unary("+E(W,U.argument)+",'"+U.operator+"')"}catch(nb){throw nb;}return gb;case "BinaryExpression":try{var cb="lang.binary("+E(W,U.left)+","+E(W,U.right)+",'"+
U.operator+"')"}catch(nb){throw nb;}return cb;case "LogicalExpression":try{if("AssignmentExpression"===U.left.type||"UpdateExpression"===U.left.type)throw Error(d.nodeErrorMessage(U.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===U.right.type||"UpdateExpression"===U.right.type)throw Error(d.nodeErrorMessage(U.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("\x26\x26"===U.operator||"||"===U.operator)var kb="(lang.logicalCheck("+E(W,U.left)+") "+U.operator+
" lang.logicalCheck("+E(W,U.right)+"))";else throw Error(d.nodeErrorMessage(U,"RUNTIME","ONLYORORAND"));}catch(nb){throw nb;}return kb;case "ConditionalExpression":throw Error(d.nodeErrorMessage(U,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{na=[];for(qa=0;qa<U.elements.length;qa++)"Literal"===U.elements[qa].type?na.push(E(W,U.elements[qa])):na.push("lang.aCheck("+E(W,U.elements[qa])+",'ArrayExpression')");var ub="["+na.join(",")+"]"}catch(nb){throw nb;}return ub;case "ObjectExpression":na=
"lang.dictionary([";for(qa=0;qa<U.properties.length;qa++){var ob=U.properties[qa],db="Identifier"===ob.key.type?"'"+ob.key.name+"'":E(W,ob.key),jb=E(W,ob.value);0<qa&&(na+=",");na+="lang.strCheck("+db+",'ObjectExpression'),lang.aCheck("+jb+", 'ObjectExpression')"}return na+"])";case "Property":throw Error("Should not get here");case "Array":throw Error(d.nodeErrorMessage(U,"RUNTIME","NOTSUPPORTED"));default:throw Error(d.nodeErrorMessage(U,"RUNTIME","UNREOGNISED"));}}catch(nb){throw nb;}}function H(W,
U){var na=null,qa="";if("MemberExpression"===U.argument.type)return na=E(W,U.argument.object),qa=!0===U.argument.computed?E(W,U.argument.property):"'"+U.argument.property.name+"'","lang.memberupdate("+na+","+qa+",'"+U.operator+"',"+U.prefix+")";na=U.argument.name.toLowerCase();if(null!==W.localScope){if(void 0!==W.localScope[na])return"lang.update(lscope, '"+na+"','"+U.operator+"',"+U.prefix+")";if(void 0!==W.localScope._SymbolsMap[na])return"lang.update(lscope, '"+W.localScope._SymbolsMap[na]+"','"+
U.operator+"',"+U.prefix+")"}if(void 0!==W.globalScope[na])return"lang.update(gscope, '"+na+"','"+U.operator+"',"+U.prefix+")";if(void 0!==W.globalScope._SymbolsMap[na])return"lang.update(gscope, '"+W.globalScope._SymbolsMap[na]+"','"+U.operator+"',"+U.prefix+")";throw Error("Variable not recognised");}function I(W,U){var na=E(W,U.right),qa=null,Ea="";if("MemberExpression"===U.left.type)return qa=E(W,U.left.object),Ea=!0===U.left.computed?E(W,U.left.property):"'"+U.left.property.name+"'","lang.assignmember("+
qa+","+Ea+",'"+U.operator+"',"+na+")";qa=U.left.name.toLowerCase();if(null!==W.localScope){if(void 0!==W.localScope[qa])return"lscope['"+qa+"']\x3dlang.assign("+na+",'"+U.operator+"', lscope['"+qa+"'])";if(void 0!==W.localScope._SymbolsMap[qa])return"lscope['"+W.localScope._SymbolsMap[qa]+"']\x3dlang.assign("+na+",'"+U.operator+"', lscope['"+W.localScope._SymbolsMap[qa]+"'])"}if(void 0!==W.globalScope[qa])return"gscope['"+qa+"']\x3dlang.assign("+na+",'"+U.operator+"', gscope['"+qa+"'])";if(void 0!==
W.globalScope._SymbolsMap[qa])return"gscope['"+W.globalScope._SymbolsMap[qa]+"']\x3dlang.assign("+na+",'"+U.operator+"', gscope['"+W.globalScope._SymbolsMap[qa]+"'])";throw Error("Variable not recognised");}function M(W,U){return"BlockStatement"===U.type?E(W,U):"ReturnStatement"===U.type||"BreakStatement"===U.type||"ContinueStatement"===U.type?E(W,U)+"; ":"UpdateExpression"===U.type?"lastStatement \x3d "+E(W,U)+"; ":"ExpressionStatement"===U.type?E(W,U):"ObjectExpression"===U.type?"lastStatement \x3d "+
E(W,U)+"; ":E(W,U)+"; "}function T(W,U){for(var na="",qa=0;qa<U.body.length;qa++)na="ReturnStatement"===U.body[qa].type?na+(E(W,U.body[qa])+"; \n"):"BreakStatement"===U.body[qa].type?na+(E(W,U.body[qa])+"; \n"):"ContinueStatement"===U.body[qa].type?na+(E(W,U.body[qa])+"; \n"):"UpdateExpression"===U.body[qa].type?na+("lastStatement \x3d "+E(W,U.body[qa])+"; \n"):"ObjectExpression"===U.body[qa].type?na+("lastStatement \x3d "+E(W,U.body[qa])+"; \n"):na+(E(W,U.body[qa])+" \n");return na}function Y(W,
U){var na=null===U.init?null:E(W,U.init);na===f.voidOperation&&(na=null);U=U.id.name.toLowerCase();if(null!==W.localScope){if(void 0!==W.localScope[U])return"lscope['"+U+"']\x3d"+na+"; ";if(void 0!==W.localScope._SymbolsMap[U])return"lscope['"+W.localScope._SymbolsMap[U]+"']\x3d"+na+"; ";var qa=ta(W);W.localScope._SymbolsMap[U]=qa;W.mangleMap[U]=qa;return"lscope['"+qa+"']\x3d"+na+"; "}if(void 0!==W.globalScope[U])return"gscope['"+U+"']\x3d"+na+"; ";if(void 0!==W.globalScope._SymbolsMap[U])return"gscope['"+
W.globalScope._SymbolsMap[U]+"']\x3d"+na+"; ";qa=ta(W);W.globalScope._SymbolsMap[U]=qa;W.mangleMap[U]=qa;return"gscope['"+qa+"']\x3d"+na+"; "}function fa(W,U,na){U=U.toLowerCase();switch(U){case "hasz":return W=W.hasZ,void 0===W?!1:W;case "hasm":return W=W.hasM,void 0===W?!1:W;case "spatialreference":return U=W.spatialReference._arcadeCacheId,void 0===U&&(na=!0,Object.freeze&&Object.isFrozen(W.spatialReference)&&(na=!1),na&&(ya++,U=W.spatialReference._arcadeCacheId=ya)),W=new q({wkt:W.spatialReference.wkt,
wkid:W.spatialReference.wkid}),void 0!==U&&(W._arcadeCacheId="SPREF"+U.toString()),W}switch(W.type){case "extent":switch(U){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return W=W[U],void 0!==W?W:null;case "type":return"Extent"}break;case "polygon":switch(U){case "rings":return U=W.getCacheValue("_arcadeCacheId"),void 0===U&&(ya++,U=ya,W.setCacheValue("_arcadeCacheId",U)),W=new m(W.rings,W.spatialReference,!0===W.hasZ,!0===W.hasM,U);case "type":return"Polygon"}break;
case "point":switch(U){case "x":case "y":case "z":case "m":return void 0!==W[U]?W[U]:null;case "type":return"Point"}break;case "polyline":switch(U){case "paths":return U=W.getCacheValue("_arcadeCacheId"),void 0===U&&(ya++,U=ya,W.setCacheValue("_arcadeCacheId",U)),W=new m(W.paths,W.spatialReference,!0===W.hasZ,!0===W.hasM,U);case "type":return"Polyline"}break;case "multipoint":switch(U){case "points":return U=W.getCacheValue("_arcadeCacheId"),void 0===U&&(ya++,U=ya,W.setCacheValue("_arcadeCacheId",
U)),W=new h(W.points,W.spatialReference,!0===W.hasZ,!0===W.hasM,U,1);case "type":return"Multipoint"}}throw Error(d.nodeErrorMessage(na,"RUNTIME","PROPERTYNOTFOUND"));}function ca(W,U){try{var na=U.name.toLowerCase();if(null!==W.localScope){if(void 0!==W.localScope[na])return"lscope['"+na+"']";if(void 0!==W.localScope._SymbolsMap[na])return"lscope['"+W.localScope._SymbolsMap[na]+"']"}if(void 0!==W.globalScope[na])return"gscope['"+na+"']";if(void 0!==W.globalScope._SymbolsMap[na])return"gscope['"+W.globalScope._SymbolsMap[na]+
"']";throw Error(d.nodeErrorMessage(U,"RUNTIME","VARIABLENOTFOUND"));}catch(qa){throw qa;}}function X(W){return null===W?"":f.isArray(W)||f.isImmutableArray(W)?"Array":f.isDate(W)?"Date":f.isString(W)?"String":f.isBoolean(W)?"Boolean":f.isNumber(W)?"Number":W instanceof u?"Attachment":W instanceof c?"Portal":W instanceof q?"Dictionary":W instanceof l?"Feature":W instanceof w?"Point":W instanceof p?"Polygon":W instanceof D?"Polyline":W instanceof n?"Multipoint":W instanceof v?"Extent":f.isFunctionParameter(W)?
"Function":f.isFeatureSet(W)?"FeatureSet":f.isFeatureSetCollection(W)?"FeatureSetCollection":W===f.voidOperation?"":"number"===typeof W&&isNaN(W)?"Number":"Unrecognised Type"}function ea(W,U,na,qa){try{if(f.equalityTest(U[na],qa))return U[na+1];var Ea=U.length-na;return 1===Ea?U[na]:2===Ea?null:3===Ea?U[na+2]:ea(W,U,na+2,qa)}catch(Ta){throw Ta;}}function ma(W,U,na,qa){try{if(!0===qa)return U[na+1];if(3===U.length-na)return U[na+2];var Ea=U[na+2];if(!1===f.isBoolean(Ea))throw Error("WHEN needs boolean test conditions");
return ma(W,U,na+2,Ea)}catch(Ta){throw Ta;}}function wa(W,U){var na=W.length,qa=Math.floor(na/2);if(0===na)return[];if(1===na)return[W[0]];var Ea=wa(W.slice(0,qa),U);W=wa(W.slice(qa,na),U);for(na=[];0<Ea.length||0<W.length;)0<Ea.length&&0<W.length?(qa=U(Ea[0],W[0]),isNaN(qa)&&(qa=0),0>=qa?(na.push(Ea[0]),Ea=Ea.slice(1)):(na.push(W[0]),W=W.slice(1))):0<Ea.length?(na.push(Ea[0]),Ea=Ea.slice(1)):0<W.length&&(na.push(W[0]),W=W.slice(1));return na}function P(W,U){try{var na=W.length,qa=Math.floor(na/2);
if(0===na)return x.resolve([]);if(1===na)return x.resolve([W[0]]);var Ea=[P(W.slice(0,qa),U),P(W.slice(qa,na),U)];return x.all(Ea).then(function(Ta){return ja(Ta[0],Ta[1],U,[])})}catch(Ta){return x.reject(Ta)}}function ja(W,U,na,qa){return x.create(function(Ea,Ta){0<W.length||0<U.length?0<W.length&&0<U.length?na(W[0],U[0]).then(function(Ya){try{isNaN(Ya)&&(Ya=1),0>=Ya?(qa.push(W[0]),W=W.slice(1)):(qa.push(U[0]),U=U.slice(1)),ja(W,U,na,qa).then(function(bb){Ea(bb)},Ta)}catch(bb){Ta(bb)}},Ta):0<W.length?
(qa.push(W[0]),W=W.slice(1),ja(W,U,na,qa).then(function(Ya){Ea(Ya)},Ta)):0<U.length&&(qa.push(U[0]),U=U.slice(1),ja(W,U,na,qa).then(function(Ya){Ea(Ya)},Ta)):Ea(qa)})}function ta(W){W.symbols.symbolCounter++;return"_T"+W.symbols.symbolCounter.toString()}function N(W){W.symbols.symbolCounter++;return"_Tvar"+W.symbols.symbolCounter.toString()}function S(W,U,na){var qa={};W||(W={});na||(na={});qa._SymbolsMap={};qa.textformatting=1;qa.infinity=1;qa.pi=1;for(var Ea in U)qa[Ea]=1;for(Ea in na)qa[Ea]=1;
for(Ea in W)qa[Ea]=1;return qa}function ha(W,U){for(var na={mode:U,compiled:!0,functions:{},signatures:[],failDefferred:z,standardFunction:G,standardFunctionAsync:G,evaluateIdentifier:la},qa=0;qa<W.length;qa++)W[qa].registerFunctions(na);if("sync"===U){for(var Ea in na.functions)Ga[Ea]=new f.NativeFunction(na.functions[Ea]),oa.prototype[Ea]=Ga[Ea];for(qa=0;qa<na.signatures.length;qa++)d.addFunctionDeclaration(na.signatures[qa],"sync")}else{for(Ea in na.functions)ba[Ea]=new f.NativeFunction(na.functions[Ea]),
va.prototype[Ea]=ba[Ea];for(qa=0;qa<na.signatures.length;qa++)d.addFunctionDeclaration(na.signatures[qa],"async")}}function la(W,U){U=U.name;if("_SymbolsMap"===U)throw"Illegal";if(0<W.localStack.length){if("_t"!==U.substr(0,2).toLowerCase()&&void 0!==W.localStack[W.localStack.length-1][U])return W.localStack[W.localStack.length-1][U];var na=W.mangleMap[U];if(void 0!==na&&void 0!==W.localStack[W.localStack.length-1][na])return W.localStack[W.localStack.length-1][na]}if("_t"!==U.substr(0,2).toLowerCase()&&
void 0!==W.globalScope[U]||1===W.globalScope._SymbolsMap[U])return W.globalScope[U];U=W.mangleMap[U];if(void 0!==U)return W.globalScope[U]}function sa(W){console.log(W)}Object.defineProperty(y,"__esModule",{value:!0});y.enableAsyncSupport=y.compileScript=y.referencesFunction=y.referencesMember=y.validateScript=y.extractFieldLiterals=y.executeScript=y.extend=y.functionHelper=void 0;var ya=0,Ga={};a.registerFunctions(Ga,G);b.registerFunctions(Ga,G);k.registerFunctions(Ga,G);t.registerFunctions(Ga,G);
e.registerFunctions(Ga,G);g.registerFunctions(Ga,G);Ga["typeof"]=function(W,U){return G(W,U,function(na,qa,Ea){f.pcCheck(Ea,1,1);na=X(Ea[0]);if("Unrecognised Type"===na)throw Error("Unrecognised Type");return na})};Ga.iif=function(W,U){try{return G(W,U,function(na,qa,Ea){f.pcCheck(Ea,3,3);if(!1===f.isBoolean(Ea[0]))throw Error("IF Function must have a boolean test condition");return Ea[0]?Ea[1]:Ea[2]})}catch(na){throw na;}};Ga.decode=function(W,U){try{return G(W,U,function(na,qa,Ea){if(2>Ea.length)throw Error("Missing Parameters");
if(2===Ea.length)return Ea[1];if(0===(Ea.length-1)%2)throw Error("Must have a default value result.");return ea(W,Ea,1,Ea[0])})}catch(na){throw na;}};Ga.when=function(W,U){try{return G(W,U,function(na,qa,Ea){if(3>Ea.length)throw Error("Missing Parameters");if(0===Ea.length%2)throw Error("Must have a default value result.");na=Ea[0];if(!1===f.isBoolean(na))throw Error("WHEN needs boolean test conditions");return ma(W,Ea,0,na)})}catch(na){throw na;}};Ga.top=function(W,U){return G(W,U,function(na,qa,
Ea){f.pcCheck(Ea,2,2);if(f.isArray(Ea[0]))return f.toNumber(Ea[1])>=Ea[0].length?Ea[0].slice(0):Ea[0].slice(0,f.toNumber(Ea[1]));if(f.isImmutableArray(Ea[0]))return f.toNumber(Ea[1])>=Ea[0].length()?Ea[0].slice(0):Ea[0].slice(0,f.toNumber(Ea[1]));throw Error("Top cannot accept this parameter type");})};Ga.first=function(W,U){return G(W,U,function(na,qa,Ea){f.pcCheck(Ea,1,1);return f.isArray(Ea[0])?0===Ea[0].length?null:Ea[0][0]:f.isImmutableArray(Ea[0])?0===Ea[0].length()?null:Ea[0].get(0):null})};
Ga.sort=function(W,U){return G(W,U,function(na,qa,Ea){f.pcCheck(Ea,1,2);qa=Ea[0];f.isImmutableArray(qa)&&(qa=qa.toArray());if(!1===f.isArray(qa))throw Error("Illegal Argument");if(1<Ea.length){if(!1===f.isFunctionParameter(Ea[1]))throw Error("Illegal Argument");var Ta=function(Q,Z){return Oa.callfunc(Ea[1],[Q,Z],na)};return W.isAsync?P(qa,Ta):qa=wa(qa,function(Q,Z){return Ta(Q,Z)})}if(0===qa.length)return[];for(var Ya={},bb=0;bb<qa.length;bb++){var Ma=X(qa[bb]);""!==Ma&&(Ya[Ma]=!0)}if(!0===Ya.Array||
!0===Ya.Dictionary||!0===Ya.Feature||!0===Ya.Point||!0===Ya.Polygon||!0===Ya.Polyline||!0===Ya.Multipoint||!0===Ya.Extent||!0===Ya.Function)return qa.slice(0);bb=0;Ma="";for(var J in Ya)bb++,Ma=J;return qa=1<bb||"String"===Ma?wa(qa,function(Q,Z){if(null===Q||void 0===Q||Q===f.voidOperation)return null===Z||void 0===Z||Z===f.voidOperation?0:1;if(null===Z||void 0===Z||Z===f.voidOperation)return-1;Q=f.toString(Q);Z=f.toString(Z);return Q<Z?-1:Q===Z?0:1}):"Number"===Ma?wa(qa,function(Q,Z){return Q-Z}):
"Boolean"===Ma?wa(qa,function(Q,Z){return Q===Z?0:Z?-1:1}):"Date"===Ma?wa(qa,function(Q,Z){return Z-Q}):qa.slice(0)})};var ba={},da;for(da in Ga)ba[da]=new f.NativeFunction(Ga[da]);r.registerFunctions(Ga,G);for(da in Ga)Ga[da]=new f.NativeFunction(Ga[da]);var oa=function(){};oa.prototype=Ga;var va=function(){};va.prototype=ba;y.functionHelper={fixSpatialReference:f.fixSpatialReference,parseArguments:function(W,U){for(var na=[],qa=0;qa<U.arguments.length;qa++)na.push(E(W,U.arguments[qa]));return na},
standardFunction:G};y.extend=ha;y.executeScript=function(W,U){return W(U)};y.extractFieldLiterals=function(W,U){void 0===U&&(U=!1);return d.findFieldLiterals(W)};y.validateScript=function(W,U){return d.validateScript(W,U,"sync")};y.referencesMember=function(W,U){return d.referencesMember(W,U)};y.referencesFunction=function(W,U){return d.referencesFunction(W,U)};var pa=0,Oa={error:function(W,U,na){throw Error(d.nodeErrorMessage(W,U,na));},__awaiter:function(W,U,na,qa){return x.create(function(Ea,Ta){function Ya(J){try{Ma(qa.next(J))}catch(Q){Ta(Q)}}
function bb(J){try{Ma(qa["throw"](J))}catch(Q){Ta(Q)}}function Ma(J){J.done?Ea(J.value):J.value&&J.value.then?J.value.then(Ya,bb):(pa++,0===pa%100?setTimeout(function(){pa=0;Ya(J.value)},0):Ya(J.value))}Ma((qa=qa.apply(W,U||[])).next())})},functionDepthchecker:function(W,U){return function(){U.depthCounter++;U.localStack.push([]);if(64<U.depthCounter)throw Error("Exceeded maximum function depth");var na=W.apply(this,arguments);if(x.isPromiseLike(na))return na.then(function(qa){U.depthCounter--;--U.localStack.length;
return qa});U.depthCounter--;--U.localStack.length;return na}},castString:function(W){return f.toString(W)},aCheck:function(W,U){if(f.isFunctionParameter(W))throw Error(d.nodeErrorMessage({type:U},"RUNTIME","FUNCTIONCONTEXTILLEGAL"));return W===f.voidOperation?null:W},Dictionary:q,Feature:l,dictionary:function(W){for(var U={},na=0;na<W.length;na+=2){if(f.isFunctionParameter(W[na+1]))throw Error("Illegal Argument");if(!1===f.isString(W[na]))throw Error("Illegal Argument");U[W[na].toString()]=W[na+
1]===f.voidOperation?null:W[na+1]}W=new q(U);W.immutable=!1;return W},strCheck:function(W){if(!1===f.isString(W))throw Error("Illegal Argument");return W},unary:function(W,U){if(f.isBoolean(W)){if("!"===U)return!W;if("-"===U)return-1*f.toNumber(W);if("+"===U)return 1*f.toNumber(W);if("~"===U)return~f.toNumber(W);throw Error(d.nodeErrorMessage({type:"UnaryExpression",operator:U,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===U)return-1*f.toNumber(W);if("+"===U)return 1*
f.toNumber(W);if("~"===U)return~f.toNumber(W);throw Error(d.nodeErrorMessage({type:"UnaryExpression",operator:U,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));},logicalCheck:function(W){if(!1===f.isBoolean(W))throw Error(d.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));return W},logical:function(W,U,na){if(f.isBoolean(W)&&f.isBoolean(U))switch(na){case "||":return W||U;case "\x26\x26":return W&&U}throw Error(d.nodeErrorMessage({type:"LogicalExpression",
operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));},binary:function(W,U,na){switch(na){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return f.binaryOperator(f.toNumber(W),f.toNumber(U),na);case "\x3d\x3d":return f.equalityTest(W,U);case "\x3d":return f.equalityTest(W,U);case "!\x3d":return!f.equalityTest(W,U);case "\x3c":return f.greaterThanLessThan(W,U,na);case "\x3e":return f.greaterThanLessThan(W,U,na);case "\x3c\x3d":return f.greaterThanLessThan(W,
U,na);case "\x3e\x3d":return f.greaterThanLessThan(W,U,na);case "+":return f.isString(W)||f.isString(U)?f.toString(W)+f.toString(U):f.toNumber(W)+f.toNumber(U);case "-":return f.toNumber(W)-f.toNumber(U);case "*":return f.toNumber(W)*f.toNumber(U);case "/":return f.toNumber(W)/f.toNumber(U);case "%":return f.toNumber(W)%f.toNumber(U);default:throw Error(d.nodeErrorMessage({type:"BinaryExpression",operator:na,left:W,right:U},"RUNTIME","OPERATORNOTRECOGNISED"));}},assign:function(W,U,na){switch(U){case "\x3d":return W===
f.voidOperation?null:W;case "/\x3d":return f.toNumber(na)/f.toNumber(W);case "*\x3d":return f.toNumber(na)*f.toNumber(W);case "-\x3d":return f.toNumber(na)-f.toNumber(W);case "+\x3d":return f.isString(na)||f.isString(W)?f.toString(na)+f.toString(W):f.toNumber(na)+f.toNumber(W);case "%\x3d":return f.toNumber(na)%f.toNumber(W);default:throw Error(d.nodeErrorMessage({type:"AssignmentExpression",operator:U,left:null,right:null},"RUNTIME","OPERATORNOTRECOGNISED"));}},update:function(W,U,na,qa){var Ea=
f.toNumber(W[U]);W[U]="++"===na?Ea+1:Ea-1;return!1===qa?Ea:"++"===na?Ea+1:Ea-1},graphicToFeature:function(W,U){return null===W?null:l.createFromGraphicLikeObject(W.geometry,W.attributes,U)},memberupdate:function(W,U,na,qa){if(f.isArray(W))if(f.isNumber(U)){0>U&&(U=W.length+U);if(0>U||U>=W.length)throw Error("Assignment outside of array bounds");var Ea=f.toNumber(W[U]);W[U]="++"===na?Ea+1:Ea-1}else throw Error("Invalid Parameter");else if(W instanceof q){if(!1===f.isString(U))throw Error("Dictionary accessor must be a string");
if(!0===W.hasField(U))Ea=f.toNumber(W.field(U)),W.setField(U,"++"===na?Ea+1:Ea-1);else throw Error("Invalid Parameter");}else if(W instanceof l){if(!1===f.isString(U))throw Error("Feature accessor must be a string");if(!0===W.hasField(U))Ea=f.toNumber(W.field(U)),W.setField(U,"++"===na?Ea+1:Ea-1);else throw Error("Invalid Parameter");}else{if(f.isImmutableArray(W))throw Error("Array is Immutable");throw Error("Invalid Parameter");}return!1===qa?Ea:"++"===na?Ea+1:Ea-1},assignmember:function(W,U,na,
qa){if(f.isArray(W))if(f.isNumber(U)){0>U&&(U=W.length+U);if(0>U||U>W.length)throw Error("Assignment outside of array bounds");if(U===W.length&&"\x3d"!==na)throw Error("Invalid Parameter");W[U]=this.assign(qa,na,W[U])}else throw Error("Invalid Parameter");else if(W instanceof q){if(!1===f.isString(U))throw Error("Dictionary accessor must be a string");if(!0===W.hasField(U))W.setField(U,this.assign(qa,na,W.field(U)));else{if("\x3d"!==na)throw Error("Invalid Parameter");W.setField(U,this.assign(qa,
na,null))}}else if(W instanceof l){if(!1===f.isString(U))throw Error("Feature accessor must be a string");if(!0===W.hasField(U))W.setField(U,this.assign(qa,na,W.field(U)));else{if("\x3d"!==na)throw Error("Invalid Parameter");W.setField(U,this.assign(qa,na,null))}}else{if(f.isImmutableArray(W))throw Error("Array is Immutable");throw Error("Invalid Parameter");}},member:function(W,U){if(null===W)throw Error(d.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME",
"NOTFOUND"));if(W instanceof q||W instanceof l){if(f.isString(U))return W.field(U);throw Error(d.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(W instanceof A){if(f.isString(U))return fa(W,U,"MemberExpression");throw Error(d.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(f.isArray(W)){if(f.isNumber(U)&&isFinite(U)&&Math.floor(U)===U){0>U&&(U=W.length+U);if(U>=W.length||
0>U)throw Error(d.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return W[U]}throw Error(d.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(f.isString(W)){if(f.isNumber(U)&&isFinite(U)&&Math.floor(U)===U){0>U&&(U=W.length+U);if(U>=W.length||0>U)throw Error(d.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return W[U]}throw Error(d.nodeErrorMessage({type:"MemberExpression",
object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(f.isImmutableArray(W)&&f.isNumber(U)&&isFinite(U)&&Math.floor(U)===U){0>U&&(U=W.length()+U);if(U>=W.length()||0>U)throw Error(d.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return W.get(U)}throw Error(d.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));},callfunc:function(W,U,na){return W instanceof f.NativeFunction?
W.fn(na,U):W instanceof f.SizzleFunction?W.fn.apply(this,U):W.apply(this,U)}};y.compileScript=function(W,U,na){void 0===U&&(U=null);void 0===na&&(na=!1);null===U&&(U={vars:{},customfunctions:{}});U={isAsync:na,globalScope:S(U.vars,na?ba:Ga,U.customfunctions),localScope:null,mangleMap:{},console:sa,lrucache:U.lrucache,services:U.services,symbols:{symbolCounter:0}};W=E(U,W.body[0].body);""===W&&(W="lc.voidOperation; ");U={lc:f,lang:Oa,mangles:U.mangleMap,postProcess:function(qa){qa instanceof f.ReturnResult&&
(qa=qa.value);qa instanceof f.ImplicitResult&&(qa=qa.value);qa===f.voidOperation&&(qa=null);if(qa===f.breakResult)throw Error("Cannot return BREAK");if(qa===f.continueResult)throw Error("Cannot return CONTINUE");if(f.isFunctionParameter(qa))throw Error("Cannot return FUNCTION");return qa},prepare:function(qa,Ea){var Ta=qa.spatialReference;if(null===Ta||void 0===Ta)Ta=new C({wkid:102100});var Ya=qa.vars,bb=qa.customfunctions,Ma=Ea?new va:new oa;Ya||(Ya={});bb||(bb={});var J=new q({newline:"\n",tab:"\t",
singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});J.immutable=!1;Ma._SymbolsMap={textformatting:1,infinity:1,pi:1};Ma.textformatting=J;Ma.infinity=Number.POSITIVE_INFINITY;Ma.pi=Math.PI;for(var Q in bb)Ma[Q]=bb[Q],Ma._SymbolsMap[Q]=1;for(Q in Ya)Ma._SymbolsMap[Q]=1,Ma[Q]=Ya[Q]&&"esri.Graphic"===Ya[Q].declaredClass?l.createFromGraphic(Ya[Q]):Ya[Q];return{localStack:[],isAsync:Ea,mangleMap:this.mangles,spatialReference:Ta,globalScope:Ma,abortSignal:void 0===qa.abortSignal||null===
qa.abortSignal?{aborted:!1}:qa.abortSignal,localScope:null,services:qa.services,console:qa.console?qa.console:sa,lrucache:qa.lrucache,symbols:{symbolCounter:0},depthCounter:1}}};return(new Function("context","spatialReference",na?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+
W+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+W+"\n return lastStatement; } \n return this.postProcess(mainBody()); ")).bind(U)};y.enableAsyncSupport=function(){return x.create(function(W,U){B(["./functions/geomasync"],function(na){ha([na],"async");W(!0)},
function(na){U(na)})})}})},"esri/arcade/ArcadePortal":function(){var B=this&&this.__extends||function(){var y=function(c,u){y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,l){q.__proto__=l}||function(q,l){for(var m in l)l.hasOwnProperty(m)&&(q[m]=l[m])};return y(c,u)};return function(c,u){function q(){this.constructor=c}y(c,u);c.prototype=null===u?Object.create(u):(q.prototype=u.prototype,new q)}}();define(["require","exports","./Dictionary"],function(y,c,u){return function(q){function l(m){var h=
q.call(this)||this;h.immutable=!1;h.setField("url",m);h.immutable=!0;return h}B(l,q);return l}(u)})},"esri/arcade/Attachment":function(){var B=this&&this.__extends||function(){var y=function(c,u){y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,l){q.__proto__=l}||function(q,l){for(var m in l)l.hasOwnProperty(m)&&(q[m]=l[m])};return y(c,u)};return function(c,u){function q(){this.constructor=c}y(c,u);c.prototype=null===u?Object.create(u):(q.prototype=u.prototype,new q)}}();define(["require",
"exports","./Dictionary"],function(y,c,u){return function(q){function l(m,h,f,d,a){var b=q.call(this)||this;b.attachmentUrl=a;b.immutable=!1;b.setField("id",m);b.setField("name",h);b.setField("contenttype",f);b.setField("size",d);b.immutable=!0;return b}B(l,q);return l}(u)})},"esri/arcade/Feature":function(){var B=this&&this.__assign||function(){B=Object.assign||function(y){for(var c,u=1,q=arguments.length;u<q;u++){c=arguments[u];for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(y[l]=c[l])}return y};
return B.apply(this,arguments)};define("require exports ./Dictionary ./ImmutableArray ./languageUtils ../geometry/Geometry ../geometry/Point ../geometry/jsonUtils ./featureset/support/shared".split(" "),function(y,c,u,q,l,m,h,f,d){return function(){function a(){this.declaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=this._adapter=null;this.immutable=this._datesfixed=!0;this._datefields=null;this.immutable=!0}a.createFromGraphic=function(b){var e=new a;e._geometry=b.geometry?
b.geometry:null;e.attributes=void 0===b.attributes?{}:null===b.attributes?{}:b.attributes;b._sourceLayer?(e._layer=b._sourceLayer,e._datesfixed=!1):b._layer?(e._layer=b._layer,e._datesfixed=!1):b.layer?(e._layer=b.layer,e._datesfixed=!1):b.sourceLayer&&(e._layer=b.sourceLayer,e._datesfixed=!1);return e};a.createFromArcadeFeature=function(b){var e=new a;e._datesfixed=b._datesfixed;e.attributes=b.attributes;e._geometry=b._geometry;b._layer&&(e._layer=b._layer);return e};a.createFromArcadeDictionary=
function(b){var e=new a;e.attributes=b.field("attributes");null!==e.attributes?e.attributes instanceof u?(e.attributes=e.attributes.attributes,null===e.attributes&&(e.attributes={})):e.attributes={}:e.attributes={};e._geometry=b.field("geometry");null!==e._geometry&&(e._geometry instanceof u?e._geometry=a.parseGeometryFromDictionary(e._geometry):e._geometry instanceof m||(e._geometry=null));return e};a.createFromGraphicLikeObject=function(b,e,r){void 0===r&&(r=null);var t=new a;null===e&&(e={});t.attributes=
e;t._geometry=b?b:null;t._layer=r;t._layer&&(t._datesfixed=!1);t._adapter=null;return t};a.prototype.repurposeFromGraphicLikeObject=function(b,e,r){void 0===r&&(r=null);null===e&&(e={});this.attributes=e;this._geometry=b?b:null;this._datesfixed=(this._layer=r)?!1:!0};a.prototype.castToText=function(){if(this._adapter)return this._adapter.castToText();var b="";!1===this._datesfixed&&this._fixDates();for(var e in this.attributes){""!==b&&(b+=",");var r=this.attributes[e];null==r?b+=JSON.stringify(e)+
":null":l.isBoolean(r)||l.isNumber(r)||l.isString(r)?b+=JSON.stringify(e)+":"+JSON.stringify(r):r instanceof m?b+=JSON.stringify(e)+":"+l.toStringExplicit(r):r instanceof q?b+=JSON.stringify(e)+":"+l.toStringExplicit(r):r instanceof Array?b+=JSON.stringify(e)+":"+l.toStringExplicit(r):r instanceof Date?b+=JSON.stringify(e)+":"+JSON.stringify(r):null!==r&&"object"===typeof r&&void 0!==r.castToText&&(b+=JSON.stringify(e)+":"+r.castToText())}return'{"geometry":'+(null===this.geometry()?"null":l.toStringExplicit(this.geometry()))+
',"attributes":{'+b+"}}"};a.prototype._fixDates=function(){if(null!==this._datefields)0<this._datefields.length&&this._fixDateFields(this._datefields);else{for(var b=[],e=0;e<this._layer.fields.length;e++){var r=this._layer.fields[e];"date"!==r.type&&"esriFieldTypeDate"!==r.type||b.push(r.name)}this._datefields=b;0<b.length&&this._fixDateFields(b)}this._datesfixed=!0};a.prototype._fixDateFields=function(b){this.attributes=B({},this.attributes);for(var e=0;e<b.length;e++){var r=this.attributes[b[e]];
if(null!==r)if(void 0===r)for(var t in this.attributes){if(t.toLowerCase()===b[e].toLowerCase()){r=this.attributes[t];null===r||r instanceof Date||(this.attributes[t]=new Date(r));break}}else r instanceof Date||(this.attributes[b[e]]=new Date(r))}};a.prototype.geometry=function(){if(this._adapter)return this._adapter.geometry();if(null===this._geometry)return this._geometry;this._geometry instanceof m||(this._geometry=f.fromJson(this._geometry));return this._geometry};a.prototype.field=function(b){if(this._adapter)return this._adapter.field(b);
!1===this._datesfixed&&this._fixDates();var e=this.attributes[b];if(void 0!==e)return e;e=b.toLowerCase();for(var r in this.attributes)if(r.toLowerCase()===e)return this.attributes[r];if(this._hasFieldDefinition(e))return null;throw Error("Field not Found : "+b);};a.prototype._hasFieldDefinition=function(b){if(null===this._layer)return!1;for(var e=0;e<this._layer.fields.length;e++)if(this._layer.fields[e].name.toLowerCase()===b)return!0;return!1};a.prototype._field=function(b){var e;if(this._adapter)return null!==
(e=this._adapter.field(b))&&void 0!==e?e:null;!1===this._datesfixed&&this._fixDates();e=b.toLowerCase();b=this.attributes[b];if(void 0!==b)return b;for(var r in this.attributes)if(r.toLowerCase()===e)return this.attributes[r];return null};a.prototype.setField=function(b,e){if(this.immutable)throw Error("Feature is Immutable");if(!1===l.isSimpleType(e))throw Error("Illegal Value Assignment to Feature");if(this._adapter)this._adapter.setField(b,e);else{var r=b.toLowerCase();if(void 0===this.attributes[b])for(var t in this.attributes)if(t.toLowerCase()===
r){this.attributes[t]=e;return}this.attributes[b]=e}};a.prototype.hasField=function(b){if(this._adapter)return this._adapter.hasField(b);var e=b.toLowerCase();if(void 0!==this.attributes[b])return!0;for(var r in this.attributes)if(r.toLowerCase()===e)return!0;return this._hasFieldDefinition(e)?!0:!1};a.prototype.keys=function(){if(this._adapter)return this._adapter.keys();var b=[],e={},r;for(r in this.attributes)b.push(r),e[r.toLowerCase()]=1;if(null!==this._layer)for(r=0;r<this._layer.fields.length;r++){var t=
this._layer.fields[r];1!==e[t.name.toLowerCase()]&&b.push(t.name)}return b=b.sort()};a.parseGeometryFromDictionary=function(b){b=a.convertDictionaryToJson(b,!0);void 0!==b.hasm&&(b.hasM=b.hasm,delete b.hasm);void 0!==b.hasz&&(b.hasZ=b.hasz,delete b.hasz);void 0!==b.spatialreference&&(b.spatialReference=b.spatialreference,delete b.spatialreference);void 0!==b.rings&&(b.rings=this.fixPathArrays(b.rings,!0===b.hasZ,!0===b.hasZ));void 0!==b.paths&&(b.paths=this.fixPathArrays(b.paths,!0===b.hasZ,!0===
b.hasM));void 0!==b.points&&(b.points=this.fixPointArrays(b.points,!0===b.hasZ,!0===b.hasM));return f.fromJson(b)};a.fixPathArrays=function(b,e,r){var t=[];if(b instanceof Array)for(var g=0;g<b.length;g++)t.push(this.fixPointArrays(b[g],e,r));else if(b instanceof q)for(g=0;g<b.length();g++)t.push(this.fixPointArrays(b.get(g),e,r));return t};a.fixPointArrays=function(b,e,r){var t=[];if(b instanceof Array)for(var g=0;g<b.length;g++){var k=b[g];k instanceof h?e&&r?t.push([k.x,k.y,k.z,k.m]):e?t.push([k.x,
k.y,k.z]):r?t.push([k.x,k.y,k.m]):t.push([k.x,k.y]):k instanceof q?t.push(k.toArray()):t.push(k)}else if(b instanceof q)for(g=0;g<b.length();g++)k=b.get(g),k instanceof h?e&&r?t.push([k.x,k.y,k.z,k.m]):e?t.push([k.x,k.y,k.z]):r?t.push([k.x,k.y,k.m]):t.push([k.x,k.y]):k instanceof q?t.push(k.toArray()):t.push(k);return t};a.convertDictionaryToJson=function(b,e){void 0===e&&(e=!1);var r={},t;for(t in b.attributes){var g=b.attributes[t];g instanceof u&&(g=a.convertDictionaryToJson(g));e?r[t.toLowerCase()]=
g:r[t]=g}return r};a.parseAttributesFromDictionary=function(b){var e={},r;for(r in b.attributes){var t=b.attributes[r];if(l.isSimpleType(t))e[r]=t;else throw Error("Illegal Argument");}return e};a.fromJson=function(b){var e=null;null!==b.geometry&&void 0!==b.geometry&&(e=f.fromJson(b.geometry));var r={};if(null!==b.attributes&&void 0!==b.attributes)for(var t in b.attributes){var g=b.attributes[t];if(null===g)r[t]=g;else if(l.isString(g)||l.isNumber(g)||l.isBoolean(g)||l.isDate(g))r[t]=g;else throw Error("Illegal Argument");
}return a.createFromGraphicLikeObject(e,r,null)};a.prototype.fullDomain=function(b,e){return null!==this._layer&&this._layer.fields?l.getDomain(b,this._layer,this,e):null};a.prototype.subtypes=function(){return null!==this._layer&&this._layer.fields?this._layer.typeIdField?{subtypeField:this._layer.typeIdField,subtypes:this._layer.types?this._layer.types.map(function(b){return{name:b.name,code:b.id}}):[]}:null:null};a.prototype.domainValueLookup=function(b,e,r){if(null===this._layer||!this._layer.fields)return null;
r=l.getDomain(b,this._layer,this,r);if(void 0===e)try{e=this.field(b)}catch(t){return null}return l.getDomainValue(r,e)};a.prototype.gdbVersion=function(){if(null===this._layer)return"";var b=this._layer.gdbVersion;return void 0===b?"":""===b&&this._layer.capabilities&&this._layer.capabilities.isVersioned?"SDE.DEFAULT":b};a.prototype.domainCodeLookup=function(b,e,r){if(null===this._layer||!this._layer.fields)return null;if(void 0===e){try{e=this.field(b)}catch(t){return null}return e}b=l.getDomain(b,
this._layer,this,r);return l.getDomainCode(b,e)};a.prototype.schema=function(){if(null===this._layer||!this._layer.fields)return null;for(var b=[],e=0,r=this._layer.fields;e<r.length;e++)b.push(d.esriFieldToJson(r[e]));return{objectIdField:this._layer.objectIdField,globalIdField:this._layer.globalIdField,geometryType:void 0===d.layerGeometryEsriRestConstants[this._layer.geometryType]?"":d.layerGeometryEsriRestConstants[this._layer.geometryType],fields:b}};return a}()})},"esri/arcade/featureset/support/shared":function(){var B=
this&&this.__assign||function(){B=Object.assign||function(y){for(var c,u=1,q=arguments.length;u<q;u++){c=arguments[u];for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(y[l]=c[l])}return y};return B.apply(this,arguments)};define(["require","exports","../../polyfill/promiseUtils","../../../geometry/Extent","../../../layers/Field"],function(y,c,u,q,l){function m(f){var d=null;f.domain&&(d="range"===f.domain.type?{type:"range",range:[f.domain.minValue,f.domain.maxValue]}:{type:"codedValue",codedValues:f.domain.toJson().codedValues});
return B(B({name:f.name,type:f.type,alias:f.alias},void 0!==f.length?{length:f.length}:{}),{editable:!0===f.editable,nullable:!0===f.nullable,domain:d})}function h(f){return f instanceof Date}Object.defineProperty(c,"__esModule",{value:!0});c.stableStringify=c.extractServiceUrl=c.reduceArrayWithPromises=c.toEsriGeometryType=c.layerFieldEsriConstants=c.layerGeometryEsriRestConstants=c.layerGeometryEsriConstants=c.callback=c.errback=c.defaultMaxRecords=c.sameGeomType=c.convertLinearUnitsToCode=c.shapeExtent=
c.convertSquareUnitsToCode=c.cloneAttributes=c.equalityTest=c.isDate=c.isArray=c.isNumber=c.isBoolean=c.isString=c.IdState=c.esriFieldToJson=c.cloneField=c.FeatureServiceDatabaseType=void 0;(function(f){f[f.Standardised=0]="Standardised";f[f.StandardisedNoInterval=1]="StandardisedNoInterval";f[f.SqlServer=2]="SqlServer";f[f.Oracle=3]="Oracle";f[f.Postgres=4]="Postgres";f[f.PGDB=5]="PGDB";f[f.FILEGDB=6]="FILEGDB";f[f.NotEvaluated=7]="NotEvaluated"})(c.FeatureServiceDatabaseType||(c.FeatureServiceDatabaseType=
{}));c.cloneField=function(f){return new l(m(f))};c.esriFieldToJson=m;(function(f){f[f.InFeatureSet=0]="InFeatureSet";f[f.NotInFeatureSet=1]="NotInFeatureSet";f[f.Unknown=2]="Unknown"})(c.IdState||(c.IdState={}));c.isString=function(f){return"string"===typeof f||f instanceof String};c.isBoolean=function(f){return"boolean"===typeof f};c.isNumber=function(f){return"number"===typeof f};c.isArray=function(f){return f instanceof Array};c.isDate=h;c.equalityTest=function(f,d){return f===d?!0:h(f)&&h(d)?
f.getTime()===d.getTime():!1};c.cloneAttributes=function(f){var d={},a;for(a in f)d[a]=f[a];return d};c.convertSquareUnitsToCode=function(f){if(void 0===f)return null;if("number"===typeof f)return f;switch(f.toLowerCase()){case "meters":case "meter":return 109404;case "miles":case "mile":return 109413;case "kilometers":case "kilometer":case "km":return 109414}return null};c.shapeExtent=function(f){if(null===f)return null;switch(f.type){case "polygon":case "multipoint":case "polyline":return f.getExtent();
case "point":return new q({xmin:f.x,ymin:f.y,xmax:f.x,ymax:f.y,spatialReference:f.spatialReference});case "extent":return f}return null};c.convertLinearUnitsToCode=function(f){if(void 0===f)return null;if("number"===typeof f||"number"===typeof f)return f;switch(f.toLowerCase()){case "meters":case "meter":return 9001;case "miles":case "mile":return 9035;case "kilometers":case "kilometer":case "km":return 9036}return null};c.sameGeomType=function(f,d){return f===d||"point"===f&&"esriGeometryPoint"===
d||"polyline"===f&&"esriGeometryPolyline"===d||"polygon"===f&&"esriGeometryPolygon"===d||"extent"===f&&"esriGeometryEnvelope"===d||"multipoint"===f&&"esriGeometryMultipoint"===d||"point"===d&&"esriGeometryPoint"===f||"polyline"===d&&"esriGeometryPolyline"===f||"polygon"===d&&"esriGeometryPolygon"===f||"extent"===d&&"esriGeometryEnvelope"===f||"multipoint"===d&&"esriGeometryMultipoint"===f?!0:!1};c.defaultMaxRecords=1E3;c.errback=function(f){return function(d){f.reject(d)}};c.callback=function(f,d){return function(){try{f.apply(null,
arguments)}catch(a){d.reject(a)}}};c.layerGeometryEsriConstants={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"};c.layerGeometryEsriRestConstants={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",
esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"};c.layerFieldEsriConstants={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger","long":"esriFieldTypeLong",single:"esriFieldTypeSingle","double":"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",
geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",
esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};c.toEsriGeometryType=function(f){switch(f){case "point":return"esriGeometryPoint";case "polygon":return"esriGeometryPolygon";case "multipoint":return"esriGeometryMultipoint";case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};
c.reduceArrayWithPromises=function(f,d){return u.create(function(a,b){var e=u.resolve(!0);f.reduce(function(r,t,g,k){return r.then(function(x){try{return d(x,t,g,k)}catch(v){return u.reject(v)}},function(x){return u.reject(x)})},e).then(a,b)})};c.extractServiceUrl=function(f){if(void 0===f)return"";f=f.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer");f=f.replace(/\/mapserver\/[0-9]*/i,"/MapServer");return f=f.split("?")[0]};c.stableStringify=function(f,d){d||(d={});"function"===typeof d&&(d={cmp:d});
var a="boolean"===typeof d.cycles?d.cycles:!1,b=d.cmp&&function(r){return function(t){return function(g,k){return r({key:g,value:t[g]},{key:k,value:t[k]})}}}(d.cmp),e=[];return function g(t){t&&t.toJson&&"function"===typeof t.toJson&&(t=t.toJson());if(void 0!==t){if("number"===typeof t)return isFinite(t)?""+t:"null";if("object"!==typeof t)return JSON.stringify(t);var k;if(Array.isArray(t)){var x="[";for(k=0;k<t.length;k++)k&&(x+=","),x+=g(t[k])||"null";return x+"]"}if(null===t)return"null";if(-1!==
e.indexOf(t)){if(a)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var v=e.push(t)-1,A=Object.keys(t).sort(b&&b(t));x="";for(k=0;k<A.length;k++){var n=A[k],w=g(t[n]);w&&(x&&(x+=","),x+=JSON.stringify(n)+":"+w)}e.splice(v,1);return"{"+x+"}"}}(f)}})},"esri/layers/Field":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./RangeDomain ./CodedValueDomain".split(" "),function(B,y,c,u,q,l,m){B=B(null,{declaredClass:"esri.layers.Field",
constructor:function(h){if(h&&y.isObject(h)&&(this.name=h.name,this.type=h.type,this.alias=h.alias,this.length=h.length,this.editable=h.editable,this.nullable=h.nullable,this.defaultValue=h.defaultValue,this.description=h.description?JSON.parse(h.description):null,this.isViewOverride=!!h.isViewOverride,(h=h.domain)&&y.isObject(h)))switch(h.type){case "range":this.domain=new l(h);break;case "codedValue":this.domain=new m(h)}},toJson:function(){return q.fixJson({name:this.name,type:this.type,alias:this.alias,
length:this.length,editable:this.editable,nullable:this.nullable,defaultValue:this.defaultValue,description:this.description?JSON.stringify(this.description):null,domain:this.domain?this.domain.toJson():null,isViewOverride:this.isViewOverride||void 0})},toJSON:function(){return this.toJson()}});c("extend-esri")&&y.setObject("layers.Field",B,u);return B})},"esri/layers/RangeDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Domain".split(" "),function(B,y,c,
u,q,l){B=B([l],{declaredClass:"esri.layers.RangeDomain",constructor:function(m){m&&y.isObject(m)&&(this.minValue=m.range[0],this.maxValue=m.range[1])},toJson:function(){var m=this.inherited(arguments);m.range=[this.minValue,this.maxValue];return q.fixJson(m)}});c("extend-esri")&&y.setObject("layers.RangeDomain",B,u);return B})},"esri/layers/Domain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(B,y,c,u,q){B=B(null,{declaredClass:"esri.layers.Domain",
constructor:function(l){l&&y.isObject(l)&&(this.name=l.name,this.type=l.type)},toJson:function(){return q.fixJson({name:this.name,type:this.type})}});c("extend-esri")&&y.setObject("layers.Domain",B,u);return B})},"esri/layers/CodedValueDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ./Domain".split(" "),function(B,y,c,u,q,l,m){B=B([m],{declaredClass:"esri.layers.CodedValueDomain",constructor:function(h){h&&y.isObject(h)&&(this.codedValues=
h.codedValues)},getName:function(h){var f;c.some(this.codedValues,function(d){d.code==h&&(f=d.name);return!!f});return f},toJson:function(){var h=this.inherited(arguments);h.codedValues=y.clone(this.codedValues);return l.fixJson(h)}});u("extend-esri")&&y.setObject("layers.CodedValueDomain",B,q);return B})},"esri/arcade/treeAnalysis":function(){define(["require","exports"],function(B,y){function c(n,w){return"0"!==n.min&&w.length<Number(n.min)||"*"!==n.max&&w.length>Number(n.max)?-2:1}function u(n,
w,p){if(null!==p.localScope&&void 0!==p.localScope[n.toLowerCase()]){var D=p.localScope[n.toLowerCase()];if("FormulaFunction"===D.type||"any"===D.type)return void 0===D.signature&&(D.signature={min:"0",max:"*"}),c(D.signature,w)}return void 0!==p.globalScope[n.toLowerCase()]&&(D=p.globalScope[n.toLowerCase()],"FormulaFunction"===D.type||"any"===D.type)?(void 0===D.signature&&(D.signature={min:"0",max:"*"}),c(D.signature,w)):-1}function q(n,w){if(n)for(var p=0;p<n.length;p++)l(n[p],w)}function l(n,
w){if(n&&!1!==w(n))switch(n.type){case "ArrayExpression":q(n.elements,w);break;case "AssignmentExpression":case "BinaryExpression":l(n.left,w);l(n.right,w);break;case "BlockStatement":q(n.body,w);break;case "CallExpression":l(n.callee,w);q(n.arguments,w);break;case "ConditionalExpression":l(n.test,w);l(n.alternate,w);l(n.consequent,w);break;case "ExpressionStatement":l(n.expression,w);break;case "ForInStatement":l(n.left,w);l(n.right,w);l(n.body,w);break;case "ForStatement":l(n.init,w);l(n.test,w);
l(n.update,w);l(n.body,w);break;case "FunctionDeclaration":case "FunctionDeclaration":case "FunctionExpression":l(n.id,w);q(n.params,w);l(n.body,w);break;case "IfStatement":l(n.test,w);l(n.consequent,w);l(n.alternate,w);break;case "LogicalExpression":l(n.left,w);l(n.right,w);break;case "MemberExpression":l(n.object,w);l(n.property,w);break;case "ObjectExpression":q(n.properties,w);break;case "Program":q(n.body,w);break;case "Property":l(n.key,w);l(n.value,w);break;case "ReturnStatement":l(n.argument,
w);break;case "UnaryExpression":l(n.argument,w);break;case "UpdateExpression":l(n.argument,w);break;case "VariableDeclaration":q(n.declarations,w);break;case "VariableDeclarator":l(n.id,w);l(n.init,w);break;case "TemplateLiteral":q(n.expressions,w),q(n.quasis,w)}}function m(n,w){void 0===w&&(w=!0);var p=e(n,"SYNTAX","UNREOGNISED");try{switch(n.type){case "VariableDeclarator":return null!==n.init&&"FunctionExpression"===n.init.type?e(n,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"):"Identifier"!==n.id.type?
e(n,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==n.init?m(n.init,!1):"";case "VariableDeclaration":for(var D=0;D<n.declarations.length;D++)if(p=m(n.declarations[D],w),""!==p)return p;return"";case "ForInStatement":p=m(n.left,w);if(""!==p)break;if("VariableDeclaration"===n.left.type){if(1<n.left.declarations.length)return e(n,"SYNTAX","ONLY1VAR");if(null!==n.left.declarations[0].init)return e(n,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==n.left.type)return e(n,"SYNTAX","LEFTNOTVAR");p=m(n.right,
w);if(""!==p)break;p=m(n.body,w);if(""!==p)break;return"";case "ForStatement":if(null!==n.test&&(p=m(n.test,w),""!==p))break;if(null!==n.init&&(p=m(n.init,w),""!==p))break;if(null!==n.update&&(p=m(n.update,w),""!==p))break;if(null!==n.body&&(p=m(n.body,w),""!==p))break;return"";case "ContinueStatement":return"";case "EmptyStatement":return"";case "BreakStatement":return"";case "IfStatement":p=m(n.test,w);if(""!==p)break;if(null!==n.consequent&&(p=m(n.consequent,!1),""!==p))break;if(null!==n.alternate&&
(p=m(n.alternate,!1),""!==p))break;return"";case "BlockStatement":var C=[];for(D=0;D<n.body.length;D++)"EmptyStatement"!==n.body[D].type&&C.push(n.body[D]);n.body=C;for(D=0;D<n.body.length;D++)if(p=m(n.body[D],w),""!==p)return p;return"";case "FunctionDeclaration":return!1===w?e(n,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==n.id.type?e(n,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):m(n.body,!1);case "ReturnStatement":return null!==n.argument?m(n.argument,w):"";case "UpdateExpression":return"Identifier"!==
n.argument.type&&"MemberExpression"!==n.argument.type?e(n,"SYNTAX","ASSIGNMENTTOVARSONLY"):m(n.argument,w);case "AssignmentExpression":if("Identifier"!==n.left.type&&"MemberExpression"!==n.left.type)return e(n,"SYNTAX","ASSIGNMENTTOVARSONLY");p=m(n.left,w);if(""!==p)break;switch(n.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:return e(n,"SYNTAX","OPERATORNOTRECOGNISED")}return m(n.right,!1);case "ExpressionStatement":return m(n.expression,!1);
case "Identifier":p="";break;case "MemberExpression":p=m(n.object,w);if(""!==p)break;return!0===n.computed?m(n.property,w):"";case "Literal":return"";case "TemplateElement":return"";case "CallExpression":if("Identifier"!==n.callee.type)return e(n,"SYNTAX","ONLYNODESSUPPORTED");p="";for(D=0;D<n.arguments.length;D++)if(p=m(n.arguments[D],w),""!==p)return p;return"";case "UnaryExpression":p=m(n.argument,w);break;case "BinaryExpression":p=m(n.left,w);if(""!==p)break;p=m(n.right,w);if(""!==p)break;switch(n.operator){case "|":case "\x26":case "\x3e\x3e":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;
default:return e(n,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":p=m(n.left,w);if(""!==p)break;p=m(n.right);if(""!==p)break;switch(n.operator){case "\x26\x26":case "||":break;default:return e(n,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "ConditionalExpression":return e(n,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":p="";for(D=0;D<n.elements.length&&(p=m(n.elements[D],w),""===p);D++);break;case "TemplateLiteral":p="";for(D=0;D<n.quasis.length;D++)if(p=m(n.quasis[D],w),
""!==p)return p;for(D=0;D<n.expressions.length&&(p=m(n.expressions[D],w),""===p);D++);break;case "ObjectExpression":p="";for(D=0;D<n.properties.length;D++){p="";if(null!==n.properties[D].key&&("Literal"!==n.properties[D].key.type&&"Identifier"!==n.properties[D].key.type&&(p=e(n,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===n.properties[D].key.type)){C=n.properties[D].key;var G="value"in C?C.value:null;"string"===typeof G||G instanceof String||(p=e(n,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===
p&&(p=m(n.properties[D],w));if(""!==p)break}break;case "Property":if("Literal"!==n.key.type&&"Identifier"!==n.key.type)return e(n,"SYNTAX","ONLYLITERAL");if("Identifier"!==n.key.type&&(p=m(n.key,w),""!==p))break;p=m(n.value,w)}return p}catch(z){throw z;}}function h(n,w){var p=e(n,"SYNTAX","UNREOGNISED"),D=null,C="";try{switch(n.type){case "VariableDeclarator":if(null!==n.init&&"FunctionExpression"===n.init.type)return e(n,"SYNTAX","FUNCTIONVARIABLEDECLARATOR");var G=null===n.init?"":h(n.init,w);if(""!==
G)return G;"Identifier"===n.id.type&&(null===w.localScope?w.globalScope[n.id.name.toLowerCase()]={type:"any"}:w.localScope[n.id.name.toLowerCase()]={type:"any"});return"";case "FunctionDeclaration":D=d(n.id.name.toLowerCase(),n);C=a(n,w);if(""!==C)return C;if(null!==w.localScope)return e(n,"SYNTAX","GLOBALFUNCTIONSONLY");D.isnative=!1;w.globalScope[n.id.name.toLowerCase()]={type:"FormulaFunction",signature:[D]};return"";case "VariableDeclaration":p="";for(var z=0;z<n.declarations.length&&(p=h(n.declarations[z],
w),""===p);z++);break;case "IfStatement":p=h(n.test,w);if(""!==p)break;if("AssignmentExpression"===n.test.type||"UpdateExpression"===n.test.type)return e(n.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");if(null!==n.consequent&&(p=h(n.consequent,w),""!==p))break;if(null!==n.alternate&&(p=h(n.alternate,w),""!==p))break;return"";case "EmptyStatement":return"";case "BlockStatement":for(z=0;z<n.body.length;z++)if(p=h(n.body[z],w),""!==p)return p;return"";case "ReturnStatement":return null!==n.argument?
h(n.argument,w):"";case "ForInStatement":if("VariableDeclaration"===n.left.type){if(1<n.left.declarations.length)return e(n,"SYNTAX","ONLY1VAR");if(null!==n.left.declarations[0].init)return e(n,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==n.left.type)return e(n,"SYNTAX","LEFTNOTVAR");p=h(n.left,w);if(""!==p)break;p=h(n.right,w);if(""!==p)break;p=h(n.body,w);if(""!==p)break;return"";case "ForStatement":if(null!==n.init&&(p=h(n.init,w),""!==p))break;if(null!==n.test&&(p=h(n.test,w),""!==p))break;
if(null!==n.body&&(p=h(n.body,w),""!==p))break;if(null!==n.update&&(p=h(n.update,w),""!==p))break;return"";case "BreakStatement":return"";case "ContinueStatement":return"";case "UpdateExpression":if("Identifier"!==n.argument.type&&"MemberExpression"!==n.argument.type)return e(n,"SYNTAX","ASSIGNMENTTOVARSONLY");var E=!1;if("MemberExpression"===n.argument.type)return h(n.argument,w);null!==w.localScope&&void 0!==w.localScope[n.argument.name.toLowerCase()]&&(E=!0);void 0!==w.globalScope[n.argument.name.toLowerCase()]&&
(E=!0);return!1===E?"Identifier "+n.argument.name+" has not been declared.":"";case "AssignmentExpression":if("Identifier"!==n.left.type&&"MemberExpression"!==n.left.type)return e(n,"SYNTAX","ASSIGNMENTTOVARSONLY");var H=h(n.right,w);if(""!==H)return H;E=!1;if("MemberExpression"===n.left.type)return H=h(n.left,w),""!==H?H:"";null!==w.localScope&&void 0!==w.localScope[n.left.name.toLowerCase()]&&(E=!0);void 0!==w.globalScope[n.left.name.toLowerCase()]&&(E=!0);return!1===E?"Identifier "+n.left.name+
" has not been declared.":"";case "ExpressionStatement":return h(n.expression,w);case "Identifier":var I=n.name.toLowerCase();if(null!==w.localScope&&void 0!==w.localScope[I])return"";p=void 0!==w.globalScope[I]?"":e(n,"SYNTAX","VARIABLENOTFOUND");break;case "MemberExpression":p=h(n.object,w);if(""!==p)break;return!0===n.computed?h(n.property,w):"";case "Literal":return"";case "TemplateElement":return"";case "CallExpression":if("Identifier"!==n.callee.type)return e(n,"SYNTAX","ONLYNODESSUPPORTED");
p="";for(z=0;z<n.arguments.length;z++)if(p=h(n.arguments[z],w),""!==p)return p;var M=u(n.callee.name,n.arguments,w);-1===M&&(p=e(n,"SYNTAX","NOTFOUND"));-2===M&&(p=e(n,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":p=h(n.argument,w);break;case "BinaryExpression":p=h(n.left,w);if(""!==p)break;p=h(n.right,w);if(""!==p)break;return"";case "LogicalExpression":p=h(n.left,w);if(""!==p)break;if("AssignmentExpression"===n.left.type||"UpdateExpression"===n.left.type)return e(n.left,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");
p=h(n.right,w);if(""!==p)break;return"AssignmentExpression"===n.right.type||"UpdateExpression"===n.right.type?e(n.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"";case "ConditionalExpression":return e(n,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":p="";for(z=0;z<n.elements.length&&(p=h(n.elements[z],w),""===p);z++);break;case "TemplateLiteral":p="";for(z=0;z<n.quasis.length;z++)if(p=h(n.quasis[z],w),""!==p)return p;for(z=0;z<n.expressions.length&&(p=h(n.expressions[z],w),""===p);z++);break;
case "ObjectExpression":p="";for(z=0;z<n.properties.length;z++){p="";if(null!==n.properties[z].key&&("Literal"!==n.properties[z].key.type&&"Identifier"!==n.properties[z].key.type&&(p=e(n,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===n.properties[z].key.type)){var T=n.properties[z].key,Y="value"in T?T.value:null;"string"===typeof Y||Y instanceof String||(p=e(n,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===p&&(p=h(n.properties[z],w));if(""!==p)break}break;case "Property":if("Literal"!==n.key.type&&
"Identifier"!==n.key.type)return e(n,"SYNTAX","ONLYLITERAL");if("Identifier"!==n.key.type&&(p=h(n.key,w),""!==p))break;p=h(n.value,w)}return p}catch(fa){throw fa;}}function f(n,w){var p=!1,D=w.toLowerCase();l(n,function(C){if(p)return!1;"Identifier"===C.type&&C.name&&C.name.toLowerCase()===D&&(p=!0);return!0});return p}function d(n,w){var p=[];if(void 0!==w.params&&null!==w.params)for(var D=0;D<w.params.length;D++)p.push("any");return{name:n,return:"any",params:p}}function a(n,w){w={globalScope:w.globalScope,
localScope:{}};for(var p=0;p<n.params.length;p++)w.localScope[n.params[p].name.toLowerCase()]={type:"any"};return h(n.body,w)}function b(n,w,p,D){var C={};if(void 0===n||null===n)n={};if(void 0===p||null===p)p={};C.infinity={type:"any"};C.textformatting={type:"any"};C.pi={type:"any"};for(var G in w)"sync"===D&&void 0!==w[G].min?C[G]={type:"FormulaFunction",signature:{min:w[G].min,max:w[G].max}}:"sync"!==D&&void 0!==w[G].fmin&&(C[G]={type:"FormulaFunction",signature:{min:w[G].fmin,max:w[G].fmax}});
for(w=0;w<p.length;w++)G=p[w],C[G.name]={type:"FormulaFunction",signature:G};for(G in n)C[G]=n[G],C[G].type="any";return C}function e(n,w,p){var D="";switch(w){case "SYNTAX":D="Syntax Error: ";break;case "RUNTIME":D="Runtime Error: ";break;default:D="Syntax Error: "}try{switch(n.type){case "IfStatement":switch(p){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":D+=" Assignments not be made in logical tests";break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":D+=" Non Boolean used as Condition"}break;case "UpdateExpression":case "AssignmentExpression":switch(p){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":D+=
" Assignments not be made in logical tests";break;case "ASSIGNMENTTOVARSONLY":D+=" Assignments can only be made to identifiers"}break;case "ExpressionStatement":D+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(p){case "GLOBALFUNCTIONSONLY":D+=" Functions cannot be declared as variables";break;case "FUNCTIONMUSTHAVEIDENTIFIER":D+=" Function Definition must have an identifier"}break;case "VariableDeclaration":D+=" Only 1 variable can be declared at a time";break;
case "VariableDeclarator":switch(p){case "FUNCTIONVARIABLEDECLARATOR":D+=" Functions cannot be declared as variables";break;case "VARIABLEMUSTHAVEIDENTIFIER":D+=" Variable Definition must have an identifier"}break;case "Identifier":D+=" Identifier Not Found. ";D+=n.name;break;case "ObjectExpression":switch(p){case "OBJECTPROPERTYMUSTBESTRING":D+=" Property name must be a string"}break;case "ForStatement":switch(p){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":D+=" Non Boolean used as Condition"}break;
case "ForInStatement":switch(p){case "ONLY1VAR":D+=" Can only declare 1 var for use with IN";break;case "CANNOTDECLAREVAL":D+=" Can only declare value for use with IN";break;case "LEFTNOVAR":D+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":D+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":D+="This type cannot be used in an IN loop"}break;case "MemberExpression":switch(p){case "PROPERTYNOTFOUND":D+="Cannot find member property. ";D+=
!1===n.computed?"Identifier"===n.property.type?n.property.name:"":"";break;case "OUTOFBOUNDS":D+="Out of Bounds. ";D+=!1===n.computed?"Identifier"===n.property.type?n.property.name:"":"";break;case "NOTFOUND":D+="Cannot call member method on null. ";D+=!1===n.computed?"Identifier"===n.property.type?n.property.name:"":"";break;case "INVALIDTYPE":D+="Cannot call member property on object of this type. ",D+=!1===n.computed?"Identifier"===n.property.type?n.property.name:"":""}break;case "Property":switch(p){case "ONLYLITERAL":D+=
"Property names must be literals or identifiers"}break;case "Literal":break;case "CallExpression":switch(p){case "WRONGSIGNATURE":D+="Function signature does not match: ";D+="Identifier"===n.callee.type?n.callee.name:"";break;case "ONLYNODESUPPORTED":D+="Functions must be declared.";D+="Identifier"===n.callee.type?n.callee.name:"";break;case "NOTAFUNCTION":D+="Not a Function: ";D+="Identifier"===n.callee.type?n.callee.name:"";break;case "NOTFOUND":D+="Function Not Found: "+("Identifier"===n.callee.type?
n.callee.name:"")}break;case "UnaryExpression":switch(p){case "NOTSUPPORTEDUNARYOPERATOR":D+="Operator "+n.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";break;case "NOTSUPPORTEDTYPE":D+="Unary operator "+n.operator+" cannot be used with this argument."}case "BinaryExpression":switch(p){case "OPERATORNOTRECOGNISED":D+="Binary Operator not recognised "+n.operator}break;case "LogicalExpression":switch(p){case "ONLYBOOLEAN":D+="Operator "+n.operator+" cannot be used. Only || or \x26\x26 are allowed values";
break;case "ONLYORORAND":D+="Logical Expression "+n.operator+" being applied to parameters that are not boolean."}break;case "ConditionalExpression":D+="Conditional statements not supported.";break;case "ArrayExpression":switch(p){case "FUNCTIONCONTEXTILLEGAL":D+=" Cannot Put Function inside Array."}break;default:D+="Expression contains unrecognised code structures."}}catch(C){throw C;}return D}function r(n,w,p){return{line:n.loc.start.line,character:n.loc.start.column,reason:e(n,w,p)}}function t(n,
w,p,D){w={globalScope:w.globalScope,localScope:{}};for(var C=0;C<n.params.length;C++)w.localScope[n.params[C].name.toLowerCase()]={type:"any"};g(n.body,w,p,D,!1)}function g(n,w,p,D,C){void 0===C&&(C=!0);if(null===n)throw Error("Unnexpexted Expression Syntax");var G=null;try{switch(n.type){case "VariableDeclarator":if(null!==n.init&&"FunctionExpression"===n.init.type){D.push(r(n,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"));break}"Identifier"!==n.id.type?D.push(r(n,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):
(n.id.name.toLowerCase(),null===w.localScope?w.globalScope[n.id.name.toLowerCase()]={type:"any"}:w.localScope[n.id.name.toLowerCase()]={type:"any"});null!==n.init&&g(n.init,w,p,D,C);break;case "FunctionDeclaration":!1===C&&D.push(r(n,"SYNTAX","GLOBALFUNCTIONSONLY"));"Identifier"!==n.id.type&&D.push(r(n,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"));G=d("",n);t(n,w,p,D);null!==w.localScope&&D.push(r(n,"SYNTAX","GLOBALFUNCTIONSONLY"));G.isnative=!1;"Identifier"===n.id.type&&(w.globalScope[n.id.name.toLowerCase()]=
{type:"FormulaFunction",signature:[G]});break;case "VariableDeclaration":for(var z=0;z<n.declarations.length;z++)g(n.declarations[z],w,p,D,C);break;case "IfStatement":null!==n.test&&(g(n.test,w,p,D,C),"AssignmentExpression"!==n.test.type&&"UpdateExpression"!==n.test.type||D.push(r(n.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));null!==n.consequent&&g(n.consequent,w,p,D,C);null!==n.alternate&&g(n.alternate,w,p,D,C);break;case "EmptyStatement":break;case "BlockStatement":if(null!==n.body)for(z=
0;z<n.body.length;z++)g(n.body[z],w,p,D,C);break;case "ReturnStatement":null!==n.argument&&g(n.argument,w,p,D,C);break;case "ForInStatement":"VariableDeclaration"===n.left.type?(1<n.left.declarations.length&&D.push(r(n,"SYNTAX","ONLY1VAR")),null!==n.left.declarations[0].init&&D.push(r(n,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==n.left.type&&D.push(r(n,"SYNTAX","LEFTNOTVAR"));g(n.left,w,p,D,C);g(n.right,w,p,D,C);g(n.body,w,p,D,C);break;case "ForStatement":null!==n.init&&g(n.init,w,p,D,C);null!==
n.test&&g(n.test,w,p,D,C);null!==n.body&&g(n.body,w,p,D,C);null!==n.update&&g(n.update,w,p,D,C);break;case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":if("Identifier"!==n.argument.type&&"MemberExpression"!==n.argument.type)D.push(r(n,"SYNTAX","ASSIGNMENTTOVARSONLY"));else{if("Identifier"===n.argument.type){var E=!1;!1===p&&(null!==w.localScope&&void 0!==w.localScope[n.argument.name.toLowerCase()]&&(E=!0),void 0!==w.globalScope[n.argument.name.toLowerCase()]&&(E=!0),
!1===E&&D.push({line:null===n?0:n.loc.start.line,character:null===n?0:n.loc.start.column,reason:"Identifier "+n.argument.name+" has not been declared."}))}"MemberExpression"===n.argument.type&&g(n.argument,w,p,D,C)}break;case "AssignmentExpression":"Identifier"!==n.left.type&&"MemberExpression"!==n.left.type&&D.push(r(n,"SYNTAX","ASSIGNMENTTOVARSONLY"));switch(n.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:D.push(r(n,"SYNTAX","OPERATORNOTRECOGNISED"))}g(n.right,
w,p,D,C);E=!1;"Identifier"===n.left.type&&(null!==w.localScope&&void 0!==w.localScope[n.left.name.toLowerCase()]&&(E=!0),void 0!==w.globalScope[n.left.name.toLowerCase()]&&(E=!0),!1===p&&!1===E&&D.push({line:null===n?0:n.loc.start.line,character:null===n?0:n.loc.start.column,reason:"Identifier "+n.left.name+" has not been declared."}));"MemberExpression"===n.left.type&&g(n.left,w,p,D,C);break;case "ExpressionStatement":g(n.expression,w,p,D,C);break;case "Identifier":var H=n.name.toLowerCase();if(null!==
w.localScope&&void 0!==w.localScope[H]||void 0!==w.globalScope[H])break;!1===p&&D.push(r(n,"SYNTAX","VARIABLENOTFOUND"));break;case "MemberExpression":g(n.object,w,p,D,C);!0===n.computed&&g(n.property,w,p,D,C);break;case "Literal":break;case "TemplateElement":break;case "CallExpression":"Identifier"!==n.callee.type&&D.push(r(n,"SYNTAX","ONLYNODESSUPPORTED"));for(z=0;z<n.arguments.length;z++)g(n.arguments[z],w,p,D,C);if("Identifier"===n.callee.type){var I=u(n.callee.name,n.arguments,w);!1===p&&-1===
I&&D.push(r(n,"SYNTAX","NOTFOUND"));-2===I&&D.push(r(n,"SYNTAX","WRONGSIGNATURE"))}break;case "UnaryExpression":g(n.argument,w,p,D,C);break;case "BinaryExpression":g(n.left,w,p,D,C);g(n.right,w,p,D,C);switch(n.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":case "\x26":case "|":case "^":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":break;default:D.push(r(n,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(n.operator){case "\x26\x26":case "||":break;
default:D.push(r(n,"SYNTAX","OPERATORNOTRECOGNISED"))}g(n.left,w,p,D,C);"AssignmentExpression"!==n.left.type&&"UpdateExpression"!==n.left.type||D.push(r(n,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));g(n.right,w,p,D,C);"AssignmentExpression"!==n.right.type&&"UpdateExpression"!==n.right.type||D.push(r(n,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));break;case "ConditionalExpression":D.push(r(n,"SYNTAX","NOTSUPPORTED"));break;case "ArrayExpression":for(z=0;z<n.elements.length;z++)g(n.elements[z],
w,p,D,C);break;case "TemplateLiteral":for(z=0;z<n.quasis.length;z++)g(n.quasis[z],w,p,D,C);for(z=0;z<n.expressions.length;z++)g(n.expressions[z],w,p,D,C);break;case "ObjectExpression":for(z=0;z<n.properties.length;z++)g(n.properties[z],w,p,D,C);break;case "Property":"Literal"!==n.key.type&&"Identifier"!==n.key.type&&D.push(r(n,"SYNTAX","ONLYLITERAL"));"Literal"===n.key.type&&g(n.key,w,p,D,C);g(n.value,w,p,D,C);break;default:D.push(r(n,"SYNTAX","UNRECOGNISED"))}}catch(M){D.push({line:null===n?0:n.loc.start.line,
character:null===n?0:n.loc.start.column,reason:"Unnexpected Syntax"})}}function k(n){var w=[];l(n,function(p){"CallExpression"===p.type&&"Identifier"===p.callee.type&&w.push(p.callee.name.toLowerCase());return!0});return w}Object.defineProperty(y,"__esModule",{value:!0});y.scriptUsesFeatureSet=y.findScriptDependencies=y.findFunctionCalls=y.checkScript=y.extractAllIssues=y.extractAllIssuesInFunction=y.makeError=y.nodeErrorMessage=y.validateLanguage=y.validateScript=y.constructGlobalScope=y.validateFunction=
y.extractFunctionDeclaration=y.findFieldLiterals=y.referencesFunction=y.referencesMember=y.testValidityOfExpression=y.validateLanguageNode=y.walk=y.findFunction=y.checkFunctionSignature=y.addFunctionDeclaration=y.functionDecls=void 0;y.functionDecls={concatenate:{min:"0",max:"*"},tohex:{min:"1",max:"1"},hash:{min:"1",max:"1"},isoweek:{min:"1",max:"1"},isoweekday:{min:"1",max:"1"},isomonth:{min:"1",max:"1"},isoyear:{min:"1",max:"1"},resize:{min:"2",max:"3"},slice:{min:"0",max:"*"},splice:{min:"0",
max:"*"},push:{min:"2",max:"2"},pop:{min:"1",max:"1"},includes:{min:"2",max:"2"},array:{min:"1",max:"2"},front:{min:"1",max:"1"},back:{min:"1",max:"1"},insert:{min:"3",max:"3"},erase:{min:"2",max:"2"},split:{min:"2",max:"4"},guid:{min:"0",max:"1"},today:{min:"0",max:"0"},angle:{min:"2",max:"3"},bearing:{min:"2",max:"3"},urlencode:{min:"1",max:"1"},now:{min:"0",max:"0"},timestamp:{min:"0",max:"0"},day:{min:"1",max:"1"},month:{min:"1",max:"1"},year:{min:"1",max:"1"},hour:{min:"1",max:"1"},second:{min:"1",
max:"1"},millisecond:{min:"1",max:"1"},minute:{min:"1",max:"1"},weekday:{min:"1",max:"1"},toutc:{min:"1",max:"1"},tolocal:{min:"1",max:"1"},date:{min:"0",max:"7"},datediff:{min:"2",max:"3"},dateadd:{min:"2",max:"3"},trim:{min:"1",max:"1"},text:{min:"1",max:"2"},left:{min:"2",max:"2"},right:{min:"2",max:"2"},mid:{min:"2",max:"3"},upper:{min:"1",max:"1"},proper:{min:"1",max:"2"},lower:{min:"1",max:"1"},find:{min:"2",max:"3"},iif:{min:"3",max:"3"},decode:{min:"2",max:"*"},when:{min:"2",max:"*"},defaultvalue:{min:"2",
max:"2"},isempty:{min:"1",max:"1"},domaincode:{min:"2",max:"4"},domainname:{min:"2",max:"4"},polygon:{min:"1",max:"1"},point:{min:"1",max:"1"},polyline:{min:"1",max:"1"},extent:{min:"1",max:"1"},multipoint:{min:"1",max:"1"},ringisclockwise:{min:"1",max:"1"},geometry:{min:"1",max:"1"},count:{min:"0",max:"*"},number:{min:"1",max:"2"},acos:{min:"1",max:"1"},asin:{min:"1",max:"1"},atan:{min:"1",max:"1"},atan2:{min:"2",max:"2"},ceil:{min:"1",max:"2"},floor:{min:"1",max:"2"},round:{min:"1",max:"2"},cos:{min:"1",
max:"1"},exp:{min:"1",max:"1"},log:{min:"1",max:"1"},min:{min:"0",max:"*"},constrain:{min:"3",max:"3"},console:{min:"0",max:"*"},max:{min:"0",max:"*"},pow:{min:"2",max:"2"},random:{min:"0",max:"0"},sqrt:{min:"1",max:"1"},sin:{min:"1",max:"1"},tan:{min:"1",max:"1"},abs:{min:"1",max:"1"},isnan:{min:"1",max:"1"},stdev:{min:"0",max:"*"},average:{min:"0",max:"*"},mean:{min:"0",max:"*"},sum:{min:"0",max:"*"},variance:{min:"0",max:"*"},distinct:{min:"0",max:"*"},first:{min:"1",max:"1"},top:{min:"2",max:"2"},
boolean:{min:"1",max:"1"},dictionary:{min:"0",max:"*"},typeof:{min:"1",max:"1"},reverse:{min:"1",max:"1"},replace:{min:"3",max:"4"},sort:{min:"1",max:"2"},feature:{min:"1",max:"*"},haskey:{min:"2",max:"2"},indexof:{min:"2",max:"2"},disjoint:{min:"2",max:"2"},intersects:{min:"2",max:"2"},touches:{min:"2",max:"2"},crosses:{min:"2",max:"2"},within:{min:"2",max:"2"},contains:{min:"2",max:"2"},overlaps:{min:"2",max:"2"},equals:{min:"2",max:"2"},relate:{min:"3",max:"3"},intersection:{min:"2",max:"2"},union:{min:"1",
max:"2"},difference:{min:"2",max:"2"},symmetricdifference:{min:"2",max:"2"},clip:{min:"2",max:"2"},cut:{min:"2",max:"2"},area:{min:"1",max:"2"},areageodetic:{min:"1",max:"2"},length:{min:"1",max:"2"},lengthgeodetic:{min:"1",max:"2"},distancegeodetic:{min:"2",max:"3"},distance:{min:"2",max:"3"},densify:{min:"2",max:"3"},densifygeodetic:{min:"2",max:"3"},generalize:{min:"2",max:"4"},buffer:{min:"2",max:"3"},buffergeodetic:{min:"2",max:"3"},offset:{min:"2",max:"6"},rotate:{min:"2",max:"3"},issimple:{min:"1",
max:"1"},simplify:{min:"1",max:"1"},centroid:{min:"1",max:"1"},isselfintersecting:{min:"1",max:"1"},multiparttosinglepart:{min:"1",max:"1"},setgeometry:{min:"2",max:"2"},portal:{min:"1",max:"1"},getuser:{min:"1",max:"2"},subtypes:{min:"1",max:"1"},subtypecode:{min:"1",max:"1"},subtypename:{min:"1",max:"1"},domain:{min:"2",max:"3"},schema:{min:"1",max:"1"}};for(var x in y.functionDecls)y.functionDecls[x].fmin=y.functionDecls[x].min,y.functionDecls[x].fmax=y.functionDecls[x].max;var v="featureset getuser featuresetbyid featuresetbyname featuresetbyassociation featuresetbyrelationshipname featuresetbyurl attachments featuresetbyportalitem".split(" "),
A="disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length lengthgeodetic distance distancegeodetic densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple simplify multiparttosinglepart".split(" ");y.addFunctionDeclaration=function(n,w){var p=y.functionDecls[n.name.toLowerCase()];void 0===p?"sync"===w?y.functionDecls[n.name.toLowerCase()]={min:n.min,max:n.max}:y.functionDecls[n.name.toLowerCase()]=
{fmin:n.min,fmax:n.max}:"sync"===w?(p.min=n.min,p.max=n.max):(p.fmin=n.min,p.fmax=n.max)};y.checkFunctionSignature=c;y.findFunction=u;y.walk=l;y.validateLanguageNode=m;y.testValidityOfExpression=h;y.referencesMember=f;y.referencesFunction=function(n,w){var p=!1,D=w.toLowerCase();l(n,function(C){return p?!1:"CallExpression"===C.type&&"Identifier"===C.callee.type&&C.callee.name&&C.callee.name.toLowerCase()===D?(p=!0,!1):!0});return p};y.findFieldLiterals=function(n){var w=[];l(n,function(p){if("MemberExpression"!==
p.type||"Identifier"!==p.object.type)return!0;!1===p.computed&&p.object&&p.object.name&&p.property&&"Identifier"===p.property.type&&p.property.name?w.push(p.object.name.toLowerCase()+"."+p.property.name.toLowerCase()):p.object&&p.object.name&&p.property&&"Literal"===p.property.type&&"string"===typeof p.property.value&&w.push(p.object.name.toLowerCase()+"."+p.property.value.toString().toLowerCase());return!1});return w};y.extractFunctionDeclaration=d;y.validateFunction=a;y.constructGlobalScope=b;y.validateScript=
function(n,w,p,D){void 0===p&&(p="async");void 0===D&&(D=y.functionDecls);w={globalScope:b(w.vars,D,w.customFunctions,p),localScope:null};return h(n.body[0].body,w)};y.validateLanguage=function(n){return"BlockStatement"!==n.body[0].body.type?"Invalid formula content.":m(n.body[0].body)};y.nodeErrorMessage=e;y.makeError=r;y.extractAllIssuesInFunction=t;y.extractAllIssues=g;y.checkScript=function(n,w,p,D,C){void 0===D&&(D="async");void 0===C&&(C=y.functionDecls);var G=[];if("BlockStatement"!==n.body[0].body.type)return[{line:0,
character:0,reason:"Invalid Body"}];if(null===w||void 0===w)w={vars:{},customFunctions:[]};w={globalScope:b(w.vars,C,w.customFunctions,D),localScope:null};try{g(n.body[0].body,w,p,G)}catch(z){}return G};y.findFunctionCalls=k;y.findScriptDependencies=function(n,w){void 0===w&&(w=[]);var p=null;if(void 0===n.usesFeatureSet){null===p&&(p=k(n));n.usesFeatureSet=!1;for(var D=0;D<p.length;D++)-1<v.indexOf(p[D])&&(n.usesFeatureSet=!0,n.isAsync=!0);if(!1===n.usesFeatureSet&&w&&0<w.length)for(D=0;D<w.length;D++)if(f(n,
w[D])){n.usesFeatureSet=!0;n.isAsync=!0;break}}if(void 0===n.usesGeometry)for(n.usesGeometry=!1,null===p&&(p=k(n)),D=0;D<p.length;D++)-1<A.indexOf(p[D])&&(n.usesGeometry=!0)};y.scriptUsesFeatureSet=function(n){n=k(n);for(var w=0;w<n.length;w++)if(-1<v.indexOf(n[w]))return!0;return!1}})},"esri/arcade/functions/array":function(){define(["require","exports","../languageUtils"],function(B,y,c){Object.defineProperty(y,"__esModule",{value:!0});y.registerFunctions=void 0;y.registerFunctions=function(u,q){u.array=
function(l,m){return q(l,m,function(h,f,d){c.pcCheck(d,1,2);h=c.toNumber(d[0]);if(isNaN(h)||!1===c.isInteger(h))throw Error("Invalid Parameter");d=c.defaultUndefined(d[1],null);h=Array(h);h.fill(d);return h})};u.front=function(l,m){return q(l,m,function(h,f,d){c.pcCheck(d,1,1);if(c.isImmutableArray(d[0])){if(0>=d[0].length())throw Error("Array is empty");return d[0].get(0)}if(c.isArray(d[0])){if(0>=d[0].length)throw Error("Array is empty");return d[0][0]}throw Error("Invalid Parameter");})};u.back=
function(l,m){return q(l,m,function(h,f,d){c.pcCheck(d,1,1);if(c.isImmutableArray(d[0])){if(0>=d[0].length())throw Error("Array is empty");return d[0].get(d[0].length()-1)}if(c.isArray(d[0])){if(0>=d[0].length)throw Error("Array is empty");return d[0][d[0].length-1]}throw Error("Invalid Parameter");})};u.push=function(l,m){return q(l,m,function(h,f,d){c.pcCheck(d,1,2);if(c.isArray(d[0]))return d[0][d[0].length]=d[1],d[0].length;throw Error("Invalid Parameter");})};u.pop=function(l,m){return q(l,m,
function(h,f,d){c.pcCheck(d,1,1);if(c.isArray(d[0])){if(0>=d[0].length)throw Error("Array is empty");h=d[0][d[0].length-1];--d[0].length;return h}throw Error("Invalid Parameter");})};u.erase=function(l,m){return q(l,m,function(h,f,d){c.pcCheck(d,2,2);if(c.isArray(d[0])){h=c.toNumber(d[1]);if(isNaN(h)||!1===c.isInteger(h))throw Error("Invalid Parameter");d=d[0];if(0>=d.length)throw Error("Array is empty");0>h&&(h=d.length+h);if(0>h)throw Error("Element not found");if(h>=d.length)throw Error("Index is greater than array");
d.splice(h,1);return c.voidOperation}throw Error("Invalid Parameter");})};u.insert=function(l,m){return q(l,m,function(h,f,d){c.pcCheck(d,3,3);if(c.isArray(d[0])){h=c.toNumber(d[1]);if(isNaN(h)||!1===c.isInteger(h))throw Error("Invalid Parameter");f=d[2];d=d[0];if(h>d.length)throw Error("Index is greater than array");if(0>h&&h<-1*d.length)throw Error("Index is greater than array");if(h===d.length)return d[h]=f,c.voidOperation;d.splice(h,0,f);return c.voidOperation}throw Error("Invalid Parameter");
})};u.resize=function(l,m){return q(l,m,function(h,f,d){c.pcCheck(d,2,3);if(c.isArray(d[0])){f=c.toNumber(d[1]);if(isNaN(f)||!1===c.isInteger(f))throw Error("Invalid Parameter");if(0>f)throw Error("Size cannot be negative");h=c.defaultUndefined(d[2],null);d=d[0];if(d.length>=f)return d.length=f,c.voidOperation;var a=d.length;d.length=f;for(f=a;f<d.length;f++)d[f]=h;return c.voidOperation}throw Error("Invalid Parameter");})};u.includes=function(l,m){return q(l,m,function(h,f,d){c.pcCheck(d,2,2);if(c.isArray(d[0])){var a=
d[1];h=d[0];return-1<h.findIndex(function(e){return c.equalityTest(e,a)})?!0:!1}if(c.isImmutableArray(d[0])){var b=d[1];h=d[0].toArray();return-1<h.findIndex(function(e){return c.equalityTest(e,b)})?!0:!1}throw Error("Invalid Parameter");})};u.slice=function(l,m){return q(l,m,function(h,f,d){c.pcCheck(d,1,3);if(c.isArray(d[0])){h=c.toNumber(c.defaultUndefined(d[1],0));f=c.toNumber(c.defaultUndefined(d[2],d[0].length));if(isNaN(h)||!1===c.isInteger(h))throw Error("Invalid Parameter");if(isNaN(f)||
!1===c.isInteger(f))throw Error("Invalid Parameter");var a=d[0];return a.slice(h,f)}if(c.isImmutableArray(d[0])){a=d[0];h=c.toNumber(c.defaultUndefined(d[1],0));f=c.toNumber(c.defaultUndefined(d[2],a.length()));if(isNaN(h)||!1===c.isInteger(h))throw Error("Invalid Parameter");if(isNaN(f)||!1===c.isInteger(f))throw Error("Invalid Parameter");return a.toArray().slice(h,f)}throw Error("Invalid Parameter");})};u.splice=function(l,m){return q(l,m,function(h,f,d){h=[];for(f=0;f<d.length;f++)c.isArray(d[f])?
h.push.apply(h,d[f]):c.isImmutableArray(d[f])?h.push.apply(h,d[f].toArray()):h.push(d[f]);return h})}}})},"esri/arcade/functions/date":function(){define(["require","exports","../languageUtils"],function(B,y,c){function u(m){m=new Date(m.getTime());var h=m.getFullYear(),f=new Date(0);f.setFullYear(h+1,0,4);f.setHours(0,0,0,0);f=q(f);var d=new Date(0);d.setFullYear(h,0,4);d.setHours(0,0,0,0);d=q(d);return m.getTime()>=f.getTime()?h+1:m.getTime()>=d.getTime()?h:h-1}function q(m){m=new Date(m.getTime());
var h=m.getDay();h=(1>h?7:0)+h-1;m.setDate(m.getDate()-h);m.setHours(0,0,0,0);return m}function l(m){return null===m?m:isNaN(m.getTime())?null:m}Object.defineProperty(y,"__esModule",{value:!0});y.registerFunctions=void 0;y.registerFunctions=function(m,h){m.today=function(f,d){return h(f,d,function(a,b,e){c.pcCheck(e,0,0);a=new Date;a.setHours(0,0,0,0);return a})};m.now=function(f,d){return h(f,d,function(a,b,e){c.pcCheck(e,0,0);return new Date})};m.timestamp=function(f,d){return h(f,d,function(a,
b,e){c.pcCheck(e,0,0);a=new Date;return a=new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())})};m.toutc=function(f,d){return h(f,d,function(a,b,e){c.pcCheck(e,1,1);a=c.toDate(e[0]);return null===a?null:new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())})};m.tolocal=function(f,d){return h(f,d,function(a,b,e){c.pcCheck(e,1,1);a=c.toDate(e[0]);
return null===a?null:c.MomentLibrary.Moment.utc([a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()]).toDate()})};m.day=function(f,d){return h(f,d,function(a,b,e){c.pcCheck(e,1,1);a=c.toDate(e[0]);return null===a?NaN:a.getDate()})};m.month=function(f,d){return h(f,d,function(a,b,e){c.pcCheck(e,1,1);a=c.toDate(e[0]);return null===a?NaN:a.getMonth()})};m.year=function(f,d){return h(f,d,function(a,b,e){c.pcCheck(e,1,1);a=c.toDate(e[0]);return null===
a?NaN:a.getFullYear()})};m.hour=function(f,d){return h(f,d,function(a,b,e){c.pcCheck(e,1,1);a=c.toDate(e[0]);return null===a?NaN:a.getHours()})};m.second=function(f,d){return h(f,d,function(a,b,e){c.pcCheck(e,1,1);a=c.toDate(e[0]);return null===a?NaN:a.getSeconds()})};m.millisecond=function(f,d){return h(f,d,function(a,b,e){c.pcCheck(e,1,1);a=c.toDate(e[0]);return null===a?NaN:a.getMilliseconds()})};m.minute=function(f,d){return h(f,d,function(a,b,e){c.pcCheck(e,1,1);a=c.toDate(e[0]);return null===
a?NaN:a.getMinutes()})};m.weekday=function(f,d){return h(f,d,function(a,b,e){c.pcCheck(e,1,1);a=c.toDate(e[0]);return null===a?NaN:a.getDay()})};m.isoweekday=function(f,d){return h(f,d,function(a,b,e){c.pcCheck(e,1,1);a=c.toDate(e[0]);if(null===a)return NaN;a=a.getDay();0===a&&(a=7);return a})};m.isomonth=function(f,d){return h(f,d,function(a,b,e){c.pcCheck(e,1,1);a=c.toDate(e[0]);return null===a?NaN:a.getMonth()+1})};m.isoweek=function(f,d){return h(f,d,function(a,b,e){c.pcCheck(e,1,1);b=c.toDate(e[0]);
if(null===b)return NaN;a=q(b).getTime();b=u(b);e=new Date(0);e.setFullYear(b,0,4);e.setHours(0,0,0,0);b=q(e);a-=b.getTime();return Math.round(a/6048E5)+1})};m.isoyear=function(f,d){return h(f,d,function(a,b,e){c.pcCheck(e,1,1);a=c.toDate(e[0]);return null===a?NaN:u(a)})};m.date=function(f,d){return h(f,d,function(a,b,e){c.pcCheck(e,0,7);if(3===e.length)return l(new Date(c.toNumber(e[0]),c.toNumber(e[1]),c.toNumber(e[2]),0,0,0,0));if(4===e.length)return l(new Date(c.toNumber(e[0]),c.toNumber(e[1]),
c.toNumber(e[2]),c.toNumber(e[3]),0,0,0));if(5===e.length)return l(new Date(c.toNumber(e[0]),c.toNumber(e[1]),c.toNumber(e[2]),c.toNumber(e[3]),c.toNumber(e[4]),0,0));if(6===e.length)return l(new Date(c.toNumber(e[0]),c.toNumber(e[1]),c.toNumber(e[2]),c.toNumber(e[3]),c.toNumber(e[4]),c.toNumber(e[5]),0));if(7===e.length)return l(new Date(c.toNumber(e[0]),c.toNumber(e[1]),c.toNumber(e[2]),c.toNumber(e[3]),c.toNumber(e[4]),c.toNumber(e[5]),c.toNumber(e[6])));if(2===e.length){a=c.toString(e[1]);if(""===
a)return null;a=c.standardiseDateFormat(a);e=c.MomentLibrary.Moment(c.toString(e[0]),a,!0);return!0===e.isValid()?e.toDate():null}if(1===e.length){if(c.isString(e[0])){if(""===e[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(e[0]))return c.toDate(e[0]+"-01-01")}a=c.toNumber(e[0]);return!1===isNaN(a)?l(new Date(a)):c.toDate(e[0])}if(0===e.length)return new Date})};m.datediff=function(f,d){return h(f,d,function(a,b,e){c.pcCheck(e,2,3);a=c.toDateM(e[0]);
b=c.toDateM(e[1]);if(null===a||null===b)return NaN;switch(c.toString(e[2]).toLowerCase()){case "days":case "day":case "d":return a.diff(b,"days",!0);case "months":case "month":return a.diff(b,"months",!0);case "minutes":case "minute":case "m":return"M"===e[2]?a.diff(b,"months",!0):a.diff(b,"minutes",!0);case "seconds":case "second":case "s":return a.diff(b,"seconds",!0);case "milliseconds":case "millisecond":case "ms":return a.diff(b);case "hours":case "hour":case "h":return a.diff(b,"hours",!0);
case "years":case "year":case "y":return a.diff(b,"years",!0);default:return a.diff(b)}})};m.dateadd=function(f,d){return h(f,d,function(a,b,e){c.pcCheck(e,2,3);a=c.toDateM(e[0]);if(null===a)return null;b="milliseconds";switch(c.toString(e[2]).toLowerCase()){case "days":case "day":case "d":b="days";break;case "months":case "month":b="months";break;case "minutes":case "minute":case "m":b="M"===e[2]?"months":"minutes";break;case "seconds":case "second":case "s":b="seconds";break;case "milliseconds":case "millisecond":case "ms":b=
"milliseconds";break;case "hours":case "hour":case "h":b="hours";break;case "years":case "year":case "y":b="years"}a.add(c.toNumber(e[1]),b);return a.toDate()})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../Dictionary ../Feature ../ImmutablePointArray ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ./centroid ../../geometry/jsonUtils".split(" "),function(B,y,c,
u,q,l,m,h,f,d,a,b,e,r){Object.defineProperty(y,"__esModule",{value:!0});y.registerFunctions=void 0;y.registerFunctions=function(t,g){t.ringisclockwise=function(k,x){return g(k,x,function(v,A,n){l.pcCheck(n,1,1);v=[];if(null===n[0])return!1;if(l.isArray(n[0])){var w=0;for(n=n[0];w<n.length;w++)if(A=n[w],A instanceof d)v.push([A.x,A.y]);else throw Error("Invalid Argument");}else if(n[0]instanceof q)v=n[0]._elements;else if(l.isImmutableArray(n[0])){w=0;for(var p=n[0].toArray();w<p.length;w++)if(A=p[w],
A instanceof d)v.push([A.x,A.y]);else throw Error("Invalid Argument");0<v.length&&(n[0].get(0),n[0].get(0))}else throw Error("Invalid Argument");return 3>v.length?!1:(new a({rings:[],spatialReference:{wkid:4326}})).isClockwise(v)})};t.polygon=function(k,x){return g(k,x,function(v,A,n){l.pcCheck(n,1,1);v=null;if(n[0]instanceof c){if(v=l.fixSpatialReference(u.parseGeometryFromDictionary(n[0]),k.spatialReference),!1===v instanceof a)throw Error("Illegal Parameter");}else v=n[0]instanceof a?r.fromJson(n[0].toJson()):
l.fixSpatialReference(new a(JSON.parse(n[0])),k.spatialReference);if(null!==v&&!1===v.spatialReference.equals(k.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return l.fixNullGeometry(v)})};t.polyline=function(k,x){return g(k,x,function(v,A,n){l.pcCheck(n,1,1);v=null;if(n[0]instanceof c){if(v=l.fixSpatialReference(u.parseGeometryFromDictionary(n[0]),k.spatialReference),!1===v instanceof b)throw Error("Illegal Parameter");
}else v=n[0]instanceof b?r.fromJson(n[0].toJson()):l.fixSpatialReference(new b(JSON.parse(n[0])),k.spatialReference);if(null!==v&&!1===v.spatialReference.equals(k.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return l.fixNullGeometry(v)})};t.point=function(k,x){return g(k,x,function(v,A,n){l.pcCheck(n,1,1);v=null;if(n[0]instanceof c){if(v=l.fixSpatialReference(u.parseGeometryFromDictionary(n[0]),k.spatialReference),
!1===v instanceof d)throw Error("Illegal Parameter");}else v=n[0]instanceof d?r.fromJson(n[0].toJson()):l.fixSpatialReference(new d(JSON.parse(n[0])),k.spatialReference);if(null!==v&&!1===v.spatialReference.equals(k.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return l.fixNullGeometry(v)})};t.multipoint=function(k,x){return g(k,x,function(v,A,n){l.pcCheck(n,1,1);v=null;if(n[0]instanceof c){if(v=l.fixSpatialReference(u.parseGeometryFromDictionary(n[0]),
k.spatialReference),!1===v instanceof f)throw Error("Illegal Parameter");}else v=n[0]instanceof f?r.fromJson(n[0].toJson()):l.fixSpatialReference(new f(JSON.parse(n[0])),k.spatialReference);if(null!==v&&!1===v.spatialReference.equals(k.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return l.fixNullGeometry(v)})};t.extent=function(k,x){return g(k,x,function(v,A,n){n=l.autoCastFeatureToGeometry(n);l.pcCheck(n,1,1);v=null;
n[0]instanceof c?v=l.fixSpatialReference(u.parseGeometryFromDictionary(n[0]),k.spatialReference):n[0]instanceof d?(v={xmin:n[0].x,ymin:n[0].y,xmax:n[0].x,ymax:n[0].y,spatialReference:n[0].spatialReference.toJson()},n=n[0],n.hasZ?(v.zmin=n.z,v.zmax=n.z):n.hasM&&(v.mmin=n.m,v.mmax=n.m),v=r.fromJson(v)):v=n[0]instanceof a?r.fromJson(n[0].getExtent().toJson()):n[0]instanceof b?r.fromJson(n[0].getExtent().toJson()):n[0]instanceof f?r.fromJson(n[0].getExtent().toJson()):n[0]instanceof m?r.fromJson(n[0].toJson()):
l.fixSpatialReference(new m(JSON.parse(n[0])),k.spatialReference);if(null!==v&&!1===v.spatialReference.equals(k.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return l.fixNullGeometry(v)})};t.geometry=function(k,x){return g(k,x,function(v,A,n){l.pcCheck(n,1,1);v=null;v=n[0]instanceof u?l.fixSpatialReference(n[0].geometry(),k.spatialReference):n[0]instanceof c?l.fixSpatialReference(u.parseGeometryFromDictionary(n[0]),
k.spatialReference):l.fixSpatialReference(r.fromJson(JSON.parse(n[0])),k.spatialReference);if(null!==v&&!1===v.spatialReference.equals(k.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return l.fixNullGeometry(v)})};t.setgeometry=function(k,x){return g(k,x,function(v,A,n){l.pcCheck(n,2,2);if(n[0]instanceof u){if(!0===n[0].immutable)throw Error("Feature is Immutable");if(n[1]instanceof h||null===n[1])n[0]._geometry=n[1];
else throw Error("Illegal Argument");}else throw Error("Illegal Argument");return l.voidOperation})};t.feature=function(k,x){return g(k,x,function(v,A,n){if(0===n.length)throw Error("Missing Parameters");v=null;if(1===n.length)if(l.isString(n[0]))v=u.fromJson(JSON.parse(n[0]));else if(n[0]instanceof u)v=u.createFromArcadeFeature(n[0]);else if(n[0]instanceof h)v=u.createFromGraphicLikeObject(n[0],null,null);else if(n[0]instanceof c)v=n[0].hasField("geometry")?n[0].field("geometry"):null,A=n[0].hasField("attributes")?
n[0].field("attributes"):null,null!==v&&v instanceof c&&(v=u.parseGeometryFromDictionary(v)),null!==A&&(A=u.parseAttributesFromDictionary(A)),v=u.createFromGraphicLikeObject(v,A,null);else throw Error("Illegal Argument");else{if(2===n.length){A=v=null;if(null!==n[0])if(n[0]instanceof h)v=n[0];else if(v instanceof c)v=u.parseGeometryFromDictionary(n[0]);else throw Error("Illegal Argument");if(null!==n[1])if(n[1]instanceof c)A=u.parseAttributesFromDictionary(n[1]);else throw Error("Illegal Argument");
}else{v=null;A={};if(null!==n[0])if(n[0]instanceof h)v=n[0];else if(v instanceof c)v=u.parseGeometryFromDictionary(n[0]);else throw Error("Illegal Argument");for(var w=1;w<n.length;w+=2){var p=l.toString(n[w]),D=n[w+1];if(null===D||void 0===D||l.isString(D)||isNaN(D)||l.isDate(D)||l.isNumber(D)||l.isBoolean(D)){if(l.isFunctionParameter(D)||!1===l.isSimpleType(D))throw Error("Illegal Argument");A[p]=D===l.voidOperation?null:D}else throw Error("Illegal Argument");}}v=u.createFromGraphicLikeObject(v,
A,null)}v._geometry=l.fixSpatialReference(v.geometry(),k.spatialReference);v.immutable=!1;return v})};t.dictionary=function(k,x){return g(k,x,function(v,A,n){if(0===n.length)return n=new c,n.immutable=!1,n;if(1===n.length&&l.isString(n[0]))try{var w=JSON.parse(n[0]),p=c.convertObjectToArcadeDictionary(w);p.immutable=!1;return p}catch(D){throw Error("Missing Parameters or Illegal Json");}if(0!==n.length%2)throw Error("Missing Parameters");v={};for(A=0;A<n.length;A+=2)if(w=l.toString(n[A]),p=n[A+1],
null===p||void 0===p||l.isString(p)||isNaN(p)||l.isDate(p)||l.isNumber(p)||l.isBoolean(p)||l.isArray(p)||l.isImmutableArray(p)){if(l.isFunctionParameter(p))throw Error("Illegal Argument");v[w]=p===l.voidOperation?null:p}else throw Error("Illegal Argument");n=new c(v);n.immutable=!1;return n})};t.haskey=function(k,x){return g(k,x,function(v,A,n){l.pcCheck(n,2,2);v=l.toString(n[1]);if(n[0]instanceof u||n[0]instanceof c)return n[0].hasField(v);throw Error("Illegal Argument");})};t.indexof=function(k,
x){return g(k,x,function(v,A,n){l.pcCheck(n,2,2);v=n[1];if(l.isArray(n[0])){for(A=0;A<n[0].length;A++)if(l.equalityTest(v,n[0][A]))return A;return-1}if(l.isImmutableArray(n[0])){var w=n[0].length();for(A=0;A<w;A++)if(l.equalityTest(v,n[0].get(A)))return A;return-1}throw Error("Illegal Argument");})};t.angle=function(k,x){return g(k,x,function(v,A,n){n=l.autoCastFeatureToGeometry(n);l.pcCheck(n,2,3);if(!(n[0]instanceof d))throw Error("Illegal Argument");if(!(n[1]instanceof d))throw Error("Illegal Argument");
if(2<n.length&&!(n[2]instanceof d))throw Error("Illegal Argument");return 2===n.length?e.angle2D(n[0],n[1]):e.angleBetween2D(n[0],n[1],n[2])})};t.bearing=function(k,x){return g(k,x,function(v,A,n){n=l.autoCastFeatureToGeometry(n);l.pcCheck(n,2,3);if(!(n[0]instanceof d))throw Error("Illegal Argument");if(!(n[1]instanceof d))throw Error("Illegal Argument");if(2<n.length&&!(n[2]instanceof d))throw Error("Illegal Argument");return 2===n.length?e.bearing2D(n[0],n[1]):e.bearingBetween2D(n[0],n[1],n[2])})};
t.isselfintersecting=function(k,x){return g(k,x,function(v,A,n){n=l.autoCastFeatureToGeometry(n);l.pcCheck(n,1,1);v=n[0];if(v instanceof a)return v.isSelfIntersecting(v);if(v instanceof b)return v=v.paths,e.pathsSelfIntersecting(v);if(v instanceof f)for(A=v.points,n=0;n<A.length;n++)for(var w=0;w<A.length;w++)if(w!==n){for(var p=!0,D=0;D<A[n].length;D++)if(A[n][D]!==A[w][D]){p=!1;break}if(!0===p)return!0}return l.isArray(v)||l.isImmutableArray(v)?(v=l.autoCastArrayOfPointsToPolyline(v,k.spatialReference),
null!==v&&(v=v.paths),e.pathsSelfIntersecting(v)):!1})}}})},"esri/arcade/functions/centroid":function(){define(["require","exports","../../geometry/Point"],function(B,y,c){function u(a,b,e){var r={x:0,y:0};b&&(r.z=0);e&&(r.m=0);for(var t=0,g=a[0],k=0;k<a.length;k++){var x=a[k];a:if(x.length!==g.length)var v=!1;else{for(v=0;v<x.length;v++)if(x[v]!==g[v]){v=!1;break a}v=!0}if(!1===v){v=q(g,x,b);var A=x,n=b,w=e,p={x:(g[0]+A[0])/2,y:(g[1]+A[1])/2};n&&(p.z=(g[2]+A[2])/2);n&&w?p.m=(g[3]+A[3])/2:w&&(p.m=
(g[2]+A[2])/2);g=p;g.x*=v;g.y*=v;r.x+=g.x;r.y+=g.y;b&&(g.z*=v,r.z+=g.z);e&&(g.m*=v,r.m+=g.m);t+=v;g=x}}0<t?(r.x/=t,r.y/=t,b&&(r.z/=t),e&&(r.m/=t)):(r.x=a[0][0],r.y=a[0][1],b&&(r.z=a[0][2]),e&&b?r.m=a[0][3]:e&&(r.m=a[0][2]));return r}function q(a,b,e){var r=b[0]-a[0];a=b[1]-a[1];return e?(b=b[2]-b[2],Math.sqrt(r*r+a*a+b*b)):Math.sqrt(r*r+a*a)}function l(a,b,e){for(void 0===e&&(e=0);a<e;)a+=b;for(e+=b;a>=e;)a-=b;return a}function m(a,b){return Math.atan2(b.y-a.y,b.x-a.x)}function h(a,b,e){var r=a.x-
b.x;a=a.y-b.y;var t=e.x-b.x;b=e.y-b.y;return Math.atan2(r*b-t*a,r*t+a*b)}function f(a,b,e,r,t){var g=a[0];a=a[1];var k=b[0];b=b[1];var x=e[0],v=e[1];e=r[0]-x;x=g-x;var A=k-g;r=r[1]-v;v=a-v;var n=b-a,w=r*A-e*n;if(0===w)return!1;e=(e*v-r*x)/w;x=(A*v-n*x)/w;return 0<=e&&1>=e&&0<=x&&1>=x?(t&&(t[0]=g+e*(k-g),t[1]=a+e*(b-a)),!0):!1}Object.defineProperty(y,"__esModule",{value:!0});y.pathsSelfIntersecting=y.bearingBetween2D=y.angleBetween2D=y.angleBetweenRad=y.bearing2D=y.angle2D=y.angleRad=y.centroidMultiPoint=
y.centroidPolyline=void 0;y.centroidPolyline=function(a){for(var b={x:0,y:0,spatialReference:a.spatialReference.toJson()},e={x:0,y:0,spatialReference:a.spatialReference.toJson()},r=0,t=0,g=0;g<a.paths.length;g++)if(0!==a.paths[g].length){var k=a.paths[g];var x=!0===a.hasZ;if(1>=k.length)k=0;else{for(var v=0,A=1;A<k.length;A++)v+=q(k[A-1],k[A],x);k=v}0===k?(x=u(a.paths[g],!0===a.hasZ,!0===a.hasM),b.x+=x.x,b.y+=x.y,!0===a.hasZ&&(b.z+=x.z),!0===a.hasM&&(b.m+=x.m),++r):(x=u(a.paths[g],!0===a.hasZ,!0===
a.hasM),e.x+=x.x*k,e.y+=x.y*k,!0===a.hasZ&&(e.z+=x.z*k),!0===a.hasM&&(e.m+=x.m*k),t+=k)}return 0<t?(e.x/=t,e.y/=t,!0===a.hasZ&&(e.z/=t),!0===a.hasM&&(e.m/=t),new c(e)):0<r?(b.x/=r,b.y/=r,!0===a.hasZ&&(e.z/=r),!0===a.hasM&&(b.m/=r),new c(b)):null};y.centroidMultiPoint=function(a){if(0===a.points.length)return null;for(var b=0,e=0,r=0,t=0,g=0;g<a.points.length;g++){var k=a.getPoint(g);!0===k.hasZ&&(r+=k.z);!0===k.hasM&&(t+=k.m);b+=k.x;e+=k.y;t+=k.m}b={x:b/a.points.length,y:e/a.points.length,spatialReference:null};
b.spatialReference=a.spatialReference.toJson();!0===a.hasZ&&(b.z=r/a.points.length);!0===a.hasM&&(b.m=t/a.points.length);return new c(b)};y.angleRad=m;y.angle2D=function(a,b){return l(m(a,b),2*Math.PI)*(180/Math.PI)};y.bearing2D=function(a,b){return l(Math.PI/2-m(a,b),2*Math.PI)*(180/Math.PI)};y.angleBetweenRad=h;y.angleBetween2D=function(a,b,e){return l(h(a,b,e),2*Math.PI)*(180/Math.PI)};y.bearingBetween2D=function(a,b,e){return l(-1*h(a,b,e),2*Math.PI)*(180/Math.PI)};var d=[0,0];y.pathsSelfIntersecting=
function(a){for(var b=0;b<a.length;b++){for(var e=a[b],r=0;r<e.length-1;r++)for(var t=e[r],g=e[r+1],k=b+1;k<a.length;k++)for(var x=0;x<a[k].length-1;x++){var v=a[k][x],A=a[k][x+1],n=f(t,g,v,A,d);if(n&&!(d[0]===t[0]&&d[1]===t[1]||d[0]===v[0]&&d[1]===v[1]||d[0]===g[0]&&d[1]===g[1]||d[0]===A[0]&&d[1]===A[1]))return!0}x=e.length;if(!(3>x))for(r=0;r<=x-2;r++)for(t=e[r],g=e[r+1],k=r+2;k<=x-2;k++)if(v=e[k],A=e[k+1],(n=f(t,g,v,A,d))&&!(d[0]===t[0]&&d[1]===t[1]||d[0]===v[0]&&d[1]===v[1]||d[0]===g[0]&&d[1]===
g[1]||d[0]===A[0]&&d[1]===A[1]))return!0}return!1}})},"esri/arcade/functions/geomsync":function(){define("require exports ../../kernel ../kernel ../languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/jsonUtils".split(" "),function(B,y,c,u,q,l,m,h,f,d,a,b,e){function r(g){return 0===c.version.indexOf("4.")?a.fromExtent(g):new a({spatialReference:g.spatialReference,rings:[[[g.xmin,
g.ymin],[g.xmin,g.ymax],[g.xmax,g.ymax],[g.xmax,g.ymin],[g.xmin,g.ymin]]]})}Object.defineProperty(y,"__esModule",{value:!0});y.registerFunctions=y.setGeometryEngine=void 0;var t=null;y.setGeometryEngine=function(g){t=g};y.registerFunctions=function(g,k){function x(v){q.pcCheck(v,2,2);if(!(v[0]instanceof h&&v[1]instanceof h||v[0]instanceof h&&null===v[1]||v[1]instanceof h&&null===v[0]||null===v[0]&&null===v[1]))throw Error("Illegal Argument");}g.disjoint=function(v,A){return k(v,A,function(n,w,p){p=
q.autoCastFeatureToGeometry(p);x(p);return null===p[0]||null===p[1]?!0:t.disjoint(p[0],p[1])})};g.intersects=function(v,A){return k(v,A,function(n,w,p){p=q.autoCastFeatureToGeometry(p);x(p);return null===p[0]||null===p[1]?!1:t.intersects(p[0],p[1])})};g.touches=function(v,A){return k(v,A,function(n,w,p){p=q.autoCastFeatureToGeometry(p);x(p);return null===p[0]||null===p[1]?!1:t.touches(p[0],p[1])})};g.crosses=function(v,A){return k(v,A,function(n,w,p){p=q.autoCastFeatureToGeometry(p);x(p);return null===
p[0]||null===p[1]?!1:t.crosses(p[0],p[1])})};g.within=function(v,A){return k(v,A,function(n,w,p){p=q.autoCastFeatureToGeometry(p);x(p);return null===p[0]||null===p[1]?!1:t.within(p[0],p[1])})};g.contains=function(v,A){return k(v,A,function(n,w,p){p=q.autoCastFeatureToGeometry(p);x(p);return null===p[0]||null===p[1]?!1:t.contains(p[0],p[1])})};g.overlaps=function(v,A){return k(v,A,function(n,w,p){p=q.autoCastFeatureToGeometry(p);x(p);return null===p[0]||null===p[1]?!1:t.overlaps(p[0],p[1])})};g.equals=
function(v,A){return k(v,A,function(n,w,p){q.pcCheck(p,2,2);return p[0]===p[1]?!0:p[0]instanceof h&&p[1]instanceof h?t.equals(p[0],p[1]):q.isDate(p[0])&&q.isDate(p[1])?p[0].getTime()===p[1].getTime():!1})};g.relate=function(v,A){return k(v,A,function(n,w,p){p=q.autoCastFeatureToGeometry(p);q.pcCheck(p,3,3);if(p[0]instanceof h&&p[1]instanceof h)return t.relate(p[0],p[1],q.toString(p[2]));if(p[0]instanceof h&&null===p[1]||p[1]instanceof h&&null===p[0]||null===p[0]&&null===p[1])return!1;throw Error("Illegal Argument");
})};g.intersection=function(v,A){return k(v,A,function(n,w,p){p=q.autoCastFeatureToGeometry(p);x(p);return null===p[0]||null===p[1]?null:t.intersect(p[0],p[1])})};g.union=function(v,A){return k(v,A,function(n,w,p){p=q.autoCastFeatureToGeometry(p);n=[];if(0===p.length)throw Error("Function called with wrong number of Parameters");if(1===p.length)if(q.isArray(p[0]))for(p=q.autoCastFeatureToGeometry(p[0]),w=0;w<p.length;w++){if(null!==p[w]){if(!(p[w]instanceof h))throw Error("Illegal Argument");n.push(p[w])}}else if(q.isImmutableArray(p[0]))for(p=
q.autoCastFeatureToGeometry(p[0].toArray()),w=0;w<p.length;w++){if(null!==p[w]){if(!(p[w]instanceof h))throw Error("Illegal Argument");n.push(p[w])}}else{if(p[0]instanceof h)return q.fixSpatialReference(u.cloneGeometry(p[0]),v.spatialReference);if(null===p[0])return null;throw Error("Illegal Argument");}else for(w=0;w<p.length;w++)if(null!==p[w]){if(!(p[w]instanceof h))throw Error("Illegal Argument");n.push(p[w])}return 0===n.length?null:t.union(n)})};g.difference=function(v,A){return k(v,A,function(n,
w,p){p=q.autoCastFeatureToGeometry(p);x(p);return null!==p[0]&&null===p[1]?u.cloneGeometry(p[0]):null===p[0]?null:t.difference(p[0],p[1])})};g.symmetricdifference=function(v,A){return k(v,A,function(n,w,p){p=q.autoCastFeatureToGeometry(p);x(p);return null===p[0]&&null===p[1]?null:null===p[0]?u.cloneGeometry(p[1]):null===p[1]?u.cloneGeometry(p[0]):t.symmetricDifference(p[0],p[1])})};g.clip=function(v,A){return k(v,A,function(n,w,p){p=q.autoCastFeatureToGeometry(p);q.pcCheck(p,2,2);if(!(p[1]instanceof
m)&&null!==p[1])throw Error("Illegal Argument");if(null===p[0])return null;if(!(p[0]instanceof h))throw Error("Illegal Argument");return null===p[1]?null:t.clip(p[0],p[1])})};g.cut=function(v,A){return k(v,A,function(n,w,p){p=q.autoCastFeatureToGeometry(p);q.pcCheck(p,2,2);if(!(p[1]instanceof b)&&null!==p[1])throw Error("Illegal Argument");if(null===p[0])return[];if(!(p[0]instanceof h))throw Error("Illegal Argument");return null===p[1]?[u.cloneGeometry(p[0])]:t.cut(p[0],p[1])})};g.area=function(v,
A){return k(v,A,function(n,w,p){q.pcCheck(p,1,2);p=q.autoCastFeatureToGeometry(p);if(null===p[0])return 0;if(q.isArray(p[0])||q.isImmutableArray(p[0]))return n=q.autoCastArrayOfPointsToPolygon(p[0],v.spatialReference),null===n?0:t.planarArea(n,u.convertSquareUnitsToCode(q.defaultUndefined(p[1],-1)));if(!(p[0]instanceof h))throw Error("Illegal Argument");return t.planarArea(p[0],u.convertSquareUnitsToCode(q.defaultUndefined(p[1],-1)))})};g.areageodetic=function(v,A){return k(v,A,function(n,w,p){q.pcCheck(p,
1,2);p=q.autoCastFeatureToGeometry(p);if(null===p[0])return 0;if(q.isArray(p[0])||q.isImmutableArray(p[0]))return n=q.autoCastArrayOfPointsToPolygon(p[0],v.spatialReference),null===n?0:t.geodesicArea(n,u.convertSquareUnitsToCode(q.defaultUndefined(p[1],-1)));if(!(p[0]instanceof h))throw Error("Illegal Argument");return t.geodesicArea(p[0],u.convertSquareUnitsToCode(q.defaultUndefined(p[1],-1)))})};g.length=function(v,A){return k(v,A,function(n,w,p){q.pcCheck(p,1,2);p=q.autoCastFeatureToGeometry(p);
if(null===p[0])return 0;if(q.isArray(p[0])||q.isImmutableArray(p[0]))return n=q.autoCastArrayOfPointsToPolyline(p[0],v.spatialReference),null===n?0:t.planarLength(n,u.convertLinearUnitsToCode(q.defaultUndefined(p[1],-1)));if(!(p[0]instanceof h))throw Error("Illegal Argument");return t.planarLength(p[0],u.convertLinearUnitsToCode(q.defaultUndefined(p[1],-1)))})};g.lengthgeodetic=function(v,A){return k(v,A,function(n,w,p){q.pcCheck(p,1,2);p=q.autoCastFeatureToGeometry(p);if(null===p[0])return 0;if(q.isArray(p[0])||
q.isImmutableArray(p[0]))return n=q.autoCastArrayOfPointsToPolyline(p[0],v.spatialReference),null===n?0:t.geodesicLength(n,u.convertLinearUnitsToCode(q.defaultUndefined(p[1],-1)));if(!(p[0]instanceof h))throw Error("Illegal Argument");return t.geodesicLength(p[0],u.convertLinearUnitsToCode(q.defaultUndefined(p[1],-1)))})};g.distance=function(v,A){return k(v,A,function(n,w,p){p=q.autoCastFeatureToGeometry(p);q.pcCheck(p,2,3);n=p[0];if(q.isArray(p[0])||q.isImmutableArray(p[0]))n=q.autoCastArrayOfPointsToMultiPoint(p[0],
v.spatialReference);w=p[1];if(q.isArray(p[1])||q.isImmutableArray(p[1]))w=q.autoCastArrayOfPointsToMultiPoint(p[1],v.spatialReference);if(!(n instanceof h))throw Error("Illegal Argument");if(!(w instanceof h))throw Error("Illegal Argument");return t.distance(n,w,u.convertLinearUnitsToCode(q.defaultUndefined(p[2],-1)))})};g.distancegeodetic=function(v,A){return k(v,A,function(n,w,p){p=q.autoCastFeatureToGeometry(p);q.pcCheck(p,2,3);n=p[0];w=p[1];if(!(n instanceof d))throw Error("Illegal Argument");
if(!(w instanceof d))throw Error("Illegal Argument");var D=new b({paths:[],spatialReference:n.spatialReference});D.addPath([n,w]);return t.geodesicLength(D,u.convertLinearUnitsToCode(q.defaultUndefined(p[2],-1)))})};g.densify=function(v,A){return k(v,A,function(n,w,p){p=q.autoCastFeatureToGeometry(p);q.pcCheck(p,2,3);if(null===p[0])return null;if(!(p[0]instanceof h))throw Error("Illegal Argument");n=q.toNumber(p[1]);if(isNaN(n))throw Error("Illegal Argument");if(0>=n)throw Error("Illegal Argument");
return p[0]instanceof a||p[0]instanceof b?t.densify(p[0],n,u.convertLinearUnitsToCode(q.defaultUndefined(p[2],-1))):p[0]instanceof m?t.densify(r(p[0]),n,u.convertLinearUnitsToCode(q.defaultUndefined(p[2],-1))):p[0]})};g.densifygeodetic=function(v,A){return k(v,A,function(n,w,p){p=q.autoCastFeatureToGeometry(p);q.pcCheck(p,2,3);if(null===p[0])return null;if(!(p[0]instanceof h))throw Error("Illegal Argument");n=q.toNumber(p[1]);if(isNaN(n))throw Error("Illegal Argument");if(0>=n)throw Error("Illegal Argument");
return p[0]instanceof a||p[0]instanceof b?t.geodesicDensify(p[0],n,u.convertLinearUnitsToCode(q.defaultUndefined(p[2],-1))):p[0]instanceof m?t.geodesicDensify(r(p[0]),n,u.convertLinearUnitsToCode(q.defaultUndefined(p[2],-1))):p[0]})};g.generalize=function(v,A){return k(v,A,function(n,w,p){p=q.autoCastFeatureToGeometry(p);q.pcCheck(p,2,4);if(null===p[0])return null;if(!(p[0]instanceof h))throw Error("Illegal Argument");n=q.toNumber(p[1]);if(isNaN(n))throw Error("Illegal Argument");return t.generalize(p[0],
n,q.toBoolean(q.defaultUndefined(p[2],!0)),u.convertLinearUnitsToCode(q.defaultUndefined(p[3],-1)))})};g.buffer=function(v,A){return k(v,A,function(n,w,p){p=q.autoCastFeatureToGeometry(p);q.pcCheck(p,2,3);if(null===p[0])return null;if(!(p[0]instanceof h))throw Error("Illegal Argument");n=q.toNumber(p[1]);if(isNaN(n))throw Error("Illegal Argument");return 0===n?u.cloneGeometry(p[0]):t.buffer(p[0],n,u.convertLinearUnitsToCode(q.defaultUndefined(p[2],-1)))})};g.buffergeodetic=function(v,A){return k(v,
A,function(n,w,p){p=q.autoCastFeatureToGeometry(p);q.pcCheck(p,2,3);if(null===p[0])return null;if(!(p[0]instanceof h))throw Error("Illegal Argument");n=q.toNumber(p[1]);if(isNaN(n))throw Error("Illegal Argument");return 0===n?u.cloneGeometry(p[0]):t.geodesicBuffer(p[0],n,u.convertLinearUnitsToCode(q.defaultUndefined(p[2],-1)))})};g.offset=function(v,A){return k(v,A,function(n,w,p){p=q.autoCastFeatureToGeometry(p);q.pcCheck(p,2,6);if(null===p[0])return null;if(!(p[0]instanceof a||p[0]instanceof b))throw Error("Illegal Argument");
n=q.toNumber(p[1]);if(isNaN(n))throw Error("Illegal Argument");w=q.toNumber(q.defaultUndefined(p[4],10));if(isNaN(w))throw Error("Illegal Argument");var D=q.toNumber(q.defaultUndefined(p[5],0));if(isNaN(D))throw Error("Illegal Argument");return t.offset(p[0],n,u.convertLinearUnitsToCode(q.defaultUndefined(p[2],-1)),q.toString(q.defaultUndefined(p[3],"round")).toLowerCase(),w,D)})};g.rotate=function(v,A){return k(v,A,function(n,w,p){p=q.autoCastFeatureToGeometry(p);q.pcCheck(p,2,3);n=p[0];if(null===
n)return null;if(!(n instanceof h))throw Error("Illegal Argument");n instanceof m&&(n=a.fromExtent(n));w=q.toNumber(p[1]);if(isNaN(w))throw Error("Illegal Argument");p=q.defaultUndefined(p[2],null);if(null===p)return t.rotate(n,w);if(p instanceof d)return t.rotate(n,w,p);throw Error("Illegal Argument");})};g.centroid=function(v,A){return k(v,A,function(n,w,p){p=q.autoCastFeatureToGeometry(p);q.pcCheck(p,1,1);if(null===p[0])return null;n=p[0];if(q.isArray(p[0])||q.isImmutableArray(p[0]))n=q.autoCastArrayOfPointsToMultiPoint(p[0],
v.spatialReference);if(null===n)return null;if(!(n instanceof h))throw Error("Illegal Argument");return n instanceof d?q.fixSpatialReference(u.cloneGeometry(p[0]),v.spatialReference):n instanceof a?n.getCentroid():n instanceof b?l.centroidPolyline(n):n instanceof f?l.centroidMultiPoint(n):n instanceof m?n.getCenter():null})};g.multiparttosinglepart=function(v,A){return k(v,A,function(n,w,p){p=q.autoCastFeatureToGeometry(p);q.pcCheck(p,1,1);w=[];if(null===p[0])return null;if(!(p[0]instanceof h))throw Error("Illegal Argument");
if(p[0]instanceof d||p[0]instanceof m)return[q.fixSpatialReference(u.cloneGeometry(p[0]),v.spatialReference)];n=t.simplify(p[0]);if(n instanceof a){w=[];var D=[];for(p=0;p<n.rings.length;p++)if(n.isClockwise(n.rings[p])){var C=e.fromJson({rings:[n.rings[p]],hasZ:!0===n.hasZ,hasM:!0===n.hasM,spatialReference:n.spatialReference.toJson()});w.push(C)}else D.push({ring:n.rings[p],pt:n.getPoint(p,0)});for(n=0;n<D.length;n++)for(p=0;p<w.length;p++)if(w[p].contains(D[n].pt)){w[p].addRing(D[n].ring);break}return w}if(n instanceof
b){w=[];for(p=0;p<n.paths.length;p++)D=e.fromJson({paths:[n.paths[p]],hasZ:!0===n.hasZ,hasM:!0===n.hasM,spatialReference:n.spatialReference.toJson()}),w.push(D);return w}if(p[0]instanceof f){n=q.fixSpatialReference(u.cloneGeometry(p[0]),v.spatialReference);for(p=0;p<n.points.length;p++)w.push(n.getPoint(p));return w}return null})};g.issimple=function(v,A){return k(v,A,function(n,w,p){p=q.autoCastFeatureToGeometry(p);q.pcCheck(p,1,1);if(null===p[0])return!0;if(!(p[0]instanceof h))throw Error("Illegal Argument");
return t.isSimple(p[0])})};g.simplify=function(v,A){return k(v,A,function(n,w,p){p=q.autoCastFeatureToGeometry(p);q.pcCheck(p,1,1);if(null===p[0])return null;if(!(p[0]instanceof h))throw Error("Illegal Argument");return t.simplify(p[0])})}}})},"esri/arcade/kernel":function(){define(["require","exports","../geometry/Extent","../geometry/jsonUtils"],function(B,y,c,u){Object.defineProperty(y,"__esModule",{value:!0});y.cloneGeometry=y.sameGeomType=y.convertLinearUnitsToCode=y.shapeExtent=y.convertSquareUnitsToCode=
void 0;y.convertSquareUnitsToCode=function(q){if(void 0===q)return null;if("number"===typeof q)return q;switch(q.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square-meters":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 109413;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 109414;
case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 109405}return null};y.shapeExtent=function(q){if(null===q)return null;switch(q.type){case "polygon":case "multipoint":case "polyline":return q.extent;case "point":return new c({xmin:q.x,
ymin:q.y,xmax:q.x,ymax:q.y,spatialReference:q.spatialReference});case "extent":return q}return null};y.convertLinearUnitsToCode=function(q){if(void 0===q)return null;if("number"===typeof q||"number"===typeof q)return q;switch(q.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square-meters":return 9001;case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 9035;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 9036;
case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 9002}return null};y.sameGeomType=function(q,l){return q===l||"point"===q&&"esriGeometryPoint"===l||"polyline"===q&&"esriGeometryPolyline"===l||"polygon"===q&&"esriGeometryPolygon"===l||"extent"===q&&"esriGeometryEnvelope"===l||"multipoint"===q&&"esriGeometryMultipoint"===
l||"point"===l&&"esriGeometryPoint"===q||"polyline"===l&&"esriGeometryPolyline"===q||"polygon"===l&&"esriGeometryPolygon"===q||"extent"===l&&"esriGeometryEnvelope"===q||"multipoint"===l&&"esriGeometryMultipoint"===q?!0:!1};y.cloneGeometry=function(q){if(null===q)return null;var l=u.fromJson(q.toJson());q.getCacheValue("_geVersion")&&l.setCacheValue("_geVersion",q.getCacheValue("_geVersion"));return l}})},"esri/arcade/functions/maths":function(){define(["require","exports","../languageUtils","dojo/number"],
function(B,y,c,u){function q(l,m,h){if("undefined"===typeof h||0===+h)return Math[l](m);m=+m;h=+h;if(isNaN(m)||"number"!==typeof h||0!==h%1)return NaN;m=m.toString().split("e");m=Math[l](+(m[0]+"e"+(m[1]?+m[1]-h:-h)));m=m.toString().split("e");return+(m[0]+"e"+(m[1]?+m[1]+h:h))}Object.defineProperty(y,"__esModule",{value:!0});y.registerFunctions=void 0;y.registerFunctions=function(l,m){function h(f,d,a){f=c.toNumber(f);return isNaN(f)?f:isNaN(d)||isNaN(a)||d>a?NaN:f<d?d:f>a?a:f}l.number=function(f,
d){return m(f,d,function(a,b,e){c.pcCheck(e,1,2);a=e[0];return c.isNumber(a)?a:null===a?0:c.isDate(a)||c.isBoolean(a)?Number(a):c.isArray(a)?NaN:""===a||void 0===a?Number(a):c.isString(a)?void 0!==e[1]?(e=c.multiReplace(e[1],"\u2030",""),e=c.multiReplace(e,"\u00a4",""),u.parse(a,{pattern:e})):Number(a.trim()):Number(a)})};l.abs=function(f,d){return m(f,d,function(a,b,e){c.pcCheck(e,1,1);return Math.abs(c.toNumber(e[0]))})};l.acos=function(f,d){return m(f,d,function(a,b,e){c.pcCheck(e,1,1);return Math.acos(c.toNumber(e[0]))})};
l.asin=function(f,d){return m(f,d,function(a,b,e){c.pcCheck(e,1,1);return Math.asin(c.toNumber(e[0]))})};l.atan=function(f,d){return m(f,d,function(a,b,e){c.pcCheck(e,1,1);return Math.atan(c.toNumber(e[0]))})};l.atan2=function(f,d){return m(f,d,function(a,b,e){c.pcCheck(e,2,2);return Math.atan2(c.toNumber(e[0]),c.toNumber(e[1]))})};l.ceil=function(f,d){return m(f,d,function(a,b,e){c.pcCheck(e,1,2);return 2===e.length?(a=c.toNumber(e[1]),isNaN(a)&&(a=0),q("ceil",c.toNumber(e[0]),-1*a)):Math.ceil(c.toNumber(e[0]))})};
l.round=function(f,d){return m(f,d,function(a,b,e){c.pcCheck(e,1,2);return 2===e.length?(a=c.toNumber(e[1]),isNaN(a)&&(a=0),q("round",c.toNumber(e[0]),-1*a)):Math.round(c.toNumber(e[0]))})};l.floor=function(f,d){return m(f,d,function(a,b,e){c.pcCheck(e,1,2);return 2===e.length?(a=c.toNumber(e[1]),isNaN(a)&&(a=0),q("floor",c.toNumber(e[0]),-1*a)):Math.floor(c.toNumber(e[0]))})};l.cos=function(f,d){return m(f,d,function(a,b,e){c.pcCheck(e,1,1);return Math.cos(c.toNumber(e[0]))})};l.isnan=function(f,
d){return m(f,d,function(a,b,e){c.pcCheck(e,1,1);return"number"===typeof e[0]&&isNaN(e[0])})};l.exp=function(f,d){return m(f,d,function(a,b,e){c.pcCheck(e,1,1);return Math.exp(c.toNumber(e[0]))})};l.log=function(f,d){return m(f,d,function(a,b,e){c.pcCheck(e,1,1);return Math.log(c.toNumber(e[0]))})};l.pow=function(f,d){return m(f,d,function(a,b,e){c.pcCheck(e,2,2);return Math.pow(c.toNumber(e[0]),c.toNumber(e[1]))})};l.random=function(f,d){return m(f,d,function(a,b,e){c.pcCheck(e,0,0);return Math.random()})};
l.sin=function(f,d){return m(f,d,function(a,b,e){c.pcCheck(e,1,1);return Math.sin(c.toNumber(e[0]))})};l.sqrt=function(f,d){return m(f,d,function(a,b,e){c.pcCheck(e,1,1);return Math.sqrt(c.toNumber(e[0]))})};l.tan=function(f,d){return m(f,d,function(a,b,e){c.pcCheck(e,1,1);return Math.tan(c.toNumber(e[0]))})};l.defaultvalue=function(f,d){return m(f,d,function(a,b,e){c.pcCheck(e,2,2);return null===e[0]||""===e[0]||void 0===e[0]?e[1]:e[0]})};l.isempty=function(f,d){return m(f,d,function(a,b,e){c.pcCheck(e,
1,1);return null===e[0]||""===e[0]||void 0===e[0]?!0:!1})};l["boolean"]=function(f,d){return m(f,d,function(a,b,e){c.pcCheck(e,1,1);return c.toBoolean(e[0])})};l.constrain=function(f,d){return m(f,d,function(a,b,e){c.pcCheck(e,3,3);a=c.toNumber(e[1]);b=c.toNumber(e[2]);if(c.isArray(e[0])){var r=[],t=0;for(e=e[0];t<e.length;t++)r.push(h(e[t],a,b));return r}if(c.isImmutableArray(e[0])){r=[];for(t=0;t<e[0].length();t++)r.push(h(e[0].get(t),a,b));return r}return h(e[0],a,b)})}}})},"esri/arcade/functions/stats":function(){define(["require",
"exports","../languageUtils","./fieldStats"],function(B,y,c,u){function q(l,m,h,f){if(1===f.length){if(c.isArray(f[0]))return u.calculateStat(l,f[0],-1);if(c.isImmutableArray(f[0]))return u.calculateStat(l,f[0].toArray(),-1)}return u.calculateStat(l,f,-1)}Object.defineProperty(y,"__esModule",{value:!0});y.registerFunctions=void 0;y.registerFunctions=function(l,m){l.stdev=function(h,f){return m(h,f,function(d,a,b){return q("stdev",d,a,b)})};l.variance=function(h,f){return m(h,f,function(d,a,b){return q("variance",
d,a,b)})};l.average=function(h,f){return m(h,f,function(d,a,b){return q("mean",d,a,b)})};l.mean=function(h,f){return m(h,f,function(d,a,b){return q("mean",d,a,b)})};l.sum=function(h,f){return m(h,f,function(d,a,b){return q("sum",d,a,b)})};l.min=function(h,f){return m(h,f,function(d,a,b){return q("min",d,a,b)})};l.max=function(h,f){return m(h,f,function(d,a,b){return q("max",d,a,b)})};l.distinct=function(h,f){return m(h,f,function(d,a,b){return q("distinct",d,a,b)})};l.count=function(h,f){return m(h,
f,function(d,a,b){c.pcCheck(b,1,1);if(c.isArray(b[0])||c.isString(b[0]))return b[0].length;if(c.isImmutableArray(b[0]))return b[0].length();throw Error("Invalid Parameters for Count");})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports","../languageUtils"],function(B,y,c){function u(l){for(var m=0,h=0;h<l.length;h++)m+=l[h];return m/l.length}function q(l){for(var m=u(l),h=0,f=0;f<l.length;f++)h+=Math.pow(m-l[f],2);return h/l.length}Object.defineProperty(y,"__esModule",
{value:!0});y.calculateStat=y.decodeStatType=void 0;y.decodeStatType=function(l){switch(l.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};y.calculateStat=function(l,m,h){void 0===h&&(h=1E3);switch(l.toLowerCase()){case "distinct":a:{l=h;h=[];for(var f={},d=[],a=0;a<m.length;a++){if(void 0!==
m[a]&&null!==m[a]&&m[a]!==c.voidOperation){var b=m[a];if(c.isNumber(b)||c.isString(b))void 0===f[b]&&(h.push(b),f[b]=1);else{for(var e=!1,r=0;r<d.length;r++)!0===c.equalityTest(d[r],b)&&(e=!0);!1===e&&(d.push(b),h.push(b))}}if(h.length>=l&&-1!==l){m=h;break a}}m=h}return m;case "avg":case "mean":return u(c.toNumberArray(m));case "min":return Math.min.apply(Math,c.toNumberArray(m));case "sum":m=c.toNumberArray(m);for(h=l=0;h<m.length;h++)l+=m[h];return l;case "max":return Math.max.apply(Math,c.toNumberArray(m));
case "stdev":case "stddev":return Math.sqrt(q(c.toNumberArray(m)));case "var":case "variance":return q(c.toNumberArray(m));case "count":return m.length}return 0}})},"esri/arcade/functions/string":function(){define("require exports ../ArcadePortal ../Attachment ../Dictionary ../Feature ../languageUtils ../featureset/support/shared ./hash ../../geometry/Extent ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../SpatialReference".split(" "),function(B,
y,c,u,q,l,m,h,f,d,a,b,e,r,t){function g(k,x,v){if(null===k)x.updateUint8Array([0,139]);else if(m.isArray(k)){x.updateUint8Array([61]);if(v.map.has(k))k=v.map.get(k),x.updateIntArray([k^61237541]);else{v.map.set(k,v.currentLength++);for(var A=0;A<k.length;A++){var n=k[A];g(n,x,v)}v.map.delete(k);v.currentLength--}x.updateUint8Array([199])}else if(m.isImmutableArray(k)){x.updateUint8Array([61]);if(v.map.has(k))k=v.map.get(k),x.updateIntArray([k^61237541]);else{v.map.set(k,v.currentLength++);A=0;for(var w=
k.toArray();A<w.length;A++)n=w[A],g(n,x,v);v.map.delete(k);v.currentLength--}x.updateUint8Array([199])}else if(m.isDate(k))x.updateIntArray([k.getTime()]),x.updateUint8Array([241]);else if(m.isString(k))x.updateIntArray([k.length]),x.updateWithString(k),x.updateUint8Array([41]);else if(m.isBoolean(k))x.updateUint8Array([!0===k?1:0,113]);else if(m.isNumber(k))x.updateFloatArray([k]),x.updateUint8Array([173]);else{if(k instanceof u)throw Error("Type not supported in Hash");if(k instanceof c)throw Error("Type not supported in Hash");
if(k instanceof q){x.updateUint8Array([223]);if(v.map.has(k))k=v.map.get(k),x.updateIntArray([k^61237541]);else{v.map.set(k,v.currentLength++);A=0;for(w=k.keys();A<w.length;A++)n=w[A],x.updateIntArray([n.length]),x.updateWithString(n),x.updateUint8Array([251]),n=k.field(n),g(n,x,v),x.updateUint8Array([239]);v.map.delete(k);v.currentLength--}x.updateUint8Array([73])}else{if(k instanceof l)throw Error("Type not supported in Hash");if(k instanceof b)x.updateIntArray([3833836621]),x.updateIntArray([0]),
x.updateFloatArray([k.x]),x.updateIntArray([1]),x.updateFloatArray([k.y]),x.updateIntArray([3765347959]),g(k.spatialReference.wkid,x,v);else if(k instanceof e){x.updateIntArray([1266616829]);for(A=0;A<k.rings.length;A++){w=k.rings[A];var p=[],D=null,C=null;for(n=0;n<w.length;n++){var G=k.getPoint(A,n);if(0===n)D=G;else if(C.x===G.x&&C.y===G.y)continue;C=G;n===w.length-1&&D.x===G.x&&D.y===G.y||p.push(G)}x.updateIntArray([1397116793,p.length]);for(n=0;n<p.length;n++)G=p[n],x.updateIntArray([3962308117,
n]),g(G,x,v),x.updateIntArray([2716288009]);x.updateIntArray([2278822459])}x.updateIntArray([3878477243]);g(k.spatialReference.wkid,x,v)}else if(k instanceof r){x.updateIntArray([4106883559]);for(A=0;A<k.paths.length;A++){w=k.paths[A];x.updateIntArray([1397116793,w.length]);for(n=0;n<w.length;n++)x.updateIntArray([3962308117,n]),g(k.getPoint(A,n),x,v),x.updateIntArray([2716288009]);x.updateIntArray([2278822459])}x.updateIntArray([2568784753]);g(k.spatialReference.wkid,x,v)}else if(k instanceof a){x.updateIntArray([588535921,
k.points.length]);for(n=0;n<k.points.length;n++)A=k.getPoint(n),x.updateIntArray([n]),g(A,x,v);x.updateIntArray([1700171621]);g(k.spatialReference.wkid,x,v)}else if(k instanceof d)x.updateIntArray([3483648373]),x.updateIntArray([0]),x.updateFloatArray([k.xmax]),x.updateIntArray([1]),x.updateFloatArray([k.xmin]),x.updateIntArray([2]),x.updateFloatArray([k.ymax]),x.updateIntArray([3]),x.updateFloatArray([k.ymin]),x.updateIntArray([3622027469]),g(k.spatialReference.wkid,x,v);else if(k instanceof t)x.updateIntArray([14]),
void 0!==k.wkid&&null!==k.wkid&&x.updateIntArray([k.wkid]),k.wkt&&x.updateWithString(k.wkt);else{if(m.isFunctionParameter(k))throw Error("Type not supported in Hash");if(m.isFeatureSet(k))throw Error("Type not supported in Hash");m.isFeatureSetCollection(k);throw Error("Type not supported in Hash");}}}}Object.defineProperty(y,"__esModule",{value:!0});y.registerFunctions=void 0;y.registerFunctions=function(k,x){k.portal=function(v,A){return x(v,A,function(n,w,p){m.pcCheck(p,1,1);return new c(m.toString(p[0]))})};
k.trim=function(v,A){return x(v,A,function(n,w,p){m.pcCheck(p,1,1);return m.toString(p[0]).trim()})};k.tohex=function(v,A){return x(v,A,function(n,w,p){m.pcCheck(p,1,1);n=m.toNumber(p[0]);return isNaN(n)?n:n.toString(16)})};k.upper=function(v,A){return x(v,A,function(n,w,p){m.pcCheck(p,1,1);return m.toString(p[0]).toUpperCase()})};k.proper=function(v,A){return x(v,A,function(n,w,p){m.pcCheck(p,1,2);n=1;2===p.length&&"firstword"===m.toString(p[1]).toLowerCase()&&(n=2);w=/\s/;p=m.toString(p[0]);for(var D=
"",C=!0,G=0;G<p.length;G++){var z=p[G];w.test(z)?1===n&&(C=!0):z.toUpperCase()!==z.toLowerCase()&&(C?(z=z.toUpperCase(),C=!1):z=z.toLowerCase());D+=z}return D})};k.lower=function(v,A){return x(v,A,function(n,w,p){m.pcCheck(p,1,1);return m.toString(p[0]).toLowerCase()})};k.guid=function(v,A){return x(v,A,function(n,w,p){m.pcCheck(p,0,1);if(0<p.length)switch(m.toString(p[0]).toLowerCase()){case "digits":return m.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return m.generateUUID();
case "digits-hyphen-parentheses":return"("+m.generateUUID()+")"}return"{"+m.generateUUID()+"}"})};k.console=function(v,A){return x(v,A,function(n,w,p){0!==p.length&&(1===p.length?v.console(m.toString(p[0])):v.console(m.toString(p)));return m.voidOperation})};k.mid=function(v,A){return x(v,A,function(n,w,p){m.pcCheck(p,2,3);n=m.toNumber(p[1]);if(isNaN(n))return"";0>n&&(n=0);if(2===p.length)return m.toString(p[0]).substr(n);w=m.toNumber(p[2]);if(isNaN(w))return"";0>w&&(w=0);return m.toString(p[0]).substr(n,
w)})};k.find=function(v,A){return x(v,A,function(n,w,p){m.pcCheck(p,2,3);n=0;if(2<p.length){n=m.toNumber(m.defaultUndefined(p[2],0));if(isNaN(n))return-1;0>n&&(n=0)}return m.toString(p[1]).indexOf(m.toString(p[0]),n)})};k.left=function(v,A){return x(v,A,function(n,w,p){m.pcCheck(p,2,2);n=m.toNumber(p[1]);if(isNaN(n))return"";0>n&&(n=0);return m.toString(p[0]).substr(0,n)})};k.right=function(v,A){return x(v,A,function(n,w,p){m.pcCheck(p,2,2);n=m.toNumber(p[1]);if(isNaN(n))return"";0>n&&(n=0);return m.toString(p[0]).substr(-1*
n,n)})};k.split=function(v,A){return x(v,A,function(n,w,p){m.pcCheck(p,2,4);n=m.toNumber(m.defaultUndefined(p[2],-1));w=m.toBoolean(m.defaultUndefined(p[3],!1));-1===n||null===n||!0===w?p=m.toString(p[0]).split(m.toString(p[1])):(isNaN(n)&&(n=-1),-1>n&&(n=-1),p=m.toString(p[0]).split(m.toString(p[1]),n));if(!1===w)return p;w=[];for(var D=0;D<p.length&&!(-1!==n&&w.length>=n);D++)""!==p[D]&&void 0!==p[D]&&w.push(p[D]);return w})};k.text=function(v,A){return x(v,A,function(n,w,p){m.pcCheck(p,1,2);return m.toStringExplicit(p[0],
p[1])})};k.concatenate=function(v,A){return x(v,A,function(n,w,p){n=[];if(1>p.length)return"";if(m.isArray(p[0])){w=m.defaultUndefined(p[2],"");for(var D=0;D<p[0].length;D++)n[D]=m.toStringExplicit(p[0][D],w);return 1<p.length?n.join(p[1]):n.join("")}if(m.isImmutableArray(p[0])){w=m.defaultUndefined(p[2],"");for(D=0;D<p[0].length();D++)n[D]=m.toStringExplicit(p[0].get(D),w);return 1<p.length?n.join(p[1]):n.join("")}for(D=0;D<p.length;D++)n[D]=m.toStringExplicit(p[D]);return n.join("")})};k.reverse=
function(v,A){return x(v,A,function(n,w,p){m.pcCheck(p,1,1);if(m.isArray(p[0]))return n=p[0].slice(0),n.reverse(),n;if(m.isImmutableArray(p[0]))return n=p[0].toArray().slice(0),n.reverse(),n;throw Error("Invalid Parameter");})};k.replace=function(v,A){return x(v,A,function(n,w,p){m.pcCheck(p,3,4);n=m.toString(p[0]);w=m.toString(p[1]);var D=m.toString(p[2]);return(4===p.length?m.toBoolean(p[3]):1)?m.multiReplace(n,w,D):n.replace(w,D)})};k.schema=function(v,A){return x(v,A,function(n,w,p){if(p[0]instanceof
l)return(n=p[0].schema())?q.convertObjectToArcadeDictionary(n):null;throw Error("Invalid Parameter");})};k.subtypes=function(v,A){return x(v,A,function(n,w,p){m.pcCheck(p,1,1);if(p[0]instanceof l)return(n=p[0].subtypes())?q.convertObjectToArcadeDictionary(n):null;throw Error("Invalid Parameter");})};k.subtypecode=function(v,A){return x(v,A,function(n,w,p){m.pcCheck(p,1,1);if(p[0]instanceof l){w=p[0].subtypes();if(!w)return null;if(w.subtypeField&&p[0].hasField(w.subtypeField))for(p=p[0].field(w.subtypeField),
n=0,w=w.subtypes;n<w.length;n++){var D=w[n];if(D.code===p)return D.code}return null}throw Error("Invalid Parameter");})};k.subtypename=function(v,A){return x(v,A,function(n,w,p){m.pcCheck(p,1,1);if(p[0]instanceof l){w=p[0].subtypes();if(!w)return"";if(w.subtypeField&&p[0].hasField(w.subtypeField))for(p=p[0].field(w.subtypeField),n=0,w=w.subtypes;n<w.length;n++){var D=w[n];if(D.code===p)return D.name}return""}throw Error("Invalid Parameter");})};k.gdbversion=function(v,A){return x(v,A,function(n,w,
p){m.pcCheck(p,1,1);if(p[0]instanceof l)return p[0].gdbVersion();throw Error("Invalid Parameter");})};k.domain=function(v,A){return x(v,A,function(n,w,p){m.pcCheck(p,2,3);if(p[0]instanceof l)return(n=p[0].fullDomain(m.toString(p[1]),void 0===p[2]?void 0:m.toNumber(p[2])))&&n.domain?"coded-value"===n.domain.type||"codedValue"===n.domain.type?q.convertObjectToArcadeDictionary({type:"codedValue",name:n.domain.name,dataType:h.layerFieldEsriConstants[n.field.type],codedValues:n.domain.codedValues.map(function(D){return{name:D.name,
code:D.code}})}):q.convertObjectToArcadeDictionary({type:"range",name:n.domain.name,dataType:h.layerFieldEsriConstants[n.field.type],min:n.domain.min,max:n.domain.max}):null;throw Error("Invalid Parameter");})};k.domainname=function(v,A){return x(v,A,function(n,w,p){m.pcCheck(p,2,4);if(p[0]instanceof l)return p[0].domainValueLookup(m.toString(p[1]),p[2],void 0===p[3]?void 0:m.toNumber(p[3]));throw Error("Invalid Parameter");})};k.domaincode=function(v,A){return x(v,A,function(n,w,p){m.pcCheck(p,2,
4);if(p[0]instanceof l)return p[0].domainCodeLookup(m.toString(p[1]),p[2],void 0===p[3]?void 0:m.toNumber(p[3]));throw Error("Invalid Parameter");})};k.urlencode=function(v,A){return x(v,A,function(n,w,p){m.pcCheck(p,1,1);if(null===p[0])return"";if(p[0]instanceof q){n="";w=0;for(var D=p[0].keys();w<D.length;w++){var C=D[w],G=p[0].field(C);""!==n&&(n+="\x26");n=null===G?n+(encodeURIComponent(C)+"\x3d"):n+(encodeURIComponent(C)+"\x3d"+encodeURIComponent(G))}return n}return encodeURIComponent(m.toString(p[0]))})};
k.hash=function(v,A){return x(v,A,function(n,w,p){m.pcCheck(p,1,1);n=new f.XXH(0);g(p[0],n,{map:new Map,currentLength:0});return n.digest()})}}})},"esri/arcade/functions/hash":function(){define(["require","exports"],function(B,y){function c(u){for(var q=[],l=0,m=u.length;l<m;l++){var h=u.charCodeAt(l);128>h?q.push(h):2048>h?q.push(192|h>>6,128|h&63):55296>h||57344<=h?q.push(224|h>>12,128|h>>6&63,128|h&63):(l++,h=65536+((h&1023)<<10|u.charCodeAt(l)&1023),q.push(240|h>>18,128|h>>12&63,128|h>>6&63,128|
h&63))}return new Uint8Array(q)}Object.defineProperty(y,"__esModule",{value:!0});y.XXH=void 0;B=function(){function u(q){this.seed=q;this.totallen=0;this.bufs=[];this.init()}u.prototype.init=function(){this.bufs=[];this.totallen=0;return this};u.prototype.updateFloatArray=function(q){for(var l=[],m=0;m<q.length;m++){var h=q[m];isNaN(h)?l.push("NaN"):Infinity===h?l.push("Infinity"):-Infinity===h?l.push("-Infinity"):0===h?l.push("0"):l.push(h.toString(16))}this.update(c(l.join("")))};u.prototype.updateIntArray=
function(q){q=Int32Array.from(q);this.update(new Uint8Array(q.buffer))};u.prototype.updateUint8Array=function(q){this.update(Uint8Array.from(q))};u.prototype.updateWithString=function(q){return this.update(c(q))};u.prototype.update=function(q){this.bufs.push(q);this.totallen+=q.length;return this};u.prototype.digest=function(){for(var q=new Uint8Array(this.totallen),l=0,m=0,h=this.bufs;m<h.length;m++){var f=h[m];q.set(f,l);l+=f.length}this.init();return this.xxHash32(q,this.seed)};u.prototype.xxHash32=
function(q,l){void 0===l&&(l=0);var m=l+374761393&4294967295,h=0;if(16<=q.length){m=[l+2654435761+2246822519&4294967295,l+2246822519&4294967295,l+0&4294967295,l-2654435761&4294967295];var f=q.length-16;for(h=l=0;(h&4294967280)<=f;h+=4){var d=h,a=q[d+0]+(q[d+1]<<8);d=q[d+2]+(q[d+3]<<8);a=m[l]+(2246822519*a+(2246822519*d<<16))&4294967295;a=a<<13|a>>>19;m[l]=2654435761*(a&65535)+(2654435761*(a>>>16)<<16)&4294967295;l=l+1&3}m=(m[0]<<1|m[0]>>>31)+(m[1]<<7|m[1]>>>25)+(m[2]<<12|m[2]>>>20)+(m[3]<<18|m[3]>>>
14)&4294967295}m=m+q.length&4294967295;for(l=q.length-4;h<=l;h+=4)d=h,a=q[d+0]+(q[d+1]<<8),d=q[d+2]+(q[d+3]<<8),m=m+(3266489917*a+(3266489917*d<<16))&4294967295,m=m<<17|m>>>15,m=668265263*(m&65535)+(668265263*(m>>>16)<<16)&4294967295;for(;h<q.length;++h)l=q[h],m+=374761393*l,m=m<<11|m>>>21,m=2654435761*(m&65535)+(2654435761*(m>>>16)<<16)&4294967295;m^=m>>>15;m=(2246822519*(m&65535)&4294967295)+(2246822519*(m>>>16)<<16);m^=m>>>13;m=(3266489917*(m&65535)&4294967295)+(3266489917*(m>>>16)<<16);m^=m>>>
16;return 0>m?m+4294967296:m};return u}();y.XXH=B})},"esri/arcade/arcadeRuntime":function(){define("require exports ./ArcadePortal ./Attachment ./Dictionary ./Feature ./FunctionWrapper ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../SpatialReference".split(" "),
function(B,y,c,u,q,l,m,h,f,d,a,b,e,r,t,g,k,x,v,A,n,w,p,D,C){function G(ba,da){for(var oa=[],va=0;va<da.arguments.length;va++)oa.push(E(ba,da.arguments[va]));return oa}function z(ba,da,oa){try{return oa(ba,da,G(ba,da))}catch(va){throw va;}}function E(ba,da){try{switch(da.type){case "EmptyStatement":return d.voidOperation;case "VariableDeclarator":var oa=null===da.init?null:E(ba,da.init);oa===d.voidOperation&&(oa=null);if("Identifier"!==da.id.type)throw Error("Can only assign a regular variable");var va=
da.id.name.toLowerCase();null!==ba.localScope?ba.localScope[va]={value:oa,valueset:!0,node:da.init}:ba.globalScope[va]={value:oa,valueset:!0,node:da.init};return d.voidOperation;case "VariableDeclaration":for(var pa=0;pa<da.declarations.length;pa++)E(ba,da.declarations[pa]);return d.voidOperation;case "BlockStatement":a:{var Oa=d.voidOperation;for(pa=0;pa<da.body.length;pa++)if(Oa=E(ba,da.body[pa]),Oa instanceof d.ReturnResult||Oa===d.breakResult||Oa===d.continueResult){var W=Oa;break a}W=Oa}return W;
case "FunctionDeclaration":var U=da.id.name.toLowerCase();ba.globalScope[U]={valueset:!0,node:null,value:new m(da,ba)};return d.voidOperation;case "ReturnStatement":if(null===da.argument)var na=new d.ReturnResult(d.voidOperation);else{var qa=E(ba,da.argument);na=new d.ReturnResult(qa)}return na;case "IfStatement":if("AssignmentExpression"===da.test.type||"UpdateExpression"===da.test.type)throw Error(a.nodeErrorMessage(da.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var Ea=E(ba,da.test);if(!0===
Ea)var Ta=E(ba,da.consequent);else if(!1===Ea)Ta=null!==da.alternate?E(ba,da.alternate):d.voidOperation;else throw Error(a.nodeErrorMessage(da,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));return Ta;case "ExpressionStatement":if("AssignmentExpression"===da.expression.type||"UpdateExpression"===da.expression.type)var Ya=E(ba,da.expression);else{var bb=E(ba,da.expression);Ya=bb===d.voidOperation?d.voidOperation:new d.ImplicitResult(bb)}return Ya;case "AssignmentExpression":var Ma=E(ba,da.right);
pa=null;var J="";if("MemberExpression"===da.left.type){pa=E(ba,da.left.object);!0===da.left.computed?J=E(ba,da.left.property):"Identifier"===da.left.property.type&&(J=da.left.property.name);if(d.isArray(pa))if(d.isNumber(J)){0>J&&(J=pa.length+J);if(0>J||J>pa.length)throw Error("Assignment outside of array bounds");if(J===pa.length&&"\x3d"!==da.operator)throw Error("Invalid Parameter");pa[J]=I(Ma,da.operator,pa[J],da)}else throw Error("Invalid Parameter");else if(pa instanceof q){if(!1===d.isString(J))throw Error("Dictionary accessor must be a string");
if(!0===pa.hasField(J))pa.setField(J,I(Ma,da.operator,pa.field(J),da));else{if("\x3d"!==da.operator)throw Error("Invalid Parameter");pa.setField(J,I(Ma,da.operator,null,da))}}else if(pa instanceof l){if(!1===d.isString(J))throw Error("Feature accessor must be a string");if(!0===pa.hasField(J))pa.setField(J,I(Ma,da.operator,pa.field(J),da));else{if("\x3d"!==da.operator)throw Error("Invalid Parameter");pa.setField(J,I(Ma,da.operator,null,da))}}else{if(d.isImmutableArray(pa))throw Error("Array is Immutable");
throw Error("Invalid Parameter");}var Q=d.voidOperation}else if(pa=da.left.name.toLowerCase(),null!==ba.localScope&&void 0!==ba.localScope[pa])ba.localScope[pa]={value:I(Ma,da.operator,ba.localScope[pa].value,da),valueset:!0,node:da.right},Q=d.voidOperation;else if(void 0!==ba.globalScope[pa])ba.globalScope[pa]={value:I(Ma,da.operator,ba.globalScope[pa].value,da),valueset:!0,node:da.right},Q=d.voidOperation;else throw Error("Variable not recognised");return Q;case "UpdateExpression":pa=null;J="";
if("MemberExpression"===da.argument.type){pa=E(ba,da.argument.object);!0===da.argument.computed?J=E(ba,da.argument.property):"Identifier"===da.argument.property.type&&(J=da.argument.property.name);if(d.isArray(pa))if(d.isNumber(J)){0>J&&(J=pa.length+J);if(0>J||J>=pa.length)throw Error("Assignment outside of array bounds");var Z=d.toNumber(pa[J]);pa[J]="++"===da.operator?Z+1:Z-1}else throw Error("Invalid Parameter");else if(pa instanceof q){if(!1===d.isString(J))throw Error("Dictionary accessor must be a string");
if(!0===pa.hasField(J))Z=d.toNumber(pa.field(J)),pa.setField(J,"++"===da.operator?Z+1:Z-1);else throw Error("Invalid Parameter");}else if(pa instanceof l){if(!1===d.isString(J))throw Error("Feature accessor must be a string");if(!0===pa.hasField(J))Z=d.toNumber(pa.field(J)),pa.setField(J,"++"===da.operator?Z+1:Z-1);else throw Error("Invalid Parameter");}else{if(d.isImmutableArray(pa))throw Error("Array is Immutable");throw Error("Invalid Parameter");}var L=!1===da.prefix?Z:"++"===da.operator?Z+1:
Z-1}else{pa="Identifier"===da.argument.type?da.argument.name.toLowerCase():"";if(!pa)throw Error("Invalid identifier");if(null!==ba.localScope&&void 0!==ba.localScope[pa])Z=d.toNumber(ba.localScope[pa].value),ba.localScope[pa]={value:"++"===da.operator?Z+1:Z-1,valueset:!0,node:da},L=!1===da.prefix?Z:"++"===da.operator?Z+1:Z-1;else if(void 0!==ba.globalScope[pa])Z=d.toNumber(ba.globalScope[pa].value),ba.globalScope[pa]={value:"++"===da.operator?Z+1:Z-1,valueset:!0,node:da},L=!1===da.prefix?Z:"++"===
da.operator?Z+1:Z-1;else throw Error("Variable not recognised");}return L;case "BreakStatement":return d.breakResult;case "ContinueStatement":return d.continueResult;case "TemplateElement":return da.value?da.value.cooked:"";case "TemplateLiteral":var R="",aa=0;Q=0;for(pa=da.quasis;Q<pa.length;Q++)if(J=pa[Q],R+=J.value?J.value.cooked:"",!1===J.tail){var ka=da.expressions[aa]?d.toString(E(ba,da.expressions[aa])):"";R+=ka;aa++}return R;case "ForStatement":null!==da.init&&E(ba,da.init);aa={testResult:!0,
lastAction:d.voidOperation};do b:{pa=ba;J=da;ka=aa;if(null!==J.test){ka.testResult=E(pa,J.test);if(!1===ka.testResult)break b;if(!0!==ka.testResult)throw Error(a.nodeErrorMessage(J,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));}ka.lastAction=E(pa,J.body);ka.lastAction===d.breakResult?ka.testResult=!1:ka.lastAction instanceof d.ReturnResult?ka.testResult=!1:null!==J.update&&E(pa,J.update)}while(!0===aa.testResult);R=aa.lastAction instanceof d.ReturnResult?aa.lastAction:d.voidOperation;return R;
case "ForInStatement":return H(ba,da);case "Identifier":return X(ba,da);case "MemberExpression":return T(ba,da);case "Literal":return da.value;case "CallExpression":return ea(ba,da);case "UnaryExpression":return Y(ba,da);case "BinaryExpression":return fa(ba,da);case "LogicalExpression":return ca(ba,da);case "ConditionalExpression":throw Error(a.nodeErrorMessage(da,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{for(pa=[],J=0;J<da.elements.length;J++){var ua=E(ba,da.elements[J]);if(d.isFunctionParameter(ua))throw Error(a.nodeErrorMessage(da,
"RUNTIME","FUNCTIONCONTEXTILLEGAL"));ua===d.voidOperation?pa.push(null):pa.push(ua)}}catch(Qa){throw Qa;}return pa;case "ObjectExpression":pa={};for(J=0;J<da.properties.length;J++){var Aa=E(ba,da.properties[J]);if(d.isFunctionParameter(Aa.value))throw Error("Illegal Argument");if(!1===d.isString(Aa.key))throw Error("Illegal Argument");pa[Aa.key.toString()]=Aa.value===d.voidOperation?null:Aa.value}var Ba=new q(pa);Ba.immutable=!1;return Ba;case "Property":return{key:"Identifier"===da.key.type?da.key.name:
E(ba,da.key),value:E(ba,da.value)};default:throw Error(a.nodeErrorMessage(da,"RUNTIME","UNREOGNISED"));}}catch(Qa){throw Qa;}}function H(ba,da){var oa=E(ba,da.right);"VariableDeclaration"===da.left.type&&E(ba,da.left);var va=null,pa="";if("VariableDeclaration"===da.left.type){var Oa=da.left.declarations[0].id;"Identifier"===Oa.type&&(pa=Oa.name)}else"Identifier"===da.left.type&&(pa=da.left.name);if(!pa)throw Error(a.nodeErrorMessage(da,"RUNTIME","INVALIDVARIABLE"));pa=pa.toLowerCase();null!==ba.localScope&&
void 0!==ba.localScope[pa]&&(va=ba.localScope[pa]);null===va&&void 0!==ba.globalScope[pa]&&(va=ba.globalScope[pa]);if(null===va)throw Error(a.nodeErrorMessage(da,"RUNTIME","VARIABLENOTDECLARED"));if(d.isArray(oa)||d.isString(oa)){oa=oa.length;for(Oa=0;Oa<oa;Oa++){va.value=Oa;pa=E(ba,da.body);if(pa===d.breakResult)break;if(pa instanceof d.ReturnResult)return pa}return d.voidOperation}if(d.isImmutableArray(oa)){for(Oa=0;Oa<oa.length();Oa++){va.value=Oa;pa=E(ba,da.body);if(pa===d.breakResult)break;if(pa instanceof
d.ReturnResult)return pa}return d.voidOperation}if(oa instanceof q||oa instanceof l)for(oa=oa.keys(),Oa=0;Oa<oa.length;Oa++){va.value=oa[Oa];pa=E(ba,da.body);if(pa===d.breakResult)break;if(pa instanceof d.ReturnResult)return pa}else return d.voidOperation}function I(ba,da,oa,va){switch(da){case "\x3d":return ba===d.voidOperation?null:ba;case "/\x3d":return d.toNumber(oa)/d.toNumber(ba);case "*\x3d":return d.toNumber(oa)*d.toNumber(ba);case "-\x3d":return d.toNumber(oa)-d.toNumber(ba);case "+\x3d":return d.isString(oa)||
d.isString(ba)?d.toString(oa)+d.toString(ba):d.toNumber(oa)+d.toNumber(ba);case "%\x3d":return d.toNumber(oa)%d.toNumber(ba);default:throw Error(a.nodeErrorMessage(va,"RUNTIME","OPERATORNOTRECOGNISED"));}}function M(ba,da,oa){da=da.toLowerCase();switch(da){case "hasz":return ba=ba.hasZ,void 0===ba?!1:ba;case "hasm":return ba=ba.hasM,void 0===ba?!1:ba;case "spatialreference":return da=ba.spatialReference._arcadeCacheId,void 0===da&&(oa=!0,Object.freeze&&Object.isFrozen(ba.spatialReference)&&(oa=!1),
oa&&(la++,da=ba.spatialReference._arcadeCacheId=la)),ba=new q({wkt:ba.spatialReference.wkt,wkid:ba.spatialReference.wkid}),void 0!==da&&(ba._arcadeCacheId="SPREF"+da.toString()),ba}switch(ba.type){case "extent":switch(da){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return ba=ba[da],void 0!==ba?ba:null;case "type":return"Extent"}break;case "polygon":switch(da){case "rings":return da=ba.getCacheValue("_arcadeCacheId"),void 0===da&&(la++,da=la,ba.setCacheValue("_arcadeCacheId",
da)),ba=new h(ba.rings,ba.spatialReference,!0===ba.hasZ,!0===ba.hasM,da);case "type":return"Polygon"}break;case "point":switch(da){case "x":case "y":case "z":case "m":return void 0!==ba[da]?ba[da]:null;case "type":return"Point"}break;case "polyline":switch(da){case "paths":return da=ba.getCacheValue("_arcadeCacheId"),void 0===da&&(la++,da=la,ba.setCacheValue("_arcadeCacheId",da)),ba=new h(ba.paths,ba.spatialReference,!0===ba.hasZ,!0===ba.hasM,da);case "type":return"Polyline"}break;case "multipoint":switch(da){case "points":return da=
ba.getCacheValue("_arcadeCacheId"),void 0===da&&(la++,da=la,ba.setCacheValue("_arcadeCacheId",da)),ba=new f(ba.points,ba.spatialReference,!0===ba.hasZ,!0===ba.hasM,da,1);case "type":return"Multipoint"}}throw Error(a.nodeErrorMessage(oa,"RUNTIME","PROPERTYNOTFOUND"));}function T(ba,da){try{var oa=E(ba,da.object);if(null===oa)throw Error(a.nodeErrorMessage(da,"RUNTIME","NOTFOUND"));if(!1===da.computed){if("Identifier"===da.property.type){if(oa instanceof q||oa instanceof l)return oa.field(da.property.name);
if(oa instanceof A)return M(oa,da.property.name,da)}throw Error(a.nodeErrorMessage(da,"RUNTIME","INVALIDTYPE"));}var va=E(ba,da.property);if(oa instanceof q||oa instanceof l){if(d.isString(va))return oa.field(va);throw Error(a.nodeErrorMessage(da,"RUNTIME","INVALIDTYPE"));}if(oa instanceof A){if(d.isString(va))return M(oa,va,da);throw Error(a.nodeErrorMessage(da,"RUNTIME","INVALIDTYPE"));}if(d.isArray(oa)){if(d.isNumber(va)&&isFinite(va)&&Math.floor(va)===va){0>va&&(va=oa.length+va);if(va>=oa.length||
0>va)throw Error(a.nodeErrorMessage(da,"RUNTIME","OUTOFBOUNDS"));return oa[va]}throw Error(a.nodeErrorMessage(da,"RUNTIME","INVALIDTYPE"));}if(d.isString(oa)){if(d.isNumber(va)&&isFinite(va)&&Math.floor(va)===va){0>va&&(va=oa.length+va);if(va>=oa.length||0>va)throw Error(a.nodeErrorMessage(da,"RUNTIME","OUTOFBOUNDS"));return oa[va]}throw Error(a.nodeErrorMessage(da,"RUNTIME","INVALIDTYPE"));}if(d.isImmutableArray(oa)&&d.isNumber(va)&&isFinite(va)&&Math.floor(va)===va){0>va&&(va=oa.length()+va);if(va>=
oa.length()||0>va)throw Error(a.nodeErrorMessage(da,"RUNTIME","OUTOFBOUNDS"));return oa.get(va)}throw Error(a.nodeErrorMessage(da,"RUNTIME","INVALIDTYPE"));}catch(pa){throw pa;}}function Y(ba,da){try{var oa=E(ba,da.argument);if(d.isBoolean(oa)){if("!"===da.operator)return!oa;if("-"===da.operator)return-1*d.toNumber(oa);if("+"===da.operator)return 1*d.toNumber(oa);if("~"===da.operator)return~d.toNumber(oa);throw Error(a.nodeErrorMessage(da,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("~"===da.operator)return~d.toNumber(oa);
if("-"===da.operator)return-1*d.toNumber(oa);if("+"===da.operator)return 1*d.toNumber(oa);throw Error(a.nodeErrorMessage(da,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}catch(va){throw va;}}function fa(ba,da){try{var oa=[E(ba,da.left),E(ba,da.right)],va=oa[0],pa=oa[1];switch(da.operator){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return d.binaryOperator(d.toNumber(va),d.toNumber(pa),da.operator);case "\x3d\x3d":return d.equalityTest(va,pa);case "!\x3d":return!d.equalityTest(va,
pa);case "\x3c":return d.greaterThanLessThan(va,pa,da.operator);case "\x3e":return d.greaterThanLessThan(va,pa,da.operator);case "\x3c\x3d":return d.greaterThanLessThan(va,pa,da.operator);case "\x3e\x3d":return d.greaterThanLessThan(va,pa,da.operator);case "+":return d.isString(va)||d.isString(pa)?d.toString(va)+d.toString(pa):d.toNumber(va)+d.toNumber(pa);case "-":return d.toNumber(va)-d.toNumber(pa);case "*":return d.toNumber(va)*d.toNumber(pa);case "/":return d.toNumber(va)/d.toNumber(pa);case "%":return d.toNumber(va)%
d.toNumber(pa);default:throw Error(a.nodeErrorMessage(da,"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(Oa){throw Oa;}}function ca(ba,da){try{if("AssignmentExpression"===da.left.type||"UpdateExpression"===da.left.type)throw Error(a.nodeErrorMessage(da.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===da.right.type||"UpdateExpression"===da.right.type)throw Error(a.nodeErrorMessage(da.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var oa=E(ba,da.left);if(d.isBoolean(oa))switch(da.operator){case "||":if(!0===
oa)return oa;var va=E(ba,da.right);if(d.isBoolean(va))return va;throw Error(a.nodeErrorMessage(da,"RUNTIME","ONLYORORAND"));case "\x26\x26":if(!1===oa)return oa;va=E(ba,da.right);if(d.isBoolean(va))return va;throw Error(a.nodeErrorMessage(da,"RUNTIME","ONLYORORAND"));default:throw Error(a.nodeErrorMessage(da,"RUNTIME","ONLYORORAND"));}throw Error(a.nodeErrorMessage(da,"RUNTIME","ONLYBOOLEAN"));}catch(pa){throw pa;}}function X(ba,da){try{var oa=da.name.toLowerCase();if(null!==ba.localScope&&void 0!==
ba.localScope[oa]){var va=ba.localScope[oa];if(!0===va.valueset)return va.value;va.value=E(ba,va.node);va.valueset=!0;return va.value}if(void 0!==ba.globalScope[oa]){va=ba.globalScope[oa];if(!0===va.valueset)return va.value;va.value=E(ba,va.node);va.valueset=!0;return va.value}throw Error(a.nodeErrorMessage(da,"RUNTIME","VARIABLENOTFOUND"));}catch(pa){throw pa;}}function ea(ba,da){try{if("Identifier"!==da.callee.type)throw Error(a.nodeErrorMessage(da,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==ba.localScope&&
void 0!==ba.localScope[da.callee.name.toLowerCase()]){var oa=ba.localScope[da.callee.name.toLowerCase()];if(oa.value instanceof d.NativeFunction)return oa.value.fn(ba,da);if(oa.value instanceof m)return N(ba,da,oa.value.definition);throw Error(a.nodeErrorMessage(da,"RUNTIME","NOTAFUNCTION"));}if(void 0!==ba.globalScope[da.callee.name.toLowerCase()]){oa=ba.globalScope[da.callee.name.toLowerCase()];if(oa.value instanceof d.NativeFunction)return oa.value.fn(ba,da);if(oa.value instanceof m)return N(ba,
da,oa.value.definition);throw Error(a.nodeErrorMessage(da,"RUNTIME","NOTAFUNCTION"));}throw Error(a.nodeErrorMessage(da,"RUNTIME","NOTFOUND"));}catch(va){throw va;}}function ma(ba){return null==ba?"":d.isArray(ba)||d.isImmutableArray(ba)?"Array":d.isDate(ba)?"Date":d.isString(ba)?"String":d.isBoolean(ba)?"Boolean":d.isNumber(ba)?"Number":ba instanceof u?"Attachment":ba instanceof c?"Portal":ba instanceof q?"Dictionary":ba instanceof l?"Feature":ba instanceof w?"Point":ba instanceof p?"Polygon":ba instanceof
D?"Polyline":ba instanceof n?"Multipoint":ba instanceof v?"Extent":d.isFunctionParameter(ba)?"Function":d.isFeatureSet(ba)?"FeatureSet":d.isFeatureSetCollection(ba)?"FeatureSetCollection":ba===d.voidOperation?"":"number"===typeof ba&&isNaN(ba)?"Number":"Unrecognised Type"}function wa(ba,da,oa,va){try{var pa=E(ba,da.arguments[oa]);if(d.equalityTest(pa,va))return E(ba,da.arguments[oa+1]);var Oa=da.arguments.length-oa;return 1===Oa?E(ba,da.arguments[oa]):2===Oa?null:3===Oa?E(ba,da.arguments[oa+2]):wa(ba,
da,oa+2,va)}catch(W){throw W;}}function P(ba,da,oa,va){try{if(!0===va)return E(ba,da.arguments[oa+1]);if(3===da.arguments.length-oa)return E(ba,da.arguments[oa+2]);var pa=E(ba,da.arguments[oa+2]);if(!1===d.isBoolean(pa))throw Error("WHEN needs boolean test conditions");return P(ba,da,oa+2,pa)}catch(Oa){throw Oa;}}function ja(ba,da){var oa=ba.length,va=Math.floor(oa/2);if(0===oa)return[];if(1===oa)return[ba[0]];var pa=ja(ba.slice(0,va),da);ba=ja(ba.slice(va,oa),da);for(oa=[];0<pa.length||0<ba.length;)0<
pa.length&&0<ba.length?(va=da(pa[0],ba[0]),isNaN(va)&&(va=0),0>=va?(oa.push(pa[0]),pa=pa.slice(1)):(oa.push(ba[0]),ba=ba.slice(1))):0<pa.length?(oa.push(pa[0]),pa=pa.slice(1)):0<ba.length&&(oa.push(ba[0]),ba=ba.slice(1));return oa}function ta(ba,da,oa){try{var va=ba.body;if(oa.length!==ba.params.length)throw Error("Invalid Parameter calls to function.");for(var pa=0;pa<oa.length;pa++)da.localScope[ba.params[pa].name.toLowerCase()]={value:oa[pa],valueset:!0,node:null};var Oa=E(da,va);if(Oa instanceof
d.ReturnResult)return Oa.value;if(Oa===d.breakResult)throw Error("Cannot Break from a Function");if(Oa===d.continueResult)throw Error("Cannot Continue from a Function");return Oa instanceof d.ImplicitResult?Oa.value:Oa}catch(W){throw W;}}function N(ba,da,oa){return z(ba,da,function(va,pa,Oa){va={spatialReference:ba.spatialReference,globalScope:ba.globalScope,depthCounter:ba.depthCounter+1,console:ba.console,lrucache:ba.lrucache,localScope:{}};if(64<va.depthCounter)throw Error("Exceeded maximum function depth");
return ta(oa,va,Oa)})}function S(ba){return function(){var da={spatialReference:ba.context.spatialReference,console:ba.context.console,lrucache:ba.context.lrucache,localScope:{},depthCounter:ba.context.depthCounter+1,globalScope:ba.context.globalScope};if(64<da.depthCounter)throw Error("Exceeded maximum function depth");return ta(ba.definition,da,arguments)}}function ha(ba){console.log(ba)}Object.defineProperty(y,"__esModule",{value:!0});y.findFunctionCalls=y.referencesFunction=y.referencesMember=
y.validateScript=y.extractFieldLiterals=y.executeScript=y.extend=y.functionHelper=void 0;var la=0,sa={};b.registerFunctions(sa,z);e.registerFunctions(sa,z);x.registerFunctions(sa,z);g.registerFunctions(sa,z);r.registerFunctions(sa,z);k.registerFunctions(sa,z);t.registerFunctions(sa,z);sa["typeof"]=function(ba,da){return z(ba,da,function(oa,va,pa){d.pcCheck(pa,1,1);oa=ma(pa[0]);if("Unrecognised Type"===oa)throw Error("Unrecognised Type");return oa})};sa.iif=function(ba,da){try{d.pcCheck(null===da.arguments?
[]:da.arguments,3,3);var oa=E(ba,da.arguments[0]);if(!1===d.isBoolean(oa))throw Error("IF Function must have a boolean test condition");var va=E(ba,da.arguments[1]),pa=E(ba,da.arguments[2]);return!0===oa?va:pa}catch(Oa){throw Oa;}};sa.decode=function(ba,da){try{if(2>da.arguments.length)throw Error("Missing Parameters");if(2===da.arguments.length)return E(ba,da.arguments[1]);if(0===(da.arguments.length-1)%2)throw Error("Must have a default value result.");var oa=E(ba,da.arguments[0]);return wa(ba,
da,1,oa)}catch(va){throw va;}};sa.when=function(ba,da){try{if(3>da.arguments.length)throw Error("Missing Parameters");if(0===da.arguments.length%2)throw Error("Must have a default value result.");var oa=E(ba,da.arguments[0]);if(!1===d.isBoolean(oa))throw Error("WHEN needs boolean test conditions");return P(ba,da,0,oa)}catch(va){throw va;}};sa.top=function(ba,da){return z(ba,da,function(oa,va,pa){d.pcCheck(pa,2,2);if(d.isArray(pa[0]))return d.toNumber(pa[1])>=pa[0].length?pa[0].slice(0):pa[0].slice(0,
d.toNumber(pa[1]));if(d.isImmutableArray(pa[0]))return d.toNumber(pa[1])>=pa[0].length()?pa[0].slice(0):pa[0].slice(0,d.toNumber(pa[1]));throw Error("Top cannot accept this parameter type");})};sa.first=function(ba,da){return z(ba,da,function(oa,va,pa){d.pcCheck(pa,1,1);return d.isArray(pa[0])?0===pa[0].length?null:pa[0][0]:d.isImmutableArray(pa[0])?0===pa[0].length()?null:pa[0].get(0):null})};sa.sort=function(ba,da){return z(ba,da,function(oa,va,pa){d.pcCheck(pa,1,2);oa=pa[0];d.isImmutableArray(oa)&&
(oa=oa.toArray());if(!1===d.isArray(oa))throw Error("Illegal Argument");if(1<pa.length){if(!1===d.isFunctionParameter(pa[1]))throw Error("Illegal Argument");var Oa=S(pa[1]);return oa=ja(oa,function(na,qa){return Oa(na,qa)})}if(0===oa.length)return[];pa={};for(va=0;va<oa.length;va++){var W=ma(oa[va]);""!==W&&(pa[W]=!0)}if(!0===pa.Array||!0===pa.Dictionary||!0===pa.Feature||!0===pa.Point||!0===pa.Polygon||!0===pa.Polyline||!0===pa.Multipoint||!0===pa.Extent||!0===pa.Function)return oa.slice(0);va=0;
W="";for(var U in pa)va++,W=U;return oa=1<va||"String"===W?ja(oa,function(na,qa){if(null===na||void 0===na||na===d.voidOperation)return null===qa||void 0===qa||qa===d.voidOperation?0:1;if(null===qa||void 0===qa||qa===d.voidOperation)return-1;na=d.toString(na);qa=d.toString(qa);return na<qa?-1:na===qa?0:1}):"Number"===W?ja(oa,function(na,qa){return na-qa}):"Boolean"===W?ja(oa,function(na,qa){return na===qa?0:qa?-1:1}):"Date"===W?ja(oa,function(na,qa){return qa-na}):oa.slice(0)})};for(var ya in sa)sa[ya]=
{value:new d.NativeFunction(sa[ya]),valueset:!0,node:null};var Ga=function(){};Ga.prototype=sa;Ga.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};Ga.prototype.pi={value:Math.PI,valueset:!0,node:null};y.functionHelper={fixSpatialReference:d.fixSpatialReference,parseArguments:G,standardFunction:z};y.extend=function(ba){for(var da={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:z,evaluateIdentifier:X,arcadeCustomFunctionHandler:S},oa=0;oa<ba.length;oa++)ba[oa].registerFunctions(da);
for(var va in da.functions)sa[va]={value:new d.NativeFunction(da.functions[va]),valueset:!0,node:null},Ga.prototype[va]=sa[va];for(oa=0;oa<da.signatures.length;oa++)a.addFunctionDeclaration(da.signatures[oa],"async")};y.executeScript=function(ba,da){var oa=da.spatialReference;if(null===oa||void 0===oa)oa=new C({wkid:102100});var va=da.vars,pa=da.customfunctions,Oa=new Ga;va||(va={});pa||(pa={});var W=new q({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});
W.immutable=!1;Oa.textformatting={value:W,valueset:!0,node:null};for(var U in pa)Oa[U]={value:new d.NativeFunction(pa[U]),native:!0,valueset:!0,node:null};for(U in va)Oa[U]=va[U]&&"esri.Graphic"===va[U].declaredClass?{value:l.createFromGraphic(va[U]),valueset:!0,node:null}:{value:va[U],valueset:!0,node:null};ba=E({spatialReference:oa,globalScope:Oa,localScope:null,console:da.console?da.console:ha,lrucache:da.lrucache,depthCounter:1},ba.body[0].body);ba instanceof d.ReturnResult&&(ba=ba.value);ba instanceof
d.ImplicitResult&&(ba=ba.value);ba===d.voidOperation&&(ba=null);if(ba===d.breakResult)throw Error("Cannot return BREAK");if(ba===d.continueResult)throw Error("Cannot return CONTINUE");if(ba instanceof m)throw Error("Cannot return FUNCTION");if(ba instanceof d.NativeFunction)throw Error("Cannot return FUNCTION");return ba};y.extractFieldLiterals=function(ba,da){void 0===da&&(da=!1);return a.findFieldLiterals(ba)};y.validateScript=function(ba,da){return a.validateScript(ba,da,"simple")};y.referencesMember=
function(ba,da){return a.referencesMember(ba,da)};y.referencesFunction=function(ba,da){return a.referencesFunction(ba,da)};y.findFunctionCalls=function(ba){return a.findFunctionCalls(ba)}})},"esri/arcade/parser":function(){define(["require","exports","./treeAnalysis","./lib/esprima"],function(B,y,c,u){Object.defineProperty(y,"__esModule",{value:!0});y.referencesFunction=y.referencesMember=y.validateScript=y.extractFieldLiterals=y.scriptCheck=y.parseScript=void 0;y.parseScript=function(q,l){void 0===
l&&(l=[]);q=u.parse("function _() { "+q+"\n}");if(null===q.body||void 0===q.body)throw Error("No formula provided.");if(0===q.body.length)throw Error("No formula provided.");if(0===q.body.length)throw Error("No formula provided.");if("BlockStatement"!==q.body[0].body.type)throw Error("Invalid formula content.");var m=c.validateLanguage(q);if(""!==m)throw Error(m);c.findScriptDependencies(q,l);return q};y.scriptCheck=function(q,l,m,h,f){var d=[];q="function _() { \n"+q+"\n}";try{var a=u.parse(q,{tolerant:!0,
loc:!0,range:!0}),b=a.errors;if(0<b.length)for(var e=0;e<b.length;e++)d.push({line:b[e].lineNumber-2,character:b[e].column,reason:b[e].description});var r=c.checkScript(a,l,m,h,f);for(l=0;l<r.length;l++)r[l].line-=2,r[l].range&&(r[l].range=[r[l][0]-15,r[l][1]-15]),r[l].loc&&(r[l].loc.start.line-=2,r[l].loc.end.line-=2),d.push(r[l])}catch(g){try{if("Unexpected token }"===g.description){var t=q.split("\n").length;g.lineNumber===t?(g.index=q.length-1,d.push({line:g.lineNumber-4,character:g.column,reason:"Unexpected end of script"})):
(g.index=q.length-1,d.push({line:g.lineNumber-2,character:g.column,reason:"Unexpected end of script"}))}else d.push({line:g.lineNumber-2,character:g.column,reason:g.description})}catch(k){}}return d};y.extractFieldLiterals=function(q,l){void 0===l&&(l=!1);return c.findFieldLiterals(q)};y.validateScript=function(q,l,m){return c.validateScript(q,l,m)};y.referencesMember=function(q,l){return c.referencesMember(q,l)};y.referencesFunction=function(q,l){return c.referencesFunction(q,l)}})},"esri/arcade/lib/esprima":function(){define("require exports ./comment-handler ./parser ./tokenizer ./syntax".split(" "),
function(B,y,c,u,q,l){function m(h,f,d){var a=null,b=function(g,k){d&&d(g,k);a&&a.visit(g,k)},e="function"===typeof d?b:null,r=!1;if(f){r="boolean"===typeof f.comment&&f.comment;var t="boolean"===typeof f.attachComment&&f.attachComment;if(r||t)a=new c.CommentHandler,a.attach=t,f.comment=!0,e=b}h=new u.Parser(h,f,e);f=h.parseScript();r&&a&&(f.comments=a.comments);h.config.tokens&&(f.tokens=h.tokens);h.config.tolerant&&(f.errors=h.errorHandler.errors);return f}Object.defineProperty(y,"__esModule",{value:!0});
y.version=y.tokenize=y.parseScript=y.parse=void 0;y.parse=m;y.parseScript=function(h,f,d){f=f||{};f.sourceType="script";return m(h,f,d)};y.tokenize=function(h,f,d){h=new q.Tokenizer(h,f);f=[];try{for(;;){var a=h.getNextToken();if(!a)break;d&&(a=d(a));f.push(a)}}catch(b){h.errorHandler.tolerate(b)}h.errorHandler.tolerant&&(f.errors=h.errors());return f};Object.defineProperty(y,"Syntax",{enumerable:!0,get:function(){return l.Syntax}});y.version="4.0.0-dev"})},"esri/arcade/lib/comment-handler":function(){define(["require",
"exports","./syntax"],function(B,y,c){Object.defineProperty(y,"__esModule",{value:!0});y.CommentHandler=void 0;B=function(){function u(){this.attach=!1;this.comments=[];this.stack=[];this.leading=[];this.trailing=[]}u.prototype.insertInnerComments=function(q,l){if(q.type===c.Syntax.BlockStatement&&0===q.body.length){for(var m=[],h=this.leading.length-1;0<=h;--h){var f=this.leading[h];l.end.offset>=f.start&&(m.unshift(f.comment),this.leading.splice(h,1),this.trailing.splice(h,1))}m.length&&(q.innerComments=
m)}};u.prototype.findTrailingComments=function(q){var l=[];if(0<this.trailing.length){for(var m=this.trailing.length-1;0<=m;--m){var h=this.trailing[m];h.start>=q.end.offset&&l.unshift(h.comment)}this.trailing.length=0;return l}(m=this.stack[this.stack.length-1])&&m.node.trailingComments&&(h=m.node.trailingComments[0])&&h.range[0]>=q.end.offset&&(l=m.node.trailingComments,delete m.node.trailingComments);return l};u.prototype.findLeadingComments=function(q){for(var l=[],m;0<this.stack.length;){var h=
this.stack[this.stack.length-1];if(h&&h.start>=q.start.offset)m=h.node,this.stack.pop();else break}if(m){for(var f=(m.leadingComments?m.leadingComments.length:0)-1;0<=f;--f)h=m.leadingComments[f],h.range[1]<=q.start.offset&&(l.unshift(h),m.leadingComments.splice(f,1));m.leadingComments&&0===m.leadingComments.length&&delete m.leadingComments;return l}for(f=this.leading.length-1;0<=f;--f)h=this.leading[f],h.start<=q.start.offset&&(l.unshift(h.comment),this.leading.splice(f,1));return l};u.prototype.visitNode=
function(q,l){if(!(q.type===c.Syntax.Program&&0<q.body.length)){this.insertInnerComments(q,l);var m=this.findTrailingComments(l),h=this.findLeadingComments(l);0<h.length&&(q.leadingComments=h);0<m.length&&(q.trailingComments=m);this.stack.push({node:q,start:l.start.offset})}};u.prototype.visitComment=function(q,l){var m="L"===q.type[0]?"Line":"Block",h={type:m,value:q.value};q.range&&(h.range=q.range);q.loc&&(h.loc=q.loc);this.comments.push(h);this.attach&&(l={comment:{type:m,value:q.value,range:[l.start.offset,
l.end.offset]},start:l.start.offset},q.loc&&(l.comment.loc=q.loc),q.type=m,this.leading.push(l),this.trailing.push(l))};u.prototype.visit=function(q,l){"LineComment"===q.type?this.visitComment(q,l):"BlockComment"===q.type?this.visitComment(q,l):this.attach&&this.visitNode(q,l)};return u}();y.CommentHandler=B})},"esri/arcade/lib/syntax":function(){define(["require","exports"],function(B,y){Object.defineProperty(y,"__esModule",{value:!0});y.Syntax=void 0;y.Syntax={AssignmentExpression:"AssignmentExpression",
AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",
Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MethodDefinition:"MethodDefinition",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",
VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement"}})},"esri/arcade/lib/parser":function(){define("require exports ./assert ./error-handler ./messages ./nodes ./scanner ./syntax ./token".split(" "),function(B,y,c,u,q,l,m,h,f){Object.defineProperty(y,"__esModule",{value:!0});y.Parser=void 0;B=function(){function d(a,b,e){void 0===b&&(b={});this.config={range:"boolean"===typeof b.range&&b.range,loc:"boolean"===typeof b.loc&&b.loc,source:null,tokens:"boolean"===typeof b.tokens&&
b.tokens,comment:"boolean"===typeof b.comment&&b.comment,tolerant:"boolean"===typeof b.tolerant&&b.tolerant};this.config.loc&&b.source&&null!==b.source&&(this.config.source=String(b.source));this.delegate=e;this.errorHandler=new u.ErrorHandler;this.errorHandler.tolerant=this.config.tolerant;this.scanner=new m.Scanner(a,this.errorHandler);this.scanner.trackComment=this.config.comment;this.operatorPrecedence={")":0,";":0,",":0,"\x3d":0,"]":0,"||":1,"\x26\x26":2,"|":3,"^":4,"\x26":5,"\x3d\x3d":6,"!\x3d":6,
"\x3d\x3d\x3d":6,"!\x3d\x3d":6,"\x3c":7,"\x3e":7,"\x3c\x3d":7,"\x3e\x3d":7,"\x3c\x3c":8,"\x3e\x3e":8,"\x3e\x3e\x3e":8,"+":9,"-":9,"*":11,"/":11,"%":11};this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0};this.hasLineTerminator=!1;this.context={isModule:!1,allowIn:!0,allowStrictDirective:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},strict:!1};this.tokens=[];this.startMarker=
{index:0,line:this.scanner.lineNumber,column:0};this.lastMarker={index:0,line:this.scanner.lineNumber,column:0};this.nextToken();this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}d.prototype.throwError=function(a){for(var b=[],e=1;e<arguments.length;e++)b[e-1]=arguments[e];var r=b.slice();b=a.replace(/%(\d)/g,function(t,g){c.assert(g<r.length,"Message reference must be in range");return r[g]});throw this.errorHandler.createError(this.lastMarker.index,
this.lastMarker.line,this.lastMarker.column+1,b);};d.prototype.tolerateError=function(a){for(var b=[],e=1;e<arguments.length;e++)b[e-1]=arguments[e];var r=b.slice();b=a.replace(/%(\d)/g,function(t,g){c.assert(g<r.length,"Message reference must be in range");return r[g]});this.errorHandler.tolerateError(this.lastMarker.index,this.scanner.lineNumber,this.lastMarker.column+1,b)};d.prototype.unexpectedTokenError=function(a,b){var e=b||q.Messages.UnexpectedToken;a?(b||(e=2===a.type?q.Messages.UnexpectedEOS:
3===a.type?q.Messages.UnexpectedIdentifier:6===a.type?q.Messages.UnexpectedNumber:8===a.type?q.Messages.UnexpectedString:10===a.type?q.Messages.UnexpectedTemplate:q.Messages.UnexpectedToken,4===a.type&&(this.scanner.isFutureReservedWord(a.value)?e=q.Messages.UnexpectedReserved:this.context.strict&&this.scanner.isStrictModeReservedWord(a.value)&&(e=q.Messages.StrictReservedWord))),b=a.value):b="ILLEGAL";e=e.replace("%0",b);if(a&&"number"===typeof a.lineNumber){b=a.start;var r=a.lineNumber;a=a.start-
(this.lastMarker.index-this.lastMarker.column)+1;return this.errorHandler.createError(b,r,a,e)}b=this.lastMarker.index;r=this.lastMarker.line;a=this.lastMarker.column+1;return this.errorHandler.createError(b,r,a,e)};d.prototype.throwUnexpectedToken=function(a,b){throw this.unexpectedTokenError(a,b);};d.prototype.tolerateUnexpectedToken=function(a,b){this.errorHandler.tolerate(this.unexpectedTokenError(a,b))};d.prototype.collectComments=function(){if(this.config.comment){var a=this.scanner.scanComments();
if(0<a.length&&this.delegate)for(var b=0;b<a.length;++b){var e=a[b],r={type:e.multiLine?"BlockComment":"LineComment",value:this.scanner.source.slice(e.slice[0],e.slice[1])};this.config.range&&(r.range=e.range);this.config.loc&&(r.loc=e.loc);this.delegate(r,{start:{line:e.loc.start.line,column:e.loc.start.column,offset:e.range[0]},end:{line:e.loc.end.line,column:e.loc.end.column,offset:e.range[1]}})}}else this.scanner.scanComments()};d.prototype.getTokenRaw=function(a){return this.scanner.source.slice(a.start,
a.end)};d.prototype.convertToken=function(a){var b={type:f.TokenName[a.type],value:this.getTokenRaw(a)};this.config.range&&(b.range=[a.start,a.end]);this.config.loc&&(b.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}});9===a.type&&(b.regex={pattern:a.pattern,flags:a.flags});return b};d.prototype.nextToken=function(){var a=this.lookahead;this.lastMarker.index=this.scanner.index;this.lastMarker.line=
this.scanner.lineNumber;this.lastMarker.column=this.scanner.index-this.scanner.lineStart;this.collectComments();this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var b=this.scanner.lex();this.hasLineTerminator=a.lineNumber!==b.lineNumber;b&&this.context.strict&&3===b.type&&this.scanner.isStrictModeReservedWord(b.value)&&(b.type=4);this.lookahead=b;
this.config.tokens&&2!==b.type&&this.tokens.push(this.convertToken(b));return a};d.prototype.nextRegexToken=function(){this.collectComments();var a=this.scanner.scanRegExp();this.config.tokens&&(this.tokens.pop(),this.tokens.push(this.convertToken(a)));this.lookahead=a;this.nextToken();return a};d.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}};d.prototype.startNode=function(a,b){void 0===b&&(b=0);var e=a.start-a.lineStart,
r=a.lineNumber;0>e&&(e+=b,r--);return{index:a.start,line:r,column:e}};d.prototype.finalize=function(a,b){this.config.range&&(b.range=[a.index,this.lastMarker.index]);this.config.loc&&(b.loc={start:{line:a.line,column:a.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(b.loc.source=this.config.source));this.delegate&&this.delegate(b,{start:{line:a.line,column:a.column,offset:a.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}});
return b};d.prototype.expect=function(a){var b=this.nextToken();7===b.type&&b.value===a||this.throwUnexpectedToken(b)};d.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var a=this.lookahead;7===a.type&&","===a.value?this.nextToken():7===a.type&&";"===a.value?(this.nextToken(),this.tolerateUnexpectedToken(a)):this.tolerateUnexpectedToken(a,q.Messages.UnexpectedToken)}else this.expect(",")};d.prototype.expectKeyword=function(a){var b=this.nextToken();4===b.type&&b.value.toLowerCase()===
a.toLowerCase()||this.throwUnexpectedToken(b)};d.prototype.match=function(a){return 7===this.lookahead.type&&this.lookahead.value===a};d.prototype.matchKeyword=function(a){return 4===this.lookahead.type&&this.lookahead.value.toLowerCase()===a.toLowerCase()};d.prototype.matchContextualKeyword=function(a){return 3===this.lookahead.type&&this.lookahead.value===a};d.prototype.matchAssign=function(){if(7!==this.lookahead.type)return!1;var a=this.lookahead.value;return"\x3d"===a||"*\x3d"===a||"**\x3d"===
a||"/\x3d"===a||"%\x3d"===a||"+\x3d"===a||"-\x3d"===a||"\x3c\x3c\x3d"===a||"\x3e\x3e\x3d"===a||"\x3e\x3e\x3e\x3d"===a||"\x26\x3d"===a||"^\x3d"===a||"|\x3d"===a};d.prototype.isolateCoverGrammar=function(a){var b=this.context.isBindingElement,e=this.context.isAssignmentTarget,r=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0;this.context.isAssignmentTarget=!0;this.context.firstCoverInitializedNameError=null;a=a.call(this);null!==this.context.firstCoverInitializedNameError&&
this.throwUnexpectedToken(this.context.firstCoverInitializedNameError);this.context.isBindingElement=b;this.context.isAssignmentTarget=e;this.context.firstCoverInitializedNameError=r;return a};d.prototype.inheritCoverGrammar=function(a){var b=this.context.isBindingElement,e=this.context.isAssignmentTarget,r=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0;this.context.isAssignmentTarget=!0;this.context.firstCoverInitializedNameError=null;a=a.call(this);this.context.isBindingElement=
this.context.isBindingElement&&b;this.context.isAssignmentTarget=this.context.isAssignmentTarget&&e;this.context.firstCoverInitializedNameError=r||this.context.firstCoverInitializedNameError;return a};d.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(2===this.lookahead.type||this.match("}")||this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)};
d.prototype.parsePrimaryExpression=function(){var a=this.createNode();switch(this.lookahead.type){case 3:a=this.finalize(a,new l.Identifier(this.nextToken().value));break;case 6:case 8:this.context.strict&&this.lookahead.octal&&this.tolerateUnexpectedToken(this.lookahead,q.Messages.StrictOctalLiteral);this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;var b=this.nextToken();var e=this.getTokenRaw(b);a=this.finalize(a,new l.Literal(b.value,e));break;case 1:this.context.isAssignmentTarget=
!1;this.context.isBindingElement=!1;b=this.nextToken();e=this.getTokenRaw(b);a=this.finalize(a,new l.Literal("true"===b.value.toLowerCase(),e));break;case 5:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;b=this.nextToken();e=this.getTokenRaw(b);a=this.finalize(a,new l.Literal(null,e));break;case 10:a=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case "(":this.context.isBindingElement=!1;a=this.inheritCoverGrammar(this.parseGroupExpression);break;case "[":a=
this.inheritCoverGrammar(this.parseArrayInitializer);break;case "{":a=this.inheritCoverGrammar(this.parseObjectInitializer);break;default:a=this.throwUnexpectedToken(this.nextToken())}break;case 4:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;a=this.matchKeyword("function")?this.parseFunctionExpression():this.throwUnexpectedToken(this.nextToken());break;default:a=this.throwUnexpectedToken(this.nextToken())}return a};d.prototype.parseArrayInitializer=function(){var a=this.createNode(),
b=[];for(this.expect("[");!this.match("]");)this.match(",")?(this.nextToken(),b.push(null)):(b.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(","));this.expect("]");return this.finalize(a,new l.ArrayExpression(b))};d.prototype.parsePropertyMethod=function(a){this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;var b=this.context.strict,e=this.context.allowStrictDirective;this.context.allowStrictDirective=a.simple;var r=this.isolateCoverGrammar(this.parseFunctionSourceElements);
this.context.strict&&a.firstRestricted&&this.tolerateUnexpectedToken(a.firstRestricted,a.message);this.context.strict&&a.stricted&&this.tolerateUnexpectedToken(a.stricted,a.message);this.context.strict=b;this.context.allowStrictDirective=e;return r};d.prototype.parsePropertyMethodFunction=function(){var a=this.createNode(),b=this.parseFormalParameters(),e=this.parsePropertyMethod(b);return this.finalize(a,new l.FunctionExpression(null,b.params,e,!1))};d.prototype.parseObjectPropertyKey=function(){var a=
this.createNode(),b=this.nextToken();switch(b.type){case 8:case 6:this.context.strict&&b.octal&&this.tolerateUnexpectedToken(b,q.Messages.StrictOctalLiteral);var e=this.getTokenRaw(b);a=this.finalize(a,new l.Literal(b.value,e));break;case 3:case 1:case 5:case 4:a=this.finalize(a,new l.Identifier(b.value));break;case 7:"["===b.value?(a=this.isolateCoverGrammar(this.parseAssignmentExpression),this.expect("]")):a=this.throwUnexpectedToken(b);break;default:a=this.throwUnexpectedToken(b)}return a};d.prototype.isPropertyKey=
function(a,b){return a.type===h.Syntax.Identifier&&a.name===b||a.type===h.Syntax.Literal&&a.value===b};d.prototype.parseObjectProperty=function(a){var b=this.createNode(),e=this.lookahead,r=null,t=null,g=!1,k=!1,x=!1,v=!1;if(3===e.type){var A=e.value;this.nextToken();g=this.match("[");r=(v=!this.hasLineTerminator&&"async"===A&&!this.match(":")&&!this.match("(")&&!this.match("*")&&!this.match(","))?this.parseObjectPropertyKey():this.finalize(b,new l.Identifier(A))}else this.match("*")?this.nextToken():
(g=this.match("["),r=this.parseObjectPropertyKey());r||this.throwUnexpectedToken(this.lookahead);this.match(":")&&!v?(!g&&this.isPropertyKey(r,"__proto__")&&(a.value&&this.tolerateError(q.Messages.DuplicateProtoProperty),a.value=!0),this.nextToken(),t=this.inheritCoverGrammar(this.parseAssignmentExpression)):this.match("(")?(t=this.parsePropertyMethodFunction(),k=!0):3===e.type?(A=this.finalize(b,new l.Identifier(e.value)),this.match("\x3d")?(this.context.firstCoverInitializedNameError=this.lookahead,
this.nextToken(),x=!0,a=this.isolateCoverGrammar(this.parseAssignmentExpression),t=this.finalize(b,new l.AssignmentPattern(A,a))):(x=!0,t=A)):this.throwUnexpectedToken(this.nextToken());return this.finalize(b,new l.Property("init",r,g,t,k,x))};d.prototype.parseObjectInitializer=function(){var a=this.createNode();this.expect("{");for(var b=[],e={value:!1};!this.match("}");)b.push(this.parseObjectProperty(e)),this.match("}")||this.expectCommaSeparator();this.expect("}");return this.finalize(a,new l.ObjectExpression(b))};
d.prototype.parseTemplateHead=function(){c.assert(this.lookahead.head,"Template literal must start with a template head");var a=this.createNode(),b=this.nextToken();return this.finalize(a,new l.TemplateElement({raw:b.value,cooked:b.cooked},b.tail))};d.prototype.parseTemplateElement=function(){10!==this.lookahead.type&&this.throwUnexpectedToken();var a=this.createNode(),b=this.nextToken();return this.finalize(a,new l.TemplateElement({raw:b.value,cooked:b.cooked},b.tail))};d.prototype.parseTemplateLiteral=
function(){var a=this.createNode(),b=[],e=[],r=this.parseTemplateHead();for(e.push(r);!r.tail;)b.push(this.parseExpression()),r=this.parseTemplateElement(),e.push(r);return this.finalize(a,new l.TemplateLiteral(e,b))};d.prototype.reinterpretExpressionAsPattern=function(a){switch(a.type){case h.Syntax.ArrayExpression:a.type=h.Syntax.ArrayPattern;for(var b=0;b<a.elements.length;b++)null!==a.elements[b]&&this.reinterpretExpressionAsPattern(a.elements[b]);break;case h.Syntax.ObjectExpression:a.type=h.Syntax.ObjectPattern;
for(b=0;b<a.properties.length;b++)this.reinterpretExpressionAsPattern(a.properties[b].value);break;case h.Syntax.AssignmentExpression:a.type=h.Syntax.AssignmentPattern,delete a.operator,this.reinterpretExpressionAsPattern(a.left)}};d.prototype.parseGroupExpression=function(){this.expect("(");if(this.match(")")){this.nextToken();this.match("\x3d\x3e")||this.expect("\x3d\x3e");var a={type:"ArrowParameterPlaceHolder",params:[],async:!1}}else{var b=this.lookahead,e=!1;this.context.isBindingElement=!0;
a=this.inheritCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var r=[];this.context.isAssignmentTarget=!1;for(r.push(a);2!==this.lookahead.type&&this.match(",");){this.nextToken();if(this.match(")")){this.nextToken();for(e=0;e<r.length;e++)this.reinterpretExpressionAsPattern(r[e]);e=!0;a={type:"ArrowParameterPlaceHolder",params:r,async:!1}}else r.push(this.inheritCoverGrammar(this.parseAssignmentExpression));if(e)break}e||(a=this.finalize(this.startNode(b),new l.SequenceExpression(r)))}if(!e){this.expect(")");
if(this.match("\x3d\x3e")&&(a.type===h.Syntax.Identifier&&"yield"===a.name&&(e=!0,a={type:"ArrowParameterPlaceHolder",params:[a],async:!1}),!e)){this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead);if(a.type===h.Syntax.SequenceExpression)for(e=0;e<a.expressions.length;e++)this.reinterpretExpressionAsPattern(a.expressions[e]);else this.reinterpretExpressionAsPattern(a);a={type:"ArrowParameterPlaceHolder",params:a.type===h.Syntax.SequenceExpression?a.expressions:[a],async:!1}}this.context.isBindingElement=
!1}}return a};d.prototype.parseArguments=function(){this.expect("(");var a=[];if(!this.match(")"))for(;;){var b=this.isolateCoverGrammar(this.parseAssignmentExpression);a.push(b);if(this.match(")"))break;this.expectCommaSeparator();if(this.match(")"))break}this.expect(")");return a};d.prototype.isIdentifierName=function(a){return 3===a.type||4===a.type||1===a.type||5===a.type};d.prototype.parseIdentifierName=function(){var a=this.createNode(),b=this.nextToken();this.isIdentifierName(b)||this.throwUnexpectedToken(b);
return this.finalize(a,new l.Identifier(b.value))};d.prototype.parseLeftHandSideExpressionAllowCall=function(){var a=this.lookahead,b=this.context.allowIn;this.context.allowIn=!0;var e;for(e=this.inheritCoverGrammar(this.parsePrimaryExpression);;)if(this.match(".")){this.context.isBindingElement=!1;this.context.isAssignmentTarget=!0;this.expect(".");var r=this.parseIdentifierName();e=this.finalize(this.startNode(a),new l.StaticMemberExpression(e,r))}else if(this.match("("))this.context.isBindingElement=
!1,this.context.isAssignmentTarget=!1,r=this.parseArguments(),e=this.finalize(this.startNode(a),new l.CallExpression(e,r));else if(this.match("["))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("["),r=this.isolateCoverGrammar(this.parseExpression),this.expect("]"),e=this.finalize(this.startNode(a),new l.ComputedMemberExpression(e,r));else break;this.context.allowIn=b;return e};d.prototype.parseLeftHandSideExpression=function(){c.assert(this.context.allowIn,"callee of new expression always allow in keyword.");
for(var a=this.startNode(this.lookahead),b=this.inheritCoverGrammar(this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1;this.context.isAssignmentTarget=!0;this.expect("[");var e=this.isolateCoverGrammar(this.parseExpression);this.expect("]");b=this.finalize(a,new l.ComputedMemberExpression(b,e))}else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),e=this.parseIdentifierName(),b=this.finalize(a,new l.StaticMemberExpression(b,
e));else break;return b};d.prototype.parseUpdateExpression=function(){var a=this.lookahead;if(this.match("++")||this.match("--")){a=this.startNode(a);var b=this.nextToken();var e=this.inheritCoverGrammar(this.parseUnaryExpression);this.context.strict&&e.type===h.Syntax.Identifier&&this.scanner.isRestrictedWord(e.name)&&this.tolerateError(q.Messages.StrictLHSPrefix);this.context.isAssignmentTarget||this.tolerateError(q.Messages.InvalidLHSInAssignment);e=this.finalize(a,new l.UpdateExpression(b.value,
e,!0));this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1}else e=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),this.hasLineTerminator||7!==this.lookahead.type||!this.match("++")&&!this.match("--")||(this.context.strict&&e.type===h.Syntax.Identifier&&this.scanner.isRestrictedWord(e.name)&&this.tolerateError(q.Messages.StrictLHSPostfix),this.context.isAssignmentTarget||this.tolerateError(q.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=
!1,b=this.nextToken().value,e=this.finalize(this.startNode(a),new l.UpdateExpression(b,e,!1)));return e};d.prototype.parseUnaryExpression=function(){if(this.match("+")||this.match("-")||this.match("~")||this.match("!")||this.matchKeyword("delete")||this.matchKeyword("void")||this.matchKeyword("typeof")){var a=this.startNode(this.lookahead),b=this.nextToken();var e=this.inheritCoverGrammar(this.parseUnaryExpression);e=this.finalize(a,new l.UnaryExpression(b.value,e));this.context.strict&&"delete"===
e.operator&&e.argument.type===h.Syntax.Identifier&&this.tolerateError(q.Messages.StrictDelete);this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1}else e=this.parseUpdateExpression();return e};d.prototype.parseExponentiationExpression=function(){var a=this.lookahead,b=this.inheritCoverGrammar(this.parseUnaryExpression);if(b.type!==h.Syntax.UnaryExpression&&this.match("**")){this.nextToken();this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;var e=this.isolateCoverGrammar(this.parseExponentiationExpression);
b=this.finalize(this.startNode(a),new l.BinaryExpression("**",b,e))}return b};d.prototype.binaryPrecedence=function(a){var b=a.value;return 7===a.type?this.operatorPrecedence[b]||0:4===a.type?"instanceof"===b||this.context.allowIn&&"in"===b?7:0:0};d.prototype.parseBinaryExpression=function(){var a=this.lookahead,b=this.inheritCoverGrammar(this.parseExponentiationExpression),e=this.lookahead,r=this.binaryPrecedence(e);if(0<r){this.nextToken();this.context.isAssignmentTarget=!1;this.context.isBindingElement=
!1;a=[a,this.lookahead];var t=this.isolateCoverGrammar(this.parseExponentiationExpression);e=[b,e.value,t];for(var g=[r];;){r=this.binaryPrecedence(this.lookahead);if(0>=r)break;for(;2<e.length&&r<=g[g.length-1];){t=e.pop();var k=e.pop();g.pop();b=e.pop();a.pop();var x=a[a.length-1],v=this.startNode(x,x.lineStart);e.push(this.finalize(v,new l.BinaryExpression(k,b,t)))}e.push(this.nextToken().value);g.push(r);a.push(this.lookahead);e.push(this.isolateCoverGrammar(this.parseExponentiationExpression))}r=
e.length-1;b=e[r];for(k=a.pop();1<r;)x=a.pop(),v=this.startNode(x,k&&k.lineStart),k=e[r-1],b=this.finalize(v,new l.BinaryExpression(k,e[r-2],b)),r-=2,k=x}return b};d.prototype.parseConditionalExpression=function(){var a=this.lookahead,b=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.match("?")){this.nextToken();var e=this.context.allowIn;this.context.allowIn=!0;var r=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=e;this.expect(":");e=this.isolateCoverGrammar(this.parseAssignmentExpression);
b=this.finalize(this.startNode(a),new l.ConditionalExpression(b,r,e));this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1}return b};d.prototype.checkPatternParam=function(a,b){switch(b.type){case h.Syntax.Identifier:this.validateParam(a,b,b.name);break;case h.Syntax.AssignmentPattern:this.checkPatternParam(a,b.left);break;case h.Syntax.ArrayPattern:for(var e=0;e<b.elements.length;e++)null!==b.elements[e]&&this.checkPatternParam(a,b.elements[e]);break;case h.Syntax.ObjectPattern:for(e=
0;e<b.properties.length;e++)this.checkPatternParam(a,b.properties[e].value)}a.simple=a.simple&&b instanceof l.Identifier};d.prototype.reinterpretAsCoverFormalsList=function(a){var b=[a],e={simple:!0,paramSet:{}};switch(a.type){case h.Syntax.Identifier:break;default:return null}for(a=0;a<b.length;++a){var r=b[a];this.checkPatternParam(e,r);b[a]=r}e.message===q.Messages.StrictParamDupe&&this.throwUnexpectedToken(this.context.strict?e.stricted:e.firstRestricted,e.message);return{simple:e.simple,params:b,
stricted:e.stricted,firstRestricted:e.firstRestricted,message:e.message}};d.prototype.parseAssignmentExpression=function(){var a=this.lookahead,b=a;var e=this.parseConditionalExpression();if(this.matchAssign()){this.context.isAssignmentTarget||this.tolerateError(q.Messages.InvalidLHSInAssignment);if(this.context.strict&&e.type===h.Syntax.Identifier){var r=e;this.scanner.isRestrictedWord(r.name)&&this.tolerateUnexpectedToken(b,q.Messages.StrictLHSAssignment);this.scanner.isStrictModeReservedWord(r.name)&&
this.tolerateUnexpectedToken(b,q.Messages.StrictReservedWord)}this.match("\x3d")?this.reinterpretExpressionAsPattern(e):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1);b=this.nextToken();b=b.value;r=this.isolateCoverGrammar(this.parseAssignmentExpression);e=this.finalize(this.startNode(a),new l.AssignmentExpression(b,e,r));this.context.firstCoverInitializedNameError=null}return e};d.prototype.parseExpression=function(){var a=this.lookahead,b=this.isolateCoverGrammar(this.parseAssignmentExpression);
if(this.match(",")){var e=[];for(e.push(b);2!==this.lookahead.type&&this.match(",");)this.nextToken(),e.push(this.isolateCoverGrammar(this.parseAssignmentExpression));b=this.finalize(this.startNode(a),new l.SequenceExpression(e))}return b};d.prototype.parseStatementListItem=function(){this.context.isAssignmentTarget=!0;this.context.isBindingElement=!0;if(4===this.lookahead.type)switch(this.lookahead.value){case "function":var a=this.parseFunctionDeclaration();break;default:a=this.parseStatement()}else a=
this.parseStatement();return a};d.prototype.parseBlock=function(){var a=this.createNode();this.expect("{");for(var b=[];!this.match("}");)b.push(this.parseStatementListItem());this.expect("}");return this.finalize(a,new l.BlockStatement(b))};d.prototype.parseBlockOrObjectInitialiser=function(){var a=this.createNode();this.expect("{");if(3===this.lookahead.type||8===this.lookahead.type){var b=this.scanner.saveState();this.scanner.scanComments();var e=this.scanner.lex();this.scanner.restoreState(b);
if(7===e.type&&":"===e.value){b=[];for(e={value:!1};!this.match("}");)b.push(this.parseObjectProperty(e)),this.match("}")||this.expectCommaSeparator();this.expect("}");return this.finalize(a,new l.ObjectExpression(b))}}for(b=[];!this.match("}");)b.push(this.parseStatementListItem());this.expect("}");return this.finalize(a,new l.BlockStatement(b))};d.prototype.parseLexicalBinding=function(a,b){var e=this.createNode();a=this.parsePattern([],a);this.context.strict&&a.type===h.Syntax.Identifier&&this.scanner.isRestrictedWord(a.name)&&
this.tolerateError(q.Messages.StrictVarName);var r=null;if(!b.inFor&&a.type!==h.Syntax.Identifier||this.match("\x3d"))this.expect("\x3d"),r=this.isolateCoverGrammar(this.parseAssignmentExpression);return this.finalize(e,new l.VariableDeclarator(a,r))};d.prototype.parseBindingList=function(a,b){for(var e=[this.parseLexicalBinding(a,b)];this.match(",");)this.nextToken(),e.push(this.parseLexicalBinding(a,b));return e};d.prototype.parseArrayPattern=function(a,b){var e=this.createNode();this.expect("[");
for(var r=[];!this.match("]");)this.match(",")?(this.nextToken(),r.push(null)):(r.push(this.parsePatternWithDefault(a,b)),this.match("]")||this.expect(","));this.expect("]");return this.finalize(e,new l.ArrayPattern(r))};d.prototype.parsePropertyPattern=function(a,b){var e=this.createNode(),r=!1,t=!1;if(3===this.lookahead.type){var g=this.lookahead;var k=this.parseVariableIdentifier();var x=this.finalize(e,new l.Identifier(g.value));this.match("\x3d")?(a.push(g),t=!0,this.nextToken(),a=this.parseAssignmentExpression(),
g=this.finalize(this.startNode(g),new l.AssignmentPattern(x,a))):this.match(":")?(this.expect(":"),g=this.parsePatternWithDefault(a,b)):(a.push(g),t=!0,g=x)}else r=this.match("["),k=this.parseObjectPropertyKey(),this.expect(":"),g=this.parsePatternWithDefault(a,b);return this.finalize(e,new l.Property("init",k,r,g,!1,t))};d.prototype.parseObjectPattern=function(a,b){var e=this.createNode(),r=[];for(this.expect("{");!this.match("}");)r.push(this.parsePropertyPattern(a,b)),this.match("}")||this.expect(",");
this.expect("}");return this.finalize(e,new l.ObjectPattern(r))};d.prototype.parsePattern=function(a,b){this.match("[")?a=this.parseArrayPattern(a,b):this.match("{")?a=this.parseObjectPattern(a,b):(!this.matchKeyword("let")||"const"!==b&&"let"!==b||this.tolerateUnexpectedToken(this.lookahead,q.Messages.LetInLexicalBinding),a.push(this.lookahead),a=this.parseVariableIdentifier(b));return a};d.prototype.parsePatternWithDefault=function(a,b){var e=this.lookahead;a=this.parsePattern(a,b);this.match("\x3d")&&
(this.nextToken(),b=this.isolateCoverGrammar(this.parseAssignmentExpression),a=this.finalize(this.startNode(e),new l.AssignmentPattern(a,b)));return a};d.prototype.parseVariableIdentifier=function(a){var b=this.createNode(),e=this.nextToken();3!==e.type&&(this.context.strict&&4===e.type&&this.scanner.isStrictModeReservedWord(e.value)?this.tolerateUnexpectedToken(e,q.Messages.StrictReservedWord):(this.context.strict||"let"!==e.value||"var"!==a)&&this.throwUnexpectedToken(e));return this.finalize(b,
new l.Identifier(e.value))};d.prototype.parseVariableDeclaration=function(a){var b=this.createNode(),e=this.parsePattern([],"var");this.context.strict&&e.type===h.Syntax.Identifier&&this.scanner.isRestrictedWord(e.name)&&this.tolerateError(q.Messages.StrictVarName);var r=null;this.match("\x3d")?(this.nextToken(),r=this.isolateCoverGrammar(this.parseAssignmentExpression)):e.type===h.Syntax.Identifier||a.inFor||this.expect("\x3d");return this.finalize(b,new l.VariableDeclarator(e,r))};d.prototype.parseVariableDeclarationList=
function(a){a={inFor:a.inFor};var b=[];for(b.push(this.parseVariableDeclaration(a));this.match(",");)this.nextToken(),b.push(this.parseVariableDeclaration(a));return b};d.prototype.parseVariableStatement=function(){var a=this.createNode();this.expectKeyword("var");var b=this.parseVariableDeclarationList({inFor:!1});this.consumeSemicolon();return this.finalize(a,new l.VariableDeclaration(b,"var"))};d.prototype.parseEmptyStatement=function(){var a=this.createNode();this.expect(";");return this.finalize(a,
new l.EmptyStatement)};d.prototype.parseExpressionStatement=function(){var a=this.createNode(),b=this.parseExpression();this.consumeSemicolon();return this.finalize(a,new l.ExpressionStatement(b))};d.prototype.parseIfClause=function(){this.context.strict&&this.matchKeyword("function")&&this.tolerateError(q.Messages.StrictFunction);return this.parseStatement(!0)};d.prototype.parseIfStatement=function(){var a=this.createNode(),b=null;this.expectKeyword("if");this.expect("(");var e=this.parseExpression();
if(!this.match(")")&&this.config.tolerant){this.tolerateUnexpectedToken(this.nextToken());var r=this.finalize(this.createNode(),new l.EmptyStatement)}else this.expect(")"),r=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),b=this.parseIfClause());return this.finalize(a,new l.IfStatement(e,r,b))};d.prototype.parseForStatement=function(){var a=null,b=null,e=null,r=this.createNode();this.expectKeyword("for");this.expect("(");if(this.match(";"))this.nextToken();else if(this.matchKeyword("var")){a=
this.createNode();this.nextToken();var t=this.context.allowIn;this.context.allowIn=!1;var g=this.parseVariableDeclarationList({inFor:!0});this.context.allowIn=t;if(1===g.length&&this.matchKeyword("in")){var k=g[0];k.init&&(k.id.type===h.Syntax.ArrayPattern||k.id.type===h.Syntax.ObjectPattern||this.context.strict)&&this.tolerateError(q.Messages.ForInOfLoopInitializer,"for-in");a=this.finalize(a,new l.VariableDeclaration(g,"var"));this.nextToken();k=a;var x=this.parseExpression();a=null}else 1===g.length&&
null===g[0].init&&this.matchContextualKeyword("of")?(a=this.finalize(a,new l.VariableDeclaration(g,"var")),this.nextToken(),k=a,x=this.parseAssignmentExpression(),a=null):(a=this.finalize(a,new l.VariableDeclaration(g,"var")),this.expect(";"))}else{g=this.lookahead;var v=this.context.isBindingElement,A=this.context.isAssignmentTarget,n=this.context.firstCoverInitializedNameError;t=this.context.allowIn;this.context.allowIn=!1;a=this.inheritCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=
t;if(this.matchKeyword("in"))this.context.isAssignmentTarget&&a.type!==h.Syntax.AssignmentExpression||this.tolerateError(q.Messages.InvalidLHSInForIn),this.nextToken(),this.reinterpretExpressionAsPattern(a),k=a,x=this.parseExpression(),a=null;else{this.context.isBindingElement=v;this.context.isAssignmentTarget=A;this.context.firstCoverInitializedNameError=n;if(this.match(",")){for(a=[a];this.match(",");)this.nextToken(),a.push(this.isolateCoverGrammar(this.parseAssignmentExpression));a=this.finalize(this.startNode(g),
new l.SequenceExpression(a))}this.expect(";")}}"undefined"===typeof k&&(this.match(";")||(b=this.isolateCoverGrammar(this.parseExpression)),this.expect(";"),this.match(")")||(e=this.isolateCoverGrammar(this.parseExpression)));!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),t=this.finalize(this.createNode(),new l.EmptyStatement)):(this.expect(")"),g=this.context.inIteration,this.context.inIteration=!0,t=this.isolateCoverGrammar(this.parseStatementBlockAllowed),
this.context.inIteration=g);return"undefined"===typeof k?this.finalize(r,new l.ForStatement(a,b,e,t)):this.finalize(r,new l.ForInStatement(k,x,t))};d.prototype.parseContinueStatement=function(){var a=this.createNode();this.expectKeyword("continue");var b=null;if(3===this.lookahead.type&&!this.hasLineTerminator){var e=this.parseVariableIdentifier();b=e;Object.prototype.hasOwnProperty.call(this.context.labelSet,"$"+e.name)||this.throwError(q.Messages.UnknownLabel,e.name)}this.consumeSemicolon();null!==
b||this.context.inIteration||this.throwError(q.Messages.IllegalContinue);return this.finalize(a,new l.ContinueStatement(b))};d.prototype.parseBreakStatement=function(){var a=this.createNode();this.expectKeyword("break");var b=null;3!==this.lookahead.type||this.hasLineTerminator||(b=this.parseVariableIdentifier(),Object.prototype.hasOwnProperty.call(this.context.labelSet,"$"+b.name)||this.throwError(q.Messages.UnknownLabel,b.name));this.consumeSemicolon();null!==b||this.context.inIteration||this.context.inSwitch||
this.throwError(q.Messages.IllegalBreak);return this.finalize(a,new l.BreakStatement(b))};d.prototype.parseReturnStatement=function(){this.context.inFunctionBody||this.tolerateError(q.Messages.IllegalReturn);var a=this.createNode();this.expectKeyword("return");var b=(this.match(";")||this.match("}")||this.hasLineTerminator||2===this.lookahead.type)&&8!==this.lookahead.type&&10!==this.lookahead.type?null:this.parseExpression();this.consumeSemicolon();return this.finalize(a,new l.ReturnStatement(b))};
d.prototype.parseLabelledStatement=function(){var a=this.createNode(),b=this.parseExpression();this.consumeSemicolon();b=new l.ExpressionStatement(b);return this.finalize(a,b)};d.prototype.parseStatementBlockAllowed=function(){return this.parseStatement(!0)};d.prototype.parseStatement=function(a){void 0===a&&(a=!1);switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 9:a=this.parseExpressionStatement();break;case 7:var b=this.lookahead.value;a="{"===b?a?this.parseBlockOrObjectInitialiser():
this.parseObjectInitializer():"("===b?this.parseExpressionStatement():";"===b?this.parseEmptyStatement():this.parseExpressionStatement();break;case 3:a=this.parseLabelledStatement();break;case 4:switch(this.lookahead.value.toLowerCase()){case "break":a=this.parseBreakStatement();break;case "continue":a=this.parseContinueStatement();break;case "for":a=this.parseForStatement();break;case "function":a=this.parseFunctionDeclaration();break;case "if":a=this.parseIfStatement();break;case "return":a=this.parseReturnStatement();
break;case "var":a=this.parseVariableStatement();break;default:a=this.parseExpressionStatement()}break;default:a=this.throwUnexpectedToken(this.lookahead)}return a};d.prototype.parseFunctionSourceElements=function(){var a=this.createNode();this.expect("{");var b=[],e=this.context.labelSet,r=this.context.inIteration,t=this.context.inSwitch,g=this.context.inFunctionBody;this.context.labelSet={};this.context.inIteration=!1;this.context.inSwitch=!1;for(this.context.inFunctionBody=!0;2!==this.lookahead.type&&
!this.match("}");)b.push(this.parseStatementListItem());this.expect("}");this.context.labelSet=e;this.context.inIteration=r;this.context.inSwitch=t;this.context.inFunctionBody=g;return this.finalize(a,new l.BlockStatement(b))};d.prototype.validateParam=function(a,b,e){var r="$"+e;this.context.strict?(this.scanner.isRestrictedWord(e)&&(a.stricted=b,a.message=q.Messages.StrictParamName),Object.prototype.hasOwnProperty.call(a.paramSet,r)&&(a.stricted=b,a.message=q.Messages.StrictParamDupe)):a.firstRestricted||
(this.scanner.isRestrictedWord(e)?(a.firstRestricted=b,a.message=q.Messages.StrictParamName):this.scanner.isStrictModeReservedWord(e)?(a.firstRestricted=b,a.message=q.Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(a.paramSet,r)&&(a.stricted=b,a.message=q.Messages.StrictParamDupe));"function"===typeof Object.defineProperty?Object.defineProperty(a.paramSet,r,{value:!0,enumerable:!0,writable:!0,configurable:!0}):a.paramSet[r]=!0};d.prototype.parseFormalParameter=function(a){for(var b=
[],e=this.parsePatternWithDefault(b),r=0;r<b.length;r++)this.validateParam(a,b[r],b[r].value);a.simple=a.simple&&e instanceof l.Identifier;a.params.push(e)};d.prototype.parseFormalParameters=function(a){a={simple:!0,params:[],firstRestricted:a};this.expect("(");if(!this.match(")"))for(a.paramSet={};2!==this.lookahead.type;){this.parseFormalParameter(a);if(this.match(")"))break;this.expect(",");if(this.match(")"))break}this.expect(")");return{simple:a.simple,params:a.params,stricted:a.stricted,firstRestricted:a.firstRestricted,
message:a.message}};d.prototype.parseFunctionDeclaration=function(a){var b=this.createNode();this.expectKeyword("function");var e=null,r=null;if(!a||!this.match("("))if(a=this.lookahead,e=this.parseVariableIdentifier(),this.context.strict)this.scanner.isRestrictedWord(a.value)&&this.tolerateUnexpectedToken(a,q.Messages.StrictFunctionName);else if(this.scanner.isRestrictedWord(a.value)){r=a;var t=q.Messages.StrictFunctionName}else this.scanner.isStrictModeReservedWord(a.value)&&(r=a,t=q.Messages.StrictReservedWord);
var g=this.parseFormalParameters(r);a=g.params;var k=g.stricted;r=g.firstRestricted;g.message&&(t=g.message);var x=this.context.strict,v=this.context.allowStrictDirective;this.context.allowStrictDirective=g.simple;g=this.parseFunctionSourceElements();this.context.strict&&r&&this.throwUnexpectedToken(r,t);this.context.strict&&k&&this.tolerateUnexpectedToken(k,t);this.context.strict=x;this.context.allowStrictDirective=v;return this.finalize(b,new l.FunctionDeclaration(e,a,g,!1))};d.prototype.parseFunctionExpression=
function(){var a=this.createNode();this.expectKeyword("function");var b=null;if(!this.match("(")){var e=this.lookahead;b=this.parseVariableIdentifier();if(this.context.strict)this.scanner.isRestrictedWord(e.value)&&this.tolerateUnexpectedToken(e,q.Messages.StrictFunctionName);else if(this.scanner.isRestrictedWord(e.value)){var r=e;var t=q.Messages.StrictFunctionName}else this.scanner.isStrictModeReservedWord(e.value)&&(r=e,t=q.Messages.StrictReservedWord)}var g=this.parseFormalParameters(r);e=g.params;
var k=g.stricted;r=g.firstRestricted;g.message&&(t=g.message);var x=this.context.strict,v=this.context.allowStrictDirective;this.context.allowStrictDirective=g.simple;g=this.parseFunctionSourceElements();this.context.strict&&r&&this.throwUnexpectedToken(r,t);this.context.strict&&k&&this.tolerateUnexpectedToken(k,t);this.context.strict=x;this.context.allowStrictDirective=v;return this.finalize(a,new l.FunctionExpression(b,e,g,!1))};d.prototype.qualifiedPropertyName=function(a){switch(a.type){case 3:case 8:case 1:case 5:case 6:case 4:return!0;
case 7:return"["===a.value}return!1};d.prototype.isStartOfExpression=function(){var a=!0,b=this.lookahead.value;switch(this.lookahead.type){case 7:a="["===b||"("===b||"{"===b||"+"===b||"-"===b||"!"===b||"~"===b||"++"===b||"--"===b||"/"===b||"/\x3d"===b;break;case 4:a="class"===b||"delete"===b||"function"===b||"let"===b||"new"===b||"super"===b||"this"===b||"typeof"===b||"void"===b||"yield"===b}return a};d.prototype.parseScript=function(){for(var a=this.createNode(),b=[];2!==this.lookahead.type;)b.push(this.parseStatementListItem());
return this.finalize(a,new l.Script(b))};return d}();y.Parser=B})},"esri/arcade/lib/assert":function(){define(["require","exports"],function(B,y){Object.defineProperty(y,"__esModule",{value:!0});y.assert=void 0;y.assert=function(c,u){if(!c)throw Error("ASSERT: "+u);}})},"esri/arcade/lib/error-handler":function(){define(["require","exports"],function(B,y){Object.defineProperty(y,"__esModule",{value:!0});y.ErrorHandler=void 0;B=function(){function c(){this.errors=[];this.tolerant=!1}c.prototype.recordError=
function(u){this.errors.push(u)};c.prototype.tolerate=function(u){if(this.tolerant)this.recordError(u);else throw u;};c.prototype.constructError=function(u,q){u=Error(u);try{throw u;}catch(l){Object.create&&Object.defineProperty&&(u=Object.create(l),Object.defineProperty(u,"column",{value:q}))}return u};c.prototype.createError=function(u,q,l,m){l=this.constructError("Line "+q+": "+m,l);l.index=u;l.lineNumber=q;l.description=m;return l};c.prototype.throwError=function(u,q,l,m){throw this.createError(u,
q,l,m);};c.prototype.tolerateError=function(u,q,l,m){u=this.createError(u,q,l,m);if(this.tolerant)this.recordError(u);else throw u;};return c}();y.ErrorHandler=B})},"esri/arcade/lib/messages":function(){define(["require","exports"],function(B,y){Object.defineProperty(y,"__esModule",{value:!0});y.Messages=void 0;y.Messages={BadImportCallArity:"Unexpected token",BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",
ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token \x3d",DefaultRestProperty:"Unexpected token \x3d",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",
GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",
InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",
NoCatchOrFinally:"Missing catch or finally after try",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",PropertyAfterRestProperty:"Unexpected token",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",
StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",
StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",
UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"}})},"esri/arcade/lib/nodes":function(){define(["require","exports","./syntax"],function(B,y,c){Object.defineProperty(y,"__esModule",{value:!0});y.VariableDeclarator=y.VariableDeclaration=y.UpdateExpression=y.UnaryExpression=y.TemplateLiteral=y.TemplateElement=y.StaticMemberExpression=y.SequenceExpression=y.Script=y.ReturnStatement=
y.Property=y.ObjectPattern=y.ObjectExpression=y.Module=y.MethodDefinition=y.Literal=y.IfStatement=y.Identifier=y.FunctionExpression=y.FunctionDeclaration=y.ForStatement=y.ForInStatement=y.ExpressionStatement=y.EmptyStatement=y.ContinueStatement=y.ConditionalExpression=y.ComputedMemberExpression=y.CallExpression=y.BreakStatement=y.BlockStatement=y.BinaryExpression=y.AssignmentPattern=y.AssignmentExpression=y.ArrayPattern=y.ArrayExpression=void 0;B=function(){return function(u){this.type=c.Syntax.ArrayExpression;
this.elements=u}}();y.ArrayExpression=B;B=function(){return function(u){this.type=c.Syntax.ArrayPattern;this.elements=u}}();y.ArrayPattern=B;B=function(){return function(u,q,l){this.type=c.Syntax.AssignmentExpression;this.operator=u;this.left=q;this.right=l}}();y.AssignmentExpression=B;B=function(){return function(u,q){this.type=c.Syntax.AssignmentPattern;this.left=u;this.right=q}}();y.AssignmentPattern=B;B=function(){return function(u,q,l){this.type="||"===u||"\x26\x26"===u?c.Syntax.LogicalExpression:
c.Syntax.BinaryExpression;this.operator=u;this.left=q;this.right=l}}();y.BinaryExpression=B;B=function(){return function(u){this.type=c.Syntax.BlockStatement;this.body=u}}();y.BlockStatement=B;B=function(){return function(u){this.type=c.Syntax.BreakStatement;this.label=u}}();y.BreakStatement=B;B=function(){return function(u,q){this.type=c.Syntax.CallExpression;this.callee=u;this.arguments=q}}();y.CallExpression=B;B=function(){return function(u,q){this.type=c.Syntax.MemberExpression;this.computed=
!0;this.object=u;this.property=q}}();y.ComputedMemberExpression=B;B=function(){return function(u,q,l){this.type=c.Syntax.ConditionalExpression;this.test=u;this.consequent=q;this.alternate=l}}();y.ConditionalExpression=B;B=function(){return function(u){this.type=c.Syntax.ContinueStatement;this.label=u}}();y.ContinueStatement=B;B=function(){return function(){this.type=c.Syntax.EmptyStatement}}();y.EmptyStatement=B;B=function(){return function(u){this.type=c.Syntax.ExpressionStatement;this.expression=
u}}();y.ExpressionStatement=B;B=function(){return function(u,q,l){this.type=c.Syntax.ForInStatement;this.left=u;this.right=q;this.body=l;this.each=!1}}();y.ForInStatement=B;B=function(){return function(u,q,l,m){this.type=c.Syntax.ForStatement;this.init=u;this.test=q;this.update=l;this.body=m}}();y.ForStatement=B;B=function(){return function(u,q,l,m){this.type=c.Syntax.FunctionDeclaration;this.id=u;this.params=q;this.body=l;this.generator=m;this.async=this.expression=!1}}();y.FunctionDeclaration=B;
B=function(){return function(u,q,l,m){this.type=c.Syntax.FunctionExpression;this.id=u;this.params=q;this.body=l;this.generator=m;this.async=this.expression=!1}}();y.FunctionExpression=B;B=function(){return function(u){this.type=c.Syntax.Identifier;this.name=u}}();y.Identifier=B;B=function(){return function(u,q,l){this.type=c.Syntax.IfStatement;this.test=u;this.consequent=q;this.alternate=l}}();y.IfStatement=B;B=function(){return function(u,q){this.type=c.Syntax.Literal;this.value=u;this.raw=q}}();
y.Literal=B;B=function(){return function(u,q,l,m,h){this.type=c.Syntax.MethodDefinition;this.key=u;this.computed=q;this.value=l;this.kind=m;this.static=h}}();y.MethodDefinition=B;B=function(){return function(u){this.type=c.Syntax.Program;this.body=u;this.sourceType="module"}}();y.Module=B;B=function(){return function(u){this.type=c.Syntax.ObjectExpression;this.properties=u}}();y.ObjectExpression=B;B=function(){return function(u){this.type=c.Syntax.ObjectPattern;this.properties=u}}();y.ObjectPattern=
B;B=function(){return function(u,q,l,m,h,f){this.type=c.Syntax.Property;this.key=q;this.computed=l;this.value=m;this.kind=u;this.method=h;this.shorthand=f}}();y.Property=B;B=function(){return function(u){this.type=c.Syntax.ReturnStatement;this.argument=u}}();y.ReturnStatement=B;B=function(){return function(u){this.type=c.Syntax.Program;this.body=u;this.sourceType="script"}}();y.Script=B;B=function(){return function(u){this.type=c.Syntax.SequenceExpression;this.expressions=u}}();y.SequenceExpression=
B;B=function(){return function(u,q){this.type=c.Syntax.MemberExpression;this.computed=!1;this.object=u;this.property=q}}();y.StaticMemberExpression=B;B=function(){return function(u,q){this.type=c.Syntax.TemplateElement;this.value=u;this.tail=q}}();y.TemplateElement=B;B=function(){return function(u,q){this.type=c.Syntax.TemplateLiteral;this.quasis=u;this.expressions=q}}();y.TemplateLiteral=B;B=function(){return function(u,q){this.type=c.Syntax.UnaryExpression;this.operator=u;this.argument=q;this.prefix=
!0}}();y.UnaryExpression=B;B=function(){return function(u,q,l){this.type=c.Syntax.UpdateExpression;this.operator=u;this.argument=q;this.prefix=l}}();y.UpdateExpression=B;B=function(){return function(u,q){this.type=c.Syntax.VariableDeclaration;this.declarations=u;this.kind=q}}();y.VariableDeclaration=B;B=function(){return function(u,q){this.type=c.Syntax.VariableDeclarator;this.id=u;this.init=q}}();y.VariableDeclarator=B})},"esri/arcade/lib/scanner":function(){define(["require","exports","./assert",
"./character","./messages"],function(B,y,c,u,q){Object.defineProperty(y,"__esModule",{value:!0});y.Scanner=void 0;B=function(){function l(m,h){this.source=m;this.errorHandler=h;this.isModule=this.trackComment=!1;this.length=m.length;this.index=0;this.lineNumber=0<m.length?1:0;this.lineStart=0;this.curlyStack=[]}l.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart,curlyStack:this.curlyStack.slice()}};l.prototype.restoreState=function(m){this.index=
m.index;this.lineNumber=m.lineNumber;this.lineStart=m.lineStart;this.curlyStack=m.curlyStack};l.prototype.eof=function(){return this.index>=this.length};l.prototype.throwUnexpectedToken=function(m){void 0===m&&(m=q.Messages.UnexpectedTokenIllegal);return this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,m)};l.prototype.tolerateUnexpectedToken=function(m){void 0===m&&(m=q.Messages.UnexpectedTokenIllegal);this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-
this.lineStart+1,m)};l.prototype.skipSingleLineComment=function(m){var h=[];if(this.trackComment){h=[];var f=this.index-m;var d={start:{line:this.lineNumber,column:this.index-this.lineStart-m},end:{}}}for(;!this.eof();){var a=this.source.charCodeAt(this.index);++this.index;if(u.Character.isLineTerminator(a))return this.trackComment&&(d.end={line:this.lineNumber,column:this.index-this.lineStart-1},m={multiLine:!1,slice:[f+m,this.index-1],range:[f,this.index-1],loc:d},h.push(m)),13===a&&10===this.source.charCodeAt(this.index)&&
++this.index,++this.lineNumber,this.lineStart=this.index,h}this.trackComment&&(d.end={line:this.lineNumber,column:this.index-this.lineStart},m={multiLine:!1,slice:[f+m,this.index],range:[f,this.index],loc:d},h.push(m));return h};l.prototype.skipMultiLineComment=function(){var m=[];if(this.trackComment){m=[];var h=this.index-2;var f={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{}}}for(;!this.eof();){var d=this.source.charCodeAt(this.index);if(u.Character.isLineTerminator(d))13===
d&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else{if(42===d&&47===this.source.charCodeAt(this.index+1))return this.index+=2,this.trackComment&&(f.end={line:this.lineNumber,column:this.index-this.lineStart},h={multiLine:!0,slice:[h+2,this.index-2],range:[h,this.index],loc:f},m.push(h)),m;++this.index}}this.trackComment&&(f.end={line:this.lineNumber,column:this.index-this.lineStart},h={multiLine:!0,slice:[h+2,this.index],range:[h,
this.index],loc:f},m.push(h));this.tolerateUnexpectedToken();return m};l.prototype.scanComments=function(){var m;this.trackComment&&(m=[]);for(var h=0===this.index;!this.eof();){var f=this.source.charCodeAt(this.index);if(u.Character.isWhiteSpace(f))++this.index;else if(u.Character.isLineTerminator(f))++this.index,13===f&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,h=!0;else if(47===f)if(f=this.source.charCodeAt(this.index+1),47===f)this.index+=
2,f=this.skipSingleLineComment(2),this.trackComment&&(m=m.concat(f)),h=!0;else if(42===f)this.index+=2,f=this.skipMultiLineComment(),this.trackComment&&(m=m.concat(f));else break;else if(h&&45===f)if(45===this.source.charCodeAt(this.index+1)&&62===this.source.charCodeAt(this.index+2))this.index+=3,f=this.skipSingleLineComment(3),this.trackComment&&(m=m.concat(f));else break;else if(60!==f||this.isModule)break;else if("!--"===this.source.slice(this.index+1,this.index+4))this.index+=4,f=this.skipSingleLineComment(4),
this.trackComment&&(m=m.concat(f));else break}return m};l.prototype.isFutureReservedWord=function(m){return!1};l.prototype.isStrictModeReservedWord=function(m){return!1};l.prototype.isRestrictedWord=function(m){return!1};l.prototype.isKeyword=function(m){m=m.toLowerCase();switch(m.length){case 2:return"if"===m||"in"===m;case 3:return"var"===m||"for"===m;case 4:return"else"===m;case 5:return"break"===m;case 6:return"return"===m;case 8:return"function"===m||"continue"===m;default:return!1}};l.prototype.codePointAt=
function(m){var h=this.source.charCodeAt(m);55296<=h&&56319>=h&&(m=this.source.charCodeAt(m+1),56320<=m&&57343>=m&&(h=1024*(h-55296)+m-56320+65536));return h};l.prototype.scanHexEscape=function(m){m="u"===m?4:2;for(var h=0,f=0;f<m;++f)if(!this.eof()&&u.Character.isHexDigit(this.source.charCodeAt(this.index)))h=16*h+"0123456789abcdef".indexOf(this.source[this.index++].toLowerCase());else return null;return String.fromCharCode(h)};l.prototype.scanUnicodeCodePointEscape=function(){var m=this.source[this.index],
h=0;for("}"===m&&this.throwUnexpectedToken();!this.eof();){m=this.source[this.index++];if(!u.Character.isHexDigit(m.charCodeAt(0)))break;h=16*h+"0123456789abcdef".indexOf(m.toLowerCase())}(1114111<h||"}"!==m)&&this.throwUnexpectedToken();return u.Character.fromCodePoint(h)};l.prototype.getIdentifier=function(){for(var m=this.index++;!this.eof();){var h=this.source.charCodeAt(this.index);if(92===h||55296<=h&&57343>h)return this.index=m,this.getComplexIdentifier();if(u.Character.isIdentifierPart(h))++this.index;
else break}return this.source.slice(m,this.index)};l.prototype.getComplexIdentifier=function(){var m=this.codePointAt(this.index),h=u.Character.fromCodePoint(m);this.index+=h.length;if(92===m){117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken();++this.index;if("{"===this.source[this.index]){++this.index;var f=this.scanUnicodeCodePointEscape()}else f=this.scanHexEscape("u"),null!==f&&"\\"!==f&&u.Character.isIdentifierStart(f.charCodeAt(0))||this.throwUnexpectedToken();h=f}for(;!this.eof();){m=
this.codePointAt(this.index);if(!u.Character.isIdentifierPart(m))break;f=u.Character.fromCodePoint(m);h+=f;this.index+=f.length;92===m&&(h=h.substr(0,h.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,f=this.scanUnicodeCodePointEscape()):(f=this.scanHexEscape("u"),null!==f&&"\\"!==f&&u.Character.isIdentifierPart(f.charCodeAt(0))||this.throwUnexpectedToken()),h+=f)}return h};l.prototype.octalToDecimal=function(m){var h=
"0"!==m,f="01234567".indexOf(m);!this.eof()&&u.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(h=!0,f=8*f+"01234567".indexOf(this.source[this.index++]),0<="0123".indexOf(m)&&!this.eof()&&u.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(f=8*f+"01234567".indexOf(this.source[this.index++])));return{code:f,octal:h}};l.prototype.scanIdentifier=function(){var m=this.index,h=92===this.source.charCodeAt(m)?this.getComplexIdentifier():this.getIdentifier();var f=1===h.length?3:this.isKeyword(h)?
4:"null"===h.toLowerCase()?5:"true"===h.toLowerCase()||"false"===h.toLowerCase()?1:3;if(3!==f&&m+h.length!==this.index){var d=this.index;this.index=m;this.tolerateUnexpectedToken(q.Messages.InvalidEscapedReservedWord);this.index=d}return{type:f,value:h,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}};l.prototype.scanPunctuator=function(){var m=this.index,h=this.source[this.index];switch(h){case "(":case "{":"{"===h&&this.curlyStack.push("{");++this.index;break;case ".":++this.index;
"."===this.source[this.index]&&"."===this.source[this.index+1]&&(this.index+=2,h="...");break;case "}":++this.index;this.curlyStack.pop();break;case ")":case ";":case ",":case "[":case "]":case ":":case "?":case "~":++this.index;break;default:h=this.source.substr(this.index,4),"\x3e\x3e\x3e\x3d"===h?this.index+=4:(h=h.substr(0,3),"\x3d\x3d\x3d"===h||"!\x3d\x3d"===h||"\x3e\x3e\x3e"===h||"\x3c\x3c\x3d"===h||"\x3e\x3e\x3d"===h||"**\x3d"===h?this.index+=3:(h=h.substr(0,2),"\x26\x26"===h||"||"===h||"\x3d\x3d"===
h||"!\x3d"===h||"+\x3d"===h||"-\x3d"===h||"*\x3d"===h||"/\x3d"===h||"++"===h||"--"===h||"\x3c\x3c"===h||"\x3e\x3e"===h||"\x26\x3d"===h||"|\x3d"===h||"^\x3d"===h||"%\x3d"===h||"\x3c\x3d"===h||"\x3e\x3d"===h||"\x3d\x3e"===h||"**"===h?this.index+=2:(h=this.source[this.index],0<="\x3c\x3e\x3d!+-*%\x26|^/".indexOf(h)&&++this.index)))}this.index===m&&this.throwUnexpectedToken();return{type:7,value:h,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}};l.prototype.scanHexLiteral=
function(m){for(var h="";!this.eof()&&u.Character.isHexDigit(this.source.charCodeAt(this.index));)h+=this.source[this.index++];0===h.length&&this.throwUnexpectedToken();u.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:6,value:parseInt("0x"+h,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}};l.prototype.scanBinaryLiteral=function(m){for(var h="",f;!this.eof();){f=this.source[this.index];if("0"!==f&&"1"!==f)break;
h+=this.source[this.index++]}0===h.length&&this.throwUnexpectedToken();this.eof()||(f=this.source.charCodeAt(this.index),(u.Character.isIdentifierStart(f)||u.Character.isDecimalDigit(f))&&this.throwUnexpectedToken());return{type:6,value:parseInt(h,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}};l.prototype.scanOctalLiteral=function(m,h){var f="",d=!1;u.Character.isOctalDigit(m.charCodeAt(0))?(d=!0,f="0"+this.source[this.index++]):++this.index;for(;!this.eof()&&u.Character.isOctalDigit(this.source.charCodeAt(this.index));)f+=
this.source[this.index++];d||0!==f.length||this.throwUnexpectedToken();(u.Character.isIdentifierStart(this.source.charCodeAt(this.index))||u.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken();return{type:6,value:parseInt(f,8),octal:d,lineNumber:this.lineNumber,lineStart:this.lineStart,start:h,end:this.index}};l.prototype.scanNumericLiteral=function(){var m=this.index,h=this.source[m];c.assert(u.Character.isDecimalDigit(h.charCodeAt(0))||"."===h,"Numeric literal must start with a decimal digit or a decimal point");
var f="";if("."!==h){f=this.source[this.index++];h=this.source[this.index];if("0"===f){if("x"===h||"X"===h)return++this.index,this.scanHexLiteral(m);if("b"===h||"B"===h)return++this.index,this.scanBinaryLiteral(m);if("o"===h||"O"===h)return this.scanOctalLiteral(h,m)}for(;u.Character.isDecimalDigit(this.source.charCodeAt(this.index));)f+=this.source[this.index++];h=this.source[this.index]}if("."===h){for(f+=this.source[this.index++];u.Character.isDecimalDigit(this.source.charCodeAt(this.index));)f+=
this.source[this.index++];h=this.source[this.index]}if("e"===h||"E"===h){f+=this.source[this.index++];h=this.source[this.index];if("+"===h||"-"===h)f+=this.source[this.index++];if(u.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;u.Character.isDecimalDigit(this.source.charCodeAt(this.index));)f+=this.source[this.index++];else this.throwUnexpectedToken()}u.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:6,value:parseFloat(f),
lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}};l.prototype.scanStringLiteral=function(){var m=this.index,h=this.source[m];c.assert("'"===h||'"'===h,"String literal must starts with a quote");++this.index;for(var f=!1,d="";!this.eof();){var a=this.source[this.index++];if(a===h){h="";break}if("\\"===a)if((a=this.source[this.index++])&&u.Character.isLineTerminator(a.charCodeAt(0)))++this.lineNumber,"\r"===a&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;
else switch(a){case "u":"{"===this.source[this.index]?(++this.index,d+=this.scanUnicodeCodePointEscape()):(a=this.scanHexEscape(a),null===a&&this.throwUnexpectedToken(),d+=a);break;case "x":a=this.scanHexEscape(a);null===a&&this.throwUnexpectedToken(q.Messages.InvalidHexEscapeSequence);d+=a;break;case "n":d+="\n";break;case "r":d+="\r";break;case "t":d+="\t";break;case "b":d+="\b";break;case "f":d+="\f";break;case "v":d+="\x0B";break;case "8":case "9":d+=a;this.tolerateUnexpectedToken();break;default:a&&
u.Character.isOctalDigit(a.charCodeAt(0))?(a=this.octalToDecimal(a),f=a.octal||f,d+=String.fromCharCode(a.code)):d+=a}else if(u.Character.isLineTerminator(a.charCodeAt(0)))break;else d+=a}""!==h&&(this.index=m,this.throwUnexpectedToken());return{type:8,value:d,octal:f,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}};l.prototype.scanTemplate=function(){var m="",h=!1,f=this.index,d="`"===this.source[f],a=!1,b=2;for(++this.index;!this.eof();){var e=this.source[this.index++];
if("`"===e){b=1;h=a=!0;break}if("$"===e){if("{"===this.source[this.index]){this.curlyStack.push("${");++this.index;h=!0;break}m+=e}else if("\\"===e)if(e=this.source[this.index++],u.Character.isLineTerminator(e.charCodeAt(0)))++this.lineNumber,"\r"===e&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(e){case "n":m+="\n";break;case "r":m+="\r";break;case "t":m+="\t";break;case "u":if("{"===this.source[this.index])++this.index,m+=this.scanUnicodeCodePointEscape();else{var r=
this.index,t=this.scanHexEscape(e);null!==t?m+=t:(this.index=r,m+=e)}break;case "x":e=this.scanHexEscape(e);null===e&&this.throwUnexpectedToken(q.Messages.InvalidHexEscapeSequence);m+=e;break;case "b":m+="\b";break;case "f":m+="\f";break;case "v":m+="\v";break;default:"0"===e?(u.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(q.Messages.TemplateOctalLiteral),m+="\x00"):u.Character.isOctalDigit(e.charCodeAt(0))?this.throwUnexpectedToken(q.Messages.TemplateOctalLiteral):
m+=e}else u.Character.isLineTerminator(e.charCodeAt(0))?(++this.lineNumber,"\r"===e&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,m+="\n"):m+=e}h||this.throwUnexpectedToken();d||this.curlyStack.pop();return{type:10,value:this.source.slice(f+1,this.index-b),cooked:m,head:d,tail:a,lineNumber:this.lineNumber,lineStart:this.lineStart,start:f,end:this.index}};l.prototype.testRegExp=function(m,h){var f=this,d=m;0<=h.indexOf("u")&&(d=d.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,
function(a,b,e){a=parseInt(b||e,16);1114111<a&&f.throwUnexpectedToken(q.Messages.InvalidRegExp);return 65535>=a?String.fromCharCode(a):"\uffff"}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"\uffff"));try{RegExp(d)}catch(a){this.throwUnexpectedToken(q.Messages.InvalidRegExp)}try{return new RegExp(m,h)}catch(a){return null}};l.prototype.scanRegExpBody=function(){var m=this.source[this.index];c.assert("/"===m,"Regular expression literal must start with a slash");for(var h=this.source[this.index++],f=
!1,d=!1;!this.eof();)if(m=this.source[this.index++],h+=m,"\\"===m)m=this.source[this.index++],u.Character.isLineTerminator(m.charCodeAt(0))&&this.throwUnexpectedToken(q.Messages.UnterminatedRegExp),h+=m;else if(u.Character.isLineTerminator(m.charCodeAt(0)))this.throwUnexpectedToken(q.Messages.UnterminatedRegExp);else if(f)"]"===m&&(f=!1);else{if("/"===m){d=!0;break}"["===m&&(f=!0)}d||this.throwUnexpectedToken(q.Messages.UnterminatedRegExp);return h.substr(1,h.length-2)};l.prototype.scanRegExpFlags=
function(){for(var m="";!this.eof();){var h=this.source[this.index];if(!u.Character.isIdentifierPart(h.charCodeAt(0)))break;++this.index;if("\\"!==h||this.eof())m+=h;else{h=this.source[this.index];if("u"===h){++this.index;h=this.index;var f=this.scanHexEscape("u");if(null!==f)for(m+=f;h<this.index;++h);else this.index=h,m+="u"}this.tolerateUnexpectedToken()}}return m};l.prototype.scanRegExp=function(){var m=this.index,h=this.scanRegExpBody(),f=this.scanRegExpFlags(),d=this.testRegExp(h,f);return{type:9,
value:"",pattern:h,flags:f,regex:d,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}};l.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var m=this.source.charCodeAt(this.index);return u.Character.isIdentifierStart(m)?this.scanIdentifier():40===m||41===m||59===m?this.scanPunctuator():39===m||34===m?this.scanStringLiteral():46===m?u.Character.isDecimalDigit(this.source.charCodeAt(this.index+
1))?this.scanNumericLiteral():this.scanPunctuator():u.Character.isDecimalDigit(m)?this.scanNumericLiteral():96===m||125===m&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():55296<=m&&57343>m&&u.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()};return l}();y.Scanner=B})},"esri/arcade/lib/character":function(){define(["require","exports"],function(B,y){Object.defineProperty(y,"__esModule",{value:!0});y.Character=void 0;var c=
/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,
u=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
y.Character={fromCodePoint:function(q){return 65536>q?String.fromCharCode(q):String.fromCharCode(55296+(q-65536>>10))+String.fromCharCode(56320+(q-65536&1023))},isWhiteSpace:function(q){return 32===q||9===q||11===q||12===q||160===q||5760<=q&&0<=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(q)},isLineTerminator:function(q){return 10===q||13===q||8232===q||8233===q},isIdentifierStart:function(q){return 36===q||95===q||65<=q&&90>=q||97<=q&&122>=q||92===q||
128<=q&&c.test(y.Character.fromCodePoint(q))},isIdentifierPart:function(q){return 36===q||95===q||65<=q&&90>=q||97<=q&&122>=q||48<=q&&57>=q||92===q||128<=q&&u.test(y.Character.fromCodePoint(q))},isDecimalDigit:function(q){return 48<=q&&57>=q},isHexDigit:function(q){return 48<=q&&57>=q||65<=q&&70>=q||97<=q&&102>=q},isOctalDigit:function(q){return 48<=q&&55>=q}}})},"esri/arcade/lib/token":function(){define(["require","exports"],function(B,y){Object.defineProperty(y,"__esModule",{value:!0});y.TokenName=
y.Token=void 0;B=y.Token||(y.Token={});B[B.BooleanLiteral=1]="BooleanLiteral";B[B.EOF=2]="EOF";B[B.Identifier=3]="Identifier";B[B.Keyword=4]="Keyword";B[B.NullLiteral=5]="NullLiteral";B[B.NumericLiteral=6]="NumericLiteral";B[B.Punctuator=7]="Punctuator";B[B.StringLiteral=8]="StringLiteral";B[B.RegularExpression=9]="RegularExpression";B[B.Template=10]="Template";y.TokenName={};y.TokenName[1]="Boolean";y.TokenName[2]="\x3cend\x3e";y.TokenName[3]="Identifier";y.TokenName[4]="Keyword";y.TokenName[5]=
"Null";y.TokenName[6]="Numeric";y.TokenName[7]="Punctuator";y.TokenName[8]="String";y.TokenName[9]="RegularExpression";y.TokenName[10]="Template"})},"esri/arcade/lib/tokenizer":function(){define(["require","exports","./error-handler","./scanner","./token"],function(B,y,c,u,q){Object.defineProperty(y,"__esModule",{value:!0});y.Tokenizer=void 0;var l=function(){function m(){this.values=[];this.curly=this.paren=-1}m.prototype.beforeFunctionExpression=function(h){return 0<="( { [ in typeof instanceof new return case delete throw void \x3d +\x3d -\x3d *\x3d **\x3d /\x3d %\x3d \x3c\x3c\x3d \x3e\x3e\x3d \x3e\x3e\x3e\x3d \x26\x3d |\x3d ^\x3d , + - * ** / % ++ -- \x3c\x3c \x3e\x3e \x3e\x3e\x3e \x26 | ^ ! ~ \x26\x26 || ? : \x3d\x3d\x3d \x3d\x3d \x3e\x3d \x3c\x3d \x3c \x3e !\x3d !\x3d\x3d".split(" ").indexOf(h)};
m.prototype.isRegexStart=function(){var h=this.values[this.values.length-1],f=null!==h;switch(h){case "this":case "]":f=!1;break;case ")":h=this.values[this.paren-1];f="if"===h||"while"===h||"for"===h||"with"===h;break;case "}":f=!0,"function"===this.values[this.curly-3]?f=(h=this.values[this.curly-4])?!this.beforeFunctionExpression(h):!1:"function"===this.values[this.curly-4]&&(f=(h=this.values[this.curly-5])?!this.beforeFunctionExpression(h):!0)}return f};m.prototype.push=function(h){7===h.type||
4===h.type?("{"===h.value?this.curly=this.values.length:"("===h.value&&(this.paren=this.values.length),this.values.push(h.value)):this.values.push(null)};return m}();B=function(){function m(h,f){this.errorHandler=new c.ErrorHandler;this.errorHandler.tolerant=f?"boolean"===typeof f.tolerant&&f.tolerant:!1;this.scanner=new u.Scanner(h,this.errorHandler);this.scanner.trackComment=f?"boolean"===typeof f.comment&&f.comment:!1;this.trackRange=f?"boolean"===typeof f.range&&f.range:!1;this.trackLoc=f?"boolean"===
typeof f.loc&&f.loc:!1;this.buffer=[];this.reader=new l}m.prototype.errors=function(){return this.errorHandler.errors};m.prototype.getNextToken=function(){if(0===this.buffer.length){var h=this.scanner.scanComments();if(this.scanner.trackComment)for(var f=0;f<h.length;++f){var d=h[f],a=this.scanner.source.slice(d.slice[0],d.slice[1]);a={type:d.multiLine?"BlockComment":"LineComment",value:a};this.trackRange&&(a.range=d.range);this.trackLoc&&(a.loc=d.loc);this.buffer.push(a)}if(!this.scanner.eof()){h=
void 0;this.trackLoc&&(h={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}});f=void 0;if("/"===this.scanner.source[this.scanner.index]&&this.reader.isRegexStart()){d=this.scanner.saveState();try{f=this.scanner.scanRegExp()}catch(b){this.scanner.restoreState(d),f=this.scanner.lex()}}else f=this.scanner.lex();this.reader.push(f);d={type:q.TokenName[f.type],value:this.scanner.source.slice(f.start,f.end)};this.trackRange&&(d.range=[f.start,f.end]);this.trackLoc&&
(h.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},d.loc=h);9===f.type&&(d.regex={pattern:f.pattern,flags:f.flags});this.buffer.push(d)}}return this.buffer.shift()};return m}();y.Tokenizer=B})},"esri/moment":function(){define(["require","exports","./plugins/moment!"],function(B,y,c){return c})},"esri/plugins/moment":function(){define(["require","exports","dojo/_base/kernel","moment/moment"],function(B,y,c,u){Object.defineProperty(y,"__esModule",{value:!0});var q=
{ar:1,"ar-dz":1,"ar-kw":1,"ar-ly":1,"ar-ma":1,"ar-sa":1,"ar-tn":1,bs:1,ca:1,cs:1,da:1,de:1,"de-at":1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,"en-ie":1,"en-il":1,"en-in":1,"en-nz":1,"en-sg":1,es:1,"es-do":1,"es-mx":1,"es-us":1,et:1,fi:1,fr:1,"fr-ca":1,"fr-ch":1,he:1,hr:1,hu:1,id:1,it:1,"it-ch":1,ja:1,ko:1,lt:1,lv:1,nb:1,nl:1,"nl-be":1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,sk:1,sl:1,sr:1,"sr-cyrl":1,sv:1,th:1,tr:1,uk:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-mo":1,"zh-tw":1};y.load=function(l,m,h){l=c.locale;var f=
l in q;if(!f){var d=l.split("-");1<d.length&&d[0]in q&&(l=d[0],f=!0)}f?m(["moment/locale/"+l],function(){h(u)}):h(u)}})},"moment/moment":function(){(function(B,y){"object"===typeof exports&&"undefined"!==typeof module?module.exports=y():"function"===typeof define&&define.amd?define(y):B.moment=y()})(this,function(){function B(){return Gc.apply(null,arguments)}function y(F){return F instanceof Array||"[object Array]"===Object.prototype.toString.call(F)}function c(F){return null!=F&&"[object Object]"===
Object.prototype.toString.call(F)}function u(F,K){return Object.prototype.hasOwnProperty.call(F,K)}function q(F){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(F).length;for(var K in F)if(u(F,K))return!1;return!0}function l(F){return void 0===F}function m(F){return"number"===typeof F||"[object Number]"===Object.prototype.toString.call(F)}function h(F){return F instanceof Date||"[object Date]"===Object.prototype.toString.call(F)}function f(F,K){var V=[],ia;for(ia=0;ia<F.length;++ia)V.push(K(F[ia],
ia));return V}function d(F,K){for(var V in K)u(K,V)&&(F[V]=K[V]);u(K,"toString")&&(F.toString=K.toString);u(K,"valueOf")&&(F.valueOf=K.valueOf);return F}function a(F,K,V,ia){return Ia(F,K,V,ia,!0).utc()}function b(F){null==F._pf&&(F._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1});return F._pf}function e(F){if(null==
F._isValid){var K=b(F),V=ra.call(K.parsedDateParts,function(ia){return null!=ia});V=!isNaN(F._d.getTime())&&0>K.overflow&&!K.empty&&!K.invalidEra&&!K.invalidMonth&&!K.invalidWeekday&&!K.weekdayMismatch&&!K.nullInput&&!K.invalidFormat&&!K.userInvalidated&&(!K.meridiem||K.meridiem&&V);F._strict&&(V=V&&0===K.charsLeftOver&&0===K.unusedTokens.length&&void 0===K.bigHour);if(null!=Object.isFrozen&&Object.isFrozen(F))return V;F._isValid=V}return F._isValid}function r(F){var K=a(NaN);null!=F?d(b(K),F):b(K).userInvalidated=
!0;return K}function t(F,K){var V;l(K._isAMomentObject)||(F._isAMomentObject=K._isAMomentObject);l(K._i)||(F._i=K._i);l(K._f)||(F._f=K._f);l(K._l)||(F._l=K._l);l(K._strict)||(F._strict=K._strict);l(K._tzm)||(F._tzm=K._tzm);l(K._isUTC)||(F._isUTC=K._isUTC);l(K._offset)||(F._offset=K._offset);l(K._pf)||(F._pf=b(K));l(K._locale)||(F._locale=K._locale);if(0<xa.length)for(V=0;V<xa.length;V++){var ia=xa[V];var Fa=K[ia];l(Fa)||(F[ia]=Fa)}return F}function g(F){t(this,F);this._d=new Date(null!=F._d?F._d.getTime():
NaN);this.isValid()||(this._d=new Date(NaN));!1===Ja&&(Ja=!0,B.updateOffset(this),Ja=!1)}function k(F){return F instanceof g||null!=F&&null!=F._isAMomentObject}function x(F){!1===B.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+F)}function v(F,K){var V=!0;return d(function(){null!=B.deprecationHandler&&B.deprecationHandler(null,F);if(V){var ia=[],Fa,Pa;for(Fa=0;Fa<arguments.length;Fa++){var Ua="";if("object"===typeof arguments[Fa]){Ua+=
"\n["+Fa+"] ";for(Pa in arguments[0])u(arguments[0],Pa)&&(Ua+=Pa+": "+arguments[0][Pa]+", ");Ua=Ua.slice(0,-2)}else Ua=arguments[Fa];ia.push(Ua)}x(F+"\nArguments: "+Array.prototype.slice.call(ia).join("")+"\n"+Error().stack);V=!1}return K.apply(this,arguments)},K)}function A(F,K){null!=B.deprecationHandler&&B.deprecationHandler(F,K);Ha[F]||(x(K),Ha[F]=!0)}function n(F){return"undefined"!==typeof Function&&F instanceof Function||"[object Function]"===Object.prototype.toString.call(F)}function w(F,
K){var V=d({},F),ia;for(ia in K)u(K,ia)&&(c(F[ia])&&c(K[ia])?(V[ia]={},d(V[ia],F[ia]),d(V[ia],K[ia])):null!=K[ia]?V[ia]=K[ia]:delete V[ia]);for(ia in F)u(F,ia)&&!u(K,ia)&&c(F[ia])&&(V[ia]=d({},V[ia]));return V}function p(F){null!=F&&this.set(F)}function D(F,K,V){var ia=""+Math.abs(F);return(0<=F?V?"+":"":"-")+Math.pow(10,Math.max(0,K-ia.length)).toString().substr(1)+ia}function C(F,K,V,ia){var Fa=ia;"string"===typeof ia&&(Fa=function(){return this[ia]()});F&&(Za[F]=Fa);K&&(Za[K[0]]=function(){return D(Fa.apply(this,
arguments),K[1],K[2])});V&&(Za[V]=function(){return this.localeData().ordinal(Fa.apply(this,arguments),F)})}function G(F){return F.match(/\[[\s\S]/)?F.replace(/^\[|\]$/g,""):F.replace(/\\/g,"")}function z(F){var K=F.match(Ka),V;var ia=0;for(V=K.length;ia<V;ia++)K[ia]=Za[K[ia]]?Za[K[ia]]:G(K[ia]);return function(Fa){var Pa="",Ua;for(Ua=0;Ua<V;Ua++)Pa+=n(K[Ua])?K[Ua].call(Fa,F):K[Ua];return Pa}}function E(F,K){if(!F.isValid())return F.localeData().invalidDate();K=H(K,F.localeData());Va[K]=Va[K]||z(K);
return Va[K](F)}function H(F,K){function V(Fa){return K.longDateFormat(Fa)||Fa}var ia=5;for(Ra.lastIndex=0;0<=ia&&Ra.test(F);)F=F.replace(Ra,V),Ra.lastIndex=0,--ia;return F}function I(F,K){var V=F.toLowerCase();Sa[V]=Sa[V+"s"]=Sa[K]=F}function M(F){return"string"===typeof F?Sa[F]||Sa[F.toLowerCase()]:void 0}function T(F){var K={},V,ia;for(ia in F)u(F,ia)&&(V=M(ia))&&(K[V]=F[ia]);return K}function Y(F){var K=[],V;for(V in F)u(F,V)&&K.push({unit:V,priority:Xa[V]});K.sort(function(ia,Fa){return ia.priority-
Fa.priority});return K}function fa(F){return 0===F%4&&0!==F%100||0===F%400}function ca(F){return 0>F?Math.ceil(F)||0:Math.floor(F)}function X(F){F=+F;var K=0;0!==F&&isFinite(F)&&(K=ca(F));return K}function ea(F,K){return function(V){return null!=V?(wa(this,F,V),B.updateOffset(this,K),this):ma(this,F)}}function ma(F,K){return F.isValid()?F._d["get"+(F._isUTC?"UTC":"")+K]():NaN}function wa(F,K,V){if(F.isValid()&&!isNaN(V))if("FullYear"===K&&fa(F.year())&&1===F.month()&&29===F.date())V=X(V),F._d["set"+
(F._isUTC?"UTC":"")+K](V,F.month(),la(V,F.month()));else F._d["set"+(F._isUTC?"UTC":"")+K](V)}function P(F,K,V){tc[F]=n(K)?K:function(ia,Fa){return ia&&V?V:K}}function ja(F,K){return u(tc,F)?tc[F](K._strict,K._locale):new RegExp(ta(F))}function ta(F){return N(F.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(K,V,ia,Fa,Pa){return V||ia||Fa||Pa}))}function N(F){return F.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26")}function S(F,K){var V,ia=K;"string"===typeof F&&(F=[F]);m(K)&&
(ia=function(Fa,Pa){Pa[K]=X(Fa)});for(V=0;V<F.length;V++)uc[F[V]]=ia}function ha(F,K){S(F,function(V,ia,Fa,Pa){Fa._w=Fa._w||{};K(V,Fa._w,Fa,Pa)})}function la(F,K){if(isNaN(F)||isNaN(K))return NaN;var V=(K%12+12)%12;return 1===V?fa(F+(K-V)/12)?29:28:31-V%7%2}function sa(F,K){if(!F.isValid())return F;if("string"===typeof K)if(/^\d+$/.test(K))K=X(K);else if(K=F.localeData().monthsParse(K),!m(K))return F;var V=Math.min(F.date(),la(F.year(),K));F._d["set"+(F._isUTC?"UTC":"")+"Month"](K,V);return F}function ya(F){return null!=
F?(sa(this,F),B.updateOffset(this,!0),this):ma(this,"Month")}function Ga(){function F(Ua,hb){return hb.length-Ua.length}var K=[],V=[],ia=[],Fa;for(Fa=0;12>Fa;Fa++){var Pa=a([2E3,Fa]);K.push(this.monthsShort(Pa,""));V.push(this.months(Pa,""));ia.push(this.months(Pa,""));ia.push(this.monthsShort(Pa,""))}K.sort(F);V.sort(F);ia.sort(F);for(Fa=0;12>Fa;Fa++)K[Fa]=N(K[Fa]),V[Fa]=N(V[Fa]);for(Fa=0;24>Fa;Fa++)ia[Fa]=N(ia[Fa]);this._monthsShortRegex=this._monthsRegex=new RegExp("^("+ia.join("|")+")","i");this._monthsStrictRegex=
new RegExp("^("+V.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+K.join("|")+")","i")}function ba(F,K,V,ia,Fa,Pa,Ua){100>F&&0<=F?(K=new Date(F+400,K,V,ia,Fa,Pa,Ua),isFinite(K.getFullYear())&&K.setFullYear(F)):K=new Date(F,K,V,ia,Fa,Pa,Ua);return K}function da(F){if(100>F&&0<=F){var K=Array.prototype.slice.call(arguments);K[0]=F+400;K=new Date(Date.UTC.apply(null,K));isFinite(K.getUTCFullYear())&&K.setUTCFullYear(F)}else K=new Date(Date.UTC.apply(null,arguments));return K}function oa(F,
K,V){V=7+K-V;return-((7+da(F,0,V).getUTCDay()-K)%7)+V-1}function va(F,K,V,ia,Fa){V=(7+V-ia)%7;ia=oa(F,ia,Fa);ia=1+7*(K-1)+V+ia;0>=ia?(K=F-1,F=(fa(K)?366:365)+ia):ia>(fa(F)?366:365)?(K=F+1,F=ia-(fa(F)?366:365)):(K=F,F=ia);return{year:K,dayOfYear:F}}function pa(F,K,V){var ia=oa(F.year(),K,V);ia=Math.floor((F.dayOfYear()-ia-1)/7)+1;1>ia?(F=F.year()-1,K=ia+Oa(F,K,V)):ia>Oa(F.year(),K,V)?(K=ia-Oa(F.year(),K,V),F=F.year()+1):(F=F.year(),K=ia);return{week:K,year:F}}function Oa(F,K,V){var ia=oa(F,K,V);K=
oa(F+1,K,V);return((fa(F)?366:365)-ia+K)/7}function W(F,K){return F.slice(K,7).concat(F.slice(0,K))}function U(F,K,V){var ia;F=F.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],ia=0;7>ia;++ia){var Fa=a([2E3,1]).day(ia);this._minWeekdaysParse[ia]=this.weekdaysMin(Fa,"").toLocaleLowerCase();this._shortWeekdaysParse[ia]=this.weekdaysShort(Fa,"").toLocaleLowerCase();this._weekdaysParse[ia]=this.weekdays(Fa,"").toLocaleLowerCase()}if(V)K=
"dddd"===K?wb.call(this._weekdaysParse,F):"ddd"===K?wb.call(this._shortWeekdaysParse,F):wb.call(this._minWeekdaysParse,F);else if("dddd"===K){K=wb.call(this._weekdaysParse,F);if(-1!==K)return K;K=wb.call(this._shortWeekdaysParse,F);if(-1!==K)return K;K=wb.call(this._minWeekdaysParse,F)}else if("ddd"===K){K=wb.call(this._shortWeekdaysParse,F);if(-1!==K)return K;K=wb.call(this._weekdaysParse,F);if(-1!==K)return K;K=wb.call(this._minWeekdaysParse,F)}else{K=wb.call(this._minWeekdaysParse,F);if(-1!==K)return K;
K=wb.call(this._weekdaysParse,F);if(-1!==K)return K;K=wb.call(this._shortWeekdaysParse,F)}return-1!==K?K:null}function na(){function F(ib,xb){return xb.length-ib.length}var K=[],V=[],ia=[],Fa=[],Pa;for(Pa=0;7>Pa;Pa++){var Ua=a([2E3,1]).day(Pa);var hb=N(this.weekdaysMin(Ua,""));var pb=N(this.weekdaysShort(Ua,""));Ua=N(this.weekdays(Ua,""));K.push(hb);V.push(pb);ia.push(Ua);Fa.push(hb);Fa.push(pb);Fa.push(Ua)}K.sort(F);V.sort(F);ia.sort(F);Fa.sort(F);this._weekdaysMinRegex=this._weekdaysShortRegex=
this._weekdaysRegex=new RegExp("^("+Fa.join("|")+")","i");this._weekdaysStrictRegex=new RegExp("^("+ia.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+V.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+K.join("|")+")","i")}function qa(){return this.hours()%12||12}function Ea(F,K){C(F,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),K)})}function Ta(F,K){return K._meridiemParse}function Ya(F){return F?F.toLowerCase().replace("_","-"):F}function bb(F){var K=
null;if(void 0===sb[F]&&"undefined"!==typeof module&&module&&module.exports)try{K=gc._abbr;var V=require;V("./locale/"+F);Ma(K)}catch(ia){sb[F]=null}return sb[F]}function Ma(F,K){F&&((K=l(K)?Q(F):J(F,K))?gc=K:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+F+" not found. Did you forget to load it?"));return gc._abbr}function J(F,K){if(null!==K){var V=xc;K.abbr=F;if(null!=sb[F])A("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),
V=sb[F]._config;else if(null!=K.parentLocale)if(null!=sb[K.parentLocale])V=sb[K.parentLocale]._config;else if(V=bb(K.parentLocale),null!=V)V=V._config;else return hc[K.parentLocale]||(hc[K.parentLocale]=[]),hc[K.parentLocale].push({name:F,config:K}),null;sb[F]=new p(w(V,K));hc[F]&&hc[F].forEach(function(ia){J(ia.name,ia.config)});Ma(F);return sb[F]}delete sb[F];return null}function Q(F){var K;F&&F._locale&&F._locale._abbr&&(F=F._locale._abbr);if(!F)return gc;if(!y(F)){if(K=bb(F))return K;F=[F]}a:{K=
0;for(var V,ia,Fa,Pa;K<F.length;){Pa=Ya(F[K]).split("-");V=Pa.length;for(ia=(ia=Ya(F[K+1]))?ia.split("-"):null;0<V;){if(Fa=bb(Pa.slice(0,V).join("-"))){F=Fa;break a}if(Fa=ia&&ia.length>=V){b:{Fa=void 0;var Ua=Math.min(Pa.length,ia.length);for(Fa=0;Fa<Ua;Fa+=1)if(Pa[Fa]!==ia[Fa])break b;Fa=Ua}Fa=Fa>=V-1}if(Fa)break;V--}K++}F=gc}return F}function Z(F){var K;(K=F._a)&&-2===b(F).overflow&&(K=0>K[Mb]||11<K[Mb]?Mb:1>K[Lb]||K[Lb]>la(K[Cb],K[Mb])?Lb:0>K[yb]||24<K[yb]||24===K[yb]&&(0!==K[Hb]||0!==K[Nb]||0!==
K[Ub])?yb:0>K[Hb]||59<K[Hb]?Hb:0>K[Nb]||59<K[Nb]?Nb:0>K[Ub]||999<K[Ub]?Ub:-1,b(F)._overflowDayOfYear&&(K<Cb||K>Lb)&&(K=Lb),b(F)._overflowWeeks&&-1===K&&(K=Hc),b(F)._overflowWeekday&&-1===K&&(K=Ic),b(F).overflow=K);return F}function L(F){var K;var V=F._i;var ia=Jc.exec(V)||Kc.exec(V);if(ia){b(F).iso=!0;V=0;for(K=oc.length;V<K;V++)if(oc[V][1].exec(ia[1])){var Fa=oc[V][0];var Pa=!1!==oc[V][2];break}if(null==Fa)F._isValid=!1;else{if(ia[3]){V=0;for(K=vc.length;V<K;V++)if(vc[V][1].exec(ia[3])){var Ua=(ia[2]||
" ")+vc[V][0];break}if(null==Ua){F._isValid=!1;return}}if(Pa||null==Ua){if(ia[4])if(Lc.exec(ia[4]))var hb="Z";else{F._isValid=!1;return}F._f=Fa+(Ua||"")+(hb||"");Aa(F)}else F._isValid=!1}}else F._isValid=!1}function R(F){var K=Mc.exec(F._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(K){var V=K[3],ia=K[2],Fa=K[5],Pa=K[6],Ua=K[7],hb=parseInt(K[4],10);V=[49>=hb?2E3+hb:999>=hb?1900+hb:hb,yc.indexOf(V),parseInt(ia,10),parseInt(Fa,10),parseInt(Pa,
10)];Ua&&V.push(parseInt(Ua,10));a:{if(Ua=K[1])if(Ua=zc.indexOf(Ua),ia=(new Date(V[0],V[1],V[2])).getDay(),Ua!==ia){b(F).weekdayMismatch=!0;Ua=F._isValid=!1;break a}Ua=!0}Ua&&(F._a=V,(Ua=K[8])?K=Nc[Ua]:K[9]?K=0:(K=parseInt(K[10],10),Ua=K%100,K=(K-Ua)/100*60+Ua),F._tzm=K,F._d=da.apply(null,F._a),F._d.setUTCMinutes(F._d.getUTCMinutes()-F._tzm),b(F).rfc2822=!0)}else F._isValid=!1}function aa(F){var K=Oc.exec(F._i);null!==K?F._d=new Date(+K[1]):(L(F),!1===F._isValid&&(delete F._isValid,R(F),!1===F._isValid&&
(delete F._isValid,F._strict?F._isValid=!1:B.createFromInputFallback(F))))}function ka(F,K,V){return null!=F?F:null!=K?K:V}function ua(F){var K=[];if(!F._d){var V=new Date(B.now());V=F._useUTC?[V.getUTCFullYear(),V.getUTCMonth(),V.getUTCDate()]:[V.getFullYear(),V.getMonth(),V.getDate()];if(F._w&&null==F._a[Lb]&&null==F._a[Mb]){var ia=F._w;if(null!=ia.GG||null!=ia.W||null!=ia.E){var Fa=1;var Pa=4;var Ua=ka(ia.GG,F._a[Cb],pa(Na(),1,4).year);var hb=ka(ia.W,1);var pb=ka(ia.E,1);if(1>pb||7<pb)var ib=!0}else if(Fa=
F._locale._week.dow,Pa=F._locale._week.doy,hb=pa(Na(),Fa,Pa),Ua=ka(ia.gg,F._a[Cb],hb.year),hb=ka(ia.w,hb.week),null!=ia.d){if(pb=ia.d,0>pb||6<pb)ib=!0}else if(null!=ia.e){if(pb=ia.e+Fa,0>ia.e||6<ia.e)ib=!0}else pb=Fa;1>hb||hb>Oa(Ua,Fa,Pa)?b(F)._overflowWeeks=!0:null!=ib?b(F)._overflowWeekday=!0:(ib=va(Ua,hb,pb,Fa,Pa),F._a[Cb]=ib.year,F._dayOfYear=ib.dayOfYear)}if(null!=F._dayOfYear){ib=ka(F._a[Cb],V[Cb]);if(F._dayOfYear>(fa(ib)?366:365)||0===F._dayOfYear)b(F)._overflowDayOfYear=!0;ib=da(ib,0,F._dayOfYear);
F._a[Mb]=ib.getUTCMonth();F._a[Lb]=ib.getUTCDate()}for(ib=0;3>ib&&null==F._a[ib];++ib)F._a[ib]=K[ib]=V[ib];for(;7>ib;ib++)F._a[ib]=K[ib]=null==F._a[ib]?2===ib?1:0:F._a[ib];24===F._a[yb]&&0===F._a[Hb]&&0===F._a[Nb]&&0===F._a[Ub]&&(F._nextDay=!0,F._a[yb]=0);F._d=(F._useUTC?da:ba).apply(null,K);K=F._useUTC?F._d.getUTCDay():F._d.getDay();null!=F._tzm&&F._d.setUTCMinutes(F._d.getUTCMinutes()-F._tzm);F._nextDay&&(F._a[yb]=24);F._w&&"undefined"!==typeof F._w.d&&F._w.d!==K&&(b(F).weekdayMismatch=!0)}}function Aa(F){if(F._f===
B.ISO_8601)L(F);else if(F._f===B.RFC_2822)R(F);else{F._a=[];b(F).empty=!0;var K=""+F._i,V,ia,Fa=K.length,Pa=0;var Ua=H(F._f,F._locale).match(Ka)||[];for(V=0;V<Ua.length;V++){var hb=Ua[V];if(ia=(K.match(ja(hb,F))||[])[0]){var pb=K.substr(0,K.indexOf(ia));0<pb.length&&b(F).unusedInput.push(pb);K=K.slice(K.indexOf(ia)+ia.length);Pa+=ia.length}if(Za[hb]){if(ia?b(F).empty=!1:b(F).unusedTokens.push(hb),pb=F,null!=ia&&u(uc,hb))uc[hb](ia,pb._a,pb,hb)}else F._strict&&!ia&&b(F).unusedTokens.push(hb)}b(F).charsLeftOver=
Fa-Pa;0<K.length&&b(F).unusedInput.push(K);12>=F._a[yb]&&!0===b(F).bigHour&&0<F._a[yb]&&(b(F).bigHour=void 0);b(F).parsedDateParts=F._a.slice(0);b(F).meridiem=F._meridiem;K=F._a;V=yb;Fa=F._locale;Ua=F._a[yb];Pa=F._meridiem;null!=Pa&&(null!=Fa.meridiemHour?Ua=Fa.meridiemHour(Ua,Pa):null!=Fa.isPM&&((Fa=Fa.isPM(Pa))&&12>Ua&&(Ua+=12),Fa||12!==Ua||(Ua=0)));K[V]=Ua;K=b(F).era;null!==K&&(F._a[Cb]=F._locale.erasConvertYear(K,F._a[Cb]));ua(F);Z(F)}}function Ba(F){if(!F._d){var K=T(F._i);F._a=f([K.year,K.month,
void 0===K.day?K.date:K.day,K.hour,K.minute,K.second,K.millisecond],function(V){return V&&parseInt(V,10)});ua(F)}}function Qa(F){var K=F._i,V=F._f;F._locale=F._locale||Q(F._l);if(null===K||void 0===V&&""===K)return r({nullInput:!0});"string"===typeof K&&(F._i=K=F._locale.preparse(K));if(k(K))return new g(Z(K));if(h(K))F._d=K;else if(y(V)){var ia=!1;if(0===F._f.length)b(F).invalidFormat=!0,F._d=new Date(NaN);else{for(K=0;K<F._f.length;K++){V=0;var Fa=!1;var Pa=t({},F);null!=F._useUTC&&(Pa._useUTC=
F._useUTC);Pa._f=F._f[K];Aa(Pa);e(Pa)&&(Fa=!0);V+=b(Pa).charsLeftOver;V+=10*b(Pa).unusedTokens.length;b(Pa).score=V;if(ia)V<Ua&&(Ua=V,hb=Pa);else if(null==Ua||V<Ua||Fa){var Ua=V;var hb=Pa;Fa&&(ia=!0)}}d(F,hb||Pa)}}else V?Aa(F):La(F);e(F)||(F._d=null);return F}function La(F){var K=F._i;l(K)?F._d=new Date(B.now()):h(K)?F._d=new Date(K.valueOf()):"string"===typeof K?aa(F):y(K)?(F._a=f(K.slice(0),function(V){return parseInt(V,10)}),ua(F)):c(K)?Ba(F):m(K)?F._d=new Date(K):B.createFromInputFallback(F)}
function Ia(F,K,V,ia,Fa){var Pa={};if(!0===K||!1===K)ia=K,K=void 0;if(!0===V||!1===V)ia=V,V=void 0;if(c(F)&&q(F)||y(F)&&0===F.length)F=void 0;Pa._isAMomentObject=!0;Pa._useUTC=Pa._isUTC=Fa;Pa._l=V;Pa._i=F;Pa._f=K;Pa._strict=ia;F=new g(Z(Qa(Pa)));F._nextDay&&(F.add(1,"d"),F._nextDay=void 0);return F}function Na(F,K,V,ia){return Ia(F,K,V,ia,!1)}function eb(F,K){var V;1===K.length&&y(K[0])&&(K=K[0]);if(!K.length)return Na();var ia=K[0];for(V=1;V<K.length;++V)if(!K[V].isValid()||K[V][F](ia))ia=K[V];return ia}
function ab(F){var K=T(F);F=K.year||0;var V=K.quarter||0,ia=K.month||0,Fa=K.week||K.isoWeek||0,Pa=K.day||0,Ua=K.hour||0,hb=K.minute||0,pb=K.second||0,ib=K.millisecond||0;a:{var xb,Ac=!1;for(xb in K)if(u(K,xb)&&(-1===wb.call(ic,xb)||null!=K[xb]&&isNaN(K[xb]))){K=!1;break a}for(xb=0;xb<ic.length;++xb)if(K[ic[xb]]){if(Ac){K=!1;break a}parseFloat(K[ic[xb]])!==X(K[ic[xb]])&&(Ac=!0)}K=!0}this._isValid=K;this._milliseconds=+ib+1E3*pb+6E4*hb+36E5*Ua;this._days=+Pa+7*Fa;this._months=+ia+3*V+12*F;this._data=
{};this._locale=Q();this._bubble()}function gb(F){return F instanceof ab}function cb(F){return 0>F?-1*Math.round(-1*F):Math.round(F)}function kb(F,K){C(F,0,0,function(){var V=this.utcOffset(),ia="+";0>V&&(V=-V,ia="-");return ia+D(~~(V/60),2)+K+D(~~V%60,2)})}function ub(F,K){F=(K||"").match(F);if(null===F)return null;F=((F[F.length-1]||[])+"").match(Pc)||["-",0,0];K=+(60*F[1])+X(F[2]);return 0===K?0:"+"===F[0]?K:-K}function ob(F,K){return K._isUTC?(K=K.clone(),F=(k(F)||h(F)?F.valueOf():Na(F).valueOf())-
K.valueOf(),K._d.setTime(K._d.valueOf()+F),B.updateOffset(K,!1),K):Na(F).local()}function db(){return this.isValid()?this._isUTC&&0===this._offset:!1}function jb(F,K){var V=F,ia=null;gb(F)?V={ms:F._milliseconds,d:F._days,M:F._months}:m(F)||!isNaN(+F)?(V={},K?V[K]=+F:V.milliseconds=+F):(ia=Qc.exec(F))?(V="-"===ia[1]?-1:1,V={y:0,d:X(ia[Lb])*V,h:X(ia[yb])*V,m:X(ia[Hb])*V,s:X(ia[Nb])*V,ms:X(cb(1E3*ia[Ub]))*V}):(ia=Rc.exec(F))?(V="-"===ia[1]?-1:1,V={y:nb(ia[2],V),M:nb(ia[3],V),w:nb(ia[4],V),d:nb(ia[5],
V),h:nb(ia[6],V),m:nb(ia[7],V),s:nb(ia[8],V)}):null==V?V={}:"object"===typeof V&&("from"in V||"to"in V)&&(ia=Na(V.from),V=Na(V.to),ia.isValid()&&V.isValid()?(V=ob(V,ia),ia.isBefore(V)?V=Jb(ia,V):(V=Jb(V,ia),V.milliseconds=-V.milliseconds,V.months=-V.months),ia=V):ia={milliseconds:0,months:0},V={},V.ms=ia.milliseconds,V.M=ia.months);V=new ab(V);gb(F)&&u(F,"_locale")&&(V._locale=F._locale);gb(F)&&u(F,"_isValid")&&(V._isValid=F._isValid);return V}function nb(F,K){F=F&&parseFloat(F.replace(",","."));
return(isNaN(F)?0:F)*K}function Jb(F,K){var V={};V.months=K.month()-F.month()+12*(K.year()-F.year());F.clone().add(V.months,"M").isAfter(K)&&--V.months;V.milliseconds=+K-+F.clone().add(V.months,"M");return V}function Ab(F,K){return function(V,ia){if(null!==ia&&!isNaN(+ia)){A(K,"moment()."+K+"(period, number) is deprecated. Please use moment()."+K+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");var Fa=V;V=ia;ia=Fa}V=jb(V,ia);vb(this,V,F);return this}}
function vb(F,K,V,ia){var Fa=K._milliseconds,Pa=cb(K._days);K=cb(K._months);F.isValid()&&(ia=null==ia?!0:ia,K&&sa(F,ma(F,"Month")+K*V),Pa&&wa(F,"Date",ma(F,"Date")+Pa*V),Fa&&F._d.setTime(F._d.valueOf()+Fa*V),ia&&B.updateOffset(F,Pa||K))}function Tb(F){return"string"===typeof F||F instanceof String}function zb(F){var K=y(F),V=!1;K&&(V=0===F.filter(function(ia){return!m(ia)&&Tb(F)}).length);return K&&V}function Db(F,K){if(F.date()<K.date())return-Db(K,F);var V=12*(K.year()-F.year())+(K.month()-F.month()),
ia=F.clone().add(V,"months");0>K-ia?(F=F.clone().add(V-1,"months"),K=(K-ia)/(ia-F)):(F=F.clone().add(V+1,"months"),K=(K-ia)/(F-ia));return-(V+K)||0}function Kb(F){if(void 0===F)return this._locale._abbr;F=Q(F);null!=F&&(this._locale=F);return this}function Qb(){return this._locale}function Gb(F,K){return(F%K+K)%K}function Rb(F,K,V){return 100>F&&0<=F?new Date(F+400,K,V)-Bc:(new Date(F,K,V)).valueOf()}function jc(F,K,V){return 100>F&&0<=F?Date.UTC(F+400,K,V)-Bc:Date.UTC(F,K,V)}function $b(F,K){return K.erasAbbrRegex(F)}
function ac(){var F=[],K=[],V=[],ia=[],Fa,Pa=this.eras();var Ua=0;for(Fa=Pa.length;Ua<Fa;++Ua)K.push(N(Pa[Ua].name)),F.push(N(Pa[Ua].abbr)),V.push(N(Pa[Ua].narrow)),ia.push(N(Pa[Ua].name)),ia.push(N(Pa[Ua].abbr)),ia.push(N(Pa[Ua].narrow));this._erasRegex=new RegExp("^("+ia.join("|")+")","i");this._erasNameRegex=new RegExp("^("+K.join("|")+")","i");this._erasAbbrRegex=new RegExp("^("+F.join("|")+")","i");this._erasNarrowRegex=new RegExp("^("+V.join("|")+")","i")}function Vb(F,K){C(0,[F,F.length],0,
K)}function kc(F,K,V,ia,Fa){if(null==F)return pa(this,ia,Fa).year;var Pa=Oa(F,ia,Fa);K>Pa&&(K=Pa);F=va(F,K,V,ia,Fa);F=da(F.year,0,F.dayOfYear);this.year(F.getUTCFullYear());this.month(F.getUTCMonth());this.date(F.getUTCDate());return this}function bc(F,K){K[Ub]=X(1E3*("0."+F))}function Eb(F){return F}function Wb(F,K,V,ia){var Fa=Q();K=a().set(ia,K);return Fa[V](K,F)}function lc(F,K,V){m(F)&&(K=F,F=void 0);F=F||"";if(null!=K)return Wb(F,K,V,"month");var ia=[];for(K=0;12>K;K++)ia[K]=Wb(F,K,V,"month");
return ia}function cc(F,K,V,ia){"boolean"!==typeof F&&(V=K=F,F=!1);m(K)&&(V=K,K=void 0);K=K||"";var Fa=Q();F=F?Fa._week.dow:0;Fa=[];if(null!=V)return Wb(K,(V+F)%7,ia,"day");for(V=0;7>V;V++)Fa[V]=Wb(K,(V+F)%7,ia,"day");return Fa}function mc(F,K,V,ia){K=jb(K,V);F._milliseconds+=ia*K._milliseconds;F._days+=ia*K._days;F._months+=ia*K._months;return F._bubble()}function pc(F){return 0>F?Math.floor(F):Math.ceil(F)}function Ib(F){return function(){return this.as(F)}}function rb(F){return function(){return this.isValid()?
this._data[F]:NaN}}function O(F,K,V,ia,Fa){return Fa.relativeTime(K||1,!!V,F,ia)}function Ca(F){return(0<F)-(0>F)||+F}function za(){if(!this.isValid())return this.localeData().invalidDate();var F=wc(this._milliseconds)/1E3,K=wc(this._days),V=wc(this._months),ia=this.asSeconds();if(!ia)return"P0D";var Fa=ca(F/60);var Pa=ca(Fa/60);F%=60;Fa%=60;var Ua=ca(V/12);V%=12;var hb=F?F.toFixed(3).replace(/\.?0+$/,""):"";var pb=0>ia?"-":"";var ib=Ca(this._months)!==Ca(ia)?"-":"";var xb=Ca(this._days)!==Ca(ia)?
"-":"";ia=Ca(this._milliseconds)!==Ca(ia)?"-":"";return pb+"P"+(Ua?ib+Ua+"Y":"")+(V?ib+V+"M":"")+(K?xb+K+"D":"")+(Pa||Fa||F?"T":"")+(Pa?ia+Pa+"H":"")+(Fa?ia+Fa+"M":"")+(F?ia+hb+"S":"")}var ra=Array.prototype.some?Array.prototype.some:function(F){var K=Object(this),V=K.length>>>0,ia;for(ia=0;ia<V;ia++)if(ia in K&&F.call(this,K[ia],ia,K))return!0;return!1};var xa=B.momentProperties=[],Ja=!1,Ha={};B.suppressDeprecationWarnings=!1;B.deprecationHandler=null;var Da=Object.keys?Object.keys:function(F){var K,
V=[];for(K in F)u(F,K)&&V.push(K);return V};var Ka=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Ra=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Va={},Za={},Sa={},Xa={},$a=/\d/,fb=/\d\d/,Bb=/\d{3}/,dc=/\d{4}/,Xb=/[+-]?\d{6}/,qb=/\d\d?/,tb=/\d\d\d\d?/,Yb=/\d\d\d\d\d\d?/,Fb=/\d{1,3}/,Zb=/\d{1,4}/,qc=/[+-]?\d{1,6}/,ec=/\d+/,rc=/[+-]?\d+/,Sc=/Z|[+-]\d\d:?\d\d/gi,
sc=/Z|[+-]\d\d(?::?\d\d)?/gi,nc=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;var tc={};var uc={},Cb=0,Mb=1,Lb=2,yb=3,Hb=4,Nb=5,Ub=6,Hc=7,Ic=8;var wb=Array.prototype.indexOf?Array.prototype.indexOf:function(F){var K;for(K=0;K<this.length;++K)if(this[K]===F)return K;return-1};C("M",["MM",2],"Mo",function(){return this.month()+1});C("MMM",0,0,function(F){return this.localeData().monthsShort(this,
F)});C("MMMM",0,0,function(F){return this.localeData().months(this,F)});I("month","M");Xa.month=8;P("M",qb);P("MM",qb,fb);P("MMM",function(F,K){return K.monthsShortRegex(F)});P("MMMM",function(F,K){return K.monthsRegex(F)});S(["M","MM"],function(F,K){K[Mb]=X(F)-1});S(["MMM","MMMM"],function(F,K,V,ia){ia=V._locale.monthsParse(F,ia,V._strict);null!=ia?K[Mb]=ia:b(V).invalidMonth=F});var yc="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Cc=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;C("Y",0,0,function(){var F=
this.year();return 9999>=F?D(F,4):"+"+F});C(0,["YY",2],0,function(){return this.year()%100});C(0,["YYYY",4],0,"year");C(0,["YYYYY",5],0,"year");C(0,["YYYYYY",6,!0],0,"year");I("year","y");Xa.year=1;P("Y",rc);P("YY",qb,fb);P("YYYY",Zb,dc);P("YYYYY",qc,Xb);P("YYYYYY",qc,Xb);S(["YYYYY","YYYYYY"],Cb);S("YYYY",function(F,K){K[Cb]=2===F.length?B.parseTwoDigitYear(F):X(F)});S("YY",function(F,K){K[Cb]=B.parseTwoDigitYear(F)});S("Y",function(F,K){K[Cb]=parseInt(F,10)});B.parseTwoDigitYear=function(F){return X(F)+
(68<X(F)?1900:2E3)};var Dc=ea("FullYear",!0);C("w",["ww",2],"wo","week");C("W",["WW",2],"Wo","isoWeek");I("week","w");I("isoWeek","W");Xa.week=5;Xa.isoWeek=5;P("w",qb);P("ww",qb,fb);P("W",qb);P("WW",qb,fb);ha(["w","ww","W","WW"],function(F,K,V,ia){K[ia.substr(0,1)]=X(F)});C("d",0,"do","day");C("dd",0,0,function(F){return this.localeData().weekdaysMin(this,F)});C("ddd",0,0,function(F){return this.localeData().weekdaysShort(this,F)});C("dddd",0,0,function(F){return this.localeData().weekdays(this,F)});
C("e",0,0,"weekday");C("E",0,0,"isoWeekday");I("day","d");I("weekday","e");I("isoWeekday","E");Xa.day=11;Xa.weekday=11;Xa.isoWeekday=11;P("d",qb);P("e",qb);P("E",qb);P("dd",function(F,K){return K.weekdaysMinRegex(F)});P("ddd",function(F,K){return K.weekdaysShortRegex(F)});P("dddd",function(F,K){return K.weekdaysRegex(F)});ha(["dd","ddd","dddd"],function(F,K,V,ia){ia=V._locale.weekdaysParse(F,ia,V._strict);null!=ia?K.d=ia:b(V).invalidWeekday=F});ha(["d","e","E"],function(F,K,V,ia){K[ia]=X(F)});var zc=
"Sun Mon Tue Wed Thu Fri Sat".split(" ");C("H",["HH",2],0,"hour");C("h",["hh",2],0,qa);C("k",["kk",2],0,function(){return this.hours()||24});C("hmm",0,0,function(){return""+qa.apply(this)+D(this.minutes(),2)});C("hmmss",0,0,function(){return""+qa.apply(this)+D(this.minutes(),2)+D(this.seconds(),2)});C("Hmm",0,0,function(){return""+this.hours()+D(this.minutes(),2)});C("Hmmss",0,0,function(){return""+this.hours()+D(this.minutes(),2)+D(this.seconds(),2)});Ea("a",!0);Ea("A",!1);I("hour","h");Xa.hour=
13;P("a",Ta);P("A",Ta);P("H",qb);P("h",qb);P("k",qb);P("HH",qb,fb);P("hh",qb,fb);P("kk",qb,fb);P("hmm",tb);P("hmmss",Yb);P("Hmm",tb);P("Hmmss",Yb);S(["H","HH"],yb);S(["k","kk"],function(F,K,V){F=X(F);K[yb]=24===F?0:F});S(["a","A"],function(F,K,V){V._isPm=V._locale.isPM(F);V._meridiem=F});S(["h","hh"],function(F,K,V){K[yb]=X(F);b(V).bigHour=!0});S("hmm",function(F,K,V){var ia=F.length-2;K[yb]=X(F.substr(0,ia));K[Hb]=X(F.substr(ia));b(V).bigHour=!0});S("hmmss",function(F,K,V){var ia=F.length-4,Fa=F.length-
2;K[yb]=X(F.substr(0,ia));K[Hb]=X(F.substr(ia,2));K[Nb]=X(F.substr(Fa));b(V).bigHour=!0});S("Hmm",function(F,K,V){V=F.length-2;K[yb]=X(F.substr(0,V));K[Hb]=X(F.substr(V))});S("Hmmss",function(F,K,V){V=F.length-4;var ia=F.length-2;K[yb]=X(F.substr(0,V));K[Hb]=X(F.substr(V,2));K[Nb]=X(F.substr(ia))});var Tc=ea("Hours",!0),xc={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",
LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:"January February March April May June July August September October November December".split(" "),
monthsShort:yc,week:{dow:0,doy:6},weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysShort:zc,meridiemParse:/[ap]\.?m?\.?/i},sb={},hc={},gc,Jc=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Kc=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
Lc=/Z|[+-]\d\d(?::?\d\d)?/,oc=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],vc=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],
["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Oc=/^\/?Date\((-?\d+)/i,Mc=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Nc={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};B.createFromInputFallback=v("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",
function(F){F._d=new Date(F._i+(F._useUTC?" UTC":""))});B.ISO_8601=function(){};B.RFC_2822=function(){};var Uc=v("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var F=Na.apply(null,arguments);return this.isValid()&&F.isValid()?F<this?this:F:r()}),Vc=v("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var F=Na.apply(null,arguments);return this.isValid()&&F.isValid()?F>this?
this:F:r()}),ic="year quarter month week day hour minute second millisecond".split(" ");kb("Z",":");kb("ZZ","");P("Z",sc);P("ZZ",sc);S(["Z","ZZ"],function(F,K,V){V._useUTC=!0;V._tzm=ub(sc,F)});var Pc=/([\+\-]|\d\d)/gi;B.updateOffset=function(){};var Qc=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Rc=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;jb.fn=ab.prototype;jb.invalid=
function(){return jb(NaN)};var Wc=Ab(1,"add"),Xc=Ab(-1,"subtract");B.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";B.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Ec=v("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(F){return void 0===F?this.localeData():this.locale(F)}),Bc=126227808E5;C("N",0,0,"eraAbbr");C("NN",0,0,"eraAbbr");C("NNN",0,0,"eraAbbr");C("NNNN",0,0,"eraName");C("NNNNN",0,0,"eraNarrow");
C("y",["y",1],"yo","eraYear");C("y",["yy",2],0,"eraYear");C("y",["yyy",3],0,"eraYear");C("y",["yyyy",4],0,"eraYear");P("N",$b);P("NN",$b);P("NNN",$b);P("NNNN",function(F,K){return K.erasNameRegex(F)});P("NNNNN",function(F,K){return K.erasNarrowRegex(F)});S(["N","NN","NNN","NNNN","NNNNN"],function(F,K,V,ia){(K=V._locale.erasParse(F,ia,V._strict))?b(V).era=K:b(V).invalidEra=F});P("y",ec);P("yy",ec);P("yyy",ec);P("yyyy",ec);P("yo",function(F,K){return K._eraYearOrdinalRegex||ec});S(["y","yy","yyy","yyyy"],
Cb);S(["yo"],function(F,K,V,ia){var Fa;V._locale._eraYearOrdinalRegex&&(Fa=F.match(V._locale._eraYearOrdinalRegex));K[Cb]=V._locale.eraYearOrdinalParse?V._locale.eraYearOrdinalParse(F,Fa):parseInt(F,10)});C(0,["gg",2],0,function(){return this.weekYear()%100});C(0,["GG",2],0,function(){return this.isoWeekYear()%100});Vb("gggg","weekYear");Vb("ggggg","weekYear");Vb("GGGG","isoWeekYear");Vb("GGGGG","isoWeekYear");I("weekYear","gg");I("isoWeekYear","GG");Xa.weekYear=1;Xa.isoWeekYear=1;P("G",rc);P("g",
rc);P("GG",qb,fb);P("gg",qb,fb);P("GGGG",Zb,dc);P("gggg",Zb,dc);P("GGGGG",qc,Xb);P("ggggg",qc,Xb);ha(["gggg","ggggg","GGGG","GGGGG"],function(F,K,V,ia){K[ia.substr(0,2)]=X(F)});ha(["gg","GG"],function(F,K,V,ia){K[ia]=B.parseTwoDigitYear(F)});C("Q",0,"Qo","quarter");I("quarter","Q");Xa.quarter=7;P("Q",$a);S("Q",function(F,K){K[Mb]=3*(X(F)-1)});C("D",["DD",2],"Do","date");I("date","D");Xa.date=9;P("D",qb);P("DD",qb,fb);P("Do",function(F,K){return F?K._dayOfMonthOrdinalParse||K._ordinalParse:K._dayOfMonthOrdinalParseLenient});
S(["D","DD"],Lb);S("Do",function(F,K){K[Lb]=X(F.match(qb)[0])});var Fc=ea("Date",!0);C("DDD",["DDDD",3],"DDDo","dayOfYear");I("dayOfYear","DDD");Xa.dayOfYear=4;P("DDD",Fb);P("DDDD",Bb);S(["DDD","DDDD"],function(F,K,V){V._dayOfYear=X(F)});C("m",["mm",2],0,"minute");I("minute","m");Xa.minute=14;P("m",qb);P("mm",qb,fb);S(["m","mm"],Hb);var Yc=ea("Minutes",!1);C("s",["ss",2],0,"second");I("second","s");Xa.second=15;P("s",qb);P("ss",qb,fb);S(["s","ss"],Nb);var Zc=ea("Seconds",!1);C("S",0,0,function(){return~~(this.millisecond()/
100)});C(0,["SS",2],0,function(){return~~(this.millisecond()/10)});C(0,["SSS",3],0,"millisecond");C(0,["SSSS",4],0,function(){return 10*this.millisecond()});C(0,["SSSSS",5],0,function(){return 100*this.millisecond()});C(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});C(0,["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});C(0,["SSSSSSSS",8],0,function(){return 1E5*this.millisecond()});C(0,["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});I("millisecond","ms");Xa.millisecond=
16;P("S",Fb,$a);P("SS",Fb,fb);P("SSS",Fb,Bb);var Sb;for(Sb="SSSS";9>=Sb.length;Sb+="S")P(Sb,ec);for(Sb="S";9>=Sb.length;Sb+="S")S(Sb,bc);var $c=ea("Milliseconds",!1);C("z",0,0,"zoneAbbr");C("zz",0,0,"zoneName");var Wa=g.prototype;Wa.add=Wc;Wa.calendar=function(F,K){if(1===arguments.length)if(arguments[0]){var V=arguments[0],ia;if(!(ia=k(V)||h(V)||Tb(V)||m(V)||zb(V))){ia=c(V)&&!q(V);var Fa=!1,Pa="years year y months month M days day d dates date D hours hour h minutes minute m seconds second s milliseconds millisecond ms".split(" "),
Ua;for(Ua=0;Ua<Pa.length;Ua+=1){var hb=Pa[Ua];Fa=Fa||u(V,hb)}ia=ia&&Fa}if(ia||null===V||void 0===V)F=arguments[0],K=void 0;else{V=arguments[0];ia=c(V)&&!q(V);Fa=!1;Pa="sameDay nextDay lastDay nextWeek lastWeek sameElse".split(" ");for(Ua=0;Ua<Pa.length;Ua+=1)hb=Pa[Ua],Fa=Fa||u(V,hb);ia&&Fa&&(K=arguments[0],F=void 0)}}else K=F=void 0;V=F||Na();ia=ob(V,this).startOf("day");ia=B.calendarFormat(this,ia)||"sameElse";Fa=K&&(n(K[ia])?K[ia].call(this,V):K[ia]);return this.format(Fa||this.localeData().calendar(ia,
this,Na(V)))};Wa.clone=function(){return new g(this)};Wa.diff=function(F,K,V){if(!this.isValid())return NaN;F=ob(F,this);if(!F.isValid())return NaN;var ia=6E4*(F.utcOffset()-this.utcOffset());K=M(K);switch(K){case "year":K=Db(this,F)/12;break;case "month":K=Db(this,F);break;case "quarter":K=Db(this,F)/3;break;case "second":K=(this-F)/1E3;break;case "minute":K=(this-F)/6E4;break;case "hour":K=(this-F)/36E5;break;case "day":K=(this-F-ia)/864E5;break;case "week":K=(this-F-ia)/6048E5;break;default:K=
this-F}return V?K:ca(K)};Wa.endOf=function(F){F=M(F);if(void 0===F||"millisecond"===F||!this.isValid())return this;var K=this._isUTC?jc:Rb;switch(F){case "year":var V=K(this.year()+1,0,1)-1;break;case "quarter":V=K(this.year(),this.month()-this.month()%3+3,1)-1;break;case "month":V=K(this.year(),this.month()+1,1)-1;break;case "week":V=K(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case "isoWeek":V=K(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case "day":case "date":V=
K(this.year(),this.month(),this.date()+1)-1;break;case "hour":V=this._d.valueOf();V+=36E5-Gb(V+(this._isUTC?0:6E4*this.utcOffset()),36E5)-1;break;case "minute":V=this._d.valueOf();V+=6E4-Gb(V,6E4)-1;break;case "second":V=this._d.valueOf(),V+=1E3-Gb(V,1E3)-1}this._d.setTime(V);B.updateOffset(this,!0);return this};Wa.format=function(F){F||(F=this.isUtc()?B.defaultFormatUtc:B.defaultFormat);F=E(this,F);return this.localeData().postformat(F)};Wa.from=function(F,K){return this.isValid()&&(k(F)&&F.isValid()||
Na(F).isValid())?jb({to:this,from:F}).locale(this.locale()).humanize(!K):this.localeData().invalidDate()};Wa.fromNow=function(F){return this.from(Na(),F)};Wa.to=function(F,K){return this.isValid()&&(k(F)&&F.isValid()||Na(F).isValid())?jb({from:this,to:F}).locale(this.locale()).humanize(!K):this.localeData().invalidDate()};Wa.toNow=function(F){return this.to(Na(),F)};Wa.get=function(F){F=M(F);return n(this[F])?this[F]():this};Wa.invalidAt=function(){return b(this).overflow};Wa.isAfter=function(F,K){F=
k(F)?F:Na(F);if(!this.isValid()||!F.isValid())return!1;K=M(K)||"millisecond";return"millisecond"===K?this.valueOf()>F.valueOf():F.valueOf()<this.clone().startOf(K).valueOf()};Wa.isBefore=function(F,K){F=k(F)?F:Na(F);if(!this.isValid()||!F.isValid())return!1;K=M(K)||"millisecond";return"millisecond"===K?this.valueOf()<F.valueOf():this.clone().endOf(K).valueOf()<F.valueOf()};Wa.isBetween=function(F,K,V,ia){F=k(F)?F:Na(F);K=k(K)?K:Na(K);if(!(this.isValid()&&F.isValid()&&K.isValid()))return!1;ia=ia||
"()";return("("===ia[0]?this.isAfter(F,V):!this.isBefore(F,V))&&(")"===ia[1]?this.isBefore(K,V):!this.isAfter(K,V))};Wa.isSame=function(F,K){F=k(F)?F:Na(F);if(!this.isValid()||!F.isValid())return!1;K=M(K)||"millisecond";if("millisecond"===K)return this.valueOf()===F.valueOf();F=F.valueOf();return this.clone().startOf(K).valueOf()<=F&&F<=this.clone().endOf(K).valueOf()};Wa.isSameOrAfter=function(F,K){return this.isSame(F,K)||this.isAfter(F,K)};Wa.isSameOrBefore=function(F,K){return this.isSame(F,K)||
this.isBefore(F,K)};Wa.isValid=function(){return e(this)};Wa.lang=Ec;Wa.locale=Kb;Wa.localeData=Qb;Wa.max=Vc;Wa.min=Uc;Wa.parsingFlags=function(){return d({},b(this))};Wa.set=function(F,K){if("object"===typeof F){F=T(F);K=Y(F);var V;for(V=0;V<K.length;V++)this[K[V].unit](F[K[V].unit])}else if(F=M(F),n(this[F]))return this[F](K);return this};Wa.startOf=function(F){F=M(F);if(void 0===F||"millisecond"===F||!this.isValid())return this;var K=this._isUTC?jc:Rb;switch(F){case "year":var V=K(this.year(),
0,1);break;case "quarter":V=K(this.year(),this.month()-this.month()%3,1);break;case "month":V=K(this.year(),this.month(),1);break;case "week":V=K(this.year(),this.month(),this.date()-this.weekday());break;case "isoWeek":V=K(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case "day":case "date":V=K(this.year(),this.month(),this.date());break;case "hour":V=this._d.valueOf();V-=Gb(V+(this._isUTC?0:6E4*this.utcOffset()),36E5);break;case "minute":V=this._d.valueOf();V-=Gb(V,6E4);break;
case "second":V=this._d.valueOf(),V-=Gb(V,1E3)}this._d.setTime(V);B.updateOffset(this,!0);return this};Wa.subtract=Xc;Wa.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]};Wa.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}};Wa.toDate=function(){return new Date(this.valueOf())};Wa.toISOString=function(F){if(!this.isValid())return null;
var K=(F=!0!==F)?this.clone().utc():this;return 0>K.year()||9999<K.year()?E(K,F?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):n(Date.prototype.toISOString)?F?this.toDate().toISOString():(new Date(this.valueOf()+6E4*this.utcOffset())).toISOString().replace("Z",E(K,"Z")):E(K,F?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")};Wa.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var F="moment",K="";this.isLocal()||(F=0===this.utcOffset()?"moment.utc":
"moment.parseZone",K="Z");F="["+F+'("]';var V=0<=this.year()&&9999>=this.year()?"YYYY":"YYYYYY";return this.format(F+V+"-MM-DD[T]HH:mm:ss.SSS"+(K+'[")]'))};"undefined"!==typeof Symbol&&null!=Symbol.for&&(Wa[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment\x3c"+this.format()+"\x3e"});Wa.toJSON=function(){return this.isValid()?this.toISOString():null};Wa.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};Wa.unix=function(){return Math.floor(this.valueOf()/
1E3)};Wa.valueOf=function(){return this._d.valueOf()-6E4*(this._offset||0)};Wa.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}};Wa.eraName=function(){var F,K=this.localeData().eras();var V=0;for(F=K.length;V<F;++V){var ia=this.clone().startOf("day").valueOf();if(K[V].since<=ia&&ia<=K[V].until||K[V].until<=ia&&ia<=K[V].since)return K[V].name}return""};Wa.eraNarrow=function(){var F,K=this.localeData().eras();var V=0;for(F=K.length;V<
F;++V){var ia=this.clone().startOf("day").valueOf();if(K[V].since<=ia&&ia<=K[V].until||K[V].until<=ia&&ia<=K[V].since)return K[V].narrow}return""};Wa.eraAbbr=function(){var F,K=this.localeData().eras();var V=0;for(F=K.length;V<F;++V){var ia=this.clone().startOf("day").valueOf();if(K[V].since<=ia&&ia<=K[V].until||K[V].until<=ia&&ia<=K[V].since)return K[V].abbr}return""};Wa.eraYear=function(){var F,K=this.localeData().eras();var V=0;for(F=K.length;V<F;++V){var ia=K[V].since<=K[V].until?1:-1;var Fa=
this.clone().startOf("day").valueOf();if(K[V].since<=Fa&&Fa<=K[V].until||K[V].until<=Fa&&Fa<=K[V].since)return(this.year()-B(K[V].since).year())*ia+K[V].offset}return this.year()};Wa.year=Dc;Wa.isLeapYear=function(){return fa(this.year())};Wa.weekYear=function(F){return kc.call(this,F,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};Wa.isoWeekYear=function(F){return kc.call(this,F,this.isoWeek(),this.isoWeekday(),1,4)};Wa.quarter=Wa.quarters=function(F){return null==
F?Math.ceil((this.month()+1)/3):this.month(3*(F-1)+this.month()%3)};Wa.month=ya;Wa.daysInMonth=function(){return la(this.year(),this.month())};Wa.week=Wa.weeks=function(F){var K=this.localeData().week(this);return null==F?K:this.add(7*(F-K),"d")};Wa.isoWeek=Wa.isoWeeks=function(F){var K=pa(this,1,4).week;return null==F?K:this.add(7*(F-K),"d")};Wa.weeksInYear=function(){var F=this.localeData()._week;return Oa(this.year(),F.dow,F.doy)};Wa.weeksInWeekYear=function(){var F=this.localeData()._week;return Oa(this.weekYear(),
F.dow,F.doy)};Wa.isoWeeksInYear=function(){return Oa(this.year(),1,4)};Wa.isoWeeksInISOWeekYear=function(){return Oa(this.isoWeekYear(),1,4)};Wa.date=Fc;Wa.day=Wa.days=function(F){if(!this.isValid())return null!=F?this:NaN;var K=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=F){var V=this.localeData();"string"===typeof F&&(isNaN(F)?(F=V.weekdaysParse(F),F="number"===typeof F?F:null):F=parseInt(F,10));return this.add(F-K,"d")}return K};Wa.weekday=function(F){if(!this.isValid())return null!=
F?this:NaN;var K=(this.day()+7-this.localeData()._week.dow)%7;return null==F?K:this.add(F-K,"d")};Wa.isoWeekday=function(F){if(!this.isValid())return null!=F?this:NaN;if(null!=F){var K=this.localeData();F="string"===typeof F?K.weekdaysParse(F)%7||7:isNaN(F)?null:F;return this.day(this.day()%7?F:F-7)}return this.day()||7};Wa.dayOfYear=function(F){var K=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864E5)+1;return null==F?K:this.add(F-K,"d")};Wa.hour=Wa.hours=Tc;Wa.minute=Wa.minutes=
Yc;Wa.second=Wa.seconds=Zc;Wa.millisecond=Wa.milliseconds=$c;Wa.utcOffset=function(F,K,V){var ia=this._offset||0,Fa;if(!this.isValid())return null!=F?this:NaN;if(null!=F){if("string"===typeof F){if(F=ub(sc,F),null===F)return this}else 16>Math.abs(F)&&!V&&(F*=60);!this._isUTC&&K&&(Fa=-Math.round(this._d.getTimezoneOffset()));this._offset=F;this._isUTC=!0;null!=Fa&&this.add(Fa,"m");ia!==F&&(!K||this._changeInProgress?vb(this,jb(F-ia,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,B.updateOffset(this,
!0),this._changeInProgress=null));return this}return this._isUTC?ia:-Math.round(this._d.getTimezoneOffset())};Wa.utc=function(F){return this.utcOffset(0,F)};Wa.local=function(F){this._isUTC&&(this.utcOffset(0,F),this._isUTC=!1,F&&this.subtract(-Math.round(this._d.getTimezoneOffset()),"m"));return this};Wa.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var F=ub(Sc,this._i);null!=F?this.utcOffset(F):this.utcOffset(0,!0)}return this};Wa.hasAlignedHourOffset=
function(F){if(!this.isValid())return!1;F=F?Na(F).utcOffset():0;return 0===(this.utcOffset()-F)%60};Wa.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};Wa.isLocal=function(){return this.isValid()?!this._isUTC:!1};Wa.isUtcOffset=function(){return this.isValid()?this._isUTC:!1};Wa.isUtc=db;Wa.isUTC=db;Wa.zoneAbbr=function(){return this._isUTC?"UTC":""};Wa.zoneName=function(){return this._isUTC?"Coordinated Universal Time":
""};Wa.dates=v("dates accessor is deprecated. Use date instead.",Fc);Wa.months=v("months accessor is deprecated. Use month instead",ya);Wa.years=v("years accessor is deprecated. Use year instead",Dc);Wa.zone=v("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(F,K){return null!=F?("string"!==typeof F&&(F=-F),this.utcOffset(F,K),this):-this.utcOffset()});Wa.isDSTShifted=v("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",
function(){if(!l(this._isDSTShifted))return this._isDSTShifted;var F={};t(F,this);F=Qa(F);if(F._a){var K=F._isUTC?a(F._a):Na(F._a);var V;if(V=this.isValid()){F=F._a;K=K.toArray();V=Math.min(F.length,K.length);var ia=Math.abs(F.length-K.length),Fa=0,Pa;for(Pa=0;Pa<V;Pa++)X(F[Pa])!==X(K[Pa])&&Fa++;V=0<Fa+ia}this._isDSTShifted=V}else this._isDSTShifted=!1;return this._isDSTShifted});var mb=p.prototype;mb.calendar=function(F,K,V){F=this._calendar[F]||this._calendar.sameElse;return n(F)?F.call(K,V):F};
mb.longDateFormat=function(F){var K=this._longDateFormat[F],V=this._longDateFormat[F.toUpperCase()];if(K||!V)return K;this._longDateFormat[F]=V.match(Ka).map(function(ia){return"MMMM"===ia||"MM"===ia||"DD"===ia||"dddd"===ia?ia.slice(1):ia}).join("");return this._longDateFormat[F]};mb.invalidDate=function(){return this._invalidDate};mb.ordinal=function(F){return this._ordinal.replace("%d",F)};mb.preparse=Eb;mb.postformat=Eb;mb.relativeTime=function(F,K,V,ia){var Fa=this._relativeTime[V];return n(Fa)?
Fa(F,K,V,ia):Fa.replace(/%d/i,F)};mb.pastFuture=function(F,K){F=this._relativeTime[0<F?"future":"past"];return n(F)?F(K):F.replace(/%s/i,K)};mb.set=function(F){var K;for(K in F)if(u(F,K)){var V=F[K];n(V)?this[K]=V:this["_"+K]=V}this._config=F;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)};mb.eras=function(F,K){var V=this._eras||Q("en")._eras;F=0;for(K=V.length;F<K;++F){switch(typeof V[F].since){case "string":var ia=
B(V[F].since).startOf("day");V[F].since=ia.valueOf()}switch(typeof V[F].until){case "undefined":V[F].until=Infinity;break;case "string":ia=B(V[F].until).startOf("day").valueOf(),V[F].until=ia.valueOf()}}return V};mb.erasParse=function(F,K,V){var ia,Fa=this.eras();F=F.toUpperCase();var Pa=0;for(ia=Fa.length;Pa<ia;++Pa){var Ua=Fa[Pa].name.toUpperCase();var hb=Fa[Pa].abbr.toUpperCase();var pb=Fa[Pa].narrow.toUpperCase();if(V)switch(K){case "N":case "NN":case "NNN":if(hb===F)return Fa[Pa];break;case "NNNN":if(Ua===
F)return Fa[Pa];break;case "NNNNN":if(pb===F)return Fa[Pa]}else if(0<=[Ua,hb,pb].indexOf(F))return Fa[Pa]}};mb.erasConvertYear=function(F,K){var V=F.since<=F.until?1:-1;return void 0===K?B(F.since).year():B(F.since).year()+(K-F.offset)*V};mb.erasAbbrRegex=function(F){u(this,"_erasAbbrRegex")||ac.call(this);return F?this._erasAbbrRegex:this._erasRegex};mb.erasNameRegex=function(F){u(this,"_erasNameRegex")||ac.call(this);return F?this._erasNameRegex:this._erasRegex};mb.erasNarrowRegex=function(F){u(this,
"_erasNarrowRegex")||ac.call(this);return F?this._erasNarrowRegex:this._erasRegex};mb.months=function(F,K){return F?y(this._months)?this._months[F.month()]:this._months[(this._months.isFormat||Cc).test(K)?"format":"standalone"][F.month()]:y(this._months)?this._months:this._months.standalone};mb.monthsShort=function(F,K){return F?y(this._monthsShort)?this._monthsShort[F.month()]:this._monthsShort[Cc.test(K)?"format":"standalone"][F.month()]:y(this._monthsShort)?this._monthsShort:this._monthsShort.standalone};
mb.monthsParse=function(F,K,V){var ia;if(this._monthsParseExact){a:{F=F.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],ia=0;12>ia;++ia){var Fa=a([2E3,ia]);this._shortMonthsParse[ia]=this.monthsShort(Fa,"").toLocaleLowerCase();this._longMonthsParse[ia]=this.months(Fa,"").toLocaleLowerCase()}if(V)K="MMM"===K?wb.call(this._shortMonthsParse,F):wb.call(this._longMonthsParse,F);else if("MMM"===K){K=wb.call(this._shortMonthsParse,F);
if(-1!==K)break a;K=wb.call(this._longMonthsParse,F)}else{K=wb.call(this._longMonthsParse,F);if(-1!==K)break a;K=wb.call(this._shortMonthsParse,F)}K=-1!==K?K:null}return K}this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(ia=0;12>ia;ia++)if(Fa=a([2E3,ia]),V&&!this._longMonthsParse[ia]&&(this._longMonthsParse[ia]=new RegExp("^"+this.months(Fa,"").replace(".","")+"$","i"),this._shortMonthsParse[ia]=new RegExp("^"+this.monthsShort(Fa,"").replace(".","")+
"$","i")),V||this._monthsParse[ia]||(Fa="^"+this.months(Fa,"")+"|^"+this.monthsShort(Fa,""),this._monthsParse[ia]=new RegExp(Fa.replace(".",""),"i")),V&&"MMMM"===K&&this._longMonthsParse[ia].test(F)||V&&"MMM"===K&&this._shortMonthsParse[ia].test(F)||!V&&this._monthsParse[ia].test(F))return ia};mb.monthsRegex=function(F){if(this._monthsParseExact)return u(this,"_monthsRegex")||Ga.call(this),F?this._monthsStrictRegex:this._monthsRegex;u(this,"_monthsRegex")||(this._monthsRegex=nc);return this._monthsStrictRegex&&
F?this._monthsStrictRegex:this._monthsRegex};mb.monthsShortRegex=function(F){if(this._monthsParseExact)return u(this,"_monthsRegex")||Ga.call(this),F?this._monthsShortStrictRegex:this._monthsShortRegex;u(this,"_monthsShortRegex")||(this._monthsShortRegex=nc);return this._monthsShortStrictRegex&&F?this._monthsShortStrictRegex:this._monthsShortRegex};mb.week=function(F){return pa(F,this._week.dow,this._week.doy).week};mb.firstDayOfYear=function(){return this._week.doy};mb.firstDayOfWeek=function(){return this._week.dow};
mb.weekdays=function(F,K){K=y(this._weekdays)?this._weekdays:this._weekdays[F&&!0!==F&&this._weekdays.isFormat.test(K)?"format":"standalone"];return!0===F?W(K,this._week.dow):F?K[F.day()]:K};mb.weekdaysMin=function(F){return!0===F?W(this._weekdaysMin,this._week.dow):F?this._weekdaysMin[F.day()]:this._weekdaysMin};mb.weekdaysShort=function(F){return!0===F?W(this._weekdaysShort,this._week.dow):F?this._weekdaysShort[F.day()]:this._weekdaysShort};mb.weekdaysParse=function(F,K,V){var ia;if(this._weekdaysParseExact)return U.call(this,
F,K,V);this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(ia=0;7>ia;ia++){var Fa=a([2E3,1]).day(ia);V&&!this._fullWeekdaysParse[ia]&&(this._fullWeekdaysParse[ia]=new RegExp("^"+this.weekdays(Fa,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[ia]=new RegExp("^"+this.weekdaysShort(Fa,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[ia]=new RegExp("^"+this.weekdaysMin(Fa,"").replace(".","\\.?")+"$","i"));
this._weekdaysParse[ia]||(Fa="^"+this.weekdays(Fa,"")+"|^"+this.weekdaysShort(Fa,"")+"|^"+this.weekdaysMin(Fa,""),this._weekdaysParse[ia]=new RegExp(Fa.replace(".",""),"i"));if(V&&"dddd"===K&&this._fullWeekdaysParse[ia].test(F)||V&&"ddd"===K&&this._shortWeekdaysParse[ia].test(F)||V&&"dd"===K&&this._minWeekdaysParse[ia].test(F)||!V&&this._weekdaysParse[ia].test(F))return ia}};mb.weekdaysRegex=function(F){if(this._weekdaysParseExact)return u(this,"_weekdaysRegex")||na.call(this),F?this._weekdaysStrictRegex:
this._weekdaysRegex;u(this,"_weekdaysRegex")||(this._weekdaysRegex=nc);return this._weekdaysStrictRegex&&F?this._weekdaysStrictRegex:this._weekdaysRegex};mb.weekdaysShortRegex=function(F){if(this._weekdaysParseExact)return u(this,"_weekdaysRegex")||na.call(this),F?this._weekdaysShortStrictRegex:this._weekdaysShortRegex;u(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=nc);return this._weekdaysShortStrictRegex&&F?this._weekdaysShortStrictRegex:this._weekdaysShortRegex};mb.weekdaysMinRegex=function(F){if(this._weekdaysParseExact)return u(this,
"_weekdaysRegex")||na.call(this),F?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;u(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=nc);return this._weekdaysMinStrictRegex&&F?this._weekdaysMinStrictRegex:this._weekdaysMinRegex};mb.isPM=function(F){return"p"===(F+"").toLowerCase().charAt(0)};mb.meridiem=function(F,K,V){return 11<F?V?"pm":"PM":V?"am":"AM"};Ma("en",{eras:[{since:"0001-01-01",until:Infinity,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-Infinity,
offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(F){var K=F%10;K=1===X(F%100/10)?"th":1===K?"st":2===K?"nd":3===K?"rd":"th";return F+K}});B.lang=v("moment.lang is deprecated. Use moment.locale instead.",Ma);B.langData=v("moment.langData is deprecated. Use moment.localeData instead.",Q);var Ob=Math.abs,ad=Ib("ms"),bd=Ib("s"),cd=Ib("m"),dd=Ib("h"),ed=Ib("d"),fd=Ib("w"),gd=Ib("M"),hd=Ib("Q"),id=Ib("y"),jd=rb("milliseconds"),kd=rb("seconds"),
ld=rb("minutes"),md=rb("hours"),nd=rb("days"),od=rb("months"),pd=rb("years"),Pb=Math.round,fc={ss:44,s:45,m:45,h:22,d:26,w:null,M:11},wc=Math.abs,lb=ab.prototype;lb.isValid=function(){return this._isValid};lb.abs=function(){var F=this._data;this._milliseconds=Ob(this._milliseconds);this._days=Ob(this._days);this._months=Ob(this._months);F.milliseconds=Ob(F.milliseconds);F.seconds=Ob(F.seconds);F.minutes=Ob(F.minutes);F.hours=Ob(F.hours);F.months=Ob(F.months);F.years=Ob(F.years);return this};lb.add=
function(F,K){return mc(this,F,K,1)};lb.subtract=function(F,K){return mc(this,F,K,-1)};lb.as=function(F){if(!this.isValid())return NaN;var K=this._milliseconds;F=M(F);if("month"===F||"quarter"===F||"year"===F){var V=this._days+K/864E5;V=this._months+4800*V/146097;switch(F){case "month":return V;case "quarter":return V/3;case "year":return V/12}}else switch(V=this._days+Math.round(146097*this._months/4800),F){case "week":return V/7+K/6048E5;case "day":return V+K/864E5;case "hour":return 24*V+K/36E5;
case "minute":return 1440*V+K/6E4;case "second":return 86400*V+K/1E3;case "millisecond":return Math.floor(864E5*V)+K;default:throw Error("Unknown unit "+F);}};lb.asMilliseconds=ad;lb.asSeconds=bd;lb.asMinutes=cd;lb.asHours=dd;lb.asDays=ed;lb.asWeeks=fd;lb.asMonths=gd;lb.asQuarters=hd;lb.asYears=id;lb.valueOf=function(){return this.isValid()?this._milliseconds+864E5*this._days+this._months%12*2592E6+31536E6*X(this._months/12):NaN};lb._bubble=function(){var F=this._milliseconds,K=this._days,V=this._months,
ia=this._data;0<=F&&0<=K&&0<=V||0>=F&&0>=K&&0>=V||(F+=864E5*pc(146097*V/4800+K),V=K=0);ia.milliseconds=F%1E3;F=ca(F/1E3);ia.seconds=F%60;F=ca(F/60);ia.minutes=F%60;F=ca(F/60);ia.hours=F%24;K+=ca(F/24);F=ca(4800*K/146097);V+=F;K-=pc(146097*F/4800);F=ca(V/12);ia.days=K;ia.months=V%12;ia.years=F;return this};lb.clone=function(){return jb(this)};lb.get=function(F){F=M(F);return this.isValid()?this[F+"s"]():NaN};lb.milliseconds=jd;lb.seconds=kd;lb.minutes=ld;lb.hours=md;lb.days=nd;lb.weeks=function(){return ca(this.days()/
7)};lb.months=od;lb.years=pd;lb.humanize=function(F,K){if(!this.isValid())return this.localeData().invalidDate();var V=!1,ia=fc;"object"===typeof F&&(K=F,F=!1);"boolean"===typeof F&&(V=F);"object"===typeof K&&(ia=Object.assign({},fc,K),null!=K.s&&null==K.ss&&(ia.ss=K.s-1));F=this.localeData();K=!V;var Fa=jb(this).abs(),Pa=Pb(Fa.as("s")),Ua=Pb(Fa.as("m")),hb=Pb(Fa.as("h")),pb=Pb(Fa.as("d")),ib=Pb(Fa.as("M")),xb=Pb(Fa.as("w"));Fa=Pb(Fa.as("y"));Pa=Pa<=ia.ss&&["s",Pa]||Pa<ia.s&&["ss",Pa]||1>=Ua&&["m"]||
Ua<ia.m&&["mm",Ua]||1>=hb&&["h"]||hb<ia.h&&["hh",hb]||1>=pb&&["d"]||pb<ia.d&&["dd",pb];null!=ia.w&&(Pa=Pa||1>=xb&&["w"]||xb<ia.w&&["ww",xb]);Pa=Pa||1>=ib&&["M"]||ib<ia.M&&["MM",ib]||1>=Fa&&["y"]||["yy",Fa];Pa[2]=K;Pa[3]=0<+this;Pa[4]=F;K=O.apply(null,Pa);V&&(K=F.pastFuture(+this,K));return F.postformat(K)};lb.toISOString=za;lb.toString=za;lb.toJSON=za;lb.locale=Kb;lb.localeData=Qb;lb.toIsoString=v("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",za);lb.lang=Ec;
C("X",0,0,"unix");C("x",0,0,"valueOf");P("x",rc);P("X",/[+-]?\d+(\.\d{1,3})?/);S("X",function(F,K,V){V._d=new Date(1E3*parseFloat(F))});S("x",function(F,K,V){V._d=new Date(X(F))});B.version="2.29.1";var Gc=Na;B.fn=Wa;B.min=function(){var F=[].slice.call(arguments,0);return eb("isBefore",F)};B.max=function(){var F=[].slice.call(arguments,0);return eb("isAfter",F)};B.now=function(){return Date.now?Date.now():+new Date};B.utc=a;B.unix=function(F){return Na(1E3*F)};B.months=function(F,K){return lc(F,
K,"months")};B.isDate=h;B.locale=Ma;B.invalid=r;B.duration=jb;B.isMoment=k;B.weekdays=function(F,K,V){return cc(F,K,V,"weekdays")};B.parseZone=function(){return Na.apply(null,arguments).parseZone()};B.localeData=Q;B.isDuration=gb;B.monthsShort=function(F,K){return lc(F,K,"monthsShort")};B.weekdaysMin=function(F,K,V){return cc(F,K,V,"weekdaysMin")};B.defineLocale=J;B.updateLocale=function(F,K){if(null!=K){var V=xc;if(null!=sb[F]&&null!=sb[F].parentLocale)sb[F].set(w(sb[F]._config,K));else{var ia=bb(F);
null!=ia&&(V=ia._config);K=w(V,K);null==ia&&(K.abbr=F);K=new p(K);K.parentLocale=sb[F];sb[F]=K}Ma(F)}else null!=sb[F]&&(null!=sb[F].parentLocale?(sb[F]=sb[F].parentLocale,F===Ma()&&Ma(F)):null!=sb[F]&&delete sb[F]);return sb[F]};B.locales=function(){return Da(sb)};B.weekdaysShort=function(F,K,V){return cc(F,K,V,"weekdaysShort")};B.normalizeUnits=M;B.relativeTimeRounding=function(F){return void 0===F?Pb:"function"===typeof F?(Pb=F,!0):!1};B.relativeTimeThreshold=function(F,K){if(void 0===fc[F])return!1;
if(void 0===K)return fc[F];fc[F]=K;"s"===F&&(fc.ss=K-1);return!0};B.calendarFormat=function(F,K){F=F.diff(K,"days",!0);return-6>F?"sameElse":-1>F?"lastWeek":0>F?"lastDay":1>F?"sameDay":2>F?"nextDay":7>F?"nextWeek":"sameElse"};B.prototype=Wa;B.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};return B})},
"esri/arcadeProfiles/visualizationProfile":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../support/expressionUtils ./utils".split(" "),function(B,y,c,u,q,l,m){B=new (B(null,{declaredClass:"esri.arcadeProfiles.VisualizationProfile",initialize:function(h){var f=[];m.hasGeometryOperations(h)&&f.push(l.enableGeometryOperations());return q(f)}}));c("extend-esri")&&y.setObject("arcadeProfiles.visualizationProfile",B,u);return B})},"esri/arcadeProfiles/utils":function(){define(["dojo/_base/lang",
"dojo/_base/array","dojo/has","../kernel","../support/expressionUtils"],function(B,y,c,u,q){var l=/(\/(MapServer|FeatureServer)).*/ig,m={hasGeometryOperations:function(h){return y.some(h,function(f){return f.hasGeometryOperations?f.hasGeometryOperations():q.hasGeometryOperations(f)})},hasFeatureSetOperations:function(h){return y.some(h,function(f){return f.hasFeatureSetOperations?f.hasFeatureSetOperations():q.hasFeatureSetOperations(f)})},hasVariables:function(h,f){return y.some(h,function(d){return y.some(f,
function(a){return d.hasVariable?d.hasVariable(a):q.hasVariable(d,a)})})},isAsync:function(h){return y.some(h,function(f){return f.async})},getServiceUrl:function(h){return l.test(h)?h.replace(l,"$1"):null}};c("extend-esri")&&B.setObject("arcadeProfiles.utils",m,u);return m})},"esri/renderers/SimpleRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer".split(" "),function(B,y,c,u,q,l,m){B=B(m,{declaredClass:"esri.renderer.SimpleRenderer",
constructor:function(h,f){if(h&&!h.declaredClass){var d=h;this.symbol=(h=d.symbol)&&(h.declaredClass?h:l.fromJson(h,f));this.label=d.label;this.description=d.description}else this.symbol=h},getSymbol:function(h){return this.symbol},toJson:function(){var h=y.mixin(this.inherited(arguments),{type:"simple",label:this.label,description:this.description,symbol:this.symbol&&this.symbol.toJson()});return q.fixJson(h)}});c("extend-esri")&&y.setObject("renderer.SimpleRenderer",B,u);return B})},"esri/renderers/UniqueValueRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ../support/expressionUtils".split(" "),
function(B,y,c,u,q,l,m,h,f){B=B(h,{declaredClass:"esri.renderer.UniqueValueRenderer",constructor:function(d,a,b,e,r,t){this.values=[];this._symbols={};this.infos=[];d&&!d.declaredClass?(a=d,b=t&&t.geometryType,this.defaultSymbol=(d=a.defaultSymbol)&&(d.declaredClass?d:m.fromJson(d,t)),this.attributeField=a.field1,this.attributeField2=a.field2,this.attributeField3=a.field3,this.fieldDelimiter=a.fieldDelimiter,this.defaultLabel=a.defaultLabel,this.setValueExpression(a.valueExpression),this.valueExpressionTitle=
a.valueExpressionTitle,this.legendOptions=a.legendOptions,a.backgroundFillSymbol&&(this.backgroundFillSymbol=m.fromJson(a.backgroundFillSymbol,b?{geometryType:"esriGeometryPolygon"}:null)),"esriGeometryPolygon"===b&&this.hasVisualVariables("sizeInfo",!1)&&(t={geometryType:"esriGeometryPoint"}),y.forEach(a.uniqueValueInfos,function(g){this._addValueInfo(g,t)},this)):(this.defaultSymbol=d,this.attributeField=a,this.attributeField2=b,this.attributeField3=e,this.fieldDelimiter=r);this._multiple=!!this.attributeField2},
addValue:function(d,a){d=c.isObject(d)?d:{value:d,symbol:a};this._addValueInfo(d)},removeValue:function(d){var a=y.indexOf(this.values,d);-1!==a&&(this.values.splice(a,1),this._hasNullKeyword=this._evalNullKeyword(this.values),delete this._symbols[d],this.infos.splice(a,1))},getUniqueValueInfo:function(d){var a=this.attributeField,b=d.attributes;if(this.valueExpression)a=this._getDataValue(d,this._uvInfo,null,this._cache.uvInfo),a=this._normalizeNullValue(a);else if(this._multiple){d=this.attributeField2;
var e=this.attributeField3,r=[];a&&r.push(this._normalizeNullValue(b[a]));d&&r.push(this._normalizeNullValue(b[d]));e&&r.push(this._normalizeNullValue(b[e]));a=r.join(this.fieldDelimiter||"")}else a=c.isFunction(a)?a(d):b[a],a=this._normalizeNullValue(a);return this._symbols[a]},setValueExpression:function(d){this.valueExpression=d;this._uvInfo={valueExpression:d};this._cache.uvInfo=this._createCache(this._uvInfo,!0)},getFieldsUsedInExpressions:function(){var d=this.inherited(arguments);this.valueExpression&&
(d=d.concat(f.extractFieldNames(this.valueExpression)));d.sort();return y.filter(d,function(a,b){return 0===b||d[b-1]!==a})},getSymbol:function(d){return(d=this.getUniqueValueInfo(d))&&d.symbol||this.defaultSymbol},_addValueInfo:function(d,a){var b=d.value;this.values.push(b);this._hasNullKeyword=this._evalNullKeyword(this.values);this.infos.push(d);var e=d.symbol;e&&!e.declaredClass&&(d.symbol=m.fromJson(e,a));this._symbols[b]=d},_nullCode:"\x3cNull\x3e",_normalizeNullValue:function(d){return this._hasNullKeyword&&
null==d?this._nullCode:d},_evalNullKeyword:function(d){var a=this.fieldDelimiter||"",b=new RegExp("(^|"+a+")("+this._nullCode+")("+a+"|$)");return y.some(d,function(e){return b.test(e)})},toJson:function(){var d=l.fixJson;var a={type:"uniqueValue",field1:this.attributeField,field2:this.attributeField2,field3:this.attributeField3,fieldDelimiter:this.fieldDelimiter,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:c.clone(this.legendOptions),defaultSymbol:this.defaultSymbol&&
this.defaultSymbol.toJson(),defaultLabel:this.defaultLabel,uniqueValueInfos:y.map(this.infos||[],function(b){b=c.mixin({},b);b.symbol=b.symbol&&b.symbol.toJson();b.value+="";return d(b)})};this.backgroundFillSymbol&&(a.backgroundFillSymbol=this.backgroundFillSymbol.toJson());a=c.mixin(this.inherited(arguments),a);return d(a)}});u("extend-esri")&&c.setObject("renderer.UniqueValueRenderer",B,q);return B})},"esri/renderers/ClassBreaksRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ../support/expressionUtils".split(" "),
function(B,y,c,u,q,l,m,h,f){B=B(h,{declaredClass:"esri.renderer.ClassBreaksRenderer",constructor:function(d,a,b){this.breaks=[];this._symbols={};this.infos=[];this.isMaxInclusive=!0;if(d&&!d.declaredClass){var e=d;a=b&&b.geometryType;this.attributeField=e.field;this.setValueExpression(e.valueExpression);this.valueExpressionTitle=e.valueExpressionTitle;this.legendOptions=e.legendOptions;this.defaultSymbol=(d=e.defaultSymbol)&&(d.declaredClass?d:m.fromJson(d,b));this.backgroundFillSymbol=(d=e.backgroundFillSymbol)&&
(d.declaredClass?d:m.fromJson(d,a?{geometryType:"esriGeometryPolygon"}:null));this._copy(["defaultLabel","classificationMethod:rest","normalizationType:rest","normalizationField","normalizationTotal"],e,this);var r=e.minValue;(d=e.classBreakInfos)&&d[0]&&l.isDefined(d[0].classMaxValue)&&y.forEach(d,function(t){var g=t.classMaxValue;t.minValue=r;r=t.maxValue=g},this);"esriGeometryPolygon"===a&&(this.hasVisualVariables("sizeInfo",!1)||m.isPointSymbol(m.getFirstSupportedSymbol(y.map(d,function(t){return t.symbol}))))&&
(b={geometryType:"esriGeometryPoint"});y.forEach(d,function(t){this._addBreakInfo(t,b)},this)}else this.defaultSymbol=d,this.attributeField=a},addBreak:function(d,a,b){d=c.isObject(d)?d:{minValue:d,maxValue:a,symbol:b};this._addBreakInfo(d)},removeBreak:function(d,a){var b=this.breaks,e,r=b.length,t=this._symbols;for(e=0;e<r;e++){var g=b[e];if(g[0]==d&&g[1]==a){b.splice(e,1);delete t[d+"-"+a];this.infos.splice(e,1);break}}},clearBreaks:function(){this.breaks=[];this._symbols={};this.infos=[]},getBreakIndex:function(d){var a=
this.attributeField,b=d.attributes,e=this.breaks,r=e.length,t=this.isMaxInclusive;if(this.valueExpression)d=this._getDataValue(d,this._cbInfo,null,this._cache.cbInfo);else if(c.isFunction(a))d=a(d);else if(d=parseFloat(b[a]),a=this.normalizationType,a){var g=parseFloat(this.normalizationTotal);b=parseFloat(b[this.normalizationField]);if("log"===a)d=Math.log(d)*Math.LOG10E;else if("percent-of-total"===a&&!isNaN(g))d=d/g*100;else if("field"===a){if(isNaN(d)||isNaN(b))return-1;d/=b}}if(null!=d&&!isNaN(d)&&
"number"===typeof d)for(b=0;b<r;b++)if(a=e[b],a[0]<=d&&(t?d<=a[1]:d<a[1]))return b;return-1},getBreakInfo:function(d){d=this.getBreakIndex(d);return-1!==d?this.infos[d]:null},getSymbol:function(d){return(d=this.breaks[this.getBreakIndex(d)])?this._symbols[d[0]+"-"+d[1]]:this.defaultSymbol},setMaxInclusive:function(d){this.isMaxInclusive=d},setValueExpression:function(d){this.valueExpression=d;this._cbInfo={valueExpression:d};this._cache.cbInfo=this._createCache(this._cbInfo)},getFieldsUsedInExpressions:function(){var d=
this.inherited(arguments);this.valueExpression&&(d=d.concat(f.extractFieldNames(this.valueExpression)));d.sort();return y.filter(d,function(a,b){return 0===b||d[b-1]!==a})},isContinuousRenderer:function(){var d=!1;if(this.infos&&1===this.infos.length){var a=this.attributeField,b=this.normalizationField,e=this.valueExpression;d=this.getVisualVariablesForType("colorInfo",!1)||[];var r=this.getVisualVariablesForType("sizeInfo",!1)||[],t=this.getVisualVariablesForType("opacityInfo",!1)||[];d=d.concat(r).concat(t);
d=y.some(d,function(g){return(g.field===a||g.valueExpression===e)&&g.normalizationField==b})}return d},_normalizationTypeEnums:[["field","esriNormalizeByField"],["log","esriNormalizeByLog"],["percent-of-total","esriNormalizeByPercentOfTotal"]],_classificationMethodEnums:[["natural-breaks","esriClassifyNaturalBreaks"],["equal-interval","esriClassifyEqualInterval"],["quantile","esriClassifyQuantile"],["standard-deviation","esriClassifyStandardDeviation"],["geometrical-interval","esriClassifyGeometricalInterval"],
["defined-interval","esriClassifyDefinedInterval"]],_copy:function(d,a,b){y.forEach(d,function(e){var r=e.split(":");if(1<r.length){e=r[0];var t=this["_"+e+"Enums"];if("rest"===r[1]){var g="1";var k="0"}else"sdk"===r[1]&&(g="0",k="1")}r=a[e];if(void 0!==r&&(b[e]=r,t&&g)){var x,v=t.length;for(x=0;x<v;x++)if(t[x][g]===r){b[e]=t[x][k];break}}},this)},_addBreakInfo:function(d,a){var b=d.minValue,e=d.maxValue;this.breaks.push([b,e]);this.infos.push(d);var r=d.symbol;r&&!r.declaredClass&&(d.symbol=m.fromJson(r,
a));this._symbols[b+"-"+e]=d.symbol},toJson:function(){var d=this.infos||[],a=l.fixJson,b=d[0]&&d[0].minValue,e=this.backgroundFillSymbol;d=c.mixin(this.inherited(arguments),{type:"classBreaks",field:this.attributeField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:c.clone(this.legendOptions),defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),backgroundFillSymbol:e&&e.toJson(),minValue:-Infinity===b?-Number.MAX_VALUE:b,classBreakInfos:y.map(d,
function(r){r=c.mixin({},r);r.symbol=r.symbol&&r.symbol.toJson();r.classMaxValue=Infinity===r.maxValue?Number.MAX_VALUE:r.maxValue;delete r.minValue;delete r.maxValue;return a(r)})});this._copy(["defaultLabel","classificationMethod:sdk","normalizationType:sdk","normalizationField","normalizationTotal"],this,d);d.hasOwnProperty("normalizationType")&&!d.normalizationType&&delete d.normalizationType;d.hasOwnProperty("classificationMethod")&&!d.classificationMethod&&delete d.classificationMethod;return a(d)}});
u("extend-esri")&&c.setObject("renderer.ClassBreaksRenderer",B,q);return B})},"esri/renderers/TemporalRenderer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Renderer"],function(B,y,c,u,q){B=B(q,{declaredClass:"esri.renderer.TemporalRenderer",constructor:function(l,m,h,f){this.observationRenderer=l;this.latestObservationRenderer=m;this.trackRenderer=h;this.observationAger=f},getSymbol:function(l){var m=l.getLayer(),h=this.getObservationRenderer(l),f=h&&h.getSymbol(l),
d=this.observationAger;m.timeInfo&&m._map.timeExtent&&h===this.observationRenderer&&d&&f&&(f=d.getAgedSymbol(f,l));return f},getObservationRenderer:function(l){return 0===l.getLayer()._getKind(l)?this.observationRenderer:this.latestObservationRenderer||this.observationRenderer},toJson:function(){var l={type:"temporal"};l.observationRenderer=this.observationRenderer.toJson();this.latestObservationRenderer&&(l.latestObservationRenderer=this.latestObservationRenderer.toJson());this.trackRenderer&&(l.trackRenderer=
this.trackRenderer.toJson());this.observationAger&&(l.observationAger=this.observationAger.toJson());return l}});c("extend-esri")&&y.setObject("renderer.TemporalRenderer",B,u);return B})},"esri/renderers/SymbolAger":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(B,y,c,u){B=B(null,{declaredClass:"esri.renderer.SymbolAger",getAgedSymbol:function(q,l){},_setSymbolSize:function(q,l){switch(q.type){case "simplemarkersymbol":q.setSize(l);break;case "picturemarkersymbol":q.setWidth(l);
q.setHeight(l);break;case "simplelinesymbol":case "cartographiclinesymbol":q.setWidth(l);break;case "simplefillsymbol":case "picturefillsymbol":q.outline&&q.outline.setWidth(l)}}});c("extend-esri")&&y.setObject("renderer.SymbolAger",B,u);return B})},"esri/renderers/TimeClassBreaksAger":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has dojo/date ../kernel ../lang ../symbols/jsonUtils ../Color ./SymbolAger".split(" "),function(B,y,c,u,q,l,m,h,f,d){var a=B(d,{declaredClass:"esri.renderer.TimeClassBreaksAger",
constructor:function(b,e){this.infos=b;this.timeUnits=e||"day";b.sort(function(r,t){return r.minAge<t.minAge?-1:r.minAge>t.minAge?1:0})},getAgedSymbol:function(b,e){var r=e.getLayer();e=e.attributes;var t=m.isDefined;b=h.fromJson(b.toJson());var g=r._map.timeExtent.endTime;if(!g)return b;var k=q.difference(new Date(e[r._startTimeField]),g,this.timeUnits);y.some(this.infos,function(x){if(k>=x.minAge&&k<=x.maxAge){var v=x.color,A=x.size;x=x.alpha;v&&b.setColor(v);t(A)&&this._setSymbolSize(b,A);t(x)&&
b.color&&(b.color.a=x);return!0}},this);return b},toJson:function(){var b={agerClassBreakInfos:[]},e;b.timeUnits=this._getRestUnits(this.timeUnits);for(e=0;e<this.infos.length;e+=1){var r=this.infos[e];var t={};t.oldestAge=Infinity===r.maxAge?null:r.maxAge;t.size=r.size;r.color&&(t.color=f.toJsonColor(r.color));r.alpha&&(t.alpha=Math.round(255*r.alpha));b.agerClassBreakInfos[e]=t}return b},_getRestUnits:function(b){var e="esriTimeUnitsDays";switch(b){case a.UNIT_SECONDS:e="esriTimeUnitsSeconds";break;
case a.UNIT_MILLISECONDS:e="esriTimeUnitsMilliseconds";break;case a.UNIT_HOURS:e="esriTimeUnitsHours";break;case a.UNIT_MINUTES:e="esriTimeUnitsMinutes";break;case a.UNIT_MONTHS:e="esriTimeUnitsMonths";break;case a.UNIT_WEEKS:e="esriTimeUnitsWeeks";break;case a.UNIT_YEARS:e="esriTimeUnitsYears"}return e}});c.mixin(a,{UNIT_DAYS:"day",UNIT_HOURS:"hour",UNIT_MILLISECONDS:"millisecond",UNIT_MINUTES:"minute",UNIT_MONTHS:"month",UNIT_SECONDS:"second",UNIT_WEEKS:"week",UNIT_YEARS:"year"});u("extend-esri")&&
c.setObject("renderer.TimeClassBreaksAger",a,l);return a})},"esri/renderers/TimeRampAger":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has ../kernel ../symbols/jsonUtils ../Color ./SymbolAger".split(" "),function(B,y,c,u,q,l,m,h){B=B(h,{declaredClass:"esri.renderer.TimeRampAger",constructor:function(f,d,a){this.colorRange=f;this.sizeRange=d;this.alphaRange=a},getAgedSymbol:function(f,d){var a=d.getLayer(),b=d.attributes;f=l.fromJson(f.toJson());var e=a._map.timeExtent;
d=e.startTime;e=e.endTime;if(!d||!e)return f;d=d.getTime();e=e.getTime();a=new Date(b[a._startTimeField]);a=a.getTime();a<d&&(a=d);a=e===d?1:(a-d)/(e-d);if(d=this.sizeRange)b=d[0],e=d[1],d=Math.abs(e-b)*a,this._setSymbolSize(f,b<e?b+d:b-d);if(d=this.colorRange){e=d[0];var r=d[1],t=Math.round;b=new c;var g=e.r,k=r.r;d=Math.abs(k-g)*a;b.r=t(g<k?g+d:g-d);g=e.g;k=r.g;d=Math.abs(k-g)*a;b.g=t(g<k?g+d:g-d);g=e.b;k=r.b;d=Math.abs(k-g)*a;b.b=t(g<k?g+d:g-d);e=e.a;r=r.a;d=Math.abs(r-e)*a;b.a=e<r?e+d:e-d;f.setColor(b)}b=
f.color;(d=this.alphaRange)&&b&&(e=d[0],r=d[1],d=Math.abs(r-e)*a,b.a=e<r?e+d:e-d);return f},toJson:function(){var f={};this.sizeRange&&(f.sizeRange=this.sizeRange);this.colorRange&&(f.colorRange=[m.toJsonColor(this.colorRange[0]),m.toJsonColor(this.colorRange[1])]);this.alphaRange&&(f.alphaRange=[Math.round(255*this.alphaRange[0]),Math.round(255*this.alphaRange[1])]);return f}});u("extend-esri")&&y.setObject("renderer.TimeRampAger",B,q);return B})},"esri/renderers/StretchRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../layers/RasterFunction ./colorRampUtils".split(" "),
function(B,y,c,u,q,l,m,h){var f={TYPE_NONE:"none",TYPE_STANDARDDEVIATION:"standardDeviation",TYPE_HISTOGRAMEQUALIZATION:"histogramEqualization",TYPE_MINMAX:"minMax",TYPE_PERCENTCLIP:"percentClip",TYPE_SIGMOID:"sigmoid"};B=B(null,{declaredClass:"esri.renderer.StretchRenderer",constructor:function(d){d=d||{};this.stretchType=f.TYPE_NONE;this.dra=!0;this.statistics=[];this.gamma=[];this.computeGamma=this.useGamma=!1;this.sigmoidStrengthLevel=this.numberOfStandardDeviations=this.minPercent=this.maxPercent=
this.min=this.max=null;c.mixin(this,d);this.colorRamp=h.fromJson(d.colorRamp)},toJson:function(){var d={type:"rasterStretch",stretchType:this.stretchType,colorRamp:this.colorRamp&&this.colorRamp.toJson(),min:this.min,max:this.max,numberOfStandardDeviations:this.numberOfStandardDeviations,statistics:c.clone(this.statistics),dra:this.dra,minPercent:this.minPercent,maxPercent:this.maxPercent,useGamma:this.useGamma,gamma:c.clone(this.gamma),computeGamma:this.computeGamma,sigmoidStrengthLevel:this.sigmoidStrengthLevel};
return l.fixJson(d)},toRenderingRule:function(d){d=d||{};var a=new m;a.functionName="Stretch";var b=this._convertStretchTypeEnumToIndex(this.stretchType),e={StretchType:b,Statistics:this.statistics,DRA:this.dra,UseGamma:this.useGamma,Gamma:this.gamma,ComputeGamma:this.computeGamma};l.isDefined(this.min)&&(e.Min=this.min);l.isDefined(this.min)&&(e.Max=this.max);3===b?(e.NumberOfStandardDeviations=this.numberOfStandardDeviations,a.outputPixelType="U8"):6===b?(e.MinPercent=parseFloat(this.minPercent),
e.MaxPercent=parseFloat(this.maxPercent),a.outputPixelType="U8"):5===b?a.outputPixelType="U8":9===b&&(e.SigmoidStrengthLevel=this.sigmoidStrengthLevel);a.functionArguments=e;a.variableName="Raster";return this.colorRamp?(b=new m,b.functionArguments=d.convertToColormap?{Colormap:h.convertColorRampToColormap(this.colorRamp,256)}:{colorRamp:this.colorRamp.toJson()},b.variableName="Raster",b.functionName="Colormap",b.functionArguments.Raster=a,b):a},_convertStretchTypeEnumToIndex:function(d){var a=0;
d===f.TYPE_STANDARDDEVIATION?a=3:d===f.TYPE_HISTOGRAMEQUALIZATION?a=4:d===f.TYPE_MINMAX?a=5:d===f.TYPE_PERCENTCLIP?a=6:d===f.TYPE_SIGMOID&&(a=9);return a},_convertStretchTypeIndexToEnum:function(d){var a=f.TYPE_NONE;3===d?a=f.TYPE_STANDARDDEVIATION:4===d?a=f.TYPE_HISTOGRAMEQUALIZATION:5===d?a=f.TYPE_MINMAX:6===d?a=f.TYPE_PERCENTCLIP:9===d&&(a=f.TYPE_SIGMOID);return a}});c.mixin(B,f);u("extend-esri")&&c.setObject("renderer.StretchRenderer",B,q);return B})},"esri/layers/RasterFunction":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../lang"],function(B,y,c,u,q){var l=B(null,{declaredClass:"esri.layers.RasterFunction",functionName:null,arguments:null,functionArguments:null,variableName:null,outputPixelType:null,_isTemplate:null,_templateJson:null,constructor:function(m){if(y.isObject(m)){this._isRFTJson(m)&&(this._isTemplate=!0,this._templateJson=m);var h=0;this.functionName=m.rasterFunction||m.name;this.functionArguments=y.clone(m.rasterFunctionArguments||m.arguments);y.mixin(this,m);
if(m=this.functionArguments)if(m.Raster=this._toRasterFunction(m.Raster),m.Raster2=this._toRasterFunction(m.Raster2),m.DEM=this._toRasterFunction(m.DEM),m.FillRaster=this._toRasterFunction(m.FillRaster),m.Rasters&&m.Rasters.length)for(h=0;h<m.Rasters.length;h++)m.Rasters[h]=this._toRasterFunction(m.Rasters[h])}},_isRFTJson:function(m){return m.name&&m.arguments&&m.function&&m.hasOwnProperty("functionType")},_toRasterFunction:function(m){return m&&(m.rasterFunction||m.functionName)?new l(m):m},_rfToJson:function(m){m&&
"esri.layers.RasterFunction"===m.declaredClass&&(m=m.toJson());return m},toJson:function(){if(this._isTemplate)return this._templateJson;var m=y.clone(this.functionArguments||this.arguments);if(m&&(m.Raster=this._rfToJson(m.Raster),m.Raster2=this._rfToJson(m.Raster2),m.DEM=this._rfToJson(m.DEM),m.FillRaster=this._rfToJson(m.FillRaster),m.Rasters&&m.Rasters.length)){var h,f=[];for(h=0;h<m.Rasters.length;h++)f.push(this._rfToJson(m.Rasters[h]));m.Rasters=f}return q.filter({rasterFunction:this.functionName,
rasterFunctionArguments:m,variableName:this.variableName,outputPixelType:this.outputPixelType?this.outputPixelType:null},function(d){if(null!==d&&void 0!==d)return!0})}});c("extend-esri")&&y.setObject("layers.RasterFunction",l,u);return l})},"esri/renderers/colorRampUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/store/Memory ../tasks/AlgorithmicColorRamp ../tasks/MultipartColorRamp ../Color ./colorUtils".split(" "),function(B,y,c,u,q,l,m){function h(g,k,x){if(g){k=k||e;x=x||r;var v=
null,A=g.declaredClass,n,w;if((n="string"===typeof g?g:g.name)&&y.some(x,function(p){if(p.name===n)return v=p.id,!0})&&v)return v;"esri.tasks.AlgorithmicColorRamp"===A?y.some(k,function(p){if(d(g.fromColor.toRgb(),p.fromColor)&&d(g.toColor.toRgb(),p.toColor))return v=p.id,!0},this):"esri.tasks.MultipartColorRamp"===A&&y.some(k,function(p){if(g.colorRamps&&p.colorRamps&&g.colorRamps.length===p.colorRamps.length&&(w=g.colorRamps,!y.some(p.colorRamps,function(D,C){if(!d(w[C].fromColor.toRgb(),D.fromColor)||
!d(w[C].toColor.toRgb(),D.toColor))return!0},this))){if(v)return!0;v=p.id}},this);return v}}function f(g){var k=new u,x=g.algorithm;k.fromColor=l.toDojoColor(g.fromColor);k.toColor=l.toDojoColor(g.toColor);x?"esriCIELabAlgorithm"===x?k.algorithm="cie-lab":"esriHSVAlgorithm"===x?k.algorithm="hsv":"esriLabLChAlgorithm"===x&&(k.algorithm="lab-lch"):k.algorithm="hsv";return k}function d(g,k){return g&&k&&g.length&&k.length&&g.length===k.length?!y.some(g,function(x,v){if(x>k[v]+2||x<k[v]-2)return!0}):
!1}function a(g,k,x){g=m.toLAB(g);k=m.toLAB(k);return m.toRGB({l:g.l*(1-x)+x*k.l,a:g.a*(1-x)+x*k.a,b:g.b*(1-x)+x*k.b})}var b={},e=[{id:"none",selected:!0},{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,
35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",
fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",
type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,
240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,
255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",
fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",
type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",
type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,
102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",
fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,
213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},
{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",
type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",
colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},
{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,
255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,
252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],r=[{name:"Aspect",id:"aspect_predefined"},{name:"Black to White",id:"blackToWhite_predefined"},{name:"Blue Bright",id:"blueBright_predefined"},{name:"Blue Light to Dark",id:"blueLightToDark_predefined"},{name:"Blue-Green Bright",id:"blueGreenBright_predefined"},{name:"Blue-Green Light to Dark",id:"blueGreenLightToDark_predefined"},{name:"Brown Light to Dark",id:"brownLightToDark_predefined"},
{name:"Brown to Blue Green Diverging, Bright",id:"brownToBlueGreenDivergingBright_predefined"},{name:"Brown to Blue Green Diverging, Dark",id:"brownToBlueGreenDivergingDark_predefined"},{name:"Coefficient Bias",id:"coefficientBias_predefined"},{name:"Cold to Hot Diverging",id:"coldToHotDiverging_predefined"},{name:"Condition Number",id:"conditionNumber_predefined"},{name:"Cyan to Purple",id:"cyanToPurple_predefined"},{name:"Cyan-Light to Blue-Dark",id:"cyanLightToBlueDark_predefined"},{name:"Distance",
id:"distance_predefined"},{id:"elevation1_predefined",name:"Elevation #1"},{id:"elevation2_predefined",name:"Elevation #2"},{id:"errors_predefined",name:"Errors"},{id:"grayLightToDark_predefined",name:"Gray Light to Dark"},{id:"greenBright_predefined",name:"Green Bright"},{id:"greenLightToDark_predefined",name:"Green Light to Dark"},{name:"Green to Blue",id:"greenToBlue_predefined"},{name:"Orange Bright",id:"orangeBright_predefined"},{name:"Orange Light to Dark",id:"orangeLightToDark_predefined"},
{id:"partialSpectrum_predefined",name:"Partial Spectrum"},{id:"partialSpectrum1Diverging_predefined",name:"Partial Spectrum 1 Diverging",type:"multipart"},{id:"partialSpectrum2Diverging_predefined",name:"Partial Spectrum 2 Diverging"},{name:"Pink to YellowGreen Diverging, Bright",id:"pinkToYellowGreenDivergingBright_predefined"},{name:"Pink to YellowGreen Diverging, Dark",id:"pinkToYellowGreenDivergingDark_predefined"},{id:"precipitation_predefined",name:"Precipitation"},{id:"prediction_predefined",
name:"Prediction"},{name:"Purple Bright",id:"purpleBright_predefined"},{id:"purpleToGreenDivergingBright_predefined",name:"Purple to Green Diverging, Bright"},{id:"purpleToGreenDivergingDark_predefined",name:"Purple to Green Diverging, Dark"},{name:"Purple-Blue Bright",id:"purpleBlueBright_predefined"},{name:"Purple-Blue Light to Dark",id:"purpleBlueLightToDark_predefined"},{name:"Purple-Red Bright",id:"purpleRedBright_predefined"},{name:"Purple-Red Light to Dark",id:"purpleRedLightToDark_predefined"},
{name:"Red Bright",id:"redBright_predefined"},{name:"Red Light to Dark",id:"redLightToDark_predefined"},{id:"redToBlueDivergingBright_predefined",name:"Red to Blue Diverging, Bright"},{id:"redToBlueDivergingDark_predefined",name:"Red to Blue Diverging, Dark"},{id:"redToGreen_predefined",name:"Red to Green"},{id:"redToGreenDivergingBright_predefined",name:"Red to Green Diverging, Bright"},{id:"redToGreenDivergingDark_predefined",name:"Red to Green Diverging, Dark"},{name:"Slope",id:"slope_predefined"},
{id:"spectrumFullBright_predefined",name:"Spectrum-Full Bright"},{id:"spectrumFullDark_predefined",name:"Spectrum-Full Dark"},{id:"spectrumFullLight_predefined",name:"Spectrum-Full Light"},{id:"surface_predefined",name:"Surface"},{id:"temperature_predefined",name:"Temperature"},{name:"White to Black",id:"whiteToBlack_predefined"},{id:"yellowToDarkRed_predefined",name:"Yellow to Dark Red"},{id:"yellowToGreenToDarkBlue_predefined",name:"Yellow to Green to Dark Blue"},{name:"Yellow to Red",id:"yellowToRed_predefined"},
{name:"Yellow-Green Bright",id:"yellowGreenBright_predefined"},{name:"Yellow-Green Light to Dark",id:"yellowGreenLightToDark_predefined"}],t=new c({data:r});B.mixin(b,{predefinedColorRamps:e,predefinedColorRampNameMap:r,getColorRampName:function(g){return(g=h(g))?(g=t.query({id:g}),g[0]?g[0].name:null):null},fromJson:function(g){var k=null;if(!g)return k;"multipart"===g.type?(k=new q,k.colorRamps=y.map(g.colorRamps,function(x){return f(x)},this)):"algorithmic"===g.type&&(k=f(g));return k},colorsEqual:d,
getColorRampId:h,convertColorRampToColormap:function(g,k){if(g&&k){var x=g.colorRamps?g.colorRamps.length:1,v=[],A=[],n,w,p,D,C=0,G=0;for(C=0;C<x;C++)v[C]={},v[C].start=G,v[C].end=G+1/x,G=v[C].end;for(C=0;C<k;C++){var z=(C+.5)/k;y.forEach(v,function(E,H){z>=E.start&&z<E.end&&(D=(z-E.start)/(E.end-E.start),1<v.length?(n=m.getDojoColor(g.colorRamps[H].fromColor),w=m.getDojoColor(g.colorRamps[H].toColor)):(n=m.getDojoColor(g.fromColor),w=m.getDojoColor(g.toColor)),p=a(n,w,D),A.push([C,p.r,p.g,p.b]))},
this)}return A}},interpolateLabColor:a});return b})},"dojo/store/Memory":function(){define(["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(B,y,c){return B("dojo.store.Memory",null,{constructor:function(u){for(var q in u)this[q]=u[q];this.setData(this.data||[])},data:null,idProperty:"id",index:null,queryEngine:c,get:function(u){return this.data[this.index[u]]},getIdentity:function(u){return u[this.idProperty]},put:function(u,q){var l=this.data,m=this.index,h=this.idProperty;
h=u[h]=q&&"id"in q?q.id:h in u?u[h]:Math.random();if(h in m){if(q&&!1===q.overwrite)throw Error("Object already exists");l[m[h]]=u}else m[h]=l.push(u)-1;return h},add:function(u,q){(q=q||{}).overwrite=!1;return this.put(u,q)},remove:function(u){var q=this.index,l=this.data;if(u in q)return l.splice(q[u],1),this.setData(l),!0},query:function(u,q){return y(this.queryEngine(u,q)(this.data))},setData:function(u){u.items?(this.idProperty=u.identifier||this.idProperty,u=this.data=u.items):this.data=u;this.index=
{};for(var q=0,l=u.length;q<l;q++)this.index[u[q][this.idProperty]]=q}})})},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../when"],function(B,y,c){var u=function(q){function l(h){q[h]=function(){var f=arguments,d=c(q,function(a){Array.prototype.unshift.call(f,a);return u(B[h].apply(B,f))});if("forEach"!==h||m)return d}}if(!q)return q;var m=!!q.then;m&&(q=y.delegate(q));l("forEach");l("filter");l("map");null==q.total&&(q.total=c(q,function(h){return h.length}));
return q};y.setObject("dojo.store.util.QueryResults",u);return u})},"dojo/store/util/SimpleQueryEngine":function(){define(["../../_base/array"],function(B){return function(y,c){function u(l){l=B.filter(l,y);var m=c&&c.sort;m&&l.sort("function"==typeof m?m:function(f,d){for(var a,b=0;a=m[b];b++){var e=f[a.attribute],r=d[a.attribute];e=null!=e?e.valueOf():e;r=null!=r?r.valueOf():r;if(e!=r)return!!a.descending==(null==e||e>r)?-1:1}return 0});if(c&&(c.start||c.count)){var h=l.length;l=l.slice(c.start||
0,(c.start||0)+(c.count||Infinity));l.total=h}return l}switch(typeof y){default:throw Error("Can not query with a "+typeof y);case "object":case "undefined":var q=y;y=function(l){for(var m in q){var h=q[m];if(h&&h.test){if(!h.test(l[m],l))return!1}else if(h!=l[m])return!1}return!0};break;case "string":if(!this[y])throw Error("No filter function "+y+" was found in store");y=this[y];case "function":}u.matches=y;return u}})},"esri/tasks/AlgorithmicColorRamp":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../Color ./ColorRamp".split(" "),
function(B,y,c,u,q,l){B=B(l,{declaredClass:"esri.tasks.AlgorithmicColorRamp",type:"algorithmic",fromColor:null,toColor:null,algorithm:null,toJson:function(){switch(this.algorithm&&this.algorithm.toLowerCase()){case "cie-lab":var m="esriCIELabAlgorithm";break;case "hsv":m="esriHSVAlgorithm";break;case "lab-lch":m="esriLabLChAlgorithm"}m={type:"algorithmic",algorithm:m};m.fromColor=q.toJsonColor(this.fromColor);m.toColor=q.toJsonColor(this.toColor);return m}});c("extend-esri")&&y.setObject("tasks.AlgorithmicColorRamp",
B,u);return B})},"esri/tasks/ColorRamp":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(B,y,c,u){B=B(null,{declaredClass:"esri.tasks.ColorRamp",type:null});c("extend-esri")&&y.setObject("tasks.ColorRamp",B,u);return B})},"esri/tasks/MultipartColorRamp":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../symbols/Symbol ./ColorRamp".split(" "),function(B,y,c,u,q,l){B=B(l,{declaredClass:"esri.tasks.MultipartColorRamp",
type:"multipart",constructor:function(){this.colorRamps=[]},addColorRamp:function(m){this.colorRamps.push(m)},toJson:function(){return{type:"multipart",colorRamps:c.map(this.colorRamps,function(m){return m.toJson()})}}});u("extend-esri")&&y.setObject("tasks.MultipartColorRamp",B,q);return B})},"esri/renderers/colorUtils":function(){define(["dojo/_base/Color","dojo/_base/array"],function(B,y){var c={COEF_RGB2XYZ:[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],COEF_XYZ2RGB:[[3.2406,-1.5372,
-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],matrixProduct:function(q,l){var m=[],h,f;if(q[0].length!==l.length)throw"dimensions do not match";var d=q.length,a=q[0].length,b=0;for(h=0;h<d;h++){for(f=b=0;f<a;f++)b+=q[h][f]*l[f];m.push(b)}return m},rgb2xyz:function(q){q=[q.r/255,q.g/255,q.b/255].map(function(l){return.04045>=l?l/12.92:Math.pow((l+.055)/1.055,2.4)});q=this.matrixProduct(this.COEF_RGB2XYZ,q);return{x:100*q[0],y:100*q[1],z:100*q[2]}},xyz2rgb:function(q){q=this.matrixProduct(this.COEF_XYZ2RGB,
[q.x/100,q.y/100,q.z/100]).map(function(l){return Math.min(1,Math.max(.0031308>=l?12.92*l:1.055*Math.pow(l,1/2.4)-.055,0))});return{r:Math.round(255*q[0]),g:Math.round(255*q[1]),b:Math.round(255*q[2])}},xyz2lab:function(q){q=[q.x/95.047,q.y/100,q.z/108.883].map(function(l){return l>Math.pow(6/29,3)?Math.pow(l,1/3):1/3*Math.pow(29/6,2)*l+4/29});return{l:116*q[1]-16,a:500*(q[0]-q[1]),b:200*(q[1]-q[2])}},lab2xyz:function(q){var l=q.l;q=[(l+16)/116+q.a/500,(l+16)/116,(l+16)/116-q.b/200].map(function(m){return m>
6/29?Math.pow(m,3):3*Math.pow(6/29,2)*(m-4/29)});return{x:95.047*q[0],y:100*q[1],z:108.883*q[2]}},lab2lch:function(q){var l=q.l,m=q.a,h=q.b;q=Math.sqrt(m*m+h*h);m=Math.atan2(h,m);m=0<m?m:m+2*Math.PI;return{l:l,c:q,h:m}},lch2lab:function(q){var l=q.c,m=q.h;return{l:q.l,a:l*Math.cos(m),b:l*Math.sin(m)}},rgb2lab:function(q){return this.xyz2lab(this.rgb2xyz(q))},lab2rgb:function(q){return this.xyz2rgb(this.lab2xyz(q))},rgb2lch:function(q){return this.lab2lch(this.xyz2lab(this.rgb2xyz(q)))},lch2rgb:function(q){return this.xyz2rgb(this.lab2xyz(this.lch2lab(q)))}},
u={rgb2hsv:function(q){var l=q.r,m=q.g;q=q.b;var h=Math.max(l,m,q),f=h-Math.min(l,m,q),d;0===f?d=0:h===l?d=(m-q)/f%6:h===m?d=(q-l)/f+2:h===q&&(d=(l-m)/f+4);0>d&&(d+=6);return{h:60*d,s:100*(0===f?0:f/h),v:100/255*h}},hsv2rgb:function(q){var l=(q.h+360)%360/60,m=q.v/100*255;q=q.s/100*m;var h=q*(1-Math.abs(l%2-1));switch(Math.floor(l)){case 0:l={r:q,g:h,b:0};break;case 1:l={r:h,g:q,b:0};break;case 2:l={r:0,g:q,b:h};break;case 3:l={r:0,g:h,b:q};break;case 4:l={r:h,g:0,b:q};break;case 5:case 6:l={r:q,
g:0,b:h};break;default:l={r:0,g:0,b:0}}l.r=Math.round(l.r+m-q);l.g=Math.round(l.g+m-q);l.b=Math.round(l.b+m-q);return l}};return{toRGB:function(q){var l;void 0!==q.r&&void 0!==q.g&&void 0!==q.b?l=q:void 0!==q.l&&void 0!==q.c&&void 0!==q.h?l=c.lch2rgb(q):void 0!==q.l&&void 0!==q.a&&void 0!==q.b?l=c.lab2rgb(q):void 0!==q.x&&void 0!==q.y&&void 0!==q.z?l=c.xyz2rgb(q):void 0!==q.h&&void 0!==q.s&&void 0!==q.v&&(l=u.hsv2rgb(q));return l},toHSV:function(q){if(void 0!==q.h&&void 0!==q.s&&void 0!==q.v)return q;
q=this.toRGB(q);return u.rgb2hsv(q)},toLAB:function(q){return void 0!==q.l&&void 0!==q.a&&void 0!==q.b?q:c.rgb2lab(this.toRGB(q))},toLCH:function(q){return void 0!==q.l&&void 0!==q.c&&void 0!==q.h?q:c.rgb2lch(this.toRGB(q))},toXYZ:function(q){return void 0!==q.x&&void 0!==q.y&&void 0!==q.z?q:c.rgb2xyz(this.toRGB(q))},getDojoColor:function(q){if(q){if(Array.isArray(q))return B.fromArray(q);if(void 0!==q.r&&void 0!==q.g&&void 0!==q.b)return q}},correctRGBLimits:function(q){var l=[q.r,q.g,q.b];y.forEach(l,
function(m,h){0>l[h]?l[h]=0:255<l[h]&&(l[h]=255);l[h]=Math.floor(l[h])});return{r:l[0],g:l[1],b:l[2],a:1}}}})},"esri/renderers/jsonUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../Color ../symbols/jsonUtils ./SimpleRenderer ./UniqueValueRenderer ./ClassBreaksRenderer ./VectorFieldRenderer ./DotDensityRenderer ./ScaleDependentRenderer ./TimeClassBreaksAger ./TimeRampAger ./TemporalRenderer ./HeatmapRenderer ./StretchRenderer ./ShadedReliefRenderer ./ColormapRenderer".split(" "),
function(B,y,c,u,q,l,m,h,f,d,a,b,e,r,t,g,k,x,v,A){var n={createDefaultRenderer:function(w){w=m.createDefaultSymbol(w);return new h(w)},fromJson:function(w,p){switch(w.type||""){case "simple":w=new h(w,p);break;case "uniqueValue":w=new f(w,null,null,null,null,p);break;case "classBreaks":w=new d(w,null,p);break;case "vectorField":w=new a(w);break;case "scaleDependent":w=this._scaleDependentFromJson(w);break;case "dotDensity":w=w.attributes?n.createDefaultRenderer("esriGeometryPolygon"):this._dotDensityFromJson(w);
break;case "temporal":w=this._temporalFromJson(w,p);break;case "heatmap":w=this._heatmapFromJson(w);break;case "rasterStretch":w=new x(w);break;case "rasterShadedRelief":w=new v(w);break;case "rasterColormap":w=new A(w);break;default:w=(w=p&&p.geometryType)?n.createDefaultRenderer(w):null}return w},_scaleDependentFromJson:function(w){var p={},D=w.minScale;p.rendererInfos=B.map(w.rendererInfos,function(C){var G=C.maxScale;C={minScale:D,maxScale:G,renderer:C.renderer&&this.fromJson(C.renderer)};D=G;
return C},this);return new e(p)},_dotDensityFromJson:function(w){w.backgroundColor&&y.isArray(w.backgroundColor)&&(w.backgroundColor=l.toDojoColor(w.backgroundColor));0<w.dotSize&&(w.dotSize=u.pt2px(w.dotSize));w.fields&&B.forEach(w.fields,function(p){p&&y.isArray(p.color)&&(p.color=l.toDojoColor(p.color))});w.legendOptions&&(w.legendOptions.backgroundColor&&y.isArray(w.legendOptions.backgroundColor)&&(w.legendOptions.backgroundColor=l.toDojoColor(w.legendOptions.backgroundColor)),w.legendOptions.outline&&
(w.legendOptions.outline=m.fromJson(w.legendOptions.outline)));w.outline&&(w.outline=m.fromJson(w.outline));return new b(w)},_temporalFromJson:function(w,p){var D=p&&p.geometryType;w=w||{};var C=this.fromJson(w.observationRenderer,p);p=w.latestObservationRenderer?this.fromJson(w.latestObservationRenderer,p):null;D=w.trackRenderer?this.fromJson(w.trackRenderer,D?{geometryType:"esriGeometryPolyline"}:null):null;w=this._agerFromJson(w.observationAger);return new g(C,p,D,w)},_agerFromJson:function(w){var p;
w=w||{};w.colorRange||w.sizeRange||w.alphaRange?p=this._timeRampFromJson(w):w.agerClassBreakInfos&&(p=this._timeClassBreaksFromJson(w));return p},_timeRampFromJson:function(w){var p,D,C;w.colorRange&&1<w.colorRange.length&&(p=[l.toDojoColor(w.colorRange[0]),l.toDojoColor(w.colorRange[1])]);w.sizeRange&&1<w.sizeRange.length&&(D=[w.sizeRange[0],w.sizeRange[1]]);w.alphaRange&&1<w.alphaRange.length&&(C=[w.alphaRange[0]/255,w.alphaRange[1]/255]);return new t(p,D,C)},_timeClassBreaksFromJson:function(w){var p=
w.agerClassBreakInfos,D=[],C;var G=r.UNIT_DAYS;switch(w.timeUnits){case "esriTimeUnitsSeconds":G=r.UNIT_SECONDS;break;case "esriTimeUnitsMilliseconds":G=r.UNIT_MILLISECONDS;break;case "esriTimeUnitsHours":G=r.UNIT_HOURS;break;case "esriTimeUnitsMinutes":G=r.UNIT_MINUTES;break;case "esriTimeUnitsMonths":G=r.UNIT_MONTHS;break;case "esriTimeUnitsWeeks":G=r.UNIT_WEEKS;break;case "esriTimeUnitsYears":G=r.UNIT_YEARS}for(C=0;C<p.length;C+=1){w=p[C];var z={minAge:0,maxAge:w.oldestAge||Infinity};w.color&&
(z.color=l.toDojoColor(w.color));w.alpha&&(z.alpha=w.alpha/255);z.size=w.size;D[C]=z}return new r(D,G)},_heatmapFromJson:function(w){var p=w.colorStops;p&&p instanceof Array&&B.forEach(p,function(D){D.color=l.toDojoColor(D.color)});return new k(w)}};c("extend-esri")&&y.mixin(y.getObject("renderer",!0,q),n);return n})},"esri/renderers/VectorFieldRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/_base/array ../kernel ../lang ../Color ./Renderer ./ClassBreaksRenderer ../symbols/SimpleMarkerSymbol ../symbols/PictureMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/jsonUtils require".split(" "),
function(B,y,c,u,q,l,m,h,f,d,a,b,e,r){var t=B(h,{declaredClass:"esri.renderer.VectorFieldRenderer",iconFolderPath:"../images/symbol/sfs/",constructor:function(g){l.isDefined(g)||(g={});g.attributeField=g.attributeField||"Magnitude";g.rotationInfo=g.rotationInfo||this._getRotationInfo(g);B.safeMixin(this,g);this.setRotationInfo(this.rotationInfo);this.style=this.style||t.STYLE_SINGLE_ARROW;this.singleArrowSymbol&&(this.singleArrowSymbol=this.singleArrowSymbol.declaredClass?this.singleArrowSymbol:e.fromJson(this.singleArrowSymbol));
this.renderer=new f(this._getDefaultSymbol(),g.attributeField);this._updateRenderer(this.style);this.flowRepresentation=this.flowRepresentation||this.FLOW_FROM},getSymbol:function(g){return this.renderer&&this.renderer.getSymbol(g)},setVisualVariables:function(g){g=u.filter(g,function(k){if("sizeInfo"===k.type)return l.isDefined(this._updateSizeInfo(k))},this);this.inherited(arguments);return this},setSizeInfo:function(g){this._updateSizeInfo(g);this.inherited(arguments);return this},setProportionalSymbolInfo:function(g){this.setSizeInfo(g);
return this},setColorInfo:function(g){return this},_updateRenderer:function(g){return l.isDefined(this.renderer)?g===t.STYLE_SINGLE_ARROW?this._createSingleArrowRenderer():g===t.STYLE_BEAUFORT_KN?this._createBeaufortKnotsRenderer():g===t.STYLE_BEAUFORT_METER?this._createBeaufortMeterRenderer():g===t.STYLE_BEAUFORT_FEET?this._createBeaufortFeetRenderer():g===t.STYLE_BEAUFORT_MILE?this._createBeaufortMilesRenderer():g===t.STYLE_BEAUFORT_KM?this._createBeaufortKilometersRenderer():g===t.STYLE_OCEAN_CURRENT_M?
this._createCurrentMeterRenderer():g===t.STYLE_OCEAN_CURRENT_KN?this._createCurrentKnotsRenderer():g===t.STYLE_SCALAR?this._createSimpleScalarRenderer():g===t.STYLE_WIND_BARBS?this._createWindBarbsRenderer():this._createClassifiedArrowRenderer():Error("Invalid Renderer!")},_updateSizeInfo:function(g){return g&&l.isDefined(g.minSize)&&l.isDefined(g.maxSize)&&l.isDefined(g.minDataValue)&&l.isDefined(g.maxDataValue)?(this.style===t.STYLE_WIND_BARBS&&(g.minSize=g.maxSize),g.field=g.field||"Magnitude",
g.type="sizeInfo",this.minDataValue=g.minDataValue,this.maxDataValue=g.maxDataValue,g):null},_createClassifiedArrowRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new m([56,168,0]));var g=[0,1E-6,3.5,7,10.5,14];if(l.isDefined(this.minDataValue)&&l.isDefined(this.maxDataValue)){var k=(this.maxDataValue-this.minDataValue)/5;g=[];var x;var v=this.minDataValue;for(x=0;6>x;x++)g[x]=v,v+=k}this._addBreaks(g,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]])},_createSingleArrowRenderer:function(){this.renderer.defaultSymbol=
this.singleArrowSymbol||this._getDefaultSymbol()},_createBeaufortMeterRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new m([214,47,39]));this._addBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortKnotsRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new m([214,
47,39]));this._addBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]])},_createBeaufortFeetRenderer:function(){var g=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];u.forEach(g,function(k,x){g[x]*=3.28084});this.renderer.defaultSymbol=this._getDefaultSymbol(new m([214,47,39]));this._addBreaks(g,[[69,117,181],[101,137,184],[132,158,186],
[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortMilesRenderer:function(){var g=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];u.forEach(g,function(k,x){g[x]*=2.23694});this.renderer.defaultSymbol=this._getDefaultSymbol(new m([214,47,39]));this._addBreaks(g,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,
117,81],[232,21,21]])},_createBeaufortKilometersRenderer:function(){var g=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];u.forEach(g,function(k,x){g[x]*=3.6});this.renderer.defaultSymbol=this._getDefaultSymbol(new m([214,47,39]));this._addBreaks(g,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createCurrentMeterRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new m([177,
177,177]));this._addBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]])},_createCurrentKnotsRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new m([177,177,177]));this._addBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]])},_createSimpleScalarRenderer:function(){this.renderer.defaultSymbol=new a({url:r.toUrl(this.iconFolderPath+"scalar.png"),height:20,width:20,
type:"esriPMS",angle:0})},_createWindBarbsRenderer:function(){var g=[],k;for(k=0;150>=k;k+=5)g.push(k);var x="M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20;M25 0 L25 40 M25 35 L17.5 37.5;M25 0 L25 40 L10 45 L25 40;M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35;M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L10 15;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L10 15 M25 10 M25 5 L17.5 7.5".split(";");
var v=new a({url:r.toUrl(this.iconFolderPath+"windbarb.png"),height:20,width:20,type:"esriPMS",angle:0});this.renderer.defaultSymbol=v;for(k=0;k<g.length-1;k++)0===k?this.renderer.addBreak({minValue:g[k],maxValue:g[k+1],symbol:v}):this.renderer.addBreak({minValue:g[k],maxValue:g[k+1],symbol:(new d).setPath(x[k]).setOutline((new b).setWidth(1.5)).setSize(20).setColor(new m([0,0,0,255]))})},_getDefaultSymbol:function(g){return(new d).setPath("M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z").setOutline((new b).setWidth(0)).setSize(20).setColor(g||
new m([0,92,230]))},_getRotationInfo:function(g){var k=g&&g.flowRepresentation||t.FLOW_FROM,x=g&&g.rotationField||"Direction",v=t.FLOW_FROM;return{field:function(A){A=A.attributes[x];return k===v?A:A+180},type:"geographic"}},_addBreaks:function(g,k){if(!l.isDefined(this.renderer))return Error("Invalid Renderer!");if(!(g&&k&&g.length&&k.length&&g.length>=k.length))return Error("AddBreaks: Input arguments break values and colors not valid");var x;for(x=0;x<k.length;x++)this.renderer.addBreak({minValue:g[x],
maxValue:g[x+1],symbol:this._getDefaultSymbol(new m(k[x]))})},toJson:function(){var g=y.mixin(this.inherited(arguments),{type:"vectorField",style:this.style,attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,inputUnit:this.inputUnit,outputUnit:this.outputUnit});this.renderer&&this.renderer.defaultSymbol&&this.style===t.STYLE_SINGLE_ARROW&&(g.singleArrowSymbol=this.renderer.defaultSymbol.toJson());return l.fixJson(g)}});y.mixin(t,{STYLE_WIND_BARBS:"wind_speed",STYLE_SINGLE_ARROW:"single_arrow",
STYLE_CLASSIFIED_ARROW:"classified_arrow",STYLE_BEAUFORT_KN:"beaufort_kn",STYLE_BEAUFORT_METER:"beaufort_m",STYLE_BEAUFORT_MILE:"beaufort_mi",STYLE_BEAUFORT_FEET:"beaufort_ft",STYLE_BEAUFORT_KM:"beaufort_km",STYLE_OCEAN_CURRENT_M:"ocean_current_m",STYLE_OCEAN_CURRENT_KN:"ocean_current_kn",STYLE_SCALAR:"simple_scalar"},{FLOW_FROM:"flow_from",FLOW_TO:"flow_to"});c("extend-esri")&&y.setObject("renderer.VectorFieldRenderer",t,q);return t})},"esri/renderers/DotDensityRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Renderer ../symbols/PictureFillSymbol ../geometry/ScreenPoint ../geometry/Point".split(" "),
function(B,y,c,u,q,l,m,h,f,d,a,b,e){B=B(d,{declaredClass:"esri.renderer.DotDensityRenderer",constructor:function(r){this.dotSize=r.dotSize||3;this.dotValue=r.dotValue;this.fields=r.fields;this.outline=r.outline;this.backgroundColor=r.backgroundColor;this.exactCount=r.exactCount||!0;this.dotShape=r.dotShape||"square";this.legendOptions=r.legendOptions;this._exactCountMinArea=1E4;this._currentMapScale=this._map=this._canvas=null;this._symbolMap={};this._currentGraphic=this._currentResolution=this._objectIdField=
null;this._supportsCanvas=window.CanvasRenderingContext2D?!0:!1;window.CanvasRenderingContext2D||console.log("The DotDensityRenderer requires a Canvas enabled Browser.  IE8 and less does not support Canvas.")},getSymbol:function(r){this._currentGraphic=r;if(!this._supportsCanvas)return null;this._map||(this._map=r.getLayer()._map,this._objectIdField=r.getLayer().objectIdField,this._currentMapScale=this._map.getScale(),this._currentResolution=this._map.extent.getWidth()/this._map.width,this._map.on("zoom-end",
y.hitch(this,function(k){this._currentMapScale=this._map.getScale();this._currentResolution=k.extent.getWidth()/this._map.width;this._symbolMap[this._currentMapScale]={}})));if(this._symbolMap[this._currentMapScale]&&this._symbolMap[this._currentMapScale][r.attributes[this._objectIdField]]){var t=this._symbolMap[this._currentMapScale][r.attributes[this._objectIdField]];var g=this._getShapeProperties(r);t.setOffset(g.dx,g.dy);return t}t=this._generateFieldsCount(this.fields,r.attributes,this.dotValue);
g=this._getShapeProperties(r);if(!g.width||!g.height)return null;t=new a(this._generateImageSrc(g.width,g.height,t,g.minXY,g.maxXY),this.outline,g.width,g.height);t.setOffset(g.dx,g.dy);this._symbolMap[this._currentMapScale]||(this._symbolMap[this._currentMapScale]={});return this._symbolMap[this._currentMapScale][r.attributes[this._objectIdField]]=t},_generateFieldsCount:function(r,t,g){var k;for(k=r.length-1;0<=k;k--){var x=t[r[k].name]/g;r[k].numPoints=Math.round(x)}return r},_getShapeProperties:function(r){var t=
r.geometry.getExtent();t.contains(this._map.extent)&&(t=this._map.extent);var g=Math.ceil(t.getWidth()/this._currentResolution);var k=Math.ceil(t.getHeight()/this._currentResolution);var x=this._map.toScreen(new e(t.xmin,t.ymin,t.spatialReference));t=this._map.toScreen(new e(t.xmax,t.ymax,t.spatialReference));r=r.getLayer().getNavigationTransform();return{minXY:x,maxXY:t,dx:(x.x-r.dx)%g,dy:(t.y-r.dy)%k,width:g,height:k}},_generateImageSrc:function(r,t,g,k,x,v){var A=this.dotSize,n;this._canvas?(this._canvas.width=
r,this._canvas.height=t):this._canvas=this._initCanvas(r,t);var w=this._canvas.getContext("2d");if(v=v||this.backgroundColor)w.fillStyle=v.toCss(!0),w.fillRect(0,0,r,t),w.fill();for(v=g.length-1;0<=v;v--)for(w.fillStyle=g[v].color.toCss(!0),n=g[v].numPoints-1;0<=n;n--){var p=this._getRandomPoint(r,t,k,x);"square"===this.dotShape?w.fillRect(p.x,p.y,A,A):"circle"===this.dotShape&&(w.beginPath(),w.arc(p.x,p.y,A/2,0,2*Math.PI,!0));w.fill()}return this._canvas.toDataURL()},_initCanvas:function(r,t){r=
u.create("canvas",{id:"canvas",width:r+"px",height:t+"px",style:"position: absolute; left: -10000px; top: 0px;"},null);document.body.appendChild(r);return r},_getRandomInt:function(r,t){return Math.floor(Math.random()*(t-r+1)+r)},_getRandomPoint:function(r,t,g,k){var x={},v=this.outline&&this.outline.width?this.outline.width:0;if(!0===this.exactCount&&r*t>this._exactCountMinArea){r=!1;do x.x=this._getRandomInt(g.x,k.x),x.y=this._getRandomInt(k.y,g.y),r=new b(x.x,x.y),r=this._checkPointShapeBounds(r,
this.dotSize+v,this._currentGraphic.geometry),!0===r&&(x.x-=g.x,x.y-=k.y);while(!1===r)}else x.x=this._getRandomInt(0,r),x.y=this._getRandomInt(0,t);return x},_checkPointShapeBounds:function(r,t,g){var k=null;k=!1;var x=!0,v=0;do{switch(v){case 1:r.x+=t;break;case 2:r.y+=t;break;case 3:r.x-=t}k=this._map.toMap(r);k=g.contains(k);!1===k&&(x=!1);v+=1}while(3>=v&&!0===x);return k},setDotSize:function(r){0<r&&(this.dotSize=r)},setDotValue:function(r){0<r&&(this.dotValue=r)},setOutline:function(r){this.outline=
r},setBackgroundColor:function(r){this.backgroundColor=r},toJson:function(){var r=y.mixin(this.inherited(arguments),{type:"dotDensity",backgroundColor:f.toJsonColor(this.backgroundColor),dotShape:this.dotShape,dotSize:0<this.dotSize?l.px2pt(this.dotSize):0,dotValue:this.dotValue,fields:c.map(this.fields,function(t){return h.fixJson({color:f.toJsonColor(t.color),name:t.name})}),legendOptions:this.legendOptions&&h.fixJson({backgroundColor:f.toJsonColor(this.legendOptions.backgroundColor),dotCoverage:this.legendOptions.dotCoverage,
outline:this.legendOptions.outline&&this.legendOptions.outline.toJson(),valueUnit:this.legendOptions.valueUnit}),outline:this.outline&&this.outline.toJson()});return h.fixJson(r)}});q("extend-esri")&&y.setObject("renderer.DotDensityRenderer",B,m);return B})},"esri/renderers/ScaleDependentRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ./Renderer".split(" "),function(B,y,c,u,q,l,m){B=B(m,{declaredClass:"esri.renderer.ScaleDependentRenderer",
constructor:function(h){this.setRendererInfos(h&&h.rendererInfos||[])},setRendererInfos:function(h){this.rendererInfos=h;this._setRangeType();return this},getSymbol:function(h){var f=this.getRendererInfo(h);return f&&f.renderer&&f.renderer.getSymbol(h)},getRendererInfo:function(h){h=h.getLayer().getMap();return"zoom"===this.rangeType?this.getRendererInfoByZoom(h.getZoom()):this.getRendererInfoByScale(h.getScale())},getRendererInfoByZoom:function(h){var f=this.rendererInfos,d,a=0;do{var b=f[a];h>=
b.minZoom&&h<=b.maxZoom&&(d=b);a++}while(!d&&a<f.length);return d},getRendererInfoByScale:function(h){var f=this.rendererInfos,d,a=0;do{var b=f[a];var e=b.minScale;var r=b.maxScale;var t=!e;var g=!r;!t&&h<=e&&(t=!0);!g&&h>=r&&(g=!0);t&&g&&(d=b);a++}while(!d&&a<f.length);return d},addRendererInfo:function(h){var f=0,d=this.rendererInfos,a=h.hasOwnProperty("minZoom")?"minZoom":"minScale",b=d.length;do{var e=d[f];if(b===f||h[a]<e[a]){d.splice(f,0,h);this._setRangeType();var r=!0}f++}while(!r&&f<b);return this},
_setRangeType:function(){var h=this.rendererInfos;if(h=h&&h[0])this.rangeType=h.hasOwnProperty("minZoom")?"zoom":h.hasOwnProperty("minScale")?"scale":""},toJson:function(){if("zoom"===this.rangeType)return null;var h=this.rendererInfos||[],f=h[0]&&h[0].minScale;h=c.mixin(this.inherited(arguments),{type:"scaleDependent",minScale:0<f?f:0,rendererInfos:y.map(h,function(d){return l.fixJson({maxScale:0<d.maxScale?d.maxScale:0,renderer:d.renderer&&d.renderer.toJson()})})});return l.fixJson(h)}});u("extend-esri")&&
c.setObject("renderer.ScaleDependentRenderer",B,q);return B})},"esri/renderers/HeatmapRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct ../sniff ../kernel ../lang ../symbols/PictureMarkerSymbol ../Color ./Renderer".split(" "),function(B,y,c,u,q,l,m,h,f,d){B=B([d],{declaredClass:"esri.renderer.HeatmapRenderer",colors:null,blurRadius:10,maxPixelIntensity:100,minPixelIntensity:0,field:null,fieldOffset:null,colorStops:null,constructor:function(a){(this._supportsCanvas=
window.CanvasRenderingContext2D?!0:!1)?("string"==typeof a&&(a=JSON.parse(a)),y.mixin(this,a),this._canvas=null,this.colors||this.colorStops||(this.colorStops=[{ratio:0,color:"rgba(255, 140, 0, 0)"},{ratio:.75,color:"rgba(255, 140, 0, 1)"},{ratio:.9,color:"rgba(255, 0,   0, 1)"}]),this.gradient=this._generateGradient(this.colorStops||this.colors)):console.log("The HeatmapRenderer requires a Canvas enabled Browser.  IE8 and less does not support Canvas.")},getSymbol:function(a){if(!this._supportsCanvas)return!1;
var b=a.attributes.imageData;a=a.attributes.size;if(!a)return null;var e=this._getContext(a[0],a[1]),r=e.getImageData(0,0,a[0],a[1]);window.ArrayBuffer&&b instanceof ArrayBuffer?b=window.Uint8ClampedArray?new Uint8ClampedArray(b):new Uint8Array(b):b.BYTES_PER_ELEMENT&&1!==b.BYTES_PER_ELEMENT&&(b=window.Uint8ClampedArray?new Uint8ClampedArray(b.buffer):new Uint8Array(b.buffer));if(window.CanvasPixelArray&&r.data instanceof window.CanvasPixelArray)for(var t=r.data,g=t.length;g--;)t[g]=b[g];else r.data.set(b);
e.putImageData(r,0,0);return new h(e.canvas.toDataURL(),a[0],a[1])},setColors:function(a){a&&(a instanceof Array||a.colors)&&(this.gradient=this._generateGradient(a.colors||a),this.colors=a);return this},setColorStops:function(a){a&&(a instanceof Array||a.colorStops)&&(this.gradient=this._generateGradient(a.colorStops||a),this.colorStops=a);return this},setMaxPixelIntensity:function(a){this.maxPixelIntensity=a;return this},setMinPixelIntensity:function(a){this.minPixelIntensity=a;return this},setField:function(a){this.field=
a;return this},setFieldOffset:function(a){this.fieldOffset=a;return this},setBlurRadius:function(a){this.blurRadius=a;return this},getStats:function(){},getHistogramData:function(){},toJson:function(){var a=y.mixin(this.inherited(arguments),{type:"heatmap",blurRadius:this.blurRadius,colorStops:this._colorsToStops(this.colorStops||this.colors),maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity,field:this.field});null!=this.fieldOffset&&(a.fieldOffset=this.fieldOffset);
c.forEach(a.colorStops,function(b){b.color=f.toJsonColor(b.color)});return m.fixJson(a)},_getContext:function(a,b){this._canvas?(this._canvas.width=a,this._canvas.height=b):this._canvas=this._initCanvas(a,b);return this._canvas.getContext("2d")},_initCanvas:function(a,b){var e=u.create("canvas",{id:"hm_canvas-"+Math.floor(1E3*Math.random()),style:"position: absolute; left: 0px; top: -10000px;"},null);e.width=a;e.height=b;document.body.appendChild(e);return e},_generateGradient:function(a,b){b||(b=
512);a=this._colorsToStops(a);for(var e=this._getContext(1,b||512),r=e.createLinearGradient(0,0,0,b),t=0,g;t<a.length;t++)g=a[t],r.addColorStop(g.ratio,g.color.toCss(!0));e.fillStyle=r;e.fillRect(0,0,1,b);return e.getImageData(0,0,1,b).data},_colorsToStops:function(a){var b=[];if(!a[0])return b;if(null!=a[0].ratio)b=c.map(a,function(x){return{ratio:x.ratio,color:this._toColor(x.color)}},this);else if(null!=a[0].value){var e=Infinity;b=-Infinity;var r=0,t;for(t=0;t<a.length;t++){var g=a[t].value;g<
e&&(e=g);g>b&&(b=g)}r=b-e;this.maxPixelIntensity=b;this.minPixelIntensity=e;b=c.map(a,function(x){var v=x.value;x=this._toColor(x.color);return{value:v,ratio:(v-e)/r,color:x}},this)}else{var k=a.length-1;b=c.map(a,function(x,v){return{color:this._toColor(x),ratio:v/k}},this)}return b},_toColor:function(a){a.toRgba||a.declaredClass||(a=new f(a));return a}});q("extend-esri")&&y.setObject("renderer.HeatmapRenderer",B,l);return B})},"esri/renderers/ShadedReliefRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../layers/RasterFunction ./colorRampUtils".split(" "),
function(B,y,c,u,q,l,m,h){B=B(null,{declaredClass:"esri.renderer.ShadedReliefRenderer",constructor:function(f){f=f||{};this.hillshadeType=f.hillshadeType||"traditional";this.azimuth=null!=f.azimuth?f.azimuth:315;this.altitude=null!=f.altitude?f.altitude:45;this.zFactor=f.zFactor||1;this.scalingType=f.scalingType||"none";this.pixelSizePower=null!=f.pixelSizePower?f.pixelSizePower:.664;this.pixelSizeFactor=null!=f.pixelSizeFactor?f.pixelSizeFactor:.024;this.removeEdgeEffect=f.removeEdgeEffect||!1;this.colorRamp=
h.fromJson(f.colorRamp)},toJson:function(){var f={type:"rasterShadedRelief",hillshadeType:this.hillshadeType,azimuth:this.azimuth,altitude:this.altitude,zFactor:this.zFactor,scalingType:this.scalingType,pixelSizePower:this.pixelSizePower,pixelSizeFactor:this.pixelSizeFactor,colorRamp:this.colorRamp&&this.colorRamp.toJson()};return l.fixJson(f)},toRenderingRule:function(f){}});u("extend-esri")&&c.setObject("renderer.ShadedReliefRenderer",B,q);return B})},"esri/renderers/ColormapRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ./arcadeUtils".split(" "),
function(B,y,c,u,q,l,m,h,f){B=B(h,{declaredClass:"esri.renderer.ColormapRenderer",constructor:function(d){this.colormapInfos=d&&d.colormapInfos},toJson:function(){var d=l.fixJson;var a={type:"rasterColormap",colormapInfos:y.map(this.colormapInfos||[],function(b,e){var r={};b.color&&null!==b.color&&3<=b.color.length&&(r.color=b.color,r.value=b.value||e,r.label=(b.label||e)+"");return d(r)})};a=c.mixin(this.inherited(arguments),a);return d(a)}});u("extend-esri")&&c.setObject("renderer.ColormapRenderer",
B,q);return B})},"esri/renderers/arcadeUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","../support/expressionUtils"],function(B,y,c,u){y("extend-esri")&&B.setObject("renderer.arcadeUtils",u,c);return u})},"esri/utils":function(){define("./domUtils ./lang ./urlUtils ./request ./tileUtils ./graphicsUtils ./deferredUtils ./layerUtils ./geometry/normalizeUtils".split(" "),function(){return{}})},"esri/graphicsUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has",
"./kernel","./geometry/Extent"],function(B,y,c,u,q){var l={graphicsExtent:function(m){if(!m||!m.length)return null;var h=null,f,d=m.length;for(f=0;f<d;f++){var a=m[f].geometry;if(a){var b=a.getExtent();b||"point"!==a.type||null==a.x||null==a.y||(b=new q(a.x,a.y,a.x,a.y,a.spatialReference));b&&(h=h?h.union(b):b)}}return 0>h.getWidth()&&0>h.getHeight()?null:h},getGeometries:function(m){return y.map(m,function(h){return h.geometry})},_encodeGraphics:function(m,h){return y.map(m,function(f,d){f=f.toJson();
var a={};f.geometry&&(d=h&&h[d],a.geometry=d&&d.toJson()||f.geometry);f.attributes&&(a.attributes=f.attributes);return a})}};c("extend-esri")&&B.mixin(u,l);return l})},"esri/IdentityManager":function(){define(["./IdentityManagerDialog","./kernel","./OAuthSignInHandler","dojo/_base/declare"],function(B,y,c,u){B=new B;y.id=u.safeMixin(B,c);return y.id})},"esri/IdentityManagerDialog":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/has dojo/dom-attr dojo/keys dijit/registry dijit/Dialog ./kernel ./lang ./domUtils ./Credential ./IdentityManagerBase dojo/i18n!./nls/jsapi dojo/query dijit/form/Button dijit/form/Form dijit/form/ValidationTextBox".split(" "),
function(B,y,c,u,q,l,m,h,f,d,a,b,e,r,t,g){y=y([t],{declaredClass:"esri.IdentityManager",_eventMap:{"dialog-cancel":["info"]},constructor:function(k){q.mixin(this,k);this.registerConnectEvents()},_dialogContent:"\x3cdiv data-dojo-type\x3d'dijit.form.Form' data-dojo-props\x3d'\"class\":\"esriIdForm\"'\x3e\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${info}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3ctable style\x3d'width: 100%;'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblUser}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"text\", \"class\":\"esriIdUser\", required:true, trim:true, style:\"width: 100%;\", autocapitalize:\"none\", autocorrect:\"off\", spellcheck:false' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblPwd}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"password\", \"class\":\"esriIdPwd\", required:true, style:\"width: 100%;\"' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e",
onDialogCreate:function(){},onDialogCancel:function(){},signIn:function(k,x,v){this._nls||(this._nls=g.identity);this._loginDialog||(this._loginDialog=this.dialog=this._createLoginDialog(),this.onDialogCreate());var A=this._loginDialog,n=v&&v.error,w=v&&v.token,p=new u(function(){A.onCancel()});if(A.open)return k=Error("BUSY"),k.code="IdentityManager.1",k.log=!!c.isDebug,p.errback(k),p;e.hide(A.errMsg_);n&&403==n.code&&w&&(m.set(A.errMsg_,"innerHTML",this._nls.forbidden),e.show(A.errMsg_));A.dfd_=
p;A.serverInfo_=x;A.resUrl_=k;A.admin_=v&&v.isAdmin;m.set(A.resLink_,{title:k,innerHTML:"("+(this.getResourceName(k)||this._nls.lblItem)+")"});m.set(A.serverLink_,{title:x.server,innerHTML:(-1!==x.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":x.server)+" "});A.txtPwd_.set("value","");A.show();return p},_createLoginDialog:function(){var k=this._nls,x=b.substitute(k,this._dialogContent);x=b.substitute({resource:"\x3cspan class\x3d'resLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e",
server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},x);var v=new d({title:k.title,content:x,"class":"esriSignInDialog",style:"width: 18em;",esriIdMgr_:this,keypressed_:function(A){A.charOrCode===h.ENTER&&this.execute_()},execute_:function(){var A=this.txtUser_.get("value"),n=this.txtPwd_.get("value"),w=this.dfd_,p=this;if(this.form_.validate()&&A&&n){this.btnSubmit_.set("label",k.lblSigning);var D=a.id.findCredential(p.resUrl_,A),C=function(G){p.btnSubmit_.set("label",
k.lblOk);p.btnSubmit_.set("disabled",!1);e.hide(p.errMsg_);p.hide();d._DialogLevelManager.hide(p);var z=p.serverInfo_;p.dfd_=p.serverInfo_=p.generateDfd_=p.resUrl_=null;var E=D;if(G){var H=G.token;var I=b.isDefined(G.expires)?Number(G.expires):null;var M=!!G.ssl;E?(E.userId=A,E.token=H,E.expires=I,E.validity=G.validity,E.ssl=M,E.creationTime=(new Date).getTime()):E=new r({userId:A,server:z.server,token:H,expires:I,ssl:M,isAdmin:p.admin_,validity:G.validity})}w.callback(E)};D&&!D._enqueued?C():(p.btnSubmit_.set("disabled",
!0),p.generateDfd_=a.id.generateToken(this.serverInfo_,{username:A,password:n},{isAdmin:this.admin_}).addCallback(C).addErrback(function(G){p.btnSubmit_.set("disabled",!1);p.generateDfd_=null;p.btnSubmit_.set("label",k.lblOk);m.set(p.errMsg_,"innerHTML",G&&G.code?k.invalidUser:k.noAuthService);e.show(p.errMsg_)}))}},cancel_:function(){v.generateDfd_&&v.generateDfd_.cancel();var A=v.dfd_,n=v.resUrl_,w=v.serverInfo_;v.btnSubmit_.set("disabled",!1);v.dfd_=v.serverInfo_=v.generateDfd_=v.resUrl_=null;
e.hide(v.errMsg_);d._DialogLevelManager.hide(v);v.esriIdMgr_.onDialogCancel({resourceUrl:n,serverInfo:w});n=Error("ABORTED");n.code="IdentityManager.2";n.log=!!c.isDebug;A.errback(n)}});x=v.domNode;v.form_=f.byNode(B.query(".esriIdForm",x)[0]);v.txtUser_=f.byNode(B.query(".esriIdUser",x)[0]);v.txtPwd_=f.byNode(B.query(".esriIdPwd",x)[0]);v.btnSubmit_=f.byNode(B.query(".esriIdSubmit",x)[0]);v.btnCancel_=f.byNode(B.query(".esriIdCancel",x)[0]);v.resLink_=B.query(".resLink",x)[0];v.serverLink_=B.query(".serverLink",
x)[0];v.errMsg_=B.query(".esriErrorMsg",x)[0];v.connect(v.txtUser_,"onKeyPress",v.keypressed_);v.connect(v.txtPwd_,"onKeyPress",v.keypressed_);v.connect(v.btnSubmit_,"onClick",v.execute_);v.connect(v.btnCancel_,"onClick",v.onCancel);v.connect(v,"onCancel",v.cancel_);return v}});l("extend-esri")&&(a.IdentityManagerDialog=a.IdentityManager=y);return y})},"dijit/Dialog":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/touch dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane ./layout/utils dojo/text!./templates/Dialog.html ./a11yclick dojo/i18n!./nls/common".split(" "),
function(B,y,c,u,q,l,m,h,f,d,a,b,e,r,t,g,k,x,v,A,n,w,p,D,C,G,z,E,H,I,M){function T(){}var Y=new q;Y.resolve(!0);w=u("dijit._DialogBase"+(g("dojo-bidi")?"_NoBidi":""),[D,G,z,C],{templateString:M,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:w.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(ea){this._set("draggable",ea)},maxRatio:.9,
closable:!0,_setClosableAttr:function(ea){this.closeButtonNode.style.display=ea?"":"none";this._set("closable",ea)},postMixInProperties:function(){var ea=a.getLocalization("dijit","common");e.mixin(this,ea);this.inherited(arguments)},postCreate:function(){f.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);c.after(this,"onExecute",e.hitch(this,"hide"),!0);c.after(this,"onCancel",e.hitch(this,"hide"),!0);r(this.closeButtonNode,
k.press,function(ea){ea.stopPropagation()});this._modalconnects=[]},onLoad:function(){this.resize();this._position();this.autofocus&&ca.isTop(this)&&(this._getFocusItems(),n.focus(this._firstFocusItem));this.inherited(arguments)},focus:function(){this._getFocusItems();n.focus(this._firstFocusItem)},_endDrag:function(){var ea=h.position(this.domNode),ma=x.getBox(this.ownerDocument);ea.y=Math.min(Math.max(ea.y,0),ma.h-ea.h);ea.x=Math.min(Math.max(ea.x,0),ma.w-ea.w);this._relativePosition=ea;this._position()},
_setup:function(){var ea=this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==g("ie")?A:v)(ea,{handle:this.titleBar}),c.after(this._moveable,"onMoveStop",e.hitch(this,"_endDrag"),!0)):m.add(ea,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":y.map(this["class"].split(/\s/),function(ma){return ma+"_underlay"}).join(" "),_onKeyDown:e.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!m.contains(this.ownerDocumentBody,
"dojoMove")){var ea=this.domNode,ma=x.getBox(this.ownerDocument),wa=this._relativePosition,P=h.position(ea);f.set(ea,{left:Math.floor(ma.l+(wa?Math.min(wa.x,ma.w-P.w):(ma.w-P.w)/2))+"px",top:Math.floor(ma.t+(wa?Math.min(wa.y,ma.h-P.h):(ma.h-P.h)/2))+"px"})}},_onKey:function(ea){if(ea.keyCode==b.TAB){this._getFocusItems();var ma=ea.target;this._firstFocusItem==this._lastFocusItem?(ea.stopPropagation(),ea.preventDefault()):ma==this._firstFocusItem&&ea.shiftKey?(n.focus(this._lastFocusItem),ea.stopPropagation(),
ea.preventDefault()):ma!=this._lastFocusItem||ea.shiftKey||(n.focus(this._firstFocusItem),ea.stopPropagation(),ea.preventDefault())}else this.closable&&ea.keyCode==b.ESCAPE&&(this.onCancel(),ea.stopPropagation(),ea.preventDefault())},show:function(){if(this.open)return Y.promise;this._started||this.startup();this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0);this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),ca.hide(this));var ea=x.get(this.ownerDocument);this._modalconnects.push(r(ea,
"scroll",e.hitch(this,"resize",null)));this._modalconnects.push(r(this.domNode,"keydown",e.hitch(this,"_onKey")));f.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this.resize();this._position();this._fadeInDeferred=new q(e.hitch(this,function(){ma.stop();delete this._fadeInDeferred}));this._fadeInDeferred.then(void 0,T);ea=this._fadeInDeferred.promise;var ma=d.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:e.hitch(this,function(){ca.show(this,this.underlayAttrs)}),
onEnd:e.hitch(this,function(){this.autofocus&&ca.isTop(this)&&(this._getFocusItems(),n.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return ea},hide:function(){if(!this._alreadyInitialized||!this.open)return Y.promise;this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred=new q(e.hitch(this,function(){ma.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(void 0,T);this._fadeOutDeferred.then(e.hitch(this,"onHide"));
var ea=this._fadeOutDeferred.promise;var ma=d.fadeOut({node:this.domNode,duration:this.duration,onEnd:e.hitch(this,function(){this.domNode.style.display="none";ca.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();this._scrollConnected&&(this._scrollConnected=!1);for(var wa;wa=this._modalconnects.pop();)wa.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return ea},resize:function(ea){if("none"!=this.domNode.style.display){this._checkIfSingleChild();
if(!ea){this._shrunk&&(this._singleChild&&"undefined"!=typeof this._singleChildOriginalStyle&&(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),y.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(ja){ja&&f.set(ja,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");var ma=x.getBox(this.ownerDocument);ma.w*=this.maxRatio;ma.h*=this.maxRatio;var wa=h.position(this.domNode);
this._shrunk=!1;wa.w>=ma.w&&(ea={w:ma.w},h.setMarginBox(this.domNode,ea),wa=h.position(this.domNode),this._shrunk=!0);wa.h>=ma.h&&(ea||(ea={w:wa.w}),ea.h=ma.h,this._shrunk=!0);ea&&(ea.w||(ea.w=wa.w),ea.h||(ea.h=wa.h))}if(ea){h.setMarginBox(this.domNode,ea);ma=[];this.titleBar&&ma.push({domNode:this.titleBar,region:"top"});this.actionBarNode&&ma.push({domNode:this.actionBarNode,region:"bottom"});wa={domNode:this.containerNode,region:"center"};ma.push(wa);var P=I.marginBox2contentBox(this.domNode,ea);
I.layoutChildren(this.domNode,P,ma);this._singleChild?(ma=I.marginBox2contentBox(this.containerNode,wa),this._singleChild.resize({w:ma.w,h:ma.h})):(this.containerNode.style.overflow="auto",this._layoutChildren())}else this._layoutChildren();g("touch")||ea||this._position()}},_layoutChildren:function(){y.forEach(this.getChildren(),function(ea){ea.resize&&ea.resize()})},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&
this._moveable.destroy();for(var ea;ea=this._modalconnects.pop();)ea.remove();ca.hide(this);this.inherited(arguments)}});g("dojo-bidi")&&(w=u("dijit._DialogBase",w,{_setTitleAttr:function(ea){this._set("title",ea);this.titleNode.innerHTML=ea;this.applyTextDir(this.titleNode)},_setTextDirAttr:function(ea){this._created&&this.textDir!=ea&&(this._set("textDir",ea),this.set("title",this.title))}}));var fa=u("dijit.Dialog",[H,w],{});fa._DialogBase=w;var ca=fa._DialogLevelManager={_beginZIndex:950,show:function(ea,
ma){X[X.length-1].focus=n.curNode;var wa=X[X.length-1].dialog?X[X.length-1].zIndex+2:fa._DialogLevelManager._beginZIndex;f.set(ea.domNode,"zIndex",wa);E.show(ma,wa-1);X.push({dialog:ea,underlayAttrs:ma,zIndex:wa})},hide:function(ea){if(X[X.length-1].dialog==ea){X.pop();var ma=X[X.length-1];1==X.length?E.hide():E.show(ma.underlayAttrs,ma.zIndex-1);if(ea.refocus&&(ea=ma.focus,!ma.dialog||ea&&l.isDescendant(ea,ma.dialog.domNode)||(ma.dialog._getFocusItems(),ea=ma.dialog._firstFocusItem),ea))try{ea.focus()}catch(wa){}}else ma=
y.indexOf(y.map(X,function(wa){return wa.dialog}),ea),-1!=ma&&X.splice(ma,1)},isTop:function(ea){return X[X.length-1].dialog==ea}},X=fa._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];n.watch("curNode",function(ea,ma,wa){ea=X[X.length-1].dialog;if(wa&&ea&&!ea._fadeOutDeferred&&wa.ownerDocument==ea.ownerDocument){do if(wa==ea.domNode||m.contains(wa,"dijitPopup"))return;while(wa=wa.parentNode);ea.focus()}});g("dijit-legacy-requires")&&t(0,function(){B(["dijit/TooltipDialog"])});return fa})},
"dojo/dnd/Moveable":function(){define("../_base/array ../_base/declare ../_base/lang ../dom ../dom-class ../Evented ../has ../on ../topic ../touch ./common ./Mover ../_base/window".split(" "),function(B,y,c,u,q,l,m,h,f,d,a,b,e){function r(k,x){"touchAction"in document.body.style?t="touchAction":"msTouchAction"in document.body.style&&(t="msTouchAction");g=function(v,A){v.style[t]=A};g(k,x)}var t,g=function(){};m("touch-action")&&(g=r);return y("dojo.dnd.Moveable",[l],{handle:"",delay:0,skip:!1,constructor:function(k,
x){this.node=u.byId(k);g(this.node,"none");x||(x={});this.handle=x.handle?u.byId(x.handle):null;this.handle||(this.handle=this.node);this.delay=0<x.delay?x.delay:0;this.skip=x.skip;this.mover=x.mover?x.mover:b;this.events=[h(this.handle,d.press,c.hitch(this,"onMouseDown")),h(this.handle,"dragstart",c.hitch(this,"onSelectStart")),h(this.handle,"selectstart",c.hitch(this,"onSelectStart"))]},markupFactory:function(k,x,v){return new v(x,k)},destroy:function(){B.forEach(this.events,function(k){k.remove()});
g(this.node,"");this.events=this.node=this.handle=null},onMouseDown:function(k){if(!this.skip||!a.isFormElement(k)){if(this.delay)this.events.push(h(this.handle,d.move,c.hitch(this,"onMouseMove")),h(this.handle.ownerDocument,d.release,c.hitch(this,"onMouseUp"))),this._lastX=k.pageX,this._lastY=k.pageY;else this.onDragDetected(k);k.stopPropagation();k.preventDefault()}},onMouseMove:function(k){if(Math.abs(k.pageX-this._lastX)>this.delay||Math.abs(k.pageY-this._lastY)>this.delay)this.onMouseUp(k),this.onDragDetected(k);
k.stopPropagation();k.preventDefault()},onMouseUp:function(k){for(var x=0;2>x;++x)this.events.pop().remove();k.stopPropagation();k.preventDefault()},onSelectStart:function(k){this.skip&&a.isFormElement(k)||(k.stopPropagation(),k.preventDefault())},onDragDetected:function(k){new this.mover(this.node,k,this)},onMoveStart:function(k){f.publish("/dnd/move/start",k);q.add(e.body(),"dojoMove");q.add(this.node,"dojoMoveItem")},onMoveStop:function(k){f.publish("/dnd/move/stop",k);q.remove(e.body(),"dojoMove");
q.remove(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(k,x){this.onMoving(k,x);var v=k.node.style;v.left=x.l+"px";v.top=x.t+"px";this.onMoved(k,x)},onMoving:function(){},onMoved:function(){}})})},"dojo/dnd/common":function(){define(["../sniff","../_base/kernel","../_base/lang","../dom"],function(B,y,c,u){var q=c.getObject("dojo.dnd",!0);q.getCopyKeyState=function(l){return l[B("mac")?"metaKey":"ctrlKey"]};q._uniqueId=0;q.getUniqueId=function(){do var l=y._scopeName+"Unique"+
++q._uniqueId;while(u.byId(l));return l};q._empty={};q.isFormElement=function(l){l=l.target;3==l.nodeType&&(l=l.parentNode);return 0<=" a button textarea input select option ".indexOf(" "+l.tagName.toLowerCase()+" ")};return q})},"dojo/dnd/Mover":function(){define("../_base/array ../_base/declare ../_base/lang ../sniff ../_base/window ../dom ../dom-geometry ../dom-style ../Evented ../on ../touch ./common ./autoscroll".split(" "),function(B,y,c,u,q,l,m,h,f,d,a,b,e){return y("dojo.dnd.Mover",[f],{constructor:function(r,
t,g){function k(x){x.preventDefault();x.stopPropagation()}this.node=l.byId(r);this.marginBox={l:t.pageX,t:t.pageY};this.mouseButton=t.button;t=this.host=g;r=r.ownerDocument;this.events=[d(r,a.move,c.hitch(this,"onFirstMove")),d(r,a.move,c.hitch(this,"onMouseMove")),d(r,a.release,c.hitch(this,"onMouseUp")),d(r,"dragstart",k),d(r.body,"selectstart",k)];e.autoScrollStart(r);if(t&&t.onMoveStart)t.onMoveStart(this)},onMouseMove:function(r){e.autoScroll(r);var t=this.marginBox;this.host.onMove(this,{l:t.l+
r.pageX,t:t.t+r.pageY},r);r.preventDefault();r.stopPropagation()},onMouseUp:function(r){(u("webkit")&&u("mac")&&2==this.mouseButton?0==r.button:this.mouseButton==r.button)&&this.destroy();r.preventDefault();r.stopPropagation()},onFirstMove:function(r){var t=this.node.style,g=this.host;switch(t.position){case "relative":case "absolute":var k=Math.round(parseFloat(t.left))||0;t=Math.round(parseFloat(t.top))||0;break;default:t.position="absolute";t=m.getMarginBox(this.node);k=q.doc.body;var x=h.getComputedStyle(k),
v=m.getMarginBox(k,x);x=m.getContentBox(k,x);k=t.l-(x.l-v.l);t=t.t-(x.t-v.t)}this.marginBox.l=k-this.marginBox.l;this.marginBox.t=t-this.marginBox.t;if(g&&g.onFirstMove)g.onFirstMove(this,r);this.events.shift().remove()},destroy:function(){B.forEach(this.events,function(t){t.remove()});var r=this.host;if(r&&r.onMoveStop)r.onMoveStop(this);this.events=this.node=this.host=null}})})},"dojo/dnd/autoscroll":function(){define("../_base/lang ../sniff ../_base/window ../dom-geometry ../dom-style ../window".split(" "),
function(B,y,c,u,q,l){var m={};B.setObject("dojo.dnd.autoscroll",m);m.getViewport=l.getBox;m.V_TRIGGER_AUTOSCROLL=32;m.H_TRIGGER_AUTOSCROLL=32;m.V_AUTOSCROLL_VALUE=16;m.H_AUTOSCROLL_VALUE=16;var h,f=c.doc,d=Infinity,a=Infinity;m.autoScrollStart=function(b){f=b;h=l.getBox(f);b=c.body(f).parentNode;d=Math.max(b.scrollHeight-h.h,0);a=Math.max(b.scrollWidth-h.w,0)};m.autoScroll=function(b){var e=h||l.getBox(f),r=c.body(f).parentNode,t=0,g=0;b.clientX<m.H_TRIGGER_AUTOSCROLL?t=-m.H_AUTOSCROLL_VALUE:b.clientX>
e.w-m.H_TRIGGER_AUTOSCROLL&&(t=Math.min(m.H_AUTOSCROLL_VALUE,a-r.scrollLeft));b.clientY<m.V_TRIGGER_AUTOSCROLL?g=-m.V_AUTOSCROLL_VALUE:b.clientY>e.h-m.V_TRIGGER_AUTOSCROLL&&(g=Math.min(m.V_AUTOSCROLL_VALUE,d-r.scrollTop));window.scrollBy(t,g)};m._validNodes={div:1,p:1,td:1};m._validOverflow={auto:1,scroll:1};m.autoScrollNodes=function(b){for(var e,r,t,g,k,x=0,v=0,A=b.target;A;){if(1==A.nodeType&&A.tagName.toLowerCase()in m._validNodes){t=q.getComputedStyle(A);k=t.overflowX.toLowerCase()in m._validOverflow;
g=t.overflowY.toLowerCase()in m._validOverflow;if(k||g)e=u.getContentBox(A,t),r=u.position(A,!0);if(k){t=Math.min(m.H_TRIGGER_AUTOSCROLL,e.w/2);k=b.pageX-r.x;if(y("webkit")||y("opera"))k+=c.body().scrollLeft;x=0;0<k&&k<e.w&&(k<t?x=-t:k>e.w-t&&(x=t),A.scrollLeft+=x)}if(g){g=Math.min(m.V_TRIGGER_AUTOSCROLL,e.h/2);t=b.pageY-r.y;if(y("webkit")||y("opera"))t+=c.body().scrollTop;v=0;0<t&&t<e.h&&(t<g?v=-g:t>e.h-g&&(v=g),A.scrollTop+=v)}if(x||v)return}try{A=A.parentNode}catch(n){A=null}}m.autoScroll(b)};
return m})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(B,y){var c=y.prototype.onMove;return B("dojo.dnd.TimedMoveable",y,{timeout:40,constructor:function(u,q){q||(q={});q.timeout&&"number"==typeof q.timeout&&0<=q.timeout&&(this.timeout=q.timeout)},onMoveStop:function(u){u._timer&&(clearTimeout(u._timer),c.call(this,u,u._leftTop));y.prototype.onMoveStop.apply(this,arguments)},onMove:function(u,q){u._leftTop=q;if(!u._timer){var l=this;u._timer=setTimeout(function(){u._timer=
null;c.call(l,u,u._leftTop)},this.timeout)}}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),function(B,y,c,u,q,l,m,h,f,d,a,b){var e=B("dijit.DialogUnderlay",[h,f],{templateString:"\x3cdiv class\x3d'dijitDialogUnderlayWrapper'\x3e\x3cdiv class\x3d'dijitDialogUnderlay' tabIndex\x3d'-1' data-dojo-attach-point\x3d'node'\x3e\x3c/div\x3e\x3c/div\x3e",
dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(r){u.set(this.node,"id",r+"_underlay");this._set("dialogId",r)},_setClassAttr:function(r){this.node.className="dijitDialogUnderlay "+r;this._set("class",r)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.own(l(this.domNode,"keydown",y.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var r=this.node.style,t=this.domNode.style;t.display="none";var g=m.getBox(this.ownerDocument);t.top=
g.t+"px";t.left=g.l+"px";r.width=g.w+"px";r.height=g.h+"px";t.display="block"},show:function(){this.domNode.style.display="block";this.open=!0;this.layout();this.bgIframe=new d(this.domNode);var r=m.get(this.ownerDocument);this._modalConnects=[a.on("resize",y.hitch(this,"layout")),l(r,"scroll",y.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;for(this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();
this.inherited(arguments)},_onKeyDown:function(){}});e.show=function(r,t){var g=e._singleton;!g||g._destroyed?g=b._underlay=e._singleton=new e(r):r&&g.set(r);q.set(g.domNode,"zIndex",t);g.open||g.show()};e.hide=function(){var r=e._singleton;r&&!r._destroyed&&r.hide()};return e})},"esri/Credential":function(){define(["dojo/_base/declare","dojo/has","./kernel","./IdentityManagerBase"],function(B,y,c,u){B=B(u.Credential,{});y("extend-esri")&&(c.Credential=B);return B})},"esri/IdentityManagerBase":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/url dojo/sniff dojo/cookie dojo/io-query dojo/on dojo/regexp ./kernel ./config ./lang ./ServerInfo ./urlUtils ./deferredUtils ./request ./Evented ./OAuthCredential ./arcgis/OAuthInfo".split(" "),
function(B,y,c,u,q,l,m,h,f,d,a,b,e,r,t,g,k,x,v,A,n){var w={},p=function(z){var E=(new l(z.owningSystemUrl)).host;z=(new l(z.server)).host;var H=/.+\.arcgis\.com$/i;return H.test(E)&&H.test(z)},D=function(z,E){return!!(p(z)&&E&&u.some(E,function(H){return H.test(z.server)}))},C=B(v,{declaredClass:"esri.IdentityManagerBase",constructor:function(){this._portalConfig=c.getObject("esriGeowConfig");this.serverInfos=[];this.oAuthInfos=[];this.credentials=[];this._soReqs=[];this._xoReqs=[];this._portals=
[];this._getOAuthHash();d(window,"pageshow",c.hitch(this,this._pageShowHandler))},defaultOAuthInfo:null,defaultTokenValidity:60,tokenValidity:null,signInPage:null,useSignInPage:!0,normalizeWebTierAuth:!1,_busy:null,_rejectOnPersistedPageShow:!1,_oAuthHash:null,_gwTokenUrl:"/sharing/generateToken",_agsRest:"/rest/services",_agsPortal:/\/sharing(\/|$)/i,_agsAdmin:/(https?:\/\/[^\/]+\/[^\/]+)\/admin\/?(\/.*)?$/i,_adminSvcs:/\/rest\/admin\/services(\/|$)/i,_gwDomains:[{regex:/^https?:\/\/www\.arcgis\.com/i,
customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:dev|[a-z\d-]+\.mapsdev)\.arcgis\.com/i,customBaseUrl:"mapsdev.arcgis.com",tokenServiceUrl:"https://dev.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:devext|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,customBaseUrl:"mapsdevext.arcgis.com",tokenServiceUrl:"https://devext.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:qaext|[a-z\d-]+\.mapsqa)\.arcgis\.com/i,customBaseUrl:"mapsqa.arcgis.com",
tokenServiceUrl:"https://qaext.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/[a-z\d-]+\.maps\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"}],_legacyFed:[],_regexSDirUrl:/http.+\/rest\/services\/?/ig,_regexServerType:/(\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|MapServer|MobileServer|NAServer|NetworkDiagramServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer)).*/ig,
_gwUser:/http.+\/users\/([^\/]+)\/?.*/i,_gwItem:/http.+\/items\/([^\/]+)\/?.*/i,_gwGroup:/http.+\/groups\/([^\/]+)\/?.*/i,_errorCodes:[499,498,403,401],_rePortalTokenSvc:/\/sharing(\/rest)?\/generatetoken/i,_publicUrls:[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],_createDefaultOAuthInfo:!0,_hasTestedIfAppIsOnPortal:!1,registerServers:function(z){var E=this.serverInfos;E?(z=u.filter(z,function(H){return!this.findServerInfo(H.server)},this),this.serverInfos=E.concat(z)):
this.serverInfos=z;u.forEach(z,function(H){H.owningSystemUrl&&this._portals.push(H.owningSystemUrl);if(H.hasPortal){this._portals.push(H.server);var I=e.defaults.io.corsEnabledServers,M=this._getOrigin(H.tokenServiceUrl);g.canUseXhr(H.server)||I.push(H.server.replace(/^https?:\/\//i,""));g.canUseXhr(M)||I.push(M.replace(/^https?:\/\//i,""))}},this)},registerOAuthInfos:function(z){var E=this.oAuthInfos;E?(z=u.filter(z,function(H){return!this.findOAuthInfo(H.portalUrl)},this),this.oAuthInfos=E.concat(z)):
this.oAuthInfos=z},registerToken:function(z){z=r.mixin({},z);var E=this._sanitizeUrl(z.server),H=this.findServerInfo(E),I=!0,M;H||(H=new t,H.server=this._getServerInstanceRoot(E),H.tokenServiceUrl=this._getTokenSvcUrl(E),H.hasPortal=!0,this.registerServers([H]));(M=this.findCredential(E,z.userId))?(delete z.server,c.mixin(M,z),I=!1):(M=new G({userId:z.userId,server:H.server,token:z.token,expires:z.expires,ssl:z.ssl,scope:this._isServerRsrc(E)?"server":"portal"}),M.resources=[E],this.credentials.push(M));
M.onTokenChange(!1);I||M.refreshServerTokens()},toJson:function(){return r.fixJson({serverInfos:u.map(this.serverInfos,function(z){return z.toJson()}),oAuthInfos:u.map(this.oAuthInfos,function(z){return z.toJson()}),credentials:u.map(this.credentials,function(z){return z.toJson()})})},initialize:function(z){if(z){c.isString(z)&&(z=JSON.parse(z));var E=z.serverInfos,H=z.oAuthInfos;z=z.credentials;if(E){var I=[];u.forEach(E,function(T){T.server&&T.tokenServiceUrl&&I.push(T.declaredClass?T:new t(T))});
I.length&&this.registerServers(I)}if(H){var M=[];u.forEach(H,function(T){T.appId&&M.push(T.declaredClass?T:new n(T))});M.length&&this.registerOAuthInfos(M)}z&&u.forEach(z,function(T){T.userId&&T.server&&T.token&&T.expires&&T.expires>(new Date).getTime()&&(T=T.declaredClass?T:new G(T),T.onTokenChange(),this.credentials.push(T))},this)}},findServerInfo:function(z){var E;z=this._sanitizeUrl(z);u.some(this.serverInfos,function(H){this._hasSameServerInstance(H.server,z)&&(E=H);return!!E},this);return E},
findOAuthInfo:function(z){var E;z=this._sanitizeUrl(z);u.some(this.oAuthInfos,function(H){this._hasSameServerInstance(H.portalUrl,z)&&(E=H);return!!E},this);return E},findCredential:function(z,E){var H;z=this._sanitizeUrl(z);var I=this._isServerRsrc(z)?"server":"portal";E?u.some(this.credentials,function(M){this._hasSameServerInstance(M.server,z)&&E===M.userId&&M.scope===I&&(H=M);return!!H},this):u.some(this.credentials,function(M){this._hasSameServerInstance(M.server,z)&&-1!==this._getIdenticalSvcIdx(z,
M)&&M.scope===I&&(H=M);return!!H},this);return H},getCredential:function(z,E){var H=!0;if(r.isDefined(E))if(c.isObject(E)){var I=!!E.token;var M=E.error;H=!1!==E.prompt}else I=E;z=this._sanitizeUrl(z);var T=new q(k._dfdCanceller),Y=this._isAdminResource(z),fa=I&&this._doPortalSignIn(z)?this._getEsriAuthCookie():null;if((I=I?this.findCredential(z):null)&&M&&498===M.code)I.destroy(),fa&&fa.token===E.token&&(h("esri_auth",null,{expires:-1,path:"/",domain:document.domain}),r.endsWith(window.location.hostname,
".arcgis.com")&&h("esri_auth",null,{expires:-1,path:"/",domain:"arcgis.com"}));else if(fa||I)return z=Error("You are currently signed in as: '"+(fa&&fa.email||I&&I.userId)+"'. You do not have access to this resource: "+z),z.code="IdentityManagerBase.1",z.httpCode=M&&M.httpCode,z.messageCode=M?M.messageCode:null,z.subcode=M?M.subcode:null,z.details=M?M.details:null,z.log=!!y.isDebug,T.errback(z),T;if(M=this._findCredential(z,E))return T.callback(M),T;M=this.findServerInfo(z);if(M)!M.hasServer&&this._isServerRsrc(z)&&
(M._restInfoDfd=this._getTokenSvcUrl(z,!0),M.hasServer=!0);else{fa=this._getTokenSvcUrl(z);if(!fa)return z=Error("Unknown resource - could not find token service endpoint."),z.code="IdentityManagerBase.2",z.log=!!y.isDebug,T.errback(z),T;M=new t;M.server=this._getServerInstanceRoot(z);c.isString(fa)?(M.tokenServiceUrl=fa,M.hasPortal=!0):(M._restInfoDfd=fa,M.hasServer=!0);this.registerServers([M])}H&&M.hasPortal&&void 0===M._selfReq&&!this._findOAuthInfo(z)&&(M._selfReq={owningTenant:E&&E.owningTenant,
selfDfd:this._getPortalSelf(M.tokenServiceUrl.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),z)});return this._enqueue(z,M,E,T,Y)},getResourceName:function(z){return this._isRESTService(z)?z.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(z)&&z.replace(this._gwUser,"$1")||this._gwItem.test(z)&&z.replace(this._gwItem,"$1")||this._gwGroup.test(z)&&z.replace(this._gwGroup,"$1")||""},generateToken:function(z,E,H){var I=this._rePortalTokenSvc.test(z.tokenServiceUrl),
M=new l(window.location.href.toLowerCase()),T=this._getEsriAuthCookie(),Y=!E;var fa=z.shortLivedTokenValidity;if(E){var ca=b.id.tokenValidity||fa||b.id.defaultTokenValidity;ca>fa&&(ca=fa)}if(H){var X=H.isAdmin;var ea=H.serverUrl;var ma=H.token;var wa=H.ssl;z.customParameters=H.customParameters}if(X)fa=z.adminTokenServiceUrl;else{fa=z.tokenServiceUrl;var P=new l(fa.toLowerCase());if(T)var ja=(ja=T.auth_tier)&&ja.toLowerCase();("web"===ja||z.webTierAuth)&&H&&H.serverUrl&&!wa&&"http"===M.scheme&&(g.hasSameOrigin(M.uri,
fa,!0)||"https"===P.scheme&&M.host===P.host&&"7080"===M.port&&"7443"===P.port)&&(fa=fa.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));Y&&I&&(fa=fa.replace(/\/rest/i,""))}X=c.mixin({url:fa,content:c.mixin({request:"getToken",username:E&&E.username,password:E&&E.password,serverUrl:ea,token:ma,expiration:ca,referer:X||I?window.location.host:null,client:X?"referer":null,f:"json"},z.customParameters),handleAs:"json",callbackParamName:Y?"callback":void 0},H&&H.ioArgs);H={usePost:!Y,disableIdentityLookup:!0,
useProxy:this._useProxy(z,H)};I||(X.withCredentials=!1);I=x(X,H);I.addCallback(function(ta){if(!ta||!ta.token)return ta=Error("Unable to generate token"),ta.code="IdentityManagerBase.3",ta.log=!!y.isDebug,ta;var N=z.server;w[N]||(w[N]={});E&&(w[N][E.username]=E.password);ta.validity=ca;return ta});I.addErrback(function(ta){});return I},isBusy:function(){return!!this._busy},checkSignInStatus:function(z){var E=new q;this.checkAppAccess(z,"").then(function(H){E.resolve(H.credential)}).catch(function(H){E.reject(H)});
return E},checkAppAccess:function(z,E,H){var I=this,M=!1;return this.getCredential(z,{prompt:!1}).then(function(T){var Y={f:"json"};if("portal"===T.scope)if(E&&(I._doPortalSignIn(z,!0)||H&&H.force)){var fa=T.server+"/sharing/rest/oauth2/validateAppAccess";Y.client_id=E}else if(T.token)fa=T.server+"/sharing/rest";else return{credential:T};else if(T.token)fa=T.server+"/rest/services";else return{credential:T};T.token&&(Y.token=T.token);return x({url:fa,content:Y,callbackParamName:"callback"},{disableIdentityLookup:!0}).then(function(ca){if(!1===
ca.valid){var X=Error("You are currently signed in as: '"+T.userId+"'.  You do not have access to this app: '"+E+"'.");X.code="IdentityManagerBase.1";X.log=!!y.isDebug;X.details=ca;throw X;}M=!!ca.viewOnlyUserTypeApp;return{credential:T}}).catch(function(ca){if("IdentityManagerBase.1"===ca.code||400===ca.code)throw ca;if(498===ca.code)throw T.destroy(),ca=Error("User is not signed in."),ca.code="IdentityManagerBase.6",ca.log=!!y.isDebug,ca;return{credential:T}})}).then(function(T){return{credential:T.credential,
viewOnly:M}})},setRedirectionHandler:function(z){this._redirectFunc=z},setProtocolErrorHandler:function(z){this._protocolFunc=z},signIn:function(){},oAuthSignIn:function(){},onCredentialCreate:function(){},onCredentialsDestroy:function(){},destroyCredentials:function(){if(this.credentials){var z=this.credentials.slice();u.forEach(z,function(E){E.destroy()})}this.onCredentialsDestroy()},_getOAuthHash:function(){var z=window.location.hash;if(z){"#"===z.charAt(0)&&(z=z.substring(1));z=f.queryToObject(z);
var E=!1;z.access_token&&z.expires_in&&z.state&&z.hasOwnProperty("username")?(z.state=JSON.parse(z.state),this._oAuthHash=z,E=!0):z.error&&z.error_description&&(console.log("IdentityManager OAuth Error: ",z.error," - ",z.error_description),"access_denied"===z.error&&(E=!0));E&&(window.location.hash=z.state&&z.state.hash||"")}},_pageShowHandler:function(z){z.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow&&(z=Error("ABORTED"),z.code="IdentityManager.2",z.log=!!y.isDebug,this._errbackFunc(z))},
_findCredential:function(z,E){var H=-1,I,M,T=E&&E.token;E=E&&E.resource;var Y=this._isServerRsrc(z)?"server":"portal",fa=u.filter(this.credentials,function(ma){return this._hasSameServerInstance(ma.server,z)&&ma.scope===Y},this);z=E||z;if(fa.length)if(1===fa.length){E=fa[0];var ca=(I=(M=this.findServerInfo(E.server))&&M.owningSystemUrl)&&this.findCredential(I,E.userId);H=this._getIdenticalSvcIdx(z,E);if(T)-1!==H&&(E.resources.splice(H,1),this._removeResource(z,ca));else return-1===H&&E.resources.push(z),
this._addResource(z,ca),E}else{var X,ea;u.some(fa,function(ma){ea=this._getIdenticalSvcIdx(z,ma);return-1!==ea?(X=ma,ca=(I=(M=this.findServerInfo(X.server))&&M.owningSystemUrl)&&this.findCredential(I,X.userId),H=ea,!0):!1},this);if(T)X&&(X.resources.splice(H,1),this._removeResource(z,ca));else if(X)return this._addResource(z,ca),X}},_findOAuthInfo:function(z){var E=this.findOAuthInfo(z);E||u.some(this.oAuthInfos,function(H){this._isIdProvider(H.portalUrl,z)&&(E=H);return!!E},this);return E},_addResource:function(z,
E){E&&-1===this._getIdenticalSvcIdx(z,E)&&E.resources.push(z)},_removeResource:function(z,E){var H=-1;E&&(H=this._getIdenticalSvcIdx(z,E),-1<H&&E.resources.splice(H,1))},_useProxy:function(z,E){return E&&E.isAdmin&&!g.hasSameOrigin(z.adminTokenServiceUrl,window.location.href)||!this._isPortalDomain(z.tokenServiceUrl)&&10.1==z.currentVersion&&!g.hasSameOrigin(z.tokenServiceUrl,window.location.href)},_getOrigin:function(z){z=new l(z);return z.scheme+"://"+z.host+(r.isDefined(z.port)?":"+z.port:"")},
_getServerInstanceRoot:function(z){var E=z.toLowerCase(),H=E.indexOf(this._agsRest);-1===H&&this._isAdminResource(z)&&(H=this._agsAdmin.test(z)?z.replace(this._agsAdmin,"$1").length:z.search(this._adminSvcs));-1===H&&(H=E.indexOf("/sharing"));-1===H&&"/"===E.substr(-1)&&(H=E.length-1);return-1<H?z.substring(0,H):z},_hasSameServerInstance:function(z,E){"/"===z.substr(-1)&&(z=z.slice(0,-1));z=z.toLowerCase();E=this._getServerInstanceRoot(E).toLowerCase();z=this._normalizeAGOLorgDomain(z);E=this._normalizeAGOLorgDomain(E);
z=z.substr(z.indexOf(":"));E=E.substr(E.indexOf(":"));return z===E},_normalizeAGOLorgDomain:function(z){var E=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,H=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,I=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;E.test(z)?z=z.replace(E,"https://www.arcgis.com"):H.test(z)?z=z.replace(H,"https://devext.arcgis.com"):I.test(z)&&(z=z.replace(I,"https://qaext.arcgis.com"));return z},_sanitizeUrl:function(z){var E=(e.defaults.io.proxyUrl||
"").toLowerCase(),H=E?z.toLowerCase().indexOf(E+"?"):-1;-1!==H&&(z=z.substring(H+E.length+1));z=g.normalize(z);return g.urlToObject(z).path},_isRESTService:function(z){return-1<z.indexOf(this._agsRest)},_isAdminResource:function(z){return this._agsAdmin.test(z)||this._adminSvcs.test(z)},_isServerRsrc:function(z){return this._isRESTService(z)||this._isAdminResource(z)},_isIdenticalService:function(z,E){if(this._isRESTService(z)&&this._isRESTService(E)){z=this._getSuffix(z).toLowerCase();E=this._getSuffix(E).toLowerCase();
var H=z===E;H||(H=/(.*)\/(MapServer|FeatureServer).*/ig,H=z.replace(H,"$1")===E.replace(H,"$1"))}else this._isAdminResource(z)&&this._isAdminResource(E)?H=!0:this._isServerRsrc(z)||this._isServerRsrc(E)||!this._isPortalDomain(z)||(H=!0);return H},_isPortalDomain:function(z){var E=new l(z.toLowerCase()),H=this._portalConfig;z=u.some(this._gwDomains,function(I){return I.regex.test(E.uri)});!z&&H&&(z=this._hasSameServerInstance(this._getServerInstanceRoot(H.restBaseUrl),E.uri));z||(!this._arcgisUrl&&
(H=c.getObject("esri.arcgis.utils.arcgisUrl"))&&(this._arcgisUrl=(new l(H)).authority),this._arcgisUrl&&(z=this._arcgisUrl.toLowerCase()===E.authority));z||(z=u.some(this._portals,function(I){return this._hasSameServerInstance(I,E.uri)},this));return z=z||this._agsPortal.test(E.path)},_isIdProvider:function(z,E){var H=-1,I=-1;u.forEach(this._gwDomains,function(fa,ca){-1===H&&fa.regex.test(z)&&(H=ca);-1===I&&fa.regex.test(E)&&(I=ca)});var M=!1;if(-1<H&&-1<I)if(0===H||4===H){if(0===I||4===I)M=!0}else if(1===
H){if(1===I||2===I)M=!0}else 2===H?2===I&&(M=!0):3===H&&3===I&&(M=!0);if(!M){var T=this.findServerInfo(E),Y=T&&T.owningSystemUrl;Y&&p(T)&&this._isPortalDomain(Y)&&this._isIdProvider(z,Y)&&(M=!0)}return M},_isPublic:function(z){z=this._sanitizeUrl(z);return u.some(this._publicUrls,function(E){return E.test(z)})},_getIdenticalSvcIdx:function(z,E){var H=-1;u.some(E.resources,function(I,M){return this._isIdenticalService(z,I)?(H=M,!0):!1},this);return H},_getSuffix:function(z){return z.replace(this._regexSDirUrl,
"").replace(this._regexServerType,"$1")},_getTokenSvcUrl:function(z){if(this._isRESTService(z)||this._isAdminResource(z)){var E=this._getServerInstanceRoot(z);var H=E+"/admin/generateToken";z=E+"/rest/info";E=x({url:z,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});E.adminUrl_=H;return E}if(this._isPortalDomain(z)){var I="";u.some(this._gwDomains,function(M){M.regex.test(z)&&(I=M.tokenServiceUrl);return!!I});I||u.some(this._portals,function(M){this._hasSameServerInstance(M,z)&&(I=
M+this._gwTokenUrl);return!!I},this);I||(H=z.toLowerCase().indexOf("/sharing"),-1!==H&&(I=z.substring(0,H)+this._gwTokenUrl));I||(I=this._getOrigin(z)+this._gwTokenUrl);I&&(H=(new l(z)).port,/^http:\/\//i.test(z)&&"7080"===H&&(I=I.replace(/:7080/i,":7443")),I=I.replace(/http:/i,"https:"));return I}if(-1!==z.toLowerCase().indexOf("premium.arcgisonline.com"))return"https://premium.arcgisonline.com/server/tokens"},_exchangeToken:function(z,E,H){return x({url:z+"/sharing/rest/oauth2/exchangeToken",content:{f:"json",
client_id:E,token:H}},{disableIdentityLookup:!0,usePost:!0}).then(function(I){return I.token})},_getPortalSelf:function(z,E){var H="";u.some(this._gwDomains,function(I){I.regex.test(z)&&(H=I.customBaseUrl);return!!H});if(H)return E=new q,E.resolve({allSSL:!0,currentVersion:"4.4",customBaseUrl:H,portalMode:"multitenant",supportsOAuth:!0}),E;"https:"===window.location.protocol?z=z.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(E)&&(z=z.replace(/^https:/i,"http:").replace(/:7443/i,
":7080"));return x({url:z,content:{f:"json"},handleAs:"json",callbackParamName:"callback"},{crossOrigin:!1,disableIdentityLookup:!0})},_hasPortalSession:function(){return!!this._getEsriAuthCookie()},_getEsriAuthCookie:function(){var z=null;if(h.isSupported()){var E=this._getAllCookies("esri_auth"),H,I;for(I=0;I<E.length;I++){var M=JSON.parse(E[I]);if(M.portalApp){z=M;break}H?H.push(M):H=[M]}if(!z&&H)for(I=0;I<H.length;I++)if(M=H[I],M.urlKey&&window.location.hostname===M.urlKey.toLowerCase()+"."+M.customBaseUrl){z=
M;break}}z&&(E=null,z.expires&&("number"===typeof z.expires?E=z.expires:"string"===typeof z.expires&&(E=Date.parse(z.expires)),isNaN(E)&&(E=null),z.expires=E),E&&E<(new Date).getTime()&&(z=null));return z},_getAllCookies:function(z){var E=[],H=document.cookie.match(new RegExp("(?:^|; )"+a.escapeString(z)+"\x3d([^;]*)","g"));if(H)for(z=0;z<H.length;z++){var I=H[z],M=I.indexOf("\x3d");-1<M&&(I=I.substring(M+1),E.push(decodeURIComponent(I)))}return E},_doPortalSignIn:function(z,E){if(h.isSupported()){var H=
this._getEsriAuthCookie(),I=this._portalConfig,M=window.location.href,T=this.findServerInfo(z);if((E||this.useSignInPage)&&(I||this._isPortalDomain(M)||H)&&(T?T.hasPortal||T.owningSystemUrl&&this._isPortalDomain(T.owningSystemUrl):this._isPortalDomain(z))&&(this._isIdProvider(M,z)||I&&(this._hasSameServerInstance(this._getServerInstanceRoot(I.restBaseUrl),z)||this._isIdProvider(I.restBaseUrl,z))||g.hasSameOrigin(M,z,!0)))return!0}return!1},_canUsePortalSignInWorkflow:function(z){return this._doPortalSignIn(z)&&
(window===window.top||this._hasPortalSession())},_checkProtocol:function(z,E,H,I){var M=!0;I=I?E.adminTokenServiceUrl:E.tokenServiceUrl;0!==c.trim(I).toLowerCase().indexOf("https:")||0===window.location.href.toLowerCase().indexOf("https:")||e.defaults.io.useCors&&(g.canUseXhr(I)||g.canUseXhr(g.getProxyUrl(!0).path))||(M=this._protocolFunc?!!this._protocolFunc({resourceUrl:z,serverInfo:E}):!1,M||(z=Error("Aborted the Sign-In process to avoid sending password over insecure connection."),z.code="IdentityManagerBase.4",
z.log=!!y.isDebug,console.log(z.message),H(z)));return M},_enqueue:function(z,E,H,I,M,T){I||(I=new q(k._dfdCanceller));I.resUrl_=z;I.sinfo_=E;I.options_=H;I.admin_=M;I.refresh_=T;this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(z),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(I)):this._xoReqs.push(I):this._doSignIn(I);return I},_doSignIn:function(z){this._busy=z;this._rejectOnPersistedPageShow=!1;var E=this,H=function(X){var ea=
z.options_&&z.options_.resource,ma=z.resUrl_,wa=z.refresh_,P=!1;-1===u.indexOf(E.credentials,X)&&(wa&&-1!==u.indexOf(E.credentials,wa)?(wa.userId=X.userId,wa.token=X.token,wa.expires=X.expires,wa.validity=X.validity,wa.ssl=X.ssl,wa.creationTime=X.creationTime,P=!0,X=wa):E.credentials.push(X));X.resources||(X.resources=[]);X.resources.push(ea||ma);X.scope=E._isServerRsrc(ma)?"server":"portal";X.onTokenChange();ea=E._soReqs;var ja={};E._soReqs=[];u.forEach(ea,function(ta){if(!this._isIdenticalService(ma,
ta.resUrl_)){var N=this._getSuffix(ta.resUrl_);ja[N]||(ja[N]=!0,X.resources.push(ta.resUrl_))}},E);z.callback(X);u.forEach(ea,function(ta){this._hasSameServerInstance(this._getServerInstanceRoot(ma),ta.resUrl_)?ta.callback(X):this._soReqs.push(ta)},E);E._busy=z.resUrl_=z.sinfo_=z.refresh_=null;if(!P)E.onCredentialCreate({credential:X});E._soReqs.length?E._doSignIn(E._soReqs.shift()):E._xoReqs.length&&E._doSignIn(E._xoReqs.shift())},I=function(X){z.errback(X);E._busy=z.resUrl_=z.sinfo_=z.refresh_=
null;E._soReqs.length?E._doSignIn(E._soReqs.shift()):E._xoReqs.length&&E._doSignIn(E._xoReqs.shift())},M=function(X,ea,ma,wa){var P=z.sinfo_,ja=!z.options_||!1!==z.options_.prompt,ta=P.hasPortal&&E._findOAuthInfo(z.resUrl_);if(E._canUsePortalSignInWorkflow(z.resUrl_))if(ea=E._getEsriAuthCookie(),X=E._portalConfig,ea){P.webTierAuth||"web"!==(ea.auth_tier&&ea.auth_tier.toLowerCase())||(P.webTierAuth=!0);var N=new G({userId:ea.email,server:P.server,token:P.webTierAuth?null:ea.token,expires:ea.expires});
N.token?z._pendingDfd=E._exchangeToken(N.server,ta?ta.appId:"arcgisonline",N.token).then(function(ha){N.token=ha;H(N)}).catch(function(){H(N)}):H(N)}else ja?(ja="",ta=window.location.href,ja=E.signInPage?E.signInPage:X?X.baseUrl+X.signin:E._isIdProvider(ta,z.resUrl_)?E._getOrigin(ta)+"/home/signin.html":P.tokenServiceUrl.replace(E._rePortalTokenSvc,"")+"/home/signin.html",ja=ja.replace(/http:/i,"https:"),X&&!1===X.useSSL&&(ja=ja.replace(/https:/i,"http:")),0===ta.toLowerCase().replace("https","http").indexOf(ja.toLowerCase().replace("https",
"http"))?(P=Error("Cannot redirect to Sign-In page from within Sign-In page. URL of the resource that triggered this workflow: "+z.resUrl_),P.code="IdentityManagerBase.5",P.log=!!y.isDebug,I(P)):(E._rejectOnPersistedPageShow=!0,E._redirectFunc?E._redirectFunc({signInPage:ja,returnUrlParamName:"returnUrl",returnUrl:ta,resourceUrl:z.resUrl_,serverInfo:P}):window.location=ja+"?returnUrl\x3d"+window.escape(ta))):(P=Error("User is not signed in."),P.code="IdentityManagerBase.6",P.log=!!y.isDebug,I(P));
else if(X)H(new G({userId:X,server:P.server,token:ma,expires:r.isDefined(wa)?Number(wa):null,ssl:!!ea}));else if(ta){var S=ta._oAuthCred;S||(X=new A(ta,window.localStorage),ea=new A(ta,window.sessionStorage),X.isValid()&&ea.isValid()?X.expires>ea.expires?(S=X,ea.destroy()):(S=ea,X.destroy()):S=X.isValid()?X:ea,ta._oAuthCred=S);S.isValid()?(N=new G({userId:S.userId,server:P.server,token:S.token,expires:S.expires,ssl:S.ssl,_oAuthCred:S}),ta.appId!==S.appId&&E._doPortalSignIn(z.resUrl_,!0)?z._pendingDfd=
E._exchangeToken(N.server,ta.appId,N.token).then(function(ha){N.token=ha;S.token=ha;S.save();H(N)}).catch(function(){H(N)}):H(N)):E._oAuthHash&&E._oAuthHash.state.portalUrl===ta.portalUrl?(ja=E._oAuthHash,N=new G({userId:ja.username,server:P.server,token:ja.access_token,expires:(new Date).getTime()+1E3*Number(ja.expires_in),ssl:"true"===ja.ssl,oAuthState:ja.state,_oAuthCred:S}),S.storage=ja.persist?window.localStorage:window.sessionStorage,S.token=N.token,S.expires=N.expires,S.userId=N.userId,S.ssl=
N.ssl,S.save(),E._oAuthHash=null,H(N)):ja?z._pendingDfd=E.oAuthSignIn(z.resUrl_,P,ta,z.options_).addCallbacks(H,I):(P=Error("User is not signed in."),P.code="IdentityManagerBase.6",P.log=!!y.isDebug,I(P))}else ja?E._checkProtocol(z.resUrl_,P,I,z.admin_)&&(ja=z.options_,z.admin_&&(ja=ja||{},ja.isAdmin=!0),z._pendingDfd=E.signIn(z.resUrl_,P,ja).addCallbacks(H,I)):(P=Error("User is not signed in."),P.code="IdentityManagerBase.6",P.log=!!y.isDebug,I(P))},T=function(){var X=z.sinfo_,ea=X.owningSystemUrl,
ma=z.options_,wa;if(ma){var P=ma.token;var ja=ma.error;var ta=ma.prompt}(wa=E._findCredential(ea,{token:P,resource:z.resUrl_}))||u.some(E.credentials,function(N){this._isIdProvider(ea,N.server)&&(wa=N);return!!wa},E);wa?(ma=E.findCredential(z.resUrl_,wa.userId))?H(ma):D(X,E._legacyFed)?(ma=wa.toJson(),ma.server=X.server,ma.resources=null,H(new G(ma))):(z._pendingDfd=E.generateToken(E.findServerInfo(wa.server),null,{serverUrl:z.resUrl_,token:wa.token,ssl:wa.ssl})).addCallbacks(function(N){H(new G({userId:wa.userId,
server:X.server,token:N.token,expires:r.isDefined(N.expires)?Number(N.expires):null,ssl:!!N.ssl,isAdmin:z.admin_,validity:N.validity}))},I):(E._busy=null,P&&(z.options_.token=null),(z._pendingDfd=E.getCredential(ea.replace(/\/?$/,"/sharing"),{resource:z.resUrl_,owningTenant:X.owningTenant,token:P,error:ja,prompt:ta})).addCallbacks(function(N){E._enqueue(z.resUrl_,z.sinfo_,z.options_,z,z.admin_)},function(N){I(N)}))};this._errbackFunc=I;var Y=z.sinfo_.owningSystemUrl,fa=this._isServerRsrc(z.resUrl_),
ca=z.sinfo_._restInfoDfd;ca?ca.addCallbacks(function(X){var ea=z.sinfo_;ea._restInfoDfd&&(ea.adminTokenServiceUrl=ea._restInfoDfd.adminUrl_,ea._restInfoDfd=null,ea.tokenServiceUrl=c.getObject("authInfo.tokenServicesUrl",!1,X)||c.getObject("authInfo.tokenServiceUrl",!1,X)||c.getObject("tokenServiceUrl",!1,X),ea.shortLivedTokenValidity=c.getObject("authInfo.shortLivedTokenValidity",!1,X),ea.currentVersion=X.currentVersion,ea.owningTenant=X.owningTenant,(X=ea.owningSystemUrl=X.owningSystemUrl)&&E._portals.push(X));
fa&&ea.owningSystemUrl?T():M()},function(){z.sinfo_._restInfoDfd=null;var X=Error("Unknown resource - could not find token service endpoint.");X.code="IdentityManagerBase.2";X.log=!!y.isDebug;I(X)}):fa&&Y?T():z.sinfo_._selfReq?z.sinfo_._selfReq.selfDfd.then(function(X){var ea={};if(X){var ma=X.user&&X.user.username;ea.username=ma;ea.allSSL=X.allSSL;var wa=X.supportsOAuth;var P=X.currentVersion;if("multitenant"===X.portalMode)var ja=X.customBaseUrl}z.sinfo_.webTierAuth=!!ma;return ma&&E.normalizeWebTierAuth?
E.generateToken(z.sinfo_,null,{ssl:ea.allSSL}).addBoth(function(ta){ea.portalToken=ta&&ta.token;ea.tokenExpiration=ta&&ta.expires;return ea}):!ma&&wa&&4.4<=parseFloat(P)&&!E._canUsePortalSignInWorkflow(z.resUrl_)?E._generateOAuthInfo({portalUrl:z.sinfo_.server,customBaseUrl:ja,owningTenant:z.sinfo_._selfReq.owningTenant}).always(function(){return ea}):ea}).always(function(X){z.sinfo_._selfReq=null;X?M(X.username,X.allSSL,X.portalToken,X.tokenExpiration):M()}):M()},_generateOAuthInfo:function(z){var E=
this,H=z.portalUrl,I=z.customBaseUrl,M=z.owningTenant;if(z=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal){var T=window.location.href;var Y=T.indexOf("?");-1<Y&&(T=T.slice(0,Y));Y=T.search(/\/(apps|home)\//);T=-1<Y?T.slice(0,Y):null}z&&T?(this._hasTestedIfAppIsOnPortal=!0,z=x({url:T+"/sharing/rest",content:{f:"json"},handleAs:"json"}).then(function(){E.defaultOAuthInfo=new n({appId:"arcgisonline",popup:!0,popupCallbackUrl:T+"/home/oauth-callback.html"})})):(z=
new q,z.resolve(),z=z.promise);return z.then(function(){if(E.defaultOAuthInfo)return H=H.replace(/^http:/i,"https:"),x({url:H+"/sharing/rest/oauth2/validateRedirectUri",content:{accountId:M,client_id:E.defaultOAuthInfo.appId,redirect_uri:g.getAbsoluteUrl(E.defaultOAuthInfo.popupCallbackUrl),f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(fa){if(fa.valid){var ca=E.defaultOAuthInfo.clone();ca.portalUrl=fa.urlKey&&I?"https://"+fa.urlKey.toLowerCase()+"."+I:H;E.oAuthInfos.push(ca)}})})}});
var G=B(v,{declaredClass:"esri.Credential",tokenRefreshBuffer:2,constructor:function(z){c.mixin(this,z);this.resources=this.resources||[];r.isDefined(this.creationTime)||(this.creationTime=(new Date).getTime())},_oAuthCred:null,refreshToken:function(){var z=this,E=this.resources&&this.resources[0],H=b.id.findServerInfo(this.server),I=H&&H.owningSystemUrl,M=!!I&&"server"===this.scope,T=M&&D(H,b.id._legacyFed),Y=M&&b.id.findServerInfo(I),fa,ca=(fa=H.webTierAuth)&&b.id.normalizeWebTierAuth,X=w[this.server];
X=X&&X[this.userId];var ea={username:this.userId,password:X};if(!fa||ca)if(M&&!Y&&u.some(b.id.serverInfos,function(P){b.id._isIdProvider(I,P.server)&&(Y=P);return!!Y}),fa=Y&&b.id.findCredential(Y.server,this.userId),!M||fa)if(T)fa.refreshToken();else{if(M)var ma={serverUrl:E,token:fa&&fa.token,ssl:fa&&fa.ssl};else if(ca)ea=null,ma={ssl:this.ssl};else if(X)this.isAdmin&&(ma={isAdmin:!0});else{if(E){E=b.id._sanitizeUrl(E);this._enqueued=1;var wa=b.id._enqueue(E,H,null,null,this.isAdmin,this);wa.addCallback(function(){z._enqueued=
0;z.refreshServerTokens()}).addErrback(function(){z._enqueued=0})}return wa}return b.id.generateToken(M?Y:H,M?null:ea,ma).addCallback(function(P){z.token=P.token;z.expires=r.isDefined(P.expires)?Number(P.expires):null;z.creationTime=(new Date).getTime();z.validity=P.validity;z.onTokenChange();z.refreshServerTokens()}).addErrback(function(){})}},refreshServerTokens:function(){"portal"===this.scope&&u.forEach(b.id.credentials,function(z){var E=b.id.findServerInfo(z.server),H=E&&E.owningSystemUrl;z!==
this&&z.userId===this.userId&&H&&"server"===z.scope&&(b.id._hasSameServerInstance(this.server,H)||b.id._isIdProvider(H,this.server))&&(D(E,b.id._legacyFed)?(z.token=this.token,z.expires=this.expires,z.creationTime=this.creationTime,z.validity=this.validity,z.onTokenChange()):z.refreshToken())},this)},onTokenChange:function(z){clearTimeout(this._refreshTimer);var E=this.server&&b.id.findServerInfo(this.server),H=(E=E&&E.owningSystemUrl)&&b.id.findServerInfo(E);!1!==z&&(!E||"portal"===this.scope||H&&
H.webTierAuth&&!b.id.normalizeWebTierAuth)&&(r.isDefined(this.expires)||r.isDefined(this.validity))&&this._startRefreshTimer()},onDestroy:function(){},destroy:function(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null;this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);var z=u.indexOf(b.id.credentials,this);-1<z&&b.id.credentials.splice(z,1);this.onTokenChange();this.onDestroy()},toJson:function(){return this._toJson()},_toJson:function(){var z=
r.fixJson({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),E=this.resources;E&&0<E.length&&(z.resources=E.slice());return z},_startRefreshTimer:function(){clearTimeout(this._refreshTimer);var z=6E4*this.tokenRefreshBuffer,E=(this.validity?this.creationTime+6E4*this.validity:this.expires)-(new Date).getTime();0>E&&(E=0);this._refreshTimer=setTimeout(c.hitch(this,this.refreshToken),
E>z?E-z:E)}});C.Credential=G;m("extend-esri")&&(b.IdentityManagerBase=C);return C})},"dojo/cookie":function(){define(["./_base/kernel","./regexp"],function(B,y){B.cookie=function(c,u,q){var l=document.cookie;if(1==arguments.length)var m=(m=l.match(new RegExp("(?:^|; )"+y.escapeString(c)+"\x3d([^;]*)")))?decodeURIComponent(m[1]):void 0;else{q=q||{};l=q.expires;if("number"==typeof l){var h=new Date;h.setTime(h.getTime()+864E5*l);l=q.expires=h}l&&l.toUTCString&&(q.expires=l.toUTCString());u=encodeURIComponent(u);
l=c+"\x3d"+u;for(var f in q)l+="; "+f,h=q[f],!0!==h&&(l+="\x3d"+h);document.cookie=l}return m};B.cookie.isSupported=function(){"cookieEnabled"in navigator||(this("__djCookieTest__","CookiesAllowed"),navigator.cookieEnabled="CookiesAllowed"==this("__djCookieTest__"),navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1}));return navigator.cookieEnabled};return B.cookie})},"esri/ServerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(B,
y,c,u,q){B=B(null,{declaredClass:"esri.ServerInfo",constructor:function(l){y.mixin(this,l)},toJson:function(){return q.fixJson({server:this.server,tokenServiceUrl:this.tokenServiceUrl,adminTokenServiceUrl:this.adminTokenServiceUrl,shortLivedTokenValidity:this.shortLivedTokenValidity,owningSystemUrl:this.owningSystemUrl,owningTenant:this.owningTenant,currentVersion:this.currentVersion,hasPortal:this.hasPortal,hasServer:this.hasServer,webTierAuth:this.webTierAuth})}});c("extend-esri")&&(u.ServerInfo=
B);return B})},"esri/OAuthCredential":function(){define(["./kernel","dojo/_base/declare","dojo/has","dojo/json"],function(B,y,c,u){y=y(null,{declaredClass:"esri.OAuthCredential",oAuthInfo:null,storage:null,appId:null,expires:null,ssl:null,token:null,userId:null,constructor:function(q,l){this.oAuthInfo=q;this.storage=l;this._init()},isValid:function(){var q=!1;if(this.oAuthInfo&&this.token&&this.userId){var l=(new Date).getTime();this.expires>l&&(this.expires-l)/1E3>60*this.oAuthInfo.minTimeUntilExpiration&&
(q=!0)}return q},save:function(){if(this.storage){var q=this._load(),l=this.oAuthInfo;if(l&&l.authNamespace&&l.portalUrl){var m=q[l.authNamespace];m||(m=q[l.authNamespace]={});m[l.portalUrl]={appId:this.appId=l.appId,expires:this.expires,ssl:this.ssl,token:this.token,userId:this.userId};try{this.storage.setItem("esriJSAPIOAuth",u.stringify(q))}catch(h){console.log(h)}}}},destroy:function(){var q=this._load(),l=this.oAuthInfo;if(l&&l.appId&&l.portalUrl&&this.token&&this.expires>Date.now()){var m=l.portalUrl.replace(/^http:/i,
"https:")+"/sharing/rest/oauth2/revokeToken",h=new FormData;h.append("f","json");h.append("auth_token",this.token);h.append("client_id",l.appId);h.append("token_type_hint","access_token");if("function"===typeof navigator.sendBeacon)navigator.sendBeacon(m,h);else{var f=new XMLHttpRequest;f.open("POST",m);f.send(h)}}if(l&&l.authNamespace&&l.portalUrl&&this.storage&&(m=q[l.authNamespace])){delete m[l.portalUrl];try{this.storage.setItem("esriJSAPIOAuth",u.stringify(q))}catch(d){console.log(d)}}l&&(this.oAuthInfo=
l._oAuthCred=null)},_init:function(){var q=this._load(),l=this.oAuthInfo;l&&l.authNamespace&&l.portalUrl&&(q=q[l.authNamespace])&&(q=q[l.portalUrl])&&(this.appId=q.appId,this.expires=q.expires,this.ssl=q.ssl,this.token=q.token,this.userId=q.userId)},_load:function(){var q={};if(this.storage){var l=this.storage.getItem("esriJSAPIOAuth");if(l)try{q=u.parse(l)}catch(m){console.log(m)}}return q}});c("extend-esri")&&(B.OAuthCredential=y);return y})},"esri/arcgis/OAuthInfo":function(){define(["../kernel",
"../lang","dojo/_base/declare","dojo/_base/lang","dojo/has"],function(B,y,c,u,q){var l=c(null,{declaredClass:"esri.arcgis.OAuthInfo",constructor:function(m){u.mixin(this,{expiration:20160,minTimeUntilExpiration:30,portalUrl:"https://www.arcgis.com",authNamespace:"/",forceLogin:!1,popup:!1,popupCallbackUrl:"oauth-callback.html",popupWindowFeatures:"height\x3d490,width\x3d800,resizable,scrollbars,status",preserveUrlHash:!1},m)},_oAuthCred:null,toJson:function(){return y.fixJson({appId:this.appId,expiration:this.expiration,
locale:this.locale,minTimeUntilExpiration:this.minTimeUntilExpiration,portalUrl:this.portalUrl,authNamespace:this.authNamespace,forceLogin:this.forceLogin,popup:this.popup,popupCallbackUrl:this.popupCallbackUrl,popupWindowFeatures:this.popupWindowFeatures,preserveUrlHash:this.preserveUrlHash})},clone:function(){return new l(this.toJson())}});q("extend-esri")&&u.setObject("arcgis.OAuthInfo",l,B);return l})},"dijit/form/Form":function(){define("dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "),
function(B,y,c,u,q,l,m,h){return B("dijit.form.Form",[q,l,m,h],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"\x3cform data-dojo-attach-point\x3d'containerNode' data-dojo-attach-event\x3d'onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}\x3e\x3c/form\x3e",postMixInProperties:function(){this.nameAttrSetting=this.name?"name\x3d'"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(f){y.set(this.domNode,
"encType",f);u("ie")&&(this.domNode.encoding=f);this._set("encType",f)},reset:function(f){var d={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:f?f.target:this.domNode,target:f?f.target:this.domNode};!1!==this.onReset(d)&&d.returnValue&&this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(f){this.reset(f);f.stopPropagation();f.preventDefault();return!1},_onSubmit:function(f){var d=this.constructor.prototype;if(this.execute!=
d.execute||this.onExecute!=d.onExecute)c.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0"),this.onExecute(),this.execute(this.getValues());!1===this.onSubmit(f)&&(f.stopPropagation(),f.preventDefault())},onSubmit:function(){return this.isValid()},submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},"dijit/form/ValidationTextBox":function(){define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/i18n ./TextBox ../Tooltip dojo/text!./templates/ValidationTextBox.html dojo/i18n!./nls/validate".split(" "),
function(B,y,c,u,q,l,m){var h=B("dijit.form.ValidationTextBox",q,{templateString:m,required:!1,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(f,d){d!=h.prototype[f]&&(y.deprecated("ValidationTextBox id\x3d"+this.id+", set('"+f+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0"),this.set("pattern",d))},_setRegExpGenAttr:function(f){this._deprecateRegExp("regExpGen",
f);this._set("regExpGen",this._computeRegexp)},_setRegExpAttr:function(f){this._deprecateRegExp("regExp",f)},_setValueAttr:function(){this.inherited(arguments);this._refreshState()},validator:function(f,d){return(new RegExp("^(?:"+this._computeRegexp(d)+")"+(this.required?"":"?")+"$")).test(f)&&(!this.required||!this._isEmpty(f))&&(this._isEmpty(f)||void 0!==this.parse(f,d))},_isValidSubset:function(){return 0==this.textbox.value.search(this._partialre)},isValid:function(){return this.validator(this.textbox.value,
this.get("constraints"))},_isEmpty:function(f){return(this.trim?/^\s*$/:/^$/).test(f)},getErrorMessage:function(){var f="$_unset_$"==this.invalidMessage?this.messages.invalidMessage:this.invalidMessage?this.invalidMessage:this.promptMessage,d="$_unset_$"==this.missingMessage?this.messages.missingMessage:this.missingMessage?this.missingMessage:f;return this.required&&this._isEmpty(this.textbox.value)?d:f},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:!0,validate:function(f){var d=
"",a=this.disabled||this.isValid(f);a&&(this._maskValidSubsetError=!0);var b=this._isEmpty(this.textbox.value),e=!a&&f&&this._isValidSubset();this._set("state",a?"":((!this._hasBeenBlurred||f)&&b||e)&&(this._maskValidSubsetError||e&&!this._hasBeenBlurred&&f)?"Incomplete":"Error");this.focusNode.setAttribute("aria-invalid","Error"==this.state?"true":"false");"Error"==this.state?(this._maskValidSubsetError=f&&e,d=this.getErrorMessage(f)):"Incomplete"==this.state?(d=this.getPromptMessage(f),this._maskValidSubsetError=
!this._hasBeenBlurred||f):b&&(d=this.getPromptMessage(f));this.set("message",d);return a},displayMessage:function(f){f&&this.focused?l.show(f,this.domNode,this.tooltipPosition,!this.isLeftToRight()):l.hide(this.domNode)},_refreshState:function(){this._created&&this.validate(this.focused);this.inherited(arguments)},constructor:function(f){this.constraints=c.clone(this.constraints);this.baseClass+=" dijitValidationTextBox"},startup:function(){this.inherited(arguments);this._refreshState()},_setConstraintsAttr:function(f){!f.locale&&
this.lang&&(f.locale=this.lang);this._set("constraints",f);this._refreshState()},_setPatternAttr:function(f){this._set("pattern",f);this._refreshState()},_computeRegexp:function(f){var d=this.pattern;"function"==typeof d&&(d=d.call(this,f));if(d!=this._lastRegExp){var a="";this._lastRegExp=d;".*"!=d&&d.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(b){switch(b.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":a+=b;break;case ")":a+="|$)";break;default:a+=
"(?:"+b+"|$)"}});try{"".search(a)}catch(b){a=this.pattern,console.warn("RegExp error in "+this.declaredClass+": "+this.pattern)}this._partialre="^(?:"+a+")$"}return d},postMixInProperties:function(){this.inherited(arguments);this.messages=u.getLocalization("dijit.form","validate",this.lang);this._setConstraintsAttr(this.constraints)},_setDisabledAttr:function(f){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(f){this._set("required",f);this.focusNode.setAttribute("aria-required",
f);this._refreshState()},_setMessageAttr:function(f){this._set("message",f);this.displayMessage(f)},reset:function(){this._maskValidSubsetError=!0;this.inherited(arguments)},_onBlur:function(){this.displayMessage("");this.inherited(arguments)},destroy:function(){l.hide(this.domNode);this.inherited(arguments)}});return h})},"dijit/form/TextBox":function(){define("dojo/_base/declare dojo/dom-construct dojo/dom-style dojo/_base/kernel dojo/_base/lang dojo/on dojo/sniff ./_FormValueWidget ./_TextBoxMixin dojo/text!./templates/TextBox.html ../main".split(" "),
function(B,y,c,u,q,l,m,h,f,d,a){h=B("dijit.form.TextBox"+(m("dojo-bidi")?"_NoBidi":""),[h,f],{templateString:d,_singleNodeTemplate:'\x3cinput class\x3d"dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point\x3d"textbox,focusNode" autocomplete\x3d"off" type\x3d"${type}" ${!nameAttrSetting} /\x3e',_buttonInputDisabled:m("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var b=this.type.toLowerCase();if(this.templateString&&"input"==this.templateString.toLowerCase()||
("hidden"==b||"file"==b)&&this.templateString==this.constructor.prototype.templateString)this.templateString=this._singleNodeTemplate;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);9>m("ie")&&this.defer(function(){try{var b=c.getComputedStyle(this.domNode);if(b){var e=b.fontFamily;if(e){var r=this.domNode.getElementsByTagName("INPUT");if(r)for(b=0;b<r.length;b++)r[b].style.fontFamily=e}}}catch(t){}})},_setPlaceHolderAttr:function(b){this._set("placeHolder",b);this._phspan||
(this._attachPoints.push("_phspan"),this._phspan=y.create("span",{className:"dijitPlaceHolder dijitInputField"},this.textbox,"after"),this.own(l(this._phspan,"mousedown",function(e){e.preventDefault()}),l(this._phspan,"touchend, pointerup, MSPointerUp",q.hitch(this,function(){this.focus()}))));this._phspan.innerHTML="";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(b));this._updatePlaceHolder()},_onInput:function(b){this.inherited(arguments);this._updatePlaceHolder()},_updatePlaceHolder:function(){this._phspan&&
(this._phspan.style.display=this.placeHolder&&!this.textbox.value?"":"none")},_setValueAttr:function(b,e,r){this.inherited(arguments);this._updatePlaceHolder()},getDisplayedValue:function(){u.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");return this.get("displayedValue")},setDisplayedValue:function(b){u.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",
b)},_onBlur:function(b){this.disabled||(this.inherited(arguments),this._updatePlaceHolder(),m("mozilla")&&this.selectOnClick&&(this.textbox.selectionStart=this.textbox.selectionEnd=void 0))},_onFocus:function(b){this.disabled||this.readOnly||(this.inherited(arguments),this._updatePlaceHolder())}});9>m("ie")&&(h.prototype._isTextSelected=function(){var b=this.ownerDocument.selection.createRange();return b.parentElement()==this.textbox&&0<b.text.length},a._setSelectionRange=f._setSelectionRange=function(b,
e,r){b.createTextRange&&(b=b.createTextRange(),b.collapse(!0),b.moveStart("character",-99999),b.moveStart("character",e),b.moveEnd("character",r-e),b.select())});m("dojo-bidi")&&(h=B("dijit.form.TextBox",h,{_setPlaceHolderAttr:function(b){this.inherited(arguments);this.applyTextDir(this._phspan)}}));return h})},"dijit/form/_FormValueWidget":function(){define(["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(B,y,c,u){return B("dijit.form._FormValueWidget",[c,u],{_layoutHackIE7:function(){if(7==
y("ie"))for(var q=this.domNode,l=q.parentNode,m=q.firstChild||q,h=m.style.filter,f=this;l&&0==l.clientHeight;)(function(){var d=f.connect(l,"onscroll",function(){f.disconnect(d);m.style.filter=(new Date).getMilliseconds();f.defer(function(){m.style.filter=h})})})(),l=l.parentNode}})})},"dijit/form/_FormValueMixin":function(){define("dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dojo/sniff ./_FormWidgetMixin".split(" "),function(B,y,c,u,q,l,m){return B("dijit.form._FormValueMixin",
m,{readOnly:!1,_setReadOnlyAttr:function(h){l("trident")&&"disabled"in this?y.set(this.focusNode,"readOnly",h||this.disabled):y.set(this.focusNode,"readOnly",h);this._set("readOnly",h)},postCreate:function(){this.inherited(arguments);void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.value)},_setValueAttr:function(h,f){this._handleOnChange(h,f)},_handleOnChange:function(h,f){this._set("value",h);this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,
!1)},reset:function(){this._hasBeenBlurred=!1;this._setValueAttr(this._resetValue,!0)}})})},"dijit/form/_TextBoxMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/sniff dojo/keys dojo/_base/lang dojo/on ../main".split(" "),function(B,y,c,u,q,l,m,h){var f=y("dijit.form._TextBoxMixin"+(u("dojo-bidi")?"_NoBidi":""),null,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,maxLength:"",selectOnClick:!1,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),
this.constraints)},_setValueAttr:function(d,a,b){if(void 0!==d){var e=this.filter(d);"string"!=typeof b&&(b=null===e||"number"==typeof e&&isNaN(e)?"":this.filter(this.format(e,this.constraints)),0!=this.compare(e,this.filter(this.parse(b,this.constraints)))&&(b=null))}null==b||"number"==typeof b&&isNaN(b)||this.textbox.value==b||(this.textbox.value=b,this._set("displayedValue",this.get("displayedValue")));this.inherited(arguments,[e,a])},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},
_setDisplayedValueAttr:function(d){null==d?d="":"string"!=typeof d&&(d=String(d));this.textbox.value=d;this._setValueAttr(this.get("value"),void 0);this._set("displayedValue",this.get("displayedValue"))},format:function(d){return null==d?"":d.toString?d.toString():d},parse:function(d){return d},_refreshState:function(){},onInput:function(){},_onInput:function(d){this._lastInputEventValue=this.textbox.value;this._processInput(this._lastInputProducingEvent||d);delete this._lastInputProducingEvent;this.intermediateChanges&&
this._handleOnChange(this.get("value"),!1)},_processInput:function(){this._refreshState();this._set("displayedValue",this.get("displayedValue"))},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);this.own(m(this.textbox,"keydown, keypress, paste, cut, compositionend",l.hitch(this,function(d){if("keydown"==d.type&&229!=d.keyCode){var a=d.keyCode;switch(a){case q.SHIFT:case q.ALT:case q.CTRL:case q.META:case q.CAPS_LOCK:case q.NUM_LOCK:case q.SCROLL_LOCK:return}if(!d.ctrlKey&&
!d.metaKey&&!d.altKey){switch(a){case q.NUMPAD_0:case q.NUMPAD_1:case q.NUMPAD_2:case q.NUMPAD_3:case q.NUMPAD_4:case q.NUMPAD_5:case q.NUMPAD_6:case q.NUMPAD_7:case q.NUMPAD_8:case q.NUMPAD_9:case q.NUMPAD_MULTIPLY:case q.NUMPAD_PLUS:case q.NUMPAD_ENTER:case q.NUMPAD_MINUS:case q.NUMPAD_PERIOD:case q.NUMPAD_DIVIDE:return}if(65<=a&&90>=a||48<=a&&57>=a||a==q.SPACE)return;a=!1;for(var b in q)if(q[b]===d.keyCode){a=!0;break}if(!a)return}}(a=32<=d.charCode?String.fromCharCode(d.charCode):d.charCode)||
(a=65<=d.keyCode&&90>=d.keyCode||48<=d.keyCode&&57>=d.keyCode||d.keyCode==q.SPACE?String.fromCharCode(d.keyCode):d.keyCode);a||(a=229);if("keypress"==d.type){if("string"!=typeof a)return;if("a"<=a&&"z">=a||"A"<=a&&"Z">=a||"0"<=a&&"9">=a||" "===a)if(d.ctrlKey||d.metaKey||d.altKey)return}var e={faux:!0},r;for(r in d)/^(layer[XY]|returnValue|keyLocation)$/.test(r)||(b=d[r],"function"!=typeof b&&"undefined"!=typeof b&&(e[r]=b));l.mixin(e,{charOrCode:a,_wasConsumed:!1,preventDefault:function(){e._wasConsumed=
!0;d.preventDefault()},stopPropagation:function(){d.stopPropagation()}});this._lastInputProducingEvent=e;!1===this.onInput(e)&&(e.preventDefault(),e.stopPropagation());if(!e._wasConsumed&&9>=u("ie"))switch(d.keyCode){case q.TAB:case q.ESCAPE:case q.DOWN_ARROW:case q.UP_ARROW:case q.LEFT_ARROW:case q.RIGHT_ARROW:break;default:d.keyCode==q.ENTER&&"textarea"!=this.textbox.tagName.toLowerCase()||this.defer(function(){this.textbox.value!==this._lastInputEventValue&&m.emit(this.textbox,"input",{bubbles:!0})})}})),
m(this.textbox,"input",l.hitch(this,"_onInput")),m(this.domNode,"keypress",function(d){d.stopPropagation()}))},_blankValue:"",filter:function(d){if(null===d)return this._blankValue;if("string"!=typeof d)return d;this.trim&&(d=l.trim(d));this.uppercase&&(d=d.toUpperCase());this.lowercase&&(d=d.toLowerCase());this.propercase&&(d=d.replace(/[^\s]+/g,function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}));return d},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(d){this.disabled||
(this._setBlurValue(),this.inherited(arguments))},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd},_onFocus:function(d){this.disabled||this.readOnly||(this.selectOnClick&&"mouse"==d&&(this._selectOnClickHandle=m.once(this.domNode,"mouseup, touchend",l.hitch(this,function(a){this._isTextSelected()||f.selectInputText(this.textbox)})),this.own(this._selectOnClickHandle),this.defer(function(){this._selectOnClickHandle&&(this._selectOnClickHandle.remove(),this._selectOnClickHandle=
null)},500)),this.inherited(arguments),this._refreshState())},reset:function(){this.textbox.value="";this.inherited(arguments)}});u("dojo-bidi")&&(f=y("dijit.form._TextBoxMixin",f,{_setValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode)},_setDisplayedValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode)},_onInput:function(){this.applyTextDir(this.focusNode);this.inherited(arguments)}}));f._setSelectionRange=h._setSelectionRange=function(d,a,
b){d.setSelectionRange&&d.setSelectionRange(a,b)};f.selectInputText=h.selectInputText=function(d,a,b){d=c.byId(d);isNaN(a)&&(a=0);isNaN(b)&&(b=d.value?d.value.length:0);try{d.focus(),f._setSelectionRange(d,a,b)}catch(e){}};return f})},"dijit/Tooltip":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff ./_base/manager ./place ./_Widget ./_TemplatedMixin ./BackgroundIframe dojo/text!./templates/Tooltip.html ./main".split(" "),
function(B,y,c,u,q,l,m,h,f,d,a,b,e,r,t,g,k,x){function v(){}var A=y("dijit._MasterTooltip",[r,t],{duration:b.defaultDuration,templateString:k,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.bgIframe=new g(this.domNode);this.fadeIn=c.fadeIn({node:this.domNode,duration:this.duration,onEnd:h.hitch(this,"_onShow")});this.fadeOut=c.fadeOut({node:this.domNode,duration:this.duration,onEnd:h.hitch(this,"_onHide")})},show:function(w,p,D,C,G,z,E){if(!this.aroundNode||this.aroundNode!==
p||this.containerNode.innerHTML!=w)if("playing"==this.fadeOut.status())this._onDeck=arguments;else{this.containerNode.innerHTML=w;G&&this.set("textDir",G);this.containerNode.align=C?"right":"left";var H=e.around(this.domNode,p,D&&D.length?D:n.defaultPosition,!C,h.hitch(this,"orient")),I=H.aroundNodePos;"M"==H.corner.charAt(0)&&"M"==H.aroundCorner.charAt(0)?(this.connectorNode.style.top=I.y+(I.h-this.connectorNode.offsetHeight>>1)-H.y+"px",this.connectorNode.style.left=""):"M"==H.corner.charAt(1)&&
"M"==H.aroundCorner.charAt(1)?this.connectorNode.style.left=I.x+(I.w-this.connectorNode.offsetWidth>>1)-H.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top="");m.set(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=!0;this.aroundNode=p;this.onMouseEnter=z||v;this.onMouseLeave=E||v}},orient:function(w,p,D,C,G){this.connectorNode.style.top="";var z=C.h;C=C.w;w.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove",
"BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[p+"-"+D];this.domNode.style.width="auto";var E=l.position(this.domNode);if(a("ie")||a("trident"))E.w+=2;l.setMarginBox(this.domNode,{w:Math.min(Math.max(C,1),E.w)});"B"==D.charAt(0)&&"B"==p.charAt(0)?(w=l.position(w),p=this.connectorNode.offsetHeight,
w.h>z?(this.connectorNode.style.top=z-(G.h+p>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=Math.min(Math.max(G.h/2-p/2,0),w.h-p)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom="");return Math.max(0,E.w-C)},_onShow:function(){a("ie")&&(this.domNode.style.filter="")},hide:function(w){this._onDeck&&this._onDeck[1]==w?this._onDeck=null:this.aroundNode===w&&(this.fadeIn.stop(),this.isShowingNow=!1,this.aroundNode=
null,this.fadeOut.play());this.onMouseEnter=this.onMouseLeave=v},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";this._onDeck&&(this.show.apply(this,this._onDeck),this._onDeck=null)}});a("dojo-bidi")&&A.extend({_setAutoTextDir:function(w){this.applyTextDir(w);B.forEach(w.children,function(p){this._setAutoTextDir(p)},this)},_setTextDirAttr:function(w){this._set("textDir",w);"auto"==w?this._setAutoTextDir(this.containerNode):this.containerNode.dir=this.textDir}});x.showTooltip=
function(w,p,D,C,G,z,E){D&&(D=B.map(D,function(H){return{after:"after-centered",before:"before-centered"}[H]||H}));n._masterTT||(x._masterTT=n._masterTT=new A);return n._masterTT.show(w,p,D,C,G,z,E)};x.hideTooltip=function(w){return n._masterTT&&n._masterTT.hide(w)};var n=y("dijit.Tooltip",r,{label:"",showDelay:400,hideDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(w){B.forEach(this._connections||[],function(p){B.forEach(p,function(D){D.remove()})},this);this._connectIds=
B.filter(h.isArrayLike(w)?w:w?[w]:[],function(p){return u.byId(p,this.ownerDocument)},this);this._connections=B.map(this._connectIds,function(p){p=u.byId(p,this.ownerDocument);var D=this.selector,C=D?function(z){return d.selector(D,z)}:function(z){return z},G=this;return[d(p,C(f.enter),function(){G._onHover(this)}),d(p,C("focusin"),function(){G._onHover(this)}),d(p,C(f.leave),h.hitch(G,"_onUnHover")),d(p,C("focusout"),h.hitch(G,"set","state","DORMANT"))]},this);this._set("connectId",w)},addTarget:function(w){w=
w.id||w;-1==B.indexOf(this._connectIds,w)&&this.set("connectId",this._connectIds.concat(w))},removeTarget:function(w){w=B.indexOf(this._connectIds,w.id||w);0<=w&&(this._connectIds.splice(w,1),this.set("connectId",this._connectIds))},buildRendering:function(){this.inherited(arguments);q.add(this.domNode,"dijitTooltipData")},startup:function(){this.inherited(arguments);var w=this.connectId;B.forEach(h.isArrayLike(w)?w:[w],this.addTarget,this)},getContent:function(w){return this.label||this.domNode.innerHTML},
state:"DORMANT",_setStateAttr:function(w){if(!(this.state==w||"SHOW TIMER"==w&&"SHOWING"==this.state||"HIDE TIMER"==w&&"DORMANT"==this.state)){this._hideTimer&&(this._hideTimer.remove(),delete this._hideTimer);this._showTimer&&(this._showTimer.remove(),delete this._showTimer);switch(w){case "DORMANT":this._connectNode&&(n.hide(this._connectNode),delete this._connectNode,this.onHide());break;case "SHOW TIMER":"SHOWING"!=this.state&&(this._showTimer=this.defer(function(){this.set("state","SHOWING")},
this.showDelay));break;case "SHOWING":var p=this.getContent(this._connectNode);if(!p){this.set("state","DORMANT");return}n.show(p,this._connectNode,this.position,!this.isLeftToRight(),this.textDir,h.hitch(this,"set","state","SHOWING"),h.hitch(this,"set","state","HIDE TIMER"));this.onShow(this._connectNode,this.position);break;case "HIDE TIMER":this._hideTimer=this.defer(function(){this.set("state","DORMANT")},this.hideDelay)}this._set("state",w)}},_onHover:function(w){this._connectNode&&w!=this._connectNode&&
this.set("state","DORMANT");this._connectNode=w;this.set("state","SHOW TIMER")},_onUnHover:function(w){this.set("state","HIDE TIMER")},open:function(w){this.set("state","DORMANT");this._connectNode=w;this.set("state","SHOWING")},close:function(){this.set("state","DORMANT")},onShow:function(){},onHide:function(){},destroy:function(){this.set("state","DORMANT");B.forEach(this._connections||[],function(w){B.forEach(w,function(p){p.remove()})},this);this.inherited(arguments)}});n._MasterTooltip=A;n.show=
x.showTooltip;n.hide=x.hideTooltip;n.defaultPosition=["after-centered","before-centered"];return n})},"esri/OAuthSignInHandler":function(){define("./Credential ./domUtils ./lang ./urlUtils dijit/Dialog dijit/registry dojo/_base/config dojo/_base/Deferred dojo/_base/kernel dojo/dom-attr dojo/i18n!./nls/jsapi dojo/io-query dojo/sniff dojo/json dijit/form/Button dojo/query".split(" "),function(B,y,c,u,q,l,m,h,f,d,a,b,e,r){return{_oAuthDfd:null,_oAuthIntervalId:0,_oAuthDialogContent:"\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${oAuthInfo}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e",
setOAuthRedirectionHandler:function(t){this._oAuthRedirectFunc=t},oAuthSignIn:function(t,g,k,x){var v=this._oAuthDfd=new h;v.resUrl_=t;v.sinfo_=g;v.oinfo_=k;var A=!x||!1!==x.oAuthPopupConfirmation;if(!k.popup||!A)return this._doOAuthSignIn(t,g,k),v;this._nls||(this._nls=a.identity);this.oAuthDialog||(this.oAuthDialog=this._createOAuthDialog());t=this.oAuthDialog;k=x&&x.error;x=x&&x.token;y.hide(t.errMsg_);k&&403==k.code&&x&&(d.set(t.errMsg_,"innerHTML",this._nls.forbidden),y.show(t.errMsg_));d.set(t.serverLink_,
{title:g.server,innerHTML:-1!==g.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":g.server});t.show();return v},setOAuthResponseHash:function(t){var g=this._oAuthDfd;this._oAuthDfd=null;if(g&&t)if(clearInterval(this._oAuthIntervalId),"#"===t.charAt(0)&&(t=t.substring(1)),t=b.queryToObject(t),t.error)t=Error("access_denied"===t.error?"ABORTED":"OAuth: "+t.error+" - "+t.error_description),t.code="IdentityManagerBase.2",t.log=!!m.isDebug,g.errback(t);else{var k=g.oinfo_._oAuthCred,x=new B({userId:t.username,
server:g.sinfo_.server,token:t.access_token,expires:(new Date).getTime()+1E3*Number(t.expires_in),ssl:"true"===t.ssl,_oAuthCred:k});k.storage=t.persist?window.localStorage:window.sessionStorage;k.token=x.token;k.expires=x.expires;k.userId=x.userId;k.ssl=x.ssl;k.save();g.callback(x)}},_createOAuthDialog:function(){var t=this._nls,g=c.substitute(t,this._oAuthDialogContent);g=c.substitute({server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},g);var k=new q({title:t.title,
content:g,"class":"esriOAuthSignInDialog",style:"min-width: 18em;",esriIdMgr_:this,execute_:function(){var x=k.esriIdMgr_._oAuthDfd;k.hide_();k.esriIdMgr_._doOAuthSignIn(x.resUrl_,x.sinfo_,x.oinfo_)},cancel_:function(){var x=k.esriIdMgr_._oAuthDfd;k.esriIdMgr_._oAuthDfd=null;k.hide_();var v=Error("ABORTED");v.code="IdentityManager.2";v.log=!!m.isDebug;x.errback(v)},hide_:function(){y.hide(k.errMsg_);k.hide();q._DialogLevelManager.hide(k)}});t=k.domNode;k.btnSubmit_=l.byNode(f.query(".esriIdSubmit",
t)[0]);k.btnCancel_=l.byNode(f.query(".esriIdCancel",t)[0]);k.serverLink_=f.query(".serverLink",t)[0];k.errMsg_=f.query(".esriErrorMsg",t)[0];k.connect(k.btnSubmit_,"onClick",k.execute_);k.connect(k.btnCancel_,"onClick",k.onCancel);k.connect(k,"onCancel",k.cancel_);return k},_doOAuthSignIn:function(t,g,k){var x=this,v={portalUrl:k.portalUrl};!k.popup&&k.preserveUrlHash&&window.location.hash&&(v.hash=window.location.hash);v={client_id:k.appId,response_type:"token",state:r.stringify(v),expiration:k.expiration,
locale:k.locale,redirect_uri:k.popup?u.getAbsoluteUrl(k.popupCallbackUrl):window.location.href.replace(/#.*$/,"")};k.forceLogin&&(v.force_login=!0);var A=k.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize",n=A+"?"+b.objectToQuery(v);if(k.popup){if(7===e("ie")){var w=window.open(k.popupCallbackUrl,"esriJSAPIOAuth",k.popupWindowFeatures);w.location=n}else w=window.open(n,"esriJSAPIOAuth",k.popupWindowFeatures);w?(w.focus(),this._oAuthDfd.oAuthWin_=w,this._oAuthIntervalId=setInterval(function(){if(w.closed){clearInterval(x._oAuthIntervalId);
var p=x._oAuthDfd;if(p){var D=Error("ABORTED");D.code="IdentityManager.2";D.log=!!m.isDebug;p.errback(D)}}},500)):(t=Error("ABORTED"),t.code="IdentityManager.2",t.log=!!m.isDebug,this._oAuthDfd.errback(t))}else this._rejectOnPersistedPageShow=!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:v,authorizeUrl:A,resourceUrl:t,serverInfo:g,oAuthInfo:k}):window.location=n}}})},"esri/layers/graphics":function(){define(["./GraphicsLayer","../graphic","../renderer"],function(){return{}})},
"esri/layers/agstiled":function(){define(["./agscommon","./ArcGISTiledMapServiceLayer"],function(){return{}})},"esri/layers/agscommon":function(){define("./ArcGISMapServiceLayer ./LayerInfo ./TimeInfo ./LayerTimeOptions ./TimeReference ./Field ./Domain ./RangeDomain ./CodedValueDomain ./InheritedDomain ./LayerSource ./LayerMapSource ./LayerDataSource ./DataSource ./TableDataSource ./QueryDataSource ./JoinDataSource ./RasterDataSource ./DynamicLayerInfo ./LayerDrawingOptions ../geometry ../utils".split(" "),
function(){return{}})},"esri/layers/InheritedDomain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Domain"],function(B,y,c,u,q){B=B([q],{declaredClass:"esri.layers.InheritedDomain"});c("extend-esri")&&y.setObject("layers.InheritedDomain",B,u);return B})},"esri/layers/LayerSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(B,y,c,u){B=B(null,{declaredClass:"esri.layers.LayerSource",type:null,constructor:function(q){q&&
y.mixin(this,q)},toJson:function(){}});c("extend-esri")&&y.setObject("layers.LayerSource",B,u);return B})},"esri/layers/LayerMapSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerSource".split(" "),function(B,y,c,u,q,l){B=B(l,{declaredClass:"esri.layers.LayerMapSource",type:"mapLayer",toJson:function(){return q.fixJson({type:"mapLayer",mapLayerId:this.mapLayerId,gdbVersion:this.gdbVersion})}});c("extend-esri")&&y.setObject("layers.LayerMapSource",B,u);
return B})},"esri/layers/LayerDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerSource ./TableDataSource ./QueryDataSource ./JoinDataSource ./RasterDataSource".split(" "),function(B,y,c,u,q,l,m,h,f,d){B=B(l,{declaredClass:"esri.layers.LayerDataSource",type:"dataLayer",constructor:function(a){if(a&&a.dataSource){switch(a.dataSource.type){case "table":a=new m(a.dataSource);break;case "queryTable":a=new h(a.dataSource);break;case "joinTable":a=new f(a.dataSource);
break;case "raster":a=new d(a.dataSource);break;default:a=a.dataSource}this.dataSource=a}},toJson:function(){var a={type:"dataLayer",dataSource:this.dataSource&&this.dataSource.toJson()};return q.fixJson(a)}});c("extend-esri")&&y.setObject("layers.LayerDataSource",B,u);return B})},"esri/layers/TableDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource".split(" "),function(B,y,c,u,q,l){B=B(l,{declaredClass:"esri.layers.TableDataSource",toJson:function(){return q.fixJson({type:"table",
workspaceId:this.workspaceId,dataSourceName:this.dataSourceName,gdbVersion:this.gdbVersion})}});c("extend-esri")&&y.setObject("layers.TableDataSource",B,u);return B})},"esri/layers/DataSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(B,y,c,u){B=B(null,{declaredClass:"esri.layers.DataSource",constructor:function(q){q&&y.mixin(this,q)},toJson:function(){}});c("extend-esri")&&y.setObject("layers.DataSource",B,u);return B})},"esri/layers/QueryDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource ../SpatialReference".split(" "),
function(B,y,c,u,q,l,m){B=B(l,{declaredClass:"esri.layers.QueryDataSource",constructor:function(h){h&&(h.oidFields&&y.isString(h.oidFields)&&(this.oidFields=h.oidFields.split(",")),h.spatialReference&&(this.spatialReference=new m(h.spatialReference)))},toJson:function(){var h={type:"queryTable",workspaceId:this.workspaceId,query:this.query,oidFields:this.oidFields&&this.oidFields.join(),spatialReference:this.spatialReference&&this.spatialReference.toJson()};if(this.geometryType){var f="point"===this.geometryType.toLowerCase()?
"esriGeometryPoint":"multipoint"===this.geometryType.toLowerCase()?"esriGeometryMultipoint":"polyline"===this.geometryType.toLowerCase()?"esriGeometryPolyline":"polygon"===this.geometryType.toLowerCase()?"esriGeometryPolygon":this.geometryType;h.geometryType=f}return q.fixJson(h)}});c("extend-esri")&&y.setObject("layers.QueryDataSource",B,u);return B})},"esri/layers/JoinDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource ./LayerMapSource ./TableDataSource ./QueryDataSource ./RasterDataSource".split(" "),
function(B,y,c,u,q,l,m,h,f,d){var a=B(l,{declaredClass:"esri.layers.JoinDataSource",constructor:function(b){b&&(b.leftTableSource&&(this.leftTableSource=this._createLayerSource(b.leftTableSource)),b.rightTableSource&&(this.rightTableSource=this._createLayerSource(b.rightTableSource)))},_createLayerSource:function(b){if("mapLayer"===b.type)var e=new m(b);else{e={type:"dataLayer"};switch(b.dataSource.type){case "table":var r=new h(b.dataSource);break;case "queryTable":r=new f(b.dataSource);break;case "joinTable":r=
new a(b.dataSource);break;case "raster":r=new d(b.dataSource);break;default:r=b.dataSource}e.dataSource=r;e.toJson=function(){var t={type:"dataLayer",dataSource:r.toJson()};return q.fixJson(t)}}return e},toJson:function(){var b={type:"joinTable",leftTableSource:this.leftTableSource&&this.leftTableSource.toJson(),rightTableSource:this.rightTableSource&&this.rightTableSource.toJson(),leftTableKey:this.leftTableKey,rightTableKey:this.rightTableKey};var e="left-outer-join"===this.joinType.toLowerCase()?
"esriLeftOuterJoin":"left-inner-join"===this.joinType.toLowerCase()?"esriLeftInnerJoin":this.joinType;b.joinType=e;return q.fixJson(b)}});c("extend-esri")&&y.setObject("layers.JoinDataSource",a,u);return a})},"esri/layers/RasterDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource".split(" "),function(B,y,c,u,q,l){B=B(l,{declaredClass:"esri.layers.RasterDataSource",toJson:function(){return q.fixJson({type:"raster",workspaceId:this.workspaceId,dataSourceName:this.dataSourceName})}});
c("extend-esri")&&y.setObject("layers.RasterDataSource",B,u);return B})},"esri/layers/DynamicLayerInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerInfo ./LayerMapSource ./LayerDataSource".split(" "),function(B,y,c,u,q,l,m,h){B=B(l,{declaredClass:"esri.layers.DynamicLayerInfo",defaultVisibility:!0,parentLayerId:-1,maxScale:0,minScale:0,constructor:function(f){f&&(f.source?f="mapLayer"===f.source.type?new m(f.source):new h(f.source):(f=new m,f.mapLayerId=
this.id),this.source=f)},toJson:function(){var f=this.inherited(arguments);f.source=this.source&&this.source.toJson();return q.fixJson(f)}});c("extend-esri")&&y.setObject("layers.DynamicLayerInfo",B,u);return B})},"esri/layers/LayerDrawingOptions":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../renderers/jsonUtils ./LabelClass".split(" "),function(B,y,c,u,q,l,m,h){B=B(null,{declaredClass:"esri.layers.LayerDrawingOptions",constructor:function(f){if(f&&
(y.mixin(this,f),f.renderer&&(this.renderer=m.fromJson(f.renderer)),f.labelingInfo&&0<f.labelingInfo.length)){this.labelingInfo=[];var d;c.forEach(f.labelingInfo,function(a){d=new h(a);this.labelingInfo.push(d)},this)}},toJson:function(){var f={renderer:this.renderer&&this.renderer.toJson(),transparency:this.transparency,scaleSymbols:this.scaleSymbols,showLabels:this.showLabels};this.labelingInfo&&0<this.labelingInfo.length&&(f.labelingInfo=[],c.forEach(this.labelingInfo,function(d){f.labelingInfo.push(d.toJson())}));
return l.fixJson(f)}});u("extend-esri")&&y.setObject("layers.LayerDrawingOptions",B,q);return B})},"esri/layers/LabelClass":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../symbols/TextSymbol ../symbols/ShieldLabelSymbol".split(" "),function(B,y,c,u,q,l,m,h){var f=/__begin__/ig,d=/__end__/ig,a=/^__begin__/i,b=/__end__$/i;B=B(null,{declaredClass:"esri.layers.LabelClass",labelPlacement:null,labelExpression:null,format:null,fieldInfos:null,useCodedValues:null,
symbol:null,maxScale:0,minScale:0,where:null,sizeInfo:null,_labelPlacementLookup:{"above-center":"esriServerPointLabelPlacementAboveCenter","above-left":"esriServerPointLabelPlacementAboveLeft","above-right":"esriServerPointLabelPlacementAboveRight","below-center":"esriServerPointLabelPlacementBelowCenter","below-left":"esriServerPointLabelPlacementBelowLeft","below-right":"esriServerPointLabelPlacementBelowRight","center-center":"esriServerPointLabelPlacementCenterCenter","center-left":"esriServerPointLabelPlacementCenterLeft",
"center-right":"esriServerPointLabelPlacementCenterRight","above-after":"esriServerLinePlacementAboveAfter","above-along":"esriServerLinePlacementAboveAlong","above-before":"esriServerLinePlacementAboveBefore","above-start":"esriServerLinePlacementAboveStart","above-end":"esriServerLinePlacementAboveEnd","below-after":"esriServerLinePlacementBelowAfter","below-along":"esriServerLinePlacementBelowAlong","below-before":"esriServerLinePlacementBelowBefore","below-start":"esriServerLinePlacementBelowStart",
"below-end":"esriServerLinePlacementBelowEnd","center-after":"esriServerLinePlacementCenterAfter","center-along":"esriServerLinePlacementCenterAlong","center-before":"esriServerLinePlacementCenterBefore","center-start":"esriServerLinePlacementCenterStart","center-end":"esriServerLinePlacementCenterEnd","always-horizontal":"esriServerPolygonPlacementAlwaysHorizontal"},constructor:function(e){e&&(y.mixin(this,e),this._labelPlacementLookup.hasOwnProperty(this.labelPlacement)||(this.labelPlacement=l.valueOf(this._labelPlacementLookup,
e.labelPlacement)),e.format&&(this.format=e.format),e.fieldInfos&&(this.fieldInfos=e.fieldInfos),e.symbol&&(this.symbol="esriSHD"===e.symbol.type?new h(e.symbol):new m(e.symbol)),e=this.sizeInfo)&&(e.minSize&&(e.minSize=u.pt2px(e.minSize)),e.maxSize&&(e.maxSize=u.pt2px(e.maxSize)))},getSymbol:function(){return this.symbol},toJson:function(){var e=this.sizeInfo;e&&(e=y.mixin({},e),e.minSize&&(e.minSize=u.px2pt(e.minSize)),e.maxSize&&(e.maxSize=u.px2pt(e.maxSize)));var r=l.fixJson(this.labelExpressionInfo&&
y.clone(this.labelExpressionInfo));this._processLabelExpressionInfo(r);e={name:this.name,labelExpression:this.labelExpression,labelExpressionInfo:r,format:this.format||void 0,fieldInfos:this.fieldInfos||void 0,useCodedValues:this.useCodedValues,maxScale:this.maxScale,minScale:this.minScale,where:this.where,sizeInfo:e||void 0,labelPlacement:this._labelPlacementLookup.hasOwnProperty(this.labelPlacement)?this._labelPlacementLookup[this.labelPlacement]:this.labelPlacement,symbol:this.symbol&&this.symbol.toJson()};
return l.fixJson(e)},_processLabelExpressionInfo:function(e){e&&e.value&&(e.expression=this._convertTemplatedStringToArcade(e.value))},_convertTemplatedStringToArcade:function(e){if(e){var r=y.replace(e,function(t,g){return'__begin__$feature["'+g+'"]__end__'});r=a.test(r)?r.replace(a,""):'"'+r;r=b.test(r)?r.replace(b,""):r+'"';r=r.replace(f,'" + ').replace(d,' + "')}return r}});c("extend-esri")&&y.setObject("layers.LabelClass",B,q);return B})},"esri/symbols/ShieldLabelSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol ./Font".split(" "),
function(B,y,c,u,q,l,m,h,f){var d={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};B=B(h,{declaredClass:"esri.symbol.ShieldLabelSymbol",type:"shieldlabelsymbol",color:[255,255,255,1],width:32,height:32,font:u.defaultFont,constructor:function(a,b,e,r,t){a?y.isString(a)?(this.url=a,b&&(this.color=b),e&&(this.width=e),r&&(this.height=r),void 0!==t&&(this.font=t)):(this.width=u.pt2px(a.width),this.height=u.pt2px(a.height),b=a.imageData,9>c("ie")||!b||(e=this.url,this.url="data:"+(a.contentType||
"image")+";base64,"+b,this.imageData=e)):y.mixin(this,d)},getStroke:function(){return null},getFill:function(){return this.color},setWidth:function(a){this.width=a;return this},setHeight:function(a){this.height=a;return this},setUrl:function(a){a!==this.url&&(delete this.imageData,delete this.contentType);this.url=a;return this},setFont:function(a){this.font=a;return this},setText:function(a){this.text=a;return this},getWidth:function(){return this.width},getHeight:function(){return this.height},
getShapeDescriptors:function(){return{defaultShape:{type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||""},fill:null,stroke:null}},toJson:function(){var a=this.url,b=this.imageData;if(0===a.indexOf("data:")){var e=a;a=b;b=e.indexOf(";base64,")+8;b=e.substr(b)}a=m.getAbsoluteUrl(a);e=u.px2pt(this.width);e=isNaN(e)?void 0:e;var r=u.px2pt(this.height);r=isNaN(r)?void 0:r;a=l.fixJson(y.mixin(this.inherited("toJson",arguments),{type:"esriSHD",
url:a,imageData:b,contentType:this.contentType,width:e,height:r}));this.font?(b=new f(this.font),a.font=b.toJson()):a.font=null;delete a.size;a.imageData||delete a.imageData;return a}});B.defaultProps=d;c("extend-esri")&&(y.setObject("symbol.ShieldLabelSymbol",B,q),q.symbol.defaultShieldLabelSymbol=d);return B})},"esri/layers/agsdynamic":function(){define(["./agscommon","./ArcGISDynamicMapServiceLayer","../_time"],function(){return{}})},"esri/layers/ArcGISDynamicMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/sniff dojo/io-query ../kernel ../config ../lang ../request ../urlUtils ../layerUtils ../geometry/scaleUtils ./DynamicMapServiceLayer ./ArcGISMapServiceLayer ./TimeInfo ./LayerTimeOptions ./ImageParameters ./DynamicLayerInfo ./LayerMapSource".split(" "),
function(B,y,c,u,q,l,m,h,f,d,a,b,e,r,t,g,k,x,v,A){B=B([r,t],{declaredClass:"esri.layers.ArcGISDynamicMapServiceLayer",_eventMap:{"visible-layers-change":["visibleLayers"]},constructor:function(n,w,p){n=w&&w.imageParameters;var D=y.hitch;if(n){var C=n.layerDefinitions;C&&this.setLayerDefinitions(C);n.layerOption===x.LAYER_OPTION_SHOW&&(this.visibleLayers=[].concat(n.layerIds),this.onVisibleLayersChange(this.visibleLayers))}this._setIsPNG32=D(this,this._setIsPNG32);this.dpi=n&&n.dpi||96;this.imageFormat=
n&&n.format||"png8";this.imageTransparency=n&&!1===n.transparent?!1:!0;this._setIsPNG32();this.gdbVersion=w&&w.gdbVersion;this._params.gdbVersion=this.gdbVersion;C=n&&n.layerDefinitions;y.mixin(this._params,this._url.query,{dpi:this.dpi,transparent:this.imageTransparency,format:this.imageFormat},n?n.toJson():{});C&&(this._params.layerDefs=C);this.getImageUrl=D(this,this.getImageUrl);this._initLayer=D(this,this._initLayer);this._load=D(this,this._load);this.useMapImage=w?w.useMapImage:!1;this._loadCallback=
w&&w.loadCallback;(w=w&&w.resourceInfo)?this._initLayer(w):(void 0===p||!1===p)&&this._load();this.registerConnectEvents()},disableClientCaching:!1,layerDefinitions:null,_initLayer:function(n,w){this.inherited(arguments);n.timeInfo&&(this.timeInfo=new g(n.timeInfo));this.loaded=!0;this.onLoad(this);var p=this._loadCallback;p&&(delete this._loadCallback,p(this))},getImageUrl:function(n,w,p,D){var C=this._url.path+"/export",G=this._params,z=G.token=this._getToken(),E=n.spatialReference.wkid||u.toJson(n.spatialReference.toJson()),
H=this._errorHandler;delete G._ts;y.mixin(G,{bbox:n.xmin+","+n.ymin+","+n.xmax+","+n.ymax,bboxSR:E,imageSR:E,size:w+","+p},this.disableClientCaching?{_ts:(new Date).getTime()}:{});G.layerDefs&&(n=b._serializeLayerDefinitions(G.layerDefs,10.5<=this.version),G=y.mixin({},G),delete G.layerDefs,G.layerDefs=n);n=a.addProxy(a.normalize(C)+"?"+l.objectToQuery(y.mixin({},G,{f:"image"})));n.length>h.defaults.io.postLength||this.useMapImage?this._jsonRequest=d({url:C,content:y.mixin(G,{f:"json"}),callbackParamName:"callback",
load:function(I){I.imageData?I="data:"+(I.contentType||"image")+";base64,"+I.imageData:(I=I.href,z&&(I+=-1===I.indexOf("?")?"?token\x3d"+z:"\x26token\x3d"+z),I=a.addProxy(I));D(I)},error:H}):D(n)},_setIsPNG32:function(){var n=this.imageFormat.toLowerCase(),w=q("ie");this.isPNG32=w&&6===w&&("png32"===n||"png24"===n)&&this.imageTransparency},_setTime:function(n){var w=this.timeInfo;n=this._params.time=n?n.toJson().join(","):null;if(10.02>this.version&&w)if(n)this._params.layerTimeOptions=b._serializeTimeOptions(this.layerTimeOptions);
else{var p=this.layerInfos;if(p){var D=this.layerTimeOptions,C=D?D.slice(0):[],G=[];c.forEach(p,function(z){z.subLayerIds||G.push(z.id)});G.length&&(c.forEach(G,function(z){if(!C[z]){var E=new k;E.useTime=!1;C[z]=E}}),this._params.layerTimeOptions=b._serializeTimeOptions(C,G))}}10.02<=this.version&&w&&!n&&!w.hasLiveData&&(this._params.time="null,null")},setDPI:function(n,w){this.dpi=this._params.dpi=n;w||this.refresh(!0)},setImageFormat:function(n,w){this.imageFormat=this._params.format=n;this._setIsPNG32();
w||this.refresh(!0)},setImageTransparency:function(n,w){this.imageTransparency=this._params.transparent=n;this._setIsPNG32();w||this.refresh(!0)},setVisibleLayers:function(n,w){this.visibleLayers=n;this._params.layers=x.LAYER_OPTION_SHOW+":"+(n.length?n.join():"-1");this._updateDynamicLayers();w||this.refresh(!0);this.onVisibleLayersChange(this.visibleLayers)},onVisibleLayersChange:function(){},setDefaultVisibleLayers:function(n){this.visibleLayers=this._defaultVisibleLayers;this._params.layers=null;
this._updateDynamicLayers();n||this.refresh(!0);this.onVisibleLayersChange(this.visibleLayers)},setLayerDefinitions:function(n,w){this.layerDefinitions=n;this._params.layerDefs=n;this._updateDynamicLayers();w||this.refresh(!0)},setDefaultLayerDefinitions:function(n){this.layerDefinitions=this._params.layerDefs=null;this._updateDynamicLayers();n||this.refresh(!0)},setDisableClientCaching:function(n){this.disableClientCaching=n},setLayerTimeOptions:function(n,w){this.layerTimeOptions=n;this._params.layerTimeOptions=
b._serializeTimeOptions(n);this._updateDynamicLayers();w||this.refresh(!0)},refresh:function(n){if(n)this.inherited(arguments);else{var w=this.disableClientCaching;this.disableClientCaching=!0;this.inherited(arguments);this.disableClientCaching=w}},setLayerDrawingOptions:function(n,w){this.layerDrawingOptions=n;this._updateDynamicLayers();w||this.refresh(!0)},setDynamicLayerInfos:function(n,w){n&&0<n.length?(this.dynamicLayerInfos=n,this.visibleLayers=b._getDefaultVisibleLayers(n),this.onVisibleLayersChange(this.visibleLayers)):
this.dynamicLayerInfos=this.layerDrawingOptions=null;this._updateDynamicLayers();w||this.refresh(!0)},createDynamicLayerInfosFromLayerInfos:function(){var n=[],w;c.forEach(this.layerInfos,function(p){w=new v(p.toJson());w.source=new A({mapLayerId:p.id});n.push(w)});return n},_onDynamicLayersChange:function(){},_updateDynamicLayers:function(){if(this.dynamicLayerInfos&&0<this.dynamicLayerInfos.length||this.layerDrawingOptions&&0<this.layerDrawingOptions.length){this.dynamicLayerInfos&&0!==this.dynamicLayerInfos.length||
(this.dynamicLayerInfos=this.createDynamicLayerInfosFromLayerInfos());var n=this._map&&e.getScale(this._map);n=this._getDynLayerObjs(n);n=u.toJson(n);this._params.dynamicLayers&&this._params.dynamicLayers.length===n.length&&this._params.dynamicLayers===n||(this._params.dynamicLayers=n,this._onDynamicLayersChange(this._params.dynamicLayers))}else this._params.dynamicLayers?(this._params.dynamicLayers=null,this._onDynamicLayersChange(null)):this._params.dynamicLayers=null},_getDynLayerObjs:function(n){var w=
this.dynamicLayerInfos,p=[],D=this.visibleLayers,C=n?b._getLayersForScale(n,w):D;c.forEach(w,function(G){if(!G.subLayerIds){var z=G.id;if(-1!==c.indexOf(D,z)&&-1!==c.indexOf(C,z)){var E={id:z,name:G.name};E.source=G.source&&G.source.toJson();var H;this.layerDefinitions&&this.layerDefinitions[z]&&(H=this.layerDefinitions[z]);H&&(E.definitionExpression=H);var I;this.layerDrawingOptions&&this.layerDrawingOptions[z]&&(I=this.layerDrawingOptions[z]);I&&(H=I.toJson(),this._fixMarkerColor(H.renderer),E.drawingInfo=
H);var M;this.layerTimeOptions&&this.layerTimeOptions[z]&&(M=this.layerTimeOptions[z]);M&&(E.layerTimeOptions=M.toJson());E.minScale=G.minScale||0;E.maxScale=G.maxScale||0;p.push(E)}}},this);return p},_fixMarkerColor:function(n){c.forEach(this._getAllSimpleMarkerSymbols(n),function(w){if(!w.color){var p=[0,0,0,0],D=w.outline&&w.outline.color;"esriSMSX"!==w.style&&"esriSMSCross"!==w.style||!D||(p=D.slice(0));w.color=p}})},_getAllSimpleMarkerSymbols:function(n){return c.filter(this._getAllSymbols(n),
function(w){return"esriSMS"===w.type})},_getAllSymbols:function(n){var w=[];n&&(w.push(n.symbol),w.push(n.defaultSymbol),c.forEach(n.uniqueValueInfos||n.classBreakInfos,function(p){w.push(p.symbol)}),w=c.filter(w,f.isDefined));return w},_onExtentChangeHandler:function(n,w,p){p&&this._updateDynamicLayers();this.inherited(arguments)},_setMap:function(n,w,p){this._map=n;this._updateDynamicLayers();return this.inherited(arguments)},onGDBVersionChange:function(){},setGDBVersion:function(n,w){this.gdbVersion=
n;this._params.gdbVersion=n;this.onGDBVersionChange();w||this.refresh(!0)},exportMapImage:function(n,w){var p=y.hitch(this,function(){var D=h.defaults.map,C=n&&n.layerDefinitions;n=n?n.toJson(this.normalization):{};C&&(n.layerDefs=C);n=y.mixin({size:D.width+","+D.height},this._params,n,{f:"json"});delete n._ts;n.layerDefs&&(D=b._serializeLayerDefinitions(n.layerDefs,10.5<=this.version),delete n.layerDefs,n.layerDefs=D);this._exportMapImage(this._url.path+"/export",n,w)});if(this.loaded)p();else this.on("load",
p)}});q("extend-esri")&&y.setObject("layers.ArcGISDynamicMapServiceLayer",B,m);return B})},"esri/layers/DynamicMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/dom-construct dojo/dom-style dojox/gfx/matrix ../kernel ../config ../sniff ../request ../domUtils ./layer ./MapImage".split(" "),function(B,y,c,u,q,l,m,h,f,d,a,b,e){var r=h.defaults.map.zoomDuration;B=B(b,{declaredClass:"esri.layers.DynamicMapServiceLayer",_eventMap:{"map-image-export":["mapImage"]},
constructor:function(t,g){this.useMapTime=g&&g.hasOwnProperty("useMapTime")?!!g.useMapTime:!0;this.extentProcessor=g&&g.extentProcessor;t=c.hitch;this._exportMapImageHandler=t(this,this._exportMapImageHandler);this._imgSrcFunc=t(this,this._imgSrcFunc);this._divAlphaImageFunc=t(this,this._divAlphaImageFunc);this._tileLoadHandler=t(this,this._tileLoadHandler);this._tileErrorHandler=t(this,this._tileErrorHandler);this.registerConnectEvents()},opacity:1,isPNG32:!1,_setMap:function(t,g,k){this.inherited(arguments);
this._map=t;var x=this._div=u.create("div",null,g),v=m._css.names,A={position:"absolute",width:t.width+"px",height:t.height+"px",overflow:"visible",opacity:this.opacity},n=f("ie"),w=y.connect,p=t.__visibleDelta;8===n&&delete A.opacity;"css-transforms"===t.navigationMode?(this._isChildLayer||(A[v.transform]=m._css.translate(p.x,p.y),q.set(x,A)),this._left=p.x,this._top=p.y):(A.left="0px",A.top="0px",q.set(x,A),this._left=this._top=0);q.set(x,A);this._onResizeHandler_connect=w(t,"onResize",this,"_onResizeHandler");
this._opacityChangeHandler_connect=w(this,"onOpacityChange",this,"_opacityChangeHandler");this._img_loading=null;this._dragOrigin={x:0,y:0};this.evaluateSuspension();if(this.suspended&&!t.loaded)var D=y.connect(t,"onLoad",this,function(){y.disconnect(D);D=null;this.evaluateSuspension()});this.extentProcessor&&(this._panEndEvalHandle=y.connect(t,"onPanEnd",this,this.evaluateSuspension),this._zoomEndEvalHandle=y.connect(t,"onZoomEnd",this,this.evaluateSuspension));return x},_unsetMap:function(t,g){this._img&&
this._clearEventListeners(this._img);this._img_loading&&this._clearEventListeners(this._img_loading);u.destroy(this._div);this._map=this._div=this._img=this._img_loading=null;var k=y.disconnect;k(this._onResizeHandler_connect);k(this._opacityChangeHandler_connect);k(this._panEndEvalHandle);k(this._zoomEndEvalHandle);this._panEndEvalHandle=this._zoomEndEvalHandle=this._onResizeHandler_connect=this._opacityChangeHandler_connect=null;this._fireUpdateEnd();this._toggleTime();clearTimeout(this._wakeTimer);
this._wakeTimer=null;this._disableDrawConnectors();this.inherited(arguments)},_onResizeHandler:function(t,g,k){q.set(this._div,{width:g+"px",height:k+"px"});this._onExtentChangeHandler(t)},onSuspend:function(){this.inherited(arguments);this._fireUpdateEnd();this._toggleTime();a.hide(this._div);clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors()},onResume:function(){this.inherited(arguments);var t=this._map;this._toggleTime();"css-transforms"===t.navigationMode&&(t=t.__visibleDelta,
this._left=t.x,this._top=t.y,this._isChildLayer||q.set(this._div,m._css.names.transform,m._css.translate(this._left,this._top)));this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(c.hitch(this,function(){this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0)}),0)},canResume:function(){var t=this.inherited(arguments);if(t){var g=this._map.extent;this.extentProcessor&&g&&(t=!!this.extentProcessor({layer:this,extent:g,width:this._map.width}).extent)}return t},_enableDrawConnectors:function(){var t=
y.connect,g=this._map;g&&(this._onPanHandler_connect=t(g,"onPan",this,"_onPanHandler"),this._onExtentChangeHandler_connect=t(g,"onExtentChange",this,"_onExtentChangeHandler"),"css-transforms"===g.navigationMode?this._onScaleHandler_connect=t(g,"onScale",this,this._onScaleHandler):this._onZoomHandler_connect=t(g,"onZoom",this,"_onZoomHandler"))},_disableDrawConnectors:function(){var t=y.disconnect;t(this._onPanHandler_connect);t(this._onExtentChangeHandler_connect);t(this._onZoomHandler_connect);t(this._onScaleHandler_connect);
this._onPanHandler_connect=this._onExtentChangeHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=null},_toggleTime:function(){var t=this._map;this.timeInfo&&this.useMapTime&&t&&!this.suspended?(this._timeConnect||(this._timeConnect=y.connect(t,"onTimeExtentChange",this,this._onTimeExtentChangeHandler)),this._setTime(t.timeExtent)):(y.disconnect(this._timeConnect),this._timeConnect=null,this._setTime(null))},_setTime:function(t){this._params&&(this._params.time=t?t.toJson().join(","):
null)},_onPanHandler:function(t,g){this._panDx=g.x;this._panDy=g.y;t=this._dragOrigin;var k=this._map.__visibleDelta,x=this._img;x&&("css-transforms"===this._map.navigationMode?(this._left=k.x+g.x,this._top=k.y+g.y,this._isChildLayer||q.set(this._div,m._css.names.transform,m._css.translate(this._left,this._top))):q.set(x,{left:t.x+g.x+"px",top:t.y+g.y+"px"}))},_onExtentChangeHandler:function(t,g,k){if(!this.suspended){clearTimeout(this._wakeTimer);this._wakeTimer=null;var x=this._map,v=this._img,
A=v&&v.style,n=this._dragOrigin;!g||k||!v||g.x===this._panDx&&g.y===this._panDy||("css-transforms"===x.navigationMode?(g=x.__visibleDelta,this._left=g.x,this._top=g.y,this._isChildLayer||q.set(this._div,m._css.names.transform,m._css.translate(this._left,this._top))):q.set(v,{left:n.x+g.x+"px",top:n.y+g.y+"px"}));v?(n.x=parseInt(A.left,10),n.y=parseInt(A.top,10)):n.x=n.y=0;"css-transforms"===x.navigationMode&&k&&v&&(q.set(v,m._css.names.transition,"none"),v._multiply=v._multiply?l.multiply(v._matrix,
v._multiply):v._matrix);this._fireUpdateStart();if(k=this._img_loading)if(this._clearEventListeners(k),u.destroy(k),this._img_loading=null,k=this._jsonRequest){try{k.cancel()}catch(E){}this._jsonRequest=null}var w=x.width;k=x.height;g=w;var p=0;10<=this.version&&x.wrapAround180&&(t=t._normalize(!0));this.extentProcessor&&(p=this.extentProcessor({layer:this,extent:t,width:g}),t=p.extent,g=p.width,p=p.marginLeft||0);if(this.isPNG32)v=this._img_loading=u.create("div"),v.id=x.id+"_"+this.id+"_"+(new Date).getTime(),
q.set(v,{position:"absolute",left:"0px",top:"0px",width:g+"px",height:k+"px"}),x=v.appendChild(u.create("div")),q.set(x,{opacity:0,width:g+"px",height:k+"px"}),this.getImageUrl(t,g,k,this._divAlphaImageFunc),v=null;else{var D=this._img_loading=u.create("img"),C=m._css.names,G=f("ie"),z={position:"absolute",width:g+"px",height:k+"px"};D.setAttribute("decoding","sync");8===G&&(z.opacity=this.opacity);null!=p&&0!==p&&(z.marginLeft=p+"px");"css-transforms"===x.navigationMode?(z[C.transform]=m._css.translate(-this._left,
-this._top),D._tdx=-this._left,D._tdy=-this._top,z[C.transition]=C.transformName+" "+r+"ms ease",this.extentProcessor&&(z[C.origin]=w/2-p+"px "+k/2+"px")):(z.left="0px",z.top="0px");D.id=x.id+"_"+this.id+"_"+(new Date).getTime();q.set(D,z);D._onload_connect=y.connect(D,"onload",this,"_onLoadHandler");D._onerror_connect=y.connect(D,"onerror",this,"_onErrorHandler");D._onabort_connect=y.connect(D,"onabort",this,"_onErrorHandler");this._startRect={left:n.x,top:n.y,width:v?parseInt(A.width,10):g,height:v?
parseInt(A.height,10):k,marginLeft:v?parseInt(A.marginLeft||"0",10):p,zoom:A&&A.zoom?parseFloat(A.zoom):1};this.getImageUrl(t,g,k,this._imgSrcFunc);D=null}}},_onTimeExtentChangeHandler:function(t){this.suspended||(this._setTime(t),this.refresh(!0))},getImageUrl:function(t,g,k,x){},_imgSrcFunc:function(t){this._img_loading.src=t},_divAlphaImageFunc:function(t){q.set(this._img_loading,"filter","progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'"+t+"', sizingMethod\x3d'scale')");this._onLoadHandler({currentTarget:this._img_loading})},
_onLoadHandler:function(t){t=t.currentTarget;var g=this._map;this._clearEventListeners(t);!g||g.__panning||g.__zooming?u.destroy(t):(this._img&&this._div.removeChild(this._img),this._img=t,g=t.style,this._startRect={left:0,top:0,width:parseInt(g.width,10),height:parseInt(g.height,10),marginLeft:parseInt(g.marginLeft||"0",10),zoom:1},this._div.appendChild(t),this.suspended||a.show(this._div),this._img_loading=null,t=this._dragOrigin,t.x=t.y=0,this.onUpdate());this._fireUpdateEnd()},_onErrorHandler:function(t){t=
t.currentTarget;q.set(t,"visibility","hidden");this._clearEventListeners(t);t=Error("Unable to load image: "+t.src);this.onError(t);this._fireUpdateEnd(t)},_clearEventListeners:function(t){y.disconnect(t._onload_connect);y.disconnect(t._onerror_connect);y.disconnect(t._onabort_connect);t._onload_connect=t._onerror_connect=t._onabort_connect=null},setUseMapTime:function(t,g){this.useMapTime=t;this._toggleTime();g||this.refresh(!0)},refresh:function(){this._map&&this._onExtentChangeHandler(this._map.extent)},
_onScaleHandler:function(t,g){var k={},x=m._css.names,v=this._img;if(v){q.set(v,x.transition,g?"none":x.transformName+" "+r+"ms ease");v._matrix=t;t=v._multiply?l.multiply(t,v._multiply):t;if(v._tdx||v._tdy)t=l.multiply(t,{xx:1,xy:0,yx:0,yy:1,dx:v._tdx,dy:v._tdy});k[x.transform]=m._css.matrix(t);q.set(v,k)}},_onZoomHandler:function(t,g,k){t=this._startRect;var x=t.width*g,v=t.height*g,A=t.marginLeft*g,n=this._img,w=f("ie");n&&(w&&8>w?q.set(n,{left:t.left-(x-t.width)*(k.x-t.left)/t.width+"px",top:t.top-
(v-t.height)*(k.y-t.top)/t.height+"px",zoom:g*t.zoom}):q.set(n,{left:t.left-(x-t.width)*(k.x-t.left)/t.width+"px",top:t.top-(v-t.height)*(k.y-t.top)/t.height+"px",width:x+"px",height:v+"px"}),null!=A&&0!==A&&q.set(n,{marginLeft:A+"px"}))},_exportMapImage:function(t,g,k){var x=this._exportMapImageHandler;g.token=this._getToken();d({url:t,content:g,callbackParamName:"callback",load:function(v,A){x(v,A,k)},error:h.defaults.io.errorHandler})},_exportMapImageHandler:function(t,g,k){t=new e(t);this.onMapImageExport(t);
k&&k(t)},onMapImageExport:function(){},setOpacity:function(t){if(this.opacity!=t)this.onOpacityChange(this.opacity=t)},onOpacityChange:function(){},_opacityChangeHandler:function(t){var g=8===f("ie")?this._img:this._div;q.set(g,"opacity",t)}});f("extend-esri")&&c.setObject("layers.DynamicMapServiceLayer",B,m);return B})},"esri/layers/MapImage":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/has ../kernel ../domUtils ../geometry/Extent".split(" "),function(B,y,c,u,q,l,m){B=
B(null,{declaredClass:"esri.layers.MapImage",constructor:function(h){y.mixin(this,h);this.extent=new m(this.extent)},visible:!0,opacity:1,getLayer:function(){return this._layer},getNode:function(){return this._node},show:function(){if(!this.visible){this.visible=!0;var h=this._node,f=this._layer,d;if(h){if(d=f&&f._div)f.suspended||f._setPos(h,d._left,d._top),(f._active||d).appendChild(h);l.show(h)}}},hide:function(){if(this.visible){this.visible=!1;var h=this._node;h&&(l.hide(h),h.parentNode&&h.parentNode.removeChild(h))}},
setOpacity:function(h){var f=this._node;this.opacity=h;f&&c.set(f,"opacity",h)}});u("extend-esri")&&y.setObject("layers.MapImage",B,q);return B})},"esri/layers/ImageParameters":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../lang ../layerUtils".split(" "),function(B,y,c,u,q,l,m,h){y=y(null,{declaredClass:"esri.layers.ImageParameters",constructor:function(){this.layerDefinitions=[]},bbox:null,extent:null,width:null,height:null,dpi:null,
format:null,imageSpatialReference:null,layerOption:null,layerIds:null,transparent:null,timeExtent:null,layerTimeOptions:null,toJson:function(f){this.bbox&&B.deprecated(this.declaredClass+" : Property 'bbox' deprecated. Use property 'extent'.");var d=this.bbox||this.extent;d=d&&f&&d._normalize(!0);f=this.layerOption;var a=d?d.spatialReference.wkid||u.toJson(d.spatialReference.toJson()):null,b=this.imageSpatialReference;d={dpi:this.dpi,format:this.format,transparent:this.transparent,size:null!==this.width&&
null!==this.height?this.width+","+this.height:null,bbox:d?d.xmin+","+d.ymin+","+d.xmax+","+d.ymax:null,bboxSR:a,layers:f?f+":"+this.layerIds.join(","):null,imageSR:b?b.wkid||u.toJson(b.toJson()):a};d.layerDefs=h._serializeLayerDefinitions(this.layerDefinitions);f=this.timeExtent;d.time=f?f.toJson().join(","):null;d.layerTimeOptions=h._serializeTimeOptions(this.layerTimeOptions);return m.filter(d,function(e){if(null!==e)return!0})}});c.mixin(y,{LAYER_OPTION_SHOW:"show",LAYER_OPTION_HIDE:"hide",LAYER_OPTION_INCLUDE:"include",
LAYER_OPTION_EXCLUDE:"exclude"});q("extend-esri")&&c.setObject("layers.ImageParameters",y,l);return y})},"esri/_time":function(){define(["./TimeExtent"],function(){return{}})},"esri/layers/FeatureLayer":function(){define("require module dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/date/locale dojo/io-query dojo/dom-construct dojo/i18n dojo/when dojo/global dojo/promise/all ../sniff ../kernel ../lang ../request ../config ../deferredUtils ../promiseList ../SpatialReference ../urlUtils ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/jsonUtils ../renderers/SimpleRenderer ../renderers/UniqueValueRenderer ../renderers/jsonUtils ../support/expressionUtils ../arcadeProfiles/labelingProfile ../tasks/QueryTask ../tasks/query ../tasks/FeatureSet ../tasks/StatisticDefinition ../geometry/Extent ../geometry/jsonUtils ../geometry/normalizeUtils ../geometry/scaleUtils ./GraphicsLayer ./Field ./TimeInfo ./TimeReference ./FeatureType ./FeatureTemplate ./FeatureSubtype ./FeatureEditResult ./LabelClass ./support/domainUtils ./SnapshotMode ./OnDemandMode ./SelectionMode ./StreamMode ./GridLayout ./TrackManager ./HeatmapManager ./clustering/ClusterManager dojo/i18n!../nls/jsapi dojo/has!extend-esri?./agscommon".split(" "),
function(B,y,c,u,q,l,m,h,f,d,a,b,e,r,t,g,k,x,v,A,n,w,p,D,C,G,z,E,H,I,M,T,Y,fa,ca,X,ea,ma,wa,P,ja,ta,N,S,ha,la,sa,ya,Ga,ba,da,oa,va,pa,Oa,W,U,na,qa,Ea){var Ta=A.defaults,Ya=!!g("esri-pbf"),bb=!!g("esri-featurelayer-pbf"),Ma=c(ta,{declaredClass:"esri.layers.FeatureLayer",invalidParams:"query contains one or more unsupported parameters",reSQLCurrentTimestamp:/current_timestamp|current_date|current_time/i,reHostedFS:/(https?:)?\/\/services.*\.arcgis\.com/i,maxPointCountForAuto:4E3,maxRecordCountForAuto:2E3,
maxVertexCountForAuto:25E4,generalizeForScale:4E3,_eventMap:{"add-attachment-complete":["result"],"before-apply-edits":["adds","updates","deletes"],"delete-attachments-complete":["results"],"edits-complete":["adds","updates","deletes"],"query-attachment-infos-complete":["results"],"query-count-complete":["count"],"query-features-complete":["featureSet"],"query-ids-complete":["objectIds"],"query-related-features-complete":["featureSets"],"selection-complete":["features","method"],"update-end":["error",
"info"]},constructor:function(J,Q){this._preventInit||this._initFeatureLayer(J,Q)},_initFeatureLayer:function(J,Q){Q=Q||{};this._tileWidth=Q.tileWidth||512;this._tileHeight=Q.tileHeight||512;this.i18n=Ea;this._featureReduction=this._featureReduction||Q.featureReduction;this._featureReductionEnabled=null!=Q.featureReductionEnabled?Q.featureReductionEnabled:!0;this._featureUpdatesCheckEnabled=null!=Q.featureUpdatesCheckEnabled?Q.featureUpdatesCheckEnabled:!0;this.showLabels=null!=Q.showLabels?Q.showLabels:
!0;this._outFields=Q.outFields;this._defnExpr=Q.definitionExpression;this._loadCallback=Q.loadCallback;this._trackIdField=Q.trackIdField;this.objectIdField=Q.objectIdField;var Z=null!=Q.resolution,L=null!=Q.maxAllowableOffset;this._maxOffset=this._optMaxOffset=Z||L?Z?Q.resolution:Q.maxAllowableOffset:this.maxAllowableOffset;this.quantize=null!=Q.quantize?Q.quantize:!0;this._optEditable=Q.editable;this._optAutoGen=Q.autoGeneralize;this.editSummaryCallback=Q.editSummaryCallback;this.userId=Q.userId;
this.userIsAdmin=Q.userIsAdmin;this.useMapTime=Q.hasOwnProperty("useMapTime")?!!Q.useMapTime:!0;this.source=Q.source;this.gdbVersion=Q.gdbVersion;this.orderByFields=Q.orderByFields;this.maxPointCountForAuto=null!=Q.maxPointCountForAuto?Q.maxPointCountForAuto:this.maxPointCountForAuto;this.maxRecordCountForAuto=null!=Q.maxRecordCountForAuto?Q.maxRecordCountForAuto:this.maxRecordCountForAuto;this.maxVertexCountForAuto=null!=Q.maxVertexCountForAuto?Q.maxVertexCountForAuto:this.maxVertexCountForAuto;
this.generalizeForScale=null!=Q.generalizeForScale?Q.generalizeForScale:this.generalizeForScale;this.queryPagination=this._optQueryPagination=null!=Q.queryPagination?Q.queryPagination:!0;this.multipatchOption=Q.multipatchOption;this.subtypeSublayerInfo=Q.subtypeSublayerInfo;this._selectedFeatures={};this._newFeatures=[];this._deletedFeatures={};this._ulid=this._getUniqueId();Z=x.isDefined(Q.mode)?Q.mode:Ma.MODE_ONDEMAND;this._isStream&&(Z=Ma.MODE_STREAM);this.mode=Z;switch(Z){case Ma.MODE_SNAPSHOT:this.currentMode=
Ma.MODE_SNAPSHOT;this._mode=new oa(this);break;case Ma.MODE_ONDEMAND:case Ma.MODE_AUTO:this.currentMode=Ma.MODE_ONDEMAND;this._mode=new va(this);this.latticeTiling=Q.latticeTiling;break;case Ma.MODE_SELECTION:this.currentMode=Ma.MODE_SELECTION;this._mode=new pa(this);this._isSelOnly=!0;break;case Ma.MODE_STREAM:this.currentMode=Ma.MODE_STREAM,this._mode=new Oa(this),this._isStream=!0}this._initLayer=q.hitch(this,this._initLayer);this._selectHandler=q.hitch(this,this._selectHandler);this._editable=
!1;if(q.isObject(J)&&J.layerDefinition)return this._collection=!0,this.mode=this._isStream?Ma.MODE_STREAM:Ma.MODE_SNAPSHOT,this._isStream||this._outFields||(this._outFields=["*"]),this._initLayer(J),this;this.source&&(J={source:this.source.toJson()},this._url.query=q.mixin(this._url.query,{layer:m.toJson(J)}));this.gdbVersion&&(this._url.query=q.mixin(this._url.query,{gdbVersion:this.gdbVersion}));this._task=new fa(this.url,{source:this.source,gdbVersion:this.gdbVersion});J=this._url.path;this._fserver=
!1;-1!==J.search(/\/FeatureServer\//i)&&(this._fserver=!0);this._checkFeatureLimit();(Q=Q.resourceInfo)?this._initLayer(Q):v({url:J,content:q.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});this.registerConnectEvents()},_initLayer:function(J,Q){if(J||Q){this._json=J;Q=this.subtypeSublayerInfo;this._findCredential();if(this.credential&&this.credential.ssl||J&&J._ssl)this._useSSL(),this._task._useSSL();this._collection&&(this._isStream||
(this.currentMode=Ma.MODE_SNAPSHOT,this._mode=new oa(this)),this._featureSet=J.featureSet,this._nextId=J.nextObjectId,J=J.layerDefinition);this.version=J.currentVersion;this.version||(this.version="capabilities"in J||"drawingInfo"in J||"hasAttachments"in J||"htmlPopupType"in J||"relationships"in J||"timeInfo"in J||"typeIdField"in J||"types"in J?10:9.3);this.geometryType=J.geometryType;J.bandCount&&J.fields&&1<J.fields.length&&(this.geometryType="esriGeometryPolygon",this._isImageService=!0);"string"!==
typeof this.multipatchOption&&"esriGeometryMultiPatch"===this.geometryType&&(this.multipatchOption="xyFootprint");if(J.hasOwnProperty("capabilities")){var Z=this.capabilities=J.capabilities;Z&&-1!==Z.toLowerCase().indexOf("editing")?this._editable=!0:this._editable=!1}else this._collection||(this._editable=this._fserver);x.isDefined(this._optEditable)?(this._editable=this._optEditable,delete this._optEditable):"esriGeometryMultiPatch"===this.geometryType&&(this._editable=!1);this._isImageService&&
(this._editable=!1);this._json=m.toJson(this._json);this.isEditable()?this._setMaxOffset(null):this._canAutoGeneralize()&&(this._autoGeneralize=x.isDefined(this._optAutoGen)?this._optAutoGen:this.mode===Ma.MODE_ONDEMAND||this.mode===Ma.MODE_AUTO,delete this._optAutoGen);Z=J.effectiveMinScale||J.minScale;var L=J.effectiveMaxScale||J.maxScale;!this._hasMin&&Z&&this.setMinScale(Z);!this._hasMax&&L&&this.setMaxScale(L);this.layerId=J.id;this.name=Q&&Q.title||J.name;this.description=J.description;this.copyright=
J.copyrightText;this.type=J.type;this.displayField=J.displayField;this.defaultDefinitionExpression=J.definitionExpression||(J.isView?J.viewDefinitionQuery:J.definitionQuery);this.fullExtent=new ma(J.extent);this.initialExtent=new ma(this.fullExtent.toJson());this.fullExtent.spatialReference&&(this.spatialReference=new p(this.fullExtent.spatialReference.toJson()));this.defaultVisibility=J.defaultVisibility;this.editingInfo=J.editingInfo;this.supportsLastEditDate=!(!this.editingInfo||null==this.editingInfo.lastEditDate);
if("esriGeometryPoint"===this.geometryType||"esriGeometryMultipoint"===this.geometryType)this.latticeTiling=!1;this.hasM=J.hasM||!1;this.hasZ=J.hasZ||!1;this.indexedFields=J.indexedFields;this.indexes=J.indexes;this.maxRecordCount=J.maxRecordCount;this.canModifyLayer=J.canModifyLayer;this.supportsStatistics=J.supportsStatistics;this.supportsAdvancedQueries=this._collection?!1:J.supportsAdvancedQueries;this.supportsCalculate=J.supportsCalculate;this.supportsASyncCalculate=J.supportsASyncCalculate;
this.supportsAttachmentsByUploadId=J.supportsAttachmentsByUploadId;this.supportsCoordinatesQuantization=J.supportsCoordinatesQuantization;this.supportsQuantizationEditMode=J.supportsQuantizationEditMode;this.supportsFieldDescription=J.supportsFieldDescriptionProperty;this.supportsFormatPBF=J.supportedQueryFormats?-1!==l.map(J.supportedQueryFormats.toLowerCase().split(","),q.trim).indexOf("pbf"):!1;this.quantize=this.quantize&&this.supportsCoordinatesQuantization;this.hasLabels=J.hasLabels;this.canScaleSymbols=
J.canScaleSymbols;this.supportsRollbackOnFailureParameter=this.supportsRollbackOnFailure=J.supportsRollbackOnFailure;this.syncCanReturnChanges=J.syncCanReturnChanges;this.isDataVersioned=J.isDataVersioned;this.editFieldsInfo=J.editFieldsInfo;this.ownershipBasedAccessControlForFeatures=J.ownershipBasedAccessControlForFeatures;this.editFieldsInfo&&this.ownershipBasedAccessControlForFeatures&&(this.creatorField=this.editFieldsInfo.creatorField);this.relationships=J.relationships;this.allowGeometryUpdates=
x.isDefined(J.allowGeometryUpdates)?J.allowGeometryUpdates:!0;this.allowUpdateWithoutMValues=!!J.allowUpdateWithoutMValues;this.enableZDefaults=!!J.enableZDefaults;this.zDefault=x.isDefined(J.zDefault)?J.zDefault:null;this.advancedQueryCapabilities=J.advancedQueryCapabilities||{supportsStatistics:this.supportsStatistics,supportsOrderBy:this.supportsAdvancedQueries,supportsDistinct:this.supportsAdvancedQueries};this.geometryProperties=J.hasGeometryProperties&&J.geometryProperties||null;this.url&&(this.advancedQueryCapabilities.supportsPagination=
this.advancedQueryCapabilities.supportsPagination&&(this.reHostedFS.test(this.url)||10.3<this.version));this.queryPagination=this._optQueryPagination&&this.advancedQueryCapabilities.supportsPagination;this.useStandardizedQueries=J.useStandardizedQueries;this.tileMaxRecordCount=J.tileMaxRecordCount;this.standardMaxRecordCount=J.standardMaxRecordCount;if(Z=J.dateFieldsTimeReference)this.dateFieldsTimeReference=new ha(Z);this._setMaxOffset(this._maxOffset,!0);this._isTable="Table"===this.type;L=J.fields;
this._createFields(L);if(!this.objectIdField){this.objectIdField=J.objectIdField;if(!this.objectIdField)for(L=J.fields,Z=0;Z<L.length;Z++){var R=L[Z];if("esriFieldTypeOID"===R.type){this.objectIdField=R.name;break}}this.objectIdField||this._isStream||console.debug("esri.layers.FeatureLayer: "+x.substitute({url:this.url},"objectIdField is not set [url: ${url}]"))}if(!x.isDefined(this._nextId)){L=this.objectIdField;R=-1;if(this._collection&&L){var aa=(Z=this._featureSet)&&Z.features,ka=aa?aa.length:
0;for(Z=0;Z<ka;Z++){var ua=(ua=aa[Z].attributes)&&ua[L];ua>R&&(R=ua)}}this._nextId=R+1}this.globalIdField=J.globalIdField;if(Z=this.typeIdField=J.typeIdField)if(Z=!this._getField(Z)&&this._getField(Z,!0))this.typeIdField=Z.name;this.visibilityField=J.visibilityField;if(L=J.defaultSymbol)this.defaultSymbol=E.fromJson(L);var Aa=this.types=[],Ba=J.types;R=(Z=this.editFieldsInfo)&&Z.creatorField;aa=Z&&Z.editorField;ua=R||aa;ka=[];if(Ba)for(Z=0;Z<Ba.length;Z++){var Qa=new la(Ba[Z]);var La=Qa.templates;
ua&&La&&La.length&&(ka=ka.concat(La));Aa.push(Qa)}Ba=J.templates;Qa=this.templates=[];if(Ba)for(Z=0;Z<Ba.length;Z++)Aa=new sa(Ba[Z]),ua&&ka.push(Aa),Qa.push(Aa);for(Z=0;Z<ka.length;Z++)if(ua=q.getObject("prototype.attributes",!1,ka[Z]))R&&delete ua[R],aa&&delete ua[aa];if(Z=J.subtypeField)this.subtypeField=(Z=this.getField(Z))?Z.name:null;this.defaultSubtypeCode=J.defaultSubtypeCode;this.subtypes=l.map(J.subtypes,function(cb){return new ya(cb)});this._applySTSublayerInfo(Q);if(Q=J.timeInfo)this.timeInfo=
new S(Q),this._startTimeField=Q.startTimeField,this._endTimeField=Q.endTimeField,this._startTimeField&&this._endTimeField&&(this._twoTimeFields=!0),this._trackIdField?Q.trackIdField=this._trackIdField:this._trackIdField=Q.trackIdField;this.hasAttachments=!this._collection&&J.hasAttachments?!0:!1;this.htmlPopupType=J.htmlPopupType;Q=J.drawingInfo;(Z=Q&&Q.labelingInfo)&&!this.labelingInfo&&(this.labelingInfo=l.map(Z,function(cb){return new ba(cb)}),this._fixLabelExpr());if(!this.renderer)if(Q&&Q.renderer){var Ia=
Q.renderer;this.setRenderer(M.fromJson(Ia,{geometryType:this.geometryType}));"classBreaks"===Ia.type&&this.renderer.setMaxInclusive(!0);if(!this._collection){var Na=Ia.type;Z=[];Ia=this.renderer;switch(Na){case "simple":Z.push(Ia.symbol);break;case "uniqueValue":case "classBreaks":Z.push(Ia.defaultSymbol),Z=Z.concat(l.map(Ia.infos,function(cb){return cb.symbol}))}Z=l.filter(Z,x.isDefined);var eb=this._url.path+"/images/",ab=this._getToken();l.forEach(Z,function(cb){var kb=cb.url;kb&&(-1===kb.search(/https?:/)&&
-1===kb.indexOf("data:")&&(cb.url=eb+kb),ab&&-1!==cb.url.search(/https?:/)&&(cb.url+="?token\x3d"+ab))})}}else if(L)Ba=this.types,0<Ba.length?(Ia=new I(this.defaultSymbol,this.typeIdField),l.forEach(Ba,function(cb){Ia.addValue(cb.id,cb.symbol)})):Ia=new H(this.defaultSymbol),this.setRenderer(Ia);else if(!this._isTable){switch(this.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":Na=new C;break;case "esriGeometryPolyline":Na=new G;break;case "esriGeometryPolygon":Na=new z;break;
default:this.hasXYFootprint()&&(Na=new z)}this.setRenderer(Na?new H(Na):null)}Na=Q&&Q.transparency||0;!this.hasOwnProperty("opacity")&&0<Na&&(this.opacity=1-Na/100);(g("ie")||7<=g("trident")||g("safari"))&&this.isEditable()&&10.02>this.version&&(this._ts=!0);this.statistics=J.statistics;this._fixRendererFields();this._updateRequiredFieldsFromLabelingInfo();this._checkFields();this._updateCaps();var gb=function(){null==this._maxOffset||this._isFractionalOffsetAllowed()||this._setMaxOffset(this._maxOffset);
this.loaded=!0;this.setFeatureReduction(this.getFeatureReduction());this.currentMode!==Ma.MODE_SNAPSHOT&&(this.queryPagination=!1);this.onLoad(this);var cb=this._loadCallback;cb&&(delete this._loadCallback,cb(this))};J=[];this._collection?(Na=this._featureSet,this._featureSet=null,this._mode._drawFeatures(new X(Na)),this._fcAdded=!0):(J.push(this._forceIdentity()),this._limitPromise&&J.push(this._limitPromise));J.push(this._evalArcadeSupport());J.length?w(J).then(q.hitch(this,function(){gb.call(this)})):
gb.call(this)}},_applySTSublayerInfo:function(J){J&&this.subtypeField&&(this.subtypeCode=J.subtypeCode,this._applySTSublayerDefinitionExpression(J),this._filterSubtypes(J),this._applySTTemplates(J),this._applySTFieldOverrides(J))},_applySTSublayerDefinitionExpression:function(J){var Q=[],Z=this.getDefinitionExpression();Z&&Q.push(Z);Q.push(this.subtypeField+" \x3d "+this.subtypeCode);(J=J.layerDefinition&&J.layerDefinition.definitionExpression)&&Q.push(J);Q=l.map(Q,function(L){return"("+L+")"});this.setDefinitionExpression(Q.join(" AND "))},
_applySTTemplates:function(J){if(J=J.layerDefinition&&J.layerDefinition.templates)this.templates=l.map(J,function(Q){return new sa(Q)})},_filterSubtypes:function(){this.subtypes&&(this.subtypes=l.filter(this.subtypes,function(J){return J.code===this.subtypeCode},this))},_applySTFieldOverrides:function(J){var Q=J.layerDefinition&&J.layerDefinition.fieldOverrides;if(Q){this.fields=l.filter(this.fields,function(L){return l.some(Q,function(R){return R.name===L.name})});var Z=this.getSubtypeByCode(this.subtypeCode).domains;
this.fields.forEach(function(L){var R=l.filter(Q,function(aa){return aa.name===L.name})[0];R.alias&&(L.alias=R.alias);if(!1===R.editable||L.name===this.subtypeField)L.editable=!1;Z&&(R=Z[L.name])&&"inherited"!==R.type&&(L.domain=da.fromJson(R.toJson()))},this)}},setShowLabels:function(J){var Q=this.showLabels;this.showLabels=J;Q!==this.showLabels&&(this._evalSurfaceType(),this.onShowLabelsChange())},onShowLabelsChange:function(){},onRendererChange:function(J){this.inherited(arguments);var Q=this._map;
this._ager=!!(J&&J.observationAger&&J.observationRenderer);J&&"colors"in J&&"blurRadius"in J&&"maxPixelIntensity"in J?(this._evalSurfaceType(!0),"esriGeometryPoint"==this.geometryType&&!this._heatmapManager&&Q&&(this._heatmapManager=new na(this),this._heatmapManager.initialize(Q))):this.renderer&&this.renderer.getRendererInfo?l.some(this.renderer.rendererInfos,function(R){return R.renderer&&"colors"in R.renderer&&"blurRadius"in R.renderer})||(this._heatmapManager=null):this._heatmapManager=null;this.timeInfo&&
Q&&(J&&(J.latestObservationRenderer||J.trackRenderer)?this._trackManager||(this._trackManager=new U(this),this._trackManager.initialize(Q),this._childLayer=this._trackManager.container,this._mode._applyTimeFilter()):this._trackManager&&!this._isStream&&(this._trackManager.destroy(),this._trackManager=null));if(J){var Z=[];Q=l.filter([J,J.observationRenderer,J.latestObservationRenderer,J.trackRenderer],x.isDefined);var L=function(R){return null!=R&&"function"!=typeof R&&R};l.forEach(Q,function(R){var aa=
L(R.attributeField),ka=L(R.attributeField2);R=L(R.attributeField3);!1!==aa&&Z.push(aa);!1!==ka&&Z.push(ka);!1!==R&&Z.push(R)});this._requiredFields=Z}else this._requiredFields=[];this.loaded&&(this._fixRendererFields(),this._checkFields(this._requiredFields),this._collection&&(this._typesDirty=!0))},setFeatureReduction:function(J){J&&(J=q.mixin({},J),null!=J.clusterSize&&null==J.clusterRadius&&(J.clusterRadius=J.clusterSize),delete J.clusterSize);this.loaded?this._isFeatureReductionSupported(J)?this._featureReduction=
J:(this._featureReduction=null,J&&console.log("Clustering is not supported for this layer: "+this.url)):this._featureReduction=J;this._evalFeatureReduction(this._featureReduction)},hasFeatureReduction:function(){return!!this._featureReduction},getFeatureReduction:function(){var J=this._featureReduction;if(J){J=q.mixin({},J);var Q=this._clusterManager;if(Q=Q&&Q.aggregationInfo)J.clusterRadius=Q.clusterRadius,J.infoTemplate=Q.infoTemplate}return J},isFeatureReductionActive:function(){var J=this._clusterManager;
return!!(J&&J.isClusteringEnabled()&&J.isClusteringActive())},isFeatureReductionEnabled:function(){return this._featureReductionEnabled},enableFeatureReduction:function(){this._featureReductionEnabled||(this._featureReductionEnabled=!0,this._evalFeatureReduction(this._featureReduction))},disableFeatureReduction:function(){this._featureReductionEnabled&&(this._featureReductionEnabled=!1,this._evalFeatureReduction(this._featureReduction))},isFeatureReductionApplied:function(){return this.hasFeatureReduction()&&
this.isFeatureReductionEnabled()&&this._canCluster(this.getFeatureReduction())},getAggregateGraphics:function(){return this._clusterManager?this._clusterManager.getAggregateGraphics():[]},getChildGraphics:function(J){return this._clusterManager?this._clusterManager.getFeaturesInCluster(J):[]},getSingleGraphics:function(){return this._clusterManager?this._clusterManager.getSingleGraphics():[]},getFeatureReductionRenderer:function(){return this.isFeatureReductionActive()?this._clusterManager.getClusterRenderer():
null},getFeatureReductionLayer:function(){return this._clusterManager?this._clusterManager.container:null},getFeatureReductionField:function(J){var Q,Z=this._clusterManager?this._clusterManager.getClusterFields():null;J=J?J.toLowerCase():"";l.some(Z,function(L){J===L.name.toLowerCase()&&(Q=L);return!!Q});return Q},_isFeatureReductionSupported:function(J){return J&&"cluster"===J.type&&"esriGeometryPoint"===this.geometryType&&(this._collection||this._isStream||this._optQueryPagination&&this.advancedQueryCapabilities.supportsPagination)},
_isReductionCompatibleRenderer:function(J){J=J&&J.declaredClass||"";J=J.toLowerCase();return-1<J.indexOf("simplerenderer")||-1<J.indexOf("classbreaksrenderer")||-1<J.indexOf("uniquevaluerenderer")},_evalFeatureReduction:function(J){this.loaded&&this.getMap()&&(J=J||this.getFeatureReduction(),this._evalModeFromFReduction(J),J&&this.isFeatureReductionEnabled()?this._canCluster(J)?this._clusterManager?this._updateClusterManager(J):(this._clusterManager=this._createClusterManager(J),this.onFeatureReductionChange()):
(console.log("Clustering is supported only for point layers where map spatial reference is WGS84 or Web Mercator"),this._destroyClusterManager()):this._destroyClusterManager())},_canCluster:function(J){var Q=this._map;if(!Q)return!1;Q=Q.spatialReference;return this._isFeatureReductionSupported(J)&&this._isReductionCompatibleRenderer(this.renderer)&&(Q.isWebMercator()||4326===Q.wkid)},_createClusterManager:function(J){J=new qa({layer:this,aggregationInfo:J});this._clusterHandles=[J.on("renderer-change",
q.hitch(this,function(){this.onFeatureReductionRendererChange()}))];J.initialize(this._map);return J},_updateClusterManager:function(J){var Q=this._clusterManager;Q&&Q.setAggregationInfo(J)},_destroyClusterManager:function(J){l.forEach(this._clusterHandles,function(Q){Q.remove()});this._clusterHandles=null;this._clusterManager&&(this._clusterManager.destroy(J),this._clusterManager=null,this.onFeatureReductionChange())},redraw:function(){this.inherited(arguments);this._clusterManager&&this._clusterManager.redraw();
this._trackManager&&this._trackManager.container&&this._trackManager.container.redraw()},_evalSDRenderer:function(J){this.inherited(arguments);var Q=this._getRenderer();this._ager=!!(Q&&Q.observationAger&&Q.observationRenderer);this._trackManager&&this._trackManager.container&&this._trackManager.container.setRenderer(Q&&Q.trackRenderer);J&&this._evalFeatureReduction()},_graphicVisibilityChanged:function(J){this._clusterManager?this._clusterManager.toggleFeatureVisibility(J):this._heatmapManager&&
this._heatmapManager.redraw()},setWebGLFetchOptions:function(J){this._hasOnDemandDrillMode()&&(J=J||{},null!=J.maxDrillLevel&&(this._mode.maxDrillLevel=J.maxDrillLevel),null!=J.maxRecordCountFactor&&(this._mode.maxRecordCountFactor=J.maxRecordCountFactor),null!=J.enablePBFQuery&&(this._mode.enablePBFQuery=J.enablePBFQuery))},_isWebGLCompatible:function(){return this.loaded&&!this.isEditable()&&!this.isFeatureReductionApplied()&&(!this.labelingInfo||!1===this.showLabels)&&!this._isGeometryOperationsUsed()&&
this._isRendererSupportedInWebGL()&&this.supportsCoordinatesQuantization&&("esriGeometryPolygon"!==this.geometryType||this.advancedQueryCapabilities.supportsReturningGeometryCentroid)&&this.currentMode===Ma.MODE_ONDEMAND&&(!this._preSurfaceChangeState||this._preSurfaceChangeState.currentMode===Ma.MODE_ONDEMAND)},_isRendererSupportedInWebGL:function(){if(!this.renderer)return!1;var J=this.renderer,Q=J.declaredClass?J.declaredClass.toLowerCase():"";return(-1<Q.indexOf("simplerenderer")||-1<Q.indexOf("classbreaksrenderer")||
-1<Q.indexOf("uniquevaluerenderer"))&&this._hasWebGLCompatibleSymbols(J)&&this._hasWebGLCompatibleVVs(J)},_hasWebGLCompatibleSymbols:function(J){J=this._getAllSymbolsInRenderer(J);return!(this._hasSLSWithMarker(J)||this._hasIncompatibleSMSStyles(J)||this._hasGIFMarker(J))},_hasWebGLCompatibleVVs:function(J){return!l.some(J&&J.visualVariables,function(Q){var Z=Q.type;return("colorInfo"===Z||"opacityInfo"===Z)&&Q.stops&&8<Q.stops.length||"sizeInfo"===Z&&(Q.field||Q.valueExpression&&"$view.scale"!==
Q.valueExpression||Q.expression&&"view.scale"!==Q.expression)&&Q.stops&&6<Q.stops.length?!0:!1})},_hasSLSWithMarker:function(J){return l.some(J,function(Q){return Q&&"simplelinesymbol"===Q.type&&!!Q.marker})},_hasIncompatibleSMSStyles:function(J){var Q=void 0===g("ie")&&7==g("trident");return l.some(J,function(Z){return Z&&"simplemarkersymbol"===Z.type&&("triangle"===Z.style||"path"===Z.style&&Q)})},_hasGIFMarker:function(J){var Q=/\.gif$/,Z=/^image\/gif$/;return l.some(J,function(L){return L&&"picturemarkersymbol"===
L.type?Q.test(L.url)||Z.test(L.contentType):!1})},_getAllSymbolsInRenderer:function(J){var Q=[];J&&(Q.push(J.symbol),Q.push(J.defaultSymbol),l.forEach(J.infos,function(Z){Q.push(Z.symbol)}),Q=l.filter(Q,function(Z){return!!Z}));return Q},_setMap:function(J){var Q=this.inherited(arguments),Z=this._mode,L=this;Z&&J.loaded&&Z.initialize(J);this.geometryType&&this.attr("data-geometry-type",this.geometryType.replace(/esriGeometry/i,"").toLowerCase());this._addHandle=this.on("graphic-node-add",function(R){R=
R.graphic.attributes;(R=L._selectedFeatures[R&&R[L.objectIdField]])&&R.attr("data-selected","")});return Q},_unsetMap:function(J){this._suspendImpl(!0);this._destroyClusterManager(!1);this._trackManager&&(this._trackManager.destroy(),this._trackManager=null);u.disconnect(this._zoomConnect);u.disconnect(this._addHandle);this._zoomConnect=this._addHandle=null;this.inherited("_unsetMap",arguments)},onAttach:function(){this._evalModeFromSurface()},onRefreshTick:function(){this.isFeatureUpdatesCheckActive()&&
this._evalFeatureUpdates()},refresh:function(J){!this._needsRefresh&&J&&J.scheduled&&this.isFeatureUpdatesCheckActive()||(this._needsRefresh=!1,(J=this._mode)&&J.refresh())},setFeatureUpdatesCheckEnabled:function(J){this._featureUpdatesCheckEnabled=J},isFeatureUpdatesCheckEnabled:function(){return!!this._featureUpdatesCheckEnabled},isFeatureUpdatesCheckActive:function(){return this.supportsLastEditDate&&this.isFeatureUpdatesCheckEnabled()&&!!this.refreshInterval&&!!q.getObject("onFeatureUpdatesResult.after",
!1,this)},hasFeatureUpdates:function(){var J=new h;if(!this.supportsLastEditDate)return J.reject(Error("FeatureLayer does not support supportsLastEditDate")),J.promise;if(!this._fetchMetadataPromise||this._fetchMetadataPromise.isFulfilled())this._fetchMetadataPromise=v({url:this._url.path,content:q.mixin({f:"json"},this._url.query),callbackParamName:"callback"}).then(q.hitch(this,function(Q){Q=Q.editingInfo.lastEditDate;var Z=this.editingInfo.lastEditDate!==Q;this.editingInfo.lastEditDate=Q;return Z}));
this._fetchMetadataPromise.then(function(Q){J.isFulfilled()||J.resolve(Q)}).otherwise(function(Q){J.isFulfilled()||J.reject(Q)});return J.promise},hasXYFootprint:function(){return"esriGeometryMultiPatch"===this.geometryType&&"xyFootprint"===this.multipatchOption},getOutFields:function(){return l.filter(this._getOutFields(),function(J){return"*"===J||!!this._getField(J)},this)},getField:function(J){return this._getField(J,!0)},isOutField:function(J){J=this.getField(J);if(!J)return!1;var Q=this.getOutFields();
return-1<l.indexOf(Q,"*")||-1<l.indexOf(Q,J.name)},getFieldLabel:function(J){var Q=this.infoTemplate;Q=Q&&Q.getFieldInfo&&Q.getFieldInfo(J);J=q.isFunction(J)?null:this.getField(J);var Z=Q||J,L="";Z&&(L=Q&&Q.label||J&&J.alias||Z.name||Z.fieldName);return L},getDomain:function(J,Q){var Z,L,R=(Q=Q&&Q.feature)&&this.typeIdField&&Q.attributes&&Q.attributes[this.typeIdField];null!=R&&l.some(this.types,function(aa){return aa.id==R?((Z=aa.domains&&aa.domains[J])&&"inherited"===Z.type&&(Z=this._getLayerDomain(J),
L=!0),!0):!1},this);L||Z||(Z=this._getLayerDomain(J));return Z},_getLayerDomain:function(J){this._createFieldsIndex();var Q=this._fieldsIndex;if(Q)return Q=Q.caseSensitive,(Q=Q.get(J))?Q.domain:null;var Z;l.some(this.fields,function(L){L.name===J&&(Z=L.domain);return!!Z});return Z},getType:function(J){return this.getTypeById(J&&this.typeIdField&&J.attributes&&J.attributes[this.typeIdField])},getTypeById:function(J){var Q;l.some(this.types,function(Z){Z.id==J&&(Q=Z);return!!Q});return Q},getSubtypeByCode:function(J){var Q;
l.some(this.subtypes,function(Z){Z.code==J&&(Q=Z);return!!Q});return Q},setEditable:function(J){if(!this._collection)return console.log("FeatureLayer:setEditable - this functionality is not yet supported for layer in a feature service"),this;if(this._isImageService)return this;if(!this.loaded)return this._optEditable=J,this;var Q=this._editable;this._editable=J;this._updateCaps();if(Q!==J)this.onCapabilitiesChange();return this},getEditCapabilities:function(J){var Q={canCreate:!1,canUpdate:!1,canDelete:!1,
canUpdateGeometry:!1};if(!this.loaded||!this.isEditable())return Q;var Z=J&&J.feature;J=J&&J.userId||this.getUserId();var L=l.map(this.capabilities?this.capabilities.toLowerCase().split(","):[],q.trim),R=(Q=-1<l.indexOf(L,"editing"))&&-1<l.indexOf(L,"create"),aa=Q&&-1<l.indexOf(L,"update");L=Q&&-1<l.indexOf(L,"delete");var ka=this.ownershipBasedAccessControlForFeatures,ua=this.editFieldsInfo,Aa=ua&&ua.creatorField;ua=ua&&ua.realm;Z=(Z=Z&&Z.attributes)&&Aa?Z[Aa]:void 0;var Ba=!!this.userIsAdmin;Aa=
!ka||Ba||!(!ka.allowOthersToUpdate&&!ka.allowUpdateToOthers);var Qa=!ka||Ba||!(!ka.allowOthersToDelete&&!ka.allowDeleteToOthers),La=!ka||Ba||!ka.hasOwnProperty("allowAnonymousToUpdate")||ka.allowAnonymousToUpdate;ka=!ka||Ba||!ka.hasOwnProperty("allowAnonymousToDelete")||ka.allowAnonymousToDelete;J&&ua&&(J=J+"@"+ua);if(Ba||Q&&!(R||aa||L))R=aa=L=!0;Q={canCreate:R,canUpdate:aa,canDelete:L,canUpdateGeometry:Ba||this.allowGeometryUpdates};J||(Q.canUpdate=Q.canUpdate&&La,Q.canDelete=Q.canDelete&&ka);null===
Z?(Q.canUpdate=Q.canUpdate&&Aa,Q.canDelete=Q.canDelete&&Qa):""!==Z&&Z&&J.toLowerCase()!==Z.toLowerCase()&&(Q.canUpdate=Q.canUpdate&&Aa,Q.canDelete=Q.canDelete&&Qa);return Q},getUserId:function(){var J;this.loaded&&(J=this.credential&&this.credential.userId||this.userId||"");return J},setUserIsAdmin:function(J){this.userIsAdmin=J},setEditSummaryCallback:function(J){this.editSummaryCallback=J},getEditSummary:function(J,Q,Z){Z=x.isDefined(Z)?Z:(new Date).getTime();var L="";Z=this.getEditInfo(J,Q,Z);
(Q=Q&&Q.callback||this.editSummaryCallback)&&(Z=Q(J,Z)||"");if(q.isString(Z))L=Z;else{if(Z){J=Z.action;Q=Z.userId;var R=Z.timeValue,aa=0;J&&aa++;Q&&aa++;x.isDefined(R)&&aa++;1<aa&&(L=("edit"===J?"edit":"create")+(Q?"User":"")+(x.isDefined(R)?Z.displayPattern:""))}L=L&&x.substitute(Z,this.i18n.layers.FeatureLayer[L])}return L},getEditInfo:function(J,Q,Z){if(this.loaded){Z=x.isDefined(Z)?Z:(new Date).getTime();Q=Q&&Q.action||"last";var L=this.editFieldsInfo,R=L&&L.creatorField,aa=L&&L.creationDateField,
ka=L&&L.editorField;L=L&&L.editDateField;ka=(J=J&&J.attributes)&&ka?J[ka]:void 0;L=J&&L?J[L]:null;R=this._getEditData(J&&R?J[R]:void 0,J&&aa?J[aa]:null,Z);Z=this._getEditData(ka,L,Z);switch(Q){case "creation":var ua=R;break;case "edit":ua=Z;break;case "last":ua=Z||R}ua&&(ua.action=ua===Z?"edit":"creation");return ua}},_getEditData:function(J,Q,Z){if(x.isDefined(Q)){var L=Z-Q;var R=0>L?"Full":6E4>L?"Seconds":12E4>L?"Minute":36E5>L?"Minutes":72E5>L?"Hour":864E5>L?"Hours":6048E5>L?"WeekDay":"Full"}if(void 0!==
J||R){var aa=aa||{};aa.userId=J;R&&(J=f.format,Z=new Date(Q),aa.minutes=Math.floor(L/6E4),aa.hours=Math.floor(L/36E5),aa.weekDay=J(Z,{datePattern:"EEEE",selector:"date"}),aa.formattedDate=J(Z,{selector:"date"}),aa.formattedTime=J(Z,{selector:"time"}),aa.displayPattern=R,aa.timeValue=Q)}return aa},isEditable:function(){return!(!this._editable&&!this.userIsAdmin)},isQueryable:function(){var J=l.map(this.capabilities?this.capabilities.toLowerCase().split(","):[],q.trim);return this._isStream||this.userIsAdmin||
this._collection||-1!==l.indexOf(J,"query")||-1!==l.indexOf(J,"catalog")},setResolution:function(J){return this.setMaxAllowableOffset(J)},setMaxAllowableOffset:function(J){this.isEditable()||(this._optMaxOffset=J,this._setMaxOffset(J,!0));return this},_resetMaxAllowableOffset:function(){this.setMaxAllowableOffset(this._optMaxOffset);this._prevScale=null;this._refreshMaxAllowableOffset()},_refreshMaxAllowableOffset:function(){this._calcMaxOffsetForAutoSnapshot();this._updateMaxOffset();this._needsRefresh=
!1},getResolution:function(){return this.getMaxAllowableOffset()},getMaxAllowableOffset:function(){var J=this._quantizationParameters?this._quantizationParameters.tolerance:void 0;return null!=this._maxOffset?this._maxOffset:J},_setMaxOffset:function(J,Q){if(null==J)return delete this._maxOffset,delete this._quantizationParameters,this;this.quantize&&this.supportsCoordinatesQuantization?("esriGeometryPolyline"===this.geometryType?this._maxOffset=J:delete this._maxOffset,this._quantizationParameters=
J?{mode:"view",originPosition:"upperLeft",tolerance:J,extent:this.fullExtent}:null):(this._isFractionalOffsetAllowed()&&Q||(J=Math.floor(J)),isNaN(J)||0===J?delete this._maxOffset:this._maxOffset=J,delete this._quantizationParameters);return this},_isFractionalOffsetAllowed:function(){return null==this.version||10.1<=this.version||navigator.languages&&this._isLangWithDot(navigator.languages[0])},_isLangWithDot:function(J){J=(J=J&&J.split("-"))&&J[0]&&J[0].toLowerCase();return-1!==l.indexOf(this._langsWithDot,
J)},_langsWithDot:"ar en et fr he ja ko th vi zh".split(" "),setAutoGeneralize:function(J){this.loaded?this._canAutoGeneralize()&&((this._autoGeneralize=J)?(this._isAutoSnapshotMode()&&(this._prevScale=null),this._updateMaxOffset()):this._setMaxOffset(null)):this._optAutoGen=J;return this},_canAutoGeneralize:function(){return!this.isEditable()&&this.mode!==Ma.MODE_SNAPSHOT},setGDBVersion:function(J){this._collection||J===this.gdbVersion||!J&&!this.gdbVersion||(this.gdbVersion=J,this._task.gdbVersion=
J,this._url.query=q.mixin(this._url.query,{gdbVersion:J}),this.loaded&&(this.clearSelection(),this._map&&this.refresh()),this.onGDBVersionChange());return this},hasAllFeatures:function(){return this._mode?this._mode.hasAllFeatures():!0},hasUpdateError:function(){return this._mode?this._mode.hasUpdateError():!1},setDefinitionExpression:function(J){this._defnExpr=J;this._hasPendingLimitQuery()||((J=this._checkFeatureLimit())?this._evalModeAndApplyDefnExpr(J):this._applyDefnExpr());return this},_applyDefnExpr:function(){var J=
this._mode;J&&J.propertyChangeHandler(1)},_evalModeAndApplyDefnExpr:function(J){J.then(q.hitch(this,function(Q){Q&&(Q instanceof Error||!Q.modeChanged)&&this._applyDefnExpr()}))},getDefinitionExpression:function(){return this._defnExpr},hasDefinitionExpressionWithCurrentTimestamp:function(){return this.reSQLCurrentTimestamp.test(this.getDefinitionExpression())},setTimeDefinition:function(J){this._isSnapshotMode()?(this._timeDefn=J,(J=this._mode)&&J.propertyChangeHandler(2)):console.log("FeatureLayer.setTimeDefinition: layer in on-demand or selection mode does not support time definitions. Layer id \x3d "+
this.id+", Layer URL \x3d "+this.url);return this},getTimeDefinition:function(){return this._timeDefn},setTimeOffset:function(J,Q){this._timeOffset=J;this._timeOffsetUnits=Q;(J=this._mode)&&J.propertyChangeHandler(0);return this},setUseMapTime:function(J){this.useMapTime=J;this._toggleTime(!this.suspended);(J=this._mode)&&J.propertyChangeHandler(0)},selectFeatures:function(J,Q,Z,L){Q=Q||Ma.SELECTION_NEW;this._hasSelectionError=this._hasPartialSelectedFeatures=!1;J=this._getShallowClone(J);var R=this._map,
aa=this,ka=n._fixDfd(new h(n._dfdCanceller));J.outFields=this.getOutFields();J.returnGeometry=!0;J.multipatchOption=this.multipatchOption;R&&(J.outSpatialReference=new p(R.spatialReference.toJson()));if(!this._applyQueryFilters(J,!0)){var ua={features:[]};this._selectHandler(ua,Q,Z,L,ka);return ka}if(R=this._canDoClientSideQuery(J))ka._pendingDfd=e(this._doQuery(J,R)),ka._pendingDfd.then(function(Ba){ua={features:Ba};aa._selectHandler(ua,Q,Z,L,ka)});else{if(this._collection)return this._resolve([Error("FeatureLayer::selectFeatures - "+
this.invalidParams)],null,L,ka,!0),ka;if(this.loaded&&!this.isQueryable())return this._resolve([Error("Layer does not support query capability.")],null,L,ka,!0),ka;var Aa=this;this._ts&&(J._ts=(new Date).getTime());R=this._canFetchPBFForQuery(J);this._enableEditModeQuantization(J,R);(ka._pendingDfd=this._task.execute(J,null,null,R?{format:"pbf"}:null)).addCallbacks(function(Ba){Aa._selectHandler(Ba,Q,Z,L,ka)},function(Ba){Aa._hasPartialSelectedFeatures=!0;Aa._hasSelectionError=!0;Aa._resolve([Ba],
null,L,ka,!0)})}return ka},getSelectedFeatures:function(){var J=this._selectedFeatures,Q=[],Z;for(Z in J)J.hasOwnProperty(Z)&&Q.push(J[Z]);return Q},clearSelection:function(J){var Q=this._selectedFeatures,Z=this._mode,L;for(L in Q)Q.hasOwnProperty(L)&&(this._unSelectFeatureIIf(L,Z),Z._removeFeatureIIf(L));this._selectedFeatures={};this._isSelOnly&&Z._applyTimeFilter(!0);if(!J)this.onSelectionClear();return this},setSelectionSymbol:function(J){if(this._selectionSymbol=J){var Q=this._selectedFeatures,
Z;for(Z in Q)Q.hasOwnProperty(Z)&&Q[Z].setSymbol(J)}return this},getSelectionSymbol:function(){return this._selectionSymbol},setLabelingInfo:function(J){J?(this.labelingInfo=J,this._fixLabelExpr()):delete this.labelingInfo;this._collection&&(this._typesDirty=!0);this._evalSurfaceType();this.onLabelingInfoChange()},_fixLabelExpr:function(){var J=/\[([^\[\]]+)\]/ig,Q,Z=this,L=function(R,aa){R=Z._getField(aa,!0);return"["+(R&&R.name||aa)+"]"};l.forEach(this.labelingInfo,function(R){if(Q=R.labelExpression)R.labelExpression=
Q.replace(J,L)})},_updateRequiredFieldsFromLabelingInfo:function(){var J=[];l.forEach(this.labelingInfo,function(Q){var Z=Q.labelExpressionInfo;if(Q.labelExpression){var L=/[\[\]]/ig;Q=Q.labelExpression.match(/\[[^\[\]]+\]/ig);(Q=l.map(Q,function(aa){return aa.replace(L,"")}))&&(J=J.concat(Q))}if(Z){if(Z.value){var R=/[\{\}]/ig;Q=Z.value.match(/\{[^\{\}]+\}/ig);(Q=l.map(Q,function(aa){return aa.replace(R,"")}))&&(J=J.concat(Q))}Z.expression&&(J=J.concat(T.extractFieldNames(Z.expression)))}});J=l.map(J,
function(Q){var Z=this.getField(Q);return Z?Z.name:Q},this);this._requiredFields&&(this._requiredFields=this._requiredFields.concat(J))},__msigns:[{n:"applyEdits",c:5,a:[{i:0},{i:1}],e:4,f:1}],applyEdits:function(J,Q,Z,L,R,aa){var ka=aa.assembly,ua=aa.dfd;this._applyNormalized(J,ka&&ka[0]);this._applyNormalized(Q,ka&&ka[1]);this.onBeforeApplyEdits(J,Q,Z);var Aa={},Ba=this.objectIdField;ka={f:"json"};var Qa=!1;if(this._collection)aa={},aa.addResults=J?l.map(J,function(){Qa=!0;return{objectId:this._nextId++,
success:!0}},this):null,aa.updateResults=Q?l.map(Q,function(Na){Qa=!0;var eb=Na.attributes[Ba];Aa[eb]=Na;return{objectId:eb,success:!0}},this):null,aa.deleteResults=Z?l.map(Z,function(Na){Qa=!0;return{objectId:Na.attributes[Ba],success:!0}},this):null,Qa?this._editHandler(aa,J,Aa,L,R,ua):this._resolve([aa.addResults,aa.updateResults,aa.deleteResults],null,L,ua);else{J&&0<J.length&&(ka.adds=this._convertFeaturesToJson(J,0,1),Qa=!0);if(Q&&0<Q.length){for(aa=0;aa<Q.length;aa++){var La=Q[aa];Aa[La.attributes[Ba]]=
La}ka.updates=this._convertFeaturesToJson(Q,0,0,1);Qa=!0}if(Z&&0<Z.length){Q=[];for(aa=0;aa<Z.length;aa++)Q.push(Z[aa].attributes[Ba]);ka.deletes=Q.join(",");Qa=!0}if(Qa){var Ia=this;return v({url:this._url.path+"/applyEdits",content:q.mixin(ka,this._url.query),callbackParamName:"callback",load:function(Na){Ia._editHandler(Na,J,Aa,L,R,ua)},error:function(Na){Ia._resolve([Na],null,R,ua,!0)}},{usePost:!0})}this._resolve([],null,L,ua)}},queryFeatures:function(J,Q,Z,L){return this._query("execute","onQueryFeaturesComplete",
J,Q,Z,L)},queryRelatedFeatures:function(J,Q,Z){return this._query("executeRelationshipQuery","onQueryRelatedFeaturesComplete",J,Q,Z)},queryIds:function(J,Q,Z,L){return this._query("executeForIds","onQueryIdsComplete",J,Q,Z,L)},queryCount:function(J,Q,Z,L){return this._query("executeForCount","onQueryCountComplete",J,Q,Z,L)},queryExtent:function(J,Q,Z,L){return this._query("executeForExtent","onQueryExtentComplete",J,Q,Z,L)},queryAttachmentInfos:function(J,Q,Z){var L=this._url.path+"/"+J+"/attachments",
R=new h(n._dfdCanceller),aa=this;L=D.normalize(L);R._pendingDfd=v({url:L,content:q.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:function(ka){ka=ka.attachmentInfos;var ua;l.forEach(ka,function(Aa){ua=d.objectToQuery({gdbVersion:aa._url.query&&aa._url.query.gdbVersion,layer:aa._url.query&&aa._url.query.layer,token:aa._getToken()});Aa.url=L+"/"+Aa.id+(ua?"?"+ua:"");Aa.objectId=J});aa._resolve([ka],"onQueryAttachmentInfosComplete",Q,R)},error:function(ka){aa._resolve([ka],null,
Z,R,!0)}});return R},addAttachment:function(J,Q,Z,L){return this._sendAttachment("add",J,Q,Z,L)},updateAttachment:function(J,Q,Z,L,R){Z.appendChild(a.create("input",{type:"hidden",name:"attachmentId",value:Q}));return this._sendAttachment("update",J,Z,L,R)},deleteAttachments:function(J,Q,Z,L){var R=this._url.path+"/"+J+"/deleteAttachments",aa=new h(n._dfdCanceller),ka=this;Q={f:"json",attachmentIds:Q.join(",")};aa._pendingDfd=v({url:R,content:q.mixin(Q,this._url.query),callbackParamName:"callback",
load:q.hitch(this,function(ua){ua=ua.deleteAttachmentResults;ua=l.map(ua,function(Aa){Aa=new Ga(Aa);Aa.attachmentId=Aa.objectId;Aa.objectId=J;return Aa});ka._resolve([ua],"onDeleteAttachmentsComplete",Z,aa)}),error:function(ua){ka._resolve([ua],null,L,aa,!0)}},{usePost:!0});return aa},addType:function(J){var Q=this.types;if(Q){if(l.some(Q,function(Z){return Z.id==J.id?!0:!1}))return!1;Q.push(J)}else this.types=[J];return this._typesDirty=!0},deleteType:function(J){if(this._collection){var Q=this.types;
if(Q){var Z=-1;l.some(Q,function(L,R){return L.id==J?(Z=R,!0):!1});if(-1<Z)return this._typesDirty=!0,Q.splice(Z,1)[0]}}},toJson:function(){var J=this._json;if(J=q.isString(J)?m.fromJson(J):q.clone(J)){J=J.layerDefinition?J:{layerDefinition:J};var Q=J.layerDefinition,Z=this._collection;if(Z&&this._typesDirty){Q.types=l.map(this.types||[],function(ka){return ka.toJson()});var L=this.renderer,R=this.labelingInfo,aa=Q.drawingInfo;!L&&!R||aa||(aa=Q.drawingInfo={});aa&&L&&-1===L.declaredClass.indexOf("TemporalRenderer")&&
(aa.renderer=L.toJson());R&&(aa.labelingInfo=l.map(R,function(ka){return ka.toJson()}))}L=null;if(!Z||this._fcAdded)L={geometryType:Q.geometryType,features:this._convertFeaturesToJson(this.graphics,!0)};J.featureSet=q.mixin({},J.featureSet||{},L);J.featureSet.transform&&(R=J.featureSet.transform,delete J.featureSet.transform,L=new X(J.featureSet),L.quantize(R),J.featureSet=L.toJson());Z&&(J.nextObjectId=this._nextId,Q.capabilities=this.capabilities);return J}},onSelectionComplete:function(){},onSelectionClear:function(){},
onBeforeApplyEdits:function(){},onEditsComplete:function(){},onQueryFeaturesComplete:function(){},onQueryRelatedFeaturesComplete:function(){},onQueryIdsComplete:function(){},onQueryCountComplete:function(){},onQueryExtentComplete:function(){},onQueryAttachmentInfosComplete:function(){},onAddAttachmentComplete:function(){},onUpdateAttachmentComplete:function(){},onDeleteAttachmentsComplete:function(){},onCapabilitiesChange:function(){},onGDBVersionChange:function(){},onQueryLimitExceeded:function(){},
onLabelingInfoChange:function(){},onFeatureReductionRendererChange:function(){},onFeatureReductionChange:function(){},onFeatureUpdatesResult:function(){},_evalFeatureUpdates:function(){if(!this._featureUpdatesPromise||this._featureUpdatesPromise.isFulfilled())this._featureUpdatesPromise=this.hasFeatureUpdates().otherwise(function(J){return!(J&&"cancel"===J.dojoType)}).always(q.hitch(this,function(J){this._featureUpdatesPromise=null;this.onFeatureUpdatesResult({hasUpdates:J})}))},_evalRefresh:function(J){(J.hasUpdates||
this.hasDefinitionExpressionWithCurrentTimestamp())&&this.refresh()},_evalArcadeSupport:function(){var J=new h;setTimeout(q.hitch(this,function(){this._initializeArcadeEngine().always(function(){J.resolve()})}),0);return J.promise},_initializeArcadeEngine:function(){var J=[],Q=this.infoTemplate;Q&&Q.initializeArcadeEngine&&J.push(Q.initializeArcadeEngine());(Q=this.renderer)&&Q.initializeArcadeEngine&&J.push(Q.initializeArcadeEngine());var Z=[];l.forEach(this.labelingInfo,function(L){(L=L.labelExpressionInfo)&&
L.expression&&Z.push(L.expression)});J.push(Y.initialize(Z));return w(J)},_isGeometryOperationsUsed:function(){var J=this.infoTemplate,Q=this.renderer,Z=this.labelingInfo;return J&&J.hasGeometryOperations&&J.hasGeometryOperations()||Q&&Q.hasGeometryOperations&&Q.hasGeometryOperations()||l.some(Z,function(L){return T.hasGeometryOperations(L.labelExpressionInfo&&L.labelExpressionInfo.expression)})?!0:!1},_forceIdentity:function(){var J=new h,Q=this,Z=this._url&&this._url.path;var L=Z&&Z.toLowerCase().indexOf("/rest/services");
var R=this.editFieldsInfo;R=R&&(R.creatorField||R.editorField);(this.userIsAdmin||R)&&!this._getToken()&&-1<L&&k.id?(L=Z.substring(0,L)+"/rest/info",v({url:L,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(aa){if(aa.owningSystemUrl)return k.id.checkSignInStatus(aa.owningSystemUrl+"/sharing")}).then(function(aa){if(aa)return k.id.getCredential(Z)}).then(function(aa){aa&&Q._findCredential()}).always(function(){J.resolve()})):J.resolve();return J.promise},_isSnapshotMode:function(){return this._mode?
this._mode.isInstanceOf(oa):!1},_isOnDemandMode:function(){return this._mode?this._mode.isInstanceOf(va):!1},_isAutoSnapshotMode:function(){return this._isAutoModeEnabled()&&this.currentMode===Ma.MODE_SNAPSHOT},_getMaxFeaturesForAutoSnapshotMode:function(){var J=this.geometryType;if("esriGeometryPolyline"===J||"esriGeometryPolygon"===J||"esriGeometryMultipoint"===J||this.hasXYFootprint())var Q=this.maxRecordCountForAuto;else"esriGeometryPoint"===J&&(Q=this.maxPointCountForAuto);return Q},getLastExceedsLimitResult:function(){return this._lastExceedsLimitResult},
_canUseSnapshotMode:function(J){this._lastExceedsLimitResult=J=(J=J&&J.features&&J.features[0])&&J.attributes&&J.attributes.exceedslimit;return!(this.mode!==Ma.MODE_AUTO||this.isEditable()||0!==J||!(this._isPaginationAllowed()||this.maxRecordCount>=this._getMaxFeaturesForAutoSnapshotMode()))},_evalModeFromFLimit:function(J){this._canUseSnapshotMode(J)?this._enableAutoSnapshotMode():this._enableAutoOnDemandMode()},_enableAutoSnapshotMode:function(){var J=Ma.MODE_SNAPSHOT;this.isFeatureReductionApplied()?
this._updatePreFReductionState(J):this._preSurfaceChangeState?(this._updatePreSurfaceChangeState(J),this._evalSurfaceType(!0)):this.currentMode!==J&&this._setFetchMode(Ma.MODE_AUTO,J)},_enableAutoOnDemandMode:function(){var J=Ma.MODE_ONDEMAND;this.isFeatureReductionApplied()?this._updatePreFReductionState(J):this._preSurfaceChangeState?this._updatePreSurfaceChangeState(J):this.currentMode!==J&&(this._setFetchMode(Ma.MODE_AUTO,J),this._evalSurfaceType())},_evalModeFromFReduction:function(J){this.loaded&&
(J&&this.isFeatureReductionEnabled()&&this._canCluster(J)?this._enableFReductionMode():this._disableFReductionMode())},_enableFReductionMode:function(){this._evalSurfaceType(!0);if(!this._preFReductionState){var J=this.currentMode;J!==Ma.MODE_SNAPSHOT&&J!==Ma.MODE_STREAM&&J!==Ma.MODE_SELECTION&&(this._preFReductionState={mode:this.mode,currentMode:this.currentMode},this._setFetchMode(this.mode===Ma.MODE_AUTO?Ma.MODE_AUTO:Ma.MODE_SNAPSHOT,Ma.MODE_SNAPSHOT))}},_disableFReductionMode:function(){var J=
this._preFReductionState;this._preFReductionState=null;!J||J.mode===this.mode&&J.currentMode===this.currentMode||(this._setFetchMode(J.mode,J.currentMode),this._evalSurfaceType())},_updatePreFReductionState:function(J){this._preFReductionState=this._preFReductionState||{};this._preFReductionState.mode=Ma.MODE_AUTO;this._preFReductionState.currentMode=J},_evalModeFromSurface:function(){this.hasWebGLSurface()?this._enableWebGLSurfaceMode():this._disableWebGLSurfaceMode()},_enableWebGLSurfaceMode:function(){this._preSurfaceChangeState||
(this._preSurfaceChangeState={mode:this.mode,currentMode:this.currentMode},this._setFetchMode(this.mode===Ma.MODE_AUTO?Ma.MODE_AUTO:Ma.MODE_ONDEMAND,Ma.MODE_ONDEMAND,this.webglDeps.OnDemandDrillMode))},_disableWebGLSurfaceMode:function(){var J=this._preSurfaceChangeState;J&&(this._preSurfaceChangeState=null,this._setFetchMode(J.mode,J.currentMode))},_updatePreSurfaceChangeState:function(J){this._preSurfaceChangeState=this._preSurfaceChangeState||{};this._preSurfaceChangeState.mode=Ma.MODE_AUTO;this._preSurfaceChangeState.currentMode=
J},_setFetchMode:function(J,Q,Z){this.clearSelection();this._mode.suspend();this._mode.destroy();this.mode=J;this.currentMode=Q;Z=Z||this._getModeConstructor(Q);this._mode=new Z(this);this.queryPagination=Q===Ma.MODE_ONDEMAND&&-1===Z.prototype.declaredClass.toLowerCase().indexOf("ondemanddrillmode")?!1:this._isPaginationAllowed();(J=this.getMap())&&J.loaded&&(this._resetMaxAllowableOffset(),this._mode.initialize(J),this._mode.startup())},_isPaginationAllowed:function(){return!(!this._optQueryPagination||
this.loaded&&!this.advancedQueryCapabilities.supportsPagination)},_getModeConstructor:function(J){var Q;J===Ma.MODE_SNAPSHOT?Q=oa:J===Ma.MODE_ONDEMAND&&(Q=va);return Q},_hasOnDemandDrillMode:function(){var J=this._mode;J=J&&J.declaredClass;return!!(J&&-1<J.toLowerCase().indexOf("ondemanddrillmode"))},_checkFeatureLimit:function(){this._limitPromise&&(this._limitPromise.cancel(),this._limitPromise=null);var J=this._queryLimit();J&&(this._lastExceedsLimitResult=null,this._limitPromise=J.then(q.hitch(this,
function(Q){var Z=this.currentMode;this._evalModeFromFLimit(Q);return{modeChanged:this.currentMode!==Z}})).always(q.hitch(this,function(Q){this._limitPromise=null;return Q})));return this._limitPromise},_hasPendingLimitQuery:function(){return!!this._exceedsLimitTimer},_queryLimit:function(){if(this._isAutoModeEnabled()){var J,Q,Z=new h(function(){clearTimeout(J);J=null;Q&&!Q.isFulfilled()&&Q.cancel();Q=null});this._exceedsLimitTimer=J=setTimeout(q.hitch(this,function(){this._exceedsLimitTimer=null;
var L=new ca,R=new ea;R.statisticType="exceedslimit";R.maxPointCount=this.maxPointCountForAuto;R.maxRecordCount=this.maxRecordCountForAuto;R.maxVertexCount=this.maxVertexCountForAuto;R.outStatisticFieldName="exceedslimit";L.outStatistics=[R];Q=this.queryFeatures(L).promise.then(function(aa){Z.resolve(aa)}).otherwise(function(aa){Z.reject(aa)})}),0);return Z.promise}},_isAutoModeEnabled:function(){return this.mode===Ma.MODE_AUTO&&this.reHostedFS.test(this.url)},_updateCaps:function(){var J=this._editable,
Q=q.trim(this.capabilities||""),Z=l.map(Q?Q.split(","):[],q.trim),L=l.map(Q?Q.toLowerCase().split(","):[],q.trim);Q=l.indexOf(L,"editing");var R;L={Create:l.indexOf(L,"create"),Update:l.indexOf(L,"update"),Delete:l.indexOf(L,"delete")};if(J&&-1===Q)Z.push("Editing");else if(!J&&-1<Q){J=[Q];for(R in L)-1<L[R]&&J.push(L[R]);J.sort();for(R=J.length-1;0<=R;R--)Z.splice(J[R],1)}this.capabilities=Z.join(",")},_counter:{value:0},_getUniqueId:function(){return this._counter.value++},onSuspend:function(){this.inherited(arguments);
this._suspendImpl()},_suspendImpl:function(J){this._toggleTime(!1);this._refreshHandle&&(this._refreshHandle.remove(),this._refreshHandle=null);var Q=this._mode;Q&&(Q.suspend(),J&&Q.destroy())},onResume:function(J){this.inherited(arguments);this._toggleTime(!0);this._refreshHandle=this.on("feature-updates-result",q.hitch(this,this._evalRefresh));var Q=this._map,Z=this._getRenderer();if(J.firstOccurrence){if(this._fixRendererFields(),this._updateRequiredFieldsFromLabelingInfo(),this._checkFields(),
this.clearSelection(),this._evalFeatureReduction(),this.timeInfo&&!this._trackManager&&(this._trackIdField||Z&&(Z.latestObservationRenderer||Z.trackRenderer))&&(this._trackManager=new U(this),this._trackManager.initialize(Q),this._childLayer=this._trackManager.container),Z&&"colors"in Z&&"blurRadius"in Z&&"maxPixelIntensity"in Z&&"esriGeometryPoint"==this.geometryType&&!this._heatmapManager&&(this._heatmapManager=new na(this),this._heatmapManager.initialize(Q)),this._zoomConnect=u.connect(Q,"onZoomEnd",
this,this._zoomEndHandler),this._refreshMaxAllowableOffset(),Z=this._mode)Z._init||Z.initialize(Q),Z.startup()}else this._zoomEndHandler(),this._mode&&this._mode.resume()},_zoomEndHandler:function(){var J=this._map;this._updateMaxOffset();this._prevScale=J.getScale();!this.suspended&&this._needsRefresh&&this.refresh()},_updateMaxOffset:function(){var J=this._map;J&&J.loaded&&this._autoGeneralize&&(this._isAutoSnapshotMode()?(J=this.getMaxAllowableOffset(),this._setMaxOffset(this._getMaxOffsetForScale(),
!0),this._needsRefresh||(this._needsRefresh=J!=this.getMaxAllowableOffset())):this._setMaxOffset(J.extent.getWidth()/J.width,!J.extent.spatialReference.isWebMercator()))},_getMaxOffsetForScale:function(){if(this._map){var J=this._map.getScale(),Q=this._calculatedScale,Z=this._calcMaxOffset,L=this._prevScale;return J>=Q&&(null==L||L<Q)?Z:J<Q&&(null==L||L>=Q)?null:this.getMaxAllowableOffset()}},_calcMaxOffsetForAutoSnapshot:function(){var J=this._map;if(J&&this._canAutoGeneralize()&&this._isAutoSnapshotMode()&&
this._autoGeneralize&&null==this.getMaxAllowableOffset()){var Q=this.generalizeForScale;this._calculatedScale=Q=this.maxScale?this.maxScale:this.minScale?Math.min(Q,this.minScale):Math.min(Q,ja.getScale(J,this.initialExtent));this._calcMaxOffset=J.extent.getWidth()/J.width/J.getScale()*Q}else this._calculatedScale=this._calcMaxOffset=void 0},_toggleTime:function(J){var Q=this._map;J&&this.timeInfo&&this.useMapTime&&Q?(this._mapTimeExtent=Q.timeExtent,this._timeConnect||(this._timeConnect=u.connect(Q,
"onTimeExtentChange",this,this._timeChangeHandler))):(this._mapTimeExtent=null,u.disconnect(this._timeConnect),this._timeConnect=null)},_timeChangeHandler:function(J){this._mapTimeExtent=J;(J=this._mode)&&J.propertyChangeHandler(0)},_getOffsettedTE:function(J){var Q=this._timeOffset,Z=this._timeOffsetUnits;return J&&Q&&Z?J.offset(-1*Q,Z):J},_getTimeOverlap:function(J,Q){return J&&Q?J.intersection(Q):J||Q},_getTimeFilter:function(J){var Q=this.getTimeDefinition();if(Q){var Z=this._getTimeOverlap(Q,
null);if(!Z)return[!1]}if(J){if(J=Z?this._getTimeOverlap(J,Z):J,!J)return[!1]}else J=Z;return[!0,J]},_getAttributeFilter:function(J){var Q=this.getDefinitionExpression();return J?Q?"("+Q+") AND ("+J+")":J:Q},_applyQueryFilters:function(J,Q){J.where=this._getAttributeFilter(J.where);J.returnGeometry&&null==J.maxAllowableOffset&&!J.quantizationParameters&&(J.maxAllowableOffset=this._maxOffset,J.quantizationParameters=this._quantizationParameters);Q&&this.supportsAdvancedQueries&&(J.orderByFields=J.orderByFields||
this.getOrderByFields());if(this.timeInfo)if(Q=this._getTimeFilter(J.timeExtent),Q[0])J.timeExtent=Q[1];else return!1;return!0},_add:function(J){var Q=this._selectionSymbol,Z=J.attributes,L=this.visibilityField;Q&&this._isSelOnly&&J.setSymbol(Q);if(L&&Z&&Z.hasOwnProperty(L))J[Z[L]?"show":"hide"]();return this.add.apply(this,arguments)},_remove:function(){return this.remove.apply(this,arguments)},_canDoClientSideQuery:function(J,Q){var Z=[],L=this._map,R;if((this._collection||!this._isTable&&L)&&!(J.text||
J.where&&J.where!==this.getDefinitionExpression()||J.orderByFields&&J.orderByFields.length&&(R=this.getOrderByFields()||[])&&J.orderByFields.join()!==R.join()||J.outStatistics||J.returnDistinctValues)){R=this._isSnapshotMode();var aa=this._isSelOnly;Q=R?null:Q?this._getExtentOfTiles(L.extent):L.extent;if(L=J.geometry){if(aa||J.spatialRelationship!==ca.SPATIAL_REL_INTERSECTS||"extent"!==L.type||!R&&!Q.contains(L))return;Z.push(1)}if(Q=J.objectIds)if(R)Z.push(2);else{L=Q.length;var ka=this._mode,ua=
0,Aa;for(Aa=0;Aa<L;Aa++)ka._getFeature(Q[Aa])&&ua++;if(ua===L)Z.push(2);else return}if(this.timeInfo)if(J=J.timeExtent,Q=this._mapTimeExtent,R)J&&Z.push(3);else if(aa){if(J)return}else if(Q)if(-1!==l.indexOf(Z,2))J&&Z.push(3);else if(-1!==l.indexOf(Z,1))J==Q&&Z.push(3);else return;else if(0<Z.length)J&&Z.push(3);else if(J)return;return 0<Z.length?Z:null}},_getAbsMid:function(J){return B.toAbsMid?B.toAbsMid(J):y.id.replace(/\/[^\/]*$/ig,"/")+J},_doQuery:function(J,Q,Z){var L=[],R=this.objectIdField,
aa=this,ka=new h,ua=new h,Aa=this.graphics;if(-1!==l.indexOf(Q,1)){var Ba=this.spatialIndex||this._map&&this._map.spatialIndex,Qa,La=J.geometry._normalize(null,!0);null==Ba&&Ta.autoSpatialIndexing?Qa=(this._map||this).addPlugin(this._getAbsMid("../plugins/spatialIndex")).then(q.hitch(this,q.partial(this._getFromIndex,La,Ba)),function(Ia){ua.resolve(q.hitch(this,q.partial(this._filterByExtent,Aa,La)))}):Ba&&(Qa=this._getFromIndex(La,Ba));Qa?Qa.then(function(Ia){for(var Na=0;Na<Ia.length;Na++)Ia[Na].results&&
(L=L.concat(Ia[Na].results));ua.resolve(L)}).otherwise(function(Ia){ua.reject(Ia)}):ua.resolve(this._filterByExtent(Aa,La))}else ua.resolve(Aa);ua.then(function(Ia){L=Ia;if(-1!==l.indexOf(Q,2)){var Na=J.objectIds;L=l.filter(L,function(eb){return-1<l.indexOf(Na,eb.attributes[R])})}-1!==l.indexOf(Q,3)&&aa.timeInfo&&(Ia=J.timeExtent,L=aa._filterByTime(L,Ia.startTime,Ia.endTime).match);Z&&(L=l.map(L,function(eb){return eb.attributes[R]},this));ka.resolve(L)});return ka},_getFromIndex:function(J,Q){Q=
Q||this.spatialIndex||this._map.spatialIndex;J instanceof Array||(J=[J]);var Z=this.id;return t(l.map(J,function(L){return Q.intersects(L,Z)}))},_filterByExtent:function(J,Q){for(var Z=[],L=0,R=J.length;L<R;L++){var aa=J[L],ka=aa.geometry;ka&&(this.normalization&&Q.length?(Q[0].intersects(ka)||Q[1].intersects(ka))&&Z.push(aa):Q.intersects(ka)&&Z.push(aa))}return Z},_filterByTime:function(J,Q,Z){var L=this._startTimeField,R=this._endTimeField,aa;this._twoTimeFields||(aa=L||R);var ka=x.isDefined,ua=
[],Aa=[],Ba,Qa=J.length;Q=Q?Q.getTime():-Infinity;Z=Z?Z.getTime():Infinity;if(aa)for(Ba=0;Ba<Qa;Ba++){var La=J[Ba];var Ia=La.attributes;L=Ia[aa];L>=Q&&L<=Z?ua.push(La):Aa.push(La)}else for(Ba=0;Ba<Qa;Ba++)La=J[Ba],Ia=La.attributes,aa=Ia[L],Ia=Ia[R],aa=ka(aa)?aa:-Infinity,Ia=ka(Ia)?Ia:Infinity,aa>=Q&&aa<=Z||Ia>=Q&&Ia<=Z||Q>=aa&&Z<=Ia?ua.push(La):Aa.push(La);return{match:ua,noMatch:Aa}},_getSizeVariables:function(J){return J&&l.filter(J.getVisualVariablesForType("sizeInfo",!1),function(Q){return!(!Q.field&&
!Q.valueExpression)})},_needClientSideSorting:function(J){return this._collection?!(!J||!J.length):l.some(J,function(Q){return!!Q.valueExpression})},_sortFeatures:function(J){var Q=this.renderer,Z=this._getSizeVariables(Q);if(J&&1<J.length&&this._needClientSideSorting(Z)){var L=Z[0],R=this;J.sort(function(aa,ka){aa._layer||(aa._layer=R);ka._layer||(ka._layer=R);aa=Q._getDataValue(aa,L,"sizeInfo");ka=Q._getDataValue(ka,L,"sizeInfo");return null==aa?-1:null==ka?1:ka-aa})}return J},_resolve:function(J,
Q,Z,L,R){Q&&this[Q].apply(this,J);Z&&Z.apply(null,J);L&&n._resDfd(L,J,R)},_getShallowClone:function(J){var Q=new ca,Z;for(Z in J)J.hasOwnProperty(Z)&&(Q[Z]=J[Z]);return Q},_canFetchPBF:function(){return!!(Ya&&bb&&this.supportsFormatPBF)},_canFetchPBFForQuery:function(J){return!(!this._canFetchPBF()||!this._isCacheHintEnabled(J)&&this._isAutoSnapshotMode()||!(J.quantizationParameters||!this.isEditable()&&this.supportsQuantizationEditMode)||J.outStatistics)},_enableEditModeQuantization:function(J,Q){J&&
Q&&!J.quantizationParameters&&(J.quantizationParameters={mode:"edit"})},_enableCacheHint:function(J,Q){var Z=this.advancedQueryCapabilities;Z&&Z.supportsQueryWithCacheHint?null==J.cacheHint&&(J.cacheHint=!0):Z&&Z.supportsQueryWithResultType&&this.reHostedFS.test(this.url)&&!J.resultType&&(J.resultType=Q||"coherent")},_isCacheHintSupported:function(){var J=this.advancedQueryCapabilities;return J?!!(J.supportsQueryWithCacheHint||J.supportsQueryWithResultType&&this.reHostedFS.test(this.url)):!1},_isCacheHintEnabled:function(J){var Q=
this.advancedQueryCapabilities;return J&&Q?!!(Q.supportsQueryWithCacheHint&&J.cacheHint||Q.supportsQueryWithResultType&&this.reHostedFS.test(this.url)&&("coherent"===J.resultType||"tile"===J.resultType)):!1},_query:function(J,Q,Z,L,R,aa){var ka=this,ua=this._map;aa=aa&&aa.snapToTiles;var Aa=new h(n._dfdCanceller),Ba=Z,Qa,La,Ia;if("executeRelationshipQuery"!==J){Ba=this._getShallowClone(Z);var Na=this.getOutFields();Ba.outFields||(Ba.outFields=Na);Ba.outFields&&Ba.outFields.length&&(La=-1<l.indexOf(Na,
"*")?!1:!l.every(Ba.outFields,function(ab){return-1<l.indexOf(Na,ab)}));Ba.returnGeometry=Z.hasOwnProperty("returnGeometry")?Z.returnGeometry:!Z.outStatistics;Ba.returnGeometry&&(Ba.multipatchOption=this.multipatchOption,null!=Ba.maxAllowableOffset||Ba.quantizationParameters)&&(Z=null!=Ba.maxAllowableOffset?Ba.maxAllowableOffset:Ba.quantizationParameters.tolerance,null!=Z&&Z!==this.getMaxAllowableOffset()&&(Ia=!0));ua&&(ua=ua&&ua.spatialReference,(Z=Ba.outSpatialReference)?Qa=!Z.equals(ua):Ba.outSpatialReference=
new p(ua.toJson()));aa&&(ua=Ba.geometry)&&"extent"===ua.type&&(Ba.geometry=this._getExtentOfTiles(ua),ua!==Ba.geometry&&this._enableCacheHint(Ba));if(!this._applyQueryFilters(Ba,"execute"===J&&!Ba.outStatistics)){switch(J){case "execute":var eb=new X({features:[]});break;case "executeForIds":eb=[];break;case "executeForCount":eb=0;break;case "executeForExtent":eb={}}this._resolve([eb],Q,L,Aa);return Aa}if(aa="executeForExtent"!==J&&!Qa&&!La&&!Ia&&this._canDoClientSideQuery(Ba,aa))return Aa._pendingDfd=
e(this._doQuery(Ba,aa,"executeForIds"===J||"executeForCount"===J)),Aa._pendingDfd.then(function(ab){switch(J){case "execute":eb=new X;eb.features=ab;break;case "executeForIds":eb=ab;break;case "executeForCount":eb=ab.length}ka._resolve([eb],Q,L,Aa)}),Aa}if(this._collection)return this._resolve([Error("FeatureLayer::_query - "+this.invalidParams)],null,R,Aa,!0),Aa;if(this.loaded&&!this.isQueryable())return this._resolve([Error("Layer does not support query capability.")],null,R,Aa,!0),Aa;this._ts&&
(Ba._ts=(new Date).getTime());aa="execute"===J&&this._canFetchPBFForQuery(Ba);this._enableEditModeQuantization(Ba,aa);(Aa._pendingDfd=this._task[J](Ba,null,null,aa?{format:"pbf"}:null)).addCallbacks(function(ab){var gb=!!Ba.outStatistics||Qa||La||Ia;if("execute"===J||"executeRelationshipQuery"===J)if("execute"===J){var cb=ab.features;var kb=cb.length;for(--kb;0<=kb;kb--)if(cb[kb]._layer=ka,!gb&&!ka._isTable){var ub=ka._mode._getFeature(cb[kb].attributes[ka.objectIdField]);ub&&cb.splice(kb,1,ub)}}else for(ub in ab)if(ab.hasOwnProperty(ub))for(cb=
ab[ub].features,kb=cb.length,--kb;0<=kb;kb--)cb[kb]._layer=ka;ka._resolve([ab],Q,L,Aa)},function(ab){ka._resolve([ab],null,R,Aa,!0)});return Aa},_getExtentOfTiles:function(J){var Q=this._isOnDemandMode()&&this._mode._gridLayer||W.createFromFeatureLayer({layer:this}),Z=this.getMap();Z=Z&&Z.getTargetExtent(J);return Q&&Z&&Q.getExtentOfIntersectingCells(Z)||J},_convertFeaturesToJson:function(J,Q,Z,L){var R=[],aa=this._selectionSymbol,ka=this.visibilityField,ua,Aa=this.objectIdField;this.loaded&&(Z||
L)&&(ua=l.filter(this.fields,function(eb){return!1===eb.editable&&(!L||eb.name!==Aa)}));for(Z=0;Z<J.length;Z++){var Ba=J[Z],Qa={},La=Ba.geometry,Ia=Ba.attributes,Na=Ba.symbol;!La||L&&this.loaded&&!this.allowGeometryUpdates||(Qa.geometry=La.toJson());ka?(Qa.attributes=Ia=q.mixin({},Ia),Ia[ka]=Ba.visible?1:0):Ia&&(Qa.attributes=q.mixin({},Ia));Qa.attributes&&ua&&ua.length&&l.forEach(ua,function(eb){delete Qa.attributes[eb.name]});Na&&Na!==aa&&(Qa.symbol=Na.toJson());R.push(Qa)}return Q?R:m.toJson(R)},
_selectHandler:function(J,Q,Z,L,R){switch(Q){case Ma.SELECTION_NEW:this.clearSelection(!0);var aa=!0;break;case Ma.SELECTION_ADD:aa=!0;break;case Ma.SELECTION_SUBTRACT:aa=!1}L=J.features;var ka=this._mode,ua=[],Aa=this.objectIdField;if(aa)for(aa=0;aa<L.length;aa++){var Ba=L[aa];var Qa=Ba.attributes[Aa];Ba=ka._addFeatureIIf(Qa,Ba);ua.push(Ba);this._selectFeatureIIf(Qa,Ba,ka)}else for(aa=0;aa<L.length;aa++)Ba=L[aa],Qa=Ba.attributes[Aa],this._unSelectFeatureIIf(Qa,ka),Qa=ka._removeFeatureIIf(Qa),ua.push(Qa||
Ba);this._isSelOnly&&ka._applyTimeFilter(!0);this._isImageService&&10.7>this.version&&void 0===J.exceededTransferLimit&&(J.exceededTransferLimit=L.length===this.maxRecordCount);this._hasPartialSelectedFeatures=!!J.exceededTransferLimit;this._resolve([ua,Q,J.exceededTransferLimit?{queryLimitExceeded:!0}:null],"onSelectionComplete",Z,R);if(J.exceededTransferLimit)this.onQueryLimitExceeded()},_selectFeatureIIf:function(J,Q,Z){var L=this._selectedFeatures,R=L[J];R||(Z._incRefCount(J),L[J]=Q,this._isTable||
(this._setSelectSymbol(Q),Q.attr("data-selected","")));return R||Q},_unSelectFeatureIIf:function(J,Q){var Z=this._selectedFeatures[J];Z&&(Q._decRefCount(J),delete this._selectedFeatures[J],this._isTable||(this._setUnSelectSymbol(Z),Z.attr("data-selected")));return Z},_setSelectSymbol:function(J){var Q=this._selectionSymbol;Q&&!this._isSelOnly&&J.setSymbol(Q)},_setUnSelectSymbol:function(J){var Q=this._selectionSymbol;Q&&!this._isSelOnly&&Q===J.symbol&&J.setSymbol(null,!0)},_getOutFields:function(){var J=
[this.objectIdField,this.typeIdField,this.creatorField,this._startTimeField,this._endTimeField,this._trackIdField].concat(this._requiredFields).concat(this.dataAttributes);J=l.filter(J,function(Z,L,R){return!!Z&&l.indexOf(R,Z)===L});var Q=q.clone(this._outFields);if(Q){if(-1!==l.indexOf(Q,"*"))return Q;l.forEach(J,function(Z){-1===l.indexOf(Q,Z)&&Q.push(Z)});return Q}return J},_checkFields:function(J){var Q=J||this._getOutFields();l.forEach(Q,function(Z){"*"!==Z&&(this._getField(Z)||console.debug("esri.layers.FeatureLayer: "+
x.substitute({url:this.url,field:Z},"unable to find '${field}' field in the layer 'fields' information [url: ${url}]")))},this);J||this._isTable||this._fserver||this._collection||this._isStream||l.some(this.fields,function(Z){return Z&&"esriFieldTypeGeometry"===Z.type?!0:!1})||console.debug("esri.layers.FeatureLayer: "+x.substitute({url:this.url},"unable to find a field of type 'esriFieldTypeGeometry' in the layer 'fields' information. If you are using a map service layer, features will not have geometry [url: ${url}]"))},
_fixFieldCase:function(J,Q,Z){var L=J&&J[Q],R;if(L&&!q.isFunction(L)){if(R=!this._getField(L)&&this._getField(L,!0))L=J[Q]=R.name;Z&&Z.push(L)}return L},_fixRendererFields:function(){var J=this.renderer;this._orderBy=null;this._requiredFields=[];if(J&&0<this.fields.length){var Q=[],Z;J=l.filter([J,J.observationRenderer,J.latestObservationRenderer,J.trackRenderer],x.isDefined);var L=[].concat(J);l.forEach(J,function(R){l.forEach(R.rendererInfos,function(aa){aa.renderer&&L.push(aa.renderer)})});l.forEach(L,
function(R){this._fixFieldCase(R,"attributeField",Q);this._fixFieldCase(R,"attributeField2",Q);this._fixFieldCase(R,"attributeField3",Q);this._fixFieldCase(R.rotationInfo,"field",Q);(Z=this._fixFieldCase(R.sizeInfo,"field",Q))&&!this._orderBy&&(this._orderBy=[Z+" DESC"]);this._fixFieldCase(R.sizeInfo,"normalizationField",Q);this._fixFieldCase(R.colorInfo,"field",Q);this._fixFieldCase(R.colorInfo,"normalizationField",Q);this._fixFieldCase(R.field,"field",Q);this._fixFieldCase(R.opacityInfo,"field",
Q);this._fixFieldCase(R.opacityInfo,"normalizationField",Q);l.forEach(R.visualVariables,function(ka){Z=this._fixFieldCase(ka,"field",Q);"sizeInfo"===ka.type&&Z&&!this._orderBy&&(this._orderBy=[Z+" DESC"]);this._fixFieldCase(ka,"normalizationField",Q)},this);var aa=l.map(R.getFieldsUsedInExpressions(),function(ka){var ua=this.getField(ka);return ua?ua.name:ka},this);Q=Q.concat(aa);this._orderBy||!R.addBreak||q.isFunction(R.attributeField)||!R.backgroundFillSymbol&&!this._hasSizeDiff(R)||(this._orderBy=
[R.attributeField+" DESC"])},this);this._requiredFields=l.filter(Q,x.isDefined)}},_hasSizeDiff:function(J){var Q=Number.MAX_VALUE,Z=-Number.MAX_VALUE,L,R;l.forEach(J.infos,function(aa){if(R=aa.symbol){L=0;switch(R.type){case "simplemarkersymbol":L=R.size;break;case "picturemarkersymbol":L=(R.width+R.height)/2;break;case "simplelinesymbol":case "cartographiclinesymbol":L=R.width;break;case "simplefillsymbol":case "picturefillsymbol":L=R.outline&&R.outline.width}L&&(Q=Math.min(Q,L),Z=Math.max(Z,L))}});
return Q!==Number.MAX_VALUE&&Z!==-Number.MAX_VALUE&&1<Math.abs(Z-Q)},getOrderByFields:function(){var J=this.orderByFields||this._orderBy;return this.supportsAdvancedQueries&&J?l.filter(J,function(Q){Q=Q.split(" ")[0];return!!this._getField(Q,!0)},this):null},_createFields:function(J){var Q=J?J.length:0,Z,L=[];for(Z=0;Z<Q;Z++)L.push(new N(J[Z]));this.fields=L},_createFieldsIndex:function(){if(this._fieldsIndexDirty){var J=this.fields,Q=J?J.length:0;if(50<Q&&this._canUseFieldsIndex()){var Z=new Map;
for(var L=new Map,R=0;R<Q;R++){var aa=J[R];Z.set(aa.name,aa);L.set(aa.name.toLowerCase(),aa)}Z={caseSensitive:Z,caseInsensitive:L}}this._fieldsIndex=Z;this._fieldsIndexDirty=!1}},_canUseFieldsIndex:function(){var J=r.Map;return!("function"!==typeof r.Proxy||"function"!==typeof r.Proxy.revocable||"function"!==typeof J||!J.prototype||"function"!==typeof J.prototype.set)},_getField:function(J,Q){var Z=this.fields;if(!Z||0===Z.length)return null;Q&&(J=J.toLowerCase());this._createFieldsIndex();var L=
this._fieldsIndex;if(L)return L=Q?L.caseInsensitive:L.caseSensitive,L.get(J);var R;l.some(Z,function(aa){var ka=!1;(ka=Q?aa&&aa.name.toLowerCase()===J?!0:!1:aa&&aa.name===J?!0:!1)&&(R=aa);return ka});return R},_getDateOpts:function(){this._dtOpts||(this._dtOpts={properties:l.map(l.filter(this.fields,function(J){return!(!J||"esriFieldTypeDate"!==J.type)}),function(J){return J.name})});return this._dtOpts},_applyNormalized:function(J,Q){J&&Q&&l.forEach(J,function(Z,L){Z&&Q[L]&&Z.setGeometry(Q[L])})},
_editHandler:function(J,Q,Z,L,R,aa){R=J.addResults;var ka=J.updateResults;J=J.deleteResults;var ua,Aa=this.objectIdField,Ba=this._mode,Qa=this._isTable;var La=this.editFieldsInfo;var Ia=this.getOutFields()||[];var Na=La&&La.creatorField,eb=La&&La.creationDateField,ab=La&&La.editorField,gb=La&&La.editDateField;La=La&&La.realm;-1===l.indexOf(Ia,"*")&&(Na&&-1===l.indexOf(Ia,Na)&&(Na=null),eb&&-1===l.indexOf(Ia,eb)&&(eb=null),ab&&-1===l.indexOf(Ia,ab)&&(ab=null),gb&&-1===l.indexOf(Ia,gb)&&(gb=null));
var cb=eb||gb?(new Date).getTime():null,kb=Na||ab?this.getUserId():void 0;kb&&La&&(kb=kb+"@"+La);if(R){var ub=this.globalIdField;for(La=0;La<R.length;La++)if(R[La]=new Ga(R[La]),!Qa){var ob=R[La];if(ob.success){var db=ob.objectId;Ia=Q[La];(ua=Ia._graphicsLayer)&&ua!==this&&ua.remove(Ia);ua=Ia.attributes||{};ua[Aa]=db;db=ob.globalId;ub&&db&&(ua[ub]=db);Na&&(ua[Na]=kb);ab&&(ua[ab]=kb);eb&&(ua[eb]=cb);gb&&(ua[gb]=cb);Ia.setAttributes(ua);Ba._init&&Ba.drawFeature(Ia)}}}if(ka)for(La=0;La<ka.length;La++)if(ka[La]=
new Ga(ka[La]),!Qa&&(ob=ka[La],ob.success)){db=ob.objectId;Ia=Z[db];if(Q=Ba._getFeature(db))Q.geometry!==Ia.geometry&&Ia.geometry&&Q.setGeometry(wa.fromJson(Ia.geometry.toJson())),Q.attributes!==Ia.attributes&&Ia.attributes&&Q.setAttributes(q.mixin(Q.attributes,Ia.attributes)),this._repaint(Q,db);Ia=Q||Ia;ua=Ia.attributes||{};ab&&(ua[ab]=kb);gb&&(ua[gb]=cb);Ia.setAttributes(ua)}if(J){Z=[];for(La=0;La<J.length;La++)if(J[La]=new Ga(J[La]),!Qa&&(ob=J[La],ob.success&&(db=ob.objectId,Ia=Ba._getFeature(db))))this._unSelectFeatureIIf(db,
Ba)&&Z.push(Ia),Ia._count=0,Ba._removeFeatureIIf(db);if(0<Z.length)this.onSelectionComplete(Z,Ma.SELECTION_SUBTRACT)}this._resolve([R,ka,J],"onEditsComplete",L,aa)},_sendAttachment:function(J,Q,Z,L,R){var aa=this;return v({url:this._url.path+"/"+Q+"/"+("add"===J?"addAttachment":"updateAttachment"),form:Z,content:q.mixin(this._url.query,{f:"json",token:this._getToken()||void 0}),callbackParamName:"callback.html",handleAs:"json"}).addCallback(function(ka){var ua="add"===J?"onAddAttachmentComplete":
"onUpdateAttachmentComplete";ka=new Ga(ka["add"===J?"addAttachmentResult":"updateAttachmentResult"]);ka.attachmentId=ka.objectId;ka.objectId=Q;aa._resolve([ka],ua,L);return ka}).addErrback(function(ka){aa._resolve([ka],null,R,null,!0)})},_repaint:function(J,Q,Z){Q=x.isDefined(Q)?Q:J.attributes[this.objectIdField];Q in this._selectedFeatures&&this._selectionSymbol||J.setSymbol(J.symbol,Z)},_getKind:function(J){var Q=this._trackManager;return Q?Q.isLatestObservation(J)?1:0:0}});q.mixin(Ma,{MODE_SNAPSHOT:0,
MODE_ONDEMAND:1,MODE_SELECTION:2,SELECTION_NEW:3,SELECTION_ADD:4,SELECTION_SUBTRACT:5,MODE_AUTO:6,MODE_STREAM:7,POPUP_NONE:"esriServerHTMLPopupTypeNone",POPUP_HTML_TEXT:"esriServerHTMLPopupTypeAsHTMLText",POPUP_URL:"esriServerHTMLPopupTypeAsURL"});P._createWrappers(Ma);Object.defineProperty(Ma.prototype,"graphics",{get:function(){return this._hasOnDemandDrillMode()?this._mode.graphics:this._graphicsVal},set:function(J){this._graphicsVal=J}});Object.defineProperty(Ma.prototype,"name",{get:function(){return this.arcgisProps&&
this.arcgisProps.title?this.arcgisProps.title:this._name},set:function(J){this._name=J;this.loaded&&this.arcgisProps&&(this.arcgisProps.title=null)}});Object.defineProperty(Ma.prototype,"fields",{get:function(){return this._fields},set:function(J){J&&this._canUseFieldsIndex()&&(J=new Proxy(J,{set:q.hitch(this,function(Q,Z,L){if(Z)if("length"===Z)this._fieldsIndexDirty=!0;else{var R=Number(Z);"number"!==typeof R||isNaN(R)||(this._fieldsIndexDirty=!0)}Q[Z]=L;return!0})}));this._fields=J;this._fieldsIndexDirty=
!0}});g("extend-esri")&&q.setObject("layers.FeatureLayer",Ma,k);return Ma})},"esri/arcadeProfiles/labelingProfile":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../arcade/Feature ../support/expressionUtils ./utils".split(" "),function(B,y,c,u,q,l,m,h){B=new (B(null,{declaredClass:"esri.arcadeProfiles.LabelingProfile",defaults:{context:{vars:{$feature:"any"}}},initialize:function(f){var d=[];h.hasGeometryOperations(f)&&d.push(m.enableGeometryOperations());
return q(d)},isAsync:function(f){return!1},parse:function(f){return m.createSyntaxTree(f.expression)},compile:function(f){var d=y.clone(this.defaults.context);return f.syntaxTree?m.createFunction(f.syntaxTree,d):null},getEvalOptions:function(f){var d=f.feature;return{context:{vars:{$feature:d&&f.expression.hasVariable("$feature")?l.createFromGraphicLikeObject(d.geometry,d.attributes,f.layer):null},spatialReference:f.spatialReference}}}}));c("extend-esri")&&y.setObject("arcadeProfiles.labelingProfile",
B,u);return B})},"esri/tasks/QueryTask":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/DeferredList ../kernel ../sniff ../request ../deferredUtils ../geometry/Extent ../geometry/normalizeUtils ./Task ./FeatureSet".split(" "),function(B,y,c,u,q,l,m,h,f,d,a,b,e,r,t){var g=f("esri-pbf"),k=y(null,{url:null,query:null,requestOptions:null,pagination:null,pageSize:null,_fetchDfd:null,_startPage:null,_result:null,constructor:function(v){this._handleSuccess=
c.hitch(this,this._handleSuccess);this._handleError=c.hitch(this,this._handleError);c.mixin(this,v);null==this.pagination&&(this.pagination=!1);null==this.pageSize&&(this.pageSize=1E3)},execute:function(){var v=new q(this._canceler);this._fetchDfd=v;this._result=null;this._sendRequest();return v.promise},_canceler:function(v){var A=v._pendingRequest;if(!v.isFulfilled()&&A&&!A.isFulfilled()){A.cancel();var n=A.results&&A.results[1]}v._pendingRequest=null;return n},_sendRequest:function(v){var A=this.query;
this.pagination&&(this._startPage=A.resultOffset=null==v?0:v,A.resultRecordCount=this.pageSize);v=this.requestOptions;this._fetchDfd._pendingRequest=d({url:this.url,content:A,handleAs:"pbf"===A.f?"arraybuffer":"json",callbackParamName:"callback",timeout:v&&v.timeout},v);this._fetchDfd._pendingRequest.then(this._handleSuccess).otherwise(this._handleError)},_handleSuccess:function(v){this.pagination?(v.exceededTransferLimit&&this._sendRequest(this._startPage+this.pageSize),this._result?this._result.features=
this._result.features.concat(v.features):this._result=v,this._fetchDfd.progress(v),v.exceededTransferLimit||this._fetchDfd.resolve(this._result)):(this._fetchDfd.progress(v),this._fetchDfd.resolve(v))},_handleError:function(v){this._fetchDfd.reject(v)}}),x=y(r,{declaredClass:"esri.tasks.QueryTask",_eventMap:{complete:["featureSet"],"execute-for-count-complete":["count"],"execute-for-ids-complete":["objectIds"],"execute-relationship-query-complete":["featureSets"]},constructor:function(v,A){this._handler=
c.hitch(this,this._handler);this._relationshipQueryHandler=c.hitch(this,this._relationshipQueryHandler);this._executeForIdsHandler=c.hitch(this,this._executeForIdsHandler);this._countHandler=c.hitch(this,this._countHandler);this._extentHandler=c.hitch(this,this._extentHandler);this.source=A&&A.source;this.gdbVersion=A&&A.gdbVersion;this.registerConnectEvents()},__msigns:[{n:"execute",c:4,a:[{i:0,p:["geometry"]}],e:2},{n:"rawExecute",c:2,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForIds",c:3,a:[{i:0,
p:["geometry"]}],e:2},{n:"executeForCount",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForExtent",c:3,a:[{i:0,p:["geometry"]}],e:2}],onComplete:function(){},onRawExecuteComplete:function(){},onExecuteRelationshipQueryComplete:function(){},onExecuteForIdsComplete:function(){},onExecuteForCountComplete:function(){},onExecuteForExtentComplete:function(){},execute:function(v,A,n,w,p){var D=p.assembly;v=this._encode(c.mixin({},this._url.query,{f:w&&w.format||"json"},v.toJson(D&&D[0])));var C=this._handler,
G=this._errorHandler;this.source&&(w={source:this.source.toJson()},v.layer=l.toJson(w));this.gdbVersion&&(v.gdbVersion=this.gdbVersion);var z="pbf"===v.f;if(z){var E;g||(E="QueryTask.execute: 'pbf' format is not supported in your browser.");if(E)return v=new q,v.addErrback(function(H){G(H,n,p.dfd)}),v.reject(Error(E)),v}E=this.requestOptions;E=d({url:this._url.path+"/query",content:v,callbackParamName:"callback",handleAs:z?"arraybuffer":"json",timeout:E&&E.timeout},E);v=[E];z&&v.push(x.loadPBFReader());
(new m(v)).then(function(H){p.dfd.isFulfilled()||(H=H[0],H[0]?C(H[1],z,A,n,p.dfd):G(H[1],n,p.dfd))});return E},rawExecute:function(v,A,n){A=A||{};v=this._encode(c.mixin({},this._url.query,{f:A.format||"json"},v.toJson(n.assembly&&n.assembly[0])));this.source&&(v.layer=l.toJson({source:this.source.toJson()}));this.gdbVersion&&(v.gdbVersion=this.gdbVersion);return(new k({url:this._url.path+"/query",query:v,requestOptions:this.requestOptions,pagination:A.pagination,pageSize:A.pageSize})).execute().then(null,
null,function(w){n.dfd.progress(w)}).then(c.hitch(this,function(w){this._successHandler([w],"onRawExecuteComplete",null,n.dfd)})).otherwise(c.hitch(this,function(w){this._errorHandler(w,null,n.dfd)}))},executeRelationshipQuery:function(v,A,n){v=this._encode(c.mixin({},this._url.query,{f:"json"},v.toJson()));var w=this._relationshipQueryHandler,p=this._errorHandler;this.gdbVersion&&(v.gdbVersion=this.gdbVersion);var D=new q(a._dfdCanceller),C=this.requestOptions,G=this._url.path;this.source&&void 0!==
this.source.mapLayerId&&null!==this.source.mapLayerId&&G.endsWith("/dynamicLayer")&&(G=G.slice(0,-13),G=G+"/"+this.source.mapLayerId);D._pendingDfd=d({url:G+"/queryRelatedRecords",content:v,callbackParamName:"callback",timeout:C&&C.timeout,load:function(z,E){w(z,E,A,n,D)},error:function(z){p(z,n,D)}},C);return D},executeForIds:function(v,A,n,w){var p=w.assembly;v=this._encode(c.mixin({},this._url.query,{f:"json",returnIdsOnly:!0},v.toJson(p&&p[0])));var D=this._executeForIdsHandler,C=this._errorHandler;
this.source&&(p={source:this.source.toJson()},v.layer=l.toJson(p));this.gdbVersion&&(v.gdbVersion=this.gdbVersion);p=this.requestOptions;return d({url:this._url.path+"/query",content:v,callbackParamName:"callback",timeout:p&&p.timeout,load:function(G,z){D(G,z,A,n,w.dfd)},error:function(G){C(G,n,w.dfd)}},p)},executeForCount:function(v,A,n,w){var p=w.assembly;v=this._encode(c.mixin({},this._url.query,{f:"json",returnIdsOnly:!0,returnCountOnly:!0},v.toJson(p&&p[0])));var D=this._countHandler,C=this._errorHandler;
this.source&&(p={source:this.source.toJson()},v.layer=l.toJson(p));this.gdbVersion&&(v.gdbVersion=this.gdbVersion);p=this.requestOptions;return d({url:this._url.path+"/query",content:v,callbackParamName:"callback",timeout:p&&p.timeout,load:function(G,z){D(G,z,A,n,w.dfd)},error:function(G){C(G,n,w.dfd)}},p)},executeForExtent:function(v,A,n,w){var p=w.assembly;v=this._encode(c.mixin({},this._url.query,{f:"json",returnExtentOnly:!0,returnCountOnly:!0},v.toJson(p&&p[0])));var D=this._extentHandler,C=
this._errorHandler;this.source&&(p={source:this.source.toJson()},v.layer=l.toJson(p));this.gdbVersion&&(v.gdbVersion=this.gdbVersion);p=this.requestOptions;return d({url:this._url.path+"/query",content:v,callbackParamName:"callback",timeout:p&&p.timeout,load:function(G,z){D(G,z,A,n,w.dfd)},error:function(G){C(G,n,w.dfd)}},p)},_handler:function(v,A,n,w,p){try{v&&A&&(v=x.pbfDeps.optimizedFeatures.convertToFeatureSet(x.pbfDeps.pbfQueryUtils.parsePBFFeatureQuery(v)));var D=new t(v);this._successHandler([D],
"onComplete",n,p)}catch(C){this._errorHandler(C,w,p)}},_relationshipQueryHandler:function(v,A,n,w,p){try{var D=v.geometryType,C=v.spatialReference,G={};u.forEach(v.relatedRecordGroups,function(z){var E={};E.geometryType=D;E.spatialReference=C;E.features=z.relatedRecords;E=new t(E);if(null!=z.objectId)G[z.objectId]=E;else for(var H in z)z.hasOwnProperty(H)&&"relatedRecords"!==H&&(G[z[H]]=E)});this._successHandler([G],"onExecuteRelationshipQueryComplete",n,p)}catch(z){this._errorHandler(z,w,p)}},_executeForIdsHandler:function(v,
A,n,w,p){try{this._successHandler([v.objectIds],"onExecuteForIdsComplete",n,p)}catch(D){this._errorHandler(D,w,p)}},_countHandler:function(v,A,n,w,p){try{var D=v.features,C=v.objectIds;if(C)var G=C.length;else{if(D)throw Error("Unable to perform query. Please check your parameters.");G=v.count}this._successHandler([G],"onExecuteForCountComplete",n,p)}catch(z){this._errorHandler(z,w,p)}},_extentHandler:function(v,A,n,w,p){try{v.extent&&(v.extent=new b(v.extent)),this._successHandler([v],"onExecuteForExtentComplete",
n,p)}catch(D){this._errorHandler(D,w,p)}}});x.loadPBFReader=function(){var v=new q;x.pbfDeps?v.resolve():B(["./support/pbfDeps"],function(A){x.pbfDeps=A;v.isFulfilled()||v.resolve()});return v.promise};e._createWrappers(x);f("extend-esri")&&c.setObject("tasks.QueryTask",x,h);return x})},"dojo/DeferredList":function(){define(["./_base/kernel","./_base/Deferred","./_base/array"],function(B,y,c){B.DeferredList=function(u,q,l,m,h){var f=[];y.call(this);var d=this;0!==u.length||q||this.resolve([0,[]]);
var a=0;c.forEach(u,function(b,e){function r(t,g){f[e]=[t,g];a++;a===u.length&&d.resolve(f)}b.then(function(t){q?d.resolve([e,t]):r(!0,t)},function(t){l?d.reject(t):r(!1,t);if(m)return null;throw t;})})};B.DeferredList.prototype=new y;B.DeferredList.prototype.gatherResults=function(u){u=new B.DeferredList(u,!1,!0,!1);u.addCallback(function(q){var l=[];c.forEach(q,function(m){l.push(m[1])});return l});return u};return B.DeferredList})},"esri/tasks/Task":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../deferredUtils ../urlUtils ../Evented".split(" "),
function(B,y,c,u,q,l,m,h){B=B(h,{declaredClass:"esri.tasks._Task",_eventMap:{error:["error"],complete:["result"]},constructor:function(f,d){f&&y.isString(f)&&(this._url=m.urlToObject(this.url=f));d&&d.requestOptions&&(this.requestOptions=d.requestOptions);this.normalization=!0;this._errorHandler=y.hitch(this,this._errorHandler);this.registerConnectEvents()},_useSSL:function(){var f=this._url,d=/^http:/i;this.url&&(this.url=this.url.replace(d,"https:"));f&&f.path&&(f.path=f.path.replace(d,"https:"))},
_encode:function(f,d,a){var b={},e;for(e in f)if("declaredClass"!==e){var r=f[e];var t=typeof r;if(null!==r&&void 0!==r&&"function"!==t)if(y.isArray(r)){b[e]=[];var g=r.length;for(t=0;t<g;t++)b[e][t]=this._encode(r[t])}else"object"===t?r.toJson&&(t=r.toJson(a&&a[e]),"esri.tasks.FeatureSet"===r.declaredClass&&t.spatialReference&&(t.sr=t.spatialReference,delete t.spatialReference),b[e]=d?t:c.toJson(t)):b[e]=r}return b},_successHandler:function(f,d,a,b){d&&this[d].apply(this,f);a&&a.apply(null,f);b&&
l._resDfd(b,f)},_errorHandler:function(f,d,a){this.onError(f);d&&d(f);a&&a.errback(f)},setNormalization:function(f){this.normalization=f},onError:function(){}});u("extend-esri")&&(q.Task=B);return B})},"esri/tasks/FeatureSet":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../graphic ../SpatialReference ../graphicsUtils ../geometry/Polygon ../geometry/jsonUtils ../symbols/jsonUtils".split(" "),function(B,y,c,u,q,l,m,h,f,d,a,b){B=B(null,{declaredClass:"esri.tasks.FeatureSet",
constructor:function(e,r){if(e){y.mixin(this,e);var t=this.features=this.features||[],g=e.spatialReference;g=this.spatialReference=a.createInstance(h.simpleConstructor,g);var k=a.getGeometryType(e.geometryType);this.geometryType=e.geometryType;e.fields&&(this.fields=e.fields);e=a.supportsLazyUnquantization(this.geometryType);var x=a.unquantizeFunction(this.geometryType,this.transform),v=!!(r&&e&&x),A=k&&(v?k.accessorConstructor:k.simpleConstructor);c.forEach(t,function(n,w){var p=a.createInstance(m.simpleConstructor),
D=n.geometry;if(k&&D){var C=p.geometry=a.createInstance(A,v?null:D);C.setSpatialReference(D.spatialReference?a.createInstance(h.simpleConstructor,D.spatialReference):g);v&&C.setupLazyUnquantization(x,D)}p.symbol=n.symbol?b.fromJson(n.symbol):null;p.attributes=n.attributes;t[w]=p});v||this._hydrate()}else this.features=[]},displayFieldName:null,geometryType:null,spatialReference:null,fieldAliases:null,toJson:function(e){var r={};this.displayFieldName&&(r.displayFieldName=this.displayFieldName);this.fields&&
(r.fields=this.fields);this.spatialReference?r.spatialReference=this.spatialReference.toJson():this.features[0]&&this.features[0].geometry&&(r.spatialReference=this.features[0].geometry.spatialReference.toJson());this.features[0]&&(this.features[0].geometry&&(r.geometryType=a.getJsonType(this.features[0].geometry)),r.features=f._encodeGraphics(this.features,e));r.geometryType=r.geometryType||this.geometryType;r.exceededTransferLimit=this.exceededTransferLimit;r.transform=this.transform;return l.fixJson(r)},
_hydrate:function(){a.unquantize(this.features,this.geometryType,this.transform);this.transform=null},quantize:function(e){if(!this.geometryType)return this.transform=null,this;var r=e.translate[0],t=e.translate[1],g=e.scale[0],k=e.scale[1],x=this.features,v=function(p,D,C){var G,z=[];var E=0;for(G=p.length;E<G;E++){var H=p[E];if(0<E){var I=D(H[0]);H=C(H[1]);if(I!==M||H!==T){z.push([I-M,H-T]);var M=I;var T=H}}else M=D(H[0]),T=C(H[1]),z.push([M,T])}return 0<z.length?z:null},A=function(p,D,C){if("esriGeometryPoint"===
p)return function(G){G.x=D(G.x);G.y=C(G.y);return G};if("esriGeometryPolyline"===p||"esriGeometryPolygon"===p)return function(G){var z;var E=G.rings||G.paths;var H=[];var I=0;for(z=E.length;I<z;I++){var M=E[I];(M=v(M,D,C))&&H.push(M)}return 0<H.length?(G.rings?G.rings=H:G.paths=H,G):null};if("esriGeometryMultipoint"===p)return function(G){var z=v(G.points,D,C);return 0<z.length?(G.points=z,G):null};if("esriGeometryEnvelope"===p)return function(G){return G}}(this.geometryType,function(p){return Math.round((p-
r)/g)},function(p){return Math.round((t-p)/k)}),n;var w=0;for(n=x.length;w<n;w++)x[w].geometry&&(A(x[w].geometry)||x[w].setGeometry(null));this.transform=e;return this}});B.createGraphics=function(e){var r=e.geometryType,t=a.createInstance(h.simpleConstructor,e.spatialReference),g=a.getGeometryType(r).accessorConstructor,k=a.unquantizeFunction(r,e.transform);return c.map(e.features,function(x,v){v=a.createInstance(m.simpleConstructor);var A=x.geometry;if(A){var n=v.geometry=a.createInstance(g);n.setSpatialReference(t);
n.setupLazyUnquantization(k,A)}v.attributes=x.attributes;return v})};B.createPolygon=function(e,r,t){if(e){var g=a.createInstance(d.accessorConstructor);g.setSpatialReference(r);r=a.unquantizeFunction("esriGeometryPolygon",t);g.setupLazyUnquantization(r,e)}return g};u("extend-esri")&&y.setObject("tasks.FeatureSet",B,q);return B})},"esri/tasks/StatisticDefinition":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(B,y,c,u){B=B(null,{declaredClass:"esri.tasks.StatisticDefinition",
toJson:function(){return{statisticType:this.statisticType,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount}}});c("extend-esri")&&y.setObject("tasks.StatisticDefinition",B,u);return B})},"esri/layers/FeatureType":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../symbols/jsonUtils ./FeatureTemplate ./support/domainUtils".split(" "),
function(B,y,c,u,q,l,m,h,f){B=B(null,{declaredClass:"esri.layers.FeatureType",constructor:function(d){if(d&&y.isObject(d)){this.id=d.id;this.name=d.name;var a=d.symbol;a&&(this.symbol=m.fromJson(a));a=d.domains;var b=this.domains={};for(e in a)a.hasOwnProperty(e)&&(b[e]=f.fromJson(a[e]));if(d=d.templates){var e=this.templates=[];for(a=0;a<d.length;a++)e.push(new h(d[a]))}}},toJson:function(){var d={id:this.id,name:this.name,symbol:this.symbol&&this.symbol.toJson()},a,b=this.domains,e=this.templates,
r=l.fixJson;if(b){var t=d.domains={};for(a in b)b.hasOwnProperty(a)&&(t[a]=b[a]&&b[a].toJson());r(t)}e&&(d.templates=c.map(e,function(g){return g.toJson()}));return r(d)}});u("extend-esri")&&y.setObject("layers.FeatureType",B,q);return B})},"esri/layers/FeatureTemplate":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../graphic".split(" "),function(B,y,c,u,q,l){B=B(null,{declaredClass:"esri.layers.FeatureTemplate",constructor:function(m){m&&y.isObject(m)&&(this.name=
m.name,this.description=m.description,this.drawingTool=m.drawingTool,this.thumbnail=m.thumbnail,m=m.prototype,this.prototype=new l(m.geometry,null,m.attributes))},toJson:function(){return q.fixJson({name:this.name,description:this.description,drawingTool:this.drawingTool,thumbnail:q.fixJson(y.clone(this.thumbnail)),prototype:this.prototype&&this.prototype.toJson()})}});y.mixin(B,{TOOL_AUTO_COMPLETE_POLYGON:"esriFeatureEditToolAutoCompletePolygon",TOOL_CIRCLE:"esriFeatureEditToolCircle",TOOL_ELLIPSE:"esriFeatureEditToolEllipse",
TOOL_FREEHAND:"esriFeatureEditToolFreehand",TOOL_LINE:"esriFeatureEditToolLine",TOOL_NONE:"esriFeatureEditToolNone",TOOL_POINT:"esriFeatureEditToolPoint",TOOL_POLYGON:"esriFeatureEditToolPolygon",TOOL_RECTANGLE:"esriFeatureEditToolRectangle",TOOL_ARROW:"esriFeatureEditToolArrow",TOOL_TRIANGLE:"esriFeatureEditToolTriangle",TOOL_LEFT_ARROW:"esriFeatureEditToolLeftArrow",TOOL_RIGHT_ARROW:"esriFeatureEditToolRightArrow",TOOL_UP_ARROW:"esriFeatureEditToolUpArrow",TOOL_DOWN_ARROW:"esriFeatureEditToolDownArrow"});
c("extend-esri")&&y.setObject("layers.FeatureTemplate",B,u);return B})},"esri/layers/support/domainUtils":function(){define("dojo/_base/lang dojo/has ../../kernel ../RangeDomain ../CodedValueDomain ../InheritedDomain".split(" "),function(B,y,c,u,q,l){var m={fromJson:function(h){if(h)switch(h.type){case "range":var f=new u(h);break;case "codedValue":f=new q(h);break;case "inherited":f=new l(h)}return f}};y("extend-esri")&&B.setObject("layers.support.domainUtils",m,c);return m})},"esri/layers/FeatureSubtype":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./support/domainUtils".split(" "),
function(B,y,c,u,q,l){B=B(null,{declaredClass:"esri.layers.FeatureSubtype",constructor:function(m){if(m&&y.isObject(m)){this.code=m.code;this.name=m.name;this.defaultValues=m.defaultValues;m=m.domains;var h=this.domains={},f;for(f in m)m.hasOwnProperty(f)&&(h[f]=l.fromJson(m[f]))}},toJson:function(){var m=q.fixJson,h={code:this.code,name:this.name,defaultValues:m(y.clone(this.defaultValues))},f=this.domains;if(f){var d=h.domains={},a;for(a in f)f.hasOwnProperty(a)&&(d[a]=f[a]&&f[a].toJson());m(d)}return m(h)}});
c("extend-esri")&&y.setObject("layers.FeatureSubtype",B,u);return B})},"esri/layers/FeatureEditResult":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(B,y,c,u){B=B(null,{declaredClass:"esri.layers.FeatureEditResult",constructor:function(q){q&&y.isObject(q)&&(this.objectId=q.objectId,this.globalId=q.globalId,this.success=q.success,q.success||(q=q.error,this.error=Error(),this.error.code=q.code,this.error.message=q.description))}});c("extend-esri")&&y.setObject("layers.FeatureEditResult",
B,u);return B})},"esri/layers/SnapshotMode":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../SpatialReference ../srUtils ../tasks/query ./RenderMode ./support/ParallelSnapshot".split(" "),function(B,y,c,u,q,l,m,h,f){B=B([h],{declaredClass:"esri.layers._SnapshotMode",maxFeatures:5E4,maxRecordCountFactor:1,scaleToTileFactor:1,_isSuspendedAtStartup:!1,_pendingRefresh:!1,constructor:function(d){this.featureLayer=d;this._featureMap={};this._hasUpdateError=this._hasPartialFeatures=
!1;this._drawFeatures=y.hitch(this,this._drawFeatures);this._queryErrorHandler=y.hitch(this,this._queryErrorHandler);this._handleSuccess=y.hitch(this,this._handleSuccess);this._handleError=y.hitch(this,this._handleError);this._handleProgress=y.hitch(this,this._handleProgress)},startup:function(){if(!this._started||this._isSuspendedAtStartup){this.inherited(arguments);var d=this.featureLayer,a=d.reHostedFS.test(d.url);this.pagination=d.queryPagination&&null!=d.maxRecordCount;this._cacheHintSupported=
d._isCacheHintSupported();this.scaleToTileFactor=this._getScaleToTileFactor();a&&this.pagination&&(this._parallelSnapshot=new f({layer:d,mode:this,queryTask:d._task}));this._isSuspendedAtStartup=d.suspended;this._startup()}},propertyChangeHandler:function(d){this._init&&(d?this.featureLayer._collection?console.log("FeatureLayer: layer created by value (from a feature collection) does not support definition expressions and time definitions. Layer id \x3d "+this.featureLayer.id):this._fetchAll():this._applyTimeFilter())},
destroy:function(){this._isSuspendedAtStartup=this._pendingRefresh=!1;this._cancelPendingRequest(this._pendingRequest);this._parallelSnapshot&&this._parallelSnapshot.destroy();this.inherited(arguments)},drawFeature:function(d){var a=d.attributes[this.featureLayer.objectIdField];this._addFeatureIIf(a,d);this._incRefCount(a)},resume:function(){this._isSuspendedAtStartup||this._pendingRefresh?(this._isSuspendedAtStartup=!1,this._startup()):this.propertyChangeHandler(0)},refresh:function(){var d=this.featureLayer;
d._collection?(d._fireUpdateStart(),d._refresh(!0),d._fireUpdateEnd()):this._fetchAll()},hasAllFeatures:function(){return!this._hasPartialFeatures},hasUpdateError:function(){return this._hasUpdateError},canFetchPBF:function(d){return this.inherited(arguments)&&this.featureLayer._canFetchPBFForQuery(d)},_startup:function(){this.featureLayer._collection?this._applyTimeFilter():this._fetchAll()},_fetchAll:function(){var d=this.featureLayer;d._collection||d.suspended||!d.isQueryable()?this._pendingRefresh=
d.suspended:(this._pendingRefresh=!1,d._fireUpdateStart(),this._clearIIf(),this._hasUpdateError=this._hasPartialFeatures=!1,this._parallelSnapshot?this._parallelSnapshot.fetch().then(this._handleSuccess,this._handleError,this._handleProgress):this._sendRequest())},_handleSuccess:function(d){this._hasPartialFeatures=d.hasPartialFeatures;this._hasUpdateError=d.hasUpdateError;this.featureLayer._fireUpdateEnd(null)},_handleError:function(d){this._queryErrorHandler(d)},_handleProgress:function(d){d.isError?
this.featureLayer._errorHandler(d.error):this._addFeatures(d.features)},_getScaleToTileFactor:function(){var d=this.featureLayer.tileMaxRecordCount,a=this.featureLayer.maxRecordCount,b=1;null!=d&&null!=a&&(b=Number((d/a).toFixed(2)));return b},_getPageSize:function(d){var a=this.featureLayer.tileMaxRecordCount;a="tile"===d.resultType&&a?a:this.featureLayer.maxRecordCount;d.maxRecordCountFactor&&(a=Math.floor(a*d.maxRecordCountFactor));return a},_sendRequest:function(d){var a=this.featureLayer,b=this._createQueryInfo(),
e=b.query;this.pagination&&(this._pageSize=this._getPageSize(e),this._start=e.start=null==d?0:d,e.num=this._pageSize);this._pendingRequest&&this._cancelPendingRequest(this._pendingRequest);this._pendingRequest=a._task.execute(e,this._drawFeatures,this._queryErrorHandler,b.pbf?{format:"pbf"}:null)},_drawFeatures:function(d){this._pendingRequest=null;this.featureLayer._isImageService&&10.7>this.featureLayer.version&&void 0===d.exceededTransferLimit&&(d.exceededTransferLimit=d.features.length===this.featureLayer.maxRecordCount);
var a=this.featureLayer,b=d.exceededTransferLimit,e=b&&!a._collection;d=this._checkMaxLimit(d.features);var r=d.maxLimitReached;this._addFeatures(d.features);this.pagination&&e&&!r||(this._hasPartialFeatures=!!b,a._fireUpdateEnd(null,b?{queryLimitExceeded:!0}:null));e&&(this.pagination&&!r&&this._sendRequest(this._start+this._pageSize),a.onQueryLimitExceeded())},_queryErrorHandler:function(d){this._pendingRequest=null;this._hasUpdateError=this._hasPartialFeatures=!0;var a=this.featureLayer;a._errorHandler(d);
a._fireUpdateEnd(d)},_checkMaxLimit:function(d){var a=d?d.length:0,b=this.featureLayer.graphics.length+a,e=b>=this.maxFeatures;if(e){var r=b-this.maxFeatures;r&&d.splice(a-r,r)}return{maxLimitReached:e,featuresDiscarded:b>this.maxFeatures,features:d}},_createQueryInfo:function(){var d=this.featureLayer,a=new m;a.outFields=d.getOutFields();a.where=d.getDefinitionExpression()||"1\x3d1";a.returnGeometry=!0;a.outSpatialReference=l.createSpatialReference(this.map.spatialReference.toJson());a.timeExtent=
d.getTimeDefinition();a.maxAllowableOffset=d._maxOffset;a.quantizationParameters=d._quantizationParameters;a.orderByFields=d.supportsAdvancedQueries?d.getOrderByFields():null;a.multipatchOption=d.multipatchOption;d._ts&&(a._ts=(new Date).getTime());this._cacheHintSupported&&d._enableCacheHint(a);var b=this.canFetchPBF(a);d._enableEditModeQuantization(a,b);this._applyMaxRecordCountFactor(a,b);return{query:a,pbf:b}},_applyMaxRecordCountFactor:function(d,a){var b=this.featureLayer.advancedQueryCapabilities;
this.featureLayer._isCacheHintEnabled(d)&&b&&b.supportsMaxRecordCountFactor&&("tile"!==d.resultType&&1<this.scaleToTileFactor&&(d.maxRecordCountFactor=this.scaleToTileFactor),a&&1<this.maxRecordCountFactor&&(d.maxRecordCountFactor=this.maxRecordCountFactor),5<d.maxRecordCountFactor&&(d.maxRecordCountFactor=5))},_addFeatures:function(d){var a=this.featureLayer,b=a.objectIdField,e=d.length,r=a._selectedFeatures,t=a.mode===a.constructor.MODE_AUTO;a._fireUpdateStart();a._sortFeatures(d);for(a=0;a<e;a++){var g=
d[a];var k=g.attributes[b];var x=this._addFeatureIIf(k,g);this._incRefCount(k);t&&x!==g&&r[k]&&(x.setGeometry(g.geometry),x.setAttributes(g.attributes))}this._applyTimeFilter(!0)}});c("extend-esri")&&y.setObject("layers._SnapshotMode",B,u);return B})},"esri/layers/RenderMode":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","../sniff","../kernel"],function(B,y,c,u,q){var l=!!u("esri-pbf"),m=!!u("esri-featurelayer-pbf");B=B(null,{declaredClass:"esri.layers._RenderMode",
enablePBFQuery:l&&m,initialize:function(h){this.map=h;this._init=!0},startup:function(){this._started=!0},propertyChangeHandler:function(h){},destroy:function(){this._init=this._started=!1},drawFeature:function(h){},suspend:function(){},resume:function(){},refresh:function(){},hasAllFeatures:function(){return!0},hasUpdateError:function(){return!1},canFetchPBF:function(h){return!(!this.featureLayer._canFetchPBF()||!this.enablePBFQuery)},_incRefCount:function(h){(h=this._featureMap[h])&&h._count++},
_decRefCount:function(h){(h=this._featureMap[h])&&h._count--},_getFeature:function(h){return this._featureMap[h]},_addFeatureIIf:function(h,f){var d=this._featureMap,a=d[h],b=this.featureLayer;a||(d[h]=f,b._add(f),f._count=0);return a||f},_removeFeatureIIf:function(h){var f=this._featureMap[h],d=this.featureLayer;if(f){if(f._count)return;delete this._featureMap[h];d._remove(f)}return f},_registerFeature:function(h,f){var d=this._featureMap,a=d[h];a?(a.attributes=f.attributes,a.geometry=f.geometry):
(d[h]=f,f._count=0,f._layer=f._graphicsLayer=f._sourceLayer=this.featureLayer);return a||f},_unregisterFeature:function(h){var f=this._featureMap,d=f[h];d&&!d._count&&(delete f[h],d._graphicsLayer=null)},_clearIIf:function(){var h=this.featureLayer;var f=h.graphics,d=h._selectedFeatures,a=h.getSelectedFeatures().length,b=h.objectIdField;if(a)for(h=f.length-1;0<=h;h--){a=f[h];var e=a.attributes[b];e in d?a._count=1:(a._count=0,this._removeFeatureIIf(e))}else h.clear(),this._featureMap={}},_cancelPendingRequest:function(h){if(h)try{h.cancel()}catch(f){}},
_toggleVisibility:function(h){var f=this.featureLayer,d=f.graphics,a=h?"show":"hide",b,e=d.length;h=h&&f._ager;for(b=0;b<e;b++){var r=d[b];r[a]();h&&f._repaint(r)}},_applyTimeFilter:function(h){var f=this.featureLayer;if(f.timeInfo&&!f.suspended){h||f._fireUpdateStart();var d=f._trackManager;d&&d.clearTracks();var a=f.getTimeDefinition(),b=f._getOffsettedTE(f._mapTimeExtent);b?(b=f._getTimeOverlap(a,b))?(a=f._filterByTime(f.graphics,b.startTime,b.endTime),d&&d.addFeatures(a.match),c.forEach(a.match,
function(e){var r=e._shape;e.visible||(e.show(),(r=e._shape)&&r._moveToFront());f._ager&&r&&f._repaint(e)}),c.forEach(a.noMatch,function(e){e.visible&&e.hide()})):this._toggleVisibility(!1):(d&&d.addFeatures(f.graphics),this._toggleVisibility(!0));d&&(d.moveLatestToFront(),d.drawTracks());h||f._fireUpdateEnd()}}});u("extend-esri")&&y.setObject("layers._RenderMode",B,q);return B})},"esri/layers/support/ParallelSnapshot":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojo/Deferred ../../kernel".split(" "),
function(B,y,c,u,q,l){B=B(null,{declaredClass:"esri.layers.support.ParallelSnapshot",layer:null,mode:null,queryTask:null,batchSize:5,_queryInfo:null,_fetchDfd:null,_startPage:null,_lastPage:null,_pageSize:null,_maxPages:null,_requests:null,constructor:function(m){y.mixin(this,m);this._requests={}},destroy:function(){this.cancel()},fetch:function(){var m=new q;this.cancel(!0);this._queryInfo=this.mode._createQueryInfo();this._pageSize=this.mode._getPageSize(this._queryInfo.query);this._maxPages=Math.ceil(this._getFeatureCount()/
this._pageSize);this._fetchDfd=m;this._sendRequests();return m.promise},cancel:function(m){this._cancelPendingRequests(m);this._reset()},_reset:function(){this._startPage=this._lastPage=null;this._requests={}},_getFeatureCount:function(){return this.layer.mode===this.layer.constructor.MODE_AUTO&&0===this.layer.getLastExceedsLimitResult()?this.layer._getMaxFeaturesForAutoSnapshotMode():this.mode.maxFeatures},_sendRequests:function(m){var h=this._queryInfo.query,f=this.queryTask,d=this._requests;m=
null==m?1:m;var a=m+this.batchSize-1;a>this._maxPages&&(a=this._maxPages);if(!(m>a))for(this._startPage=m,this._lastPage=a;m<=a;m++)h.start=(m-1)*this._pageSize,h.num=this._pageSize,d[m]=f.execute(h,null,null,this._queryInfo.pbf?{format:"pbf"}:null),d[m].then(y.hitch(this,this._handleSuccess,m)).otherwise(y.hitch(this,this._handleError,m))},_evalNextBatch:function(m){m===this._lastPage&&this._sendRequests(this._lastPage+1)},_handleSuccess:function(m,h){h.exceededTransferLimit||this._cancelLaterRequests(m,
!0);var f=this.mode._checkMaxLimit(h.features);this._fetchDfd.progress({features:f.features,isError:!1});f.maxLimitReached?((m=f.featuresDiscarded||this._hasRejectedRequests())||(m=!!this._getResult(this._getLastSuccessfulRequest()).exceededTransferLimit),this._resolveFetch(m)):(h.exceededTransferLimit&&this._evalNextBatch(m),this._evalResolution())},_handleError:function(m,h){var f=this._requests;f&&f[m]&&(1===m?this._rejectFetch(h):(this._evalNextBatch(m),this._fetchDfd.progress({error:h,isError:!0}),
this._evalResolution()))},_evalResolution:function(){this._hasPendingRequests()||this._resolveFetch(this._hasRejectedRequests())},_resolveFetch:function(m){var h=this._hasRejectedRequests();this.cancel(!0);this._fetchDfd.resolve({hasPartialFeatures:m,hasUpdateError:h})},_rejectFetch:function(m){this.cancel(!0);this._fetchDfd.reject(m)},_getResult:function(m){return m&&m.dfd.results[0]},_hasPendingRequests:function(){return!!this._getPendingRequests().length},_getPendingRequests:function(){var m=this._requests,
h,f=[];for(h in m){var d=m[h];d.isFulfilled()||f.push({pageId:Number(h),dfd:d})}return f},_getLastSuccessfulRequest:function(){var m=this._getResolvedRequests(),h=-Infinity,f;m=c.filter(m,function(d){return!!this._getResult(d).features.length||1===d.pageId},this);c.forEach(m,function(d){d.pageId>h&&(h=d.pageId,f=d)});return f},_getResolvedRequests:function(){var m=this._requests,h,f=[];for(h in m){var d=m[h];d.isResolved()&&f.push({pageId:Number(h),dfd:d})}return f},_hasRejectedRequests:function(){var m=
this._getRejectedRequests(),h=this._getLastSuccessfulRequest(),f=this._getResult(h);f&&!f.exceededTransferLimit&&(m=c.filter(m,function(d){return d.pageId<=h.pageId}));return!!m.length},_getRejectedRequests:function(){var m=this._requests,h,f=[];for(h in m){var d=m[h];d.isRejected()&&f.push({pageId:Number(h),dfd:d})}return f},_cancelPendingRequests:function(m){this._cancelRequests(this._getPendingRequests(),m)},_cancelLaterRequests:function(m,h){var f=c.filter(this._getPendingRequests(),function(d){return d.pageId>
m});this._cancelRequests(f,h)},_cancelRequests:function(m,h){var f=this.mode,d=this._requests;c.forEach(m,function(a){h&&delete d[a.pageId];f._cancelPendingRequest(a.dfd)})}});u("extend-esri")&&y.setObject("layers.support.ParallelSnapshot",B,l);return B})},"esri/layers/OnDemandMode":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/has ../kernel ../geometry/Point ../tasks/query ./RenderMode ./GridLayout".split(" "),function(B,y,c,u,q,l,m,h,f,d){B=B([f],
{declaredClass:"esri.layers._OnDemandMode",constructor:function(a){this.featureLayer=a;this._featureMap={}},initialize:function(a){this.inherited(arguments);this._cellMap={};this._gridLayer=d.createFromFeatureLayer({layer:this.featureLayer,map:a})},startup:function(){if(!this._started||this._isSuspendedAtStartup)this.inherited(arguments),this._ioQueue=[],this._isSuspendedAtStartup=this.featureLayer.suspended,this.featureLayer.suspended||(this._zoomHandler(),this._enableConnectors())},propertyChangeHandler:function(a){this._init&&
(2>a?this._zoomHandler():console.log("FeatureLayer: layer in on-demand mode does not support time definitions. Layer id \x3d "+this.featureLayer.id+", Layer URL \x3d "+this.featureLayer.url))},destroy:function(){this._disableConnectors();this._processIOQueue(!0);this.inherited(arguments)},drawFeature:function(a){var b=a.geometry,e=[];if(b){e=this._gridLayer.getCellsInExtent("point"===b.type?{xmin:b.x,ymin:b.y,xmax:b.x,ymax:b.y}:b.getExtent(),!1).cells;b=this._cellMap;var r,t=a.attributes[this.featureLayer.objectIdField];
for(r=0;r<e.length;r++){var g=e[r];var k=g.latticeID;var x=g.row;var v=g.col;k?g=b[k]=b[k]||g:(b[x]=b[x]||{},g=b[x][v]=b[x][v]||g);g.features=g.features||[];g.features.push(a);this._addFeatureIIf(t,a);this._incRefCount(t)}}},suspend:function(){this._init&&this._disableConnectors()},resume:function(){this._init&&(this._enableConnectors(),this._zoomHandler())},refresh:function(){this._zoomHandler()},hasAllFeatures:function(){var a=!1,b=this._getCurrentCells(),e;for(e=0;e<b.length;e++)if(b[e].hasPartialFeatures){a=
!0;break}return!a},hasUpdateError:function(){var a=!1,b=this._getCurrentCells(),e;for(e=0;e<b.length;e++)if(b[e].hasUpdateError){a=!0;break}return a},canFetchPBF:function(a){return this.inherited(arguments)&&this.featureLayer._canFetchPBFForQuery(a)},_enableConnectors:function(){var a=this.map;this._zoomConnect=y.connect(a,"onZoomEnd",this,this._zoomHandler);this._panConnect=y.connect(a,"onPanEnd",this,this._panHandler);this._resizeConnect=y.connect(a,"onResize",this,this._panHandler)},_disableConnectors:function(){y.disconnect(this._zoomConnect);
y.disconnect(this._panConnect);y.disconnect(this._resizeConnect)},_zoomHandler:function(){this._processIOQueue(!0);var a=this.featureLayer,b=this.map;!a.suspended&&a.isQueryable()&&(a._fireUpdateStart(),this._clearIIf(),(a=a._trackManager)&&a.clearTracks(),this._cellMap={},this._gridLayer.setResolution(b.extent),this._sendRequest())},_panHandler:function(a){if(this.featureLayer.isQueryable()){this.featureLayer._fireUpdateStart();var b=this.featureLayer._resized;a=b?a:null;b&&this._gridLayer.setMapState(a,
this.map.width,this.map.height);this._sendRequest(a)}},_sendRequest:function(a){this._exceeds=!1;var b=this.featureLayer,e=this.map;a=a||e.extent;e=this._gridLayer.getCellsInExtent(a,b.latticeTiling).cells;if(!b.isEditable()){var r=this._cellMap;e=u.filter(e,function(x){if(x.lattice){if(r[x.latticeID])return!1}else if(r[x.row]&&r[x.row][x.col])return!1;return!0})}this._pending=this._pending||0;var t;for(t=0;t<e.length;t++){var g=e[t],k=this._createQueryInfo(g);this._pending++;this._ioQueue.push(b._task.execute(k.query,
c.hitch(this,this._drawFeatures,g),c.hitch(this,this._queryErrorHandler,g),k.pbf?{format:"pbf"}:null))}this._removeOldCells(a);this._endCheck()},_drawFeatures:function(a,b){this.featureLayer._isImageService&&10.7>this.featureLayer.version&&void 0===b.exceededTransferLimit&&(b.exceededTransferLimit=b.features.length===this.featureLayer.maxRecordCount);a.hasPartialFeatures=!!b.exceededTransferLimit;a.hasUpdateError=!1;this._exceeds=this._exceeds||b.exceededTransferLimit;this._finalizeIO();var e=this.featureLayer,
r=this.map.extent,t=a.extent,g=a.row,k=a.col,x=e.objectIdField;b=b.features;var v=this._gridLayer,A=this._cellMap,n=a.latticeID;A=n?A[n]:A[g]&&A[g][k];if(a.resolution==v.resolution&&(n?n===v.getLatticeID(r):v.intersects(t,r)))if(A)e._sortFeatures(b),this._updateCell(A,b);else for(e._sortFeatures(b),a.features=b,this._addCellToCellMap(a),e=b.length,a=0;a<e;a++)r=b[a],t=r.attributes[x],this._addFeatureIIf(t,r),this._incRefCount(t);else A&&this._removeCell(g,k,n);this._endCheck()},_queryErrorHandler:function(a,
b){this._finalizeIO();a.hasPartialFeatures=!0;a.hasUpdateError=!0;this._addCellToCellMap(a);this.featureLayer._errorHandler(b);this._endCheck(b)},_finalizeIO:function(){this._pending--},_endCheck:function(a){if(0===this._pending){this._processIOQueue();var b=this.featureLayer,e=b._trackManager;e&&(e.clearTracks(),e.addFeatures(b.graphics),b._ager&&u.forEach(b.graphics,function(r){r._shape&&b._repaint(r)}),e.moveLatestToFront(),e.drawTracks());this.featureLayer._fireUpdateEnd(!!a&&Error("FeatureLayer: "+
(a.message||"an error occurred while updating the layer.")),this._exceeds?{queryLimitExceeded:!0}:null);if(this._exceeds)b.onQueryLimitExceeded()}},_processIOQueue:function(a){this._ioQueue=u.filter(this._ioQueue,function(b){return-1<b.fired?!1:!0});a&&u.forEach(this._ioQueue,this._cancelPendingRequest)},_createQueryInfo:function(a){var b=this.featureLayer,e=new h;e.outFields=b.getOutFields();e.where=b.getDefinitionExpression();e.returnGeometry=!0;e.geometry=a.extent||a.lattice;b.latticeTiling&&a.extent&&
(e.spatialRelationship=h.SPATIAL_REL_CONTAINS);e.timeExtent=b._getOffsettedTE(b._mapTimeExtent);e.maxAllowableOffset=b._maxOffset;e.quantizationParameters=b._quantizationParameters;e.orderByFields=b.supportsAdvancedQueries?b.getOrderByFields():null;e.multipatchOption=b.multipatchOption;b._ts&&(e._ts=(new Date).getTime());(a=b.advancedQueryCapabilities)&&a.supportsQueryWithResultType&&(e.resultType="tile");a=this.canFetchPBF(e);b._enableEditModeQuantization(e,a);return{query:e,pbf:a}},_getCurrentCells:function(a){var b=
[];a=a||this._cellMap;for(var e in a)if(a.hasOwnProperty(e)){var r=a[e];r&&(r.hasOwnProperty("row")||r.hasOwnProperty("latticeID")?b.push(r):"object"===typeof r&&b.push.apply(b,this._getCurrentCells(r)))}return b},_addCellToCellMap:function(a){var b=this._cellMap;if(a.latticeID)b[a.latticeID]=a;else{var e=a.row,r=a.col;b[e]=b[e]||{};b[e][r]=a}},_removeOldCells:function(a){var b=this._cellMap,e=this._gridLayer,r,t;for(r in b)if(b[r]){var g=b[r],k=g.latticeID,x=0,v=0;if(k)x++,k!==e.getLatticeID(a)&&
(this._removeCell(null,null,k),v++);else for(t in g)g[t]&&(x++,e.intersects(g[t].extent,a)||(this._removeCell(r,t),v++));v===x&&delete b[r]}},_updateCell:function(a,b){var e=this.featureLayer,r=e.objectIdField;e=e._selectedFeatures;var t,g=b.length;a.features=a.features||[];for(t=0;t<g;t++){var k=b[t],x=k.attributes[r],v=this._addFeatureIIf(x,k);v===k?(this._incRefCount(x),a.features.push(v)):x in e||(v.setGeometry(k.geometry),v.setAttributes(k.attributes))}},_removeCell:function(a,b,e){var r=this._cellMap,
t=this.featureLayer,g=t.objectIdField,k=e?r[e]:r[a]&&r[a][b];if(k&&(e?delete r[e]:delete r[a][b],a=k.features))for(b=0;b<a.length;b++)e=a[b].attributes[g],this._decRefCount(e),e in t._selectedFeatures||this._removeFeatureIIf(e)}});q("extend-esri")&&c.setObject("layers._OnDemandMode",B,l);return B})},"esri/layers/GridLayout":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../geometry/Point ../geometry/Extent ../geometry/Polyline ../geometry/Polygon ../geometry/normalizeUtils ../srUtils".split(" "),
function(B,y,c,u,q,l,m,h,f,d,a){var b=B(null,{declaredClass:"esri.layers._GridLayout",constructor:function(e,r,t,g){this.origin=e;this.cellWidth=r.width;this.cellHeight=r.height;this.mapWidth=t.width;this.mapHeight=t.height;this.srInfo=g},setResolution:function(e){this.resolution=(e.xmax-e.xmin)/this.mapWidth;this.srInfo&&(e=Math.round(Math.round(2*this.srInfo.valid[1]/this.resolution)/this.cellWidth),this._frameStats=[e,0,e-1])},setMapState:function(e,r,t){this.mapWidth=r;this.mapHeight=t;this.setResolution(e)},
getCellCoordinates:function(e){var r=this.resolution,t=this.origin;return{row:Math.floor((t.y-e.y)/(this.cellHeight*r)),col:Math.floor((e.x-t.x)/(this.cellWidth*r))}},normalize:function(e){var r=this._frameStats;if(r){var t=r[0],g=r[1];r=r[2];e<g?(e%=t,e=e<g?e+t:e):e>r&&(e%=t)}return e},intersects:function(e,r){var t=this.srInfo;return t?c.some(r._getParts(t),function(g){return e.intersects(g.extent)}):e.intersects(r)},getCellExtent:function(e,r){var t=this.resolution,g=this.origin,k=this.cellWidth,
x=this.cellHeight;return new m(r*k*t+g.x,g.y-(e+1)*x*t,(r+1)*k*t+g.x,g.y-e*x*t,a.createSpatialReference(g.spatialReference.toJson()))},getLatticeID:function(e){var r=this.getCellCoordinates({x:e.xmin,y:e.ymax}),t=this.getCellCoordinates({x:e.xmax,y:e.ymin});e=r.row;var g=t.row;r=this.normalize(r.col);t=this.normalize(t.col);return e+"_"+g+"_"+r+"_"+t},sorter:function(e,r){return e<r?-1:1},getCellsInExtent:function(e,r){var t=this.getCellCoordinates({x:e.xmin,y:e.ymax}),g=this.getCellCoordinates({x:e.xmax,
y:e.ymin}),k=t.row,x=g.row;t=t.col;g=g.col;var v=[],A,n,w=[],p=[],D=[];for(A=k;A<=x;A++)for(n=t;n<=g;n++){var C=this.normalize(n);e=this.getCellExtent(A,C);c.some(v,function(E){return E.row===A&&E.col===C})||v.push({row:A,col:C,extent:e,resolution:this.resolution});r&&(w.push(e.xmin,e.xmax),p.push(e.ymin,e.ymax))}t=this.normalize(t);g=this.normalize(g);w.sort(this.sorter);p.sort(this.sorter);r=w.length;for(A=r-1;0<=A;A--)A<r-1&&w[A]===w[A+1]&&w.splice(A,1);r=p.length;for(A=r-1;0<=A;A--)A<r-1&&p[A]===
p[A+1]&&p.splice(A,1);if(w.length&&p.length){e=w[0];n=w[w.length-1];var G=p[0];var z=p[p.length-1];r=w.length;for(A=0;A<r;A++)D.push([[w[A],z],[w[A],G]]);r=p.length;for(A=0;A<r;A++)D.push([[e,p[A]],[n,p[A]]]);w=new h({paths:D,spatialReference:this.origin.spatialReference.toJson()});v.push({latticeID:k+"_"+x+"_"+t+"_"+g,lattice:w,resolution:this.resolution})}return{minRow:k,maxRow:x,minCol:t,maxCol:g,topRow:k,bottomRow:x,leftCol:t,rightCol:g,cells:v}},_findCell:function(e,r,t){var g;c.some(e,function(k){k.row===
r&&k.col===t&&(g=k);return!!g});return g},getExtentOfIntersectingCells:function(e){var r=this.getCellsInExtent(e),t=r&&r.cells;if(t&&t.length){var g=r.topRow,k=r.leftCol,x=0;c.forEach(t,function(w){w.row===g&&x++});var v=this._findCell(t,g,k).extent,A=this.srInfo;if(!A||x!==this._frameStats[0]&&k!==r.rightCol){var n=v.xmin;A=n+x*v.getWidth()}else n=A.valid[0],A=A.valid[1];r=this._findCell(t,r.bottomRow,k).extent.ymin;(e=(new m(n,r,A,v.ymax,e.spatialReference))._normalize(!1,!1))&&e.rings&&(e=new f(e),
e=d.getDenormalizedExtent(e));return e}}});b.createFromFeatureLayer=function(e){var r=e.layer;e=r.getMap()||e.map;var t=r._srInfo;(r=e&&e.loaded?new b(new l(t?t.valid[0]:e.extent.xmin,t?t.valid[1]:e.extent.ymax,e.spatialReference),{width:r._tileWidth,height:r._tileHeight},{width:e.width,height:e.height},t):null)&&r.setResolution(e.extent);return r};u("extend-esri")&&y.setObject("layers._GridLayout",b,q);return b})},"esri/layers/SelectionMode":function(){define(["dojo/_base/declare","dojo/_base/lang",
"dojo/has","../kernel","./RenderMode"],function(B,y,c,u,q){B=B([q],{declaredClass:"esri.layers._SelectionMode",constructor:function(l){this.featureLayer=l;this._featureMap={}},propertyChangeHandler:function(l){this._init&&0===l&&this._applyTimeFilter()},resume:function(){this.propertyChangeHandler(0)},hasAllFeatures:function(){return!this.featureLayer._hasPartialSelectedFeatures},hasUpdateError:function(){return this.featureLayer._hasSelectionError}});c("extend-esri")&&y.setObject("layers._SelectionMode",
B,u);return B})},"esri/layers/StreamMode":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred dojo/has ../kernel ../SpatialReference ../tasks/query ../tasks/QueryTask ../geometry/jsonUtils ./RenderMode".split(" "),function(B,y,c,u,q,l,m,h,f,d,a){B=B([a],{declaredClass:"esri.layers._StreamMode",constructor:function(b,e){this.featureLayer=b;this._featureMap={};this._setRefreshRate();this._drawBuffer={adds:[],updates:[]};this._timeoutId=null;this._flushDrawBuffer=y.hitch(this,
this._flushDrawBuffer);this._featuresByTime={};this._lastEndTimeCheck=null;this._maxFeatureAge=0;b.purgeOptions&&b.purgeOptions.age&&"number"===typeof b.purgeOptions.age&&(this._maxFeatureAge=1E3*Math.ceil(60*b.purgeOptions.age));this._drawFeatures=y.hitch(this,this._drawFeatures);this._queryErrorHandler=y.hitch(this,this._queryErrorHandler)},startup:function(){this._started||this.inherited(arguments)},propertyChangeHandler:function(b){this._init&&(0===b?this._applyTimeFilter():3===b?this._redrawAllTracks():
console.debug("StreamLayer: Stream Layer only supports changing map time or maximumTrackPoints. Layer id \x3d "+this.featureLayer.id))},destroy:function(){this.inherited(arguments);clearTimeout(this._timeoutId);this._featuresByTime=this._drawBuffer=this._featureMap=null},drawFeature:function(b){var e=this.featureLayer,r=e.objectIdField;this._timeoutId||(this._timeoutId=setTimeout(this._flushDrawBuffer,this._refreshRate));e._joinField&&this._getFeature(b.attributes[r])?this._drawBuffer.updates.push({oid:b.attributes[r],
updates:b}):this._drawBuffer.adds.push(b)},resume:function(){this.propertyChangeHandler(0)},refresh:function(){this._pendingRequest&&this._cancelPendingRequest(this._pendingRequest);var b=this.featureLayer;b&&(b._relatedUrl||b._keepLatestUrl?(b._fireUpdateStart(),b._refreshing=!0,b.disconnect(),b.clear(),b._relatedQueried=!1,b._keepLatestQueried=!1,b.connect()):(b._fireUpdateStart(),b.clear(),b._fireUpdateEnd()))},_drawFeatures:function(b,e){var r=this.featureLayer;r._create(b.features||[]);r._fireUpdateEnd(null,
e)},_applyTimeFilter:function(b){this.inherited(arguments);this._redrawAllTracks()},_removeFeatures:function(b){var e=this.featureLayer,r=e.objectIdField;b&&c.forEach(b,function(t){t=t.attributes[r];e._unSelectFeatureIIf(t,this);this._decRefCount(t);this._removeFeatureIIf(t)},this)},_addFeatures:function(b){var e=this.featureLayer,r=e._endTimeField,t=e._startTimeField,g,k=[],x=[],v=[];var A=e._trackManager;var n=e.objectIdField;if(A)for(g in b=A.addFeatures(b),b)b.hasOwnProperty(g)&&(k.push(g),b[g].adds&&
(x=x.concat(b[g].adds)),b[g].deletes&&(v=v.concat(b[g].deletes)));else x=b;c.forEach(x,function(w){var p=w.attributes[n];var D=r&&w.attributes[r];!D&&this._maxFeatureAge&&(D=t&&w.attributes[t]?w.attributes[t]+this._maxFeatureAge:Date.now()+this._maxFeatureAge);D&&(D=1E3*Math.ceil(D/1E3),this._featuresByTime[D]?this._featuresByTime[D].push(p):this._featuresByTime[D]=[p]);this._addFeatureIIf(p,w);this._incRefCount(p)},this);v.length&&this._removeFeatures(v);A&&A.refreshTracks(k)},_updateFeatures:function(b){var e=
this.featureLayer,r=[];var t=e._trackManager;var g=e._trackIdField;c.forEach(b,function(k){var x=k.updates;k=this._getFeature(k.oid);var v;if(k){x.geometry&&k.setGeometry(x.geometry);x=x.attributes||{};for(v in x)x.hasOwnProperty(v)&&(k.attributes[v]=x[v]);k.setAttributes(k.attributes);k.visible=this._checkFeatureTimeIntersects(k);t&&k.attributes[g]?r.push(k.attributes[g]):e._repaint(k,null,!0)}},this);r.length&&t.refreshTracks(r)},_redrawAllTracks:function(){var b=this.featureLayer._trackManager,
e;b&&(e=b.trimTracks())&&0<e.length&&(this._removeFeatures(e),b.refreshTracks())},_flushDrawBuffer:function(){clearTimeout(this._timeoutId);var b=this._drawBuffer,e=b.adds.splice(0,b.adds.length),r=b.updates.splice(0,b.updates.length);b=this.featureLayer;if(!b)return!1;b.updating||b._fireUpdateStart();this._addFeatures(e);this._updateFeatures(r);(e=this._getExpiredFeatures())&&e.length&&(this._removeFeatures(e),b._trackManager&&b._trackManager.removeFeatures(e));b._purge();b._fireUpdateEnd();this._timeoutId=
null},_clearDrawBuffer:function(){var b=this._timeoutId,e=this._drawBuffer,r=e.adds;e=e.updates;b&&clearTimeout(b);r.splice(0,r.length);e.splice(0,e.length);this._timeoutId=null},_clearTimeBin:function(){this._featuresByTime={};this._lastEndTimeCheck=1E3*Math.ceil(Date.now()/1E3)},_clearFeatureMap:function(){this._featureMap={}},_setRefreshRate:function(b){b=b||0===b?b:200;0>b&&(b=200);this._refreshRate=b},_checkFeatureTimeIntersects:function(b){var e=this.featureLayer,r=e.getMap();return(r=r?r.timeExtent:
null)&&e.timeInfo&&(e.timeInfo.startTimeField||e.timeInfo.endTimeField)?0<e._filterByTime([b],r.startTime,r.endTime).match.length:!0},_fetchArchive:function(b){var e=new u,r=this.featureLayer;this._pendingRequest&&this._cancelPendingRequest(this._pendingRequest);r._fireUpdateStart();if(b&&this.map){b=new f(b);var t=new h;var g=this.map;var k=r.getFilter()||{};var x=k.where||"1\x3d1";var v=k.geometry?d.fromJson(k.geometry):null;k=k.outFields?k.outFields.split(","):["*"];t.geometry=v;t.where=x;t.outFields=
k;t.returnGeometry=!0;t.outSpatialReference=new m(g.spatialReference.toJson());this._pendingRequest=b.execute(t).then(function(A){this._pendingRequest=null;var n=this._fixFieldNameCasing(r,A);A.features=n;this._drawFeatures(A);r._fireUpdateEnd();e.resolve()}.bind(this)).otherwise(function(A){this._pendingRequest=null;r._errorHandler(A);r._fireUpdateEnd(A);e.reject(A)}.bind(this))}else e.resolve();return e.promise},_queryErrorHandler:function(b){var e=this.featureLayer;e._errorHandler(b);e._fireUpdateEnd(b)},
_fixFieldNameCasing:function(b,e){var r=e.features||[],t=e.fields;if(!t||!r.length)return r;b=this._mapFieldNameDifferences(b.fields,t);t=[];for(var g,k=0,x=e.features.length;k<x;k++)e=r[k],g=this._swizzleResponseAttributes(e.attributes,b),t.push({geometry:e.geometry,attributes:g});return t},_mapFieldNameDifferences:function(b,e){var r=[],t={},g;var k=0;for(g=e.length;k<g;k++)r.push(e[k].name);k=0;for(g=b.length;k<g;k++){e=b[k].name;var x=this._checkForStreamFieldName(e,r);x&&(t[x]=e)}return t},_checkForStreamFieldName:function(b,
e){b=b.toLowerCase();for(var r,t=0,g=e.length;t<g;t++)if(e[t].toLowerCase()===b){r=e[t];break}return r},_swizzleResponseAttributes:function(b,e){var r={},t;for(t in b)if(b.hasOwnProperty(t)){var g=b[t];e.hasOwnProperty(t)?r[e[t]]=g:r[t]=g}return r},_getExpiredFeatures:function(){var b,e,r=[],t=[];if(!this.featureLayer._endTimeField&&!this._maxFeatureAge)return t;var g=1E3*Math.floor(this._lastEndTimeCheck/1E3);this._lastEndTimeCheck=b=1E3*Math.ceil(Date.now()/1E3);if(g&&g!==b)for(e=this._featuresByTime;g<=
b;g+=1E3)e[g]&&(r=r.concat(e[g]),delete e[g]);c.forEach(r,function(k){(k=this._getFeature(k))&&t.push(k)},this);return t}});q("extend-esri")&&y.setObject("layers._StreamMode",B,l);return B})},"esri/layers/TrackManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojo/dom-construct dojox/gfx ../kernel ../graphic ../geometry/Polyline ./GraphicsLayer".split(" "),function(B,y,c,u,q,l,m,h,f,d){var a=-1!==l.renderer.toLowerCase().indexOf("canvas");B=B(null,{declaredClass:"esri.layers._TrackManager",
constructor:function(b){this.layer=b;this.trackMap={};this.trackLineMap={}},initialize:function(b){this.map=b;b=this.layer;this.createTracklineContainer()&&(this._handles=[b.on("visibility-change",y.hitch(this,function(e){this.container.setVisibility(e.visible);this.container.evaluateSuspension()})),b.on("scale-range-change",y.hitch(this,function(){this.container.setScaleRange(this.layer.minScale,this.layer.maxScale)}))])},createTracklineContainer:function(){var b=this.layer;if("esriGeometryPoint"!==
b.geometryType)return null;var e=this.map,r=b._getRenderer();r=r&&r.trackRenderer;var t=this.container=new d._GraphicsLayer({id:b.id+"_tracks",_child:!0,visible:b.visible,minScale:b.minScale,maxScale:b.maxScale});t.loaded=!0;t.onLoad(t);t._setMap(e,b._div);a||(e=t._div.getNode(),b=b._div.getNode(),e&&b&&q.place(e,b,"first"));t.setRenderer(r);return t},addFeatures:function(b){var e=this.trackMap,r=this.layer,t=r._trackIdField,g=[];c.forEach(b,function(A){var n=A.attributes[t];(e[n]=e[n]||[]).push(A);
-1===c.indexOf(g,n)&&g.push(n)});var k=r._startTimeField,x=r.objectIdField,v=function(A,n){var w=A.attributes[k],p=n.attributes[k];return w===p?A.attributes[x]<n.attributes[x]?-1:1:w<p?-1:1};c.forEach(g,function(A){e[A].sort(v)})},trimTracks:function(b){function e(x){for(x=r[x]||[];x.length>t;)g.push(x.shift())}var r=this.trackMap,t=this.layer.maximumTrackPoints||0,g=[],k;if(!t)return g;if(b)c.forEach(b,function(x){e(x)});else for(k in r)r.hasOwnProperty(k)&&e(k);return g},drawTracks:function(b){function e(A){var n=
k[A],w,p;var D=r.trackLineMap[A];t.remove(D);delete r.trackLineMap[A];D=null;if(!n||2>n.length)return!1;D=[];for(w=n.length-1;0<=w;w--)(p=n[w].geometry)&&D.push([p.x,p.y]);n={};n[v]=A;1<D.length&&(D=new h(new f({paths:[D],spatialReference:x}),null,n),t.add(D),r.trackLineMap[A]=D)}var r=this,t=this.container,g;if(t){var k=this.trackMap;var x=this.map.spatialReference;var v=this.layer._trackIdField;if(b)c.forEach(b,function(A){e(A)});else for(g in k)k.hasOwnProperty(g)&&e(g)}},refreshTracks:function(b){function e(v){var A;
r.drawTracks([v]);if(k&&k.latestObservationRenderer){v=t[v]||[];var n=v.length;for(A=0;A<n;A++)g._repaint(v[A],null,!0)}}var r=this,t=this.trackMap,g=this.layer,k=g._getRenderer(),x;if(b)c.forEach(b,function(v){e(v)});else for(x in t)t.hasOwnProperty(x)&&e(x);this.moveLatestToFront()},moveLatestToFront:function(b){c.forEach(this.getLatestObservations(b),function(e){var r=e._shape;r&&r._moveToFront();this._repaint(e,null,!0)},this.layer)},getLatestObservations:function(b){function e(x){x=g[x];return x[x.length-
1]}var r=[],t=this.layer._getRenderer(),g=this.trackMap,k;if(!t.latestObservationRenderer)return r;if(b)c.forEach(b,function(x){r.push(e(x))});else for(k in g)g.hasOwnProperty(k)&&r.push(e(k));return r},clearTracks:function(b){var e=this.getLatestObservations(b),r=this.container,t=this.trackMap,g;if(b)c.forEach(b,function(x){delete this.trackMap[x];r&&(k=this.trackLineMap[x],r.remove(k),delete this.trackLineMap[x])},this);else{if(r)for(g in t){var k=this.trackLineMap[g];r.remove(k)}this.trackMap=
{};this.trackLineMap={}}c.forEach(e,function(x){this._repaint(x,null,!0)},this.layer)},isLatestObservation:function(b){var e=this.trackMap[b.attributes[this.layer._trackIdField]];return e?e[e.length-1]===b:!1},destroy:function(){c.forEach(this._handles,function(e){e.remove()});var b=this.container;b&&(b.clear(),b._unsetMap(this.map,this.layer._div));this.map=this.layer=this.trackMap=this.container=null}});u("extend-esri")&&y.setObject("layers._TrackManager",B,m);return B})},"esri/layers/HeatmapManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/_base/array require ../kernel ../sniff ../geometry/Point ../geometry/webMercatorUtils ./MapImage ../renderers/HeatmapRenderer ../tasks/query dojo/_base/fx".split(" "),
function(B,y,c,u,q,l,m,h,f,d,a,b,e){function r(){}function t(g){var k=g.layer;return{geometry:g.geometry,attributes:g.attributes,getLayer:function(){return k}}}B=B(null,{declaredClass:"esri.layers.HeatmapManager",heatmapRenderer:null,sourceLayer:null,imageLayer:null,useTiles:!0,useWorker:!1,map:null,constructor:function(g){this.sourceLayer=g;this._hndls=[]},initialize:function(g){this.map=g;var k=this.sourceLayer,x=k.renderer;k.setDrawMode(!1);this.imageLayer=g._getMapImageLyr();var v=this;this.heatmapRenderer=
x instanceof a?x:(x.getRendererInfoByZoom(g.getZoom())||x.getRendererInfoByScale(g.getScale())).renderer;this.redraw=this.redraw.bind(this);this.recalculateHeatmap=this.recalculateHeatmap.bind(this);this._removeRenderer=this._removeRenderer.bind(this);this._handleRendererChange=this._handleRendererChange.bind(this);this._rendererChangeHandle=this.sourceLayer.on("renderer-change",this._handleRendererChange);this._handleOpacityChange=this._handleOpacityChange.bind(this);this._reprojectFeature=this._reprojectFeature.bind(this);
q(["../workers/heatmapCalculator"],function(A){v._calculator=new A(y.mixin({width:v.map.width,height:v.map.height},v._getOptions()));v._setupRenderer();v.heatmapRenderer.getStats=A.calculateStats;v.heatmapRenderer.getHistogramData=A.getHistogramData})},destroy:function(){this._removeHandlers();this._rendererChangeHandle&&this._rendererChangeHandle.remove();this._rendererChangeHandle=this.sourceLayer=this.imageLayer=this.map=this.heatmapRenderer=this._hndls=null},_handleRendererChange:function(g){var k=
g.renderer,x=k instanceof a;this.heatmapRenderer?x?this.heatmapRenderer=k:this._removeRenderer(g):x&&(this.heatmapRenderer=k,this.sourceLayer&&this.map&&this._setupRenderer())},_handleOpacityChange:function(g){g=g.opacity;var k=this._getImageBySourceId(this.sourceLayer.id);k&&k.setOpacity(g)},_setupRenderer:function(){var g=this._hndls,k=this.sourceLayer,x=this.map,v=this;k._originalDraw=k._draw;k._draw=r;k._div.clear();clearTimeout(this._resetTimer);this._resetTimer=setTimeout(this._resetGraphics.bind(this),
250);g.push(k.on("update-end",this.redraw));g.push(k.on("suspend",function(A){(A=v._getImageBySourceId(v.sourceLayer.id))&&A.hide()}));g.push(k.on("resume",function(A){(A=v._getImageBySourceId(v.sourceLayer.id))&&A.show()}));g.push(c.after(k,"redraw",this.redraw));g.push(x.on("layer-remove",function(A){A.layer==k&&((A=v._getImageBySourceId(v.sourceLayer.id))&&v.imageLayer.removeImage(A),v._removeRenderer({target:k}))}));k._collection&&g.push(k.on("graphic-add",function(A){v._reprojectFeature(A.graphic);
v.redraw()}));1!==k.mode&&(g.push(x.on("resize, pan-end",this.redraw)),g.push(x.on("zoom-end",this.redraw)));g.push(k.on("opacity-change",this._handleOpacityChange));this.imageLayer.suspended&&this.imageLayer.resume();k.graphics&&k.graphics.length&&(k.graphics[0].geometry&&!x.spatialReference.equals(k.graphics[0].geometry.spatialReference)&&u.forEach(k.graphics,function(A){this._reprojectFeature(A)}.bind(this)),this.redraw())},redraw:function(){if(!this._drawTimer){var g=this;this._drawTimer=setTimeout(function(){clearTimeout(g._drawTimer);
g._drawTimer=null;g.sourceLayer._getRenderer().isInstanceOf(a)&&g.recalculateHeatmap()},16)}},_removeRenderer:function(g){var k=g.target;k._draw=k._originalDraw;delete k._originalDraw;k.setDrawMode(!0);this._removeHandlers();this._hndls=[];var x=this._getImageBySourceId(this.sourceLayer.id);x&&this.imageLayer.removeImage(x);clearTimeout(this._drawTimer);clearTimeout(this._resetTimer);this._drawTimer=this._resetTimer=null;k.renderer!=g.renderer&&k.renderer.getRendererInfo?this.heatmapRenderer=null:
(this.destroy(),k.renderer&&k.renderer.getRendererInfo&&k.redraw())},recalculateHeatmap:function(){this._calculator?this._doMainCalculation():this._calculatorClient&&this._doWorkerCalculation()},_reprojectFeature:function(g){if(g&&g.geometry){var k=g.geometry,x=this.map.spatialReference;x.equals(k.spatialReference)||(k=f.project(k,x),null==k?console.log("Unable to reproject features to map's spatial reference. Please convert feature geometry before adding to layer"):g.geometry=k)}},_doWorkerCalculation:function(){},
_doMainCalculation:function(){var g=this.sourceLayer,k=this.map,x=this.heatmapRenderer,v=this.map.extent,A=this.map.width,n=this.map.height,w=this._calculator,p=this,D=function(G){G=p._getScreenPoints(G.features,k,g);G=w.calculateImageData(y.mixin({screenPoints:G,mapinfo:{extent:[v.xmin,v.ymin,v.xmax,v.ymax],resolution:k.getResolution()},width:A,height:n},p._getOptions()));G=x.getSymbol(t({geometry:k.extent,attributes:{size:[A,n],imageData:G},layer:g}));G=new d({extent:k.extent,href:G.url,opacity:0,
sourceId:g.id});p._swapMapImages(G,p._getImageBySourceId(g.id));g.suspended&&G.hide()},C={geometry:k.extent,timeExtent:g.useMapTime?k.timeExtent:void 0,spatialRelationship:b.SPATIAL_REL_INTERSECTS};null!=g._canDoClientSideQuery(C)?g.queryFeatures(C,D):D({features:g.graphics})},_getScreenPoints:function(g,k,x){var v=[],A=g.length,n=0,w=0,p=new h(k.extent.xmin,k.extent.ymax,k.spatialReference),D=k.toScreen(p),C=D.x;D=D.y;var G=k.getResolution(),z;for((w=k.extent.getCacheValue("_parts"))&&(z=u.map(w,
function(H){return x._intersects(k,H.extent)[0]}));A--;)if(w=g[A],w.geometry&&w.visible){var E={x:Math.ceil((w.geometry.x-p.x)/G+C),y:Math.floor((p.y-w.geometry.y)/G-D),attributes:w.attributes};z&&(w=1<z.length&&E.x<-z[0]?z[1]:z[0],E.x+=w);v[n++]=E}return v},_getImageBySourceId:function(g){var k=this.imageLayer.getImages();k=u.filter(k,function(x){return x.sourceId==g});if(k.length)return k[k.length-1]},_swapMapImages:function(g,k){function x(){v.removeImage(k)}var v=this.imageLayer,A=this.sourceLayer.opacity;
v.addImage(g);e.anim(g._node,{opacity:A},null,null,function(){g.opacity=A});null!=k&&e.anim(k._node,{opacity:0},null,null,x)},_removeHandlers:function(){if(null!=this._hndls)for(var g=this._hndls.length;g--;)this._hndls[g].remove()},_getOptions:function(){var g=this.heatmapRenderer;return{blurRadius:g.blurRadius,gradient:g.gradient,maxPixelIntensity:g.maxPixelIntensity,minPixelIntensity:g.minPixelIntensity,field:g.field,fieldOffset:g.fieldOffset}},_resetGraphics:function(){clearTimeout(this._resetTimer);
this._resetTimer=null;for(var g=this.sourceLayer.graphics,k=g.length,x;k--;)x=g[k],x._shape=x._offsets=void 0}});m("extend-esri")&&y.setObject("layers.HeatmapManager",B,l);return B})},"esri/layers/clustering/ClusterManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../../kernel ../../Evented ../../graphic ../../lang ../../Color ../../graphicsUtils ../../dijit/PopupTemplate ../../dijit/Legend/utils ../../renderers/ClassBreaksRenderer ../../symbols/SimpleMarkerSymbol ../support/attributeUtils ../GraphicsLayer ../Field ./GeohashAggregation ./statUtils dojo/i18n!../../nls/jsapi".split(" "),
function(B,y,c,u,q,l,m,h,f,d,a,b,e,r,t,g,k,x,v,A){var n=A.layers.clusters,w=A.widgets.popup,p=n.numFeatures,D=Math.pow(2,53)-1;B=B(l,{declaredClass:"esri.layers.clustering.ClusterManager",layer:null,aggregationInfo:null,container:null,defaults:{clusterRadius:80,markerSymbol:{color:[77,77,77,255],size:6,angle:0,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSCircle",outline:{color:[255,255,255,255],width:.75,type:"esriSLS",style:"esriSLSSolid"}}},_initialized:!1,_map:null,_eventHandles:null,_clusterRadius:null,
_renderer:null,_statisticInfos:null,_fields:null,_infoTemplate:null,_clusterGenerator:null,_singleGraphics:null,constructor:function(C){this._eventHandles=[];this.layer=C.layer;this.setAggregationInfo(C.aggregationInfo)},initialize:function(C){this._initialized=!0;this._map=C;this._removeFromPopup(this.layer);this.container=this._createContainer();this._clusterGenerator=this._createClusterGenerator();this._initClusterGenerator();this._createLayerEventListeners();this._createMapEventListeners();this._createPopupEventListeners()},
destroy:function(C){this._clearSingleGraphics();this._removeClusterBoundary();this._destroyEventListeners();this._removeFromPopup(this.container);this._removeFromPopup(this.layer);this._resetClusterNav();this._destroyClusterGenerator(C);this._destroyContainer();this.layer=this.aggregationInfo=this._map=null},setAggregationInfo:function(C){this.aggregationInfo=C?y.mixin({},C):null;this._applyAggregationInfo()},getClusterRenderer:function(){return this._renderer},getClusterFields:function(){return this._fields||
[]},getFeaturesInCluster:function(C){C=C&&C.getAggregationInfo();return this._clusterGenerator?this._clusterGenerator.getFeaturesInCluster(C):[]},getAggregateGraphics:function(){return this.container?this.container.graphics.slice(0):[]},getSingleGraphics:function(){return this._singleGraphics?this._singleGraphics.slice(0):[]},redraw:function(){this.container&&this.container.redraw()},isClusteringEnabled:function(){return!(!this._clusterGenerator||!this._clusterGenerator.clustersEnabled)},isClusteringActive:function(){return!!(this._clusterGenerator&&
0<this._clusterGenerator.getNumFeatures())},toggleFeatureVisibility:function(C){this._clusterGenerator&&this._clusterGenerator.toggleFeatureVisibility(C)},_createContainer:function(){var C=this.layer,G=new g._GraphicsLayer({_child:!0,id:C.id+"_clusters",visible:C.visible,minScale:C.minScale,maxScale:C.maxScale,infoTemplate:this._infoTemplate});G.fields=this._fields;G.setRenderer(this._renderer);G.loaded=!0;G.onLoad(G);G._setMap(this._map,C._div);return C._childLayer=G},_destroyContainer:function(){var C=
this.container;C&&(C.clear(),C._unsetMap(this._map,this.layer._div),this.layer._childLayer=null);this.container=null},_createClusterGenerator:function(){return new x({map:this._map,layer:this.layer,clusterRadius:this._clusterRadius,statisticInfos:this._statisticInfos})},_initClusterGenerator:function(){var C=this._clusterGenerator;C.loaded?this._awaitClusterGenerator():this._eventHandles.push(C.on("load",y.hitch(this,function(){this._awaitClusterGenerator()})),C.on("load-error",y.hitch(this,function(G){console.log(G.error)})))},
_destroyClusterGenerator:function(C){this._clusterGenerator&&this._clusterGenerator.destroy(C);this._clusterGenerator=null},_awaitClusterGenerator:function(){var C=this._clusterGenerator;C.started?(this._applyRenderer(),this._initClusterUpdates()):this._eventHandles.push(C.on("start",y.hitch(this,function(){this._applyRenderer();this._initClusterUpdates()})))},_applyAggregationInfo:function(){this._applyClusterRadius();this._applyRenderer();this._clusterGenerator&&!this._clusterGenerator.isUpdateScheduled()&&
this.redraw()},_applyClusterRadius:function(){var C=this.aggregationInfo;this._clusterRadius=C&&C.clusterRadius||this.defaults.clusterRadius;this._clusterGenerator&&this._clusterGenerator.setClusterRadius(this._clusterRadius);this._computeClusterRadius()},_computeClusterRadius:function(){var C=this.aggregationInfo||{};C.clusterRadius=this._clusterRadius;this.aggregationInfo=C},_applyRenderer:function(){var C=this.container,G=this._getClusterRendererInfo(),z=this._compareStatInfos(this._statisticInfos,
G.statisticInfos);z&&(this._statisticInfos=G.statisticInfos,this._clusterGenerator&&(this._clusterGenerator.setStatisticInfos(c.map(this._statisticInfos,function(E){return{attributeInfo:E.attributeInfo,statisticType:E.statisticType}})),C&&c.forEach(C.graphics,function(E){this._applyClusterAttributes(E,E.getAggregationInfo())},this)));this._renderer=G.renderer;this._applyFields();this._applyInfoTemplate(!!z&&this._initialized);C&&(C.setRenderer(this._renderer),this.emit("renderer-change"))},_applyFields:function(){this._fields=
this._getFields(this._statisticInfos);this.container&&(this.container.fields=this._fields)},_applyInfoTemplate:function(C){var G=this.aggregationInfo,z=G&&G.disablePopup;this.layer.infoTemplate&&!z?(G=G&&G.infoTemplate||this._infoTemplate,C=C||!G?this._createInfoTemplate():this._updateInfoTemplate(G)):C=null;this._infoTemplate=C;this.container&&this.container.setInfoTemplate(this._infoTemplate);this._computeInfoTemplate()},_computeInfoTemplate:function(){var C=this.aggregationInfo||{};C.infoTemplate=
this._infoTemplate;this.aggregationInfo=C},_getClusterRendererInfo:function(){var C=this.layer&&this.layer.renderer;return C?this._createClusterRenderer(C):this._getDefaultClusterRenderer()},_getDefaultClusterRenderer:function(){var C=this._createContinuousCountRenderer();this._addSizeByCountVariable(C);return{renderer:C,statisticInfos:[]}},_createContinuousCountRenderer:function(C){var G=new e(null,"cluster_count");G.addBreak({minValue:-D,maxValue:D,symbol:C?new C.constructor(C.toJson()):new r(y.clone(this.defaults.markerSymbol))});
return G},_createClusterRenderer:function(C){if(!this._isSupportedRenderer(C))return this._getDefaultClusterRenderer();var G=[];if(this._isSimpleRenderer(C))var z=this._createContinuousCountRenderer(C.symbol);else{z=new C.constructor(C.toJson());var E=this._getRendererAttributeInfo(C);if(this._isCBRenderer(z)){var H=v.getClusterField(E,"avg");G.push(this._getStatInfo(E,"avg"));z.normalizationType=null;z.normalizationField=null;z.normalizationTotal=null}else this._isUVRenderer(z)&&(H=v.getClusterField(E,
"type"),G.push(this._getStatInfo(E,"type")));z.attributeField=H;z.setValueExpression(null);z.valueExpressionTitle=null;z.setVisualVariables(null);this._setRendererTitle(z,C)}C=this._getSupportedVariables(C);E=this._createClusterVariables(C.allVars,G);z.setVisualVariables(E);C.sizeVars.length||this._isCBSizeRenderer(z)||this._addSizeByCountVariable(z);return{renderer:z,statisticInfos:G}},_isSupportedRenderer:function(C){if(this._isSimpleRenderer(C))return!0;if(this._isCBRenderer(C)){var G=C.normalizationType;
return"function"===typeof C.attributeField||G&&"field"!==G?!1:!0}return this._isUVRenderer(C)?"function"===typeof C.attributeField||C.attributeField2?!1:!0:!1},_isSimpleRenderer:function(C){return-1<C.declaredClass.toLowerCase().indexOf("simplerenderer")},_isCBRenderer:function(C){return-1<C.declaredClass.toLowerCase().indexOf("classbreaksrenderer")},_isUVRenderer:function(C){return-1<C.declaredClass.toLowerCase().indexOf("uniquevaluerenderer")},_isCBSizeRenderer:function(C){var G=C.infos;if(!this._isCBRenderer(C)||
!G||2>G.length)return!1;var z=Infinity,E=-Infinity;c.forEach(G,function(H){if(H=H.symbol){var I=0;switch(H.type){case "simplemarkersymbol":I=H.size;break;case "picturemarkersymbol":I=(H.width+H.height)/2}z=Math.min(z,I);E=Math.max(E,I)}});return Infinity!==z&&-Infinity!==E&&z!==E},_getRendererAttributeInfo:function(C){var G=C.attributeField,z=G?this.layer.getField(G):null;return{field:G,attributeType:z&&"esriFieldTypeDate"===z.type?"date":null,rotationType:null,valueExpression:C.valueExpression,valueExpressionTitle:C.valueExpressionTitle,
normalizationField:C.normalizationField}},_setRendererTitle:function(C,G){C.legendOptions=y.clone(G.legendOptions);C.legendOptions&&C.legendOptions.title||(C.legendOptions=C.legendOptions||{},C.legendOptions.title=b.getRendererTitle(G,this.layer))},_getSupportedVariables:function(C){var G=C.getVisualVariablesForType("colorInfo",!1)||[],z=C.getVisualVariablesForType("sizeInfo",!1)||[],E=C.getVisualVariablesForType("opacityInfo",!1)||[];C=C.getVisualVariablesForType("rotationInfo",!1)||[];G=c.filter(G,
this._variableFilter);z=c.filter(z,this._variableFilter);E=c.filter(E,this._variableFilter);C=c.filter(C,this._variableFilter);return{sizeVars:z,allVars:G.concat(z).concat(E).concat(C)}},_variableFilter:function(C){return"function"!==typeof C.field&&!t.viewScaleRE.test(C.valueExpression)},_createClusterVariables:function(C,G){return c.map(C,function(z){return this._createVarForAvg(z,G)},this)},_createVarForAvg:function(C,G){var z=y.clone(C),E=this._getVariableAttributeInfo(C);z.field=v.getClusterField(E,
"avg");z.normalizationField=null;z.valueExpression=null;z.valueExpressionTitle=null;E=this._getStatInfo(E,"avg");this._addStatInfo(G,E);this._setVariableTitle(z,C);return z},_getVariableAttributeInfo:function(C){var G="rotationInfo"===C.type,z=G?"angle":null;G=G?C.rotationType:null;var E=C.legendOptions&&C.legendOptions.title,H=C.field,I=H?this.layer.getField(H):null;I&&"esriFieldTypeDate"===I.type&&(z="date");return{field:H,attributeType:z,rotationType:G,valueExpression:C.valueExpression,valueExpressionTitle:C.valueExpressionTitle||
C.valueExpression&&E,normalizationField:C.normalizationField}},_setVariableTitle:function(C,G){C.legendOptions&&C.legendOptions.title||(C.legendOptions=C.legendOptions||{},C.legendOptions.title=b.getVisualVariableTitle(G,this.layer))},_getStatInfo:function(C,G){return{statisticHash:v.getStatisticHash(C,G),attributeInfo:C,statisticType:G}},_addStatInfo:function(C,G){var z=this._findStatInfo(C,G);z?z.attributeInfo.valueExpressionTitle||(z.attributeInfo.valueExpressionTitle=G.attributeInfo.valueExpressionTitle):
C.push(G)},_findStatInfo:function(C,G){var z;c.some(C,function(E){E.statisticHash===G.statisticHash&&(z=E);return!!z});return z},_compareStatInfos:function(C,G){var z=c.filter(C,function(H){return!this._findStatInfo(G,H)},this),E=c.filter(G,function(H){return!this._findStatInfo(C,H)},this);return E.length||z.length?{added:E,removed:z}:null},_addSizeByCountVariable:function(C){var G=this._createSizeByCountVariable();G&&this._addVariable(C,G)},_getSizeByCountVariable:function(C){C=C.getVisualVariablesForType("sizeInfo",
!1)||[];return c.filter(C,function(G){return"cluster_count"===G.field})[0]},_updateSizeByCountVariable:function(){var C=this._renderer,G=this._getSizeByCountVariable(C);if(G){var z=this._createSizeByCountVariable();z&&this._replaceVariable(C,G,z)}},_createSizeByCountVariable:function(){var C=this._clusterGenerator;if(C){var G=C.getCurrentLodStats();if(G){var z=C.getNumFeatures();C=C.clusters;var E=G.min,H=G.max;1===G.count&&E===z||1===C.length&&C[0].count===z?(E=1,H=z):E&&E===H&&(H=2*E);z={type:"sizeInfo",
field:"cluster_count",valueUnit:"unknown",minSize:12,maxSize:50,minDataValue:E,maxDataValue:H,legendOptions:{title:p}}}}return z},_addVariable:function(C,G){var z=C.visualVariables||[];z.push(G);C.setVisualVariables(z)},_replaceVariable:function(C,G,z){var E=C.visualVariables;G=c.indexOf(E,G);-1<G&&E.splice(G,1);E.push(z);C.setVisualVariables(E)},_getFields:function(C){var G=[new k({name:"cluster_count",type:"esriFieldTypeInteger"})];c.forEach(C,function(z){var E=z.statisticType;z=z.attributeInfo;
var H;"avg"===E?H="date"===z.attributeType?"esriFieldTypeDate":"esriFieldTypeDouble":"type"===E&&(H=z.field?this.layer.getField(z.field).type:"esriFieldTypeString");G.push(new k({name:v.getClusterField(z,E),type:H}))},this);return G},_createInfoTemplate:function(){var C=this._statisticInfos,G=this._renderer,z=[{fieldName:"cluster_count",label:p,visible:!0,format:{digitSeparator:!0,places:0}}],E=[],H=[h.substitute({count:"{cluster_count}"},n.countSummary)],I=this._isUVRenderer(G)?G.infos:[];c.forEach(C,
function(M){var T=M.statisticType,Y=M.attributeInfo,fa=v.getClusterField(Y,T),ca=this._getFieldLabel(M);if("avg"===T){var X={fieldName:fa,label:ca,visible:!0,format:"date"===Y.attributeType?{dateFormat:"shortDateShortTime"}:{digitSeparator:!0,places:1}};var ea=this._getFieldSummary(M,fa)}else"type"===T&&(ea="expression/"+fa,X={fieldName:ea,visible:!0},E.push({name:fa,title:ca,returnType:"string",expression:this._getExpression(I,fa)}),ea=this._getFieldSummary(M,ea));X&&z.push(X);ea&&H.push(ea)},this);
return new a({fieldInfos:z,expressionInfos:E,description:H.join("\x3cbr/\x3e\x3cbr/\x3e")})},_updateInfoTemplate:function(C){var G=C.toJson(),z=this._isUVRenderer(this._renderer)?this._renderer.infos:[];c.forEach(this._statisticInfos,function(E){var H=E.statisticType;E=v.getClusterField(E.attributeInfo,H);"type"===H&&(H=this._findExpressionInfo(E,G))&&(H.expression=this._getExpression(z,E))},this);return new a(G)},_findExpressionInfo:function(C,G){var z;c.some(G.expressionInfos,function(E){E.name===
C&&(z=E);return!!z});return z},_escapeDoubleQuotes:function(C){return C?C.replace(/"/g,'\\"'):""},_getExpression:function(C,G){return["var uvInfos \x3d ["+this._getObjects(C).join(", ")+"];",'var predominantType \x3d Text($feature["'+G+'"]);','var label \x3d "'+this._escapeDoubleQuotes(n.predominantNoneValue)+'";',"for (var i \x3d 0; i \x3c Count(uvInfos); i++) {\nif (uvInfos[i].value \x3d\x3d predominantType) {\nlabel \x3d uvInfos[i].label;\nbreak;\n}\n}\nreturn label;"].join("\n")},_getObjects:function(C){return c.map(C,
function(G){return'{"value": "'+String(G.value)+'","label": "'+this._escapeDoubleQuotes(String(G.label))+'"}'},this)},_getFieldLabel:function(C){var G=C.statisticType,z=C.attributeInfo,E=z.field;C=z.normalizationField;var H="";if("avg"===G)var I=C?n.avgNormFieldLabel:n.avgFieldLabel;else"type"===G&&(I=n.predominantFieldLabel);I&&(G=z.valueExpression?z.valueExpressionTitle:this.layer.getFieldLabel(E),C=C&&this.layer.getFieldLabel(C),H=h.substitute({fieldLabel:G||"",normFieldLabel:C||""},I));return H},
_getFieldSummary:function(C,G){var z=C.statisticType,E=C.attributeInfo,H=E.field;C=E.normalizationField;var I="";if("avg"===z)var M=C?n.avgNormFieldSummary:n.avgFieldSummary;else"type"===z&&(M=n.predominantFieldSummary);M&&(z=E.valueExpression?E.valueExpressionTitle:this.layer.getFieldLabel(H),C=C&&this.layer.getFieldLabel(C),I=h.substitute({fieldLabel:z||"",normFieldLabel:C||"",fieldValue:"{"+G+"}"},M));return I},_removeFromPopup:function(C){var G=this._map.infoWindow,z=G.features;if(z&&z.length){var E=
c.filter(z,function(H){return H.getLayer()!==C});E.length<z.length&&(E.length?G.setFeatures(E):(G.clearFeatures(),G.hide()))}},_resetClusterNav:function(){this._resetClusterNavPartial();this._popupClusterGraphic=null},_resetClusterNavPartial:function(){this._map.infoWindow.removeActions(this._popupActions);this._hideSingleGraphic(this._popupSingleGraphic);this._popupSingleGraphic=null},_addClusterBoundary:function(C,G){(G=G.clusterFillSymbol)&&(G=new G.constructor(G.toJson()));C=new m(C,G);this._map.graphics.add(C);
this._clusterBoundary=C},_removeClusterBoundary:function(){this._map.graphics.remove(this._clusterBoundary);this._clusterBoundary=null},_createBrowseFeaturesAction:function(){return this._map.infoWindow.addActions([{title:w.NLS_browseFeatures,className:"browseFeatures",callback:y.hitch(this,function(C){C.preventDefault();C=this._map.infoWindow;var G=C.getSelectedFeature(),z=G.getChildGraphics(),E=C.getCurrentAnchor();C.setFeatures(z,{anchor:E});if(z=d.graphicsExtent(z))this._addClusterBoundary(z,
C),C.show(this._getPopupLocation(z,E));this._popupClusterGraphic=G})}])[0]},_getPopupLocation:function(C,G){var z=C.getCenter();G=G.toLowerCase();-1<G.indexOf("top")?z.update(z.x,C.ymax):-1<G.indexOf("bottom")?z.update(z.x,C.ymin):-1<G.indexOf("left")?z.update(C.xmin,z.y):z.update(C.xmax,z.y);return z},_createViewSummaryAction:function(){return this._map.infoWindow.addActions([{title:w.NLS_viewSummary,className:"viewSummary",callback:y.hitch(this,function(C){C.preventDefault();C=this._popupClusterGraphic;
var G=this._map.infoWindow;G.setFeatures([C]);G.show(C.geometry);this._popupClusterGraphic=null})}])[0]},_initClusterUpdates:function(){this._updateSizeVariable();this._updateClusterGraphics();this._eventHandles.push(this._clusterGenerator.on("update-end",y.hitch(this,function(C){(C.mapLevelChange||C.indexChange)&&this._updateSizeVariable();this._updateClusterGraphics()})),this._clusterGenerator.on("index-complete",y.hitch(this,function(){this._updateSizeVariable()})))},_updateClusterGraphics:function(){this._hideSingleGraphics();
var C=[],G=[];c.forEach(this._clusterGenerator.clusters,function(z){var E=new m(z.centroid);E.setAggregationSourceLayer(this.layer);E.setAggregationInfo(z);this._applyClusterAttributes(E,z);1===z.count?(z=this._getSingleGraphic(E),G.push(z)):C.push(E)},this);this._showSingleGraphics(G);this._addGraphics(C)},_addGraphics:function(C){var G=this.container;G.clear();c.forEach(C,function(z){G.add(z)})},_getSingleGraphic:function(C){var G=this._clusterGenerator.getCell(C.getAggregationInfo().primary).features[0],
z=this.layer.renderer;z=z&&z.getSymbol(G);var E=this._getSizeByCountVariable(this._renderer);z&&E&&(C=E?this._renderer.getSize(C,{sizeInfo:E,shape:z.style,resolution:this._map.getResolutionInMeters(),scale:this._map.getScale()}):null,G.setSize(C));return G},_showSingleGraphics:function(C){c.forEach(C,this._showSingleGraphic);this._singleGraphics=C},_hideSingleGraphics:function(){c.forEach(this._singleGraphics,function(C){C.setSize(null);this._hideSingleGraphic(C)},this);this._singleGraphics=null},
_clearSingleGraphics:function(){c.forEach(this._singleGraphics,function(C){C.setSize(null)});this._singleGraphics=null},_showSingleGraphic:function(C){C&&C._resume()},_hideSingleGraphic:function(C){C&&C._suspend()},_updateSizeVariable:function(){this.isClusteringEnabled()&&(this._updateSizeByCountVariable(),this.emit("renderer-change"))},_applyClusterAttributes:function(C,G){C.setAttributes(G.attributes)},_createLayerEventListeners:function(){var C=this.layer;this._eventHandles.push(C.on("visibility-change",
y.hitch(this,function(G){this.container.setVisibility(G.visible)})),C.on("scale-range-change",y.hitch(this,function(){this.container.setScaleRange(this.layer.minScale,this.layer.maxScale)})),C.on("renderer-change",y.hitch(this,function(){this._applyRenderer()})),C.on("info-template-change",y.hitch(this,function(){this._applyInfoTemplate()})))},_createMapEventListeners:function(){this._eventHandles.push(this._map.on("zoom-start",y.hitch(this,function(){this._removeClusterBoundary();this._removeFromPopup(this.container);
this._removeFromPopup(this.layer);this._resetClusterNav();this.container.clear();this._hideSingleGraphics()})))},_createPopupEventListeners:function(){var C=this._map.infoWindow;this._eventHandles.push(C.on("selection-change",y.hitch(this,function(){this._resetClusterNavPartial();var G=this._map.infoWindow.getSelectedFeature(),z=G&&G.getLayer();if(z){if(z===this.container){this._removeClusterBoundary();var E=this._createBrowseFeaturesAction()}else z===this.layer&&G._isSuspended()?(E=this._createViewSummaryAction(),
this._popupSingleGraphic=G,this._showSingleGraphic(this._popupSingleGraphic)):this._removeClusterBoundary();this._popupActions=E?[E]:null}})),C.on("clear-features",y.hitch(this,function(G){this._resetClusterNav();G.isIntermediate||this._removeClusterBoundary()})),C.on("hide",y.hitch(this,function(){this._popupSingleGraphic&&this._popupSingleGraphic._suspend();this._clusterBoundary&&this._clusterBoundary.hide()})),C.on("show",y.hitch(this,function(){this._popupSingleGraphic&&this._popupSingleGraphic._resume();
this._clusterBoundary&&this._clusterBoundary.show()})))},_destroyEventListeners:function(){c.forEach(this._eventHandles,function(C){C.remove()})}});u("extend-esri")&&y.setObject("layers.clustering.ClusterManager",B,q);return B})},"esri/dijit/PopupTemplate":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/dom-construct ../kernel ../InfoTemplate ../PopupInfo ./PopupRenderer".split(" "),function(B,y,c,u,q,l,m,h){B=B([l,m],{declaredClass:"esri.dijit.PopupTemplate","-chains-":{constructor:"manual"},
chartTheme:null,constructor:function(f,d){y.mixin(this,d);this.initialize(f,d)},getTitle:function(f){var d;this.info&&(d=this.titleHasRelatedFields||this.titleHasAsyncExpressions?"":this._getPopupValues(f,this._fetchAttributes(f,null,this.getExpressionFieldsInTitle()),!0).title);return d||""},getContent:function(f){return this.info?(new h({template:this,graphic:f,chartTheme:this.chartTheme},u.create("div"))).domNode:""}});c("extend-esri")&&y.setObject("dijit.PopupTemplate",B,q);return B})},"esri/PopupInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/i18n dojo/has dojo/Deferred dojo/sniff dojo/promise/all dojox/html/entities ./lang ./kernel ./request ./promiseList ./ArcadeExpression ./tasks/query ./tasks/QueryTask ./tasks/RelationshipQuery ./tasks/StatisticDefinition ./arcadeProfiles/popupProfile ./layers/support/attributeUtils dojo/i18n!dojo/cldr/nls/number".split(" "),
function(B,y,c,u,q,l,m,h,f,d,a,b,e,r,t,g,k,x,v,A,n,w){B=B(null,{declaredClass:"esri.PopupInfo",_reNewline:/(\n)/ig,_reExprField:/^\s*expression\//i,_reExprFieldPattern:/\{expression\/([^\}]+)\}/ig,_exprPrefix:"expression/",_relatedFieldPrefix:"relationships/",initialize:function(p,D){if(p){y.mixin(this,D);this.info=p;this.title=this.getTitle;this.content=this.getContent;this._exprCache=this._compileExpressions(this.info.expressionInfos);var C=this._fieldLabels={},G=this._fieldsMap={};this.info.fieldInfos&&
c.forEach(this.info.fieldInfos,function(z){var E=z.fieldName.toLowerCase(),H=this._isExpressionField(E)?this.getExpressionInfo(E):null;C[E]=H?H.title:z.label;G[E]=z},this);this.titleHasRelatedFields=!(!this.info.title||-1===this.info.title.indexOf("{"+this._relatedFieldPrefix));this.titleHasAsyncExpressions=this._titleHasAsyncExpressions();this.contentHasAsyncExpressions=this._contentHasAyncExpressions()}},toJson:function(){return u.fromJson(u.toJson(this.info))},getTitle:function(){},getContent:function(){},
getFieldInfo:function(p){var D;c.some(this.info&&this.info.fieldInfos,function(C){C.fieldName===p&&(D=C);return!!D});return D},getExpressionInfo:function(p){if(p=this._getExprField(p)){p=p.toLowerCase();var D;c.some(this.info.expressionInfos,function(C){C.name.toLowerCase()===p&&(D=C);return!!D});return D}},getExpressionFieldsInTitle:function(){return this._getExprFieldsFromTemplatedString(this.info.title)},getExpressionFieldsInContent:function(){var p=this._collectExprFieldsFromTemplatedString(this.info.description,
[]);this.info.description||c.forEach(this.info.fieldInfos,function(D){D.visible&&this._collectExprField(D.fieldName,p)},this);c.forEach(this.info.mediaInfos,function(D){this._collectExprFieldsFromTemplatedString(D.title,p);this._collectExprFieldsFromTemplatedString(D.caption,p);if(D=D.value)this._collectExprFieldsFromTemplatedString(D.linkURL,p),this._collectExprFieldsFromTemplatedString(D.sourceURL,p),c.forEach(D.fields,function(C){this._collectExprField(C,p)},this),this._collectExprField(D.normalizeField,
p),this._collectExprField(D.tooltipField,p)},this);return p},getRequiredExpressionFields:function(){return this.getExpressionFieldsInTitle().concat(this.getExpressionFieldsInContent())},hasGeometryOperations:function(){return c.some(this._getArcadeExpressions(),function(p){return p.hasGeometryOperations()})},hasAsyncExpressions:function(){return c.some(this._getArcadeExpressions(),function(p){return p.async})},initializeArcadeEngine:function(){return A.initialize(this._getArcadeExpressions())},getComponents:function(p,
D){var C=this.info,G={initArcadeEngine:this.initializeArcadeEngine()};C.fieldInfos&&(C=c.filter(C.fieldInfos,function(z){return-1!==z.fieldName.indexOf(this._relatedFieldPrefix)},this))&&0<C.length&&(G.relatedInfo=this._getRelatedRecords({graphic:p,fieldsInfo:C}));this._needFullResolutionFeature(p)&&(G.fullResolutionFeature=this._getFullResolutionFeature(p));return r(G).then(y.hitch(this,function(z){z=z.fullResolutionFeature;var E=D&&D.evaluateAllExpressions,H=E?null:this.getRequiredExpressionFields();
z=(E?this.hasAsyncExpressions():this._hasAsyncExpressions(H))?this._fetchAttributesAsync(p,z,H):this._fetchAttributes(p,z,H);return r([z]).then(y.hitch(this,function(I){return this._getPopupValues(p,I[0])}))}))},getAttachments:function(p){var D=p.getSourceLayer();p=p.attributes;if(this.info.showAttachments&&D&&D.hasAttachments&&D.objectIdField&&(p=p&&p[D.objectIdField]))return D.queryAttachmentInfos(p)},_needFullResolutionFeature:function(p){return(p=p.getSourceLayer())?"function"===typeof p.getMaxAllowableOffset&&
0<p.getMaxAllowableOffset()&&this.hasGeometryOperations():!1},_getFullResolutionFeature:function(p){var D=p.getSourceLayer(),C=D.objectIdField;p=(p=p.attributes)&&C&&p[C];if(null==p)return null;var G=new g;G.where=C+"\x3d"+p;G.maxAllowableOffset=0;G.outFields=[C];D._enableCacheHint(G);return D.queryFeatures(G).then(function(z){return z.features&&z.features[0]})},_isExpressionField:function(p){return this._reExprField.test(p)},_getExprField:function(p){return this._isExpressionField(p)?p.replace(this._reExprField,
""):null},_collectExprField:function(p,D){(p=this._getExprField(p))&&D.push(p);return D},_collectExprFieldsFromTemplatedString:function(p,D){p=this._getExprFieldsFromTemplatedString(p);p.length&&Array.prototype.push.apply(D,p);return D},_getExprFieldsFromTemplatedString:function(p){p=p?p.match(this._reExprFieldPattern):null;return c.map(p,function(D){return D.replace(this._reExprFieldPattern,"$1")},this)},_titleHasAsyncExpressions:function(){return this._hasAsyncExpressions(this.getExpressionFieldsInTitle())},
_contentHasAyncExpressions:function(){return this._hasAsyncExpressions(this.getExpressionFieldsInContent())},_hasAsyncExpressions:function(p){return c.some(p,function(D){D=this._exprCache[D];return!(!D||!D.async)},this)},_compileExpressions:function(p){var D={};c.forEach(p,function(C){var G=C.returnType&&C.returnType.toLowerCase();D[C.name]=new t({expression:C.expression,returnType:"number"===G?"number":"string",profile:A})});return D},_getArcadeExpressions:function(){var p=[],D;for(D in this._exprCache)p.push(this._exprCache[D]);
return p},_fetchAttributesAsync:function(p,D,C){var G=this._fetchAttributes(p,D,C);p={};for(var z in G)(D=G[z])&&D.then&&(p[z]=D);return r(p).then(y.hitch(this,function(E){for(var H in E){var I=E[H];G[H]=I instanceof Error?null:this._processArcadeResult(I)}return G}))},_processArcadeResult:function(p){"string"===typeof p&&(p=d.encode(p));return p},_fetchAttributes:function(p,D,C){var G=y.clone(p.attributes)||{},z=D&&D.geometry,E=this._exprPrefix,H=this._exprCache;C=C||c.map(this.info.expressionInfos,
function(I){return I.name});c.forEach(C,function(I){var M=E+I;I=(I=H[I])?p.evaluateExpression(I,this._getEvalOptions(I,p,z)):null;G[M]=this._processArcadeResult(I)},this);return G},_getEvalOptions:function(p,D,C){var G=p.hasGeometryOperations(),z=D.getSourceLayer(),E=z&&(z.getMap()||z.parentLayer&&z.parentLayer.getMap());p=A.getEvalOptions({expression:p,feature:D,layer:z,map:E,spatialReference:E&&E.spatialReference});D=p.context.vars.$feature;G=!(!G||!C);D&&G&&(D._geometry=C);p.skipCache=G;return p},
_getPopupValues:function(p,D,C){D=D||this._fetchAttributes(p);var G=this.info,z=p.getSourceLayer(),E=y.clone(D),H="",I="",M,T,Y=z&&z._getDateOpts&&z._getDateOpts().properties;Y=Y&&Y.slice(0);var fa={dateFormat:{properties:Y,formatter:"DateFormat"+this._insertOffset(this._dateFormats.shortDateShortTime)},format:null};if(this._relatedInfo)for(ea in this._relatedInfo)if(this._relatedInfo.hasOwnProperty(ea)){var ca=this._relatedInfo[ea],X=this._relatedLayersInfo[ea];ca&&(c.forEach(ca.relatedFeatures,
function(ta){for(T in ta.attributes)if(ta.attributes.hasOwnProperty(T)&&"esriRelCardinalityOneToOne"===X.relation.cardinality){var N=this._toRelatedFieldName([X.relation.id,T]);D[N]=E[N]=ta.attributes[T]}},this),c.forEach(ca.relatedStatsFeatures,function(ta){for(T in ta.attributes)if(ta.attributes.hasOwnProperty(T)){var N=this._toRelatedFieldName([X.relation.id,T]);D[N]=E[N]=ta.attributes[T]}},this))}for(M in E){var ea=this._fieldsMap[M.toLowerCase()];ca=this._getLayerFieldInfo(z,M);ea&&ca&&(ea.fieldName=
ca.name);E[M]=this._formatValue(E[M],M,fa);Y&&ea&&ea.format&&ea.format.dateFormat&&(ea=c.indexOf(Y,M),-1<ea&&Y.splice(ea,1))}if(z)for(M in Y=z.typeIdField,D)if(D.hasOwnProperty(M)&&-1===M.indexOf(this._relatedFieldPrefix)){var ma=D[M];a.isDefined(ma)&&(ea=this._getDomainName(z,p,M,ma),a.isDefined(ea)?E[M]=ea:M===Y&&(ea=this._getTypeName(z,p,ma),a.isDefined(ea)&&(E[M]=ea)))}G.title&&(H=this._processFieldsInLinks(this._fixTokens(G.title,z),D),H=y.trim(this._removeEmptyHref(a.substitute(E,H,fa)||"")));
if(C)return{title:H};G.description&&(I=this._processFieldsInLinks(this._fixTokens(G.description,z),D),I=y.trim(this._removeEmptyHref(a.substitute(E,I,fa)||"")));if(G.fieldInfos){var wa=[];c.forEach(G.fieldInfos,function(ta){(M=ta.fieldName)&&ta.visible&&wa.push([this._fieldLabels[M.toLowerCase()]||M,a.substitute(E,"${"+M+"}",fa)||""])},this)}var P;if(G.mediaInfos){var ja=[];c.forEach(G.mediaInfos,function(ta){P=0;ma=ta.value;switch(ta.type){case "image":var N=ma.sourceURL;N=N&&y.trim(this._removeEmptyHref(a.substitute(D,
this._fixTokens(N,z))));P=!!N;break;case "piechart":case "linechart":case "columnchart":case "barchart":N=ma.normalizeField;ma.fields=c.map(ma.fields,function(ya){return(S=this._getLayerFieldInfo(z,ya))?S.name:ya},this);if(N){var S=this._getLayerFieldInfo(z,N);ma.normalizeField=S?S.name:N}P=c.some(ma.fields,function(ya){return a.isDefined(D[ya])||-1!==ya.indexOf(this._relatedFieldPrefix)&&this._relatedInfo},this);break;default:return}if(P){ta=y.clone(ta);ma=ta.value;N=ta.title?this._processFieldsInLinks(this._fixTokens(ta.title,
z),D):"";var ha=ta.caption?this._processFieldsInLinks(this._fixTokens(ta.caption,z),D):"";ta.title=N?y.trim(this._removeEmptyHref(a.substitute(E,N,fa)||"")):"";ta.caption=ha?y.trim(this._removeEmptyHref(a.substitute(E,ha,fa)||"")):"";if("image"===ta.type)ma.sourceURL=a.substitute(D,this._fixTokens(ma.sourceURL,z)),ma.linkURL&&(ma.linkURL=y.trim(a.substitute(D,this._fixTokens(ma.linkURL,z))||""));else{var la,sa;c.forEach(ma.fields,function(ya,Ga){if(-1!==ya.indexOf(this._relatedFieldPrefix))sa=this._getRelatedChartInfos(ya,
ma,D,fa),sa instanceof Array?ma.fields=sa:ma.fields[Ga]=sa;else{var ba=D[ya];ba=void 0===ba?null:ba;la=D[ma.normalizeField]||0;ba&&la&&(ba/=la);ma.fields[Ga]={y:ba,tooltip:(this._fieldLabels[ya.toLowerCase()]||ya)+":\x3cbr/\x3e"+this._formatValue(ba,ya,fa,!!la)}}},this)}ja.push(ta)}},this)}return{title:H,description:I,hasDescription:!!G.description,fields:wa&&wa.length?wa:null,mediaInfos:ja&&ja.length?ja:null,formatted:E,editSummary:!1!==G.showLastEditInfo&&z&&z.getEditSummary?z.getEditSummary(p):
""}},_getRelatedChartInfos:function(p,D,C,G){var z,E;var H=[];var I=this._fromRelatedFieldName(p);var M=I[0];var T=this._relatedInfo[M];M=this._relatedLayersInfo[M];T&&c.forEach(T.relatedFeatures,function(Y){Y=Y.attributes;var fa;for(fa in Y)if(Y.hasOwnProperty(fa)&&fa===I[1]){var ca={};E=Y[fa];D.normalizeField&&(z=-1!==D.normalizeField.indexOf(this._relatedFieldPrefix)?Y[this._fromRelatedFieldName(D.normalizeField)[1]]:C[D.normalizeField]);E&&z&&(E/=z);if(D.tooltipField)if(-1!==D.tooltipField.indexOf(this._relatedFieldPrefix)){var X=
this._fromRelatedFieldName(D.tooltipField)[1],ea=a.isDefined(Y[X])?this._formatValue(Y[X],D.tooltipField,G,!!z):X;ca.tooltip=ea+":\x3cbr/\x3e"+this._formatValue(E,X,G,!!z)}else ca.tooltip=(this._fieldLabels[p.toLowerCase()]||p)+":\x3cbr/\x3e"+this._formatValue(E,D.tooltipField,G,!!z);else ca.tooltip=E;ca.y=E;H.push(ca)}},this);return"esriRelCardinalityOneToMany"===M.relation.cardinality||"esriRelCardinalityManyToMany"===M.relation.cardinality?H:H[0]},_dateFormats:{shortDate:"(datePattern: 'M/d/y', selector: 'date')",
shortDateShortTime:"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')",shortDateShortTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')",shortDateLongTime:"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLongTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')",shortDateLE:"(datePattern: 'd/M/y', selector: 'date')",shortDateLEShortTime:"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')",
shortDateLEShortTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')",shortDateLELongTime:"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLELongTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')",longMonthDayYear:"(datePattern: 'MMMM d, y', selector: 'date')",longMonthDayYearShortTime:"(datePattern: 'MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')",longMonthDayYearShortTime24:"(datePattern: 'MMMM d, y', timePattern: 'H:mm', selector: 'date and time')",
longMonthDayYearLongTime:"(datePattern: 'MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')",longMonthDayYearLongTime24:"(datePattern: 'MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')",dayShortMonthYear:"(datePattern: 'd MMM y', selector: 'date')",dayShortMonthYearShortTime:"(datePattern: 'd MMM y', timePattern: 'h:mm a', selector: 'date and time')",dayShortMonthYearShortTime24:"(datePattern: 'd MMM y', timePattern: 'H:mm', selector: 'date and time')",dayShortMonthYearLongTime:"(datePattern: 'd MMM y', timePattern: 'h:mm:ss a', selector: 'date and time')",
dayShortMonthYearLongTime24:"(datePattern: 'd MMM y', timePattern: 'H:mm:ss', selector: 'date and time')",longDate:"(datePattern: 'EEEE, MMMM d, y', selector: 'date')",longDateShortTime:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')",longDateShortTime24:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm', selector: 'date and time')",longDateLongTime:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')",longDateLongTime24:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')",
longMonthYear:"(datePattern: 'MMMM y', selector: 'date')",shortMonthYear:"(datePattern: 'MMM y', selector: 'date')",year:"(datePattern: 'y', selector: 'date')"},_dateFormatsJson:{shortDate:{datePattern:"M/d/y",selector:"date"},shortDateShortTime:{datePattern:"M/d/y",timePattern:"h:mm a",selector:"date and time"},shortDateShortTime24:{datePattern:"M/d/y",timePattern:"H:mm",selector:"date and time"},shortDateLongTime:{datePattern:"M/d/y",timePattern:"h:mm:ss a",selector:"date and time"},shortDateLongTime24:{datePattern:"M/d/y",
timePattern:"H:mm:ss",selector:"date and time"},shortDateLE:{datePattern:"d/M/y",selector:"date"},shortDateLEShortTime:{datePattern:"d/M/y",timePattern:"h:mm a",selector:"date and time"},shortDateLEShortTime24:{datePattern:"d/M/y",timePattern:"H:mm",selector:"date and time"},shortDateLELongTime:{datePattern:"d/M/y",timePattern:"h:mm:ss a",selector:"date and time"},shortDateLELongTime24:{datePattern:"d/M/y",timePattern:"H:mm:ss",selector:"date and time"},longMonthDayYear:{datePattern:"MMMM d, y",selector:"date"},
longMonthDayYearShortTime:{datePattern:"MMMM d, y",timePattern:"h:mm a",selector:"date and time"},longMonthDayYearShortTime24:{datePattern:"MMMM d, y",timePattern:"H:mm",selector:"date and time"},longMonthDayYearLongTime:{datePattern:"MMMM d, y",timePattern:"h:mm:ss a",selector:"date and time"},longMonthDayYearLongTime24:{datePattern:"MMMM d, y",timePattern:"H:mm:ss",selector:"date and time"},dayShortMonthYear:{datePattern:"d MMM y",selector:"date"},dayShortMonthYearShortTime:{datePattern:"d MMM y",
timePattern:"h:mm a",selector:"date and time"},dayShortMonthYearShortTime24:{datePattern:"d MMM y",timePattern:"H:mm",selector:"date and time"},dayShortMonthYearLongTime:{datePattern:"d MMM y",timePattern:"h:mm:ss a",selector:"date and time"},dayShortMonthYearLongTime24:{datePattern:"d MMM y",timePattern:"H:mm:ss",selector:"date and time"},longDate:{datePattern:"EEEE, MMMM d, y",selector:"date"},longDateShortTime:{datePattern:"EEEE, MMMM d, y",timePattern:"h:mm a",selector:"date and time"},longDateShortTime24:{datePattern:"EEEE, MMMM d, y",
timePattern:"H:mm",selector:"date and time"},longDateLongTime:{datePattern:"EEEE, MMMM d, y",timePattern:"h:mm:ss a",selector:"date and time"},longDateLongTime24:{datePattern:"EEEE, MMMM d, y",timePattern:"H:mm:ss",selector:"date and time"},longMonthYear:{datePattern:"MMMM y",selector:"date"},shortMonthYear:{datePattern:"MMM y",selector:"date"},year:{datePattern:"y",selector:"date"}},_reHref:/href\s*=\s*(")([^"]+)"/ig,_reHrefApos:/href\s*=\s*(')([^']+)'/ig,_fixTokens:function(p,D){var C=this;return p.replace(/(\{([^\{\r\n]+)\})/g,
function(G,z,E){G=C._getLayerFieldInfo(D,E);return"$"+(G?"{"+G.name+"}":z)})},_encodeAttributes:function(p,D){p=y.clone(p)||{};var C,G;for(C in p)(G=p[C])&&"string"===typeof G&&(G=D?G:encodeURIComponent(G),G=G.replace(/'/g,"\x26apos;"),p[C]=G);return p},_processFieldsInLinks:function(p,D){var C=this._encodeAttributes(D),G=this._encodeAttributes(D,!0);D=y.hitch(this,this._addValuesToHref,D,C,G);p&&(p=p.replace(this._reHref,D).replace(this._reHrefApos,D));return p},_addValuesToHref:function(p,D,C,G,
z,E){E=E&&y.trim(E);return G=a.substitute(E&&0===E.indexOf("${")?"'"===z?C:p:D,G)},_getLayerFieldInfo:function(p,D){return p&&p.getField?p.getField(D):null},_formatValue:function(p,D,C,G){var z=this._fieldsMap[D.toLowerCase()],E=z&&z.format;D=-1!==c.indexOf(C.dateFormat.properties,D);var H="number"===typeof p&&!D&&(!E||!E.dateFormat);if(!a.isDefined(p)||!z||!a.isDefined(E))return this._applyFormatting(p,H);z=E.hasOwnProperty("places")||E.hasOwnProperty("digitSeparator");var I=E.hasOwnProperty("digitSeparator")?
E.digitSeparator:!0;if(z&&!D)var M={formatType:"NumberFormat",places:a.isDefined(E.places)&&(!G||0<E.places)?Number(E.places):Infinity};else if(E.dateFormat)M=y.mixin({formatType:"DateFormat",utcOffset:this.utcOffset},this._dateFormatsJson[E.dateFormat]||this._dateFormatsJson.shortDateShortTime);else return this._applyFormatting(p,H);var T=this._applyFormatFunctions(p,M,C);z&&-1<p.constructor.toString().indexOf("Array")&&(T="",c.forEach(p,y.hitch(this,function(Y,fa){fa&&(T+=" ");T+=this._applyFormatFunctions(Y,
M,C)})));z&&!I&&w.group&&(T=T.replace(new RegExp("\\"+w.group,"g"),""));D&&(T='\x3cspan class\x3d"esriDateValue"\x3e'+T+"\x3c/span\x3e");return this._applyFormatting(T,H)},_applyFormatFunctions:function(p,D,C){D&&C&&(C.format={myKey:D});p=a.substitute({myKey:p},"${myKey}",C)||"";D&&C&&(C.format=null);return p},_applyFormatting:function(p,D){return D?this._forceLTR(p):this._applyPreWrap(p)},_forceLTR:function(p){var D=h("ie");return D&&10>=D?p:"\x3cspan class\x3d'esriNumericValue'\x3e"+p+"\x3c/span\x3e"},
_applyPreWrap:function(p){return"string"===typeof p?p.replace(this._reNewline,"\x3cspan class\x3d'charNewLine'\x3e$1\x3c/span\x3e"):p},_insertOffset:function(p){p&&(p=a.isDefined(this.utcOffset)?p.replace(/\)\s*$/,", utcOffset:"+this.utcOffset+")"):p);return p},_getDomainName:function(p,D,C,G){return(p=p.getDomain&&p.getDomain(C,{feature:D}))&&p.codedValues?p.getName(G):null},_getTypeName:function(p,D,C){return(p=p.getType&&p.getType(D))&&p.name},_getRelatedRecords:function(p){var D=p.graphic,C;this._relatedLayersInfoPromise||
(this._relatedLayersInfoPromise=this._getRelatedLayersInfo(p).then(y.hitch(this,function(G){for(C in G)G.hasOwnProperty(C)&&G[C]&&(this._relatedLayersInfo[C].relatedLayerInfo=G[C])})));return this._relatedLayersInfoPromise.then(y.hitch(this,function(){return this._queryRelatedLayers(D)})).then(y.hitch(this,function(G){this._setRelatedRecords(D,G);return G}))},_getRelatedLayersInfo:function(p){var D=p.fieldsInfo,C,G={};var z=p.graphic.getSourceLayer();this._relatedLayersInfo||(this._relatedLayersInfo=
{});c.forEach(D,function(E){var H;var I=this._fromRelatedFieldName(E.fieldName);var M=I[0];I=I[1];if(M&&(!this._relatedLayersInfo[M]&&z&&z.relationships&&(c.some(z.relationships,function(Y){if(Y.id==M)return H=Y,!0}),H&&(this._relatedLayersInfo[M]={relation:H,relatedFields:[],outStatistics:[]})),this._relatedLayersInfo[M]&&(this._relatedLayersInfo[M].relatedFields.push(I),E.statisticType))){var T=new v;T.statisticType=E.statisticType;T.onStatisticField=I;T.outStatisticFieldName=I;this._relatedLayersInfo[M].outStatistics.push(T)}},
this);for(C in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(C)&&this._relatedLayersInfo[C]&&(p=this._relatedLayersInfo[C].relation,p=z.url.replace(/[0-9]+$/,p.relatedTableId),this._relatedLayersInfo[C].relatedLayerUrl=p,G[C]=e({url:p,content:{f:"json"},callbackParamName:"callback"}));return f(G)},_queryRelatedLayers:function(p){var D={},C;for(C in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(C)&&(D[C]=this._queryRelatedLayer({graphic:p,relatedInfo:this._relatedLayersInfo[C]}));
return f(D)},_queryRelatedLayer:function(p){var D,C;var G=p.graphic;var z=G.getSourceLayer();var E=z.url.match(/[0-9]+$/g)[0];var H=p.relatedInfo;var I=H.relatedLayerInfo;var M=H.relatedLayerUrl;var T=H.relation;p=c.filter(I.relationships,function(ma){return ma.relatedTableId===parseInt(E,10)});1===p.length?D=p[0]:1<p.length&&c.some(p,function(ma){ma.id===T.id&&(D=ma);return!!D});if(D){var Y=new g;c.some(I.fields,function(ma){if(ma.name===D.keyField)return C=-1!==c.indexOf(["esriFieldTypeSmallInteger",
"esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],ma.type)?"number":"string",!0});if(D.relationshipTableId&&D.keyFieldInRelationshipTable){var fa=new m;this._queryRelatedRecords(G,D).then(y.hitch(this,function(ma){var wa;(wa=ma[G.attributes[z.objectIdField]])?(ma=c.map(wa.features,function(P){return P.attributes[I.objectIdField]},this),H.outStatistics&&0<H.outStatistics.length&&I.supportsStatistics&&(X=new g,X.where=this._chunkWhereInClause(I.objectIdField,ma,1E3),X.outFields=Y.outFields,
X.outStatistics=H.outStatistics),X&&(ea=new k(M),ea.execute(X).then(y.hitch(this,function(P){var ja=[];ja.push(wa);ja.push(P);fa.resolve(ja)})))):fa.resolve()}))}else{var ca="string"===C?D.keyField+"\x3d'"+G.attributes[T.keyField]+"'":D.keyField+"\x3d"+G.attributes[T.keyField];Y.where=ca;Y.outFields=H.relatedFields;if(H.outStatistics&&0<H.outStatistics.length&&I.supportsStatistics){var X=new g;X.where=Y.where;X.outFields=Y.outFields;X.outStatistics=H.outStatistics}var ea=new k(M);ca=[];ca.push(ea.execute(Y));
X&&ca.push(ea.execute(X))}}return ca?f(ca):fa?fa.promise:void 0},_setRelatedRecords:function(p,D){this._relatedInfo=[];for(var C in D)D.hasOwnProperty(C)&&D[C]&&(p=D[C],this._relatedInfo[C]={},this._relatedInfo[C].relatedFeatures=p[0].features,a.isDefined(p[1])&&(this._relatedInfo[C].relatedStatsFeatures=p[1].features))},_handlerErrorResponse:function(p,D){p.reject(D)},_fromRelatedFieldName:function(p){var D=[];-1!==p.indexOf(this._relatedFieldPrefix)&&(p=p.split("/"),D=p.slice(1));return D},_toRelatedFieldName:function(p){var D=
"";p&&0<p.length&&(D=this._relatedFieldPrefix+p[0]+"/"+p[1]);return D},_queryRelatedRecords:function(p,D){var C=p.getSourceLayer(),G=new x;G.outFields=["*"];G.relationshipId=D.id;G.objectIds=[p.attributes[C.objectIdField]];return C.queryRelatedFeatures(G)},_removeEmptyHref:function(p){return p.replace(/href=(""|'')/gi,"")},_chunkWhereInClause:function(p,D,C){for(var G=0,z=[];G<D.length;)z.push(p+" IN ("+D.slice(G,C+G)+")"),G+=C;return z.join(" OR ")}});l("extend-esri")&&(b.PopupInfo=b.PopupInfoTemplate=
B);return B})},"dojox/html/entities":function(){define(["dojo/_base/lang"],function(B){var y=B.getObject("dojox.html.entities",!0),c=function(q,l){if(l._encCache&&l._encCache.regexp&&l._encCache.mapper&&l.length==l._encCache.length){var m=l._encCache.mapper;var h=l._encCache.regexp}else{m={};h=["["];var f;for(f=0;f<l.length;f++)m[l[f][0]]="\x26"+l[f][1]+";",h.push(l[f][0]);h.push("]");h=new RegExp(h.join(""),"g");l._encCache={mapper:m,regexp:h,length:l.length}}return q=q.replace(h,function(d){return m[d]})},
u=function(q,l){if(l._decCache&&l._decCache.regexp&&l._decCache.mapper&&l.length==l._decCache.length){var m=l._decCache.mapper;var h=l._decCache.regexp}else{m={};h=["("];var f;for(f=0;f<l.length;f++){var d="\x26"+l[f][1]+";";f&&h.push("|");m[d]=l[f][0];h.push(d)}h.push(")");h=new RegExp(h.join(""),"g");l._decCache={mapper:m,regexp:h,length:l.length}}return q=q.replace(h,function(a){return m[a]})};y.html=[["\x26","amp"],['"',"quot"],["\x3c","lt"],["\x3e","gt"],["\u00a0","nbsp"]];y.latin=[["\u00a1",
"iexcl"],["\u00a2","cent"],["\u00a3","pound"],["\u20ac","euro"],["\u00a4","curren"],["\u00a5","yen"],["\u00a6","brvbar"],["\u00a7","sect"],["\u00a8","uml"],["\u00a9","copy"],["\u00aa","ordf"],["\u00ab","laquo"],["\u00ac","not"],["\u00ad","shy"],["\u00ae","reg"],["\u00af","macr"],["\u00b0","deg"],["\u00b1","plusmn"],["\u00b2","sup2"],["\u00b3","sup3"],["\u00b4","acute"],["\u00b5","micro"],["\u00b6","para"],["\u00b7","middot"],["\u00b8","cedil"],["\u00b9","sup1"],["\u00ba","ordm"],["\u00bb","raquo"],
["\u00bc","frac14"],["\u00bd","frac12"],["\u00be","frac34"],["\u00bf","iquest"],["\u00c0","Agrave"],["\u00c1","Aacute"],["\u00c2","Acirc"],["\u00c3","Atilde"],["\u00c4","Auml"],["\u00c5","Aring"],["\u00c6","AElig"],["\u00c7","Ccedil"],["\u00c8","Egrave"],["\u00c9","Eacute"],["\u00ca","Ecirc"],["\u00cb","Euml"],["\u00cc","Igrave"],["\u00cd","Iacute"],["\u00ce","Icirc"],["\u00cf","Iuml"],["\u00d0","ETH"],["\u00d1","Ntilde"],["\u00d2","Ograve"],["\u00d3","Oacute"],["\u00d4","Ocirc"],["\u00d5","Otilde"],
["\u00d6","Ouml"],["\u00d7","times"],["\u00d8","Oslash"],["\u00d9","Ugrave"],["\u00da","Uacute"],["\u00db","Ucirc"],["\u00dc","Uuml"],["\u00dd","Yacute"],["\u00de","THORN"],["\u00df","szlig"],["\u00e0","agrave"],["\u00e1","aacute"],["\u00e2","acirc"],["\u00e3","atilde"],["\u00e4","auml"],["\u00e5","aring"],["\u00e6","aelig"],["\u00e7","ccedil"],["\u00e8","egrave"],["\u00e9","eacute"],["\u00ea","ecirc"],["\u00eb","euml"],["\u00ec","igrave"],["\u00ed","iacute"],["\u00ee","icirc"],["\u00ef","iuml"],
["\u00f0","eth"],["\u00f1","ntilde"],["\u00f2","ograve"],["\u00f3","oacute"],["\u00f4","ocirc"],["\u00f5","otilde"],["\u00f6","ouml"],["\u00f7","divide"],["\u00f8","oslash"],["\u00f9","ugrave"],["\u00fa","uacute"],["\u00fb","ucirc"],["\u00fc","uuml"],["\u00fd","yacute"],["\u00fe","thorn"],["\u00ff","yuml"],["\u0192","fnof"],["\u0391","Alpha"],["\u0392","Beta"],["\u0393","Gamma"],["\u0394","Delta"],["\u0395","Epsilon"],["\u0396","Zeta"],["\u0397","Eta"],["\u0398","Theta"],["\u0399","Iota"],["\u039a",
"Kappa"],["\u039b","Lambda"],["\u039c","Mu"],["\u039d","Nu"],["\u039e","Xi"],["\u039f","Omicron"],["\u03a0","Pi"],["\u03a1","Rho"],["\u03a3","Sigma"],["\u03a4","Tau"],["\u03a5","Upsilon"],["\u03a6","Phi"],["\u03a7","Chi"],["\u03a8","Psi"],["\u03a9","Omega"],["\u03b1","alpha"],["\u03b2","beta"],["\u03b3","gamma"],["\u03b4","delta"],["\u03b5","epsilon"],["\u03b6","zeta"],["\u03b7","eta"],["\u03b8","theta"],["\u03b9","iota"],["\u03ba","kappa"],["\u03bb","lambda"],["\u03bc","mu"],["\u03bd","nu"],["\u03be",
"xi"],["\u03bf","omicron"],["\u03c0","pi"],["\u03c1","rho"],["\u03c2","sigmaf"],["\u03c3","sigma"],["\u03c4","tau"],["\u03c5","upsilon"],["\u03c6","phi"],["\u03c7","chi"],["\u03c8","psi"],["\u03c9","omega"],["\u03d1","thetasym"],["\u03d2","upsih"],["\u03d6","piv"],["\u2022","bull"],["\u2026","hellip"],["\u2032","prime"],["\u2033","Prime"],["\u203e","oline"],["\u2044","frasl"],["\u2118","weierp"],["\u2111","image"],["\u211c","real"],["\u2122","trade"],["\u2135","alefsym"],["\u2190","larr"],["\u2191",
"uarr"],["\u2192","rarr"],["\u2193","darr"],["\u2194","harr"],["\u21b5","crarr"],["\u21d0","lArr"],["\u21d1","uArr"],["\u21d2","rArr"],["\u21d3","dArr"],["\u21d4","hArr"],["\u2200","forall"],["\u2202","part"],["\u2203","exist"],["\u2205","empty"],["\u2207","nabla"],["\u2208","isin"],["\u2209","notin"],["\u220b","ni"],["\u220f","prod"],["\u2211","sum"],["\u2212","minus"],["\u2217","lowast"],["\u221a","radic"],["\u221d","prop"],["\u221e","infin"],["\u2220","ang"],["\u2227","and"],["\u2228","or"],["\u2229",
"cap"],["\u222a","cup"],["\u222b","int"],["\u2234","there4"],["\u223c","sim"],["\u2245","cong"],["\u2248","asymp"],["\u2260","ne"],["\u2261","equiv"],["\u2264","le"],["\u2265","ge"],["\u2282","sub"],["\u2283","sup"],["\u2284","nsub"],["\u2286","sube"],["\u2287","supe"],["\u2295","oplus"],["\u2297","otimes"],["\u22a5","perp"],["\u22c5","sdot"],["\u2308","lceil"],["\u2309","rceil"],["\u230a","lfloor"],["\u230b","rfloor"],["\u2329","lang"],["\u232a","rang"],["\u25ca","loz"],["\u2660","spades"],["\u2663",
"clubs"],["\u2665","hearts"],["\u2666","diams"],["\u0152","OElig"],["\u0153","oelig"],["\u0160","Scaron"],["\u0161","scaron"],["\u0178","Yuml"],["\u02c6","circ"],["\u02dc","tilde"],["\u2002","ensp"],["\u2003","emsp"],["\u2009","thinsp"],["\u200c","zwnj"],["\u200d","zwj"],["\u200e","lrm"],["\u200f","rlm"],["\u2013","ndash"],["\u2014","mdash"],["\u2018","lsquo"],["\u2019","rsquo"],["\u201a","sbquo"],["\u201c","ldquo"],["\u201d","rdquo"],["\u201e","bdquo"],["\u2020","dagger"],["\u2021","Dagger"],["\u2030",
"permil"],["\u2039","lsaquo"],["\u203a","rsaquo"]];y.encode=function(q,l){q&&(l?q=c(q,l):(q=c(q,y.html),q=c(q,y.latin)));return q};y.decode=function(q,l){q&&(l?q=u(q,l):(q=u(q,y.html),q=u(q,y.latin)));return q};return y})},"esri/ArcadeExpression":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./layers/support/attributeUtils ./support/expressionUtils".split(" "),function(B,y,c,u,q,l){B=B(null,{declaredClass:"esri.ArcadeExpression",expression:null,profile:null,returnType:null,
async:null,id:null,syntaxTree:null,_traits:null,_attributeDef:null,_attributeCache:null,_compiled:!1,constructor:function(m){y.mixin(this,m);this.returnType=this.returnType||"string";this.id=q.getAttributeId(this.expression);this._setSyntaxTree(this.profile.parse(this));this.async=this.async||this.profile.isAsync(this)},hasGeometryOperations:function(){var m=this._traits.geometryOperations;void 0===m&&(m=this._traits.geometryOperations=l.hasGeometryOperations(this.syntaxTree));return m},hasFeatureSetOperations:function(){var m=
this._traits.featureSetOperations;void 0===m&&(m=this._traits.featureSetOperations=l.hasFeatureSetOperations(this.syntaxTree));return m},hasVariable:function(m){var h=this._traits.variables;void 0===h[m]&&(h[m]=l.hasVariable(this.syntaxTree,m));return h[m]},hasFunction:function(m){var h=this._traits.functions;void 0===h[m]&&(h[m]=l.hasFunction(this.syntaxTree,m));return h[m]},evaluate:function(m){this._compile();var h=this._attributeCache.compiledFunc;return this.async?l.executeAsyncFunction(h,m):
l.executeFunction(h,m)},_setSyntaxTree:function(m){this.syntaxTree=m;this._compiled=!1;this._traits={variables:{},functions:{}};this._createLegacyValueObjects()},_createLegacyValueObjects:function(){this._attributeDef={valueExpression:this.expression};this._attributeCache={attributeInfo:this._attributeDef,isNumeric:"number"===this.returnType,idSource:this.expression,id:this.id,hasExpr:!0,compiledFunc:null,syntaxTree:this.syntaxTree,isScaleDriven:!1,dependsOnView:this.hasVariable("$view"),dependsOnGeometry:this.hasGeometryOperations(),
isJSFunc:!1}},_compile:function(){this._compiled||(this._attributeCache.compiledFunc=this.profile.compile(this),this._compiled=!0)}});c("extend-esri")&&(u.ArcadeExpression=B);return B})},"esri/tasks/RelationshipQuery":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/json","dojo/has","../kernel"],function(B,y,c,u,q){B=B(null,{declaredClass:"esri.tasks.RelationshipQuery",definitionExpression:"",relationshipId:null,returnGeometry:!1,objectIds:null,outSpatialReference:null,outFields:null,
orderByFields:null,toJson:function(){var l={definitionExpression:this.definitionExpression,relationshipId:this.relationshipId,returnGeometry:this.returnGeometry,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision},m=this.objectIds,h=this.outFields,f=this.outSpatialReference,d=this.orderByFields;m&&(l.objectIds=m.join(","));h&&(l.outFields=h.join(","));f&&(l.outSR=f.wkid||c.toJson(f.toJson()));d&&(l.orderByFields=d.join(","));l._ts=this._ts;return l}});u("extend-esri")&&
y.setObject("tasks.RelationshipQuery",B,q);return B})},"esri/arcadeProfiles/popupProfile":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../arcade/Feature ../support/expressionUtils ./utils".split(" "),function(B,y,c,u,q,l,m,h){B=new (B(null,{declaredClass:"esri.arcadeProfiles.PopupProfile",defaults:{globals:{featureSet:["$layer","$datastore","$map"],async:["$layer","$datastore","$map"]},context:{vars:{$feature:"any",$layer:"any",$datastore:"any",$map:"any"}}},
initialize:function(f){var d=[];h.hasGeometryOperations(f)&&d.push(m.enableGeometryOperations());(h.hasFeatureSetOperations(f)||h.hasVariables(f,this.defaults.globals.featureSet))&&d.push(m.enableFeatureSetOperations());h.isAsync(f)&&d.push(m.enableAsyncOperations());return q(d)},isAsync:function(f){f=[f];return h.hasFeatureSetOperations(f)||h.hasVariables(f,this.defaults.globals.async)},parse:function(f){return m.createSyntaxTree(f.expression)},compile:function(f){var d=y.clone(this.defaults.context);
d.useAsync=f.async;return f.syntaxTree?m.createFunction(f.syntaxTree,d):null},getEvalOptions:function(f){var d=f.expression,a=f.feature,b=f.layer,e=f.map;f=f.spatialReference;a=a&&d.hasVariable("$feature")?l.createFromGraphicLikeObject(a.geometry,a.attributes,b):null;var r;if(b){var t={spatialReference:f};d.hasVariable("$layer")&&(r=b.getMap()?m.createFeatureSetFromLayer(b,t):m.createFeatureSetFromLayerUrl(b.url,t));if(d.hasVariable("$datastore"))var g=(g=h.getServiceUrl(b.url))?m.createFeatureSetCollectionFromServiceUrl(g,
t):null}d=e&&d.hasVariable("$map")?m.createFeatureSetCollectionFromMap(e):null;return{context:{vars:{$feature:a,$layer:r,$datastore:g,$map:d},spatialReference:f}}}}));c("extend-esri")&&y.setObject("arcadeProfiles.popupProfile",B,u);return B})},"esri/dijit/PopupRenderer":function(){define("require dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/kernel dojo/sniff dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojox/html/entities dijit/_Widget dijit/_Templated ../kernel ../lang ../urlUtils ./_EventedWidget dojo/i18n!../nls/jsapi dojo/NodeList-dom".split(" "),
function(B,y,c,u,q,l,m,h,f,d,a,b,e,r,t,g,k,x,v,A,n){var w=0,p=n.widgets.popup,D=n.widgets.templatePicker;y=y([A,t,g],{declaredClass:"esri.dijit._PopupRenderer",constructor:function(){this._nls=u.mixin({},p)},templateString:"\x3cdiv class\x3d'esriViewPopup'\x3e\x3cdiv class\x3d'statusSection hidden' dojoAttachPoint\x3d'_status'\x3e\x3c/div\x3e\x3cdiv class\x3d'mainSection'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_title'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d'_description'\x3e\x3c/div\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'attachmentsSection hidden'\x3e\x3cdiv\x3e${_nls.NLS_attach}:\x3c/div\x3e\x3cul dojoAttachPoint\x3d'_attachmentsList'\x3e\x3c/ul\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaSection hidden'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_mediaTitle'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv class\x3d'caption' dojoAttachPoint\x3d'_mediaCaption'\x3e\x3c/div\x3e\x3cdiv class\x3d'gallery' dojoAttachPoint\x3d'_gallery'\x3e\x3cdiv class\x3d'mediaHandle prev' dojoAttachPoint\x3d'_prevMedia' dojoAttachEvent\x3d'onclick: _goToPrevMedia'\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaHandle next' dojoAttachPoint\x3d'_nextMedia' dojoAttachEvent\x3d'onclick: _goToNextMedia'\x3e\x3c/div\x3e\x3cul class\x3d'summary'\x3e\x3cli class\x3d'image mediaCount hidden' dojoAttachPoint\x3d'_imageCount'\x3e0\x3c/li\x3e\x3cli class\x3d'image mediaIcon hidden'\x3e\x3c/li\x3e\x3cli class\x3d'chart mediaCount hidden' dojoAttachPoint\x3d'_chartCount'\x3e0\x3c/li\x3e\x3cli class\x3d'chart mediaIcon hidden'\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d'frame' dojoAttachPoint\x3d'_mediaFrame'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummarySection hidden' dojoAttachPoint\x3d'_editSummarySection'\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3cdiv class\x3d'break hidden' dojoAttachPoint\x3d'_mediaBreak'\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummary' dojoAttachPoint\x3d'_editSummary'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e",
showTitle:!0,startup:function(){this.inherited(arguments);this._showStatus(D.loading);this._contentDfd=this.template.getComponents(this.graphic).then(u.hitch(this,this._handleComponentsSuccess)).otherwise(u.hitch(this,this._handleComponentsError))},destroy:function(){this._contentDfd&&this._contentDfd.cancel();this._attachmentsDfd&&this._attachmentsDfd.cancel();this._destroyFrame();this.template=this.graphic=this._nls=this._mediaInfos=this._mediaPtr=this._contentDfd=this._attachmentsDfd=null;this.inherited(arguments)},
_goToPrevMedia:function(){0>this._mediaPtr-1||(this._mediaPtr--,this._updateUI(),this._displayMedia())},_goToNextMedia:function(){this._mediaPtr+1!==this._mediaInfos.length&&(this._mediaPtr++,this._updateUI(),this._displayMedia())},_updateUI:function(){var C=this._mediaInfos,G=C.length,z=this.domNode,E=this._prevMedia,H=this._nextMedia;if(1<G){var I=0,M=0;q.forEach(C,function(T){"image"===T.type?I++:-1!==T.type.indexOf("chart")&&M++});I&&(d.set(this._imageCount,"innerHTML",I),l.query(".summary .image",
z).removeClass("hidden"));M&&(d.set(this._chartCount,"innerHTML",M),l.query(".summary .chart",z).removeClass("hidden"))}else l.query(".summary",z).addClass("hidden"),a.add(E,"hidden"),a.add(H,"hidden");C=this._mediaPtr;0===C?a.add(E,"hidden"):a.remove(E,"hidden");C===G-1?a.add(H,"hidden"):a.remove(H,"hidden");this._destroyFrame()},_displayMedia:function(){var C=this._mediaInfos[this._mediaPtr],G=C.title,z=C.caption,E=l.query(".mediaSection .hzLine",this.domNode)[0];d.set(this._mediaTitle,"innerHTML",
G);a[G?"remove":"add"](this._mediaTitle,"hidden");d.set(this._mediaCaption,"innerHTML",z);a[z?"remove":"add"](this._mediaCaption,"hidden");a[G&&z?"remove":"add"](E,"hidden");this._rid=null;if("image"===C.type)this._showImage(C);else{var H=this;G=["dojox/charting/Chart2D","dojox/charting/action2d/Tooltip"];z=C.value.theme||this.chartTheme;u.isString(z)&&(z=z.replace(/\./gi,"/"),-1===z.indexOf("/")&&(z="dojox/charting/themes/"+z));z||(z="./Rainbow");G.push(z);try{var I=this._rid=w++;B(G,function(M,
T,Y){I===H._rid&&(H._rid=null,H._showChart(C.type,C.value,M,T,Y))})}catch(M){console.log("PopupRenderer: error loading modules")}}},_preventNewTab:function(C){return(C=C&&u.trim(C).toLowerCase())&&(0===C.indexOf("mailto:")||0===C.indexOf("tel:"))},_showImage:function(C){a.add(this._mediaFrame,"image");var G=e.get(this._gallery,"height"),z=C.value,E=r.decode(z.linkURL);z=r.decode(z.sourceURL);var H;E&&(H=b.create("a",{href:E,target:this._preventNewTab(E)?"":"_blank"},this._mediaFrame));E=C.refreshInterval?
this._addURLParameter(z,"timestamp",Date.now()):z;b.create("img",{className:"esriPopupMediaImage",src:E},H||this._mediaFrame);var I=l.query(".esriPopupMediaImage",this._mediaFrame)[0];this._imageLoadHandle=c.connect(I,"onload",this,function(){this._clearImageHandles();this._imageLoaded(I,G);this._initImageRefresh(C)})},_addURLParameter:function(C,G,z){var E=-1===C.indexOf("?")?"?":"\x26";return C+E+G+"\x3d"+z},_initImageRefresh:function(C){if(C.refreshInterval){var G=6E4*C.refreshInterval;this._imageRefreshHandle=
setTimeout(u.hitch(this,function(){this._destroyFrame();this._showImage(C)}),G)}},_clearImageHandles:function(){c.disconnect(this._imageLoadHandle);this._imageLoadHandle=null;clearTimeout(this._imageRefreshHandle);this._imageRefreshHandle=null},_showChart:function(C,G,z,E,H){a.remove(this._mediaFrame,"image");z=this._chart=new z(b.create("div",{"class":"chart"},this._mediaFrame),{margins:{l:4,t:4,r:4,b:4}});H&&z.setTheme(H);switch(C){case "piechart":z.addPlot("default",{type:"Pie",labels:!1});z.addSeries("Series A",
G.fields);break;case "linechart":z.addPlot("default",{type:"Markers"});z.addAxis("x",{min:0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1});z.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});q.forEach(G.fields,function(I,M){I.x=M+1});z.addSeries("Series A",G.fields);break;case "columnchart":z.addPlot("default",{type:"Columns",gap:3});z.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});z.addSeries("Series A",G.fields);break;case "barchart":z.addPlot("default",{type:"Bars",
gap:3}),z.addAxis("x",{includeZero:!0,fixUpper:"minor",minorLabels:!1}),z.addAxis("y",{vertical:!0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1}),z.addSeries("Series A",G.fields)}this._action=new E(z);z.render()},_destroyFrame:function(){this._rid=null;this._clearImageHandles();this._chart&&(this._chart.destroy(),this._chart=null);this._action&&(this._action.destroy(),this._action=null);d.set(this._mediaFrame,"innerHTML","")},_imageLoaded:function(C,G){var z=C.height;z<G&&e.set(C,"marginTop",
Math.round((G-z)/2)+"px")},_attListHandler:function(C,G){if(C===this._attachmentsDfd){this._attachmentsDfd=null;var z="";G instanceof Error||!G||!G.length||q.forEach(G,function(E){z+="\x3cli\x3e";z+="\x3ca href\x3d'"+v.addProxy(E.url)+"' target\x3d'_blank'\x3e"+(E.name||"[No name]")+"\x3c/a\x3e";z+="\x3c/li\x3e"});d.set(this._attachmentsList,"innerHTML",z||"\x3cli\x3e"+this._nls.NLS_noAttach+"\x3c/li\x3e")}},_createLinkIfURI:function(C,G){var z=v.getURIInfo(C);if(z){var E=C.match(z.pattern);C=E&&
E[2];E=r.decode(E[1]);b.create("a",{target:"_blank",href:E,title:E,innerHTML:x.substitute({appName:z.appName,hierPart:C},z.label)},G)}else d.set(G,"innerHTML",C)},_showStatus:function(C){d.set(this._status,"innerHTML",C);a.remove(this._status,"hidden");l.query(".mainSection",this.domNode).addClass("hidden")},_hideStatus:function(){d.set(this._status,"innerHTML","");a.add(this._status,"hidden");l.query(".mainSection",this.domNode).removeClass("hidden")},_handleComponentsSuccess:function(C){if(C){this._hideStatus();
var G=this.showTitle?C.title:"",z=C.description,E=C.fields,H=C.mediaInfos,I=this.domNode,M=this._nls,T=this,Y=this.template,fa=this.graphic;this._prevMedia.title=M.NLS_prevMedia;this._nextMedia.title=M.NLS_nextMedia;d.set(this._title,"innerHTML",G);G||a.add(this._title,"hidden");if(!C.hasDescription&&E&&(z="",E=q.map(E,function(X){var ea=b.create("tr",{vAlign:"top"});b.create("td",{className:"attrName",innerHTML:r.encode(X[0])},ea);var ma=b.create("td",{className:"attrValue"},ea);this._createLinkIfURI(X[1],
ma);return ea},this),E.length)){var ca=b.create("table",{className:"attrTable",cellPadding:"0px",cellSpacing:"0px"});q.forEach(E,function(X){ca.appendChild(X)})}ca?(this._description.appendChild(ca),z=!0):d.set(this._description,"innerHTML",z);z||a.add(this._description,"hidden");l.query("a",this._description).forEach(function(X){T._preventNewTab(X.href)?"_blank"===X.target&&d.remove(X,"target"):d.set(X,"target","_blank")});G&&z?l.query(".mainSection .hzLine",I).removeClass("hidden"):G||z?l.query(".mainSection .hzLine",
I).addClass("hidden"):l.query(".mainSection",I).addClass("hidden");if(G=this._attachmentsDfd=Y.getAttachments(fa))G.addBoth(u.hitch(this,this._attListHandler,G)),d.set(this._attachmentsList,"innerHTML","\x3cli\x3e"+M.NLS_searching+"...\x3c/li\x3e"),l.query(".attachmentsSection",I).removeClass("hidden");H&&H.length&&(l.query(".mediaSection",I).removeClass("hidden"),f.setSelectable(this._mediaFrame,!1),this._mediaInfos=H,this._mediaPtr=0,this._updateUI(),this._displayMedia());C.editSummary&&(d.set(this._editSummary,
"innerHTML",C.editSummary),H&&H.length&&a.remove(this._mediaBreak,"hidden"),a.remove(this._editSummarySection,"hidden"));this.emit("content-update")}else this._showStatus(p.NLS_noInfo)},_handleComponentsError:function(C){C&&"cancel"===C.dojoType||(console.log("PopupRenderer: error loading template",C),this._showStatus(p.NLS_noInfo))}});m("extend-esri")&&u.setObject("dijit._PopupRenderer",y,k);return y})},"dijit/_Templated":function(){define("./_WidgetBase ./_TemplatedMixin ./_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/kernel".split(" "),
function(B,y,c,u,q,l,m){l.extend(B,{waiRole:"",waiState:""});return q("dijit._Templated",[y,c],{constructor:function(){m.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0")},_processNode:function(h,f){var d=this.inherited(arguments),a=f(h,"waiRole");a&&h.setAttribute("role",a);(a=f(h,"waiState"))&&u.forEach(a.split(/\s*,\s*/),function(b){-1!=b.indexOf("-")&&(b=b.split("-"),h.setAttribute("aria-"+b[0],b[1]))});
return d}})})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(B,y,c,u,q){return c("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,contextRequire:null,_beforeFillContent:function(){if(/dojoType|data-dojo-type/i.test(this.domNode.innerHTML)){var l=this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0);q.parse(l,{noStart:!this._earlyTemplatedStartup,
template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(u.hitch(this,function(m){this._startupWidgets=m;for(var h=0;h<m.length;h++)this._processTemplateNode(m[h],function(f,d){return f[d]},function(f,d,a){return d in f?f.connect(f,d,a):f.on(d,a,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");
}},_processTemplateNode:function(l,m,h){return m(l,"dojoType")||m(l,"data-dojo-type")?!0:this.inherited(arguments)},startup:function(){B.forEach(this._startupWidgets,function(l){l&&!l._started&&l.startup&&l.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"esri/dijit/_EventedWidget":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on ../Evented dijit/_WidgetBase".split(" "),function(B,y,c,u,q,l){return B([l,q],{_onMap:function(m){var h=this.constructor._onMap;
h&&h.FINAL||(delete this.constructor._onMap,h=this.registerConnectEvents(),h.FINAL=!0);m=m.toLowerCase();if(h[m])var f=this[h[m].method];else m=this._onCamelCase(m),this[m]&&(f=m);return f},on:function(m,h){var f=this._onMap(m),d=m.replace(/\-/g,""),a="on"+d in this.domNode;return f||!a?this.inherited(arguments):this.own(u(this.domNode,d,h))[0]},emit:function(m,h,f){var d,a=m.toLowerCase(),b=this.constructor._onMap||this.registerConnectEvents();var e=this[this._onMap(a)];h=h||{};h.target||(h.target=
this);if(e&&b&&b[a]){this._onObj2Arr(function(){d=Array.prototype.slice.call(arguments)},b[a].argKeys)(h);var r=y.mixin({},arguments);r[2]=d;r[0]=b[a].name.replace(/^on/,"")}return this.inherited(r||arguments)}})})},"esri/dijit/Legend/utils":function(){define(["dojo/_base/lang","../../lang","dojo/i18n!../../nls/jsapi"],function(B,y,c){var u=c.widgets.legend;return{getVisualVariableTitle:function(q,l){var m=q.field,h=q.normalizationField,f=!1,d=!1,a=!1;m=B.isFunction(m)?null:m;h=B.isFunction(h)?null:
h;if(q.legendOptions&&q.legendOptions.title)var b=q.legendOptions.title;else if(q.valueExpressionTitle)b=q.valueExpressionTitle;else{if(l.renderer&&l.renderer.authoringInfo&&l.renderer.authoringInfo.visualVariables){var e=l.renderer.authoringInfo.visualVariables;for(q=0;q<e.length;q++){var r=e[q];if("colorInfo"===r.type&&"ratio"===r.style){f=!0;break}else if("colorInfo"===r.type&&"percent"===r.style){d=!0;break}else if("colorInfo"===r.type&&"percentTotal"===r.style){a=!0;break}}}(f=a&&"showRatioPercentTotal"||
d&&"showRatioPercent"||f&&"showRatio"||h&&"showNormField"||m&&"showField"||null)&&(b=y.substitute({field:m&&l.getFieldLabel(m),normField:h&&l.getFieldLabel(h)},"showField"===f?"${field}":u[f]))}return b},getRendererTitle:function(q,l){if(q){if("esri.renderer.ClassBreaksRenderer"===q.declaredClass){var m=q.attributeField;var h=q.normalizationField;var f="percent-of-total"===q.normalizationType}m=B.isFunction(m)?null:m;h=B.isFunction(h)?null:h;if(q.legendOptions&&q.legendOptions.title)var d=q.legendOptions.title;
else q.valueExpressionTitle?d=q.valueExpressionTitle:(q=h&&"showNormField"||(f?"showNormPct":null)||m&&"showField"||null)&&(d=y.substitute({field:m&&l.getFieldLabel(m),normField:h&&l.getFieldLabel(h)},"showField"===q?"${field}":u[q]))}return d}}})},"esri/layers/clustering/GeohashAggregation":function(){define("dojo/has dojo/_base/declare dojo/_base/lang dojo/_base/array ../../kernel ../../Evented ../../geometry/Point ../../geometry/Extent ../../geometry/mathUtils ../../support/expressionUtils ../../core/timerUtils ../support/attributeUtils ./geohashUtils ./statUtils".split(" "),
function(B,y,c,u,q,l,m,h,f,d,a,b,e,r){y=y(l,{loaded:!1,started:!1,map:null,layer:null,lod:null,tolerance:null,clusterMode:null,clusterRadius:null,sortEnabled:!0,filterEnabled:!0,bufferEnabled:!0,updateEnabled:!0,clusters:null,clustersEnabled:!0,statisticInfos:null,defaults:{lod:1,tolerance:0,clusterMode:"auto",clusterRadius:80,sortEnabled:!0,filterEnabled:!0,bufferEnabled:!0,updateEnabled:!0},_eventHandles:null,_updateHandle:null,_indexHandle:null,_cellIndex:null,_globalIndex:null,_perfProfile:null,
_indexUpdated:!1,_cellSizeScaleFactor:1.5,_extentScaleFactor:1.25,_maxGeohashLength:12,_minClusterRadius:15,_levelChange:!0,_clusterFieldPrefix:"cluster_",_mapLevelChange:!1,constructor:function(t){this._update=c.hitch(this,this._update);this._indexFeatures=c.hitch(this,this._indexFeatures);this._eventHandles=[];this._globalIndex={numFeatures:null,fullExtent:null,lodStats:null};this._perfProfile={lastIndex:{total:null,numFeatures:0},lastUpdate:{cells:null,clusters:null,total:null}};this.clusters=
[];this.map=t.map;this.layer=t.layer;this.setLod(t.lod);this.setTolerance(t.tolerance);this.setClusterMode(t.clusterMode);this.setClusterRadius(t.clusterRadius);this.setSortEnabled(t.sortEnabled);this.setFilterEnabled(t.filterEnabled);this.setBufferEnabled(t.bufferEnabled);this.setUpdateEnabled(t.updateEnabled);this.setStatisticInfos(t.statisticInfos);this._load();this.loaded?this._startup():this._eventHandles.push(this.on("load",c.hitch(this,this._startup)))},destroy:function(t){this._displayFeatures(!0,
t);u.forEach(this._eventHandles,function(g){g.remove()});a.clearTimeout(this._updateHandle);a.clearTimeout(this._indexHandle);this._cellIndex=this._globalIndex=this._eventHandles=this._updateHandle=this._indexHandle=this.map=this.layer=this.clusters=null},setLod:function(t){var g=this.lod;this.lod=t||this.defaults.lod;g!==this.lod&&this.update()},setTolerance:function(t){var g=this.tolerance;this.tolerance=t||this.defaults.tolerance;g!==this.tolerance&&this.update()},setClusterMode:function(t){var g=
this.clusterMode;this.clusterMode=t||this.defaults.clusterMode;this._evalClusterParams();g!==this.clusterMode&&this.update()},setClusterRadius:function(t){var g=this.clusterRadius;this.clusterRadius=null!=t?t:this.defaults.clusterRadius;this._evalClusterParams();g!==this.clusterRadius&&this.update()},setSortEnabled:function(t){var g=this.sortEnabled;this.sortEnabled=null!=t?!!t:this.defaults.sortEnabled;g!==this.sortEnabled&&this.update()},setFilterEnabled:function(t){var g=this.filterEnabled;this.filterEnabled=
null!=t?!!t:this.defaults.filterEnabled;g!==this.filterEnabled&&this.update()},setBufferEnabled:function(t){var g=this.bufferEnabled;this.bufferEnabled=null!=t?!!t:this.defaults.bufferEnabled;g!==this.bufferEnabled&&this.update()},setUpdateEnabled:function(t){var g=this.updateEnabled;(this.updateEnabled=null!=t?!!t:this.defaults.updateEnabled)&&g!==this.updateEnabled&&(this._mapLevelChange=!0,this.update())},setStatisticInfos:function(t){this.statisticInfos=t||[];this.loaded&&this._applyStatInfos(this.statisticInfos)},
update:function(){this.loaded&&null==this._updateHandle&&(this._updateHandle=a.setTimeout(this._update,a.priority.HIGH))},isUpdateScheduled:function(){return null!=this._updateHandle},index:function(){this.loaded&&null==this._indexHandle&&(this._indexHandle=a.setTimeout(this._indexFeatures,a.priority.HIGH))},getCell:function(t){return this._cellIndex[t.length][t]},getCluster:function(t){var g;u.some(this.clusters,function(k){-1<u.indexOf(k.geohashes,t)&&(g=k);return!!g});return g},getCellsInCluster:function(t){var g=
[];u.forEach(t&&t.geohashes,function(k){(k=this.getCell(k))&&g.push(k)},this);return g},getFeaturesInCluster:function(t){var g=[];t=this.getCellsInCluster(t);u.forEach(t,function(k){Array.prototype.push.apply(g,k.features)});return g},toggleFeatureVisibility:function(t){this.index()},getCurrentLodStats:function(){var t=this._globalIndex.lodStats;return t&&t[this.lod]},getNumFeatures:function(){return this._globalIndex.numFeatures},getFullExtent:function(){var t=this._globalIndex.fullExtent;return t&&
Infinity!==t.xmin?new h(t):null},_load:function(){this._displayFeatures(!1);this._checkLoadStatus();this.map.loaded||this._eventHandles.push(this.map.on("load",c.hitch(this,this._checkLoadStatus)));this.layer.loaded||this._eventHandles.push(this.layer.on("load",c.hitch(this,this._checkLoadStatus)))},_checkLoadStatus:function(){if(this.map.loaded&&this.layer.loaded){if("esriGeometryPoint"!==this.layer.geometryType)var t=Error("GeohashAggregation is supported only for points");else{var g=this.map.spatialReference;
g.isWebMercator()||4326===g.wkid||(t=Error("GeohashAggregation is supported only when map spatial reference is WGS84 or WebMercator"))}t?(this.loadError=t,this.emit("load-error",{error:t})):(this.loaded=!0,this.emit("load"))}},_startup:function(){this._evalUpdateStatus();this.index();this._processExtentChange();this._eventHandles.push(this.layer.on("update-end",c.hitch(this,this.index)),this.layer.on("edits-complete",c.hitch(this,this.index)),this.layer.on("graphics-clear",c.hitch(this,this.index)),
this.layer.on("suspend",c.hitch(this,this._evalUpdateStatus)),this.layer.on("resume",c.hitch(this,this._evalUpdateStatus)),this.map.on("extent-change",c.hitch(this,this._processExtentChange)))},_evalUpdateStatus:function(){this.setUpdateEnabled(!this.layer.suspended)},_processExtentChange:function(t){this._mapLevelChange=!(!t||!t.levelChange);this._evalClusterParams();this.update()},_update:function(){this._updateHandle=null;if(this.updateEnabled){this.emit("update-start");if(this.clustersEnabled){var t=
this.map.geographicExtent;if(t){var g=this._getIntersectingCells(t);t=this._getClusters(g.cells,t);this.clusters=t.clusters;this._applyStatInfosToClusters();g=g.profile;t=t.profile;var k=g.total+t.total;g.total=this._getElapsedTime(g.total);t.total=this._getElapsedTime(t.total);var x=this._perfProfile.lastUpdate={};x.cells=g;x.clusters=t;x.total=this._getElapsedTime(k)}}else this.clusters=[],this._perfProfile.lastUpdate=null;g=this._indexUpdated;this._indexUpdated=!1;t=this._mapLevelChange;this._mapLevelChange=
!1;this.emit("update-end",{levelChange:this._levelChange,mapLevelChange:t,indexChange:g})}},_displayFeatures:function(t,g){var k=this.layer;t=!t;k.suspendGraphics(t);!1!==g&&(t?k.clearNodes():k.redraw())},_indexFeatures:function(){this._indexHandle=null;var t=this._getTime();this._initializeIndexing();var g=0,k=this._globalIndex.fullExtent;u.forEach(this.layer.graphics,function(A){if(A.visible){var n=A.geometry,w=this._getLngLat(n);if(w){var p=n.getCacheValue("_geohash");void 0===p&&(p=e.pointToGeohash(w),
n.setCacheValue("_geohash",p||null))}p&&(this._addGeohashToIndex(p,A,w),g++,this._updateExtent(k,w))}},this);this._applyStatInfosToIndex();this._globalIndex.numFeatures=g;for(var x=this._globalIndex.lodStats,v=1;v<=this._maxGeohashLength;v++)x[v]=this._getLODStats(v,g);this._perfProfile.lastIndex.total=this._getElapsedTime(t,this._getTime());this._perfProfile.lastIndex.numFeatures=g;this._indexUpdated=!0;this.emit("index-complete");this.started||(this.started=!0,this.emit("start"));this.update()},
_initializeIndexing:function(){this._globalIndex={numFeatures:0,fullExtent:{xmin:Infinity,ymin:Infinity,xmax:-Infinity,ymax:-Infinity},lodStats:{}};for(var t=this._cellIndex=[],g=1;g<=this._maxGeohashLength;g++)t[g]={}},_getLngLat:function(t){if(t){var g=t.getLongitude();t=t.getLatitude();t=null!=g&&null!=t?{x:g,y:t}:null}return t},_addGeohashToIndex:function(t,g,k){for(var x=this._cellIndex,v="",A=0;A<this._maxGeohashLength;A++){v+=t[A];var n=x[v.length],w=n[v];w||(w=n[v]={count:0,centroid:{x:null,
y:null},extent:{xmin:Infinity,ymin:Infinity,xmax:-Infinity,ymax:-Infinity},features:[],geohash:v,statistics:null});this._updateItem(w,1,k,!0);w.features.push(g)}},_getLODStats:function(t,g){var k=this._cellIndex[t],x=0,v=Infinity,A=-Infinity,n=null,w;for(w in k){var p=k[w];x++;p.count<v&&(v=p.count);p.count>A&&(A=p.count)}0<x&&(n=Number((g/x).toFixed(2)));return{lod:t,count:x,min:Infinity===v?null:v,max:-Infinity===A?null:A,avg:n}},_evalClusterParams:function(){if(this.loaded&&"auto"===this.clusterMode){var t=
this._getClusterParams(this.map.getResolutionInMeters(),this.clusterRadius,this._minClusterRadius);this._levelChange=this.lod!==t.lod;this.lod=t.lod;this.tolerance=t.tolerance}},_getClusterParams:function(t,g,k){g<k&&(g=k);t=Math.ceil(t*g);g=this._getClosestLODRange(t).max;do k=this._getCellSize(g),(k=t>=this._cellSizeScaleFactor*k||1===k)||(g+=1);while(!k);k=t/this._getCellSize(g);return{lod:g,tolerance:t,multiplier:Number(k.toFixed(2))}},_getClosestLODRange:function(t){for(var g,k=this._maxGeohashLength;1<=
k;k--)if(this._getCellSize(k)>=t){g=k;break}null==g&&(g=1);t=g+1;t>this._maxGeohashLength&&(t=this._maxGeohashLength);return{min:g,max:t}},_getCellSize:function(t){t=e.getCellSizeInMeters(t);return Math.ceil(Math.min(t.width,t.height))},_sorter:function(t,g){var k=t.centroid,x=g.centroid;return t.count>g.count?-1:t.count<g.count?1:k.x>x.x?-1:k.x<x.x?1:0},_getIntersectingCells:function(t){var g=this._getTime();this.bufferEnabled&&(t=t.expand(this._extentScaleFactor));var k=e.getIntersecting(t,this.lod,
this.bufferEnabled?this.tolerance:0);t=this._getTime();var x=[],v=this.tolerance,A=this.sortEnabled;u.forEach(k,function(n){(n=this.getCell(n))&&x.push(n)},this);v&&A&&x.sort(this._sorter);k=this._getTime();return{cells:x,profile:{findCells:this._getElapsedTime(g,t),scanAndSortCells:this._getElapsedTime(t,k),total:k-g}}},_getClusters:function(t,g){var k=this._getTime(),x=[],v={},A={findCells:0};u.forEach(t,function(n,w){(n=this._createCluster(n,v,A))&&x.push(n)},this);this._markIntersecting(x,g);
this.filterEnabled&&(x=this._getIntersectingClusters(x));t=this._getTime();return{clusters:x,profile:{findCellsInCluster:this._getElapsedTime(A.findCells),total:t-k}}},_markIntersecting:function(t,g){var k=g.normalize();u.forEach(t,function(x){var v=x.centroid.x,A=x.centroid.y;x.isIntersecting=u.some(k,function(n){return v>=n.xmin&&v<=n.xmax&&A>=n.ymin&&A<=n.ymax})})},_getIntersectingClusters:function(t){return u.filter(t,function(g){return g.isIntersecting})},_createCluster:function(t,g,k){if(!g[t.geohash]){var x=
[{cell:t,distance:0}];if(this.tolerance){var v=this._getTime(),A=e.getNeighborsWithinDistance(t.centroid,this.lod,this.tolerance);k.findCells+=this._getTime()-v;u.forEach(A,function(n){if(n!==t.geohash&&(n=this.getCell(n))){var w=this._calculateDistance(t.centroid,n.centroid);w<=this.tolerance&&x.push({cell:n,distance:w})}},this)}return this._mergeCells(x,g)}},_calculateDistance:function(t,g){return f.getLength(e.geographicToWebMercator(t),e.geographicToWebMercator(g))},_mergeCells:function(t,g){var k=
this._initializeCluster({},t[0].cell.geohash);u.forEach(t,function(x){var v=x.cell,A=v.geohash;x=x.distance;var n=g[A];if(n)if(x<n.distance)this._removeCellFromCluster(A,g);else return;g[A]={cluster:k,distance:x};this._updateItem(k,v.count,v.centroid);k.geohashes.push(A)},this);return k},_removeCellFromCluster:function(t,g){var k=g[t].cluster;delete g[t];t=u.indexOf(k.geohashes,t);-1<t&&k.geohashes.splice(t,1);this._reevaluateCluster(k)},_reevaluateCluster:function(t){var g=t.geohashes;t=this._initializeCluster(t,
t.primary);u.forEach(g,function(k){var x=this.getCell(k);x&&(this._updateItem(t,x.count,x.centroid),t.geohashes.push(k))},this)},_initializeCluster:function(t,g){t.count=0;t.centroid=new m(null,null);t.geohashes=[];t.primary=g;t.statistics=null;return t},_applyStatInfos:function(t){t=this._getValidStatInfos(t);this._applyStatInfosToIndex(t);this._applyStatInfosToClusters(t)},_getValidStatInfos:function(t){var g=[];u.forEach(t,function(k){var x=k.attributeInfo;k=k.statisticType;var v="angle"===x.attributeType;
if(r.isSupportedStatisticType(k)&&(!v||"avg"===k)){var A="arithmetic"===x.rotationType;g.push({attributeCache:b.createAttributeCache(x,"type"===k),identifier:r.getStatisticId(x,k),statFunctions:r.getStatisticFunctions(k),isAngular:v,isDate:"date"===x.attributeType,isArithmetic:A})}});return g},_applyStatInfosToIndex:function(t){t=t||this._getValidStatInfos(this.statisticInfos);var g=this._cellIndex;if(g)for(var k=1;k<=this._maxGeohashLength;k++){var x=g[k],v;for(v in x)this._applyStatInfosToCell(x[v],
t)}},_applyStatInfosToCell:function(t,g){var k=this._initializeStats(t,g);u.forEach(t.features,function(x){this._calcFeatureStats(x,g,k)},this);this._summarizeStats(t,k,g)},_calcFeatureStats:function(t,g,k){t.attributes&&u.forEach(g,function(x){var v=k[x.identifier],A=x.attributeCache;A=A?t._getDataValue(A.attributeInfo,A,d):null;x.statFunctions.updateCellStat(v,A,x)})},_applyStatInfosToClusters:function(t){t=t||this._getValidStatInfos(this.statisticInfos);var g=this._clusterFieldPrefix;u.forEach(this.clusters,
function(k){var x=this._initializeStats(k,t);u.forEach(this.getCellsInCluster(k),function(v){this._calcCellStats(v,t,x)},this);this._summarizeStats(k,x,t,g);k.attributes[g+"id"]=k.primary},this)},_calcCellStats:function(t,g,k){var x=t.statistics;u.forEach(g,function(v){var A=v.identifier;v.statFunctions.updateClusterStat(k[A],x[A],v)})},_initializeStats:function(t,g){var k=t.statistics={};u.forEach(g,function(x){k[x.identifier]=x.statFunctions.initialize(x)});return k},_summarizeStats:function(t,
g,k,x){var v=t.attributes={};x=x||"";v[x+"count"]=t.count;u.forEach(k,function(A){var n=this._getStatFieldName(A,x);v[n]=A.statFunctions.summarize(g[A.identifier],A)},this)},_getStatFieldName:function(t,g){return(g||"")+t.identifier},_updateItem:function(t,g,k,x){var v=k.y,A=t.centroid,n=t.count;A.x=(n*A.x+g*k.x)/(n+g);A.y=(n*A.y+g*v)/(n+g);t.count+=g;x&&this._updateExtent(t.extent,k)},_updateExtent:function(t,g){var k=g.x;g=g.y;k<t.xmin&&(t.xmin=k);k>t.xmax&&(t.xmax=k);g<t.ymin&&(t.ymin=g);g>t.ymax&&
(t.ymax=g)},_getTime:function(){return window.performance?window.performance.now():(new Date).getTime()},_getElapsedTime:function(t,g){t=null!=t&&null!=g?g-t:t;if(null!=t){var k="millisecond";1E3<=t&&(t/=1E3,k="second",60<=t&&(t/=60,k="minute"));k={value:Number(t.toFixed(2)),unit:k}}return k}});B("extend-esri")&&c.setObject("layers.clustering.GeohashAggregation",y,q);return y})},"esri/core/timerUtils":function(){define([],function(){function B(l){var m,h=l.length;for(m=0;m<h;m++)l[m]()}var y={LOW:1,
HIGH:2},c,u={};u[y.LOW]=[];u[y.HIGH]=[];var q=function(){clearTimeout(c);c=null;var l=u[y.HIGH];u[y.HIGH]=[];B(l);l=u[y.LOW];u[y.LOW]=[];B(l)};return{priority:y,callbackQueue:u,setTimeout:function(l,m){l=[m,u[m].push(l)-1];c||(c=setTimeout(q,0));return l},clearTimeout:function(l){l&&u[l[0]].splice(l[1],1)}}})},"esri/layers/clustering/geohashUtils":function(){define("dojo/has dojo/string dojo/_base/lang dojo/_base/array ../../kernel ../../geometry/Point ../../geometry/Extent ../../SpatialReference ../../geometry/webMercatorUtils".split(" "),
function(B,y,c,u,q,l,m,h,f){function d(I){var M=I.spatialReference;if(!M)return{x:I.x,y:I.y};var T=M.isWebMercator(),Y;4326===M.wkid?Y={x:I.x,y:I.y}:T&&(Y={x:I.getLongitude(),y:I.getLatitude()});return Y}function a(I){var M=I.spatialReference,T=!(!M||!M.isWebMercator()),Y;M&&4326===M.wkid?Y=new m(I.toJson()):T&&(Y=f.webMercatorToGeographic(I,!0));return Y}function b(I,M){M.x=l.prototype._normalizeX(I.x,h.prototype._info[4326]);M.y=I.y;return M}function e(I){I=E.decimals[I].toString(2);return y.pad(I,
E.bitsPerBase32Char,"0")}function r(I,M){M=M.slice();M.splice(1,0,0);for(var T=M[0],Y=M[2],fa=0;fa<I.length;fa++){Number(I[fa])?M[0]=M[1]:M[2]=M[1];var ca=M[1]=(M[0]+M[2])/2;T=M[0];Y=M[2]}return{value:ca,min:T,max:Y}}function t(I,M,T){var Y=[];M=M.slice();M.splice(1,0,0);for(var fa=M[0],ca=M[2],X=0;X<T;X++)I>=M[1]?(M[0]=M[1],fa=1):(M[2]=M[1],fa=0),M[1]=(M[0]+M[2])/2,Y.push(fa),fa=M[0],ca=M[2];return{value:Y.join(""),min:fa,max:ca}}function g(I){var M=I*E.bitsPerBase32Char;0===M%2?I=M/=2:(I=(M+1)/
2,M-=I);return{lon:I,lat:M}}function k(I){var M=0;I=I.split("").reverse().join("");for(var T=0;T<I.length;T++)M+=Number(I[T])*Math.pow(2,T);return E.base32[M]}function x(I,M){var T={x:I.xmin,y:I.ymax},Y={x:I.xmax,y:I.ymin},fa={x:I.xmax,y:I.ymax};return{sw:H.pointToGeohash({x:I.xmin,y:I.ymin},M),nw:H.pointToGeohash(T,M),se:H.pointToGeohash(Y,M),ne:H.pointToGeohash(fa,M)}}function v(I,M,T,Y,fa){var ca=I;do fa[ca]||(fa[ca]=!0,Y.push(ca)),(I=ca===M)||(ca=z(ca,T));while(!I)}function A(I,M,T,Y){var fa=
x(I,M);I=[];v(fa.sw,fa.nw,"n",I,{});M=[];v(fa.se,fa.ne,"n",M,{});for(fa=0;fa<I.length;fa++)v(I[fa],M[fa],"e",T,Y)}function n(I){return u.filter(I,function(M){return 180===M.xmax?!0:!1})[0]}function w(I){return u.filter(I,function(M){return-180===M.xmin?!0:!1})[0]}function p(I,M,T,Y){var fa=H.geographicToWebMercator(I);I={x:fa.x-M,y:fa.y-M};M=H.webMercatorToGeographic({x:fa.x+M,y:fa.y+M},!0);I=H.webMercatorToGeographic(I,!0);return new m(null!=T?T:I.x,I.y,null!=Y?Y:M.x,M.y)}function D(I,M,T,Y){I=x(I,
M);var fa,ca;"min"===Y?ca=180:"max"===Y&&(fa=-180);var X=fa;Y=ca;var ea=H.geohashToCell(I.sw).extent;M=H.geohashToCell(I.ne).extent;I=null!=X?X:ea.xmin;ea=ea.ymin;Y=null!=Y?Y:M.xmax;M=M.ymax;I=p({x:I,y:ea},T,fa,ca);T=p({x:Y,y:M},T,fa,ca);return new m(I.xmin,I.ymin,T.xmax,T.ymax)}function C(I,M,T){var Y=I,fa=0;do fa++,(I=Y===M)||(Y=z(Y,T));while(!I);return fa}function G(I,M){I=x(I,M);M=C(I.nw,I.ne,"e");return{rows:C(I.nw,I.sw,"s"),cols:M}}function z(I,M){var T=I.length%2,Y=I.slice(-1),fa=E.decimals[Y];
I=I.slice(0,-1);-1!=E.borders[M][T].indexOf(Y)&&I&&(I=z(I,M));return I+E.neighbors[M][T][fa]}var E={base32:"0123456789bcdefghjkmnpqrstuvwxyz",decimals:function(){for(var I={},M=0;32>M;M++)I["0123456789bcdefghjkmnpqrstuvwxyz"[M]]=M;return I}(),neighbors:{n:[null,"238967debc01fg45kmstqrwxuvhjyznp"],s:[null,"bc01fg45238967deuvhjyznpkmstqrwx"],e:[null,"14365h7k9dcfesgujnmqp0r2twvyx8zb"],w:[null,"p0r21436x8zb9dcf5h7kjnmqesgutwvy"]},borders:{n:[null,"bcfguvyz"],s:[null,"0145hjnp"],e:[null,"prxz"],w:[null,
"028b"]},bitsPerBase32Char:5,maxGeohashLength:12,longitudeRange:[-180,180],latitudeRange:[-90,90]};E.neighbors.n[0]="14365h7k9dcfesgujnmqp0r2twvyx8zb";E.neighbors.s[0]="p0r21436x8zb9dcf5h7kjnmqesgutwvy";E.neighbors.e[0]="238967debc01fg45kmstqrwxuvhjyznp";E.neighbors.w[0]="bc01fg45238967deuvhjyznpkmstqrwx";E.borders.n[0]="prxz";E.borders.s[0]="028b";E.borders.e[0]="bcfguvyz";E.borders.w[0]="0145hjnp";var H={geographicToWebMercator:function(I){I=l.lngLatToXY(I.x,I.y);return{x:I[0],y:I[1]}},webMercatorToGeographic:function(I,
M){I=l.xyToLngLat(I.x,I.y,M);return{x:I[0],y:I[1]}},geohashToCell:function(I){var M;var T=[];for(M=0;M<I.length;M++)T.push(e(I[M]));T=T.join("");M=[];for(var Y=[],fa=0;fa<T.length;fa++)0===fa%2?M.push(T[fa]):Y.push(T[fa]);M=M.join("");Y=Y.join("");M=[M,Y];T=r(M[0],E.longitudeRange);Y=r(M[1],E.latitudeRange);M=T.value;return{point:{x:M,y:Y.value},extent:{xmin:T.min,xmax:T.max,ymin:Y.min,ymax:Y.max},geohash:I}},pointToCell:function(I,M){M=M||E.maxGeohashLength;if(I=d(I)){I=b(I,I);var T=g(M);M=t(I.x,
E.longitudeRange,T.lon);var Y=t(I.y,E.latitudeRange,T.lat);T=M.value;var fa=Y.value;M={xmin:M.min,xmax:M.max,ymin:Y.min,ymax:Y.max};Y=[];for(var ca=Math.ceil((T.length+fa.length)/E.bitsPerBase32Char),X=0,ea=0,ma=0;ma<ca*E.bitsPerBase32Char;ma++){var wa=0===ma%2?T[X++]:fa[ea++];null==wa&&(wa=0);Y.push(wa)}T=Y.join("");fa=E.bitsPerBase32Char;Y=T.length/fa;ca=[];for(X=0;X<Y;X++)ea=T.substr(X*fa,fa),ca.push(k(ea));T=ca.join("");return{point:I,extent:M,geohash:T}}},geohashToPoint:function(I){return H.geohashToCell(I).point},
pointToGeohash:function(I,M){return(I=H.pointToCell(I,M))&&I.geohash},getCells:function(I){return u.map(I,function(M){return H.geohashToCell(M)})},getCellSize:function(I){var M=E.longitudeRange,T=E.latitudeRange;M=Math.abs(M[1]-M[0]);T=Math.abs(T[1]-T[0]);I=g(I||1);return{width:M/Math.pow(2,I.lon),height:T/Math.pow(2,I.lat)}},getCellSizeInMeters:function(I){I=H.getCellSize(I);var M=f.metersPerDegree;I.width*=M;I.height*=M;return I},getIntersecting:function(I,M,T){M=M||1;T=T||0;var Y=[],fa=a(I);if(fa){T&&
(fa=H.expandExtent(I,M,T));I=fa.normalize();var ca={};u.forEach(I,function(X){A(X,M,Y,ca)})}return Y},countIntersecting:function(I,M,T){M=M||1;T=T||0;var Y=0,fa=a(I);if(fa){T&&(fa=H.expandExtent(I,M,T));I=fa.normalize();if(2===I.length){Y=n(I);fa=w(I);T=G(Y,M);var ca=G(fa,M);I=T.rows;T=T.cols+ca.cols;Y={x:Y.xmin,y:Y.ymax};fa={x:fa.xmax,y:fa.ymax};Y=b(Y,{});fa=b(fa,{});Y=H.pointToGeohash(Y,M);M=H.pointToGeohash(fa,M);Y===M&&T--;M={rows:I,cols:T}}else M=G(I[0],M);Y=M.cols*M.rows}return Y},getChildren:function(I){I=
I||"";var M=[],T;for(T in E.decimals)M.push(I+T);return M},getNeighbors:function(I){var M=z(I,"n"),T=z(I,"s");return[M,z(M,"e"),z(M,"w"),T,z(T,"e"),z(T,"w"),z(I,"e"),z(I,"w")]},getExtentFromDistance:function(I,M){M=M||1E3;var T;(I=d(I))&&(T=p(I,M));return T},expandExtent:function(I,M,T){M=M||1;T=T||0;if(I=a(I)){if(T){I=I.normalize();if(2===I.length){var Y=T;T=n(I);I=w(I);T=D(T,M,Y,"min");I=D(I,M,Y,"max");360<=T.getWidth()+I.getWidth()?(M=-180,I=180):(M=T.xmin,I=I.xmax);return new m(M,T.ymin,I,T.ymax)}return D(I[0],
M,T)}return I}},getNeighborsWithinDistance:function(I,M,T){T=T||1E3;M=M||1;var Y=[];if(I=d(I)){T=p(I,T).normalize();var fa={};u.forEach(T,function(ca){A(ca,M,Y,fa)})}return Y}};B("extend-esri")&&c.setObject("layers.clustering.geohashUtils",H,q);return H})},"esri/layers/clustering/statUtils":function(){define(["dojo/_base/lang","../support/attributeUtils"],function(B,y){function c(l){return"number"===typeof l&&!isNaN(l)&&Infinity!==l&&-Infinity!==l}var u={sum:{initialize:function(){return{count:0,
sum:null}},updateCellStat:function(l,m){c(m)&&(l.count++,l.sum+=m)},updateClusterStat:function(l,m){m.count&&(l.count+=m.count,l.sum+=m.sum)},summarize:function(l){return l.sum}},avg:{initialize:function(l){return{count:0,sum:null,avg:null,sum_cosine:null,sum_sine:null}},updateCellStat:function(l,m,h){c(m)&&(l.count++,h.isAngular?(h.isArithmetic||(m=-1*m+90),l.sum_cosine+=Math.cos(m*Math.PI/180),l.sum_sine+=Math.sin(m*Math.PI/180)):l.sum+=m)},updateClusterStat:function(l,m,h){m.count&&(l.count+=m.count,
h.isAngular?(l.sum_cosine+=m.sum_cosine,l.sum_sine+=m.sum_sine):l.sum+=m.sum)},summarize:function(l,m){if(0<l.count){var h=l.count;m.isAngular?(h=180*Math.atan2(l.sum_sine/h,l.sum_cosine/h)/Math.PI,m.isArithmetic||(h=-1*(h-90)),l.avg=0>h?h+360:h):(l.avg=l.sum/h,m.isDate&&(l.avg=Math.ceil(l.avg)))}return l.avg}},type:{initialize:function(){return{uvInfos:{}}},updateCellStat:function(l,m){if(null==m||""===m||"string"===typeof m&&""===B.trim(m))m=null;l=l.uvInfos;null==l[m]?l[m]={count:1,value:m}:l[m].count++},
updateClusterStat:function(l,m){l=l.uvInfos;m=m.uvInfos;for(var h in m){var f=m[h];null==l[h]?l[h]={count:f.count,value:f.value}:l[h].count+=f.count}},summarize:function(l){l=l.uvInfos;var m,h=-Infinity;for(m in l){var f=l[m];if(f.count>h){h=f.count;var d=f.value}else f.count===h&&(d=null)}return d}}},q={isSupportedStatisticType:function(l){return u.hasOwnProperty(l)},getStatisticFunctions:function(l){return u[l]},getStatisticId:function(l,m){var h=y.getAttributeIdSource(l);l=h&&y.getAttributeId(h)||
l.field;return m+"_"+l},getClusterField:function(l,m){return"cluster_"+q.getStatisticId(l,m)},getStatisticHash:function(l,m){m=[q.getStatisticId(l,m)];l.attributeType&&m.push(l.attributeType.toLowerCase());l.rotationType&&m.push(l.rotationType.toLowerCase());return m.join("_")}};return q})},"esri/dijit/Attribution":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/kernel dojo/has dojo/query dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/dom-class dojo/dom-geometry ../kernel ../lang ../SpatialReference ../geometry/webMercatorUtils ../geometry/Extent".split(" "),
function(B,y,c,u,q,l,m,h,f,d,a,b,e,r,t,g,k,x){B=B(null,{declaredClass:"esri.dijit.Attribution",itemDelimiter:" | ",listClass:"esriAttributionList",itemClass:"esriAttributionItem",lastItemClass:"esriAttributionLastItem",delimiterClass:"esriAttributionDelim",constructor:function(v,A){try{y.mixin(this,v);this._attributions={};this._pendingDfds={};this._activeLayers=[];this._sharedLayers=[];this._layerHandles={};var n=this.domNode=h.byId(A),w=this.map,p="\x3cspan class\x3d'"+this.listClass+"'\x3e\x3c/span\x3e";
n&&(f.set(n,"innerHTML",p),this.listNode=q.query(".esriAttributionList",n)[0],this.itemNodes={});this._eventConnections=[u.connect(w,"onLayerAdd",this,this._onLayerAdd),u.connect(w,"onLayerRemove",this,this._onLayerRemove),u.connect(w,"onLayerSuspend",this,this._onLayerSuspend),u.connect(w,"onLayerResume",this,this._onLayerResume),u.connect(w,"onResize",this,this._adjustFocus),u.connect(w,"onExtentChange",this,this._onExtentChange)];if(w.loaded){var D=w.layerIds.concat(w.graphicsLayerIds),C,G=D.length;
for(C=0;C<G;C++){var z=w.getLayer(D[C]);z.loaded&&this._onLayerAdd(z)}}}catch(E){}},startup:function(){},destroy:function(){c.forEach(this._eventConnections,u.disconnect);d.destroy(this.listNode);var v=this._layerHandles,A;for(A in v)v[A]&&v[A].remove();this.map=this.domNode=this._eventConnections=this.listNode=this._attributions=this._pendingDfds=this.itemNodes=this._activeLayers=this._lastItem=this._sharedLayers=this._layerHandles=null},_onLayerAdd:function(v){try{var A=this._attributions,n=v.id;
if(!t.isDefined(A[n])&&v.showAttribution){if(v.hasAttributionData){var w=v.getAttributionData();this._pendingDfds[n]=1;A[n]=w;w.addBoth(y.partial(this._onAttributionLoad,this,v))}else A[n]=v.copyright||v.copyrightText||"",A[n]?(v.suspended||this._activeLayers.push(n),this._createNode(n)):this._onLayerRemove(v);-1<v.declaredClass.toLowerCase().indexOf("vetiledlayer")&&(this._layerHandles[n]=v.on("map-style-change",y.hitch(this,function(){this._onLayerRemove(v);this._onLayerAdd(v)})))}}catch(p){}},
_onAttributionLoad:function(v,A,n){var w=v._attributions,p=v._pendingDfds,D=A.id;if(p&&p[D]){delete p[D];if(!n||n instanceof Error)n="";w[D]=n?v._createIndexByLevel(n,-1!==A.declaredClass.toLowerCase().indexOf("vetiledlayer")):A.copyright||A.copyrightText||"";w[D]?(A.suspended||v._activeLayers.push(D),v._createNode(D)):v._onLayerRemove(A)}},_onLayerRemove:function(v){try{var A=v.id,n=this.itemNodes,w=-1;this._onLayerSuspend(v);this._layerHandles[A]&&this._layerHandles[A].remove();delete this._attributions[A];
delete this._pendingDfds[A];delete this._layerHandles[A];var p=this._getGroupIndex(A);-1!==p&&(w=c.indexOf(this._sharedLayers[p],A),-1!==w&&(this._sharedLayers[p].splice(w,1),1>=this._sharedLayers[p].length&&this._sharedLayers.splice(p,1)));n[A]&&-1===w&&d.destroy(n[A]);delete n[A];this._updateLastItem()}catch(D){}},_onLayerSuspend:function(v){try{var A=v.id;if(this._attributions[A]){var n=c.indexOf(this._activeLayers,A),w=this.itemNodes[A];-1!==n&&this._activeLayers.splice(n,1);w&&this._toggleItem(w,
!1,this._getGroupIndex(A))}}catch(p){}},_adjustFocus:function(){var v=this.domNode.scrollWidth>this.domNode.clientWidth,A=b.contains(this.domNode,"esriAttributionOpen");f.set(this.domNode,"tabIndex",v||A?"0":"")},_onLayerResume:function(v){try{var A=v.id,n=this._attributions[A],w=this.itemNodes[A];if(n&&(-1===c.indexOf(this._activeLayers,A)&&this._activeLayers.push(A),w)){var p=y.isString(n)?n:this._getContributorsList(n,this.map.extent,this.map.getLevel());y.isString(n)||f.set(w,"innerHTML",p?p+
this._getDelimiter():"");p&&this._toggleItem(w,!0,this._getGroupIndex(A))}}catch(D){}},_onExtentChange:function(v,A,n,w){try{var p=this._activeLayers,D=this._attributions,C=this.itemNodes,G,z,E=p.length||0;for(z=0;z<E;z++){var H=p[z];var I=D[H];if((G=C[H])&&!y.isString(I)){var M=this._getContributorsList(I,v,w?w.level:-1);f.set(G,"innerHTML",M?M+this._getDelimiter():"");this._toggleItem(G,!!M,-1)}}}catch(T){}this._adjustCursorStyle()},_createNode:function(v){if(this.domNode){var A=this._checkShareInfo(v),
n=A&&A.sharedWith;n=n&&this.itemNodes[n];var w=this.map,p=this._attributions[v];p=y.isString(p)?p:this._getContributorsList(p,w.extent,w.getLevel());w=!!p&&!w.getLayer(v).suspended;n?(this.itemNodes[v]=n,this._toggleItem(n,w,A.index)):(v=this.itemNodes[v]=d.create("span",{"class":this.itemClass,innerHTML:p?p+this._getDelimiter():"",style:{display:w?"inline":"none"}},this.listNode),w&&this._setLastItem(v));this._adjustCursorStyle()}},_checkShareInfo:function(v){var A=this._attributions,n,w=-1,p=A[v];
if(p&&y.isString(p)){for(n in A){var D=A[n];if(n!==v&&D&&y.isString(D)&&D.length===p.length&&D.toLowerCase()===p.toLowerCase()){var C=n;break}}A=this._sharedLayers;D=A.length;if(C){for(n=0;n<D;n++)if(p=A[n],-1!==c.indexOf(p,C)){w=n;p.push(v);break}-1===w&&(w=A.push([C,v])-1)}}return-1<w?{index:w,sharedWith:C}:null},_getGroupIndex:function(v){var A=this._sharedLayers,n,w=A.length,p=-1;for(n=0;n<w;n++)if(-1!==c.indexOf(A[n],v)){p=n;break}return p},_getDelimiter:function(){var v=this.itemDelimiter;return v?
"\x3cspan class\x3d'"+this.delimiterClass+"'\x3e"+v+"\x3c/span\x3e":""},_toggleItem:function(v,A,n){if(-1<n&&!A){n=this._sharedLayers[n];var w,p=n.length,D=this._activeLayers;for(w=0;w<p;w++)if(-1!==c.indexOf(D,n[w]))return}a.set(v,"display",A?"inline":"none");this._updateLastItem()},_updateLastItem:function(){var v=this.listNode.childNodes;var A=v.length;if(A)for(--A;0<=A;A--){var n=v[A];if("none"!==a.get(n,"display")){this._setLastItem(n);break}}this._adjustCursorStyle()},_setLastItem:function(v){var A=
this.itemClass,n=this.lastItemClass;this._lastItem&&b.replace(this._lastItem,A,n);v&&(b.replace(v,n,A),this._lastItem=v)},_createIndexByLevel:function(v,A){v=v.contributors;var n,w,p=v?v.length:0,D,C=new g(4326),G={};for(w=0;w<p;w++){var z=v[w];var E=(n=z.coverageAreas)?n.length:0;for(D=0;D<E;D++){var H=n[D];var I=H.bbox;I={extent:k.geographicToWebMercator(new x(I[1],I[0],I[3],I[2],C)),attribution:z.attribution||"",zoomMin:H.zoomMin-(A&&H.zoomMin?1:0),zoomMax:H.zoomMax-(A&&H.zoomMax?1:0),score:t.isDefined(H.score)?
H.score:100,objectId:w};for(H=I.zoomMin;H<=I.zoomMax;H++)G[H]=G[H]||[],G[H].push(I)}}return G},_getContributorsList:function(v,A,n){var w="";if(A&&t.isDefined(n)&&-1<n){v=v[n];n=A.getCenter().normalize();var p=v?v.length:0,D=[],C={};for(w=0;w<p;w++)A=v[w],!C[A.objectId]&&A.extent.contains(n)&&(C[A.objectId]=1,D.push(A));D.sort(function(G,z){return z.score-G.score||G.objectId-z.objectId});p=D.length;for(w=0;w<p;w++)D[w]=D[w].attribution;w=D.join(", ")}return w},_adjustCursorStyle:function(){var v=
e.position(this.listNode.parentNode,!0).h;b.contains(this.listNode.parentNode,"esriAttributionOpen")?(b.remove(this.listNode.parentNode,"esriAttributionOpen"),v>e.position(this.listNode.parentNode,!0).h?(a.set(this.listNode.parentNode,"cursor","pointer"),b.add(this.listNode.parentNode,"esriAttributionOpen")):a.set(this.listNode.parentNode,"cursor","default")):(b.add(this.listNode.parentNode,"esriAttributionOpen"),v<e.position(this.listNode.parentNode,!0).h?a.set(this.listNode.parentNode,"cursor",
"pointer"):a.set(this.listNode.parentNode,"cursor","default"),b.remove(this.listNode.parentNode,"esriAttributionOpen"));this._adjustFocus()}});l("extend-esri")&&y.setObject("dijit.Attribution",B,r);return B})},"esri/arcgis/utils":function(){define("require dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Deferred dojo/_base/json dojo/_base/url dojo/on dojo/DeferredList dojo/dom-construct dojo/sniff dojox/gfx/_base ../kernel ../config ../Color ../lang ../request ../SpatialReference ../map ../urlUtils ../geometry/Point ../geometry/ScreenPoint ../geometry/Extent ../geometry/webMercatorUtils ../symbols/jsonUtils ../renderers/jsonUtils ../dijit/PopupTemplate ../dijit/Popup ../tasks/query ../tasks/GeometryService ../layers/ArcGISTiledMapServiceLayer ../layers/FeatureLayer dojo/i18n!../nls/jsapi".split(" "),
function(B,y,c,u,q,l,m,h,f,d,a,b,e,r,t,g,k,x,v,A,n,w,p,D,C,G,z,E,H,I,M,T,Y){function fa(O){return!(!O||"BingMapsAerial"!==O.layerType&&"BingMapsAerial"!==O.type)}function ca(O){return!(!O||"BingMapsRoad"!==O.layerType&&"BingMapsRoad"!==O.type)}function X(O){return fa(O)||ca(O)||!(!O||"BingMapsHybrid"!==O.layerType&&"BingMapsHybrid"!==O.type)}function ea(O){return!(!O||"OpenStreetMap"!==O.layerType&&"OpenStreetMap"!==O.type)}function ma(O){return!!(O&&O.url&&(-1<"ArcGISFeatureLayer ArcGISImageServiceLayer ArcGISImageServiceVectorLayer ArcGISMapServiceLayer ArcGISStreamLayer ArcGISTiledImageServiceLayer ArcGISTiledMapServiceLayer".split(" ").indexOf(O.layerType)||
!O.layerType&&!O.type))}function wa(O){return k({url:rb.arcgisUrl+"/"+O.itemId+"/data",content:{f:"json"},callbackParamName:"callback"},{disableIdentityLookup:!0,_preLookup:!0})}function P(O,Ca){var za={f:"json"};Ca&&(za.token=Ca);return k({url:O,content:za,callbackParamName:"callback"},{disableIdentityLookup:!0})}function ja(O){!O.layerDefinition||O.layerDefinition.drawingInfo&&O.layerDefinition.drawingInfo.labelingInfo||(O.showLabels=!1);O.itemProperties.layerDefinition&&(O.layerDefinition?(O.layerDefinition.drawingInfo||
(O.layerDefinition.drawingInfo=O.itemProperties.layerDefinition.drawingInfo),g.isDefined(O.layerDefinition.definitionExpression)||(O.layerDefinition.definitionExpression=O.itemProperties.layerDefinition.definitionExpression),g.isDefined(O.layerDefinition.minScale)||(O.layerDefinition.minScale=O.itemProperties.layerDefinition.minScale),g.isDefined(O.layerDefinition.maxScale)||(O.layerDefinition.maxScale=O.itemProperties.layerDefinition.maxScale)):O.layerDefinition=O.itemProperties.layerDefinition);
!O.itemProperties.popupInfo||O.popupInfo||O.disablePopup||(O.popupInfo=O.itemProperties.popupInfo);g.isDefined(O.itemProperties.showLabels)&&!g.isDefined(O.showLabels)&&(O.showLabels=O.itemProperties.showLabels);g.isDefined(O.itemProperties.showLegend)&&!g.isDefined(O.showLegend)&&(O.showLegend=O.itemProperties.showLegend);g.isDefined(O.itemProperties.refreshInterval)&&!g.isDefined(O.refreshInterval)&&(O.refreshInterval=O.itemProperties.refreshInterval)}function ta(O){ja(O);O.itemProperties.layerDefinition&&
O.layerDefinition&&(!g.isDefined(O.layerDefinition.maximumTrackPoints)&&g.isDefined(O.itemProperties.layerDefinition.maximumTrackPoints)&&(O.layerDefinition.maximumTrackPoints=O.itemProperties.layerDefinition.maximumTrackPoints),!O.layerDefinition.definitionGeometry&&O.itemProperties.layerDefinition.definitionGeometry&&(O.layerDefinition.definitionGeometry=O.itemProperties.layerDefinition.definitionGeometry));O.itemProperties.purgeOptions&&!O.purgeOptions&&(O.purgeOptions=O.itemProperties.purgeOptions)}
function N(O,Ca){var za=new q;Ca=O.itemData;var ra=[],xa=[];c.forEach(Ca.operationalLayers,function(Ha){if(Ha.itemId&&ma(Ha)){var Da=Ha.url.toLowerCase();-1<Da.indexOf("/featureserver")||-1<Da.indexOf("/mapserver/")?(xa.push(Ha),ra.push(wa(Ha))):-1<Da.indexOf("/mapserver")&&-1===Da.indexOf("/mapserver/")&&(!Ha.layers||!g.isDefined(Ha.minScale)&&!g.isDefined(Ha.maxScale))?(xa.push(Ha),ra.push(wa(Ha))):-1<Da.indexOf("/imageserver")&&!g.isDefined(Ha.minScale)&&!g.isDefined(Ha.maxScale)?(xa.push(Ha),
ra.push(wa(Ha))):-1<Da.indexOf("/streamserver")&&(xa.push(Ha),ra.push(wa(Ha)))}});Ca.baseMap&&Ca.baseMap.baseMapLayers&&c.forEach(Ca.baseMap.baseMapLayers,function(Ha){Ha.itemId&&"VectorTileLayer"!==Ha.layerType&&(xa.push(Ha),ra.push(wa(Ha)))});if(0<ra.length){var Ja={};(new f(ra)).addCallback(function(Ha){c.forEach(xa,function(Da,Ka){if((Ka=Ha[Ka][1])&&!(Ka instanceof Error)&&(Ja[Da.itemId]=Ka,ma(Da))){var Ra=Da.url.toLowerCase();(-1<Ra.indexOf("/featureserver")||-1<Ra.indexOf("/mapserver/"))&&Ka.layers?
c.forEach(Ka.layers,function(Va){var Za="/featureserver/"+Va.id;(Za=Ra.match(Za+"$")==Za)||(Za="/mapserver/"+Va.id,Za=Ra.match(Za+"$")==Za);Za&&(Da.itemProperties=Va,ja(Da))}):-1<Ra.indexOf("/streamserver")?(Da.itemProperties=Ka,ta(Da)):-1<Ra.indexOf("/mapserver")?(Ka.layers&&!Da.layers&&(Da.layers=Ka.layers),g.isDefined(Ka.minScale)&&!g.isDefined(Da.minScale)&&(Da.minScale=Ka.minScale),g.isDefined(Ka.maxScale)&&!g.isDefined(Da.maxScale)&&(Da.maxScale=Ka.maxScale),g.isDefined(Ka.refreshInterval)&&
!g.isDefined(Da.refreshInterval)&&(Da.refreshInterval=Ka.refreshInterval),Ka.visibleLayers&&!Da.visibleLayers&&(Da.visibleLayers=Ka.visibleLayers)):-1<Ra.indexOf("/imageserver")&&(g.isDefined(Ka.minScale)&&!g.isDefined(Da.minScale)&&(Da.minScale=Ka.minScale),g.isDefined(Ka.maxScale)&&!g.isDefined(Da.maxScale)&&(Da.maxScale=Ka.maxScale),g.isDefined(Ka.refreshInterval)&&!g.isDefined(Da.refreshInterval)&&(Da.refreshInterval=Ka.refreshInterval),!Ka.popupInfo||Da.popupInfo||Da.disablePopup||(Da.popupInfo=
Ka.popupInfo),Ka.renderingRule&&!Da.renderingRule&&(Da.renderingRule=Ka.renderingRule,Ka.renderingRule.functionName&&(Da.renderingRule.rasterFunction=Ka.renderingRule.functionName)),Ka.bandIds&&!Da.bandIds&&(Da.bandIds=Ka.bandIds),Ka.mosaicRule&&!Da.mosaicRule&&(Da.mosaicRule=Ka.mosaicRule),Ka.format&&!Da.format&&(Da.format=Ka.format),g.isDefined(Ka.compressionQuality)&&!g.isDefined(Da.compressionQuality)&&(Da.compressionQuality=Ka.compressionQuality),!Ka.layerDefinition||!Ka.layerDefinition.definitionExpression||
g.isDefined(Da.layerDefinition)&&g.isDefined(Da.layerDefinition.definitionExpression)||(Da.layerDefinition=Da.layerDefinition||{},Da.layerDefinition.definitionExpression=Ka.layerDefinition.definitionExpression))}});O.relatedItemsData=Ja;za.callback(O)})}else za.callback(O);return za}function S(O,Ca){var za=new q,ra=O.itemData,xa=ra.baseMap.baseMapLayers[0];if(X(xa))if(xa.portalUrl&&e.id)delete Ca.bingMapsKey,e.id.checkSignInStatus(A.urlToObject(rb.arcgisUrl).path).then(y.hitch(null,function(Ha,Da,
Ka,Ra,Va){P(xa.portalUrl,Va.token).then(y.hitch(null,la,Ha,Da,Ka,Ra),y.hitch(null,sa,Ha,Da,Ka,Ra))},O,Ca,ra,za),y.hitch(null,function(Ha,Da,Ka,Ra,Va){P(xa.portalUrl).then(y.hitch(null,la,Ha,Da,Ka,Ra),y.hitch(null,sa,Ha,Da,Ka,Ra))},O,Ca,ra,za));else if(Ca.bingMapsKey){var Ja=new Eb({bingMapsKey:Ca.bingMapsKey,mapStyle:Eb.MAP_STYLE_AERIAL});u.connect(Ja,"onLoad",y.hitch(this,function(){za.callback([O,Ca])}));u.connect(Ja,"onError",function(Ha){delete Ca.bingMapsKey;O.itemData=ya(ra);xa=O.itemData.baseMap.baseMapLayers[0];
xa.errors=[];xa.errors.push({message:"The owner of the application has not provided a valid Bing Key for the Bing Map it includes. Switching to Esri layers."});za.callback([O,Ca])})}else O.itemData=ya(ra),xa=O.itemData.baseMap.baseMapLayers[0],xa.errors=[],xa.errors.push({message:"The owner of the application has not provided a Bing Key for the Bing Map it includes. Switching to Esri layers."}),za.callback([O,Ca]);else za.callback([O,Ca]);return za}function ha(O){var Ca=new q;O=O.itemData;var za=
O.baseMap&&O.baseMap.baseMapLayers;if(bc&&!bc.supported())for(O=0;O<za.length;O++){var ra=za[O];if(!ra.isReference){if("VectorTileLayer"===ra.layerType){var xa=ra.itemId;var Ja=O}break}}xa?db(xa,!1).addBoth(function(Ha){var Da=/^https?:\/\/basemaps(dev)?\.arcgis\.com\/arcgis\/rest\/services\/World_Basemap\/VectorTileServer/i;Ha&&Ha.item&&Da.test(Ha.item.url)&&(za[Ja]={id:"FB_"+ra.id,layerType:"ArcGISTiledMapServiceLayer",opacity:"opacity"in ra?ra.opacity:1,visibility:"visibility"in ra?ra.visibility:
!0,url:"https://services.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer"});Ca.resolve()}):Ca.resolve();return Ca}function la(O,Ca,za,ra,xa){xa.bingKey?(Ca.bingMapsKey=xa.bingKey,xa=new Eb({bingMapsKey:Ca.bingMapsKey,mapStyle:Eb.MAP_STYLE_AERIAL}),u.connect(xa,"onLoad",y.hitch(this,function(){ra.callback([O,Ca])})),u.connect(xa,"onError",function(Ja){delete Ca.bingMapsKey;O.itemData=ya(za);Ja=O.itemData.baseMap.baseMapLayers[0];Ja.errors=[];Ja.errors.push({message:"The owner of the map has not provided a valid Bing Key for the Bing Map it includes. Switching to Esri layers."});
ra.callback([O,Ca])})):sa(O,Ca,za,ra)}function sa(O,Ca,za,ra){delete Ca.bingMapsKey;O.itemData=ya(za);za=O.itemData.baseMap.baseMapLayers[0];za.errors=[];za.errors.push({message:"The owner of the map has not provided a Bing Key for the Bing Map it includes. Switching to Esri layers."});ra.callback([O,Ca])}function ya(O){fa(O.baseMap.baseMapLayers[0])?O.baseMap={title:"Imagery",baseMapLayers:[{id:"World_Imagery_2017",visibility:!0,opacity:1,url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}]}:
ca(O.baseMap.baseMapLayers[0])?O.baseMap={title:"Streets",baseMapLayers:[{id:"World_Street_Map_8421",opacity:1,visibility:!0,url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}]}:O.baseMap={title:"Imagery with Labels",baseMapLayers:[{id:"World_Imagery_6611",opacity:1,visibility:!0,url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},{id:"World_Boundaries_and_Places_1145",isReference:!0,opacity:1,visibility:!0,url:"https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer"}]};
return O}function Ga(O,Ca,za,ra){var xa=O.dynamicLayerInfos||O.layerInfos,Ja=Ca.layers;if(Ja&&xa)if(ra.usePopupManager){var Ha;c.forEach(xa,function(Xa){var $a=Xa.id;if(!Xa.subLayerIds)for(Xa=0;Xa<Ja.length;Xa++){var fb=Ja[Xa];if(fb.id===$a&&fb.popupInfo&&!fb.disablePopup){Ha||(Ha={});Ha[$a]={infoTemplate:new za(fb.popupInfo),layerUrl:fb.layerUrl};break}}});Ha&&O.setInfoTemplates(Ha)}else{var Da=[],Ka=[],Ra=[],Va=[],Za=[],Sa=[];c.forEach(xa,function(Xa){var $a=Xa.id;if(!Xa.subLayerIds&&-1!==c.indexOf(O.visibleLayers,
$a))for(Xa=0;Xa<Ja.length;Xa++){var fb=Ja[Xa];if(fb.id===$a){Ka.push($a);Da.push(fb.popupInfo);Ra.push(fb.layerUrl||"");fb.layerDefinition&&fb.layerDefinition.definitionExpression?Va.push(fb.layerDefinition.definitionExpression):Va.push("");Za.push(g.isDefined(fb.minScale)?fb.minScale:null);Sa.push(g.isDefined(fb.maxScale)?fb.maxScale:null);break}}});Da.length&&(O.__popups=Da,O.__popupIds=Ka,O.__popupUrls=Ra,O.__popupWhereClauses=Va,O.__popupMinScales=Za,O.__popupMaxScales=Sa,O.__resourceInfo=Ca.resourceInfo)}}
function ba(O){if(!O)return!1;var Ca=(new m(rb.arcgisUrl)).authority;return-1!==O.indexOf(".arcgis.com/")||-1!==O.indexOf(Ca)}function da(O){return O?-1!==O.indexOf("/services.arcgisonline.com/")||-1!==O.indexOf("/server.arcgisonline.com/"):!1}function oa(O){"https:"===location.protocol&&(ba(O)||da(O))&&(O=O.replace("http:","https:"));return O}function va(O,Ca,za){var ra=[];O.displayLevels||(ra=c.map(O.resourceInfo.tileInfo.lods,function(Ja){return Ja.level}));if(O.exclusionAreas){var xa=y.clone(O.exclusionAreas);
xa=c.map(xa,function(Ja){Ja.geometry=new p(Ja.geometry);return Ja})}O.resourceInfo&&"Raster"===O.resourceInfo.cacheType?(ra=O.layerDefinition&&O.layerDefinition.drawingInfo&&O.layerDefinition.drawingInfo.renderer,ra=new ac(oa(O.url),{resourceInfo:O.resourceInfo,opacity:O.opacity,visible:O.visibility,id:O.id,minScale:O.minScale,maxScale:O.maxScale,refreshInterval:O.refreshInterval,multidimensionalDefinition:O.multidimensionalDefinition,bandIds:O.bandIds,renderer:ra||null})):ra=new M(oa(O.url),{resourceInfo:O.resourceInfo,
opacity:O.opacity,visible:O.visibility,displayLevels:O.displayLevels||ra,id:O.id,minScale:O.minScale,maxScale:O.maxScale,refreshInterval:O.refreshInterval,exclusionAreas:xa});za.ignorePopups||Ga(ra,O,Ca,za);return ra}function pa(O,Ca){if(!O||!Ca||0===Ca.length)return[];Ca=","+Ca+",";var za=[],ra,xa=",";for(ra=0;ra<O.length;ra++)if(null!==O[ra].subLayerIds){if(-1===Ca.indexOf(","+O[ra].id+",")||-1<xa.indexOf(","+O[ra].id+","))xa+=O[ra].subLayerIds.toString()+","}else-1<Ca.indexOf(","+O[ra].id+",")&&
-1===xa.indexOf(","+O[ra].id+",")&&za.push(O[ra].id);return za}function Oa(O,Ca,za){var ra=new zb;ra.format="png24";O.resourceInfo&&O.resourceInfo.supportedImageFormatTypes&&-1<O.resourceInfo.supportedImageFormatTypes.indexOf("PNG32")&&(ra.format="png32");ra=new jb(oa(O.url),{resourceInfo:O.resourceInfo,opacity:O.opacity,visible:O.visibility,id:O.id,imageParameters:ra,minScale:O.minScale,maxScale:O.maxScale,refreshInterval:O.refreshInterval});var xa=O.visibleLayers;if(!O.visibleLayers){var Ja="";
c.forEach(ra.layerInfos,function(Sa){Sa.defaultVisibility&&(Ja+=(0<Ja.length?",":"")+Sa.id)});xa=Ja}if(O.layers&&0<O.layers.length){var Ha=[],Da=[],Ka,Ra=[],Va,Za;c.forEach(O.layers,function(Sa){var Xa=Sa.layerDefinition;Xa&&Xa.definitionExpression&&(Ha[Sa.id]=Xa.definitionExpression);if(Xa&&Xa.source){Ka=null;Za=Xa.source;if("mapLayer"===Za.type){var $a=c.filter(O.resourceInfo.layers,function(fb){return fb.id===Za.mapLayerId});$a.length&&(Ka=y.mixin($a[0],Sa))}else Ka=y.mixin({},Sa);Ka&&(Ka.source=
Za,delete Ka.popupInfo,Ka=new vb(Ka),O.visibleLayers&&($a="string"==typeof O.visibleLayers?O.visibleLayers.split(","):O.visibleLayers,-1<c.indexOf($a,Sa.id)?Ka.defaultVisibility=!0:Ka.defaultVisibility=!1),Da.push(Ka))}Xa&&null!=Xa.transparency&&($a=Xa.drawingInfo||{},null==$a.transparency&&($a.transparency=Xa.transparency,Xa.drawingInfo=$a));Xa&&Xa.source&&Xa.drawingInfo&&(Va=new Gb(Xa.drawingInfo),Ra[Sa.id]=Va)},this);0<Ha.length&&ra.setLayerDefinitions(Ha);0<Da.length?(ra.setDynamicLayerInfos(Da,
!0),0<Ra.length&&ra.setLayerDrawingOptions(Ra,!0)):(xa=pa(ra.layerInfos,xa),ra.setVisibleLayers(xa))}else xa=pa(ra.layerInfos,xa),ra.setVisibleLayers(xa);za.ignorePopups||Ga(ra,O,Ca,za);return ra}function W(O,Ca,za){var ra=new Db;ra.bandIds=O.bandIds;null!=O.format&&(ra.format=O.format,null!=O.compressionQuality&&(ra.compressionQuality=O.compressionQuality));if(O.renderingRule&&O.renderingRule.rasterFunction){var xa=new $b(O.renderingRule);ra.renderingRule=xa}O.mosaicRule&&(xa=new Rb(O.mosaicRule),
ra.mosaicRule=xa);g.isDefined(O.noData)&&(ra.noData=O.noData);g.isDefined(O.noDataInterpretation)&&(ra.noDataInterpretation=O.noDataInterpretation);g.isDefined(O.interpolation)&&(ra.interpolation=O.interpolation);xa=O.layerType?"ArcGISImageServiceVectorLayer"===O.layerType:!1;g.isDefined(O.layerType)||(xa=O.resourceInfo.hasMultidimensions&&("esriImageServiceDataTypeVector-UV"===O.resourceInfo.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===O.resourceInfo.serviceDataType));ra={resourceInfo:O.resourceInfo,
opacity:O.opacity,visible:O.visibility,id:O.id,imageServiceParameters:ra,minScale:O.minScale,maxScale:O.maxScale,refreshInterval:O.refreshInterval};ra=xa?new Jb(oa(O.url),ra):new nb(oa(O.url),ra);O.layerDefinition&&(O.layerDefinition.drawingInfo&&O.layerDefinition.drawingInfo.renderer&&(xa=G.fromJson(O.layerDefinition.drawingInfo.renderer),ra.setRenderer(xa)),O.layerDefinition.definitionExpression&&ra.setDefinitionExpression(O.layerDefinition.definitionExpression,!0));za.ignorePopups||!O.popupInfo||
O.disablePopup||ra.setInfoTemplate(new Ca(O.popupInfo));return ra}function U(O,Ca,za){var ra=[102113,102100,3857],xa=za||new x(Ca[0].layerObject.fullExtent.spatialReference),Ja=new x(O.resourceInfo.fullExtent.spatialReference);return xa.wkt==Ja.wkt&&(xa.wkid==Ja.wkid||g.isDefined(xa.latestWkid)&&xa.latestWkid==Ja.wkid||g.isDefined(Ja.latestWkid)&&xa.wkid==Ja.latestWkid||g.isDefined(xa.latestWkid)&&xa.latestWkid==Ja.latestWkid)||xa.wkid&&Ja.wkid&&c.some(ra,function(Ha){return Ha===Ja.wkid})&&c.some(ra,
function(Ha){return Ha===xa.wkid})?!0:!1}function na(O,Ca,za){if(!Ca[0].layerObject.tileInfo)return!1;O=O.resourceInfo.tileInfo;Ca=Ca[0].layerObject.tileInfo;za=za.width>za.height?za.width:za.height;for(var ra=!1,xa=!1,Ja=0;Ja<O.lods.length;Ja++){for(var Ha=O.lods[Ja].scale/O.dpi,Da=0;Da<Ca.lods.length;Da++){var Ka=Ca.lods[Da].scale/Ca.dpi;if(Math.abs(Ka-Ha)/Ka<1/za)if(ra){xa=!0;break}else ra=!0}if(xa)break}return xa||ra&&(1===O.lods.length||1===Ca.lods.length)?!0:!1}function qa(O,Ca,za,ra,xa,Ja){var Ha=
za._clazz;if(ea(O))var Da=new jc({id:O.id,opacity:O.opacity,visible:null!==O.visibility&&void 0!==O.visibility?O.visibility:!0});else if(O&&("WFS"===O.layerType||"WFS"===O.type)){var Ka={customParameters:O.wfsInfo.customParameters,geometryType:O.layerDefinition.geometryType,id:O.id,labelingInfo:O.layerDefinition.drawingInfo.labelingInfo,maxFeatures:O.wfsInfo.maxFeatures,mode:O.mode,name:O.wfsInfo.name,showLabels:!0,swapXY:O.wfsInfo.swapXY,title:O.title,url:O.url,version:O.wfsInfo.version,visible:O.visibility,
wkid:O.layerDefinition.spatialReference.wkid};Da=new lc;Da.fromJson(Ka,function(){g.isDefined(O.opacity)&&Da.setOpacity(O.opacity);g.isDefined(O.visibility)&&Da.setVisibility(O.visibility);(O.minScale||O.maxScale)&&Da.setScaleRange(O.minScale,O.maxScale);Da.renderer=G.fromJson(O.layerDefinition.drawingInfo.renderer,{geometryType:Ka.geometryType});!za.ignorePopups&&O.popupInfo&&Da.setInfoTemplate(new Ha(O.popupInfo));Da.emit("fromJsonComplete")})}else if(O&&("WMS"===O.layerType||"WMS"===O.type)){var Ra=
[],Va=[];c.forEach(O.layers,function($a){Va.push(new mc({name:$a.name,title:$a.title,legendURL:$a.legendURL||$a.legendUrl,queryable:$a.queryable,showPopup:$a.showPopup}));Ra.push($a.name)},this);O.visibleLayers&&(Ra=O.visibleLayers);ra=new p(O.extent[0][0],O.extent[0][1],O.extent[1][0],O.extent[1][1],new x({wkid:4326}));ra={customLayerParameters:O.customLayerParameters,customParameters:O.customParameters,extent:ra,layerInfos:Va,version:O.version,maxWidth:O.maxWidth,maxHeight:O.maxHeight,featureInfoFormat:O.featureInfoFormat,
getFeatureInfoURL:O.featureInfoUrl,getMapURL:O.mapUrl,spatialReferences:O.spatialReferences,title:O.title,copyright:O.copyright,minScale:O.minScale||0,maxScale:O.maxScale||0,format:O.format};Da=new cc(O.url,{id:O.id,visibleLayers:Ra,format:"png",transparent:O.firstLayer?!1:!0,opacity:O.opacity,visible:null!==O.visibility?O.visibility:!0,resourceInfo:ra,refreshInterval:O.refreshInterval});Da.spatialReference.wkid=ra.spatialReferences[0]}else if(O&&("KML"===O.layerType||"KML"===O.type)){var Za=O.url;
if(e.id){var Sa=e.id.findCredential(A.urlToObject(rb.arcgisUrl).path);Sa&&(Ca=rb.arcgisUrl.substring(rb.arcgisUrl.indexOf("//")+2,rb.arcgisUrl.indexOf("/",rb.arcgisUrl.indexOf("//")+3)),xa=Ca.split("."),xa=xa[xa.length-2]+"."+xa[xa.length-1],Ja=Za.indexOf(xa),-1<Ja&&(Za="https://"+Ca+Za.substring(Ja+xa.length),Za+="?token\x3d"+Sa.token))}Da=new Kb(Za,{id:O.id,visible:null!==O.visibility?O.visibility:!0,outSR:ra,refreshInterval:O.refreshInterval});u.connect(Da,"onLoad",function(){(O.opacity||0===O.opacity)&&
Da.setOpacity(O.opacity);g.isDefined(O.minScale)&&g.isDefined(O.maxScale)&&Da.setScaleRange(O.minScale,O.maxScale);O.visibleFolders&&c.forEach(Da.folders,function($a){-1<c.indexOf(O.visibleFolders,$a.id)?Da.setFolderVisibility($a,!0):Da.setFolderVisibility($a,!1)},this)})}else if(!O||"WebTiledLayer"!==O.layerType&&"WebTiledLayer"!==O.type)if(!O||"GeoRSS"!==O.layerType&&"GeoRSS"!==O.type)if(O&&("CSV"===O.layerType||"CSV"===O.type)&&O.url)ra={layerDefinition:O.layerDefinition,columnDelimiter:O.columnDelimiter,
id:O.id?O.id:null,visible:null!==O.visibility?O.visibility:!0,opacity:O.opacity,refreshInterval:O.refreshInterval},O.locationInfo&&(ra.latitudeFieldName=O.locationInfo.latitudeFieldName,ra.longitudeFieldName=O.locationInfo.longitudeFieldName),!za.ignorePopups&&O.popupInfo&&(ra.infoTemplate=new Ha(O.popupInfo)),Da=new Ab(O.url,ra);else if("VectorTileLayer"===O.layerType&&O.styleUrl)Da=new bc(O.styleUrl,{id:O.id,minScale:O.minScale,maxScale:O.maxScale,opacity:O.opacity,visible:O.visibility});else if(O.layerDefinition&&
!O.url)ra=l.fromJson(l.toJson(O)),delete ra.id,delete ra.opacity,delete ra.visibility,Da=new T(ra,{id:O.id,opacity:O.opacity,visible:O.visibility,outFields:["*"],autoGeneralize:!0}),za.ignorePopups||!ra.popupInfo||ra.disablePopup||Da.setInfoTemplate(new Ha(ra.popupInfo)),bb(Da);else if(X(O))za.bingMapsKey?(ra=Eb.MAP_STYLE_AERIAL_WITH_LABELS,fa(O)?ra=Eb.MAP_STYLE_AERIAL:ca(O)&&(ra=Eb.MAP_STYLE_ROAD),Da=new Eb({bingMapsKey:za.bingMapsKey,mapStyle:ra,opacity:O.opacity,id:O.id}),u.connect(Da,"onError",
y.hitch(this,function($a){$a.errors=$a.errors||[];$a.errors.push({message:"This application does not have a valid Bing Key for the Bing layer that is included in this map. [type:"+($a?$a.layerType||$a.type:"")+"]"})},O))):(O.errors=O.errors||[],O.errors.push({message:"This application does not provide a Bing Key for the Bing layer that is included in this map. [type:"+(O?O.layerType||O.type:"")+"]"}));else if(O.resourceInfo&&(O.resourceInfo.mapName||""===O.resourceInfo.mapName))Da=!0===O.resourceInfo.singleFusedMapCache&&
(O.baseMapLayer||U(O,Ca,ra)&&na(O,xa,Ja))?va(O,Ha,za):Oa(O,Ha,za);else if(O.resourceInfo&&O.resourceInfo.pixelSizeX)Da=!0===O.resourceInfo.singleFusedMapCache&&"ArcGISImageServiceLayer"!==O.layerType&&(O.baseMapLayer||"Raster"===O.resourceInfo.cacheType||U(O,Ca,ra)&&na(O,xa,Ja))?va(O,Ha,za):W(O,Ha,za);else if(O.resourceInfo&&"Feature Layer"===O.resourceInfo.type){O.capabilities&&(O.resourceInfo.capabilities=O.capabilities);var Xa;!1===za.editable?Xa=!1:za.privileges&&-1===c.indexOf(za.privileges,
"features:user:edit")&&e.id&&e.id.findCredential(O.url)&&(Xa=!1);Da=new T(oa(O.url),{resourceInfo:O.resourceInfo,opacity:O.opacity,visible:O.visibility,id:O.id,mode:O.mode===T.MODE_SELECTION?T.MODE_SELECTION:T.MODE_AUTO,editable:Xa,outFields:["*"],autoGeneralize:!0,refreshInterval:O.refreshInterval});za.ignorePopups||!O.popupInfo||O.disablePopup||Da.setInfoTemplate(new Ha(O.popupInfo));O.layerDefinition&&(O.layerDefinition.drawingInfo&&O.layerDefinition.drawingInfo.renderer&&(ra=G.fromJson(O.layerDefinition.drawingInfo.renderer,
{geometryType:Da.geometryType}),ra.isMaxInclusive=!0,Da.setRenderer(ra)),O.layerDefinition.drawingInfo&&O.layerDefinition.drawingInfo.labelingInfo&&(ra=c.map(O.layerDefinition.drawingInfo.labelingInfo,function($a){return new Qb($a)}),Da.setLabelingInfo(ra)),O.layerDefinition.definitionExpression&&Da.setDefinitionExpression(O.layerDefinition.definitionExpression),g.isDefined(O.layerDefinition.minScale)&&Da.setMinScale(O.layerDefinition.minScale),g.isDefined(O.layerDefinition.maxScale)&&Da.setMaxScale(O.layerDefinition.maxScale));
bb(Da)}else O.resourceInfo&&O.resourceInfo.streamUrls&&(ra={resourceInfo:O.resourceInfo,opacity:O.opacity,visible:O.visibility,id:O.id},O.layerDefinition&&(Za=O.layerDefinition.drawingInfo,O.layerDefinition.definitionGeometry&&(Sa=Sa||{},Sa.geometry=O.layerDefinition.definitionGeometry),g.isDefined(O.layerDefinition.definitionExpression)&&(Sa=Sa||{},Sa.where=O.layerDefinition.definitionExpression),g.isDefined(O.layerDefinition.maximumTrackPoints)&&(ra.maximumTrackPoints=O.layerDefinition.maximumTrackPoints)),
Sa&&(ra.filter=Sa),O.purgeOptions&&(ra.purgeOptions=O.purgeOptions),Da=new Vb(oa(O.url),ra),Za&&Za.renderer&&(ra=Za.renderer,Da.setRenderer(G.fromJson(ra,{geometryType:O.resourceInfo.geometryType}))),Za&&Za.labelingInfo&&(ra=c.map(Za.labelingInfo,function($a){return new Qb($a)}),Da.setLabelingInfo(ra)),za.ignorePopups||!O.popupInfo||O.disablePopup||Da.setInfoTemplate(new Ha(O.popupInfo)),O.layerDefinition&&(g.isDefined(O.layerDefinition.minScale)&&Da.setMinScale(O.layerDefinition.minScale),g.isDefined(O.layerDefinition.maxScale)&&
Da.setMaxScale(O.layerDefinition.maxScale)),h.once(Da,"error",function($a){O.errors.push({message:"Error loading stream layer. Check websocket url"})}));else Da=new Tb(O.url,{id:O.id,opacity:O.opacity,outSpatialReference:ra,refreshInterval:O.refreshInterval}),u.connect(Da,"onLoad",function(){!1===O.visibility&&Da.hide();g.isDefined(O.minScale)&&g.isDefined(O.maxScale)&&Da.setScaleRange(O.minScale,O.maxScale);var $a=Da.getFeatureLayers();c.forEach($a,function(fb){O.pointSymbol&&"esriGeometryPoint"===
fb.geometryType?(fb.renderer.symbol=C.fromJson(O.pointSymbol),1===$a.length&&(Da.pointSymbol=C.fromJson(O.pointSymbol))):O.lineSymbol&&"esriGeometryPolyline"===fb.geometryType?(fb.renderer.symbol=C.fromJson(O.lineSymbol),1===$a.length&&(Da.polylineSymbol=C.fromJson(O.lineSymbol))):O.polygonSymbol&&"esriGeometryPolygon"===fb.geometryType&&(fb.renderer.symbol=C.fromJson(O.polygonSymbol),1===$a.length&&(Da.polygonSymbol=C.fromJson(O.polygonSymbol)))})});else if(Da=new Wb(O.templateUrl,{id:O.id,visible:null!==
O.visibility?O.visibility:!0,opacity:O.opacity,copyright:O.copyright,fullExtent:O.fullExtent&&new p(O.fullExtent),initialExtent:O.fullExtent&&new p(O.fullExtent),subDomains:O.subDomains,tileInfo:O.tileInfo?new kc(O.tileInfo):null,refreshInterval:O.refreshInterval,wmtsInfo:O.wmtsInfo}),g.isDefined(O.minScale)||g.isDefined(O.maxScale))Da.loaded?Da.setScaleRange(O.minScale,O.maxScale):u.connect(Da,"onLoad",function(){Da.setScaleRange(O.minScale,O.maxScale)});Da&&(Da.arcgisProps={title:O.title},O.baseMapLayer&&
(O.isReference?(Da.attr("data-reference",!0),Da._basemapGalleryLayerType="reference"):Da._basemapGalleryLayerType="basemap"),Da instanceof T&&O.layerDefinition&&O.layerDefinition.featureReduction&&"cluster"===O.layerDefinition.featureReduction.type&&(ra=O.layerDefinition.featureReduction,ra.clusterSize&&(ra.clusterSize=b.pt2px(ra.clusterSize)),ra.clusterRadius&&(ra.clusterRadius=b.pt2px(ra.clusterRadius)),ra.popupInfo&&(ra.infoTemplate=new z(ra.popupInfo),delete ra.popupInfo),Da.setFeatureReduction(ra)));
return Da}function Ea(O,Ca,za,ra,xa){c.forEach(O,function(Da){Da.layerObject=qa(Da,O,Ca,za,ra,xa)});var Ja=c.filter(O,function(Da){return!Da.isReference}),Ha=c.filter(O,function(Da){return!!Da.isReference});return O=Ja.concat(Ha)}function Ta(O){var Ca=null;O=O[0];O.url&&ma(O)&&O.resourceInfo.spatialReference&&(Ca=new x,O.resourceInfo.spatialReference.wkid&&(Ca.wkid=O.resourceInfo.spatialReference.wkid),O.resourceInfo.spatialReference.wkt&&(Ca.wkt=O.resourceInfo.spatialReference.wkt));X(O)||ea(O)?
Ca=new x({wkid:102100}):O&&("WMS"===O.layerType||"WMS"===O.type)&&(Ca=new x({wkid:O.spatialReferences[0]}));return Ca}function Ya(O,Ca,za,ra,xa,Ja,Ha,Da){c.forEach(Ca,function(Ka){Ka.url&&ma(Ka)&&(Ka.resourceInfo=O[Ka.deferredsPos][1],delete Ka.deferredsPos)});Ja=Ja||Ta(Ca);Ca=Ea(Ca,za,Ja,Ha,Da);xa.callback(Ca);return xa}function bb(O){!window.CanvasRenderingContext2D&&O.renderer&&"esri.renderer.HeatmapRenderer"===O.renderer.declaredClass&&O.setRenderer(G.fromJson({type:"simple",symbol:{color:[77,
77,77,255],size:6,angle:0,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSCircle",outline:{color:[255,255,255,255],width:.75,type:"esriSLS",style:"esriSLSSolid"}}}))}function Ma(O,Ca){var za=oa(O);return k({url:za,content:{f:"json"},callbackParamName:"callback",error:function(ra,xa){ra.message=ra.message?ra.message+(" [url:"+za+"]"):"[url:"+za+"]";Ca.push(ra);r.defaults.io.errorHandler(ra,xa)}})}function J(O){var Ca=rb.arcgisUrl+"/"+O.itemId+"/data";return k({url:Ca,content:{f:"json"},callbackParamName:"callback",
error:function(za,ra){za.message=za.message?za.message+(" [url:"+Ca+"]"):"[url:"+Ca+"]";O.errors=O.errors||[];O.errors.push(za);r.defaults.io.errorHandler(za,ra)}})}function Q(O,Ca,za){var ra=new q;if(!(za.featureCollection&&za.featureCollection.layers||za.layers))return console.log("Invalid Feature Collection item data [item id: "+O.itemId+"]: ",za),O.errors=O.errors||[],O.errors.push({message:"Invalid Feature Collection item data. [item id: "+O.itemId+"]"}),ra.errback(),ra;za.layers&&(za.featureCollection=
{layers:za.layers},delete za.layers,g.isDefined(za.showLegend)&&(za.featureCollection.showLegend=za.showLegend,delete za.showLegend));Z(O,za.featureCollection,Ca).then(function(xa){za.featureCollection=xa;O.featureCollection&&O.featureCollection.layers?c.forEach(za.featureCollection.layers,function(Ja,Ha){Ha=O.featureCollection.layers[Ha];Ha.popupInfo||Ha.layerDefinition?Ha.layerDefinition?(g.isDefined(Ha.layerDefinition.minScale)&&g.isDefined(Ha.layerDefinition.maxScale)&&(Ha.layerDefinition.minScale!==
Ja.layerDefinition.minScale||Ha.layerDefinition.maxScale!==Ja.layerDefinition.maxScale)&&(delete Ja.layerDefinition.minScale,delete Ja.layerDefinition.maxScale),Ha.layerDefinition.drawingInfo&&l.toJson(Ha.layerDefinition.drawingInfo)!==l.toJson(Ja.layerDefinition.drawingInfo)&&delete Ja.layerDefinition.drawingInfo,Ha.layerDefinition.showLegend!==Ja.layerDefinition.showLegend&&delete Ja.layerDefinition.showLegend,Ha.layerDefinition=y.mixin(Ha.layerDefinition,Ja.layerDefinition)):Ha.layerDefinition=
Ja.layerDefinition:(Ha.popupInfo=Ja.popupInfo,Ha.layerDefinition=Ja.layerDefinition);Ha.featureSet=Ja.featureSet;Ha.nextObjectId=Ja.nextObjectId}):(O.featureCollection=O.featureCollection||{},O.featureCollection=y.mixin(O.featureCollection,za.featureCollection));ra.callback(O)});return ra}function Z(O,Ca,za){var ra=new q;B(["./csv"],function(xa){var Ja=[];c.forEach(Ca.layers,function(Ha){Ha.featureSet&&Ha.featureSet.features&&Ha.featureSet.features.length&&Ha.featureSet.features[0].geometry&&Ha.featureSet.features[0].geometry.spatialReference&&
(Ha.deferredsPos=Ja.length,Ja.push(xa.projectFeatureCollection(Ha,za,Ha.featureSet.features[0].geometry.spatialReference)))});(new f(Ja)).addCallback(function(){c.forEach(Ca.layers,function(Ha){g.isDefined(Ha.deferredsPos)&&(Ja[Ha.deferredsPos].results&&Ja[Ha.deferredsPos].results.length?Ha=Ja[Ha.deferredsPos].results[0]:(console.log("Errors projecting feature collection. ["+O.title+" - "+Ha.layerDefinition.name+"]"),Ha.errors=Ha.errors||[],Ha.errors.push({message:"Errors projecting feature collection. ["+
O.title+" - "+Ha.layerDefinition.name+"]"})),delete Ha.deferredsPos)});ra.callback(Ca)})});return ra}function L(O,Ca,za,ra,xa){var Ja=new q,Ha=new q,Da=[];c.forEach(O.operationalLayers,function(Ra){Ra.itemId&&"Feature Collection"==Ra.type&&Da.push(J(Ra).then(y.hitch(null,Q,Ra,za)))});if(0===Da.length)R(O,Ca,za,ra,Ha,xa);else{var Ka=new f(Da);Ka.addCallback(function(Ra){R(O,Ca,za,ra,Ha,xa)})}Ha.then(function(Ra){Da=[];c.forEach(Ra,function(Za){Za=Za.layerObject;if(Za instanceof T&&!Za.loaded&&!Za.loadError){var Sa=
new q;h.once(Za,"load, error",function(){Sa.callback(Za)});Da.push(Sa)}else Za&&"esri.layers.WFSLayer"===Za.declaredClass&&!Za.loadError&&(Sa=new q,h.once(Za,"fromJsonComplete, error",function(Xa){Sa.callback(Za)}),Da.push(Sa))});if(Da.length){var Va=new q;Ka=new f(Da);Ka.addCallback(function(){Va.callback(Ra)});return Va.promise}return Ra}).then(function(Ra){var Va=[];c.forEach(Ra,function(Za){var Sa=Za.layerObject;Sa&&(Sa instanceof T||"esri.layers.StreamLayer"===Sa.declaredClass)?Sa.loaded&&Sa.labelingInfo&&
(Za.showLabels||Sa._collection?Va.push(Sa):Sa.setShowLabels&&Sa.setShowLabels(!1)):Sa&&"esri.layers.WFSLayer"===Sa.declaredClass&&Sa.loaded&&Sa.labelingInfo&&Va.push(Sa)});Va.length?B(["../layers/LabelLayer"],function(Za){var Sa=new Za;c.forEach(Va,function(Xa){Sa.addFeatureLayer(Xa)});Ra.push({layerObject:Sa});Ja.callback(Ra)}):Ja.callback(Ra)});return Ja}function R(O,Ca,za,ra,xa,Ja){var Ha=[],Da=[],Ka=[];c.forEach(O.operationalLayers,function(Ra,Va){if(Ra.featureCollection&&Ra.featureCollection.layers){var Za=
Ra.featureCollection.layers.length;c.forEach(Ra.featureCollection.layers,function(Sa,Xa){var $a=!0;Ra.visibleLayers&&-1==c.indexOf(Ra.visibleLayers,Xa)&&($a=!1);Sa.visibility=(null!=Ra.visibility?!!Ra.visibility:!0)&&$a;Sa.opacity=Ra.opacity;Sa.id=(Ra.id||"operational"+Va)+"_"+Xa;Ra.title&&(Sa.title=1!==Za&&Sa.layerDefinition.name&&Ra.title!==Sa.layerDefinition.name?Ra.title+" - "+Sa.layerDefinition.name:Ra.title);null==Sa.disablePopup&&(Sa.disablePopup=Ra.disablePopup);Ka.push(Sa)},this)}else Ka.push(Ra)});
c.forEach(O.baseMap.baseMapLayers,function(Ra,Va){Ra.baseMapLayer=!0;Ra.id=Ra.id||"base"+Va;Ha.push(Ra)});c.forEach(Ka,function(Ra,Va){Ra.id=Ra.id||"operational"+Va;Ha.push(Ra)});c.forEach(Ha,function(Ra){Ra.url&&ma(Ra)&&(Ra.deferredsPos=Da.length,Ra.errors=Ra.errors||[],Da.push(Ma(Ra.url,Ra.errors)))});0===Da.length?(za=za||Ta(Ha),Ha=Ea(Ha,Ca,za,ra,Ja),xa.callback(Ha)):(new f(Da)).addCallback(function(Ra){Ya(Ra,Ha,Ca,Da,xa,za,ra,Ja)});return xa}function aa(O,Ca,za,ra){var xa=O.minScale,Ja=O.maxScale;
if(10.1>=za.version&&Ca)for(O=Ca.length-1;0<=O;O--){if(Ca[O].id==ra)if(0==xa&&0<Ca[O].minScale?xa=Ca[O].minScale:0<xa&&0==Ca[O].minScale?xa=za.minScale:0<xa&&0<Ca[O].minScale&&(xa=Math.min(xa,Ca[O].minScale)),Ja=Math.max(za.maxScale||0,Ca[O].maxScale||0),za.setScaleRange(xa,Ja),-1<Ca[O].parentLayerId)ra=Ca[O].parentLayerId;else break}else 10.1<za.version&&(c.forEach(O.layerInfos,function(Ha){Ha.id==ra&&(0==xa&&0<Ha.minScale?xa=Ha.minScale:0<xa&&0==Ha.minScale||0<xa&&0<Ha.minScale&&(xa=Math.min(xa,
Ha.minScale)),Ja=Math.max(Ja||0,Ha.maxScale||0))}),za.setScaleRange(xa,Ja))}function ka(O,Ca,za,ra){var xa=O.url,Ja=O.__popupIds,Ha=O.__popupUrls,Da=O.__popupWhereClauses,Ka=O.__popupMinScales,Ra=O.__popupMaxScales,Va=O.__resourceInfo,Za=[];c.forEach(O.__popups,function(Sa,Xa){if(Sa){var $a=[];c.forEach(Sa.fieldInfos,function(tb){"shape"!==tb.fieldName.toLowerCase()&&$a.push(tb.fieldName)});if(O.dynamicLayerInfos&&0<O.dynamicLayerInfos.length){var fb=c.filter(O.dynamicLayerInfos,function(tb){return Ja[Xa]==
tb.id})[0].source;var Bb=new T(xa+"/dynamicLayer",{parentLayer:O,id:O.id+"_"+Ja[Xa],source:fb,outFields:$a,mode:T.MODE_SELECTION,infoTemplate:Sa&&new za(Sa),drawMode:!1,visible:O.visible,autoGeneralize:!0});var dc=function(tb,Yb){0<Da[tb].length&&Yb.setDefinitionExpression(Da[tb]);if(g.isDefined(Ka[tb])||g.isDefined(Ra[tb]))if(g.isDefined(O.minScale)||g.isDefined(O.maxScale)){var Fb=O.minScale,Zb=O.maxScale;0==Fb&&0<Ka[tb]?Fb=Ka[tb]:0<Fb&&0==Ka[tb]||0<Fb&&0<Ka[tb]&&(Fb=Math.min(Fb,Ka[tb]));Zb=Math.max(Zb||
0,Ra[tb]||0);Yb.setScaleRange(Fb,Zb)}else Yb.setScaleRange(Ka[tb],Ra[tb]);else aa(O,Ca||Va.layers,Yb,Ja[tb])};Bb.loaded?dc(Xa,Bb):u.connect(Bb,"onLoad",function(tb){dc(Xa,Bb)})}else{var Xb=null,qb=xa+"/"+Ja[Xa];if(Ha[Xa].length)qb=Ha[Xa];else if(Ca)for(fb=0;fb<Ca.length;fb++)if(Ca[fb].id===Ja[Xa]){Xb=Ca[fb];break}Bb=new T(oa(qb),{parentLayer:O,id:O.id+"_"+Ja[Xa],outFields:$a,mode:T.MODE_SELECTION,infoTemplate:Sa&&new za(Sa),drawMode:!1,visible:O.visible,resourceInfo:Xb,autoGeneralize:!0});Bb.loaded?
(0<Da[Xa].length&&Bb.setDefinitionExpression(Da[Xa]),aa(O,Ca||Va.layers,Bb,Ja[Xa])):u.connect(Bb,"onLoad",function(tb){0<Da[Xa].length&&Bb.setDefinitionExpression(Da[Xa]);aa(O,Ca||Va.layers,tb,Ja[Xa])})}Za.push(Bb)}});0<Za.length&&(u.connect(O,"onVisibilityChange",y.hitch(this,function(Sa,Xa){c.forEach(Sa,function($a){Xa?$a.show():$a.hide()})},Za)),u.connect(ra,"onLayerRemove",y.hitch(this,function(Sa,Xa,$a){Sa.id===$a.id&&c.forEach(Xa,function(fb){ra.removeLayer(fb)})},O,Za)));delete O.__popups;
delete O.__popupIds;delete O.__popupUrls;delete O.__popupWhereClauses;delete O.__popupMinScales;delete O.__popupMaxScales;delete O.__resourceInfo;return Za}function ua(O){return k({url:oa(O.url+"/layers"),content:{f:"json"},callbackParamName:"callback",error:function(){}})}function Aa(O,Ca,za){var ra=[];c.forEach(O,function(Ja){var Ha=Ja.__popups;Ha&&1<Ha.length&&10<=Ja.version&&(Ja.__deferredsPos=ra.length,ra.push(ua(Ja)))});var xa=[];0<ra.length?(new f(ra)).addCallback(function(Ja){c.forEach(O,
function(Ha){Ha.__popups&&0<Ha.__popups.length&&(Ha.__deferredsPos||0===Ha.__deferredsPos?(xa=xa.concat(ka(Ha,Ja[Ha.__deferredsPos][1].layers,za,Ca)),delete Ha.__deferredsPos):xa=xa.concat(ka(Ha,null,za,Ca)))});Ca.addLayers(xa)}):(c.forEach(O,function(Ja){Ja.__popups&&0<Ja.__popups.length&&(xa=xa.concat(ka(Ja,null,za,Ca)))}),Ca.addLayers(xa))}function Ba(O){c.forEach(O,function(Ca){var za=Ca.layer;za.toJson&&(Ca=za.toJson(),Ca.featureSet&&za.name&&-1<za.name.indexOf("Text")&&c.forEach(Ca.featureSet.features,
function(ra,xa){ra.attributes.TEXT&&(xa=za.graphics[xa],xa.symbol.setText(ra.attributes.TEXT),ra.symbol.horizontalAlignment&&(xa.symbol.align=ra.symbol.horizontalAlignment),xa.setSymbol(xa.symbol),xa.setAttributes(ra.attributes))},this))})}function Qa(O){var Ca=6;c.forEach(O,function(za){if(za=za.renderer)"esri.renderer.SimpleRenderer"===za.declaredClass?((za=za.symbol)&&za.xoffset&&(Ca=Math.max(Ca,Math.abs(za.xoffset))),za&&za.yoffset&&(Ca=Math.max(Ca,Math.abs(za.yoffset)))):"esri.renderer.UniqueValueRenderer"!==
za.declaredClass&&"esri.renderer.ClassBreaksRenderer"!==za.declaredClass||c.forEach(za.infos,function(ra){(ra=ra.symbol)&&ra.xoffset&&(Ca=Math.max(Ca,Math.abs(ra.xoffset)));ra&&ra.yoffset&&(Ca=Math.max(Ca,Math.abs(ra.yoffset)))})});return Ca}function La(O){var Ca=this,za=Ca.infoWindow,ra=O.graphic;if(Ca.loaded){za.hide();za.clearFeatures();var xa=[];c.forEach(Ca.graphicsLayerIds,function(Sa){(Sa=Ca.getLayer(Sa))&&Sa instanceof T&&Sa.loaded&&Sa.visible&&(Sa.clearSelection(),Sa.infoTemplate&&!Sa.suspended&&
xa.push(Sa))});c.forEach(Ca.layerIds,function(Sa){(Sa=Ca.getLayer(Sa))&&-1!==Sa.declaredClass.indexOf("ArcGISImageServiceLayer")&&Sa.loaded&&Sa.visible&&Sa.infoTemplate&&xa.push(Sa)});ra=ra&&ra.getInfoTemplate()?ra:null;if(xa.length||ra){var Ja=Qa(xa),Ha=O.screenPoint,Da=Ca.toMap(new w(Ha.x-Ja,Ha.y+Ja));Ja=Ca.toMap(new w(Ha.x+Ja,Ha.y-Ja));var Ka=new p(Da.x,Da.y,Ja.x,Ja.y,Ca.spatialReference),Ra=new H;Ra.geometry=Ka;Ra.timeExtent=Ca.timeExtent;var Va=!0;Da=c.map(xa,function(Sa){Sa=Sa&&Sa.isFeatureReductionActive&&
Sa.isFeatureReductionActive()?Sa.getFeatureReductionLayer():Sa;if(-1!==Sa.declaredClass.indexOf("ArcGISImageServiceLayer")){Ra.geometry=O.mapPoint;Va=!1;var Xa=Sa.queryVisibleRasters(Ra,{rasterAttributeTableFieldPrefix:"Raster.",returnDomainValues:!0});Xa.addCallback(function(){return Sa.getVisibleRasters()})}else if("function"===typeof Sa.selectFeatures)Xa=Sa.selectFeatures(Ra),Xa.addCallback(function(){return Sa.getSelectedFeatures()});else{Xa=new q;var $a=c.filter(Sa.graphics,function(fb){return fb&&
fb.visible&&Ka.intersects(fb.geometry)});Xa.resolve($a)}return Xa});ra&&(Ja=new q,Ja.callback([ra]),Da.splice(0,0,Ja));if(!c.some(Da,function(Sa){return-1===Sa.fired})){var Za=ra?1:0;c.forEach(xa,function(Sa){Za=-1!==Sa.declaredClass.indexOf("ArcGISImageServiceLayer")?Za+Sa.getVisibleRasters().length:Za+Sa.getSelectedFeatures().length});if(!Za)return}za.setFeatures(Da);za.show(O.mapPoint,{closestFirst:Va})}}}function Ia(O,Ca){var za=Ca.mapOptions||{};if(!za.infoWindow){var ra=new E({visibleWhenEmpty:!1},
d.create("div"));za.infoWindow=ra}g.isDefined(za.showInfoWindowOnClick)||Ca.usePopupManager||(za.showInfoWindowOnClick=!1);O=new v(O,za);u.connect(O,"onLayersAddResult",Ba);return O}function Na(O,Ca,za,ra,xa,Ja){if(ra.map){var Ha=ra.map;var Da=ra.clickEventHandle;var Ka=ra.clickEventListener;var Ra=ra.errors}else{var Va=za.itemData;!xa.mapOptions.backgroundColor&&Va.background&&Va.background.color&&null!=Va.background.color[0]&&(xa.mapOptions.backgroundColor=t.toDojoColor(Va.background.color));Ha=
Ia(ra,xa);xa.ignorePopups||xa.disableClickBehavior||xa.usePopupManager||(Da=u.connect(Ha,"onClick",La),Ka=La)}Ha.addLayers(O);xa.ignorePopups||xa.usePopupManager||Aa(O,Ha,xa._clazz);var Za=Ra||[];c.forEach(Ca,function(Sa){Sa.errors&&(Za=Za.concat(Sa.errors))},this);Ha.loaded?Ja.callback({map:Ha,itemInfo:za,errors:Za,clickEventHandle:Da,clickEventListener:Ka}):u.connect(Ha,"onLoad",function(){Ja.callback({map:Ha,itemInfo:za,errors:Za,clickEventHandle:Da,clickEventListener:Ka})})}function eb(O,Ca,za,
ra,xa){var Ja=[];c.forEach(xa,function(Ka){y.isArray(Ka.layerObject)?c.forEach(Ka.layerObject,function(Ra){Ja.push(Ra)}):Ja.push(Ka.layerObject)});if(X(xa[0]))var Ha=setInterval(function(){if(xa[0].layerObject&&xa[0].layerObject.loaded)clearInterval(Ha),ab(O,Ca,za,ra,xa,Ja);else if(xa[0].errors){clearInterval(Ha);var Ka="";xa[0].errors&&xa[0].errors.length&&(Ka=" ("+xa[0].errors[0].message+")");ra.errback(Error(Y.arcgis.utils.baseLayerError+Ka))}},10);else if(!Ja[0]&&xa[0].baseMapLayer){var Da="";
xa[0].errors&&xa[0].errors.length&&(Da=" ("+xa[0].errors[0].message+")");ra.errback(Error(Y.arcgis.utils.baseLayerError+Da))}else ab(O,Ca,za,ra,xa,Ja)}function ab(O,Ca,za,ra,xa,Ja){try{var Ha=za.mapOptions||{};za.mapOptions=Ha;Ja=c.filter(Ja,g.isDefined);if(Ca.map||Ha.extent)Na(Ja,xa,O,Ca,za,ra);else{var Da=Ja[0].spatialReference;if(Ha.center&&(null!=Ha.zoom||Ha.scale)&&(y.isArray(Ha.center)&&(Ha.center=new n(Ha.center)),D.canProject(Ha.center,Da))){Na(Ja,xa,O,Ca,za,ra);return}var Ka=O.item;if(Ka&&
Ka.extent&&Ka.extent.length){var Ra=new p(Ka.extent[0][0],Ka.extent[0][1],Ka.extent[1][0],Ka.extent[1][1],new x({wkid:4326}));4326===Da.wkid?(Ha.extent=Ra,Na(Ja,xa,O,Ca,za,ra)):900913===Da.wkid||102100===Da.wkid||102113===Da.wkid||3857===Da.wkid?(Ra.xmin=Math.max(Ra.xmin,-180),Ra.xmax=Math.min(Ra.xmax,180),Ra.ymin=Math.max(Ra.ymin,-89.99),Ra.ymax=Math.min(Ra.ymax,89.99),Ha.extent=D.geographicToWebMercator(Ra),Na(Ja,xa,O,Ca,za,ra)):za.geometryServiceURL||r.defaults.geometryService?(za.geometryServiceURL?
new I(za.geometryServiceURL):r.defaults.geometryService).project([Ra],Da,function(Va){Va=Va[0];Ha.extent=Ha.extent||Va;Na(Ja,xa,O,Ca,za,ra)},function(){Na(Ja,xa,O,Ca,za,ra)}):ra.errback(Error(Y.arcgis.utils.geometryServiceError))}else Na(Ja,xa,O,Ca,za,ra)}}catch(Va){ra.errback(Va)}}function gb(O){var Ca=[];c.forEach(O.operationalLayers,function(za){za.featureCollection?Ca.push({featureCollection:za.featureCollection,visibility:null!=za.visibility?!!za.visibility:!0,title:za.title}):za.layerObject&&
Ca.push({layer:za.layerObject,visibility:null!=za.visibility?!!za.visibility:!0,title:za.title})});return Ca}function cb(O){var Ca=[],za=O.baseMap.baseMapLayers;O.operationalLayers&&(za=za.concat(O.operationalLayers));c.forEach(za,function(ra){var xa={};if(ra.featureCollection&&(!ra||"CSV"!==ra.layerType&&"CSV"!==ra.type))!0===ra.featureCollection.showLegend&&c.forEach(ra.featureCollection.layers,function(Da){if(!1!==Da.showLegend){var Ka=Da.layerObject.renderer;xa={layer:Da.layerObject,title:ra.title,
defaultSymbol:Ka&&Ka.defaultSymbol&&Ka.defaultLabel?!0:!1};1<ra.featureCollection.layers.length&&(xa.title+=" - "+Da.layerDefinition.name);Ca.push(xa)}});else if(ra.baseMapLayer&&!0===ra.showLegend&&ra.layerObject||!ra.baseMapLayer&&!1!==ra.showLegend&&ra.layerObject&&!(ra.layerObject instanceof T&&ra.layerObject.mode===T.MODE_SELECTION)){var Ja=ra.layerObject.renderer,Ha=ra.layerObject.declaredClass;Ja=!Ja||Ja&&Ja.defaultSymbol&&Ja.defaultLabel?!0:!1;if(10.1>ra.layerObject.version&&("esri.layers.ArcGISDynamicMapServiceLayer"===
Ha||"esri.layers.ArcGISTiledMapServiceLayer"===Ha)||"esri.layers.ArcGISImageServiceLayer"===Ha)Ja=!0;xa={layer:ra.layerObject,title:ra.title,defaultSymbol:Ja};ra.layers&&(Ha=c.map(c.filter(ra.layers,function(Da){return!1===Da.showLegend}),function(Da){return Da.id}),Ha.length&&(xa.hideLayers=Ha));Ca.push(xa)}});return Ca}function kb(O,Ca){function za(Da,Ka){c.forEach(Da,function(Ra,Va){switch(Ra){case "../layers/ArcGISDynamicMapServiceLayer":jb=Ka[Va];break;case "../layers/ArcGISImageServiceLayer":nb=
Ka[Va];break;case "../layers/ArcGISImageServiceVectorLayer":Jb=Ka[Va];break;case "../layers/CSVLayer":Ab=Ka[Va];break;case "../layers/DynamicLayerInfo":vb=Ka[Va];break;case "../layers/GeoRSSLayer":Tb=Ka[Va];break;case "../layers/ImageParameters":zb=Ka[Va];break;case "../layers/ImageServiceParameters":Db=Ka[Va];break;case "../layers/KMLLayer":Kb=Ka[Va];break;case "../layers/LabelClass":Qb=Ka[Va];break;case "../layers/LayerDrawingOptions":Gb=Ka[Va];break;case "../layers/MosaicRule":Rb=Ka[Va];break;
case "../layers/OpenStreetMapLayer":jc=Ka[Va];break;case "../layers/RasterFunction":$b=Ka[Va];break;case "../layers/RasterXLayer":ac=Ka[Va];break;case "../layers/StreamLayer":Vb=Ka[Va];break;case "../layers/TileInfo":kc=Ka[Va];break;case "../layers/VectorTileLayer":bc=Ka[Va];break;case "../virtualearth/VETiledLayer":Eb=Ka[Va];break;case "../layers/WebTiledLayer":Wb=Ka[Va];break;case "../layers/WFSLayer":lc=Ka[Va];break;case "../layers/WMSLayer":cc=Ka[Va];break;case "../layers/WMSLayerInfo":mc=Ka[Va]}})}
var ra=new q;O=O.itemData;Ca=[];O.baseMap&&O.baseMap.baseMapLayers&&(Ca=Ca.concat(O.baseMap.baseMapLayers));O.operationalLayers&&(Ca=Ca.concat(O.operationalLayers));O=c.map(Ca,function(Da){return Da&&Da.layerType});var xa=[],Ja=[];Ca=!1;for(var Ha=0;Ha<O.length;Ha++){switch(O[Ha]){case "ArcGISFeatureLayer":-1===c.indexOf(xa,"../layers/LabelClass")&&xa.push("../layers/LabelClass");break;case "ArcGISImageServiceLayer":case "ArcGISTiledImageServiceLayer":-1===c.indexOf(xa,"../layers/ArcGISImageServiceLayer")&&
(xa.push("../layers/ArcGISImageServiceLayer"),Ja.push("../layers/ImageServiceParameters"),Ja.push("../layers/MosaicRule"),Ja.push("../layers/RasterFunction"),xa.push("../layers/RasterXLayer"));break;case "ArcGISImageServiceVectorLayer":-1===c.indexOf(xa,"../layers/ArcGISImageServiceVectorLayer")&&(xa.push("../layers/ArcGISImageServiceVectorLayer"),Ja.push("../layers/ImageServiceParameters"),Ja.push("../layers/MosaicRule"),Ja.push("../layers/RasterFunction"));break;case "ArcGISMapServiceLayer":case "ArcGISTiledMapServiceLayer":-1===
c.indexOf(xa,"../layers/ArcGISDynamicMapServiceLayer")&&(xa.push("../layers/ArcGISDynamicMapServiceLayer"),Ja.push("../layers/DynamicLayerInfo"),Ja.push("../layers/ImageParameters"),Ja.push("../layers/LayerDrawingOptions"));break;case "ArcGISStreamLayer":-1===c.indexOf(xa,"../layers/StreamLayer")&&xa.push("../layers/StreamLayer");-1===c.indexOf(xa,"../layers/LabelClass")&&xa.push("../layers/LabelClass");break;case "BingMapsAerial":case "BingMapsHybrid":case "BingMapsRoad":-1===c.indexOf(xa,"../virtualearth/VETiledLayer")&&
xa.push("../virtualearth/VETiledLayer");break;case "CSV":-1===c.indexOf(xa,"../layers/CSVLayer")&&(xa.push("../layers/CSVLayer"),Ja.push("./csv"));break;case "GeoRSS":-1===c.indexOf(xa,"../layers/GeoRSSLayer")&&xa.push("../layers/GeoRSSLayer");break;case "KML":-1===c.indexOf(xa,"../layers/KMLLayer")&&xa.push("../layers/KMLLayer");break;case "OpenStreetMap":-1===c.indexOf(xa,"../layers/OpenStreetMapLayer")&&xa.push("../layers/OpenStreetMapLayer");break;case "VectorTileLayer":-1===c.indexOf(xa,"../layers/VectorTileLayer")&&
xa.push("../layers/VectorTileLayer");break;case "WebTiledLayer":-1===c.indexOf(xa,"../layers/WebTiledLayer")&&(xa.push("../layers/WebTiledLayer"),Ja.push("../layers/TileInfo"));break;case "WFS":-1===c.indexOf(xa,"../layers/WFSLayer")&&xa.push("../layers/WFSLayer");break;case "WMS":-1===c.indexOf(xa,"../layers/WMSLayer")&&(xa.push("../layers/WMSLayer"),Ja.push("../layers/WMSLayerInfo"));break;default:Ca=!0}if(Ca)break}Ca&&(xa=pc,Ja=Ib);xa.length?B(xa,function(){za(xa,arguments);Ja.length?B(Ja,function(){za(Ja,
arguments);ra.resolve()}):ra.resolve()}):ra.resolve();return ra}function ub(O){O=O.itemData;var Ca=function(ra,xa){"GroupLayer"===ra.layerType?c.forEach(ra.layers,function(Ja){Ja.visibility=!1===ra.visibility?!1:Ja.visibility;Ja.opacity=g.isDefined(ra.opacity)?g.isDefined(Ja.opacity)?Ja.opacity*ra.opacity:ra.opacity:Ja.opacity;Ca(Ja,xa)}):xa.push(ra)},za=[];c.forEach(O.operationalLayers,function(ra){Ca(ra,za)});O.operationalLayers=za}function ob(O,Ca,za,ra){ub(ra);var xa=ra.itemData;xa.baseMap&&xa.baseMap.baseMapLayers&&
xa.baseMap.baseMapLayers.length&&(xa.baseMap.baseMapLayers[0].firstLayer=!0);var Ja=Ca.layerMixins,Ha=Ja&&Ja.length;if(Ha){var Da=function(Ka){for(var Ra=0;Ra<Ha;Ra++){var Va=Ja[Ra];if(Va.mixin)if(Va.hasOwnProperty("id")){if(Ka.id===Va.id){y.mixin(Ka,Va.mixin);break}}else if(Ka.url===Va.url){y.mixin(Ka,Va.mixin);break}}};c.forEach(xa.baseMap&&xa.baseMap.baseMapLayers,Da);c.forEach(xa.operationalLayers,Da)}kb(ra,Ca).then(function(){return ha(ra,Ca)}).then(function(){return S(ra,Ca)}).then(function(Ka){var Ra=
Ka[0],Va=Ka[1];if(Ra.itemData.operationalLayers&&0!==Ra.itemData.operationalLayers.length){var Za=new q,Sa=Ra.itemData.baseMap.baseMapLayers.slice(),Xa=c.filter(Ra.itemData.baseMap.baseMapLayers,function($a){return!$a.isReference});Ka={item:Ra.item,itemData:{baseMap:{baseMapLayers:Xa},background:y.clone(Ra.itemData.background)}};Ra.itemData.baseMap.baseMapLayers=c.filter(Ra.itemData.baseMap.baseMapLayers,function($a){return $a.isReference});N(Ka,Va).addCallback(function($a){L($a.itemData,Va).addCallback(y.hitch(null,
eb,$a,O,Va,Za))});Za.then(function($a){N(Ra,Va).addCallback(function(fb){L(fb.itemData,Va,$a.map.spatialReference,Xa,$a.map).addCallback(function(Bb){fb.itemData.baseMap.baseMapLayers=Sa;eb(fb,$a,Va,za,Bb)})})},y.hitch(za,za.errback))}else N(Ra,Va).addCallback(function($a){L($a.itemData,Va).addCallback(y.hitch(null,eb,$a,O,Va,za))})})}function db(O,Ca){"undefined"===typeof Ca&&(Ca=!0);rb._arcgisUrl&&0<rb._arcgisUrl.length&&(rb.arcgisUrl=rb._arcgisUrl);var za={},ra=new q;k({url:rb.arcgisUrl+"/"+O,
content:{f:"json"},callbackParamName:"callback",load:function(xa){za.item=xa;Ca?k({url:rb.arcgisUrl+"/"+O+"/data",content:{f:"json"},callbackParamName:"callback",load:function(Ja){za.itemData=Ja;ra.callback(za)},error:function(Ja){ra.errback(Ja)}}):ra.callback(za)},error:function(xa){ra.errback(xa)}});return ra}var jb,nb,Jb,Ab,vb,Tb,zb,Db,Kb,Qb,Gb,Rb,jc,$b,ac,Vb,kc,bc,Eb,Wb,lc,cc,mc,pc="../layers/ArcGISDynamicMapServiceLayer ../layers/ArcGISImageServiceLayer ../layers/ArcGISImageServiceVectorLayer ../layers/CSVLayer ../layers/GeoRSSLayer ../layers/KMLLayer ../layers/LabelClass ../layers/OpenStreetMapLayer ../layers/RasterXLayer ../layers/StreamLayer ../layers/VectorTileLayer ../virtualearth/VETiledLayer ../layers/WebTiledLayer ../layers/WFSLayer ../layers/WMSLayer".split(" "),
Ib="./csv ../layers/DynamicLayerInfo ../layers/ImageParameters ../layers/ImageServiceParameters ../layers/LayerDrawingOptions ../layers/MosaicRule ../layers/RasterFunction ../layers/TileInfo ../layers/WMSLayerInfo".split(" ");var rb={arcgisUrl:A.getProtocolForWebResource()+"//www.arcgis.com/sharing/rest/content/items",getItem:db,createMap:function(O,Ca,za){var ra=new q;za=za||{};var xa=za.infoTemplateClass;za._clazz=xa&&(y.isObject(xa)?xa:y.getObject(xa))||z;y.isString(O)?db(O).addCallback(y.hitch(null,
ob,Ca,za,ra)).addErrback(y.hitch(ra,ra.errback)):ob(Ca,za,ra,O);ra.addCallback(function(Ja){var Ha=Ja.map;Ha&&(Ha.tables=y.getObject("itemInfo.itemData.tables",!1,Ja)||[])});return ra},getLayerList:function(O){return O&&O.itemInfo&&O.itemInfo.itemData?gb(O.itemInfo.itemData):[]},getLegendLayers:function(O){return O&&O.itemInfo&&O.itemInfo.itemData?cb(O.itemInfo.itemData):[]},_arcgisUrl:null,_getItemProps:N,_getItemData:wa,_getBingKey:P,_portalUrlResponse:la,_portalUrlFailure:sa,_processFSItemProperties:ja,
_processSSItemProperties:ta,_getLayers:L,_preBuildLayerObjects:Ya,_buildLayerObjects:Ea,_preCreateMap:eb,_getMapSR:Ta,_createMap:Na,_addSelectionLayers:Aa,_createSelectionFeatureLayers:ka,_getServiceInfo:Ma,_getFeatureCollectionItem:J,_mergeFeatureCollectionItem:Q,_projectFeatureCollection:Z,_getLayersInfo:ua,_initLayer:qa,_loadAsCached:va,_loadAsDynamic:Oa,_processPopups:Ga,_onLayersAddResult:Ba,_sameSpatialReferenceAsBasemap:U,_sameTilingSchemeAsBasemap:na,_showPopup:La,_calculateClickTolerance:Qa,
_getVisibleFeatureLayers:pa,_updateLayerScaleInfo:aa,_checkUrl:oa,_isHostedService:ba,_isAgolService:da,_getLegendLayers:cb};y.setObject("arcgis.utils",rb,e);return rb})},"esri/tasks/GeometryService":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/has ../kernel ../request ../deferredUtils ./Task ../geometry/Extent ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/jsonUtils".split(" "),function(B,y,c,u,q,l,m,
h,f,d,a,b,e,r,t){B=B(d,{declaredClass:"esri.tasks.GeometryService",_eventMap:{"areas-and-lengths-complete":["result"],"auto-complete-complete":["geometries"],"buffer-complete":["geometries"],"convex-hull-complete":["geometry"],"cut-complete":["result"],"densify-complete":["geometries"],"difference-complete":["geometries"],"distance-complete":["distance"],"generalize-complete":["geometries"],"intersect-complete":["geometries"],"label-points-complete":["geometries"],"lengths-complete":["result"],"offset-complete":["geometries"],
"project-complete":["geometries"],"relation-complete":["relations"],"reshape-complete":["geometry"],"simplify-complete":["geometries"],"trim-extend-complete":["geometries"],"union-complete":["geometry"]},constructor:function(g){g=y.hitch;this._projectHandler=g(this,this._projectHandler);this._simplifyHandler=g(this,this._simplifyHandler);this._bufferHandler=g(this,this._bufferHandler);this._areasAndLengthsHandler=g(this,this._areasAndLengthsHandler);this._lengthsHandler=g(this,this._lengthsHandler);
this._labelPointsHandler=g(this,this._labelPointsHandler);this._relationHandler=g(this,this._relationHandler);this._convexHullHandler=g(this,this._convexHullHandler);this._unionHandler=g(this,this._unionHandler);this._autoCompleteHandler=g(this,this._autoCompleteHandler);this._reshapeHandler=g(this,this._reshapeHandler);this._cutHandler=g(this,this._cutHandler);this._intersectHandler=g(this,this._intersectHandler);this._differenceHandler=g(this,this._differenceHandler);this._trimExtendHandler=g(this,
this._trimExtendHandler);this._densifyHandler=g(this,this._densifyHandler);this._generalizeHandler=g(this,this._densifyHandler);this._offsetHandler=g(this,this._offsetHandler);this._distanceHandler=g(this,this._distanceHandler);this._toGeoCoordinateHandler=g(this,this._toGeoCoordinateHandler);this._fromGeoCoordinateHandler=g(this,this._fromGeoCoordinateHandler);this.registerConnectEvents()},_encodeGeometries:function(g){var k=[],x,v=g.length;for(x=0;x<v;x++)k.push(g[x].toJson());return{geometryType:t.getJsonType(g[0]),
geometries:k}},_decodeGeometries:function(g,k,x){var v=t.getGeometryType(k);g=g.geometries;var A=[],n={spatialReference:x.toJson()},w=y.mixin;c.forEach(g,function(p,D){A[D]=new v(w(p,n))});return A},_toProjectGeometry:function(g){var k=g.spatialReference.toJson();return g instanceof a?new e({rings:[[[g.xmin,g.ymin],[g.xmin,g.ymax],[g.xmax,g.ymax],[g.xmax,g.ymin],[g.xmin,g.ymin]]],spatialReference:k}):new b({paths:[[].concat(g.points)],spatialReference:k})},_fromProjectedGeometry:function(g,k,x){return"esriGeometryEnvelope"===
k?(g=g.rings[0],new a(g[0][0],g[0][1],g[2][0],g[2][1],x)):new r({points:g.paths[0],spatialReference:x.toJson()})},project:function(g,k,x,v){var A=y.mixin({},this._url.query,{f:"json"});if(g.geometries){v=x;x=k;k=g.outSR;var n=g.geometries[0];A=y.mixin(A,g.toJson())}else n=g[0],A=y.mixin(A,{outSR:k.wkid||u.toJson(k.toJson()),inSR:n.spatialReference.wkid||u.toJson(n.spatialReference.toJson()),geometries:u.toJson(this._encodeGeometries(g))});var w=t.getJsonType(n),p=this._projectHandler,D=this._errorHandler,
C=new q(f._dfdCanceller);C._pendingDfd=h({url:this._url.path+"/project",content:A,callbackParamName:"callback",load:function(G,z){p(G,z,w,k,x,v,C)},error:function(G){D(G,v,C)}});return C},_projectHandler:function(g,k,x,v,A,n,w){try{var p=this._decodeGeometries(g,x,v);this._successHandler([p],"onProjectComplete",A,w)}catch(D){this._errorHandler(D,n,w)}},onProjectComplete:function(){},simplify:function(g,k,x){var v=g[0].spatialReference,A=y.mixin({},this._url.query,{f:"json",sr:v.wkid?v.wkid:u.toJson(v.toJson()),
geometries:u.toJson(this._encodeGeometries(g))}),n=t.getJsonType(g[0]),w=this._simplifyHandler,p=this._errorHandler,D=new q(f._dfdCanceller);D._pendingDfd=h({url:this._url.path+"/simplify",content:A,callbackParamName:"callback",load:function(C,G){w(C,G,n,v,k,x,D)},error:function(C){p(C,x,D)}});return D},_simplifyHandler:function(g,k,x,v,A,n,w){try{var p=this._decodeGeometries(g,x,v);this._successHandler([p],"onSimplifyComplete",A,w)}catch(D){this._errorHandler(D,n,w)}},onSimplifyComplete:function(){},
convexHull:function(g,k,x){var v=g[0].spatialReference;g=y.mixin({},this._url.query,{f:"json",sr:u.toJson(v.toJson()),geometries:u.toJson(this._encodeGeometries(g))});var A=this._convexHullHandler,n=this._errorHandler,w=new q(f._dfdCanceller);w._pendingDfd=h({url:this._url.path+"/convexHull",content:g,callbackParamName:"callback",load:function(p,D){A(p,D,v,k,x,w)},error:function(p){n(p,x,w)}});return w},_convexHullHandler:function(g,k,x,v,A,n){try{var w=t.fromJson(g.geometry).setSpatialReference(x);
this._successHandler([w],"onConvexHullComplete",v,n)}catch(p){this._errorHandler(p,A,n)}},onConvexHullComplete:function(){},union:function(g,k,x){var v=g[0].spatialReference;g=y.mixin({},this._url.query,{f:"json",sr:u.toJson(v.toJson()),geometries:u.toJson(this._encodeGeometries(g))});var A=this._unionHandler,n=this._errorHandler,w=new q(f._dfdCanceller);w._pendingDfd=h({url:this._url.path+"/union",content:g,callbackParamName:"callback",load:function(p,D){A(p,D,v,k,x,w)},error:function(p){n(p,x,w)}});
return w},_unionHandler:function(g,k,x,v,A,n){try{var w=t.fromJson(g.geometry).setSpatialReference(x);this._successHandler([w],"onUnionComplete",v,n)}catch(p){this._errorHandler(p,A,n)}},onUnionComplete:function(){},autoComplete:function(g,k,x,v){var A=g[0].spatialReference;g=y.mixin({},this._url.query,{f:"json",sr:u.toJson(A.toJson()),polygons:u.toJson(this._encodeGeometries(g).geometries),polylines:u.toJson(this._encodeGeometries(k).geometries)});var n=this._autoCompleteHandler,w=this._errorHandler,
p=new q(f._dfdCanceller);p._pendingDfd=h({url:this._url.path+"/autoComplete",content:g,callbackParamName:"callback",load:function(D,C){n(D,C,A,x,v,p)},error:function(D){w(D,v,p)}});return p},_autoCompleteHandler:function(g,k,x,v,A,n){try{var w=g.geometries;g=[];var p,D=w.length;for(p=0;p<D;p++)g[p]=new e({spatialReference:x,rings:w[p].rings});this._successHandler([g],"onAutoCompleteComplete",v,n)}catch(C){this._errorHandler(C,A,n)}},onAutoCompleteComplete:function(){},reshape:function(g,k,x,v){var A=
g.spatialReference;g=y.mixin({},this._url.query,{f:"json",sr:u.toJson(A.toJson()),target:u.toJson({geometryType:t.getJsonType(g),geometry:g.toJson()}),reshaper:u.toJson(k.toJson())});var n=this._reshapeHandler,w=this._errorHandler,p=new q(f._dfdCanceller);p._pendingDfd=h({url:this._url.path+"/reshape",content:g,callbackParamName:"callback",load:function(D,C){n(D,C,A,x,v,p)},error:function(D){w(D,v,p)}});return p},_reshapeHandler:function(g,k,x,v,A,n){try{var w=t.fromJson(g.geometry).setSpatialReference(x);
this._successHandler([w],"onReshapeComplete",v,n)}catch(p){this._errorHandler(p,A,n)}},onReshapeComplete:function(){},cut:function(g,k,x,v){var A=g[0].spatialReference,n=c.map(g,function(C){return C.toJson()});g=y.mixin({},this._url.query,{f:"json",sr:u.toJson(A.toJson()),target:u.toJson({geometryType:t.getJsonType(g[0]),geometries:n}),cutter:u.toJson(k.toJson())});var w=this._cutHandler,p=this._errorHandler,D=new q(f._dfdCanceller);D._pendingDfd=h({url:this._url.path+"/cut",content:g,callbackParamName:"callback",
load:function(C,G){w(C,G,A,x,v,D)},error:function(C){p(C,v,D)}});return D},_cutHandler:function(g,k,x,v,A,n){try{var w=g.geometries,p={};p.cutIndexes=g.cutIndexes;p.geometries=[];c.forEach(w,function(D){p.geometries.push(t.fromJson(D).setSpatialReference(x))});this._successHandler([p],"onCutComplete",v,n)}catch(D){this._errorHandler(D,A,n)}},onCutComplete:function(){},intersect:function(g,k,x,v){var A=g[0].spatialReference;g=y.mixin({},this._url.query,{f:"json",sr:u.toJson(A.toJson()),geometries:u.toJson(this._encodeGeometries(g)),
geometry:u.toJson({geometryType:t.getJsonType(k),geometry:k.toJson()})});var n=this._intersectHandler,w=this._errorHandler,p=new q(f._dfdCanceller);p._pendingDfd=h({url:this._url.path+"/intersect",content:g,callbackParamName:"callback",load:function(D,C){n(D,C,A,x,v,p)},error:function(D){w(D,v,p)}});return p},_intersectHandler:function(g,k,x,v,A,n){try{var w=[];c.forEach(g.geometries,function(p){w.push(t.fromJson(p).setSpatialReference(x))});this._successHandler([w],"onIntersectComplete",v,n)}catch(p){this._errorHandler(p,
A,n)}},onIntersectComplete:function(){},difference:function(g,k,x,v){var A=g[0].spatialReference;g=y.mixin({},this._url.query,{f:"json",sr:u.toJson(A.toJson()),geometries:u.toJson(this._encodeGeometries(g)),geometry:u.toJson({geometryType:t.getJsonType(k),geometry:k.toJson()})});var n=this._differenceHandler,w=this._errorHandler,p=new q(f._dfdCanceller);p._pendingDfd=h({url:this._url.path+"/difference",content:g,callbackParamName:"callback",load:function(D,C){n(D,C,A,x,v,p)},error:function(D){w(D,
v,p)}});return p},_differenceHandler:function(g,k,x,v,A,n){try{var w=[];c.forEach(g.geometries,function(p){w.push(t.fromJson(p).setSpatialReference(x))});this._successHandler([w],"onDifferenceComplete",v,n)}catch(p){this._errorHandler(p,A,n)}},onDifferenceComplete:function(){},buffer:function(g,k,x){var v=y.mixin({},this._url.query,{f:"json"},g.toJson()),A=g.outSpatialReference||g.geometries[0].spatialReference,n=this._bufferHandler,w=this._errorHandler,p=new q(f._dfdCanceller);p._pendingDfd=h({url:this._url.path+
"/buffer",content:v,callbackParamName:"callback",load:function(D,C){n(D,C,A,k,x,p)},error:function(D){w(D,x,p)}});return p},_bufferHandler:function(g,k,x,v,A,n){try{var w=g.geometries;g=[];var p,D=w.length;for(p=0;p<D;p++)g[p]=new e({spatialReference:x,rings:w[p].rings});this._successHandler([g],"onBufferComplete",v,n)}catch(C){this._errorHandler(C,A,n)}},onBufferComplete:function(){},areasAndLengths:function(g,k,x){g=y.mixin({},this._url.query,{f:"json"},g.toJson());var v=this._areasAndLengthsHandler,
A=this._errorHandler,n=new q(f._dfdCanceller);n._pendingDfd=h({url:this._url.path+"/areasAndLengths",content:g,callbackParamName:"callback",load:function(w,p){v(w,p,k,x,n)},error:function(w){A(w,x,n)}});return n},_areasAndLengthsHandler:function(g,k,x,v,A){try{this._successHandler([g],"onAreasAndLengthsComplete",x,A)}catch(n){this._errorHandler(n,v,A)}},onAreasAndLengthsComplete:function(){},lengths:function(g,k,x){g=y.mixin({},this._url.query,{f:"json"},g.toJson());var v=this._lengthsHandler,A=this._errorHandler,
n=new q(f._dfdCanceller);n._pendingDfd=h({url:this._url.path+"/lengths",content:g,callbackParamName:"callback",load:function(w,p){v(w,p,k,x,n)},error:function(w){A(w,x,n)}});return n},_lengthsHandler:function(g,k,x,v,A){try{this._successHandler([g],"onLengthsComplete",x,A)}catch(n){this._errorHandler(n,v,A)}},onLengthsComplete:function(){},labelPoints:function(g,k,x){var v=c.map(g,function(D){return D.toJson()}),A=g[0].spatialReference;v=y.mixin({},this._url.query,{f:"json",sr:A.wkid?A.wkid:u.toJson(A.toJson()),
polygons:u.toJson(v)});var n=this._labelPointsHandler,w=this._errorHandler,p=new q(f._dfdCanceller);p._pendingDfd=h({url:this._url.path+"/labelPoints",content:v,callbackParamName:"callback",load:function(D,C){n(D,C,g,A,k,x,p)},error:function(D){w(D,x,p)}});return p},_labelPointsHandler:function(g,k,x,v,A,n,w){try{var p=[];c.forEach(g.labelPoints,function(D){p.push(t.fromJson(D).setSpatialReference(v))});this._successHandler([p],"onLabelPointsComplete",A,w)}catch(D){this._errorHandler(D,n,w)}},onLabelPointsComplete:function(){},
relation:function(g,k,x){g=y.mixin({},this._url.query,{f:"json"},g.toJson());var v=this._relationHandler,A=this._errorHandler,n=new q(f._dfdCanceller);n._pendingDfd=h({url:this._url.path+"/relation",content:g,callbackParamName:"callback",load:function(w,p){v(w,p,k,x,n)},error:function(w){A(w,x,n)}});return n},_relationHandler:function(g,k,x,v,A){try{this._successHandler([g.relations],"onRelationComplete",x,A)}catch(n){this._errorHandler(n,v,A)}},onRelationComplete:function(){},trimExtend:function(g,
k,x){var v=y.mixin({},this._url.query,{f:"json"},g.toJson()),A=g.sr,n=this._trimExtendHandler,w=this._errorHandler,p=new q(f._dfdCanceller);p._pendingDfd=h({url:this._url.path+"/trimExtend",content:v,callbackParamName:"callback",load:function(D,C){n(D,C,A,k,x,p)},error:function(D){w(D,x,p)}});return p},_trimExtendHandler:function(g,k,x,v,A,n){try{var w=g.geometries;g=[];var p,D=w.length;for(p=0;p<D;p++)g[p]=new b({spatialReference:x,paths:w[p].paths});this._successHandler([g],"onTrimExtendComplete",
v,n)}catch(C){this._errorHandler(C,A,n)}},onTrimExtendComplete:function(){},densify:function(g,k,x){var v=y.mixin({},this._url.query,{f:"json"},g.toJson()),A=g.geometries[0].spatialReference,n=this._densifyHandler,w=this._errorHandler,p=new q(f._dfdCanceller);p._pendingDfd=h({url:this._url.path+"/densify",content:v,callbackParamName:"callback",load:function(D,C){n(D,C,A,k,x,p)},error:function(D){w(D,x,p)}});return p},_densifyHandler:function(g,k,x,v,A,n){try{var w=[];c.forEach(g.geometries,function(p){w.push(t.fromJson(p).setSpatialReference(x))});
this._successHandler([w],"onDensifyComplete",v,n)}catch(p){this._errorHandler(p,A,n)}},onDensifyComplete:function(){},generalize:function(g,k,x){var v=y.mixin({},this._url.query,{f:"json"},g.toJson()),A=g.geometries[0].spatialReference,n=this._generalizeHandler,w=this._errorHandler,p=new q(f._dfdCanceller);p._pendingDfd=h({url:this._url.path+"/generalize",content:v,callbackParamName:"callback",load:function(D,C){n(D,C,A,k,x,p)},error:function(D){w(D,x,p)}});return p},_generalizeHandler:function(g,
k,x,v,A,n){try{var w=[];c.forEach(g.geometries,function(p){w.push(t.fromJson(p).setSpatialReference(x))});this._successHandler([w],"onGeneralizeComplete",v,n)}catch(p){this._errorHandler(p,A,n)}},onGeneralizeComplete:function(){},offset:function(g,k,x){var v=y.mixin({},this._url.query,{f:"json"},g.toJson()),A=g.geometries[0].spatialReference,n=this._offsetHandler,w=this._errorHandler,p=new q(f._dfdCanceller);p._pendingDfd=h({url:this._url.path+"/offset",content:v,callbackParamName:"callback",load:function(D,
C){n(D,C,A,k,x,p)},error:function(D){w(D,x,p)}});return p},_offsetHandler:function(g,k,x,v,A,n){try{var w=[];c.forEach(g.geometries,function(p){w.push(t.fromJson(p).setSpatialReference(x))});this._successHandler([w],"onOffsetComplete",v,n)}catch(p){this._errorHandler(p,A,n)}},onOffsetComplete:function(){},distance:function(g,k,x){var v=y.mixin({},this._url.query,{f:"json"},g.toJson()),A=g.geometry1.spatialReference,n=this._distanceHandler,w=this._errorHandler,p=new q(f._dfdCanceller);p._pendingDfd=
h({url:this._url.path+"/distance",content:v,callbackParamName:"callback",load:function(D,C){n(D,C,A,k,x,p)},error:function(D){w(D,x,p)}});return p},_distanceHandler:function(g,k,x,v,A,n){try{g=g&&g.distance,this._successHandler([g],"onDistanceComplete",v,n)}catch(w){this._errorHandler(w,A,n)}},onDistanceComplete:function(){},toGeoCoordinateString:function(g,k,x){var v={};y.isObject(g.sr)?v.sr=g.sr.wkid||u.toJson(g.sr.toJson()):v.sr=g.sr;v.coordinates=u.toJson(g.coordinates);v.conversionType=g.conversionType||
"MGRS";v.conversionMode=g.conversionMode;v.numOfDigits=g.numOfDigits;v.rounding=g.rounding;v.addSpaces=g.addSpaces;g=y.mixin({},this._url.query,{f:"json"},v);var A=this._toGeoCoordinateHandler,n=this._errorHandler,w=new q(f._dfdCanceller);w._pendingDfd=h({url:this._url.path+"/toGeoCoordinateString",content:g,callbackParamName:"callback",load:function(p,D){A(p,D,k,x,w)},error:function(p){n(p,x,w)}});return w},_toGeoCoordinateHandler:function(g,k,x,v,A){try{this._successHandler([g.strings],"onToGeoCoordinateStringComplete",
x,A)}catch(n){this._errorHandler(n,v,A)}},onToGeoCoordinateStringComplete:function(){},fromGeoCoordinateString:function(g,k,x){var v={};y.isObject(g.sr)?v.sr=g.sr.wkid||u.toJson(g.sr.toJson()):v.sr=g.sr;v.strings=u.toJson(g.strings);v.conversionType=g.conversionType||"MGRS";v.conversionMode=g.conversionMode;g=y.mixin({},this._url.query,{f:"json"},v);var A=this._fromGeoCoordinateHandler,n=this._errorHandler,w=new q(f._dfdCanceller);w._pendingDfd=h({url:this._url.path+"/fromGeoCoordinateString",content:g,
callbackParamName:"callback",load:function(p,D){A(p,D,k,x,w)},error:function(p){n(p,x,w)}});return w},_fromGeoCoordinateHandler:function(g,k,x,v,A){try{this._successHandler([g.coordinates],"onToGeoCoordinateStringComplete",x,A)}catch(n){this._errorHandler(n,v,A)}},onFromGeoCoordinateStringComplete:function(){}});y.mixin(B,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,
UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,
UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,
UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",
UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});l("extend-esri")&&y.setObject("tasks.GeometryService",B,m);return B})},"url:dijit/form/templates/Button.html":'\x3cspan class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\r\n\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonNode"\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" role\x3d"presentation"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode,focusNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitToggleButtonIconChar"\x3e\x26#x25CF;\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen"\r\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick"\r\n\t\ttabIndex\x3d"-1" aria-hidden\x3d"true" data-dojo-attach-point\x3d"valueNode"\r\n/\x3e\x3c/span\x3e\r\n',
"url:dijit/form/templates/DropDownButton.html":'\x3cspan class\x3d"dijit dijitReset dijitInline"\r\n\t\x3e\x3cspan class\x3d\'dijitReset dijitInline dijitButtonNode\'\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" data-dojo-attach-point\x3d"_buttonNode"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"focusNode,titleNode,_arrowWrapperNode,_popupStateNode"\r\n\t\t\trole\x3d"button" aria-haspopup\x3d"true" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon"\r\n\t\t\t\tdata-dojo-attach-point\x3d"iconNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitArrowButtonInner"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitArrowButtonChar"\x3e\x26#9660;\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen" tabIndex\x3d"-1"\r\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick" data-dojo-attach-point\x3d"valueNode" aria-hidden\x3d"true"\r\n/\x3e\x3c/span\x3e\r\n',
"url:dijit/form/templates/ComboButton.html":'\x3ctable class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tcellspacing\x3d\'0\' cellpadding\x3d\'0\' role\x3d"presentation"\r\n\t\x3e\x3ctbody role\x3d"presentation"\x3e\x3ctr role\x3d"presentation"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitStretch dijitButtonNode" data-dojo-attach-point\x3d"buttonNode" data-dojo-attach-event\x3d"ondijitclick:__onClick,onkeydown:_onButtonKeyDown"\r\n\t\t\x3e\x3cdiv id\x3d"${id}_button" class\x3d"dijitReset dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInline dijitButtonText" id\x3d"${id}_label" data-dojo-attach-point\x3d"containerNode" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd id\x3d"${id}_arrow" class\x3d\'dijitReset dijitRight dijitButtonNode dijitArrowButton\'\r\n\t\t\tdata-dojo-attach-point\x3d"_popupStateNode,focusNode,_buttonNode"\r\n\t\t\tdata-dojo-attach-event\x3d"onkeydown:_onArrowKeyDown"\r\n\t\t\ttitle\x3d"${optionsTitle}"\r\n\t\t\trole\x3d"button" aria-haspopup\x3d"true"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitArrowButtonInner" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitArrowButtonChar" role\x3d"presentation"\x3e\x26#9660;\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd style\x3d"display:none !important;"\r\n\t\t\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" data-dojo-attach-point\x3d"valueNode"\r\n\t\t\t\tclass\x3d"dijitOffScreen" aria-hidden\x3d"true" data-dojo-attach-event\x3d"onclick:_onClick"\r\n\t\t/\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\r\n\x3e\x3c/table\x3e\r\n',
"url:dijit/templates/TooltipDialog.html":'\x3cdiv role\x3d"alertdialog" tabIndex\x3d"-1"\x3e\r\n\t\x3cdiv class\x3d"dijitTooltipContainer" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"contentsNode" class\x3d"dijitTooltipContents dijitTooltipFocusNode"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\r\n\t\t\t${!actionBarTemplate}\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTooltipConnector" role\x3d"presentation" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:esri/core/request/iframe.html":'\x3c!DOCTYPE html\x3e\r\n\x3chtml\x3e\r\n\x3chead\x3e\r\n  \x3cmeta http-equiv\x3d"Content-Security-Policy" content\x3d"default-src \'none\'; script-src * \'unsafe-inline\'"\x3e\r\n\r\n  \x3cscript\x3e\r\n    var dojoConfig \x3d {\r\n      async: true,\r\n      baseUrl: "../../../dojo/",\r\n      has: {\r\n        "csp-restrictions": true,\r\n        "dojo-preload-i18n-Api": false\r\n      }\r\n    };\r\n  \x3c/script\x3e\r\n  \x3c!--\r\n  This src is relative to this page and assumes dojo is a sibling to esri.\r\n  It is updated when this file is set as the iframe\'s `srcdoc` value.\r\n  --\x3e\r\n  \x3cscript src\x3d"../../../dojo/dojo.js"\x3e\x3c/script\x3e\r\n\r\n  \x3cscript\x3e\r\n    function windowMessageHandler(event) {\r\n      window.removeEventListener("message", windowMessageHandler);\r\n\r\n      var port \x3d event.ports[0];\r\n\r\n      require([\r\n        "dojo/request/script"\r\n      ], function(script) {\r\n        port.postMessage("ready");\r\n\r\n        port.addEventListener("message", function(event) {\r\n          var data \x3d event.data;\r\n          script.get(data.url, data.options)\r\n              .then(function(response) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  response: response\r\n                });\r\n              })\r\n              .otherwise(function(error) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  isError: true,\r\n                  message: error.message\r\n                });\r\n              });\r\n        });\r\n        port.start();\r\n      });\r\n    }\r\n\r\n    window.addEventListener("message", windowMessageHandler);\r\n  \x3c/script\x3e\r\n\x3c/head\x3e\r\n\x3cbody\x3e\r\n\x3c/body\x3e\r\n\x3c/html\x3e\r\n',
"url:dijit/templates/Dialog.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\r\n\t${!actionBarTemplate}\r\n\x3c/div\x3e\r\n\r\n',
"url:dijit/form/templates/TextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft" id\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\r\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',"url:dijit/templates/Tooltip.html":'\x3cdiv class\x3d"dijitTooltip dijitTooltipLeft" id\x3d"dojoTooltip" data-dojo-attach-event\x3d"mouseenter:onMouseEnter,mouseleave:onMouseLeave"\r\n\t\x3e\x3cdiv class\x3d"dijitTooltipConnector" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitTooltipContainer dijitTooltipContents" data-dojo-attach-point\x3d"containerNode" role\x3d\'alert\'\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"url:dijit/form/templates/ValidationTextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tid\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t/\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\r\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"*now":function(B){B(['dojo/i18n!*preload*esri/nls/jsapi*["ar","bs","ca","cs","da","de","de-ch","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","fr-ch","he","hr","hu","id","it","it-ch","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("esri/jsapi","dojo/fx/Toggler dojo/_base/html dijit/_base dijit/form/DropDownButton dijit/form/ComboButton dijit/form/ToggleButton dijit/_base/manager dijit/TooltipDialog ./main ./map ./geometry ./symbol ./renderer ./utils ./IdentityManager ./layers/graphics ./layers/agstiled ./layers/agsdynamic ./layers/FeatureLayer ./dijit/PopupTemplate ./dijit/PopupRenderer ./dijit/Attribution ./arcgis/utils ./tasks/query ./tasks/QueryTask ./tasks/RelationshipQuery ./tasks/StatisticDefinition".split(" "),function(){return{}});